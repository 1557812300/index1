/*! For license information please see common.17281126.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return j})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return N})),n.d(t,"d",(function(){return L})),n.d(t,"b",(function(){return T}));var r=n(36),o=n(289),a=n(964),i=n(1213),c=n(1325),u=n(250);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var d={};function p(){}function m(){}function h(){}var y={};c(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==l(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,c(g,"constructor",h),c(h,"constructor",m),m.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function f(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,c,"next",e)}function c(e){f(a,r,o,i,c,"throw",e)}i(void 0)}))}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r.ajax.ajaxSetup&&r.ajax.ajaxSetup({withInputCharset:!1});var y=window.navigator.userAgent.includes("Android"),v="network",b="server",g={buildHttpError:function(e,t,n){n=n||{},e.type=t,e.ctx={onError:n.onError||null,ignoreGlobalMessage:n.ignoreGlobalMessage||!1};var r=window.g_app&&window.g_app._store.dispatch||window.app&&window.app._store.dispatch;return Object(c.a)(e,r),e.ctx.onError=function(){return!0},e},unsuccessfulResponseToError:function(e,t){if(!e)return new Error("unknown error");var n;try{(n=JSON.parse(e)).message=n.message||n.error||"unknown error"}catch(o){n={message:e}}"Unauthorized"!==n.message&&"401 Unauthorized"!==n.message||(n.message="Unauthorized");var r=new Error(n.message);return Object.assign(r,n),this.buildHttpError(r,b,t)},checkFake200Error:function(e,t){if("USER_NOT_LOGIN"===e.buserviceErrorCode){var n=new Error("Unauthorized");throw Object.assign(n,e,{FAKE_200:!0}),this.buildHttpError(n,b,t)}}},_=function(e,t){return e?e.status>=200&&e.status<300?e.json().then((function(e){return g.checkFake200Error(e,t),e})).catch((function(e){if(e.FAKE_200)throw e})):e.text().then((function(e){throw g.unsuccessfulResponseToError(e,t)})):Promise.resolve({})},w=["password","confirm_password","premium_id_card_no"],E=["body_asl","body_draft_asl","body_html"],O=function(e){if(!e)return e;var t=!1,n={};for(var r in e)w.includes(r)?n[r]=Object(i.a)(e[r]):E.includes(r)?n[r]=Object(i.b)(e[r]):(e[r]instanceof File&&(t=!0),n[r]=e[r]);if(t){var o=new FormData;for(var a in n)e.hasOwnProperty(a)&&o.append(a,e[a]);return o}return JSON.stringify(n)};function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=m(m({},t),{},{credentials:"include",headers:m(m({"Content-Type":"application/json"},t.headers),{},{Accept:"application/json","X-Requested-With":"XMLHttpRequest","x-csrf-token":Object(u.a)(window,!0)})});if(y&&("DELETE"===n.method?(n.headers["x-http-method-override"]="DELETE",n.method="POST"):"PUT"===n.method&&(n.headers["x-http-method-override"]="PUT",n.method="POST")),window.appData.isServicifyRequest){e.startsWith("/")&&(e=document.location.origin+e);var r=new URL(e);r.searchParams.append("sign_url",encodeURIComponent(window.appData.href)),e=r.toString()}return(!n.headers["Content-Type"]||n.body instanceof FormData)&&delete n.headers["Content-Type"],fetch(e,n).then((function(e){return _(e,t).catch((function(e){throw a.a.logError(e,e.message),e}))}),(function(e){var n=__("网络异常: {message}",{message:e.message});throw a.a.logError(e,n),e.message=n,g.buildHttpError(e,v,t)}))}function j(e,t,n){return k.apply(this,arguments)}function k(){return(k=d(s().mark((function e(t,n,r){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n?"".concat(t,"?").concat(Object(o.stringify)(n)):t,e.abrupt("return",x(a,r));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return C.apply(this,arguments)}function C(){return(C=d(s().mark((function e(t,n,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(t,m({method:"POST",body:O(n)},r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n){return P.apply(this,arguments)}function P(){return(P=d(s().mark((function e(t,n,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(t,m({method:"PUT",body:O(n)},r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,n){return A.apply(this,arguments)}function A(){return(A=d(s().mark((function e(t,n,r){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&Object.keys(n).length>0&&(o=O(n)),e.abrupt("return",x(t,m({method:"DELETE",body:o},r)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){var n=document.createElement("script");n.src=e,document.head.appendChild(n),n.onload=t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(116);n.d(t,"a",(function(){return r.webProxy}))},,,,,,,,function(e,t,n){var r=n(229),o=n(2603),a=n(2171),i=Math.max,c=Math.min;e.exports=function(e,t,n){var u,l,s,f,d,p,m=0,h=!1,y=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=u,r=l;return u=l=void 0,m=t,f=e.apply(r,n)}function g(e){return m=e,d=setTimeout(w,t),h?b(e):f}function _(e){var n=e-p;return void 0===p||n>=t||n<0||y&&e-m>=s}function w(){var e=o();if(_(e))return E(e);d=setTimeout(w,function(e){var n=t-(e-p);return y?c(n,s-(e-m)):n}(e))}function E(e){return d=void 0,v&&u?b(e):(u=l=void 0,f)}function O(){var e=o(),n=_(e);if(u=arguments,l=this,p=e,n){if(void 0===d)return g(p);if(y)return clearTimeout(d),d=setTimeout(w,t),b(p)}return void 0===d&&(d=setTimeout(w,t)),f}return t=a(t)||0,r(n)&&(h=!!n.leading,s=(y="maxWait"in n)?i(a(n.maxWait)||0,t):s,v="trailing"in n?!!n.trailing:v),O.cancel=function(){void 0!==d&&clearTimeout(d),m=0,u=p=l=d=void 0},O.flush=function(){return void 0===d?f:E(o())},O}},,,,,function(e,t,n){var r=n(1289);e.exports=function(e){return r(e,5)}},,function(e,t,n){"use strict";var r;function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={free:0,paid:1,vip:2,trial:3,downgrade_free:4},u={normal:0,welfare:1,education:2,startup:3},l={feedbackUrl:"https://www.yuque.com/feedbacks/new"},s="PAYMENT_CLICK_HASH_MARK",f=[[["https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*wT53TJdYUcoAAAAAAAAAAAAAARQnAQ","语雀携手校宝在线，赋能教育行业信息化转型","https://www.yuque.com/yuque/ykl39r/iqs3t4"],["https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*6GD2QqgRQAwAAAAAAAAAAAAAARQnAQ","新华智云 & 语雀，赋能媒体行业智能化转型","https://www.yuque.com/yuque/ykl39r/ch6fcl"]],[["https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*hsa-SqGFus0AAAAAAAAAAAAAARQnAQ","氪信科技 X 语雀，助力企业高效协同和知识沉淀","https://www.yuque.com/yuque/ykl39r/ya1cg7"],["https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*_AqwQr7cFuAAAAAAAAAAAAAAARQnAQ","💎Ant Design 4.0，脱离业务的框架都是耍流氓","https://www.yuque.com/yuque/ykl39r/gshn5f"]]],d={PUBLIC:{public:1,intranet:2},STATUS:{enabled:0,disabled:1},PAYMENT_STATUS:{trial:0,paying:1,free:2},PAYMENT_TYPE:c,PACKAGE_TYPE:{tryout:0,standard:1,advanced:2,ultimate:3},ORDER_TYPE:{buy:1,upgrade:2,renew:3,buyMember:4,data:5,downgrade:6},BASE_MEMBER:50,MAX_MEMBER:500,MAX_MEMBER_LIMIT:5e3,PUSH_DAYS_BEFROE_EXPIRE:[30,15,7,1],PUSH_TASK:{willExpirePush:"org_will_expire_push",expiredPush:"org_expired_push",willDeletePush:"org_will_delete_push",deletedPush:"org_deleted_push",uploadExhaustPush:"org_upload_exhaust_push"},DEPARTMENT_TASK:{addMember:"org_add_member",updateMember:"org_update_member",deleteMember:"org_delete_member",addDepartment:"org_add_department",updateDepartment:"org_update_department",deleteDepartment:"org_delete_department",syncOrganization:"org_sync",syncDeptOrgUser:"org_sync_dept_org_user"},ORDER_TYPE_NAME:{1:"付费空间",2:"升级空间",3:"续费空间",4:"升级空间人数",5:"购买空间上传流量",6:"续费降级"},PACKAGE_TYPE_NAME:{0:"试用版",1:"标准版",2:"高级版",3:"旗舰版"},LOGO:"https://gw.alipayobjects.com/zos/bmw-prod/501b3e5b-8924-45cd-95ee-4c7470570204.svg",DEFAULT_ORGANIZATION_ID:0,DEFAULT_SETTINGS:{allow_dingtalk_app_enable:0,external_enable:0,watermark_enable:0,password_enable:1,corp_sync_name_enable:1,document_copy_enable:1,share_to_outside_enable:1,servicify_enable:0,desktop_enable:1},VIP_FEATURES:["share_to_outside_enable","document_copy_enable","watermark_enable","allow_dingtalk_app_enable","allow_ips","black_search_keywords","domain_vaildates"],PRICE_STAGES:[{member:50,price:999},{member:75,price:1999},{member:100,price:2999},{member:150,price:4999},{member:200,price:6999},{member:500,price:15999},{member:1e3,price:29999},{member:2e3,price:49999},{member:3e3,price:69999},{member:4e3,price:89999},{member:5e3,price:109999},{member:6e3,price:129999},{member:7e3,price:149999},{member:8e3,price:169999},{member:9e3,price:189999},{member:1e4,price:209999}],ADDRESS_BOOK_TYPE:{yuque:"yuque",weixin:"weixin",dingtalk:"dingtalk",teambition:"teambition",feishu:"feishu",custom:"custom"},PUBLIC_DOMAIN_ENABLE:{enable:1,disable:0},SIGN_TERMS:{signed:1,unsigned:0},MAX_SMS_INVITE:50,LEAVING_INFO_ENABLE:{disable:0,enable:1},TOUCH_MAIL:{enable:1,disable:0},MANAGER_TOUCH_SCHEDULE:[{days:0,payment_type:c.free,tpl:"day0_free"},{days:0,payment_type:c.trial,tpl:"day0_trail"},{days:3,tpl:"day3"},{days:15,tpl:"day15"},{days:29,payment_type:c.free,tpl:"day29"},{days:29,payment_type:c.trial,tpl:"day29"}],MANAGER_TOUCH_MAIL_TPL:{day0_free:{content:[{comp:"day0_free_title",margin:"17px"},{comp:"price",margin:"5px"},{comp:"try_free",margin:"60px"},{comp:"about_org",margin:"60px"},{comp:"customer_case",margin:"35px"},{comp:"partners",margin:"11px"}],variables:{name:"day0_free",title:"快速了解语雀空间",clickMark:s,footer:l,customer_case:f}},day0_trial:{content:[{comp:"day0_trial_title",margin:"20px"},{comp:"about_org",margin:"60px"},{comp:"customer_case",margin:"35px"},{comp:"partners",margin:"11px"}],variables:{name:"day0_trial",title:"快速了解语雀空间",footer:l,clickMark:s,customer_case:f}},day3:{footer:l,content:[{comp:"day3_title",margin:"28px"},{comp:"org_desc_card_list",margin:"22px"}],variables:{name:"day3",title:"快速上手语雀空间",footer:l,clickMark:s}},day15:{footer:l,content:[{comp:"day15_title",margin:"29px"},{comp:"help_mail",margin:"37px"},{comp:"qa",margin:"31px"},{comp:"official",margin:"14px"}],variables:{name:"day15",title:"联系语雀获取更多帮助与支持",footer:l,clickMark:s,support:"support@yuque.com",qa:"https://www.yuque.com/feedbacks/new"}},day29_free:{footer:l,content:[{comp:"day29_free_title",margin:"20px"},{comp:"price"},{comp:"try_free",margin:"36px"},{comp:"how_to_pay",margin:"36px"},{comp:"other_service",margin:"20px"}],variables:{name:"day29_free",title:"购买与发票",clickMark:s,footer:l,other_service:{protocol:"https://www.yuque.com/yuque/rvzzxz/uxrkxt",bill:"https://www.yuque.com/yuque/rvzzxz/ktazxv"}}},day29_trial:{footer:l,content:[{comp:"day29_trial_title",margin:"20px"},{comp:"price"},{comp:"free_paid_switch",margin:"36px"},{comp:"how_to_pay",margin:"36px"},{comp:"other_service",margin:"20px"}],variables:{name:"day29_trial",title:"购买与发票",footer:l,clickMark:s,free_paid_switch:{free:s},other_service:{protocol:"https://www.yuque.com/yuque/rvzzxz/uxrkxt",bill:"https://www.yuque.com/yuque/rvzzxz/ktazxv"},how_to_pay:"https://www.yuque.com/yuque/rvzzxz/wvcdiy"}}},PAYMENT_CLICK_HASH_MARK:s,DINGTALK_QRCODE:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*Jw3CQJNylmUAAAAAAAAAAAAAARQnAQ",CERTIFICATION_TYPE:u,CERTIFICATION_TYPE_MAP:(r={},i(r,u.normal,{name:"普通空间",value:u.normal}),i(r,u.welfare,{name:"公益组织",value:u.welfare,max_member:100}),i(r,u.education,{name:"教育组织",value:u.education,max_member:100}),i(r,u.startup,{name:"初创企业",value:u.startup,max_member:100}),r)},p=a(a({},d.ADDRESS_BOOK_TYPE),{},{dingtalk_selfcorp:"dingtalk"});d.ADDRESS_BOOK_TYPE_CORP_MAP=p,e.exports=d},,,,,function(e,t,n){"use strict";var r=n(631);t.a=r.adminproProxy},,function(e,t,n){var r=n(1176);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},,,,,,function(e,t,n){var r=n(2166),o=n(1995)((function(e,t,n){r(e,t,n)}));e.exports=o},,,,,,,function(e,t,n){var r=n(42),o=n(229);e.exports=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:a,maxWait:t,trailing:i})}},function(e,t,n){"use strict";var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=r.F1&&t<=r.F12)return!1;switch(t){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=r.ZERO&&e<=r.NINE)return!0;if(e>=r.NUM_ZERO&&e<=r.NUM_MULTIPLY)return!0;if(e>=r.A&&e<=r.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};t.a=r},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return k}));var r=n(14),o=n(0),a=n(216),i=n(543),c=n(399),u=n(57),l=n(58),s=n(66),f=n(72),d=n(95),p=n(693),m=n(1211),h="internalMark",y=function(e){Object(s.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(u.a)(this,n),r=t.call(this,e),Object(p.a)(e.locale&&e.locale.Modal),Object(d.a)(e._ANT_MARK__===h,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead: http://u.ant.design/locale"),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){Object(p.a)(this.props.locale&&this.props.locale.Modal)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locale;e.locale!==t&&Object(p.a)(t&&t.Modal)}},{key:"componentWillUnmount",value:function(){Object(p.a)()}},{key:"render",value:function(){var e=this.props,t=e.locale,n=e.children;return o.createElement(m.a.Provider,{value:Object(r.default)(Object(r.default)({},t),{exist:!0})},n)}}]),n}(o.Component);y.defaultProps={locale:{}};var v,b=n(158),g=n(257),_=n(132),w=n(98),E=n(624),O=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale","pageHeader"],x=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","form"];function j(){return v||"ant"}var k=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat(j(),"-").concat(e):j())},getRootPrefixCls:function(e,t){return e||(v||(t&&t.includes("-")?t.replace(/^(.*)-[^-]*$/,"$1"):j()))}}},S=function(e){var t=e.children,n=e.csp,u=e.autoInsertSpaceInButton,l=e.form,s=e.locale,f=e.componentSize,d=e.direction,p=e.space,m=e.virtual,v=e.dropdownMatchSelectWidth,b=e.legacyLocale,w=e.parentContext,E=e.iconPrefixCls,O=o.useCallback((function(t,n){var r=e.prefixCls;if(n)return n;var o=r||w.getPrefixCls("");return t?"".concat(o,"-").concat(t):o}),[w.getPrefixCls,e.prefixCls]),j=Object(r.default)(Object(r.default)({},w),{csp:n,autoInsertSpaceInButton:u,locale:s||b,direction:d,space:p,virtual:m,dropdownMatchSelectWidth:v,getPrefixCls:O});x.forEach((function(t){var n=e[t];n&&(j[t]=n)}));var k=Object(c.a)((function(){return j}),j,(function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((function(n){return e[n]!==t[n]}))})),S=o.useMemo((function(){return{prefixCls:E,csp:n}}),[E]),C=t,N={};return s&&s.Form&&s.Form.defaultValidateMessages&&(N=s.Form.defaultValidateMessages),l&&l.validateMessages&&(N=Object(r.default)(Object(r.default)({},N),l.validateMessages)),Object.keys(N).length>0&&(C=o.createElement(i.b,{validateMessages:N},t)),s&&(C=o.createElement(y,{locale:s,_ANT_MARK__:h},C)),E&&(C=o.createElement(a.a.Provider,{value:S},C)),f&&(C=o.createElement(_.a,{size:f},C)),o.createElement(g.b.Provider,{value:k},C)},C=function(e){return o.useEffect((function(){e.direction&&(w.b.config({rtl:"rtl"===e.direction}),E.a.config({rtl:"rtl"===e.direction}))}),[e.direction]),o.createElement(b.a,null,(function(t,n,a){return o.createElement(g.a,null,(function(t){return o.createElement(S,Object(r.default)({parentContext:t,legacyLocale:a},e))}))}))};C.ConfigContext=g.b,C.SizeContext=_.b,C.config=function(e){void 0!==e.prefixCls&&(v=e.prefixCls)};t.b=C},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c}));var r={};function o(e,t){0}function a(e,t){0}function i(e,t,n){t||r[n]||(e(!1,n),r[n]=!0)}function c(e,t){i(a,e,t)}t.a=function(e,t){i(o,e,t)}},function(e,t,n){"use strict";var r=n(404),o=n(18),a=n(0),i=n(10),c=n.n(i),u=n(257),l=function(e){return a.createElement(u.a,null,(function(t){var n,r=t.getPrefixCls,i=t.direction,u=e.prefixCls,l=e.className,s=void 0===l?"":l,f=r("input-group",u),d=c()(f,(n={},Object(o.a)(n,"".concat(f,"-lg"),"large"===e.size),Object(o.a)(n,"".concat(f,"-sm"),"small"===e.size),Object(o.a)(n,"".concat(f,"-compact"),e.compact),Object(o.a)(n,"".concat(f,"-rtl"),"rtl"===i),n),s);return a.createElement("span",{className:d,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},e.children)}))},s=n(14),f=n(181),d=n(516),p=n(105),m=n(132),h=n(118),y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},v=a.forwardRef((function(e,t){var n,i,l=e.prefixCls,v=e.inputPrefixCls,b=e.className,g=e.size,_=e.suffix,w=e.enterButton,E=void 0!==w&&w,O=e.addonAfter,x=e.loading,j=e.disabled,k=e.onSearch,S=e.onChange,C=y(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange"]),N=a.useContext(u.b),P=N.getPrefixCls,T=N.direction,A=a.useContext(m.b),L=g||A,I=a.useRef(null),R=function(e){var t;document.activeElement===(null===(t=I.current)||void 0===t?void 0:t.input)&&e.preventDefault()},D=function(e){var t;k&&k(null===(t=I.current)||void 0===t?void 0:t.input.value,e)},M=P("input-search",l),F=P("input",v),B="boolean"==typeof E||void 0===E?a.createElement(d.a,null):null,U="".concat(M,"-button"),z=E||{},G=z.type&&!0===z.type.__ANT_BUTTON;i=G||"button"===z.type?Object(h.a)(z,Object(s.default)({onMouseDown:R,onClick:D,key:"enterButton"},G?{className:U,size:L}:{})):a.createElement(p.a,{className:U,type:E?"primary":void 0,size:L,disabled:j,key:"enterButton",onMouseDown:R,onClick:D,loading:x,icon:B},E),O&&(i=[i,Object(h.a)(O,{key:"addonAfter"})]);var V=c()(M,(n={},Object(o.a)(n,"".concat(M,"-rtl"),"rtl"===T),Object(o.a)(n,"".concat(M,"-").concat(L),!!L),Object(o.a)(n,"".concat(M,"-with-button"),!!E),n),b);return a.createElement(r.a,Object(s.default)({ref:Object(f.a)(I,t),onPressEnter:D},C,{size:L,prefixCls:F,addonAfter:i,suffix:_,onChange:function(e){e&&e.target&&"click"===e.type&&k&&k(e.target.value,e),S&&S(e)},className:V,disabled:j}))}));v.displayName="Search";var b=v,g=n(1318),_=n(28),w=n(126),E=n(539),O=n(687),x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},j={click:"onClick",hover:"onMouseOver"},k=a.forwardRef((function(e,t){var n=Object(a.useState)(!1),i=Object(_.a)(n,2),l=i[0],f=i[1],d=function(){e.disabled||f(!l)},p=function(n){var i=n.getPrefixCls,u=e.className,f=e.prefixCls,p=e.inputPrefixCls,m=e.size,h=e.visibilityToggle,y=x(e,["className","prefixCls","inputPrefixCls","size","visibilityToggle"]),v=i("input",p),b=i("input-password",f),g=h&&function(t){var n,r=e.action,i=e.iconRender,c=j[r]||"",u=(void 0===i?function(){return null}:i)(l),s=(n={},Object(o.a)(n,c,d),Object(o.a)(n,"className","".concat(t,"-icon")),Object(o.a)(n,"key","passwordIcon"),Object(o.a)(n,"onMouseDown",(function(e){e.preventDefault()})),Object(o.a)(n,"onMouseUp",(function(e){e.preventDefault()})),n);return a.cloneElement(a.isValidElement(u)?u:a.createElement("span",null,u),s)}(b),_=c()(b,u,Object(o.a)({},"".concat(b,"-").concat(m),!!m)),E=Object(s.default)(Object(s.default)({},Object(w.a)(y,["suffix","iconRender"])),{type:l?"text":"password",className:_,prefixCls:v,suffix:g});return m&&(E.size=m),a.createElement(r.a,Object(s.default)({ref:t},E))};return a.createElement(u.a,null,p)}));k.defaultProps={action:"click",visibilityToggle:!0,iconRender:function(e){return e?a.createElement(E.a,null):a.createElement(O.a,null)}},k.displayName="Password";var S=k;r.a.Group=l,r.a.Search=b,r.a.TextArea=g.a,r.a.Password=S;t.a=r.a},,,,function(e,t,n){"use strict";var r={LAKE:"Lake",LAKE_COLLAB:"LakeCollab",LAKE_EMBED:"LakeEmbed",LAKE_EMBED_EXTREME:"LakeEmbedExtreme",MARKDOWN:"Markdown",SHEET:"Sheet",SHEET_COLLAB:"SheetCollab",ASL:"Asl",MIND:"Mind",BOARD:"Board",SHOW:"Show",TABLE:"Table",TABLE_COLLAB:"TableCollab"},o={MARKDOWN:"markdown",ASL:"asl",LAKE:"lake",LAKEX:"lakex",SPREADJS:"spreadjs",HTML:"html",LAKESHEET:"lakesheet",LAKESHEET_HTML:"lakesheet_html",TEXT:"text",LAKEMIND:"lakemind",LAKEBOARD:"lakeboard",LAKESHOW:"lakeshow",LAKETABLE:"laketable"},a={WORD:{key:"word",name:"Word",extensions:[".docx",".doc"],type:"doc",icon:"https://gw.alipayobjects.com/zos/basement_prod/408f32c8-8385-4562-b037-c35ea82d2563.svg"},WPS:{key:"wps",name:"WPS",extensions:[".wps"],type:"doc",icon:"https://gw.alipayobjects.com/zos/basement_prod/5cb3151c-100f-4410-a7c2-63621110f4b9.svg"},MARKDOWN:{key:"markdown",name:"Markdown",extensions:[".md",".markdown",".mark",".txt"],type:"doc",icon:"https://gw.alipayobjects.com/zos/basement_prod/759ce648-47b7-46a4-8d56-66247bf923fc.svg"},PAGES:{key:"pages",name:"Pages",extensions:[".pages"],type:"doc",icon:"https://gw.alipayobjects.com/zos/basement_prod/bf741fca-bb02-49ed-b348-c83e977496c7.svg"},EXCEL:{key:"excel",name:"Excel",extensions:[".xlsx",".xls",".csv"],type:"doc",icon:"https://gw.alipayobjects.com/zos/basement_prod/5fdf1f7c-4a2f-4bd0-9d6b-6803b8bb86b6.svg"},LAKEBOOK:{key:"lakebook",name:"Lakebook",extensions:[".lakebook"],type:"book",icon:"https://gw.alipayobjects.com/zos/basement_prod/b23adb0f-b767-400d-9a26-b588a69e9937.svg"},LAKE:{key:"lake",name:"Lake",extensions:[".lake"],type:"doc",icon:"https://gw.alipayobjects.com/zos/bmw-prod/a5e08988-7e74-4c25-b165-685a815644d7.svg"},LAKESHEET:{key:"lakesheet",name:"LakeSheet",extensions:[".lakesheet"],type:"doc",icon:"https://gw.alipayobjects.com/zos/bmw-prod/270f160a-537c-4d55-9566-1973009229c7.svg"},LAKEMIND:{key:"lakemind",name:"LakeMind",extensions:[".lakemind"],type:"doc",icon:"https://gw.alipayobjects.com/zos/bmw-prod/f7937bb8-2f24-41b6-a6d2-ac77777ee2d2.svg"},LAKEBOARD:{key:"lakeboard",name:"LakeBoard",extensions:[".lakeboard",".lakemind"],type:"doc",icon:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*LWh4QLOft30AAAAAAAAAAAAAARQnAQ"},LAKESHOW:{key:"lakeshow",name:"LakeShow",extensions:[".lakeshow"],type:"doc",icon:"https://gw.alipayobjects.com/zos/bmw-prod/a5249a1c-4a7b-4e0b-8d1f-b87924f34cfd.svg"},LAKETABLE:{key:"laketable",name:"LakeTable",extensions:[".laketable"],type:"doc",icon:"https://gw.alipayobjects.com/zos/bmw-prod/7a6c8901-3f7a-4deb-bd9f-b1d5fe138898.svg"},PDF:{key:"pdf",name:"PDF",extensions:[".pdf"],type:"doc",icon:"https://gw.alipayobjects.com/zos/basement_prod/59ddca13-029e-481f-ba4e-a3a30e047e24.svg"},JPG:{key:"jpg",name:"JPG",extensions:[".jpg"],type:"doc",icon:"https://gw.alipayobjects.com/zos/bmw-prod/18cb99ea-ac22-4b36-9f5d-7e0820d81c72.svg"},PNG:{key:"png",name:"PNG",extensions:[".png"],type:"doc",icon:"https://gw.alipayobjects.com/zos/bmw-prod/e7c3141e-9f02-4d29-8088-37bc29ea2669.svg"},HTML:{key:"html",name:"HTML",extensions:[".html"],type:"doc",icon:"https://gw.alipayobjects.com/zos/basement_prod/5eb1b8ae-c511-4a34-ab69-94f9bce89466.svg"},CONFLUENCE:{key:"confluence",name:"Confluence",extensions:[".zip"],type:"book",icon:"https://gw.alipayobjects.com/zos/basement_prod/fca422db-733d-4bdc-8884-df15f2a579a5.svg"},GITBOOK:{key:"gitbook",name:"GitBook",extensions:[".zip"],type:"book",icon:"https://gw.alipayobjects.com/zos/basement_prod/f2b61f23-dfe3-476b-8e67-48c1ce2848ff.svg"},EVERNOTE:{key:"evernote",name:"Evernote",extensions:[".zip"],type:"book",icon:"https://gw.alipayobjects.com/zos/basement_prod/da38107c-3a80-4a73-ac05-8242c9d15661.svg"},JIANSHU:{key:"jianshu",name:"简书",extensions:[".rar"],type:"book",status:"ready",icon:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*dg2VTr-a6PwAAAAAAAAAAABkARQnAQ"},ZIP:{key:"zip",name:"HTML or Markdown",extensions:[".zip"],type:"book",icon:"https://gw.alipayobjects.com/zos/bmw-prod/4bb071f4-8080-42ee-bdf4-9dfd19c6428b.svg"}},i={Doc:[a.WORD,a.MARKDOWN,a.PDF,a.LAKE,a.JPG],Sheet:[a.EXCEL,a.LAKESHEET],Mind:[a.JPG,a.PNG,a.LAKEMIND],Board:[a.JPG,a.PNG,a.LAKEBOARD],Show:[a.LAKESHOW,a.PDF],Table:[a.EXCEL,a.LAKETABLE]};e.exports={HTML_DOCTYPE:"<!doctype html>",LAKE_DOCTYPE:"<!doctype lake>",RUN_MODE:{RAS:0,RAW:1},RUN_MODE_RAW_FORMATS:[r.TABLE],FORMAT:o,TYPE:{DOC:"Doc",SHEET:"Sheet",TOPIC:"Topic",COMMENT:"Comment",THREAD:"Thread",MIND:"Mind",BOARD:"Board",SHOW:"Show",TABLE:"Table"},DOC_DEFAULT_TYPE:{DOC:"Doc",SHEET:"Sheet",Mind:"Mind",BOARD:"Board",SHOW:"Show",TABLE:"Table"},SUB_TYPE:{DEFAULT:"default",WEEKLY:"weekly",DAILY:"daily",MEETING:"meeting",Vote:"vote"},FORMATS_RENDER_USE_HTML:["markdown","html"],FORMATS_SAVE_TO_BODY_ASL:["lake","asl","lakex"],FORMATS_SAVE_TO_BODY:["lakesheet","spreadjs","lakemind","lakeboard","lakeshow","laketable"],FORMATS_RENDER_USE_LAKE:[o.ASL,o.MARKDOWN,o.HTML],FORMATS_EXPORT_USE_BODY_FIELD:[o.LAKESHEET,o.LAKESHOW,o.LAKEMIND,o.LAKEBOARD,o.LAKETABLE],DOC_DEFAULT_FORMAT:{Doc:o.MARKDOWN,Sheet:o.LAKESHEET,Mind:o.LAKEMIND,Board:o.LAKEBOARD,Show:o.LAKESHOW,Table:o.LAKETABLE},FORMAT_REPAIR_MAP:{lakemind:"lakeboard"},DOC_ALLOWED_FORMATS:{Sheet:[o.SPREADJS,o.LAKESHEET,o.LAKESHEET_HTML],Doc:[o.HTML,o.ASL,o.MARKDOWN,o.LAKE],Thread:[o.LAKE],Mind:[o.LAKEMIND],Board:[o.LAKEBOARD],Show:[o.LAKESHOW],Table:[o.LAKETABLE]},SUPPORTED_EXPORT_FORMATS:i,SERVER_SUPPORTED_EXPORT_FORMATS:{Doc:["pdf","word","markdown","lake","jpg"],Sheet:["excel","lakesheet","lake"],Mind:["lakemind","lake"],Board:["lakeboard","lake"],Show:["lakeshow","lake","pdf"],Table:["excel","laketable"]},DOC_EXPORT_FORMATS:i.Doc,SHEET_EXPORT_FORMATS:i.Sheet,DOC_IMPORT_FORMATS:[a.WORD,a.MARKDOWN,a.PAGES,a.WPS,a.LAKE,a.CONFLUENCE,a.GITBOOK,a.EVERNOTE,a.ZIP],SHEET_IMPORT_FORMATS:[a.EXCEL,a.LAKESHEET],MIXING_IMPORT_FORMATS:[a.LAKE,a.LAKEBOARD,a.LAKETABLE,a.LAKESHEET,a.LAKEBOOK,a.WORD,a.EXCEL,a.MARKDOWN,a.EVERNOTE],BOOK_EXPORT_FORMATS:[a.LAKEBOOK],IMPORT_TYPE:{CREATE:"create",PARSE:"parse"},EDIT_TYPE:r,COLLAB_ROLE:{EDITOR:"editor",VISITOR:"visitor"},THIRD_PARTY_FORMAT:a,MAX_DOC_VERSION_FOR_USER:30,VIEWPORT:{fixed:"fixed",adapt:"adapt"},PARAGRAPH_SPACING:{relax:"relax",default:"default"},TYPOGRAPHY:{classic:"classic",traditional:"traditional"}}},function(e,t,n){"use strict";n.r(t);var r=n(924);t.default=r.a},,function(e,t,n){"use strict";t.a={wrapper:"Info-module_wrapper_cDOM9",block:"Info-module_block_sgefC",blockTitle:"Info-module_blockTitle_rk05N",blockTitleInline:"Info-module_blockTitleInline_3topf",required:"Info-module_required_S47QQ",placeholder:"Info-module_placeholder_nQfZM",readonlyWrapper:"Info-module_readonlyWrapper_ZRhQC",reviewerWrapper:"Info-module_reviewerWrapper_ZiwCW",flex:"Info-module_flex_J0FSJ",descText:"Info-module_descText_JA99V",btnAddReviewer:"Info-module_btnAddReviewer_dTAt1",addReviewerBtnIcon:"Info-module_addReviewerBtnIcon_F20As",reviewerList:"Info-module_reviewerList_Rv+Px",reviewerItemLite:"Info-module_reviewerItemLite_0uWgx",reviewerStatusWrapper:"Info-module_reviewerStatusWrapper_WK9wG",reviewerAvatarWrapper:"Info-module_reviewerAvatarWrapper_rvpZE",rejectStatus:"Info-module_rejectStatus_woOeh",acceptedStatus:"Info-module_acceptedStatus_TL1Yk",incompleteStatus:"Info-module_incompleteStatus_hrNd+",reviewerAvatar:"Info-module_reviewerAvatar_GEw0V",reviewerName:"Info-module_reviewerName_BaP17",reviewerItem:"Info-module_reviewerItem_E9bva",reviewerNameAndAvatar:"Info-module_reviewerNameAndAvatar_sezG8",btnRemove:"Info-module_btnRemove_I2pQp",ccList:"Info-module_ccList_hEFdx",ccName:"Info-module_ccName_HOdjG",reviewerListInline:"Info-module_reviewerListInline_cO5wL",descWrapper:"Info-module_descWrapper_NAdFl",descInput:"Info-module_descInput_4PIAQ",statusThumb:"Info-module_statusThumb_waEuo",statusFinishedzhCn:"Info-module_statusFinishedzhCn_ublXO",statusFinishedenUs:"Info-module_statusFinishedenUs_j08Am",statusCancelledzhCn:"Info-module_statusCancelledzhCn_Oxyah",statusCancelledenUs:"Info-module_statusCancelledenUs_-M9DP",itemStatusNotStarted:"Info-module_itemStatusNotStarted_c3UzU",itemStatusPlanning:"Info-module_itemStatusPlanning_zlnWD",itemStatusInProgress:"Info-module_itemStatusInProgress_2AzTr",miniWrapper:"Info-module_miniWrapper_8qIhN",approveBtn:"Info-module_approveBtn_uQusK",tooltip:"Info-module_tooltip_qcsZd",link:"Info-module_link_xW9Ia",startTime:"Info-module_startTime_c9M9N",ccSep:"Info-module_ccSep_a03J-",popoverWrapper:"Info-module_popoverWrapper_hPfWo",approveBtnWrapper:"Info-module_approveBtnWrapper_A8O-+",showMoreBtn:"Info-module_showMoreBtn_bg8HS",iconDown:"Info-module_iconDown_NugP3",iconRight:"Info-module_iconRight_RQeR5",baiyanWrapper:"Info-module_baiyanWrapper_BzQfy",baiyanBtn:"Info-module_baiyanBtn_1qWwn",baiyanDesc:"Info-module_baiyanDesc_srRM5",errorText:"Info-module_errorText_7iHpe",tasksWrapper:"Info-module_tasksWrapper_KYjB8",taskList:"Info-module_taskList_FphTn",task:"Info-module_task_xdzKF",project:"Info-module_project_nxlTa",milestone:"Info-module_milestone_TZ6sD",milestoneStatus:"Info-module_milestoneStatus_WYJXP",taskItem:"Info-module_taskItem_ND7fO",status:"Info-module_status_aRBoC",taskItemEditable:"Info-module_taskItemEditable_Gu3I-"}},,function(e,t,n){"use strict";var r=n(85);t.a=function(e,t,n){Object(r.a)(e,"[antd: ".concat(t,"] ").concat(n))}},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return C})),n.d(t,"a",(function(){return R}));var r=n(14),o=n(18),a=n(0),i=n(10),c=n.n(i),u=n(1361),l=n(208),s=n(498),f=n(154),d=n(497),p=n(606),m=n(28),h=n(1017),y=n(257);var v,b,g,_,w=n(82),E=3,O=1,x="",j="move-up",k=!1,S=!1;function C(){return O++}function N(e,t){var n=e.prefixCls,r=Object(w.c)(),o=r.getPrefixCls,a=r.getRootPrefixCls,i=o("message",n||x),c=a(e.rootPrefixCls,i);if(v)t({prefixCls:i,rootPrefixCls:c,instance:v});else{var l={prefixCls:i,transitionName:k?j:"".concat(c,"-").concat(j),style:{top:b},getContainer:g,maxCount:_};u.a.newInstance(l,(function(e){v?t({prefixCls:i,rootPrefixCls:c,instance:v}):(v=e,t({prefixCls:i,rootPrefixCls:c,instance:e}))}))}}var P={info:p.a,success:d.a,error:f.a,warning:s.a,loading:l.a};function T(e,t){var n,r=void 0!==e.duration?e.duration:E,i=P[e.type],u=c()("".concat(t,"-custom-content"),(n={},Object(o.a)(n,"".concat(t,"-").concat(e.type),e.type),Object(o.a)(n,"".concat(t,"-rtl"),!0===S),n));return{key:e.key,duration:r,style:e.style||{},className:e.className,content:a.createElement("div",{className:u},e.icon||i&&a.createElement(i,null),a.createElement("span",null,e.content)),onClose:e.onClose,onClick:e.onClick}}var A,L,I={open:function(e){var t=e.key||O++,n=new Promise((function(n){var o=function(){return"function"==typeof e.onClose&&e.onClose(),n(!0)};N(e,(function(n){var a=n.prefixCls;n.instance.notice(T(Object(r.default)(Object(r.default)({},e),{key:t,onClose:o}),a))}))})),o=function(){v&&v.removeNotice(t)};return o.then=function(e,t){return n.then(e,t)},o.promise=n,o},config:function(e){void 0!==e.top&&(b=e.top,v=null),void 0!==e.duration&&(E=e.duration),void 0!==e.prefixCls&&(x=e.prefixCls),void 0!==e.getContainer&&(g=e.getContainer),void 0!==e.transitionName&&(j=e.transitionName,v=null,k=!0),void 0!==e.maxCount&&(_=e.maxCount,v=null),void 0!==e.rtl&&(S=e.rtl)},destroy:function(e){if(v)if(e){(0,v.removeNotice)(e)}else{var t=v.destroy;t(),v=null}}};function R(e,t){e[t]=function(n,o,a){return function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}(n)?e.open(Object(r.default)(Object(r.default)({},n),{type:t})):("function"==typeof o&&(a=o,o=void 0),e.open({content:n,duration:o,type:t,onClose:a}))}}["success","info","warning","error","loading"].forEach((function(e){return R(I,e)})),I.warn=I.warning,I.useMessage=(A=N,L=T,function(){var e,t=null,n={add:function(e,n){null==t||t.component.add(e,n)}},o=Object(h.a)(n),i=Object(m.a)(o,2),c=i[0],u=i[1],l=a.useRef({});return l.current.open=function(n){var o=n.prefixCls,a=e("message",o),i=e(),u=n.key||C(),l=new Promise((function(e){var o=function(){return"function"==typeof n.onClose&&n.onClose(),e(!0)};A(Object(r.default)(Object(r.default)({},n),{prefixCls:a,rootPrefixCls:i}),(function(e){var a=e.prefixCls,i=e.instance;t=i,c(L(Object(r.default)(Object(r.default)({},n),{key:u,onClose:o}),a))}))})),s=function(){t&&t.removeNotice(u)};return s.then=function(e,t){return l.then(e,t)},s.promise=l,s},["success","info","warning","error","loading"].forEach((function(e){return R(l.current,e)})),[l.current,a.createElement(y.a,{key:"holder"},(function(t){return e=t.getPrefixCls,u}))]});t.b=I},,function(e,t,n){"use strict";e.exports={STATUS:{draft:0,publish:1},VIEW_STATUS:{normal:0,archive:1},READ_STATUS:{init:0,ok:1,pending:2,insecure:97,suspect:98,illegal:99,banned:100},PUBLIC:{private:0,public:1,intranet:2,intranet_all:3},TAG:{template:"YUQUE_TEMPLATE"},SAVE_TYPE:{auto:"auto",user:"user"},BODY_FIELDS:["body","body_draft","body_asl","body_draft_asl","premium_body","premium_body_asl","premium_body_draft","premium_body_draft_asl"],META_FIELDS:["public","title","slug","custom_description","custom_cover","show_author_id","show_author_option","show_author_custom_text"],TOC_RELATED_FIELDS:["title","slug","first_published_at","read_status"],SLUG_INVALID_CHAR_RE:/[^\w\-\.]/g,SLUG_VALID_RE:/^[\w\-\.]{2,190}$/,FAVICON:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*z0mlTJu9I88AAAAAAAAAAABkARQnAQ",FAVICON_ALIDOC:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*eT7aS7R158UAAAAAAAAAAABkARQnAQ",SHOW_AUTHOR_OPTION:{all:0,specific_user:1,hide:2,custom_text:3},LIST_DISPLAY_TYPE:{basic:"basic",detail:"detail"}}},function(e,t,n){var r=n(1984);e.exports=function(e,t){return r(e,t)}},,,,function(e,t,n){"use strict";var r=n(851);t.a=r.b},,,function(e,t,n){"use strict";var r=n(14),o=n(57),a=n(58),i=n(66),c=n(72),u=n(0),l=n(18),s=n(11),f=n(40),d=n(28),p=n(55),m=n(10),h=n.n(m),y=n(297),v=n.n(y),b=n(163),g=n(85),_=n(403),w=n(70),E=n(126),O=n(399),x=["children","locked"],j=u.createContext(null);function k(e){var t=e.children,n=e.locked,r=Object(p.a)(e,x),o=u.useContext(j),a=Object(O.a)((function(){return e=o,t=r,n=Object(s.a)({},e),Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n;var e,t,n}),[o,r],(function(e,t){return!(n||e[0]===t[0]&&v()(e[1],t[1]))}));return u.createElement(j.Provider,{value:a},t)}function S(e,t,n,r){var o=u.useContext(j),a=o.activeKey,i=o.onActive,c=o.onInactive,l={active:a===e};return t||(l.onMouseEnter=function(t){null==n||n({key:e,domEvent:t}),i(e)},l.onMouseLeave=function(t){null==r||r({key:e,domEvent:t}),c(e)}),l}var C=["item"];function N(e){var t=e.item,n=Object(p.a)(e,C);return Object.defineProperty(n,"item",{get:function(){return Object(g.a)(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function P(e){var t=e.icon,n=e.props,r=e.children;return("function"==typeof t?u.createElement(t,Object(s.a)({},n)):t)||r||null}function T(e){var t=u.useContext(j),n=t.mode,r=t.rtl,o=t.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:e*o}:{paddingLeft:e*o}}var A=[],L=u.createContext(null);function I(){return u.useContext(L)}var R=u.createContext(A);function D(e){var t=u.useContext(R);return u.useMemo((function(){return void 0!==e?[].concat(Object(f.a)(t),[e]):t}),[t,e])}var M=u.createContext(null),F=u.createContext(null);function B(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function U(e){return B(u.useContext(F),e)}var z=["title","attribute","elementRef"],G=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],V=["active"],Y=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,o=e.elementRef,a=Object(p.a)(e,z),i=Object(E.a)(a,["eventKey"]);return Object(g.a)(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),u.createElement(_.a.Item,Object(r.default)({},n,{title:"string"==typeof t?t:void 0},i,{ref:o}))}}]),n}(u.Component),q=function(e){var t,n=e.style,o=e.className,a=e.eventKey,i=(e.warnKey,e.disabled),c=e.itemIcon,d=e.children,m=e.role,y=e.onMouseEnter,v=e.onMouseLeave,b=e.onClick,g=e.onKeyDown,_=e.onFocus,E=Object(p.a)(e,G),O=U(a),x=u.useContext(j),k=x.prefixCls,C=x.onItemClick,A=x.disabled,L=x.overflowDisabled,I=x.itemIcon,R=x.selectedKeys,M=x.onActive,F="".concat(k,"-item"),B=u.useRef(),z=u.useRef(),q=A||i,H=D(a);var W=function(e){return{key:a,keyPath:Object(f.a)(H).reverse(),item:B.current,domEvent:e}},K=c||I,$=S(a,q,y,v),Q=$.active,X=Object(p.a)($,V),J=R.includes(a),Z=T(H.length),ee={};return"option"===e.role&&(ee["aria-selected"]=J),u.createElement(Y,Object(r.default)({ref:B,elementRef:z,role:null===m?"none":m||"menuitem",tabIndex:i?null:-1,"data-menu-id":L&&O?null:O},E,X,ee,{component:"li","aria-disabled":i,style:Object(s.a)(Object(s.a)({},Z),n),className:h()(F,(t={},Object(l.a)(t,"".concat(F,"-active"),Q),Object(l.a)(t,"".concat(F,"-selected"),J),Object(l.a)(t,"".concat(F,"-disabled"),q),t),o),onClick:function(e){if(!q){var t=W(e);null==b||b(N(t)),C(t)}},onKeyDown:function(e){if(null==g||g(e),e.which===w.a.ENTER){var t=W(e);null==b||b(N(t)),C(t)}},onFocus:function(e){M(a),null==_||_(e)}}),d,u.createElement(P,{props:Object(s.a)(Object(s.a)({},e),{},{isSelected:J}),icon:K}))};var H=function(e){var t=e.eventKey,n=I(),r=D(t);return u.useEffect((function(){if(n)return n.registerPath(t,r),function(){n.unregisterPath(t,r)}}),[r]),n?null:u.createElement(q,e)},W=n(197);function K(e,t){return Object(W.a)(e).map((function(e,n){if(u.isValidElement(e)){var r,o,a=e.key,i=null!==(r=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==r?r:a;null==i&&(i="tmp_key-".concat([].concat(Object(f.a)(t),[n]).join("-")));var c={key:i,eventKey:i};return u.cloneElement(e,c)}return e}))}function $(e){var t=u.useRef(e);t.current=e;var n=u.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var Q=["className","children"],X=function(e,t){var n=e.className,o=e.children,a=Object(p.a)(e,Q),i=u.useContext(j),c=i.prefixCls,l=i.mode,s=i.rtl;return u.createElement("ul",Object(r.default)({className:h()(c,s&&"".concat(c,"-rtl"),"".concat(c,"-sub"),"".concat(c,"-").concat("inline"===l?"inline":"vertical"),n)},a,{"data-menu-list":!0,ref:t}),o)},J=u.forwardRef(X);J.displayName="SubMenuList";var Z=J,ee=n(402),te=n(119),ne={adjustX:1,adjustY:1},re={topLeft:{points:["bl","tl"],overflow:ne,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:ne,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:ne,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:ne,offset:[4,0]}},oe={topLeft:{points:["bl","tl"],overflow:ne,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:ne,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:ne,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:ne,offset:[4,0]}};function ae(e,t,n){return t||(n?n[e]||n.other:void 0)}var ie={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function ce(e){var t=e.prefixCls,n=e.visible,r=e.children,o=e.popup,a=e.popupClassName,i=e.popupOffset,c=e.disabled,f=e.mode,p=e.onVisibleChange,m=u.useContext(j),y=m.getPopupContainer,v=m.rtl,b=m.subMenuOpenDelay,g=m.subMenuCloseDelay,_=m.builtinPlacements,w=m.triggerSubMenuAction,E=m.forceSubMenuRender,O=m.motion,x=m.defaultMotions,k=u.useState(!1),S=Object(d.a)(k,2),C=S[0],N=S[1],P=v?Object(s.a)(Object(s.a)({},oe),_):Object(s.a)(Object(s.a)({},re),_),T=ie[f],A=ae(f,O,x),L=Object(s.a)(Object(s.a)({},A),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),I=u.useRef();return u.useEffect((function(){return I.current=Object(te.a)((function(){N(n)})),function(){te.a.cancel(I.current)}}),[n]),u.createElement(ee.a,{prefixCls:t,popupClassName:h()("".concat(t,"-popup"),Object(l.a)({},"".concat(t,"-rtl"),v),a),stretch:"horizontal"===f?"minWidth":null,getPopupContainer:y,builtinPlacements:P,popupPlacement:T,popupVisible:C,popup:o,popupAlign:i&&{offset:i},action:c?[]:[w],mouseEnterDelay:b,mouseLeaveDelay:g,onPopupVisibleChange:p,forceRender:E,popupMotion:L},r)}var ue=n(228);function le(e){var t=e.id,n=e.open,o=e.keyPath,a=e.children,i="inline",c=u.useContext(j),l=c.prefixCls,f=c.forceSubMenuRender,p=c.motion,m=c.defaultMotions,h=c.mode,y=u.useRef(!1);y.current=h===i;var v=u.useState(!y.current),b=Object(d.a)(v,2),g=b[0],_=b[1],w=!!y.current&&n;u.useEffect((function(){y.current&&_(!1)}),[h]);var E=Object(s.a)({},ae(i,p,m));o.length>1&&(E.motionAppear=!1);var O=E.onVisibleChanged;return E.onVisibleChanged=function(e){return y.current||e||_(!0),null==O?void 0:O(e)},g?null:u.createElement(k,{mode:i,locked:!y.current},u.createElement(ue.b,Object(r.default)({visible:w},E,{forceRender:f,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(e){var n=e.className,r=e.style;return u.createElement(Z,{id:t,className:n,style:r},a)})))}var se=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],fe=["active"],de=function(e){var t,n=e.style,o=e.className,a=e.title,i=e.eventKey,c=(e.warnKey,e.disabled),f=e.internalPopupClose,m=e.children,y=e.itemIcon,v=e.expandIcon,b=e.popupClassName,g=e.popupOffset,w=e.onClick,E=e.onMouseEnter,O=e.onMouseLeave,x=e.onTitleClick,C=e.onTitleMouseEnter,A=e.onTitleMouseLeave,L=Object(p.a)(e,se),I=U(i),R=u.useContext(j),F=R.prefixCls,B=R.mode,z=R.openKeys,G=R.disabled,V=R.overflowDisabled,Y=R.activeKey,q=R.selectedKeys,H=R.itemIcon,W=R.expandIcon,K=R.onItemClick,Q=R.onOpenChange,X=R.onActive,J=u.useContext(M).isSubPathKey,ee=D(),te="".concat(F,"-submenu"),ne=G||c,re=u.useRef(),oe=u.useRef();var ae=y||H,ie=v||W,ue=z.includes(i),de=!V&&ue,pe=J(q,i),me=S(i,ne,C,A),he=me.active,ye=Object(p.a)(me,fe),ve=u.useState(!1),be=Object(d.a)(ve,2),ge=be[0],_e=be[1],we=function(e){ne||_e(e)},Ee=u.useMemo((function(){return he||"inline"!==B&&(ge||J([Y],i))}),[B,he,Y,ge,i,J]),Oe=T(ee.length),xe=$((function(e){null==w||w(N(e)),K(e)})),je=I&&"".concat(I,"-popup"),ke=u.createElement("div",Object(r.default)({role:"menuitem",style:Oe,className:"".concat(te,"-title"),tabIndex:ne?null:-1,ref:re,title:"string"==typeof a?a:null,"data-menu-id":V&&I?null:I,"aria-expanded":de,"aria-haspopup":!0,"aria-controls":je,"aria-disabled":ne,onClick:function(e){ne||(null==x||x({key:i,domEvent:e}),"inline"===B&&Q(i,!ue))},onFocus:function(){X(i)}},ye),a,u.createElement(P,{icon:"horizontal"!==B?ie:null,props:Object(s.a)(Object(s.a)({},e),{},{isOpen:de,isSubMenu:!0})},u.createElement("i",{className:"".concat(te,"-arrow")}))),Se=u.useRef(B);if("inline"!==B&&(Se.current=ee.length>1?"vertical":B),!V){var Ce=Se.current;ke=u.createElement(ce,{mode:Ce,prefixCls:te,visible:!f&&de&&"inline"!==B,popupClassName:b,popupOffset:g,popup:u.createElement(k,{mode:"horizontal"===Ce?"vertical":Ce},u.createElement(Z,{id:je,ref:oe},m)),disabled:ne,onVisibleChange:function(e){"inline"!==B&&Q(i,e)}},ke)}return u.createElement(k,{onItemClick:xe,mode:"horizontal"===B?"vertical":B,itemIcon:ae,expandIcon:ie},u.createElement(_.a.Item,Object(r.default)({role:"none"},L,{component:"li",style:n,className:h()(te,"".concat(te,"-").concat(B),o,(t={},Object(l.a)(t,"".concat(te,"-open"),de),Object(l.a)(t,"".concat(te,"-active"),Ee),Object(l.a)(t,"".concat(te,"-selected"),pe),Object(l.a)(t,"".concat(te,"-disabled"),ne),t)),onMouseEnter:function(e){we(!0),null==E||E({key:i,domEvent:e})},onMouseLeave:function(e){we(!1),null==O||O({key:i,domEvent:e})}}),ke,!V&&u.createElement(le,{id:je,open:de,keyPath:ee},m)))};function pe(e){var t,n=e.eventKey,r=e.children,o=D(n),a=K(r,o),i=I();return u.useEffect((function(){if(i)return i.registerPath(n,o),function(){i.unregisterPath(n,o)}}),[o]),t=i?a:u.createElement(de,e,a),u.createElement(R.Provider,{value:o},t)}var me=n(1334),he=w.a.LEFT,ye=w.a.RIGHT,ve=w.a.UP,be=w.a.DOWN,ge=w.a.ENTER,_e=w.a.ESC,we=[ve,be,he,ye];function Ee(e,t){return Object(me.a)(e,!0).filter((function(e){return t.has(e)}))}function Oe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var o=Ee(e,t),a=o.length,i=o.findIndex((function(e){return n===e}));return r<0?-1===i?i=a-1:i-=1:r>0&&(i+=1),o[i=(i+a)%a]}function xe(e,t,n,r,o,a,i,c,s,f){var d=u.useRef(),p=u.useRef();p.current=t;var m=function(){te.a.cancel(d.current)};return u.useEffect((function(){return function(){m()}}),[]),function(u){var h=u.which;if([].concat(we,[ge,_e]).includes(h)){var y,v,b,g=function(){return y=new Set,v=new Map,b=new Map,a().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(B(r,e),"']"));t&&(y.add(t),b.set(t,e),v.set(e,t))})),y};g();var _=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(v.get(t),y),w=b.get(_),E=function(e,t,n,r){var o,a,i,c,u="prev",s="next",f="children",d="parent";if("inline"===e&&r===ge)return{inlineTrigger:!0};var p=(o={},Object(l.a)(o,ve,u),Object(l.a)(o,be,s),o),m=(a={},Object(l.a)(a,he,n?s:u),Object(l.a)(a,ye,n?u:s),Object(l.a)(a,be,f),Object(l.a)(a,ge,f),a),h=(i={},Object(l.a)(i,ve,u),Object(l.a)(i,be,s),Object(l.a)(i,ge,f),Object(l.a)(i,_e,d),Object(l.a)(i,he,n?f:d),Object(l.a)(i,ye,n?d:f),i);switch(null===(c={inline:p,horizontal:m,vertical:h,inlineSub:p,horizontalSub:h,verticalSub:h}["".concat(e).concat(t?"":"Sub")])||void 0===c?void 0:c[r]){case u:return{offset:-1,sibling:!0};case s:return{offset:1,sibling:!0};case d:return{offset:-1,sibling:!1};case f:return{offset:1,sibling:!1};default:return null}}(e,1===i(w,!0).length,n,h);if(!E)return;we.includes(h)&&u.preventDefault();var O=function(e){if(e){var t=e,n=e.querySelector("a");(null==n?void 0:n.getAttribute("href"))&&(t=n);var r=b.get(e);c(r),m(),d.current=Object(te.a)((function(){p.current===r&&t.focus()}))}};if(E.sibling||!_){var x=Oe(_&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(_):o.current,y,_,E.offset);O(x)}else if(E.inlineTrigger)s(w);else if(E.offset>0)s(w,!0),m(),d.current=Object(te.a)((function(){g();var e=_.getAttribute("aria-controls"),t=Oe(document.getElementById(e),y);O(t)}),5);else if(E.offset<0){var j=i(w,!0),k=j[j.length-2],S=v.get(k);s(k,!1),O(S)}}null==f||f(u)}}var je=Math.random().toFixed(5).toString().slice(2),ke=0;var Se="__RC_UTIL_PATH_SPLIT__",Ce=function(e){return e.join(Se)},Ne="rc-menu-more";function Pe(){var e=u.useState({}),t=Object(d.a)(e,2)[1],n=Object(u.useRef)(new Map),r=Object(u.useRef)(new Map),o=u.useState([]),a=Object(d.a)(o,2),i=a[0],c=a[1],l=Object(u.useRef)(0),s=Object(u.useRef)(!1),p=Object(u.useCallback)((function(e,o){var a=Ce(o);r.current.set(a,e),n.current.set(e,a),l.current+=1;var i,c=l.current;i=function(){c===l.current&&(s.current||t({}))},Promise.resolve().then(i)}),[]),m=Object(u.useCallback)((function(e,t){var o=Ce(t);r.current.delete(o),n.current.delete(e)}),[]),h=Object(u.useCallback)((function(e){c(e)}),[]),y=Object(u.useCallback)((function(e,t){var r=n.current.get(e)||"",o=r.split(Se);return t&&i.includes(o[0])&&o.unshift(Ne),o}),[i]),v=Object(u.useCallback)((function(e,t){return e.some((function(e){return y(e,!0).includes(t)}))}),[y]),b=Object(u.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(Se),o=new Set;return Object(f.a)(r.current.keys()).forEach((function(e){e.startsWith(t)&&o.add(r.current.get(e))})),o}),[]);return u.useEffect((function(){return function(){s.current=!0}}),[]),{registerPath:p,unregisterPath:m,refreshOverflowKeys:h,isSubPathKey:v,getKeyPath:y,getKeys:function(){var e=Object(f.a)(n.current.keys());return i.length&&e.push(Ne),e},getSubPathKeys:b}}var Te=["prefixCls","style","className","tabIndex","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName"],Ae=[],Le=["className","title","eventKey","children"],Ie=["children"],Re=function(e){var t=e.className,n=e.title,o=(e.eventKey,e.children),a=Object(p.a)(e,Le),i=u.useContext(j).prefixCls,c="".concat(i,"-item-group");return u.createElement("li",Object(r.default)({},a,{onClick:function(e){return e.stopPropagation()},className:h()(c,t)}),u.createElement("div",{className:"".concat(c,"-title"),title:"string"==typeof n?n:void 0},n),u.createElement("ul",{className:"".concat(c,"-list")},o))};function De(e){var t=e.children,n=Object(p.a)(e,Ie),r=K(t,D(n.eventKey));return I()?r:u.createElement(Re,Object(E.a)(n,["warnKey"]),r)}function Me(e){var t=e.className,n=e.style,r=u.useContext(j).prefixCls;return I()?null:u.createElement("li",{className:h()("".concat(r,"-item-divider"),t),style:n})}var Fe=function(e){var t,n,o=e.prefixCls,a=void 0===o?"rc-menu":o,i=e.style,c=e.className,m=e.tabIndex,y=void 0===m?0:m,g=e.children,w=e.direction,E=e.id,O=e.mode,x=void 0===O?"vertical":O,j=e.inlineCollapsed,S=e.disabled,C=e.disabledOverflow,P=e.subMenuOpenDelay,T=void 0===P?.1:P,A=e.subMenuCloseDelay,I=void 0===A?.1:A,R=e.forceSubMenuRender,D=e.defaultOpenKeys,B=e.openKeys,U=e.activeKey,z=e.defaultActiveFirst,G=e.selectable,V=void 0===G||G,Y=e.multiple,q=void 0!==Y&&Y,W=e.defaultSelectedKeys,Q=e.selectedKeys,X=e.onSelect,J=e.onDeselect,Z=e.inlineIndent,ee=void 0===Z?24:Z,te=e.motion,ne=e.defaultMotions,re=e.triggerSubMenuAction,oe=void 0===re?"hover":re,ae=e.builtinPlacements,ie=e.itemIcon,ce=e.expandIcon,ue=e.overflowedIndicator,le=void 0===ue?"...":ue,se=e.overflowedIndicatorPopupClassName,fe=e.getPopupContainer,de=e.onClick,me=e.onOpenChange,he=e.onKeyDown,ye=(e.openAnimation,e.openTransitionName,Object(p.a)(e,Te)),ve=K(g,Ae),be=u.useState(!1),ge=Object(d.a)(be,2),_e=ge[0],we=ge[1],Ee=u.useRef(),Oe=function(e){var t=Object(b.a)(e,{value:e}),n=Object(d.a)(t,2),r=n[0],o=n[1];return u.useEffect((function(){ke+=1;var e="".concat(je,"-").concat(ke);o("rc-menu-uuid-".concat(e))}),[]),r}(E),Se="rtl"===w;var Ce=u.useMemo((function(){return"inline"!==x&&"vertical"!==x||!j?[x,!1]:["vertical",j]}),[x,j]),Le=Object(d.a)(Ce,2),Ie=Le[0],Re=Le[1],De=u.useState(0),Me=Object(d.a)(De,2),Fe=Me[0],Be=Me[1],Ue=Fe>=ve.length-1||"horizontal"!==Ie||C,ze=Object(b.a)(D,{value:B,postState:function(e){return e||Ae}}),Ge=Object(d.a)(ze,2),Ve=Ge[0],Ye=Ge[1],qe=function(e){Ye(e),null==me||me(e)},He=u.useState(Ve),We=Object(d.a)(He,2),Ke=We[0],$e=We[1],Qe="inline"===Ie,Xe=u.useRef(!1);u.useEffect((function(){Qe&&$e(Ve)}),[Ve]),u.useEffect((function(){Xe.current?Qe?Ye(Ke):qe(Ae):Xe.current=!0}),[Qe]);var Je=Pe(),Ze=Je.registerPath,et=Je.unregisterPath,tt=Je.refreshOverflowKeys,nt=Je.isSubPathKey,rt=Je.getKeyPath,ot=Je.getKeys,at=Je.getSubPathKeys,it=u.useMemo((function(){return{registerPath:Ze,unregisterPath:et}}),[Ze,et]),ct=u.useMemo((function(){return{isSubPathKey:nt}}),[nt]);u.useEffect((function(){tt(Ue?Ae:ve.slice(Fe+1).map((function(e){return e.key})))}),[Fe,Ue]);var ut=Object(b.a)(U||z&&(null===(t=ve[0])||void 0===t?void 0:t.key),{value:U}),lt=Object(d.a)(ut,2),st=lt[0],ft=lt[1],dt=$((function(e){ft(e)})),pt=$((function(){ft(void 0)})),mt=Object(b.a)(W||[],{value:Q,postState:function(e){return Array.isArray(e)?e:null==e?Ae:[e]}}),ht=Object(d.a)(mt,2),yt=ht[0],vt=ht[1],bt=$((function(e){null==de||de(N(e)),function(e){if(V){var t,n=e.key,r=yt.includes(n);t=q?r?yt.filter((function(e){return e!==n})):[].concat(Object(f.a)(yt),[n]):[n],vt(t);var o=Object(s.a)(Object(s.a)({},e),{},{selectedKeys:t});r?null==J||J(o):null==X||X(o)}!q&&Ve.length&&"inline"!==Ie&&qe(Ae)}(e)})),gt=$((function(e,t){var n=Ve.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Ie){var r=at(e);n=n.filter((function(e){return!r.has(e)}))}v()(Ve,n)||qe(n)})),_t=$(fe),wt=xe(Ie,st,Se,Oe,Ee,ot,rt,ft,(function(e,t){var n=null!=t?t:!Ve.includes(e);gt(e,n)}),he);u.useEffect((function(){we(!0)}),[]);var Et="horizontal"!==Ie||C?ve:ve.map((function(e,t){return u.createElement(k,{key:e.key,overflowDisabled:t>Fe},e)})),Ot=u.createElement(_.a,Object(r.default)({id:E,ref:Ee,prefixCls:"".concat(a,"-overflow"),component:"ul",itemComponent:H,className:h()(a,"".concat(a,"-root"),"".concat(a,"-").concat(Ie),c,(n={},Object(l.a)(n,"".concat(a,"-inline-collapsed"),Re),Object(l.a)(n,"".concat(a,"-rtl"),Se),n)),dir:w,style:i,role:"menu",tabIndex:y,data:Et,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?ve.slice(-t):null;return u.createElement(pe,{eventKey:Ne,title:le,disabled:Ue,internalPopupClose:0===t,popupClassName:se},n)},maxCount:"horizontal"!==Ie||C?_.a.INVALIDATE:_.a.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){Be(e)},onKeyDown:wt},ye));return u.createElement(F.Provider,{value:Oe},u.createElement(k,{prefixCls:a,mode:Ie,openKeys:Ve,rtl:Se,disabled:S,motion:_e?te:null,defaultMotions:_e?ne:null,activeKey:st,onActive:dt,onInactive:pt,selectedKeys:yt,inlineIndent:ee,subMenuOpenDelay:T,subMenuCloseDelay:I,forceSubMenuRender:R,builtinPlacements:ae,triggerSubMenuAction:oe,getPopupContainer:_t,itemIcon:ie,expandIcon:ce,onItemClick:bt,onOpenChange:gt},u.createElement(M.Provider,{value:ct},Ot),u.createElement("div",{style:{display:"none"},"aria-hidden":!0},u.createElement(L.Provider,{value:it},ve))))};Fe.Item=H,Fe.SubMenu=pe,Fe.ItemGroup=De,Fe.Divider=Me;var Be=Fe,Ue=Object(u.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),ze=n(118);var Ge=function(e){var t,n,o=e.popupClassName,a=e.icon,i=e.title,c=u.useContext(Ue),l=c.prefixCls,s=c.inlineCollapsed,f=c.antdMenuTheme,d=D();if(a){var p=Object(ze.b)(i)&&"span"===i.type;n=u.createElement(u.Fragment,null,Object(ze.a)(a,{className:h()(Object(ze.b)(a)?null===(t=a.props)||void 0===t?void 0:t.className:"","".concat(l,"-item-icon"))}),p?i:u.createElement("span",{className:"".concat(l,"-title-content")},i))}else n=s&&!d.length&&i&&"string"==typeof i?u.createElement("div",{className:"".concat(l,"-inline-collapsed-noicon")},i.charAt(0)):i;return u.createElement(Ue.Provider,{value:Object(r.default)(Object(r.default)({},c),{firstLevel:!1})},u.createElement(pe,Object(r.default)({},Object(E.a)(e,["icon"]),{title:n,popupClassName:h()(l,"".concat(l,"-").concat(f),o)})))},Ve=n(151),Ye=n(1028),qe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},He=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).renderItem=function(t){var n,o,a=t.siderCollapsed,i=e.context,c=i.prefixCls,s=i.firstLevel,f=i.inlineCollapsed,d=i.direction,p=e.props,m=p.className,y=p.children,v=e.props,b=v.title,g=v.icon,_=v.danger,w=qe(v,["title","icon","danger"]),E=b;void 0===b?E=s?y:"":!1===b&&(E="");var O={title:E};a||f||(O.title=null,O.visible=!1);var x=Object(W.a)(y).length;return u.createElement(Ve.a,Object(r.default)({},O,{placement:"rtl"===d?"left":"right",overlayClassName:"".concat(c,"-inline-collapsed-tooltip")}),u.createElement(H,Object(r.default)({},w,{className:h()((n={},Object(l.a)(n,"".concat(c,"-item-danger"),_),Object(l.a)(n,"".concat(c,"-item-only-child"),1===(g?x+1:x)),n),m),title:"string"==typeof b?b:void 0}),Object(ze.a)(g,{className:h()(Object(ze.b)(g)?null===(o=g.props)||void 0===o?void 0:o.className:"","".concat(c,"-item-icon"))}),e.renderItemChildren(f)))},e}return Object(a.a)(n,[{key:"renderItemChildren",value:function(e){var t=this.context,n=t.prefixCls,r=t.firstLevel,o=this.props,a=o.icon,i=o.children;return!a||Object(ze.b)(i)&&"span"===i.type?i&&e&&r&&"string"==typeof i?u.createElement("div",{className:"".concat(n,"-inline-collapsed-noicon")},i.charAt(0)):i:u.createElement("span",{className:"".concat(n,"-title-content")},i)}},{key:"render",value:function(){return u.createElement(Ye.a.Consumer,null,this.renderItem)}}]),n}(u.Component);He.contextType=Ue;var We=n(257),Ke=n(95),$e=n(262),Qe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Xe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).renderMenu=function(e){var t=e.getPopupContainer,n=e.getPrefixCls,o=e.direction,i=n(),c=a.props,l=c.prefixCls,s=c.className,f=c.theme,d=c.expandIcon,p=Qe(c,["prefixCls","className","theme","expandIcon"]),m=Object(E.a)(p,["siderCollapsed","collapsedWidth"]),y=a.getInlineCollapsed(),v={horizontal:{motionName:"".concat(i,"-slide-up")},inline:$e.a,other:{motionName:"".concat(i,"-zoom-big")}},b=n("menu",l),g=h()("".concat(b,"-").concat(f),s);return u.createElement(Ue.Provider,{value:{prefixCls:b,inlineCollapsed:y||!1,antdMenuTheme:f,direction:o,firstLevel:!0}},u.createElement(Be,Object(r.default)({getPopupContainer:t},m,{inlineCollapsed:y,className:g,prefixCls:b,direction:o,defaultMotions:v,expandIcon:Object(ze.a)(d,{className:"".concat(b,"-submenu-expand-icon")})})))},Object(Ke.a)(!("inlineCollapsed"in e&&"inline"!==e.mode),"Menu","`inlineCollapsed` should only be used when `mode` is inline."),Object(Ke.a)(!(void 0!==e.siderCollapsed&&"inlineCollapsed"in e),"Menu","`inlineCollapsed` not control Menu under Sider. Should set `collapsed` on Sider instead."),a}return Object(a.a)(n,[{key:"getInlineCollapsed",value:function(){var e=this.props,t=e.inlineCollapsed,n=e.siderCollapsed;return void 0!==n?n:t}},{key:"render",value:function(){return u.createElement(We.a,null,this.renderMenu)}}]),n}(u.Component);Xe.defaultProps={theme:"light"};var Je=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return u.createElement(Ye.a.Consumer,null,(function(t){return u.createElement(Xe,Object(r.default)({},e.props,t))}))}}]),n}(u.Component);Je.Divider=Me,Je.Item=He,Je.SubMenu=Ge,Je.ItemGroup=De;t.a=Je},function(e,t,n){"use strict";var r=n(346);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}))},,function(e,t,n){var r=n(671),o=n(1981),a=n(558),i=Function.prototype,c=Object.prototype,u=i.toString,l=c.hasOwnProperty,s=u.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==s}},function(e,t,n){"use strict";var r;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(49).PACKAGE_TYPE;e.exports={BASE_AMOUNT:2999,ORG_FULL_AMOUNT:5999,MEMBER_USER_DISCOUNT_AMOUNT:69,MEMBER_USER_FULL_AMOUNT:99,MEMBER_GROUP_BASE_AMOUNT:299,MEMBER_GROUP_FULL_AMOUNT:599,MEMBER_BASE_UPLOAD_AMOUNT:10,BASE_ORG_AMOUNT:999,ORG_UPLOAD_SIZE_MAP:{"100G":{value:100/1024,price:1e3},"300G":{value:300/1024,price:3e3},"500G":{value:500/1024,price:5e3},"1TB":{value:1,price:1e4},"2TB":{value:2,price:2e4},"5TB":{value:5,price:5e4}},BASE_ORG_MEMBER_AMOUNT:199,DISCOUNT_ORG_MEMBER_AMOUNT:99,TRANSITION_BASE_ORG_MEMBER_AMOUNT:24,TRANSITION_DISCOUNT_ORG_MEMBER_AMOUNT:12,TRANSITION_DEADLINE:"2021-05-14 23:59:59",OLD_ORGANIZATION_DEADLINE:"2021-03-25 23:59:59",ORG_MEMBER_PACKAGE_SIZE:50,ORG_MEMBER_UPLOAD_SIZE:10737418240,PACKAGE_TYPE_AMOUNT:(r={},o(r,a.standard,2999),o(r,a.advanced,5999),o(r,a.ultimate,11998),r),ORDER_STATUS:{initialized:0,paid:1,created:2,finished:3,closed:-1},RECEIPT_TYPES:{normal:0,special:1},RECEIPT_STATUS:{initialized:0,submited:1,finished:2,canceled:3,closed:-1},PAYMENT_TYPE:{normal:0,settle:1},MAX_MEMBER_ALLOW_RENEW_DAYS:30,OFFER_DEADLINE:"2021-03-31",DISCOUNT_AMOUNT:3e3,MEMBER_OFFER_DEADLINE:"2021-03-31",PERSORNAL_MEMBER_OFFER_DEADLINE:"2020-11-11",MEMBER_UPLOAD_SIZE_ARR:[10,50,100,300,500,1024],PERSORNAL_MEMBER_DSICOUNT_START_TIME:"2020-11-01 00:00:00",PERSORNAL_MEMBER_DSICOUNT_END_TIME:"2020-11-11 23:59:59",PERSORNAL_MEMBER_DSICOUNT_TEXT:"双11优惠价",ALLOW_SPECIAL_FROM_SCENE:["reply","topic","servicify","group_custom","feedback"],YUQUE_DINGDING_QR_CODE:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*Jw3CQJNylmUAAAAAAAAAAAAAARQnAQ",PAYMENT_BIZ_INSTID_Z69:"Z69",PAYMENT_BIZ_INSTID_Z97:"Z97",PAYMENT_BIZ_INSTID_SWITCH:"payment_biz_instid",PAYMENT_BIZ_INSTID_PRE_SWITCH:"payment_biz_instid_pre"}},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"webProxy",(function(){return mt}));var r=n(1275),o=n(147),a=n(730),i=n(733),c=n(734),u=n(735),l=n(736),s=n(737),f=n(738),d=n(739),p=n(740),m=n(741),h=n(742),y=n(743),v=n(744),b=n(745),g=n(746),_=n(747),w=n(748),E=n(749),O=n(750),x=n(751),j=n(752),k=n(753),S=n(754),C=n(755),N=n(756),P=n(757),T=n(758),A=n(759),L=n(760),I=n(761),R=n(762),D=n(763),M=n(764),F=n(765),B=n(766),U=n(767),z=n(768),G=n(769),V=n(770),Y=n(771),q=n(772),H=n(773),W=n(774),K=n(775),$=n(776),Q=n(777),X=n(778),J=n(779),Z=n(780),ee=n(781),te=n(782),ne=n(783),re=n(784),oe=n(785),ae=n(786),ie=n(787),ce=n(788),ue=n(789),le=n(676),se=n(677),fe=n(790),de=n(791),pe=n(792),me=n(793),he=n(794),ye=n(795),ve=n(796),be=n(797),ge=n(798),_e=n(799),we=n(800),Ee=n(801),Oe=n(802),xe=n(803),je=n(804),ke=n(805),Se=n(806),Ce=n(807),Ne=n(808),Pe=n(809),Te=n(810),Ae=n(811),Le=n(812),Ie=n(813),Re=n(678),De=n(679),Me=n(680),Fe=n(814),Be=n(815),Ue=n(816),ze=n(817),Ge=n(818),Ve=n(819),Ye=n(820),qe=n(681),He=n(682),We=n(821),Ke=n(822),$e=n(823),Qe=n(824),Xe=n(825),Je=n(826),Ze=n(827),et=n(828),tt=n(829),nt=n(830),rt=n(831),ot=n(832),at=n(833),it=n(834),ct=n(835),ut=n(836);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt={},pt={};dt.accessTokens=a,dt.accounts=i,dt.actionTags=c,dt.actions=u,dt.activities=l,dt.aliyunVideo=s,dt.aone=f,dt.applications=d,dt.artboardComments=p,dt.artboardGroups=m,dt.artboardMaps=h,dt.artboards=y,dt.assets=v,dt.attachments=b,dt.auditLogs=g,dt.bookStackMaps=_,dt.bookStacks=w,dt.bookStatistics=E,dt.books=O,dt.catalogNodes=x,dt.collaborations=j,dt.comments=k,dt.contentReport=S,dt.corpDingtalk=C,dt.corpDingtalkMiniapp=N,dt.corpTeambition=P,dt.corpWeixin=T,dt.coupon=A,dt.dashboard=L,dt.datasheetRecord=I,dt.departmentUser=R,dt.departments=D,dt.docSelections=M,dt.docVersions=F,dt.doclets=B,dt.docs=U,dt.editor=z,dt.events=G,dt.explore=V,dt.feedbacks=Y,dt.filetransfer=q,dt.grains=H,dt.groupDepartments=W,dt.groupStatistics=K,dt.groupUsers=$,dt.groups=Q,dt.headlines=X,dt.hits=J,dt.imageGroups=Z,dt.imm=ee,dt.import=te,dt.knowledgeGraph=ne,dt.labels=re,dt.locks=oe,dt.logs=ae,dt.memberPay=ie,dt.milestones=ce,dt.mine=ue,dt["mine.debug"]=le,pt.mine=pt.mine||dt.mine||{},pt.mine.debug=le,dt["mine.marks"]=se,pt.mine=pt.mine||dt.mine||{},pt.mine.marks=se,dt.mobileApp=fe,dt.notes=de,dt.notifications=pe,dt.orders=me,dt.organizationCertification=he,dt.organizationDashboard=ye,dt.organizationOrders=ve,dt.organizationReceipts=be,dt.organizationShares=ge,dt.organizationStatistics=_e,dt.organizationUsers=we,dt.organizationVisitHistories=Ee,dt.organizations=Oe,dt.pay=xe,dt.premiumOrders=je,dt.promo=ke,dt.proxy=Se,dt.quickLinks=Ce,dt.regions=Ne,dt.resources=Pe,dt.reviews=Te,dt.scheduleConfigs=Ae,dt.search=Le,dt.searchHistory=Ie,dt["service.crypto"]=Re,pt.service=pt.service||dt.service||{},pt.service.crypto=Re,dt["service.graph"]=De,pt.service=pt.service||dt.service||{},pt.service.graph=De,dt["service.translate"]=Me,pt.service=pt.service||dt.service||{},pt.service.translate=Me,dt.settings=Fe,dt.shares=Be,dt.sts=Ue,dt.tables=ze,dt.tagMaps=Ge,dt.tagMetas=Ve,dt.tags=Ye,dt["templates.v1"]=qe,pt.templates=pt.templates||dt.templates||{},pt.templates.v1=qe,dt["templates.v2"]=He,pt.templates=pt.templates||dt.templates||{},pt.templates.v2=He,dt.test=We,dt.testRpc=Ke,dt.topicLabels=$e,dt.topics=Qe,dt.transOrgProperty=Xe,dt.upload=Je,dt.userOrders=Ze,dt.userReceipts=et,dt.users=tt,dt.validationCodes=nt,dt.versions=rt,dt.video=ot,dt.viewBlock=at,dt.votes=it,dt.webapp=ct,dt.webhooks=ut;var mt=st(st({},dt),pt);t.default=Object(o.a)(Object(r.a)(dt,"web"))},function(e,t,n){"use strict";var r={ORDER_TYPE:{buy:1,renew:2,data:3},TYPES_MAP:{user:"User",group:"Group",publication:"Publication"},STATUS:{blocked:-3,banned:-2,terminated:-1,inactive:0,normal:1},STATUS_NAMES:{},ROLE:{admin:0,member:1,extcontact:2},PUBLIC:{private:0,public:1,intranet:2,intranet_all:3},SHARE_TO_HOME:{open:1,close:0},INIT_TYPE:{normal:"normal",notes:"notes"},MEMBER_LEVEL:{free:0,paid:1},PUSH_DAYS_BEFROE_EXPIRE:[30,15,7,1,0],PUSH_TASK:{MEMBER_EXPIRE_PUSH:"member_expire_push",UPLOAD_EXHAUST_PUSH:"user_upload_exhaust_push"},GROUP_SCENES:{default:{name:"default",group:"template_default"},project:{books:["templates/project","templates/manual"],group:"template_project",name:"project"},department:{books:["templates/newbie","templates/reports"],group:"template_department",name:"department"},interest:{books:["templates/rules","templates/resources"],group:"template_interest",name:"interest"},commerce:{books:["templates/commerce_schedule","templates/commerce_newbie","templates/commerce_events","templates/commerce_goods"],group:"template_commerce",name:"commerce"},challenge:{books:["templates/challenge"],group:"template_challenge",name:"challenge"},official_doc:{group:"template_official_doc",name:"official_doc"},publication:{books:["templates/publication_introduction"],publication:"template_publication",name:"publication"}},SOURCES:["guide"],EVENT:{createBook:"createBook",publishDoc:"publishDoc",updateDoc:"updateDoc",memberJoin:"memberJoin",publishResources:"publishResources"},AUTOCOMPLETE_ALLOWED_TARGET_TYPES:["Doc","Topic","Group","Artboard","Doclet"],VERSION_SETTINGS:{workspace_v3_dashboard:{new:0,old:1}},PUBLIC_PAGE_MODEL:{publicPageHotmap:131072,publicPageFeed:196608}};for(var o in r.STATUS)r.STATUS_NAMES[r.STATUS[o]]=o;e.exports=r},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(0),o=r.isValidElement;function a(e,t,n){return o(e)?r.cloneElement(e,"function"==typeof n?n(e.props||{}):n):t}function i(e,t){return a(e,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=function(e){return+setTimeout(e,16)},o=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(r=function(e){return window.requestAnimationFrame(e)},o=function(e){return window.cancelAnimationFrame(e)});var a=0,i=new Map;function c(e){i.delete(e)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a+=1;function o(t){if(0===t)c(n),e();else{var a=r((function(){o(t-1)}));i.set(n,a)}}return o(t),n}u.cancel=function(e){var t=i.get(e);return c(t),o(t)}},,,,,,function(e,t,n){"use strict";e.exports={STATUS:{invited:0,joined:1,applying:2,terminated:-1,blocked:-2,waiting:-3,imported:3},ROLE:{owner:0,member:1,outsourcer:2},ROLE_NAME:function(){var e=function(e){return e};return"undefined"!=typeof window&&"function"==typeof window.__&&(e=window.__),{0:e("空间管理员"),1:e("空间成员"),2:e("外部联系人")}}(),MUTABLE_ROLES:[0,1],UNCONFIRMED_KEY:"unconfirmed_org_user_key",STATUS_ORDER:{descend:"descend",ascend:"ascend"},ONLY_SHOW_DIRECTLY_MEMBERS:{enable:1,disable:0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11);function o(e,t){var n=Object(r.a)({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}},function(e,t,n){"use strict";n(1051);var r=n(901),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(592),l=n(38),s=n(1027),f=function(e){var t=e.src,n=e.icon,o=e.size,i=e.className,c=e.name,f=e.useLetterAvatar,d=e.radius,p=e.bordered,m=e.onPreviewImage,h=e.enableLarkUIImage,y={lg:128,md:64,sm:32,contributorAvatar:28,xs:16}[o]||o,v={width:y,minWidth:y,height:y,borderRadius:d||y/2};p&&(v.borderColor="rgba(0,0,0,0.06)",v.borderWidth=1,v.borderStyle="solid");var b=t&&t.indexOf("rmsportal/SZXCSCJTuhRSmAggBlVp")>-1;if(b&&!n||f&&!t&&!n)return a.a.createElement(s.a,{size:y,text:c,style:v,className:i,isGroup:b});if(t&&!b){var g=Object(u.a)(t,{width:2*y,height:2*y,fill:!0,format:"png"});t.indexOf("work.alibaba-inc.com")>-1?g=y&&y<=32?t.replace(".220x220.",".64x64.xz."):t:t.includes("/avatar_buc/")&&y&&y>64?g="".concat(t).concat(t.indexOf("?")>-1?"&":"?","size=large"):t.indexOf(".svg")>-1&&(g=t);return h?a.a.createElement(r.a,{"data-testid":"img-avatar",src:g,className:i,style:v,alt:c||"",preview:!1,onError:function(e){var t="https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png";e.target.src!==t&&(e.target.alt="",e.target.src=t)}}):a.a.createElement("img",{loading:"lazy","data-testid":"img-avatar",onError:function(e){var t="https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png";e.target.src!==t&&(e.target.alt="",e.target.src=t)},onClick:m?function(){return m({src:t,msrc:g})}:void 0,src:g,className:i,style:v,alt:c||""})}return n?a.a.createElement(l.b,{className:i,name:e.icon,width:y,height:y}):null};f.defaultProps={size:"sm"},f.propTypes={className:c.a.string,src:c.a.string,icon:c.a.string,name:c.a.string,useLetterAvatar:c.a.bool,radius:c.a.oneOfType([c.a.string,c.a.number]),size:c.a.oneOfType([c.a.string,c.a.node,c.a.number]),onPreviewImage:c.a.func,enableLarkUIImage:c.a.bool,bordered:c.a.bool},t.a=f},,,,function(e,t,n){"use strict";var r;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(49).PAYMENT_TYPE,i=1048576,c=1024*i;e.exports={SIZE:{KB:1024,MB:i,GB:c,TB:1099511627776},NUMBER_SIZE:{W:1e4,K:1e3,M:1e6},OPERSTION_GIFT_UPLOAD_SIZE:1*c,USER_BASE_UPLOAD_SIZE:10*c,USER_MEMBER_UPLOAD_SIZE:100*c,USER_MEMBER_SEND_UPLOALD_SIZE:90*c,ORGANIZATION_STANDARD_UPLOAD_SIZE:10*c,MEMBER_LEVEL:{member:"member",normal:"normal"},MEMBER_RULE:{User:{normal:{max_group_number:10,max_resource_total_size:10*c,max_book_number:100,max_book_collaborator_number:10,max_single_image_size:10*i,max_single_video_size:500*i,max_single_file_size:100*i,max_doc_collaborator_number:10,max_doc_nologin_pv:500},member:{max_group_number:10,max_resource_total_size:100*c,max_book_number:1/0,max_book_collaborator_number:100,max_single_image_size:20*i,max_single_video_size:5*c,max_single_file_size:1*c,max_doc_collaborator_number:500,max_doc_nologin_pv:1/0}},Group:{normal:{max_group_member_number:50,max_book_collaborator_number:10,max_book_number:100,max_resource_total_size:10*c,max_single_image_size:10*i,max_single_video_size:500*i,max_single_file_size:100*i,max_doc_collaborator_number:10,max_doc_nologin_pv:500},member:{max_group_member_number:100,max_book_collaborator_number:100,max_book_number:1/0,max_resource_total_size:100*c,max_single_image_size:20*i,max_single_video_size:5*c,max_single_file_size:1*c,max_doc_collaborator_number:500,max_doc_nologin_pv:1/0}},Organization:(r={},o(r,a.free,{max_member:50,max_upload_size:10*c}),o(r,a.trial,{max_upload_size:10*c}),o(r,a.downgrade_free,{max_member:50,max_upload_size:10*c}),r)},LINKS:{INTERNAL_MEMBER_INTRO_LINK:"/lark/help/member-privilege",EXTERNAL_MEMBER_INTRO_LINK:"https://www.yuque.com/yuque/ng1qth/member-privilege",EXTERNAL_GROUP_INTRO_LINK:"https://www.yuque.com/yuque/help/group#gbwZ7",EXTERNAL_ORGANIZATION_INTRO_LINK:"https://www.yuque.com/yuque/rvzzxz/rfwopm",EXTERNAL_PUBLICATION_INTRO_LINK_BUC:"https://yuque.antfin-inc.com/lark/igdbey/snm2oi"},MAX_ORGANIZATION_NUMBER:10}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=r.createContext(void 0),a=function(e){var t=e.children,n=e.size;return r.createElement(o.Consumer,null,(function(e){return r.createElement(o.Provider,{value:n||e},t)}))};t.b=o},,function(e,t,n){"use strict";var r=n(1350);t.a=r.a},,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return c}));var i={updateProperty:function(e,t){var n=t.payload;return o(o({},e),n)}};function c(e){return e.reducers=Object.assign({},i,e.reducers),e}},,function(e,t,n){"use strict";var r={PUBLIC:{private:0,public:1,intranet:2,intranet_all:3,importing:-1},PRIVATE_PRIVACY:[0,4],PUBLIC_PRIVACY:[1,2,3],STATUS:{banned:-1,normal:0},TYPES:["Book","Design","Sheet","Column","Resource","Thread"],TYPE_MAP:{BOOK:"Book",DESIGN:"Design",SHEET:"Sheet",COLUMN:"Column",RESOURCE:"Resource",THREAD:"Thread"},KIND:{DOC:"doc",DESIGN:"design",SHEET:"sheet",RESOURCE:"resource"},SCENES:{notes:{origin:"templates/notes"},blog:{origin:"templates/blog"},travel:{origin:"templates/travel"},project:{origin:"templates/project"},manual:{origin:"templates/manual"},reports:{origin:"templates/reports"},team_blog:{origin:"templates/team_blog"},todos:{origin:"templates/todos"},challenge_works:{origin:"templates/challenge_works"},challenge_thinking:{origin:"templates/challenge_thinking"}},SOURCES:["guide","aone","publication"],SLUG_INVALID_CHAR_RE:/[^\w\-\.\+]/g,SLUG_VALID_RE:/^[\w\-\.\+]{2,64}$/,TOC_TYPES:{TITLE:"TITLE",DOC:"DOC",LINK:"LINK",UNCREATED_DOC:"UNCREATED_DOC",META:"META"},TOC_TAIL_TYPES:{SLUG:"SLUG",UPDATED_AT:"UPDATED_AT",CREATED_AT:"CREATED_AT",AUTHOR:"AUTHOR"},TOC_DEFAULT_TAIL_TYPE:"UPDATED_AT",TOC_DEFAULT_TAIL_TYPE_STOCK:"SLUG",TOC_DEFAULT_DISPLAY_LEVEL:1,TOC_DEFAULT_DISPLAY_LEVEL_STOCK:1,DEFAULT_BOOK_SLUG:"kb",DEFAULT_NOTE_BOOK_SLUG:"notes",DOC_BASED_BOOK_TYPES:["Book","Column","Sheet","Thread","Resource"],MIXING_BOOK_TYPES:["Book","Column","Sheet","Table"],MIXING_DOC_TYPES:["Doc","Sheet","Mind","Board","Show","Table"],BOOK_LAYOUT:{Book:"Book",Card:"Card",Column:"Column",Custom:"Custom"},DOC_VIEWPORT:{fixed:"fixed",adapt:"adapt"},DOC_TYPES:{Doc:"Doc",Sheet:"Sheet",Thread:"Thread",Mind:"Mind",Board:"Board",Show:"Show"},ORIGINAL_STATUS:{disabled:-1,normal:0,original:1},PREMIUM_STATUS:{disabled:-1,normal:0,premium:1},DOC_TYPOGRAPHY:{classic:"classic",classic_all:"classic_all",traditional:"traditional",traditional_all:"traditional_all"},DEFAULT_SETTINGS:{enable_comment:!0,enable_export:!0},MAX_ITEMS_COUNT:5e3,INDEX_BACKGROUND:{vacant:"vacant",colorful:"colorful",peaceful:"peaceful"},ALLOW_DOCS_ORDER_BY_FIELDS:["first_published_at","published_at"],STATUS_NAMES:{}};for(var o in r.STATUS)r.STATUS_NAMES[r.STATUS[o]]=o;e.exports=r},function(e,t,n){var r=n(454),o=n(1178);e.exports=function(e,t){return e&&e.length?o(e,r(t,2)):[]}},function(e,t,n){"use strict";var r=n(18),o=n(28),a=n(14),i=n(0),c=n(41),u=n(11),l=n(55),s=n(402),f={adjustX:1,adjustY:1},d=[0,0],p={left:{points:["cr","cl"],overflow:f,offset:[-4,0],targetOffset:d},right:{points:["cl","cr"],overflow:f,offset:[4,0],targetOffset:d},top:{points:["bc","tc"],overflow:f,offset:[0,-4],targetOffset:d},bottom:{points:["tc","bc"],overflow:f,offset:[0,4],targetOffset:d},topLeft:{points:["bl","tl"],overflow:f,offset:[0,-4],targetOffset:d},leftTop:{points:["tr","tl"],overflow:f,offset:[-4,0],targetOffset:d},topRight:{points:["br","tr"],overflow:f,offset:[0,-4],targetOffset:d},rightTop:{points:["tl","tr"],overflow:f,offset:[4,0],targetOffset:d},bottomRight:{points:["tr","br"],overflow:f,offset:[0,4],targetOffset:d},rightBottom:{points:["bl","br"],overflow:f,offset:[4,0],targetOffset:d},bottomLeft:{points:["tl","bl"],overflow:f,offset:[0,4],targetOffset:d},leftBottom:{points:["br","bl"],overflow:f,offset:[-4,0],targetOffset:d}},m=function(e){var t=e.overlay,n=e.prefixCls,r=e.id,o=e.overlayInnerStyle;return i.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:o},"function"==typeof t?t():t)},h=function(e,t){var n=e.overlayClassName,r=e.trigger,o=void 0===r?["hover"]:r,f=e.mouseEnterDelay,d=void 0===f?0:f,h=e.mouseLeaveDelay,y=void 0===h?.1:h,v=e.overlayStyle,b=e.prefixCls,g=void 0===b?"rc-tooltip":b,_=e.children,w=e.onVisibleChange,E=e.afterVisibleChange,O=e.transitionName,x=e.animation,j=e.motion,k=e.placement,S=void 0===k?"right":k,C=e.align,N=void 0===C?{}:C,P=e.destroyTooltipOnHide,T=void 0!==P&&P,A=e.defaultVisible,L=e.getTooltipContainer,I=e.overlayInnerStyle,R=Object(l.a)(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),D=Object(i.useRef)(null);Object(i.useImperativeHandle)(t,(function(){return D.current}));var M=Object(u.a)({},R);"visible"in e&&(M.popupVisible=e.visible);var F=!1,B=!1;if("boolean"==typeof T)F=T;else if(T&&"object"===Object(c.a)(T)){var U=T.keepParent;F=!0===U,B=!1===U}return i.createElement(s.a,Object(a.default)({popupClassName:n,prefixCls:g,popup:function(){var t=e.arrowContent,n=void 0===t?null:t,r=e.overlay,o=e.id;return[i.createElement("div",{className:"".concat(g,"-arrow"),key:"arrow"},n),i.createElement(m,{key:"content",prefixCls:g,id:o,overlay:r,overlayInnerStyle:I})]},action:o,builtinPlacements:p,popupPlacement:S,ref:D,popupAlign:N,getPopupContainer:L,onPopupVisibleChange:w,afterPopupVisibleChange:E,popupTransitionName:O,popupAnimation:x,popupMotion:j,defaultPopupVisible:A,destroyPopupOnHide:F,autoDestroy:B,mouseLeaveDelay:y,popupStyle:v,mouseEnterDelay:d},M),_)},y=Object(i.forwardRef)(h),v=n(163),b=n(10),g=n.n(b),_={adjustX:1,adjustY:1},w={adjustX:0,adjustY:0},E=[0,0];function O(e){return"boolean"==typeof e?e?_:w:Object(a.default)(Object(a.default)({},w),e)}var x=n(118),j=n(257),k=n(962),S=n(262),C=new RegExp("^(".concat(k.a.join("|"),")(-inverse)?$"));function N(e,t){var n=e.type;if((!0===n.__ANT_BUTTON||!0===n.__ANT_SWITCH||!0===n.__ANT_CHECKBOX||"button"===e.type)&&e.props.disabled){var r=function(e,t){var n={},r=Object(a.default)({},e);return t.forEach((function(t){e&&t in e&&(n[t]=e[t],delete r[t])})),{picked:n,omitted:r}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),o=r.picked,c=r.omitted,u=Object(a.default)(Object(a.default)({display:"inline-block"},o),{cursor:"not-allowed",width:e.props.block?"100%":null}),l=Object(a.default)(Object(a.default)({},c),{pointerEvents:"none"}),s=Object(x.a)(e,{style:l,className:null});return i.createElement("span",{style:u,className:g()(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},s)}return e}var P=i.forwardRef((function(e,t){var n,c=i.useContext(j.b),u=c.getPopupContainer,l=c.getPrefixCls,s=c.direction,f=Object(v.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),d=Object(o.a)(f,2),m=d[0],h=d[1],b=function(){var t=e.title,n=e.overlay;return!t&&!n&&0!==t},_=function(){var t=e.builtinPlacements,n=e.arrowPointAtCenter,r=e.autoAdjustOverflow;return t||function(e){var t=e.arrowWidth,n=void 0===t?5:t,r=e.horizontalArrowShift,o=void 0===r?16:r,i=e.verticalArrowShift,c=void 0===i?8:i,u=e.autoAdjustOverflow,l={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(o+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(c+n)]},topRight:{points:["br","tc"],offset:[o+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(c+n)]},bottomRight:{points:["tr","bc"],offset:[o+n,4]},rightBottom:{points:["bl","cr"],offset:[4,c+n]},bottomLeft:{points:["tl","bc"],offset:[-(o+n),4]},leftBottom:{points:["br","cl"],offset:[-4,c+n]}};return Object.keys(l).forEach((function(t){l[t]=e.arrowPointAtCenter?Object(a.default)(Object(a.default)({},l[t]),{overflow:O(u),targetOffset:E}):Object(a.default)(Object(a.default)({},p[t]),{overflow:O(u)}),l[t].ignoreShake=!0})),l}({arrowPointAtCenter:n,autoAdjustOverflow:r})},w=e.prefixCls,k=e.openClassName,P=e.getPopupContainer,T=e.getTooltipContainer,A=e.overlayClassName,L=e.color,I=e.overlayInnerStyle,R=e.children,D=l("tooltip",w),M=l(),F=m;!("visible"in e)&&b()&&(F=!1);var B,U,z,G=N(Object(x.b)(R)?R:i.createElement("span",null,R),D),V=G.props,Y=g()(V.className,Object(r.a)({},k||"".concat(D,"-open"),!0)),q=g()(A,(n={},Object(r.a)(n,"".concat(D,"-rtl"),"rtl"===s),Object(r.a)(n,"".concat(D,"-").concat(L),L&&C.test(L)),n)),H=I;return L&&!C.test(L)&&(H=Object(a.default)(Object(a.default)({},I),{background:L}),B={background:L}),i.createElement(y,Object(a.default)({},e,{prefixCls:D,overlayClassName:q,getTooltipContainer:P||T||u,ref:t,builtinPlacements:_(),overlay:(U=e.title,z=e.overlay,0===U?U:z||U||""),visible:F,onVisibleChange:function(t){var n;h(!b()&&t),b()||null===(n=e.onVisibleChange)||void 0===n||n.call(e,t)},onPopupAlign:function(e,t){var n=_(),r=Object.keys(n).filter((function(e){return n[e].points[0]===t.points[0]&&n[e].points[1]===t.points[1]}))[0];if(r){var o=e.getBoundingClientRect(),a={top:"50%",left:"50%"};r.indexOf("top")>=0||r.indexOf("Bottom")>=0?a.top="".concat(o.height-t.offset[1],"px"):(r.indexOf("Top")>=0||r.indexOf("bottom")>=0)&&(a.top="".concat(-t.offset[1],"px")),r.indexOf("left")>=0||r.indexOf("Right")>=0?a.left="".concat(o.width-t.offset[0],"px"):(r.indexOf("right")>=0||r.indexOf("Left")>=0)&&(a.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(a.left," ").concat(a.top)}},overlayInnerStyle:H,arrowContent:i.createElement("span",{className:"".concat(D,"-arrow-content"),style:B}),motion:{motionName:Object(S.b)(M,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),F?Object(x.a)(G,{className:Y}):G)}));P.displayName="Tooltip",P.defaultProps={placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0};t.a=P},,,,,function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(0),i=n(1319),c=n(10),u=n.n(c),l=n(181),s=n(257),f=a.createContext(null),d=f.Provider,p=f,m=n(95),h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},y=function(e,t){var n,c=a.useContext(p),f=a.useContext(s.b),d=f.getPrefixCls,y=f.direction,v=a.useRef(),b=Object(l.a)(t,v);a.useEffect((function(){Object(m.a)(!("optionType"in e),"Radio","`optionType` is only support in Radio.Group.")}),[]);var g=e.prefixCls,_=e.className,w=e.children,E=e.style,O=h(e,["prefixCls","className","children","style"]),x=d("radio",g),j=Object(o.default)({},O);c&&(j.name=c.name,j.onChange=function(t){var n,r;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(r=null==c?void 0:c.onChange)||void 0===r||r.call(c,t)},j.checked=e.value===c.value,j.disabled=e.disabled||c.disabled);var k=u()("".concat(x,"-wrapper"),(n={},Object(r.a)(n,"".concat(x,"-wrapper-checked"),j.checked),Object(r.a)(n,"".concat(x,"-wrapper-disabled"),j.disabled),Object(r.a)(n,"".concat(x,"-wrapper-rtl"),"rtl"===y),n),_);return a.createElement("label",{className:k,style:E,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(i.a,Object(o.default)({},j,{prefixCls:x,ref:b})),void 0!==w?a.createElement("span",null,w):null)},v=a.forwardRef(y);v.displayName="Radio",v.defaultProps={type:"radio"};var b=v,g=n(28),_=n(163),w=n(132),E=n(1320),O=a.forwardRef((function(e,t){var n=a.useContext(s.b),i=n.getPrefixCls,c=n.direction,l=a.useContext(w.b),f=Object(_.a)(e.defaultValue,{value:e.value}),p=Object(g.a)(f,2),m=p[0],h=p[1];return a.createElement(d,{value:{onChange:function(t){var n=m,r=t.target.value;"value"in e||h(r);var o=e.onChange;o&&r!==n&&o(t)},value:m,disabled:e.disabled,name:e.name}},function(){var n,s=e.prefixCls,f=e.className,d=void 0===f?"":f,p=e.options,h=e.optionType,y=e.buttonStyle,v=void 0===y?"outline":y,g=e.disabled,_=e.children,w=e.size,O=e.style,x=e.id,j=e.onMouseEnter,k=e.onMouseLeave,S=i("radio",s),C="".concat(S,"-group"),N=_;if(p&&p.length>0){var P="button"===h?"".concat(S,"-button"):S;N=p.map((function(e){return"string"==typeof e?a.createElement(b,{key:e,prefixCls:P,disabled:g,value:e,checked:m===e},e):a.createElement(b,{key:"radio-group-value-options-".concat(e.value),prefixCls:P,disabled:e.disabled||g,value:e.value,checked:m===e.value,style:e.style},e.label)}))}var T=w||l,A=u()(C,"".concat(C,"-").concat(v),(n={},Object(r.a)(n,"".concat(C,"-").concat(T),T),Object(r.a)(n,"".concat(C,"-rtl"),"rtl"===c),n),d);return a.createElement("div",Object(o.default)({},Object(E.a)(e),{className:A,style:O,onMouseEnter:j,onMouseLeave:k,id:x,ref:t}),N)}())})),x=a.memo(O),j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},k=function(e,t){var n=a.useContext(p),r=a.useContext(s.b).getPrefixCls,i=e.prefixCls,c=j(e,["prefixCls"]),u=r("radio-button",i);return n&&(c.checked=e.value===n.value,c.disabled=e.disabled||n.disabled),a.createElement(b,Object(o.default)({prefixCls:u},c,{type:"radio",ref:t}))},S=a.forwardRef(k),C=b;C.Button=S,C.Group=x;t.a=C},,function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(14),o=n(57),a=n(58),i=n(66),c=n(72),u=n(0),l=n(382).a,s=n(1211),f=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||l[t||"global"],o=this.context,a=t&&o?o[t]:{};return Object(r.default)(Object(r.default)({},"function"==typeof n?n():n),a||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?l.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(u.Component);function d(e,t){var n=u.useContext(s.a);return[u.useMemo((function(){var o=t||l[e||"global"],a=e&&n?n[e]:{};return Object(r.default)(Object(r.default)({},"function"==typeof o?o():o),a||{})}),[e,t,n])]}f.defaultProps={componentName:"global"},f.contextType=s.a},,,function(e,t,n){"use strict";e.exports={ITEM_PER_PAGE:10,DESCRIPTION_MAX_LENGTH:5e3,SAVE_FROM_TYPE:{YUQUE_DESKTOP_APP:"yuque-desktop",WECHAT_H5:"wechat-h5",WECHAT_ROBOT:"wechat-robot",DINGTALK_H5:"dingtalk-h5",DINGTALK_ROBOT:"dingtalk-robot",ALIPAY_WEBAPP:"alipay-webapp",TEMPLATE_NOTE:"template",TEMPLATE_TODO:"template_todo",MOBILE_APP:"mobile-app"},PRIVACY:{public:1,private:0},VIEW_MORE_TAG:"\x3c!-- note-viewmore --\x3e",ORDER_BY:{content_updated_at:"content_updated_at",first_published_at:"first_published_at"},STATUS:{unarchived:0,unReady:1,ready:2,archived:9},TYPE:{note:"note",todo:"todo"},FILTER_TYPES:{all:"all",archive:"archive",image:"image",bookmark:"bookmark",attachment:"attachment",archived:"archived",share:"share",dingTalkRobot:"dingTalkRobot",wechatRobot:"wechatRobot"},NEED_PINNED_TYPE:["all","share","dingTalkRobot","wechatRobot"],DEFAULT_TYPE:["all","share"],MENU_SENCE:{edit:1,noteRead:2,noteBlank:3},MAX_PIN_COUNT:50}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(28),o=n(0);function a(e){var t=o.useRef();t.current=e;var n=o.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}var i,c=n(545),u=n(566);function l(e){return void 0!==e}function s(e,t){var n=t||{},s=n.defaultValue,f=n.value,d=n.onChange,p=n.postState,m=Object(u.a)((function(){var t,n=void 0;return l(f)?(n=f,t=i.PROP):l(s)?(n="function"==typeof s?s():s,t=i.PROP):(n="function"==typeof e?e():e,t=i.INNER),[n,t,n]})),h=Object(r.a)(m,2),y=h[0],v=h[1],b=l(f)?f:y[0],g=p?p(b):b;Object(c.b)((function(){v((function(e){var t=Object(r.a)(e,1)[0];return[f,i.PROP,t]}))}),[f]);var _=o.useRef(),w=a((function(e,t){v((function(t){var n=Object(r.a)(t,3),o=n[0],a=n[1],c=n[2],u="function"==typeof e?e(o):e;if(u===o)return t;var l=a===i.INNER&&_.current!==c?c:o;return[u,i.INNER,l]}),t)})),E=a(d);return Object(c.a)((function(){var e=Object(r.a)(y,3),t=e[0],n=e[1],o=e[2];t!==o&&n===i.INNER&&(E(t,o),_.current=o)}),[y]),[g,w]}!function(e){e[e.INNER=0]="INNER",e[e.PROP=1]="PROP"}(i||(i={}))},,,,,function(e,t,n){"use strict";var r=n(14),o=n(0),a=n(151),i=n(257),c=n(1212),u=n(262),l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},s=o.forwardRef((function(e,t){var n=e.prefixCls,s=e.title,f=e.content,d=l(e,["prefixCls","title","content"]),p=o.useContext(i.b).getPrefixCls,m=p("popover",n),h=p();return o.createElement(a.a,Object(r.default)({},d,{prefixCls:m,ref:t,overlay:function(e){return o.createElement(o.Fragment,null,s&&o.createElement("div",{className:"".concat(e,"-title")},Object(c.a)(s)),o.createElement("div",{className:"".concat(e,"-inner-content")},Object(c.a)(f)))}(m),transitionName:Object(u.b)(h,"zoom-big",d.transitionName)}))}));s.displayName="Popover",s.defaultProps={placement:"top",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}},t.a=s},,,,,,,,,function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(0),i=n(126),c=n(10),u=n.n(c),l=n(57),s=n(58),f=n(66),d=n(72),p=n(55),m=n(28),h=n(70),y=n(563),v=n(399),b=n(1348),g=n(963),_=function(e,t){var n=e.prefixCls,i=e.id,c=e.flattenOptions,l=e.childrenAsData,s=e.values,f=e.searchValue,d=e.multiple,_=e.defaultActiveFirstOption,w=e.height,E=e.itemHeight,O=e.notFoundContent,x=e.open,j=e.menuItemSelectedIcon,k=e.virtual,S=e.onSelect,C=e.onToggleOpen,N=e.onActiveValue,P=e.onScroll,T=e.onMouseEnter,A="".concat(n,"-item"),L=Object(v.a)((function(){return c}),[x,c],(function(e,t){return t[0]&&e[1]!==t[1]})),I=a.useRef(null),R=function(e){e.preventDefault()},D=function(e){I.current&&I.current.scrollTo({index:e})},M=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=L.length,r=0;r<n;r+=1){var o=(e+r*t+n)%n,a=L[o],i=a.group,c=a.data;if(!i&&!c.disabled)return o}return-1},F=a.useState((function(){return M(0)})),B=Object(m.a)(F,2),U=B[0],z=B[1],G=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];z(e);var n={source:t?"keyboard":"mouse"},r=L[e];r?N(r.data.value,e,n):N(null,-1,n)};a.useEffect((function(){G(!1!==_?M(0):-1)}),[L.length,f]),a.useEffect((function(){var e,t=setTimeout((function(){if(!d&&x&&1===s.size){var e=Array.from(s)[0],t=L.findIndex((function(t){return t.data.value===e}));G(t),D(t)}}));x&&(null===(e=I.current)||void 0===e||e.scrollTo(void 0));return function(){return clearTimeout(t)}}),[x]);var V=function(e){void 0!==e&&S(e,{selected:!s.has(e)}),d||C(!1)};if(a.useImperativeHandle(t,(function(){return{onKeyDown:function(e){var t=e.which;switch(t){case h.a.UP:case h.a.DOWN:var n=0;if(t===h.a.UP?n=-1:t===h.a.DOWN&&(n=1),0!==n){var r=M(U+n,n);D(r),G(r,!0)}break;case h.a.ENTER:var o=L[U];o&&!o.data.disabled?V(o.data.value):V(void 0),x&&e.preventDefault();break;case h.a.ESC:C(!1),x&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){D(e)}}})),0===L.length)return a.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(A,"-empty"),onMouseDown:R},O);function Y(e){var t=L[e];if(!t)return null;var n=t.data||{},r=n.value,c=n.label,u=n.children,f=Object(y.a)(n,!0),d=l?u:c;return t?a.createElement("div",Object(o.default)({"aria-label":"string"==typeof d?d:null},f,{key:e,role:"option",id:"".concat(i,"_list_").concat(e),"aria-selected":s.has(r)}),r):null}return a.createElement(a.Fragment,null,a.createElement("div",{role:"listbox",id:"".concat(i,"_list"),style:{height:0,width:0,overflow:"hidden"}},Y(U-1),Y(U),Y(U+1)),a.createElement(b.a,{itemKey:"key",ref:I,data:L,height:w,itemHeight:E,fullHeight:!1,onMouseDown:R,onScroll:P,virtual:k,onMouseEnter:T},(function(e,t){var n,i=e.group,c=e.groupOption,f=e.data,d=f.label,m=f.key;if(i)return a.createElement("div",{className:u()(A,"".concat(A,"-group"))},void 0!==d?d:m);var h=f.disabled,y=f.value,v=f.title,b=f.children,_=f.style,w=f.className,E=Object(p.a)(f,["disabled","value","title","children","style","className"]),O=s.has(y),x="".concat(A,"-option"),k=u()(A,x,w,(n={},Object(r.a)(n,"".concat(x,"-grouped"),c),Object(r.a)(n,"".concat(x,"-active"),U===t&&!h),Object(r.a)(n,"".concat(x,"-disabled"),h),Object(r.a)(n,"".concat(x,"-selected"),O),n)),S=!j||"function"==typeof j||O,C=(l?b:d)||y,N="string"==typeof C||"number"==typeof C?C.toString():void 0;return void 0!==v&&(N=v),a.createElement("div",Object(o.default)({},E,{"aria-selected":O,className:k,title:N,onMouseMove:function(){U===t||h||G(t)},onClick:function(){h||V(y)},style:_}),a.createElement("div",{className:"".concat(x,"-content")},C),a.isValidElement(j)||O,S&&a.createElement(g.a,{className:"".concat(A,"-option-state"),customizeIcon:j,customizeIconProps:{isSelected:O}},O?"✓":null))})))},w=a.forwardRef(_);w.displayName="OptionList";var E=w,O=function(){return null};O.isSelectOption=!0;var x=O,j=function(){return null};j.isSelectOptGroup=!0;var k=j,S=n(11),C=n(197);function N(e){var t=e.key,n=e.props,r=n.children,o=n.value,a=Object(p.a)(n,["children","value"]);return Object(S.a)({key:t,value:void 0!==o?o:t,children:r},a)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(C.a)(e).map((function(e,n){if(!a.isValidElement(e)||!e.type)return null;var r=e.type.isSelectOptGroup,o=e.key,i=e.props,c=i.children,u=Object(p.a)(i,["children"]);return t||!r?N(e):Object(S.a)(Object(S.a)({key:"__RC_SELECT_GRP__".concat(null===o?n:o,"__"),label:o},u),{},{options:P(c)})})).filter((function(e){return e}))}var T=n(609),A=n(1349),L=n(41),I=n(85),R=n(568);var D=function(e){var t=e.mode,n=e.options,r=e.children,o=e.backfill,i=e.allowClear,c=e.placeholder,u=e.getInputElement,l=e.showSearch,s=e.onSearch,f=e.defaultOpen,d=e.autoFocus,p=e.labelInValue,m=e.value,h=e.inputValue,y=e.optionLabelProp,v="multiple"===t||"tags"===t,b=void 0!==l?l:v||"combobox"===t,g=n||P(r);if(Object(I.a)("tags"!==t||g.every((function(e){return!e.disabled})),"Please avoid setting option to disabled in tags mode since user can always type text as tag."),"tags"===t||"combobox"===t){var _=g.some((function(e){return e.options?e.options.some((function(e){return"number"==typeof("value"in e?e.value:e.key)})):"number"==typeof("value"in e?e.value:e.key)}));Object(I.a)(!_,"`value` of Option should not use number type when `mode` is `tags` or `combobox`.")}if(Object(I.a)("combobox"!==t||!y,"`combobox` mode not support `optionLabelProp`. Please set `value` on Option directly."),Object(I.a)("combobox"===t||!o,"`backfill` only works with `combobox` mode."),Object(I.a)("combobox"===t||!u,"`getInputElement` only work with `combobox` mode."),Object(I.b)("combobox"!==t||!u||!i||!c,"Customize `getInputElement` should customize clear and placeholder logic instead of configuring `allowClear` and `placeholder`."),s&&!b&&"combobox"!==t&&"tags"!==t&&Object(I.a)(!1,"`onSearch` should work with `showSearch` instead of use alone."),Object(I.b)(!f||d,"`defaultOpen` makes Select open without focus which means it will not close by click outside. You can set `autoFocus` if needed."),null!=m){var w=Object(R.d)(m);Object(I.a)(!p||w.every((function(e){return"object"===Object(L.a)(e)&&("key"in e||"value"in e)})),"`value` should in shape of `{ value: string | number, label?: ReactNode }` when you set `labelInValue` to `true`"),Object(I.a)(!v||Array.isArray(m),"`value` should be array when `mode` is `multiple` or `tags`")}if(r){var E=null;Object(C.a)(r).some((function(e){if(!a.isValidElement(e)||!e.type)return!1;var t=e.type;return!t.isSelectOption&&(t.isSelectOptGroup?!Object(C.a)(e.props.children).every((function(t){return!(a.isValidElement(t)&&e.type&&!t.type.isSelectOption)||(E=t.type,!1)})):(E=t,!0))})),E&&Object(I.a)(!1,"`children` should be `Select.Option` or `Select.OptGroup` instead of `".concat(E.displayName||E.name||E,"`.")),Object(I.a)(void 0===h,"`inputValue` is deprecated, please use `searchValue` instead.")}},M=Object(A.a)({prefixCls:"rc-select",components:{optionList:E},convertChildrenToData:P,flattenOptions:T.d,getLabeledValue:T.e,filterOptions:T.b,isValueDisabled:T.g,findValueOption:T.c,warningProps:D,fillOptionsWithMissingValue:T.a}),F=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments)).selectRef=a.createRef(),e.focus=function(){e.selectRef.current.focus()},e.blur=function(){e.selectRef.current.blur()},e}return Object(s.a)(n,[{key:"render",value:function(){return a.createElement(M,Object(o.default)({ref:this.selectRef},this.props))}}]),n}(a.Component);F.Option=x,F.OptGroup=k;var B=F,U=n(257),z=n(1322),G=n(132),V=n(262),Y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},q="SECRET_COMBOBOX_MODE_DO_NOT_USE",H=function(e,t){var n,c,l=e.prefixCls,s=e.bordered,f=void 0===s||s,d=e.className,p=e.getPopupContainer,m=e.dropdownClassName,h=e.listHeight,y=void 0===h?256:h,v=e.listItemHeight,b=void 0===v?24:v,g=e.size,_=e.notFoundContent,w=Y(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","listHeight","listItemHeight","size","notFoundContent"]),E=a.useContext(U.b),O=E.getPopupContainer,x=E.getPrefixCls,j=E.renderEmpty,k=E.direction,S=E.virtual,C=E.dropdownMatchSelectWidth,N=a.useContext(G.b),P=x("select",l),T=x(),A=a.useMemo((function(){var e=w.mode;if("combobox"!==e)return e===q?"combobox":e}),[w.mode]),L="multiple"===A||"tags"===A;c=void 0!==_?_:"combobox"===A?null:j("Select");var I=Object(z.a)(Object(o.default)(Object(o.default)({},w),{multiple:L,prefixCls:P})),R=I.suffixIcon,D=I.itemIcon,M=I.removeIcon,F=I.clearIcon,H=Object(i.a)(w,["suffixIcon","itemIcon"]),W=u()(m,Object(r.a)({},"".concat(P,"-dropdown-").concat(k),"rtl"===k)),K=g||N,$=u()((n={},Object(r.a)(n,"".concat(P,"-lg"),"large"===K),Object(r.a)(n,"".concat(P,"-sm"),"small"===K),Object(r.a)(n,"".concat(P,"-rtl"),"rtl"===k),Object(r.a)(n,"".concat(P,"-borderless"),!f),n),d);return a.createElement(B,Object(o.default)({ref:t,virtual:S,dropdownMatchSelectWidth:C},H,{transitionName:Object(V.b)(T,"slide-up",w.transitionName),listHeight:y,listItemHeight:b,mode:A,prefixCls:P,direction:k,inputIcon:R,menuItemSelectedIcon:D,removeIcon:M,clearIcon:F,notFoundContent:c,className:$,getPopupContainer:p||O,dropdownClassName:W}))},W=a.forwardRef(H);W.SECRET_COMBOBOX_MODE_DO_NOT_USE=q,W.Option=x,W.OptGroup=k;t.a=W},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c}));var r=n(41),o=n(292);n(399);function a(e,t){"function"==typeof e?e(t):"object"===Object(r.a)(e)&&e&&"current"in e&&(e.current=t)}function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){a(t,e)}))}}function c(e){var t,n,r=Object(o.isMemo)(e)?e.type.type:e.type;return!("function"==typeof r&&!(null===(t=r.prototype)||void 0===t?void 0:t.render))&&!("function"==typeof e&&!(null===(n=e.prototype)||void 0===n?void 0:n.render))}},,,,,function(e,t,n){"use strict";n(96);var r=n(23),o=n(0),a=n.n(o),i=n(445),c=n.n(i);t.a=function(e){var t=e.placement,n=void 0===t?"bottom":t,o=e.className,i=e.useTip,u=e.time,l=e.disableYear,s=c.a.format(u,{disableYear:l});return i?a.a.createElement(r.a,{title:c.a.format(u,{full:!0}),placement:n},a.a.createElement("span",{className:o},s)):a.a.createElement("span",{className:o},s)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(80);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=o.call(this)).ctx=e,n.renderCtx=t,n.ref=t.createRef(),n}return t=u,(n=[{key:"init",value:function(){}},{key:"didMount",value:function(){}},{key:"willUnMount",value:function(){}},{key:"render",value:function(){}},{key:"enable",value:function(){return!0}},{key:"active",value:function(){}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.n(r).a);s(f,"pluginName",""),s(f,"description","")},,,,function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return y}));var a=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_handlers",{}),o(this,"_callbacks",{}),o(this,"_stickyMessages",{}),this._instanceId=t,n&&Object.entries(n).forEach((function(e){r._handlers[e[0]]=[e[1]]}))}var t,n,a;return t=e,n=[{key:"rctInstanceId",get:function(){return this._instanceId}},{key:"registerHandler",value:function(e,t){var n=this;if(!t)return function(){};console.log("register handler: ".concat(e));var r=this._handlers[e];return r||(r=[],this._handlers[e]=r),r.push(t),this._handleStickyMessages(e),function(){n.removeHandler(e,t)}}},{key:"registerHandlers",value:function(e){var t=this;return e?(console.log("register handlers: ",Object.keys(e)),Object.entries(e).forEach((function(e){t.registerHandler(e[0],e[1])})),function(){t.removeHandlers(e)}):function(){}}},{key:"removeHandler",value:function(e,t){if(t){var n=this._handlers[e];this._handlers[e]=null==n?void 0:n.filter((function(e){return e!==t}))}}},{key:"removeHandlers",value:function(e){var t=this;e&&Object.entries(e).forEach((function(e){t.removeHandler(e[0],e[1])}))}},{key:"clearHandlers",value:function(e){e?this._handlers[e]=void 0:(console.log("will clear all handlers: size = ".concat(Object.keys(this._handlers).length)),this._handlers={})}},{key:"postMessage",value:function(e,t){var n,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return"callback"!==e&&o&&(n="callback-".concat(Date.now()),this._callbacks[n]={callback:o,multipleCallback:t.__multipleCallback}),this._postMessage(e,t,n),function(){delete r._callbacks[n]}}},{key:"_postMessage",value:function(e,t,n){throw new Error("_postMessage unimplemented!")}},{key:"_receiveMessage",value:function(e){console.log("_receiveMessage: ",e);var t=e.instanceId,n=e.params,r=e.event,o=e.bridgeCallbackId;if(t!==this._instanceId)return console.warn("instanceId not equal: ".concat(t," & ").concat(this._instanceId)),void this._handleCallback(o,{success:!1,errorMessage:"instanceId not equal"});"callback"!==r?this._handleEvent(r,n,o):o?this._handleCallback(o,n):console.warn("no bridgeCallbackId for callback")}},{key:"_postCallback",value:function(e,t){e?(console.log("will callback: ".concat(e)),this._postMessage("callback",t,e)):console.log("ignore callback")}},{key:"_handleStickyMessages",value:function(e){var t=this._stickyMessages[e];if(t){this._stickyMessages[e]=void 0;var n=t.params,r=t.bridgeCallbackId,o=t.time,a=t.sticky,i=Date.now()-o;i>a?console.log("sticky duration expired, will ignore: ".concat(e,", duration = ").concat(i,", sticky = ").concat(a)):this._handleEvent(e,n,r,!0)}}},{key:"_handleEvent",value:function(e,t,n,r){var o=this,a=this._handlers[e];if(a)a.forEach((function(e){e(t,(function(e){o._postCallback(n,e)}))}));else{console.warn("cannot find handler: ".concat(e,", ").concat(JSON.stringify(t)));var i=null==t?void 0:t.__sticky;i>0&&!r?(console.log("** add event to sticky list: ".concat(e)),this._stickyMessages[e]={event:e,params:t,bridgeCallbackId:n,sticky:i,time:Date.now()}):this._postCallback(n,{success:!1,error:8,errorMessage:"handler not find for ".concat(e)})}}},{key:"_handleCallback",value:function(e,t){if(e){var n=this._callbacks[e]||{},r=n.callback,o=n.multipleCallback;r?(o||delete this._callbacks[e],r(t)):console.warn("cannot find callback with: ".concat(e))}}}],n&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,n,r,o=s(a);function a(){return c(this,a),o.apply(this,arguments)}return t=a,r=[{key:"_registerPendingHandlers",value:function(){window.__rctBridgeStub.registerHandlers(a._pendingHandlers),a._pendingHandlers=[]}},{key:"_removePendingHandler",value:function(e,t){a._pendingHandlers[e]===t&&delete a._pendingHandlers[e]}},{key:"_notifyReadyCallbacks",value:function(){a._pendingReadyCallbacks.forEach((function(e){return e()})),a._pendingReadyCallbacks=[]}}],(n=[{key:"handleEvent",value:function(e){this._receiveMessage(e)}},{key:"_postMessage",value:function(e,t,n){window.AlipayJSBridge.call("notifyRCTEvent",{rctInstanceId:this._instanceId,params:{instanceId:this._instanceId,event:e,params:t,bridgeCallbackId:n}},(function(e){e.success||console.warn("notifyRCTEvent error: ".concat(e.error," - ").concat(e.errorMessage))}))}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function h(e){if(window.__rctBridgeStub)return e();m._pendingReadyCallbacks.push(e)}p(m,"_pendingHandlers",{}),p(m,"_pendingReadyCallbacks",[]),window.__rctBridgeSetup=!1;var y={onReady:h,setup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;function t(e){window.AlipayJSBridge?e():document.addEventListener("AlipayJSBridgeReady",(function(){e()}))}window.__rctBridgeSetup?null==e||e({success:!1}):(window.__rctBridgeSetup=!0,window.__rctBridgeStub?null==e||e({success:!0}):t((function(){var t,n,r=null===(t=window.AlipayJSBridge)||void 0===t||null===(n=t.startupParams)||void 0===n?void 0:n.rctInstanceId;if(!r)return console.error("window.__rctBridgeStub: no rctInstanceId found"),void(null==e||e({success:!1,errorMessage:"no rctInstanceId found"}));window.__rctBridgeStub=new m(r),m._registerPendingHandlers(),null==e||e({success:!0}),m._notifyReadyCallbacks()})))},get isReady(){return null!=window.__rctBridgeStub},get startupParams(){var e;return null===(e=window.AlipayJSBridge)||void 0===e?void 0:e.startupParams},get isYuque(){var e,t;return null===(e=window.AlipayJSBridge)||void 0===e||null===(t=e.startupParams)||void 0===t?void 0:t.isYuque},get isAndroid(){var e,t;return null===(e=window.AlipayJSBridge)||void 0===e||null===(t=e.startupParams)||void 0===t?void 0:t.isAndroid},get isIOS(){var e,t;return null===(e=window.AlipayJSBridge)||void 0===e||null===(t=e.startupParams)||void 0===t?void 0:t.isIOS},get origin(){var e,t;return null===(e=window.AlipayJSBridge)||void 0===e||null===(t=e.startupParams)||void 0===t?void 0:t.origin},onMessage:function(e,t){return window.__rctBridgeStub?window.__rctBridgeStub.registerHandler(e,t):(console.warn("window.__rctBridgeStub not initialized! will register [".concat(e,"] later")),m._pendingHandlers[e]=t,function(){window.__rctBridgeStub?window.__rctBridgeStub.removeHandler(e,t):m._removePendingHandler(e,t)})},onMessages:function(e){return window.__rctBridgeStub?window.__rctBridgeStub.registerHandlers(e):(console.warn("window.__rctBridgeStub not initialized! will register events later"),Object.entries(e).forEach((function(e){m._pendingHandlers[e[0]]=e[1]})),function(){window.__rctBridgeStub?window.__rctBridgeStub.removeHandlers(e):Object.entries(e).forEach((function(e){m._removePendingHandler(e[0],e[1])}))})},postMessage:function(e,t,n){return window.__rctBridgeStub||console.warn("window.__rctBridgeStub not initialized! will post [".concat(e,"] when ready")),h((function(){return window.__rctBridgeStub.postMessage(e,t,n)}))}}},,,,function(e,t,n){"use strict";var r=n(131).SIZE.MB;e.exports={TYPES:{Like:"Like",Consume:"Consume",CreateDoc:"CreateDoc",CreateNote:"CreateNote",Comment:"Comment",Follow:"Follow",Member:"Member",Hobby:"Hobby",ThanksgivingNote:"ThanksgivingNote"},TARGET_TYPES:{Doc:"Doc",Self:"Self",Note:"Note",User:"User",Hobby:"Hobby"},ACTION_TYPES:{consume:0,income:1},BELONGED_TYPES:{User:"User",Organization:"Organization"},EXCHANGE_RATIO:{Like:7,CreateDoc:3,CreateNote:3,Comment:2,Follow:2,ThanksgivingNote:200},EXCHANGE_TYPES:{hobby:"hobby",member_30_day:"member_30_day",traffic_50_mb:"traffic_50_mb",traffic_100_mb:"traffic_100_mb",traffic_500_mb:"traffic_500_mb",traffic_1_gb:"traffic_1_gb"},EXCHANGE_RULE_GRAINS:{traffic_50_mb:200,traffic_100_mb:400,traffic_500_mb:2e3,traffic_1_gb:4e3,member_30_day:3e3},TRAFFIC_RULE:{traffic_50_mb:50*r,traffic_100_mb:100*r,traffic_500_mb:500*r,traffic_1_gb:1024*r},MEMBER_RULE:{member_30_day:30},EXCHANGE_COUNT_PER_MONTH:5,LIMIT:{CreateDoc:100,CreateNote:100,Follow:100,Comment:100,Like:2e3},ORG_LIMIT_EVERY_MONTH:2e4}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),o=n.n(r),a=n(292);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return o.a.Children.forEach(e,(function(e){(null!=e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(i(e)):Object(a.isFragment)(e)&&e.props?n=n.concat(i(e.props.children,t)):n.push(e))})),n}},,function(e,t,n){"use strict";t.a={wrapper:"Create-module_wrapper_Jiqsh",header:"Create-module_header_kF7DM",headerTitle:"Create-module_headerTitle_KBZT5",headerReviewName:"Create-module_headerReviewName_zLDNP",headerActions:"Create-module_headerActions_GCU7X",footer:"Create-module_footer_IQYrY",btn:"Create-module_btn_KC5H4",fullBtn:"Create-module_fullBtn_jieFd",whiteBtn:"Create-module_whiteBtn_1TkFL",approveBtn:"Create-module_approveBtn_CmlKW",btnCancel:"Create-module_btnCancel_F4e8g",descInput:"Create-module_descInput_vUru2",footerNoBorder:"Create-module_footerNoBorder_CQL+E",tooltip:"Create-module_tooltip_lsslV",miniWrapper:"Create-module_miniWrapper_1npMe",reviewBtn:"Create-module_reviewBtn_+oRG+",handleWrapper:"Create-module_handleWrapper_txASJ"}},,,function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return y}));var r=n(41),o=n(40),a=n(11),i=n(55),c=n(197),u=n(85),l=n(221);function s(e,t){return null!=e?e:t}function f(e){return function e(t){return Object(c.a)(t).map((function(t){if(!Object(l.i)(t))return Object(u.a)(!t,"Tree/TreeNode can only accept TreeNode as children."),null;var n=t.key,r=t.props,o=r.children,c=Object(i.a)(r,["children"]),s=Object(a.a)({key:n},c),f=e(o);return f.length&&(s.children=f),s})).filter((function(e){return e}))}(e)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new Set(!0===t?[]:t),r=[];function i(e){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.map((function(u,f){var d=Object(l.h)(c?c.pos:"0",f),p=s(u.key,d),m=Object(a.a)(Object(a.a)({},u),{},{parent:c,pos:d,children:null,data:u,isStart:[].concat(Object(o.a)(c?c.isStart:[]),[0===f]),isEnd:[].concat(Object(o.a)(c?c.isEnd:[]),[f===e.length-1])});return r.push(m),!0===t||n.has(p)?m.children=i(u.children||[],m):m.children=[],m}))}return i(e),r}function p(e,t,n){var o,a,i=null,c=Object(r.a)(n);"function"===c||"string"===c?i=n:n&&"object"===c&&(o=n.childrenPropName,i=n.externalGetKey),o=o||"children",i?"string"==typeof i?a=function(e){return e[i]}:"function"==typeof i&&(a=function(e){return i(e)}):a=function(e,t){return s(e.key,t)},function n(r,i,c){var u=r?r[o]:e,s=r?Object(l.h)(c.pos,i):"0";if(r){var f=a(r,s),d={node:r,index:i,pos:s,key:f,parentPos:c.node?c.pos:null,level:c.level+1};t(d)}u&&u.forEach((function(e,t){n(e,t,{node:r,pos:s,level:c?c.level+1:-1})}))}(null)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.initWrapper,r=t.processEntity,o=t.onProcessFinished,a=t.externalGetKey,i=t.childrenPropName,c=arguments.length>2?arguments[2]:void 0,u=a||c,l={},f={},d={posEntities:l,keyEntities:f};return n&&(d=n(d)||d),p(e,(function(e){var t=e.node,n=e.index,o=e.pos,a=e.key,i=e.parentPos,c={node:t,index:n,key:a,pos:o,level:e.level},u=s(a,o);l[o]=c,f[u]=c,c.parent=l[i],c.parent&&(c.parent.children=c.parent.children||[],c.parent.children.push(c)),r&&r(c,d)}),{externalGetKey:u,childrenPropName:i}),o&&o(d),d}function h(e,t){var n=t.expandedKeys,r=t.selectedKeys,o=t.loadedKeys,a=t.loadingKeys,i=t.checkedKeys,c=t.halfCheckedKeys,u=t.dragOverNodeKey,l=t.dropPosition,s=t.keyEntities[e];return{eventKey:e,expanded:-1!==n.indexOf(e),selected:-1!==r.indexOf(e),loaded:-1!==o.indexOf(e),loading:-1!==a.indexOf(e),checked:-1!==i.indexOf(e),halfChecked:-1!==c.indexOf(e),pos:String(s?s.pos:""),dragOver:u===e&&0===l,dragOverGapTop:u===e&&-1===l,dragOverGapBottom:u===e&&1===l}}function y(e){var t=e.data,n=e.expanded,r=e.selected,o=e.checked,i=e.loaded,c=e.loading,l=e.halfChecked,s=e.dragOver,f=e.dragOverGapTop,d=e.dragOverGapBottom,p=e.pos,m=e.active,h=Object(a.a)(Object(a.a)({},t),{},{expanded:n,selected:r,checked:o,loaded:i,loading:c,halfChecked:l,dragOver:s,dragOverGapTop:f,dragOverGapBottom:d,pos:p,active:m});return"props"in h||Object.defineProperty(h,"props",{get:function(){return Object(u.a)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),h}},,,function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(0),i=n(10),c=n.n(i),u=n(1319),l=n(40),s=n(28),f=n(126),d=n(257),p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},m=a.createContext(null),h=function(e,t){var n=e.defaultValue,i=e.children,u=e.options,h=void 0===u?[]:u,y=e.prefixCls,v=e.className,b=e.style,g=e.onChange,_=p(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),w=a.useContext(d.b),O=w.getPrefixCls,x=w.direction,j=a.useState(_.value||n||[]),k=Object(s.a)(j,2),S=k[0],C=k[1],N=a.useState([]),P=Object(s.a)(N,2),T=P[0],A=P[1];a.useEffect((function(){"value"in _&&C(_.value||[])}),[_.value]);var L=function(){return h.map((function(e){return"string"==typeof e?{label:e,value:e}:e}))},I=O("checkbox",y),R="".concat(I,"-group"),D=Object(f.a)(_,["value","disabled"]);h&&h.length>0&&(i=L().map((function(e){return a.createElement(E,{prefixCls:I,key:e.value.toString(),disabled:"disabled"in e?e.disabled:_.disabled,value:e.value,checked:-1!==S.indexOf(e.value),onChange:e.onChange,className:"".concat(R,"-item"),style:e.style},e.label)})));var M={toggleOption:function(e){var t=S.indexOf(e.value),n=Object(l.a)(S);-1===t?n.push(e.value):n.splice(t,1),"value"in _||C(n);var r=L();null==g||g(n.filter((function(e){return-1!==T.indexOf(e)})).sort((function(e,t){return r.findIndex((function(t){return t.value===e}))-r.findIndex((function(e){return e.value===t}))})))},value:S,disabled:_.disabled,name:_.name,registerValue:function(e){A((function(t){return[].concat(Object(l.a)(t),[e])}))},cancelValue:function(e){A((function(t){return t.filter((function(t){return t!==e}))}))}},F=c()(R,Object(r.a)({},"".concat(R,"-rtl"),"rtl"===x),v);return a.createElement("div",Object(o.default)({className:F,style:b},D,{ref:t}),a.createElement(m.Provider,{value:M},i))},y=a.forwardRef(h),v=a.memo(y),b=n(95),g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e,t){var n,i=e.prefixCls,l=e.className,s=e.children,f=e.indeterminate,p=void 0!==f&&f,h=e.style,y=e.onMouseEnter,v=e.onMouseLeave,_=e.skipGroup,w=void 0!==_&&_,E=g(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),O=a.useContext(d.b),x=O.getPrefixCls,j=O.direction,k=a.useContext(m),S=a.useRef(E.value);a.useEffect((function(){null==k||k.registerValue(E.value),Object(b.a)("checked"in E||!!k||!("value"in E),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),a.useEffect((function(){if(!w)return E.value!==S.current&&(null==k||k.cancelValue(S.current),null==k||k.registerValue(E.value)),function(){return null==k?void 0:k.cancelValue(E.value)}}),[E.value]);var C=x("checkbox",i),N=Object(o.default)({},E);k&&!w&&(N.onChange=function(){E.onChange&&E.onChange.apply(E,arguments),k.toggleOption&&k.toggleOption({label:s,value:E.value})},N.name=k.name,N.checked=-1!==k.value.indexOf(E.value),N.disabled=E.disabled||k.disabled);var P=c()((n={},Object(r.a)(n,"".concat(C,"-wrapper"),!0),Object(r.a)(n,"".concat(C,"-rtl"),"rtl"===j),Object(r.a)(n,"".concat(C,"-wrapper-checked"),N.checked),Object(r.a)(n,"".concat(C,"-wrapper-disabled"),N.disabled),n),l),T=c()(Object(r.a)({},"".concat(C,"-indeterminate"),p));return a.createElement("label",{className:P,style:h,onMouseEnter:y,onMouseLeave:v},a.createElement(u.a,Object(o.default)({},N,{prefixCls:C,className:T,ref:t})),void 0!==s&&a.createElement("span",null,s))},w=a.forwardRef(_);w.displayName="Checkbox";var E=w,O=E;O.Group=v,O.__ANT_CHECKBOX=!0;t.a=O},,,,,,function(e,t,n){var r=n(2609),o=n(2180)((function(e,t){return null==e?{}:r(e,t)}));e.exports=o},function(e,t,n){"use strict";var r=n(949),o=n(518),a=n.n(o),i=n(149),c=n.n(i),u=n(950),l=n.n(u),s=n(951),f=n.n(s),d={_kojis:null,_initScrollbarTimer:null,_scrollToHashTimer:null,_scrollbarInitialized:!1,_antdLocale:null,getAntdLocale:function(){if(!this._antdLocale){var e="en-us"===window.appData.locale;this._antdLocale=e?l.a:f.a}return this._antdLocale},showNewbieTip:function(){var e=window.appData,t=e.isYuque,n=e.organization,r=e.tips;return"#newbie"===window.location.hash||!(!r||!t||n)&&r.some((function(e){return"newbie"===e.type}))},getLocaleSwitchUrl:function(e){var t=new URLSearchParams(window.location.search),n=window.location.hash||"";return t.set("language",e),"?".concat(t.toString()).concat(n)},getFooterLinks:function(e){var t=e.pathname,n=window.appData,r=n.locale,o=n.me,a=n.organization,i=n.customDomain,c=!(!a||!a.id),u=["/about","/about/security","/about/organization","/about/price"].includes(t),l=o&&o.id,s={about:{type:"link",name:__("关于语雀"),url:"/help/about"},help:{type:"link",name:__("使用帮助"),url:"/help"},security:{type:"link",name:__("数据安全"),url:"/about/security"},terms:{type:"link",name:__("服务协议"),url:"/terms"},blog:{type:"link",name:__("语雀的天空"),url:"https://www.yuque.com/yuque/blog"},changelog:{type:"link",name:__("更新日志"),url:"/terms"},register:{type:"link-primary",name:__("快速注册"),url:"/login"},locale:{type:"link",name:"en-us"===r?__("中文"):__("English"),url:this.getLocaleSwitchUrl("en-us"===r?"zh-cn":"en-us"),target:"_self"},feedback:{type:"link",name:__("反馈给语雀"),url:"/feedbacks/new"},developer:{type:"link",name:__("开发者"),url:window.appData.isYuque?"https://www.yuque.com/yuque/developer":"https://yuque.antfin.com/lark/developer"},homepage:{type:"link",name:__("语雀官网"),url:"/about"},toPc:{type:"link-with-effect",action:"switch-to-desktop",name:__("桌面版本")},toMobile:{type:"link-with-effect",action:"switch-to-mobile",name:__("手机版")}},f=[];return o&&"desktop"===o.mobile_view&&f.push(s.toMobile),i||f.push(s.about),window.h5?f.push(s.toPc):(c||f.push(s.help),f.push(s.security),c||f.push(s.terms)),u?l||f.push({type:"split",name:"split-1"},s.register):(f.push({type:"split",name:"split-1"},s.locale),l||["/login","/register"].includes(t)||f.push(s.register)),f},localeToLakeLang:function(e){if(!e)return"en";return{"en-us":"en","zh-cn":"zh-cn"}[e.toLowerCase()]||"en"},getUserJoinOrgTip:function(e){var t=window.appData.tips||[];return 0===t.length?null:t.find((function(t){return t.type===a.a.TYPES_MAP.user_join_org&&t.content==="".concat(e)}))},removeUserJoinOrgTip:function(e){var t=window.appData.tips||[];if(0===t.length)return null;var n=t.findIndex((function(t){return t.type===a.a.TYPES_MAP.user_join_org&&t.content==="".concat(e)}));n>-1&&(t.splice(n,1),window.appData.tips=t)},getOrgExpireTip:function(e,t){if(!e)return null;var n=window.appData.tips||[];return 0===n.length?null:n.find((function(n){return n.type===t&&n.content==="".concat(e.id)}))},getUploadExhaustTip:function(e){if(!e)return null;var t=window.appData.tips||[];return 0===t.length?null:t.find((function(t){return(t.type===a.a.TYPES_MAP.org_upload_will_use_out||t.type===a.a.TYPES_MAP.org_upload_use_out)&&t.content==="".concat(e.id)}))},markUserTipAsRead:function(e){var t=window.appData.tips;window.appData.tips=t.filter((function(t){return t.id!==e}))},isDefaultBook:function(e,t){return t=t||{},"User"===(e=e||{}).type&&t.slug===c.a.DEFAULT_BOOK_SLUG},_getDefaultLoginGotoUrl:function(){var e=window.location.href;return encodeURIComponent(e)},login:function(e){e=e||this._getDefaultLoginGotoUrl(),window.location.href="/login?goto=".concat(e)},register:function(e){e=e||this._getDefaultLoginGotoUrl(),window.location.href="/register?goto=".concat(e)},isIphoneX:function(){if(!window.navigator.userAgent.includes("iPhone"))return!1;var e=window.devicePixelRatio&&3===window.devicePixelRatio&&375===window.screen.width&&812===window.screen.height,t=window.devicePixelRatio&&2===window.devicePixelRatio&&414===window.screen.width&&896===window.screen.height,n=window.devicePixelRatio&&3===window.devicePixelRatio&&414===window.screen.width&&896===window.screen.height;return e||t||n},scrollToHash:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=window.location.hash;if(!n)return!1;n=n.replace("#","");try{e=document.querySelector('[id="'.concat(decodeURIComponent(n),'"]'))}catch(r){return!1}return!!e&&(this._scrollToHashTimer&&clearTimeout(this._scrollToHashTimer),this._scrollToHashTimer=setTimeout((function(){var n=e.getBoundingClientRect().top;t.top&&"number"==typeof t.top&&(n-=t.top),0!==n&&(document.documentElement.scrollTop+=n,document.body.scrollTop+=n)}),1),!0)},initScrollbarPosition:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._scrollbarInitialized)return!1;clearTimeout(this._initScrollbarTimer);var n=function(){d.scrollToHash(t)&&(e._scrollbarInitialized=!0,clearTimeout(e._initScrollbarTimer))},r=function e(t){t<=0||(t--,setTimeout((function(){n(),e(t)}),200))},o=Date.now();window.addEventListener("load",(function(){n(),Date.now()-o<1e3&&r(5)})),this._initScrollbarTimer=setTimeout(n,3e3),n()},autoScrollerGetter:function(){return this.autoScroller||(this.autoScroller=new r.AutoScrollTo),this.autoScroller},siteName:function(){return window.appData.siteName||__("语雀")},siteTitle:function(e){return"".concat(e," · ").concat(this.siteName())},MAX_Z_INDEX:99999};d.PV_NEED_LOGIN_VIEW=window.appData.loginCardPV||2e3,t.a=d},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return s}));var r=14,o=18,a=268,i={doc:"#017EFF",sheet:"#00CC4B",board:"#8366E3",table:"#00B4DE",ppt:"#FF7F50",_default:"#017EFF"},c={default:"#d8d8d8",in:"#C7F0DF",in_dot:"#45DE9D",out_dot:"#5F9FF6",out:"#C0D9FC"},u={doc:"https://gw.alipayobjects.com/zos/bmw-prod/11d695b4-30c1-478f-940a-e20095ccb2fe.svg",board:"https://gw.alipayobjects.com/zos/bmw-prod/d62043aa-bdc3-4d0c-b68c-a771108516a3.svg",thread:"https://gw.alipayobjects.com/zos/bmw-prod/1f4ca629-5760-465a-9207-7a7f49d01ca6.svg",design:"https://gw.alipayobjects.com/zos/bmw-prod/f0eded1a-a849-44f6-a5e2-3d8f5724ebef.svg",mind:"https://gw.alipayobjects.com/zos/bmw-prod/b74e7bab-1935-48ae-80f8-82ea648697e5.svg",sheet:"https://gw.alipayobjects.com/zos/bmw-prod/616d0a4a-9cfa-4cd7-9525-f928f0f7485d.svg",table:"https://gw.alipayobjects.com/zos/bmw-prod/0d0a1799-c870-4f66-8164-3b6a788e0f89.svg",organizationunit:"https://gw.alipayobjects.com/zos/bmw-prod/a69b963b-47e0-445d-8851-1eee4e853c95.svg"},l={doc:"https://gw.alipayobjects.com/zos/bmw-prod/c4f139bc-a6ab-4868-925e-33c92bd73016.svg",table:"https://gw.alipayobjects.com/zos/bmw-prod/e626b969-83b2-4b01-b65c-e0260c2befcf.svg",sheet:"https://gw.alipayobjects.com/zos/bmw-prod/5ebeb5a3-aa3c-4350-b9c0-91ce5ea18eda.svg",board:"https://gw.alipayobjects.com/zos/bmw-prod/01f8fa5a-d885-472d-bd82-dff446b95f6e.svg",ppt:"https://gw.alipayobjects.com/zos/bmw-prod/fb6fbaaf-e2e0-4856-b44f-6e4646139d88.svg",baiyan:"https://gw.alipayobjects.com/zos/bmw-prod/fb430c53-275c-4519-ab99-17e758b6e826.svg",yuyan:"https://gw.alipayobjects.com/zos/bmw-prod/cdd06f41-fc72-4870-b201-95441a197eae.svg",aone:"https://gw.alipayobjects.com/zos/bmw-prod/19b7f4f4-3211-4e94-a9e2-6621abff9ddc.svg",antcode:"https://gw.alipayobjects.com/zos/bmw-prod/73daf1d5-8544-4525-95de-721a0685efe8.svg",linke:"https://gw.alipayobjects.com/zos/bmw-prod/20041a5c-898e-4970-a740-d0b8b6858e79.svg",teambition:"https://gw.alipayobjects.com/zos/bmw-prod/967fcc64-b752-4956-af26-dcd784b98988.svg",__default:"https://gw.alipayobjects.com/zos/bmw-prod/32a2a5eb-2853-499d-a4ab-0a3a33278116.svg"},s="#CFE3FF"},function(e,t,n){"use strict";e.exports={PROMO_STATUS:{initialized:0,verificated:1,invalid:-1},PROMO_TYPES:{amount:0,percent:1,gift:2,gift_with_traffic:3},PROMO_USAGE:{member:"member",group:"group",organization:"organization"},PROMO_TYPES_LABEL:{0:"减免",1:"折扣",2:"赠送时长",3:"赠送时长和流量"},PROMO_USAGE_LABEL:{member:"个人",group:"团队",organization:"空间"},PROMO_STATUS_LABEL:{initialized:"未使用",verificated:"已核销",invalid:"已销毁"},PROMO_ORG_RATIO:{0:1,1:1,2:2,3:4}}},,,,,,function(e,t,n){var r=n(1011);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"k",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"j",(function(){return h})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return v}));var r=n(40),o=n(41),a=(n(55),n(0),n(85));n(688);function i(e,t){var n=e.slice(),r=n.indexOf(t);return r>=0&&n.splice(r,1),n}function c(e,t){var n=e.slice();return-1===n.indexOf(t)&&n.push(t),n}function u(e){return e.split("-")}function l(e,t){return"".concat(e,"-").concat(t)}function s(e){return e&&e.type&&e.type.isTreeNode}function f(e,t){var n=[];return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){var r=t.key,o=t.children;n.push(r),e(o)}))}(t[e].children),n}function d(e){if(e.parent){var t=u(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function p(e,t,n,r,o,a,i,c,l,s){var f,p=e.clientX,m=e.clientY,h=e.target.getBoundingClientRect(),y=h.top,v=h.height,b=(("rtl"===s?-1:1)*(((null==o?void 0:o.x)||0)-p)-12)/r,g=c[n.props.eventKey];if(m<y+v/2){var _=i.findIndex((function(e){return e.data.key===g.key})),w=i[_<=0?0:_-1].data.key;g=c[w]}var E=g.key,O=g,x=g.key,j=0,k=0;if(!l.includes(E))for(var S=0;S<b&&d(g);S+=1)g=g.parent,k+=1;var C,N=g.node,P=!0;return C=u(g.pos),0===Number(C[C.length-1])&&0===g.level&&m<y+v/2&&a({dropNode:N,dropPosition:-1})&&g.key===n.props.eventKey?j=-1:(O.children||[]).length&&l.includes(x)?a({dropNode:N,dropPosition:0})?j=0:P=!1:0===k?b>-1.5?a({dropNode:N,dropPosition:1})?j=1:P=!1:a({dropNode:N,dropPosition:0})?j=0:a({dropNode:N,dropPosition:1})?j=1:P=!1:a({dropNode:N,dropPosition:1})?j=1:P=!1,{dropPosition:j,dropLevelOffset:k,dropTargetKey:g.key,dropTargetPos:g.pos,dragOverNodeKey:x,dropContainerKey:0===j?null:(null===(f=g.parent)||void 0===f?void 0:f.key)||null,dropAllowed:P}}function m(e,t){if(e)return t.multiple?e.slice():e.length?[e[0]]:e}function h(e){if(!e)return null;var t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else{if("object"!==Object(o.a)(e))return Object(a.a)(!1,"`checkedKeys` is not an array or an object"),null;t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0}}return t}function y(e,t){var n=new Set;function o(e){if(!n.has(e)){var r=t[e];if(r){n.add(e);var a=r.parent;r.node.disabled||a&&o(a.key)}}}return(e||[]).forEach((function(e){o(e)})),Object(r.a)(n)}function v(e){var t={};return Object.keys(e).forEach((function(n){(n.startsWith("data-")||n.startsWith("aria-"))&&(t[n]=e[n])})),t}},,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return le}));var r=n(18),o=n(11),a=n(28),i=n(41),c=n(0),u=n(689),l=n(181),s=n(10),f=n.n(s),d=n(353);function p(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var m,h,y,v=(m=Object(d.a)(),h="undefined"!=typeof window?window:{},y={animationend:p("Animation","AnimationEnd"),transitionend:p("Transition","TransitionEnd")},m&&("AnimationEvent"in h||delete y.animationend.animation,"TransitionEvent"in h||delete y.transitionend.transition),y),b={};if(Object(d.a)()){var g=document.createElement("div");b=g.style}var _={};function w(e){if(_[e])return _[e];var t=v[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var a=n[o];if(Object.prototype.hasOwnProperty.call(t,a)&&a in b)return _[e]=t[a],_[e]}return""}var E=w("animationend"),O=w("transitionend"),x=!(!E||!O),j=E||"animationend",k=O||"transitionend";function S(e,t){return e?"object"===Object(i.a)(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}var C="none",N="appear",P="enter",T="leave",A="none",L="prepare",I="start",R="active",D="end",M=n(566),F=n(119),B=Object(d.a)()?c.useLayoutEffect:c.useEffect,U=[L,I,R,D];function z(e){return e===R||e===D}var G=function(e,t){var n=Object(M.a)(A),r=Object(a.a)(n,2),o=r[0],i=r[1],u=function(){var e=c.useRef(null);function t(){F.a.cancel(e.current)}return c.useEffect((function(){return function(){t()}}),[]),[function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var a=Object(F.a)((function(){o<=1?r({isCanceled:function(){return a!==e.current}}):n(r,o-1)}));e.current=a},t]}(),l=Object(a.a)(u,2),s=l[0],f=l[1];return B((function(){if(o!==A&&o!==D){var e=U.indexOf(o),n=U[e+1],r=t(o);false===r?i(n,!0):s((function(e){function t(){e.isCanceled()||i(n,!0)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,o]),c.useEffect((function(){return function(){f()}}),[]),[function(){i(L,!0)},o]};function V(e,t,n,i){var u=i.motionEnter,l=void 0===u||u,s=i.motionAppear,f=void 0===s||s,d=i.motionLeave,p=void 0===d||d,m=i.motionDeadline,h=i.motionLeaveImmediately,y=i.onAppearPrepare,v=i.onEnterPrepare,b=i.onLeavePrepare,g=i.onAppearStart,_=i.onEnterStart,w=i.onLeaveStart,E=i.onAppearActive,O=i.onEnterActive,x=i.onLeaveActive,S=i.onAppearEnd,A=i.onEnterEnd,D=i.onLeaveEnd,F=i.onVisibleChanged,U=Object(M.a)(),V=Object(a.a)(U,2),Y=V[0],q=V[1],H=Object(M.a)(C),W=Object(a.a)(H,2),K=W[0],$=W[1],Q=Object(M.a)(null),X=Object(a.a)(Q,2),J=X[0],Z=X[1],ee=Object(c.useRef)(!1),te=Object(c.useRef)(null);function ne(){return n()}var re=Object(c.useRef)(!1);function oe(e){var t=ne();if(!e||e.deadline||e.target===t){var n,r=re.current;K===N&&r?n=null==S?void 0:S(t,e):K===P&&r?n=null==A?void 0:A(t,e):K===T&&r&&(n=null==D?void 0:D(t,e)),K!==C&&r&&!1!==n&&($(C,!0),Z(null,!0))}}var ae=function(e){var t=Object(c.useRef)(),n=Object(c.useRef)(e);n.current=e;var r=c.useCallback((function(e){n.current(e)}),[]);function o(e){e&&(e.removeEventListener(k,r),e.removeEventListener(j,r))}return c.useEffect((function(){return function(){o(t.current)}}),[]),[function(e){t.current&&t.current!==e&&o(t.current),e&&e!==t.current&&(e.addEventListener(k,r),e.addEventListener(j,r),t.current=e)},o]}(oe),ie=Object(a.a)(ae,1)[0],ce=c.useMemo((function(){var e,t,n;switch(K){case N:return e={},Object(r.a)(e,L,y),Object(r.a)(e,I,g),Object(r.a)(e,R,E),e;case P:return t={},Object(r.a)(t,L,v),Object(r.a)(t,I,_),Object(r.a)(t,R,O),t;case T:return n={},Object(r.a)(n,L,b),Object(r.a)(n,I,w),Object(r.a)(n,R,x),n;default:return{}}}),[K]),ue=G(K,(function(e){if(e===L){var t=ce.prepare;return!!t&&t(ne())}var n;fe in ce&&Z((null===(n=ce[fe])||void 0===n?void 0:n.call(ce,ne(),null))||null);return fe===R&&(ie(ne()),m>0&&(clearTimeout(te.current),te.current=setTimeout((function(){oe({deadline:!0})}),m))),true})),le=Object(a.a)(ue,2),se=le[0],fe=le[1],de=z(fe);re.current=de,B((function(){q(t);var n,r=ee.current;(ee.current=!0,e)&&(!r&&t&&f&&(n=N),r&&t&&l&&(n=P),(r&&!t&&p||!r&&h&&!t&&p)&&(n=T),n&&($(n),se()))}),[t]),Object(c.useEffect)((function(){(K===N&&!f||K===P&&!l||K===T&&!p)&&$(C)}),[f,l,p]),Object(c.useEffect)((function(){return function(){ee.current=!1,clearTimeout(te.current)}}),[]);var pe=c.useRef(!1);Object(c.useEffect)((function(){Y&&(pe.current=!0),void 0!==Y&&K===C&&((pe.current||Y)&&(null==F||F(Y)),pe.current=!0)}),[Y,K]);var me=J;return ce.prepare&&fe===I&&(me=Object(o.a)({transition:"none"},me)),[K,fe,me,null!=Y?Y:t]}var Y=n(57),q=n(58),H=n(66),W=n(72),K=function(e){Object(H.a)(n,e);var t=Object(W.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"render",value:function(){return this.props.children}}]),n}(c.Component),$=K;var Q=function(e){var t=e;function n(e){return!(!e.motionName||!t)}"object"===Object(i.a)(e)&&(t=e.transitionSupport);var s=c.forwardRef((function(e,t){var i=e.visible,s=void 0===i||i,d=e.removeOnLeave,p=void 0===d||d,m=e.forceRender,h=e.children,y=e.motionName,v=e.leavedClassName,b=e.eventProps,g=n(e),_=Object(c.useRef)(),w=Object(c.useRef)();var E=V(g,s,(function(){try{return _.current instanceof HTMLElement?_.current:Object(u.a)(w.current)}catch(e){return null}}),e),O=Object(a.a)(E,4),x=O[0],j=O[1],k=O[2],N=O[3],P=c.useRef(N);N&&(P.current=!0);var T,A=c.useCallback((function(e){_.current=e,Object(l.b)(t,e)}),[t]),R=Object(o.a)(Object(o.a)({},b),{},{visible:s});if(h)if(x!==C&&n(e)){var D,M;j===L?M="prepare":z(j)?M="active":j===I&&(M="start"),T=h(Object(o.a)(Object(o.a)({},R),{},{className:f()(S(y,x),(D={},Object(r.a)(D,S(y,"".concat(x,"-").concat(M)),M),Object(r.a)(D,y,"string"==typeof y),D)),style:k}),A)}else T=N?h(Object(o.a)({},R),A):!p&&P.current?h(Object(o.a)(Object(o.a)({},R),{},{className:v}),A):m?h(Object(o.a)(Object(o.a)({},R),{},{style:{display:"none"}}),A):null;else T=null;c.isValidElement(T)&&Object(l.c)(T)&&(T.ref||(T=c.cloneElement(T,{ref:A})));return c.createElement($,{ref:w},T)}));return s.displayName="CSSMotion",s}(x),X=n(14),J=n(55),Z="add",ee="keep",te="remove",ne="removed";function re(e){var t;return t=e&&"object"===Object(i.a)(e)&&"key"in e?e:{key:e},Object(o.a)(Object(o.a)({},t),{},{key:String(t.key)})}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(re)}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,a=t.length,i=oe(e),c=oe(t);i.forEach((function(e){for(var t=!1,i=r;i<a;i+=1){var u=c[i];if(u.key===e.key){r<i&&(n=n.concat(c.slice(r,i).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{status:Z})}))),r=i),n.push(Object(o.a)(Object(o.a)({},u),{},{status:ee})),r+=1,t=!0;break}}t||n.push(Object(o.a)(Object(o.a)({},e),{},{status:te}))})),r<a&&(n=n.concat(c.slice(r).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{status:Z})}))));var u={};n.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1}));var l=Object.keys(u).filter((function(e){return u[e]>1}));return l.forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==te}))).forEach((function(t){t.key===e&&(t.status=ee)}))})),n}var ie=["component","children","onVisibleChanged","onAllRemoved"],ce=["status"],ue=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q,n=function(e){Object(H.a)(r,e);var n=Object(W.a)(r);function r(){var e;Object(Y.a)(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).state={keyEntities:[]},e.removeKey=function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:Object(o.a)(Object(o.a)({},e),{},{status:ne})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==ne})).length},e}return Object(q.a)(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,o=r.component,a=r.children,i=r.onVisibleChanged,u=r.onAllRemoved,l=Object(J.a)(r,ie),s=o||c.Fragment,f={};return ue.forEach((function(e){f[e]=l[e],delete l[e]})),delete l.keys,c.createElement(s,l,n.map((function(n){var r=n.status,o=Object(J.a)(n,ce),l=r===Z||r===ee;return c.createElement(t,Object(X.default)({},f,{key:o.key,visible:l,eventProps:o,onVisibleChanged:function(t){(null==i||i(t,{key:o.key}),t)||0===e.removeKey(o.key)&&u&&u()}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,o=oe(n);return{keyEntities:ae(r,o).filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==ne||e.status!==te}))}}}]),r}(c.Component);return n.defaultProps={component:"div"},n}(x);t.b=Q},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},,function(e,t,n){var r=n(2144),o=n(1175),a=n(1172),i=n(269),c=n(672),u=n(1173),l=n(1281),s=n(1280),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||s(e)||a(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},,,function(e,t,n){"use strict";e.exports={TARGET_TYPE:["Doc","DatasheetView","Comment","Note","Topic"],REPORT_TYPE:{vulgar:"0902",political:"0903",illegal:"0904",ad:"0905",abuse:"2050",personal_tort:"9111",enterprise_tort:"9112",clearnet:"0001"},STATUS:{draft:0,ignore:1,confirm:2}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(191),o=n(293),a=["onConfirm","onCancel"],i=["onAction","onCancel"],c=["onAction"],u=["onEditComplete"],l=["onEditComplete"],s=["onAction"],f=["onAction"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y={get rctInstanceId(){var e,t;return null===(e=window.AlipayJSBridge)||void 0===e||null===(t=e.startupParams)||void 0===t?void 0:t.rctInstanceId},showToast:function(e){r.a.postMessage(o.a.showToast,e)},showConfirm:function(e){var t=e.onConfirm,n=e.onCancel,i=h(e,a);r.a.postMessage(o.a.showConfirm,i,(function(e){e.confirm?null==t||t():null==n||n()}))},showAlert:function(e){y.showConfirm(p(p({},e),{},{noCancel:!0}))},showActionSheet:function(e){var t=e.onAction,n=e.onCancel,a=h(e,i);r.a.postMessage(o.a.showActionSheet,a,(function(e){e.canceled?null==n||n():null!=e.actionIndex&&(null==t||t(e.actionIndex))}))},setTitleBar:function(e){r.a.postMessage(o.a.setTitleBar,e)},updateTitleBar:function(e){r.a.postMessage(o.a.updateTitleBar,e)},notifyEvent:function(e,t){r.a.postMessage(o.a.notifyEvent,{eventName:e,params:t})},monitorEvent:function(e){r.a.postMessage(o.a.monitorEvent,e)},startShare:function(e){r.a.postMessage(o.a.startShare,e)},startShareDoc:function(e){r.a.postMessage(o.a.startShareDoc,e)},openPage:function(e){r.a.postMessage(o.a.openPage,e)},closePage:function(){r.a.postMessage(o.a.closePage)},pushWebWindow:function(e){y.openPage({pageName:"webPage",params:e,type:"push"})},openUrlInSystem:function(e){return new Promise((function(t){r.a.postMessage(o.a.openUrlInSystem,{url:e},(function(e){t(e.success)}))}))},downloadFile:function(e){return new Promise((function(t){r.a.postMessage(o.a.downloadFile,e,(function(e){t(e.success)}))}))},previewImage:function(e){y.openPage({pageName:"imagePreview",params:e,type:"navigate"})},saveToGallery:function(e){return new Promise((function(t){r.a.postMessage(o.a.saveToGallery,e,(function(e){t(e.success)}))}))},impactVibration:function(e,t){r.a.postMessage(o.a.impactVibration,{pattern:e,repeat:t})},putStorage:function(e){return new Promise((function(t){r.a.postMessage(o.a.putStorage,e,(function(e){t(e.success)}))}))},getStorage:function(e){return new Promise((function(t){r.a.postMessage(o.a.getStorage,e,(function(e){t(e.content)}))}))},getClipboard:function(){return new Promise((function(e){r.a.postMessage(o.a.getClipboard,{},(function(t){e(t.content)}))}))},setClipboard:function(e){return new Promise((function(t){r.a.postMessage(o.a.setClipboard,{content:e},(function(e){t(e.success)}))}))},showCustomizedMenu:function(e){var t=e.onAction,n=h(e,c);r.a.postMessage(o.a.showCustomizedMenu,n,(function(e){null==t||t(e.action)}))},hideCustomizedMenu:function(){r.a.postMessage(o.a.hideCustomizedMenu)},showEditLinkModal:function(e){var t=e.onEditComplete,n=h(e,u);r.a.postMessage(o.a.showEditLinkModal,n,(function(e){null==t||t(e.result)}))},showEditInputModal:function(e){var t=e.onEditComplete,n=h(e,l);r.a.postMessage(o.a.showEditInputModal,n,(function(e){null==t||t(e.result)}))},showRichActionMenu:function(e){var t=e.onAction,n=h(e,s);return r.a.postMessage(o.a.showRichActionMenu,p(p({},n),{},{__multipleCallback:!0}),(function(e){null==t||t(e.action)}))},updateRichActionMenu:function(e){r.a.postMessage(o.a.updateRichActionMenu,e)},showSelectorMenu:function(e){var t=e.onAction,n=h(e,f);r.a.postMessage(o.a.showSelectorMenu,n,(function(e){null==t||t(e.result)}))}}},function(e,t,n){"use strict";var r=n(845).PRIVACY,o=n(56),a=n(2186),i=n(2664),c=n(2187),u=n(2665),l=n(2666);e.exports={PRIVACY:r,createPrivacy:function(e){var t=e.target;if(e.target&&e.target.id||(e.target=null,t={}),e.ctx){var n=e.ctx;e.type=e.type||(o(t,"Model.name")||"").toLowerCase(),e.__=n.__,e.org=e.org||n.organization,e.isYuque=n.app.config.isYuque,e.isPublicCloud=n.app.config.isPublicCloud}else e.type=e.type||t.type&&t.type.toLowerCase(),e.__=window.__,e.org=e.org||window.appData.organization,e.isYuque=window.appData.isYuque,e.isPublicCloud=window.appData.isPublicCloud;switch(null==e.isYuque&&(e.isYuque=!0),null==e.isPublicCloud&&(e.isPublicCloud=!0),e.isYuque||(e.isPublicCloud=!1),e.type){case"doc":return new u(e);case"book":return new c(e);case"user":case"group":return"User"===t.type?new i(e):new a(e);default:return e.type="default",new l(e)}}}},,,,,,,,,,,,function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(57),i=n(58),c=n(66),u=n(72),l=n(0),s=n(10),f=n.n(s),d=n(126),p=n(42),m=n.n(p),h=n(257),y=n(303),v=n(118),b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},g=(Object(y.a)("small","default","large"),null);var _=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var i;Object(a.a)(this,n),(i=t.call(this,e)).debouncifyUpdateSpinning=function(e){var t=(e||i.props).delay;t&&(i.cancelExistingSpin(),i.updateSpinning=m()(i.originalUpdateSpinning,t))},i.updateSpinning=function(){var e=i.props.spinning;i.state.spinning!==e&&i.setState({spinning:e})},i.renderSpin=function(e){var t,n=e.getPrefixCls,a=e.direction,c=i.props,u=c.prefixCls,s=c.className,p=c.size,m=c.tip,h=c.wrapperClassName,y=c.style,_=b(c,["prefixCls","className","size","tip","wrapperClassName","style"]),w=i.state.spinning,E=n("spin",u),O=f()(E,(t={},Object(o.a)(t,"".concat(E,"-sm"),"small"===p),Object(o.a)(t,"".concat(E,"-lg"),"large"===p),Object(o.a)(t,"".concat(E,"-spinning"),w),Object(o.a)(t,"".concat(E,"-show-text"),!!m),Object(o.a)(t,"".concat(E,"-rtl"),"rtl"===a),t),s),x=Object(d.a)(_,["spinning","delay","indicator"]),j=l.createElement("div",Object(r.default)({},x,{style:y,className:O}),function(e,t){var n=t.indicator,r="".concat(e,"-dot");return null===n?null:Object(v.b)(n)?Object(v.a)(n,{className:f()(n.props.className,r)}):Object(v.b)(g)?Object(v.a)(g,{className:f()(g.props.className,r)}):l.createElement("span",{className:f()(r,"".concat(e,"-dot-spin"))},l.createElement("i",{className:"".concat(e,"-dot-item")}),l.createElement("i",{className:"".concat(e,"-dot-item")}),l.createElement("i",{className:"".concat(e,"-dot-item")}),l.createElement("i",{className:"".concat(e,"-dot-item")}))}(E,i.props),m?l.createElement("div",{className:"".concat(E,"-text")},m):null);if(i.isNestedPattern()){var k=f()("".concat(E,"-container"),Object(o.a)({},"".concat(E,"-blur"),w));return l.createElement("div",Object(r.default)({},x,{className:f()("".concat(E,"-nested-loading"),h)}),w&&l.createElement("div",{key:"loading"},j),l.createElement("div",{className:k,key:"container"},i.props.children))}return j};var c=e.spinning,u=function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(c,e.delay);return i.state={spinning:c&&!u},i.originalUpdateSpinning=i.updateSpinning,i.debouncifyUpdateSpinning(e),i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.updateSpinning()}},{key:"componentDidUpdate",value:function(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function(){var e=this.updateSpinning;e&&e.cancel&&e.cancel()}},{key:"isNestedPattern",value:function(){return!(!this.props||void 0===this.props.children)}},{key:"render",value:function(){return l.createElement(h.a,null,this.renderSpin)}}],[{key:"setDefaultIndicator",value:function(e){g=e}}]),n}(l.Component);_.defaultProps={spinning:!0,size:"default",wrapperClassName:""},t.a=_},function(e,t,n){"use strict";var r=n(14),o=n(41),a=n(28),i=n(18),c=n(0),u=n(10),l=n.n(u),s=n(543),f=n(257),d=n(126),p=c.createContext({labelAlign:"right",vertical:!1,itemRef:function(){}}),m=c.createContext({updateItemErrors:function(){}}),h=c.createContext({prefixCls:""}),y=n(585);function v(e){return void 0===e||!1===e?[]:Array.isArray(e)?e:[e]}function b(e,t){if(e.length){var n=e.join("_");return t?"".concat(t,"_").concat(n):n}}function g(e){return v(e).join("_")}function _(e){var t=Object(s.e)(),n=Object(a.a)(t,1)[0],o=c.useRef({}),i=c.useMemo((function(){return e||Object(r.default)(Object(r.default)({},n),{__INTERNAL__:{itemRef:function(e){return function(t){var n=g(e);t?o.current[n]=t:delete o.current[n]}}},scrollToField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=v(e),o=b(n,i.__INTERNAL__.name),a=o?document.getElementById(o):null;a&&Object(y.a)(a,Object(r.default)({scrollMode:"if-needed",block:"nearest"},t))},getFieldInstance:function(e){var t=g(e);return o.current[t]}})}),[e,n]);return[i]}var w=n(132),E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},O=function(e,t){var n,u=c.useContext(w.b),d=c.useContext(f.b),m=d.getPrefixCls,h=d.direction,y=d.form,v=e.prefixCls,b=e.className,g=void 0===b?"":b,O=e.size,x=void 0===O?u:O,j=e.form,k=e.colon,S=e.labelAlign,C=e.labelCol,N=e.wrapperCol,P=e.hideRequiredMark,T=e.layout,A=void 0===T?"horizontal":T,L=e.scrollToFirstError,I=e.requiredMark,R=e.onFinishFailed,D=e.name,M=E(e,["prefixCls","className","size","form","colon","labelAlign","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name"]),F=Object(c.useMemo)((function(){return void 0!==I?I:y&&void 0!==y.requiredMark?y.requiredMark:!P}),[P,I,y]),B=m("form",v),U=l()(B,(n={},Object(i.a)(n,"".concat(B,"-").concat(A),!0),Object(i.a)(n,"".concat(B,"-hide-required-mark"),!1===F),Object(i.a)(n,"".concat(B,"-rtl"),"rtl"===h),Object(i.a)(n,"".concat(B,"-").concat(x),x),n),g),z=_(j),G=Object(a.a)(z,1)[0],V=G.__INTERNAL__;V.name=D;var Y=Object(c.useMemo)((function(){return{name:D,labelAlign:S,labelCol:C,wrapperCol:N,vertical:"vertical"===A,colon:k,requiredMark:F,itemRef:V.itemRef}}),[D,S,C,N,A,k,F]);c.useImperativeHandle(t,(function(){return G}));return c.createElement(w.a,{size:x},c.createElement(p.Provider,{value:Y},c.createElement(s.d,Object(r.default)({id:D},M,{name:D,onFinishFailed:function(e){null==R||R(e);var t={block:"nearest"};L&&e.errorFields.length&&("object"===Object(o.a)(L)&&(t=L),G.scrollToField(e.errorFields[0].name,t))},form:G,className:U}))))},x=c.forwardRef(O),j=n(40),k=n(101),S=n.n(k),C=n(434),N=n(181),P=n(2037),T=n(303),A=n(95),L=n(906),I=n(1215),R=n(158),D=n(382),M=n(151),F=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var B=function(e){var t=e.prefixCls,n=e.label,u=e.htmlFor,s=e.labelCol,f=e.labelAlign,d=e.colon,m=e.required,h=e.requiredMark,y=e.tooltip,v=Object(R.b)("Form"),b=Object(a.a)(v,1)[0];return n?c.createElement(p.Consumer,{key:"label"},(function(e){var a,p,v=e.vertical,g=e.labelAlign,_=e.labelCol,w=e.colon,E=s||_||{},O=f||g,x="".concat(t,"-item-label"),j=l()(x,"left"===O&&"".concat(x,"-left"),E.className),k=n,S=!0===d||!1!==w&&!1!==d;S&&!v&&"string"==typeof n&&""!==n.trim()&&(k=n.replace(/[:|：]\s*$/,""));var C=function(e){return e?"object"!==Object(o.a)(e)||c.isValidElement(e)?{title:e}:e:null}(y);if(C){var N=C.icon,P=void 0===N?c.createElement(L.a,null):N,T=F(C,["icon"]),A=c.createElement(M.a,T,c.cloneElement(P,{className:"".concat(t,"-item-tooltip")}));k=c.createElement(c.Fragment,null,k,A)}"optional"!==h||m||(k=c.createElement(c.Fragment,null,k,c.createElement("span",{className:"".concat(t,"-item-optional")},(null==b?void 0:b.optional)||(null===(p=D.a.Form)||void 0===p?void 0:p.optional))));var R=l()((a={},Object(i.a)(a,"".concat(t,"-item-required"),m),Object(i.a)(a,"".concat(t,"-item-required-mark-optional"),"optional"===h),Object(i.a)(a,"".concat(t,"-item-no-colon"),!S),a));return c.createElement(I.a,Object(r.default)({},E,{className:j}),c.createElement("label",{htmlFor:u,className:R,title:"string"==typeof n?n:""},k))})):null},U=n(208),z=n(154),G=n(497),V=n(498),Y=n(228),q=n(399),H=n(639);var W=[];function K(e){var t=e.errors,n=void 0===t?W:t,r=e.help,o=e.onDomErrorVisibleChange,u=Object(H.a)(),s=c.useContext(h),d=s.prefixCls,p=s.status,m=c.useContext(f.b).getPrefixCls,y=function(e,t,n){var r=c.useRef({errors:e,visible:!!e.length}),o=Object(H.a)(),a=function(){var n=r.current.visible,a=!!e.length,i=r.current.errors;r.current.errors=e,r.current.visible=a,n!==a?t(a):(i.length!==e.length||i.some((function(t,n){return t!==e[n]})))&&o()};return c.useEffect((function(){if(!n){var e=setTimeout(a,10);return function(){return clearTimeout(e)}}}),[e]),n&&a(),[r.current.visible,r.current.errors]}(n,(function(e){e&&Promise.resolve().then((function(){null==o||o(!0)})),u()}),!!r),v=Object(a.a)(y,2),b=v[0],g=v[1],_=Object(q.a)((function(){return g}),b,(function(e,t){return t})),w=c.useState(p),E=Object(a.a)(w,2),O=E[0],x=E[1];c.useEffect((function(){b&&p&&x(p)}),[b,p]);var j="".concat(d,"-item-explain"),k=m();return c.createElement(Y.b,{motionDeadline:500,visible:b,motionName:"".concat(k,"-show-help"),onLeaveEnd:function(){null==o||o(!1)},motionAppear:!0,removeOnLeave:!0},(function(e){var t=e.className;return c.createElement("div",{className:l()(j,Object(i.a)({},"".concat(j,"-").concat(O),O),t),key:"help"},_.map((function(e,t){return c.createElement("div",{key:t,role:"alert"},e)})))}))}var $={success:G.a,warning:V.a,error:z.a,validating:U.a},Q=function(e){var t=e.prefixCls,n=e.status,o=e.wrapperCol,a=e.children,i=e.help,u=e.errors,s=e.onDomErrorVisibleChange,f=e.hasFeedback,d=e._internalItemRender,m=e.validateStatus,y=e.extra,v="".concat(t,"-item"),b=c.useContext(p),g=o||b.wrapperCol||{},_=l()("".concat(v,"-control"),g.className);c.useEffect((function(){return function(){s(!1)}}),[]);var w=m&&$[m],E=f&&w?c.createElement("span",{className:"".concat(v,"-children-icon")},c.createElement(w,null)):null,O=Object(r.default)({},b);delete O.labelCol,delete O.wrapperCol;var x=c.createElement("div",{className:"".concat(v,"-control-input")},c.createElement("div",{className:"".concat(v,"-control-input-content")},a),E),j=c.createElement(h.Provider,{value:{prefixCls:t,status:n}},c.createElement(K,{errors:u,help:i,onDomErrorVisibleChange:s})),k=y?c.createElement("div",{className:"".concat(v,"-extra")},y):null,S=d&&"pro_table_render"===d.mark&&d.render?d.render(e,{input:x,errorList:j,extra:k}):c.createElement(c.Fragment,null,x,j,k);return c.createElement(p.Provider,{value:O},c.createElement(I.a,Object(r.default)({},g,{className:_}),S))},X=n(118),J=n(119);var Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ee="__SPLIT__",te=(Object(T.a)("success","warning","error","validating",""),c.memo((function(e){return e.children}),(function(e,t){return e.value===t.value&&e.update===t.update})));var ne=function(e){var t=e.name,n=e.fieldKey,u=e.noStyle,h=e.dependencies,y=e.prefixCls,g=e.style,_=e.className,w=e.shouldUpdate,E=e.hasFeedback,O=e.help,x=e.rules,k=e.validateStatus,T=e.children,L=e.required,I=e.label,R=e.messageVariables,D=e.trigger,M=void 0===D?"onChange":D,F=e.validateTrigger,U=e.hidden,z=Z(e,["name","fieldKey","noStyle","dependencies","prefixCls","style","className","shouldUpdate","hasFeedback","help","rules","validateStatus","children","required","label","messageVariables","trigger","validateTrigger","hidden"]),G=Object(c.useRef)(!1),V=Object(c.useContext)(f.b).getPrefixCls,Y=Object(c.useContext)(p),q=Y.name,H=Y.requiredMark,W=Object(c.useContext)(m).updateItemErrors,K=c.useState(!!O),$=Object(a.a)(K,2),ne=$[0],re=$[1],oe=function(e){var t=c.useState(e),n=Object(a.a)(t,2),r=n[0],o=n[1],i=Object(c.useRef)(null),u=Object(c.useRef)([]),l=Object(c.useRef)(!1);return c.useEffect((function(){return function(){l.current=!0,J.a.cancel(i.current)}}),[]),[r,function(e){l.current||(null===i.current&&(u.current=[],i.current=Object(J.a)((function(){i.current=null,o((function(e){var t=e;return u.current.forEach((function(e){t=e(t)})),t}))}))),u.current.push(e))}]}({}),ae=Object(a.a)(oe,2),ie=ae[0],ce=ae[1],ue=Object(c.useContext)(C.b).validateTrigger,le=void 0!==F?F:ue;function se(e){G.current||re(e)}var fe=function(e){return null===e&&Object(A.a)(!1,"Form.Item","`null` is passed as `name` property"),!(null==e)}(t),de=Object(c.useRef)([]);c.useEffect((function(){return function(){G.current=!0,W(de.current.join(ee),[])}}),[]);var pe,me,he=V("form",y),ye=u?W:function(e,t,n){ce((function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n!==e&&delete o[n],S()(o[e],t)?o:Object(r.default)(Object(r.default)({},o),Object(i.a)({},e,t))}))},ve=(pe=c.useContext(p).itemRef,me=c.useRef({}),function(e,t){var n=t&&"object"===Object(o.a)(t)&&t.ref,r=e.join("_");return me.current.name===r&&me.current.originRef===n||(me.current.name=r,me.current.originRef=n,me.current.ref=Object(N.a)(pe(e),n)),me.current.ref});function be(t,n,o,a){var s,f;if(u&&!U)return t;var p,h=[];Object.keys(ie).forEach((function(e){h=[].concat(Object(j.a)(h),Object(j.a)(ie[e]||[]))})),null!=O?p=v(O):(p=o?o.errors:[],p=[].concat(Object(j.a)(p),Object(j.a)(h)));var y="";void 0!==k?y=k:(null==o?void 0:o.validating)?y="validating":(null===(f=null==o?void 0:o.errors)||void 0===f?void 0:f.length)||h.length?y="error":(null==o?void 0:o.touched)&&(y="success");var b=(s={},Object(i.a)(s,"".concat(he,"-item"),!0),Object(i.a)(s,"".concat(he,"-item-with-help"),ne||!!O),Object(i.a)(s,"".concat(_),!!_),Object(i.a)(s,"".concat(he,"-item-has-feedback"),y&&E),Object(i.a)(s,"".concat(he,"-item-has-success"),"success"===y),Object(i.a)(s,"".concat(he,"-item-has-warning"),"warning"===y),Object(i.a)(s,"".concat(he,"-item-has-error"),"error"===y),Object(i.a)(s,"".concat(he,"-item-is-validating"),"validating"===y),Object(i.a)(s,"".concat(he,"-item-hidden"),U),s);return c.createElement(P.a,Object(r.default)({className:l()(b),style:g,key:"row"},Object(d.a)(z,["colon","extra","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","labelAlign","labelCol","normalize","preserve","tooltip","validateFirst","valuePropName","wrapperCol","_internalItemRender"])),c.createElement(B,Object(r.default)({htmlFor:n,required:a,requiredMark:H},e,{prefixCls:he})),c.createElement(Q,Object(r.default)({},e,o,{errors:p,prefixCls:he,status:y,onDomErrorVisibleChange:se,validateStatus:y}),c.createElement(m.Provider,{value:{updateItemErrors:ye}},t)))}var ge="function"==typeof T,_e=Object(c.useRef)(0);if(_e.current+=1,!fe&&!ge&&!h)return be(T);var we={};return"string"==typeof I&&(we.label=I),R&&(we=Object(r.default)(Object(r.default)({},we),R)),c.createElement(s.a,Object(r.default)({},e,{messageVariables:we,trigger:M,validateTrigger:le,onReset:function(){se(!1)}}),(function(a,i,l){var s=i.errors,f=v(t).length&&i?i.name:[],d=b(f,q);if(u){var p=de.current.join(ee);if(de.current=Object(j.a)(f),n){var m=Array.isArray(n)?n:[n];de.current=[].concat(Object(j.a)(f.slice(0,-1)),Object(j.a)(m))}W(de.current.join(ee),s,p)}var y=void 0!==L?L:!(!x||!x.some((function(e){if(e&&"object"===Object(o.a)(e)&&e.required)return!0;if("function"==typeof e){var t=e(l);return t&&t.required}return!1}))),g=Object(r.default)({},a),_=null;if(Object(A.a)(!(w&&h),"Form.Item","`shouldUpdate` and `dependencies` shouldn't be used together. See https://ant.design/components/form/#dependencies."),Array.isArray(T)&&fe)Object(A.a)(!1,"Form.Item","`children` is array of render props cannot have `name`."),_=T;else if(ge&&(!w&&!h||fe))Object(A.a)(!(!w&&!h),"Form.Item","`children` of render props only work with `shouldUpdate` or `dependencies`."),Object(A.a)(!fe,"Form.Item","Do not use `name` with `children` of render props since it's not a field.");else if(!h||ge||fe)if(Object(X.b)(T)){Object(A.a)(void 0===T.props.defaultValue,"Form.Item","`defaultValue` will not work on controlled Field. You should use `initialValues` of Form instead.");var E=Object(r.default)(Object(r.default)({},T.props),g);E.id||(E.id=d),Object(N.c)(T)&&(E.ref=ve(f,T)),new Set([].concat(Object(j.a)(v(M)),Object(j.a)(v(le)))).forEach((function(e){E[e]=function(){for(var t,n,r,o,a,i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];null===(r=g[e])||void 0===r||(t=r).call.apply(t,[g].concat(c)),null===(a=(o=T.props)[e])||void 0===a||(n=a).call.apply(n,[o].concat(c))}})),_=c.createElement(te,{value:g[e.valuePropName||"value"],update:_e.current},Object(X.a)(T,E))}else ge&&(w||h)&&!fe?_=T(l):(Object(A.a)(!f.length,"Form.Item","`name` is only used for validate React element. If you are using Form.Item as layout display, please remove `name` instead."),_=T);else Object(A.a)(!1,"Form.Item","Must set `name` or use render props when `dependencies` is set.");return be(_,d,i,y)}))},re=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},oe=function(e){var t=e.prefixCls,n=e.children,o=re(e,["prefixCls","children"]);Object(A.a)(!!o.name,"Form.List","Miss `name` prop.");var a=(0,c.useContext(f.b).getPrefixCls)("form",t);return c.createElement(s.c,o,(function(e,t,o){return c.createElement(h.Provider,{value:{prefixCls:a,status:"error"}},n(e.map((function(e){return Object(r.default)(Object(r.default)({},e),{fieldKey:e.key})})),t,{errors:o.errors}))}))},ae=x;ae.Item=ne,ae.List=oe,ae.ErrorList=K,ae.useForm=_,ae.Provider=function(e){var t=Object(d.a)(e,["prefixCls"]);return c.createElement(s.b,t)},ae.create=function(){Object(A.a)(!1,"Form","antd v4 removed `Form.create`. Please remove or use `@ant-design/compatible` instead.")};t.a=ae},function(e,t,n){"use strict";var r=n(505);t.a=r.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(39),o=n.n(r);function a(e,t,n,r){var a=o.a.unstable_batchedUpdates?function(e){o.a.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,a,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,a,r)}}}},function(e,t,n){"use strict";e.exports={TYPES:{title:"TITLE",doc:"DOC",link:"LINK",uncreated_doc:"UNCREATED_DOC"},VISIBLE:{hidden:0,visible:1},OPEN_WINDOW:{self:0,new:1},MAX_NODES_COUNT:5e3,BATCH_OPERATION_MAX_NODES_LIMIT:100,BATCH_ACTIONS:{batchRemove:"batchRemove",batchDestroy:"batchDestroy",batchMove:"batchMove",batchCopy:"batchCopy"},ACTIONS:{prependChild:"prependChild",appendChild:"appendChild",moveAfter:"moveAfter",moveBefore:"moveBefore",insert:"insert",insertSibling:"insertSibling",remove:"remove",removeWithChildren:"removeWithChildren",destroy:"destroy",destroyWithChildren:"destroyWithChildren",edit:"edit",append:"append",appendByDocs:"appendByDocs",prependByDocs:"prependByDocs",insertSiblingByDocs:"insertSiblingByDocs",syncDoc:"syncDoc",syncDeletedDocs:"syncDeletedDocs"},LIST_TOC_ACTIONS:{prependChild:"prependChild",moveAfter:"moveAfter",moveBefore:"moveBefore",insert:"insert",insertSibling:"insertSibling",remove:"remove",destroy:"destroy",destroyWithChildren:"destroyWithChildren",edit:"edit",append:"append",insertSiblingByDocs:"insertSiblingByDocs",syncDoc:"syncDoc",syncDeletedDocs:"syncDeletedDocs",batchRemove:"batchRemove",batchDestroy:"batchDestroy",batchMove:"batchMove",batchCopy:"batchCopy"},DEFAULT_DISPLAY_LEVEL:1}},function(e,t,n){"use strict";e.exports={ALLOW_COMMENTABLE_TYPE:["Doc","Topic","ArtboardComment","Resource","DocVersion","Note"],TYPE_TO_SCOPE:{Topic:"topic",Doc:"doc",ArtBoardComment:"artboard",Resource:"resource"},ALLOW_FORMAT:["asl","markdown","lake","text","blank"],STATUS:{normal:0,banned:-1},MOOD:{empty:0,excited:1,happy:2,fighting:3,diligent:4,angry:5},TYPE:{COMMENT:"COMMENT",WORDING_COMMENT:"WORDING_COMMENT",SUB_COMMENT:"SUB_COMMENT",AREA_COMMENT:"AREA_COMMENT",OPEN_REVIEW:"OPEN_REVIEW",FINISH_REVIEW:"FINISH_REVIEW",CANCEL_REVIEW:"CANCEL_REVIEW",REJECT_REVIEW:"REJECT_REVIEW",REVIEW_APPROVAL:"REVIEW_APPROVAL",REVIEW_REJECTION:"REVIEW_REJECTION",REVIEW_OPINION:"REVIEW_OPINION"},COUNTABLE_TYPES:["COMMENT","WORDING_COMMENT","SUB_COMMENT","AREA_COMMENT"],SELECTION_TYPE:{DocSelection:"DocSelection",AreaSelection:"AreaSelection",Review:"Review"},MAX_COMMENTS_COUNT:1e3}},,function(e,t,n){"use strict";e.exports={STATUS:{active:0,accepted:1,cancelled:2,rejected:3},TARGET_TYPES:{doc:"Doc",resource:"Resource"},REVIEWER_STATUS:{incomplete:0,accepted:1,rejected:2,submitted:3},REVIEWER_ROLE:{cc:"carbon copy",approver:"approver"},ACTION:{add_approval:"ADD_APPROVAL",add_rejection:"ADD_REJECTION",submit_option:"SUBMIT_OPINION"},ALIPAY_PMO_PHASE:{cp2:"CP2",req_reviewed:"REQ_REVIEWED"},GENERATED_BY_REVIEW:0,MAX_APPROVER_NUM:20,MAX_CC_NUM:20}},function(e,t,n){"use strict";t.a={noteWrapper:"index-module_noteWrapper_8B4XJ",header:"index-module_header_9CyYK",noteListContainer:"index-module_noteListContainer_dvgX-",searchPlaceholderWrapper:"index-module_searchPlaceholderWrapper_-HyKK",searchInput:"index-module_searchInput_exEN3",rightBtn:"index-module_rightBtn_YSm9h",noteType:"index-module_noteType_fAgQP",typeItem:"index-module_typeItem_KjLcP",selected:"index-module_selected_RZOsY",noteListWrapper:"index-module_noteListWrapper_nkMFR",noteList:"index-module_noteList_I4wK-",noteItem:"index-module_noteItem_RDTLt",todoActionWrapper:"index-module_todoActionWrapper_5YYJj",todoStatus:"index-module_todoStatus_uamLW",tagName:"index-module_tagName_GuiKD",selectedTagName:"index-module_selectedTagName_Zp+iy",footer:"index-module_footer_j9GwL",dateTime:"index-module_dateTime_BwY6T",action:"index-module_action_Fjp3o",noteViewer:"index-module_noteViewer_RGlkV",noteViewerPreventEvent:"index-module_noteViewerPreventEvent_uy1vk",loadMoreBtn:"index-module_loadMoreBtn_BYZIn",theEndTips:"index-module_theEndTips_+GTG-",noteListSkeletonWrapper:"index-module_noteListSkeletonWrapper_gmU8n",noteSkeletonLine:"index-module_noteSkeletonLine_k2N+9",emptyWrapper:"index-module_emptyWrapper_k87l+",searchEmpty:"index-module_searchEmpty_-8to9",filterEmpty:"index-module_filterEmpty_HD0Bj",bold:"index-module_bold_ugEHI",empty:"index-module_empty_JSfjp",img:"index-module_img_bpwPD",filterModalRoot:"index-module_filterModalRoot_akRLV",filterModal:"index-module_filterModal_cLn6s",filterModalHeader:"index-module_filterModalHeader_PaOLd",closeBtn:"index-module_closeBtn_yV7kx",filterModalCont:"index-module_filterModalCont_TxLY+",filterModalFooter:"index-module_filterModalFooter_-Ajdq",filterListWrapper:"index-module_filterListWrapper_B7cQs",filterList:"index-module_filterList_dKMb6",filterItem:"index-module_filterItem_AzeM3",filterItemSelected:"index-module_filterItemSelected_ap2F1",filterItemCountText:"index-module_filterItemCountText_6NI9a",tagExpandBtn:"index-module_tagExpandBtn_2+Mu+",searchInputWrapper:"index-module_searchInputWrapper_h1DIV",searchHistoryWrapper:"index-module_searchHistoryWrapper_Icn3j",searchContent:"index-module_searchContent_hEqBB",noteToast:"index-module_noteToast_yqKzu",text:"index-module_text_pfNXF",rightText:"index-module_rightText_xr-Pg"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(14),o=n(0),a=n(551),i=function(e){return o.createElement(u,null,(function(t){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return o.createElement(a.a,{image:a.a.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return o.createElement(a.a,{image:a.a.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return o.createElement(a.a,null)}}))},c=o.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:i}),u=c.Consumer;function l(e){return function(t){var n=function(n){return o.createElement(u,null,(function(a){var i=e.prefixCls,c=(0,a.getPrefixCls)(i,n.prefixCls);return o.createElement(t,Object(r.default)({},a,n,{prefixCls:c}))}))},a=t.constructor,i=a&&a.displayName||t.name||"Component";return n.displayName="withConfigConsumer(".concat(i,")"),n}}},,,function(e,t,n){"use strict";n(50);var r=n(19),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(32),l=n.n(u),s=n(10),f=n.n(s),d=n(49),p=n(38),m=n(127),h=n(113),y=n(1071),v=n(1013),b=n(634),g=n(1209),_="index-module_tip_rQx-e",w="index-module_paymentGuideWrapper_2jg39",E="index-module_thumb_Lw5zW",O="index-module_title_EykNL",x="index-module_body_+1-cr",j="index-module_link_zDdoa",k="index-module_actions_LRgdL",S="index-module_horizontal_rYkfB",C="index-module_btnTryout_5GVmK",N="index-module_vertical_K+cm2",P="index-module_premiumFeaturesLabel_q+uFd",T="index-module_btnNewOrg_ERjNR",A="index-module_tag_5zq8+",L="index-module_alignCenter_h648T";function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D={};function M(e){var t=e.organization,n=e.suffix,r=e.className;return a.a.createElement("span",{title:t.name,className:r},t.name," ",n)}function F(e){var t=e.organization;e.className;return a.a.createElement("a",{href:t.host,title:t.name},t.name)}function B(e){var t=e.src,n=e.size,r=e.radius,o=e.name,i=e.className;return t?a.a.createElement(m.a,{src:t,size:n,radius:r||4,name:o,className:i}):a.a.createElement(p.b,{name:"icon-organization",width:n,radius:r||4,className:i})}function U(e){var t=e.org;if(!t.expired_at)return null;var n=l()(t.expired_at).format("YYYY-MM-DD");return a.a.createElement("span",null,n)}function z(e){var t=e.organization,n=e.className,r=I(Object(o.useState)(!1),2),i=r[0],c=r[1],u=I(Object(o.useState)(!1),2),s=u[0],p=u[1],m=t.expired_at,y=t.payment_type,w=h.a.isOwner(t),E=!h.a.isFree(t),O=h.a.isExpired(t);if(y===d.PAYMENT_TYPE.free&&!w)return null;if(y===d.PAYMENT_TYPE.downgrade_free&&w)return a.a.createElement("div",{className:_,"data-testid":"org-preview-tip"},a.a.createElement("a",{style:{marginLeft:0},onClick:function(){return c(!0)}},__("升级")),i&&a.a.createElement(b.a,{key:i,visible:i,organization:t,onClose:function(){return c(!1)},type:"buyModal",orderType:d.ORDER_TYPE.upgrade}));if(y===d.PAYMENT_TYPE.free&&w)return a.a.createElement("div",{className:_,"data-testid":"org-preview-tip"},a.a.createElement("a",{style:{marginLeft:0},onClick:function(){return p(!0)}},__("试用付费版")),s&&a.a.createElement(g.a,{key:s,visible:s,organization:t,onClose:function(){return p(!1)}}));var x,j=l()(m).diff(l()(),"days");x=l()(m).isBefore(l()())?__("空间已到期，目前只能查看空间，无法进行操作"):0===j?__("空间将于今日到期，到期后只能查看空间，无法进行操作"):j<15&&j>0?__("空间还有 {remainedDays} 天到期，到期后只能查看空间，无法进行操作",{remainedDays:j}):y===d.PAYMENT_TYPE.trial?__("试用期至：{expiredAt}",{expiredAt:l()(m).format("YYYY-MM-DD")}):__("使用期至：{expiredAt}",{expiredAt:l()(m).format("YYYY-MM-DD")});return a.a.createElement("div",{className:f()(_,n),"data-testid":"org-preview-tip"},a.a.createElement("span",{style:{marginRight:10}},x),w&&a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{onClick:function(){c(!0)}},y===d.PAYMENT_TYPE.trial?__("付费"):__("续费")),E&&O&&a.a.createElement(v.a,{organization:t,text:__("降级"),type:"text"})),i&&a.a.createElement(b.a,{key:i,visible:i,organization:t,onClose:function(){return c(!1)},type:"buyModal",orderType:d.ORDER_TYPE.renew}))}function G(e){var t=e.organization,n=e.text,i=e.className,c=I(Object(o.useState)(!1),2),u=c[0],l=c[1],s=I(Object(o.useState)(!1),2),p=s[0],m=s[1];return t?h.a.isFree(t)?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.a,{type:"primary",className:f()(i,C),onClick:function(){return l(!0)}},n||__("试用付费版")),u&&a.a.createElement(g.a,{key:u,visible:u,organization:t,onClose:function(){return l(!1)}})):a.a.createElement(a.a.Fragment,null,a.a.createElement(r.a,{type:"primary",className:f()(i,C),onClick:function(){return m(!0)}},n||__("立即升级")),p&&a.a.createElement(b.a,{key:p,visible:p,organization:t,onClose:function(){return m(!1)},type:"buyModal",orderType:d.ORDER_TYPE.upgrade})):null}function V(e){var t=e.organization,n=e.showThumb,o=void 0===n||n,i=e.children,c=e.titleClassName,u=e.thumbClassName,l=e.actionsLayout,s=void 0===l?"horizontal":l,d=h.a.isFree(t);return a.a.createElement("div",{className:w},o&&a.a.createElement("span",{className:f()(E,u)}),a.a.createElement("h6",{className:f()(O,c)},__("付费版空间专属功能")),i&&a.a.createElement("div",{className:x},i),a.a.createElement("div",{className:f()(k,"horizontal"===s?S:N)},"vertical"===s?a.a.createElement(a.a.Fragment,null,a.a.createElement(D.BtnUpgrade,{text:d?__("立即试用"):__("立即升级"),organization:t}),a.a.createElement(r.a,{type:"link",href:"/about/price#team",target:"_blank"},__("了解付费版权益"))):a.a.createElement(a.a.Fragment,null,a.a.createElement(r.a,{href:"/about/price#team",target:"_blank",className:j},__("了解付费版权益")),a.a.createElement(D.BtnUpgrade,{text:d?__("立即试用"):__("立即升级"),organization:t}))))}function Y(e){var t=e.organization;return h.a.isFree(t)?null:a.a.createElement("div",{className:P})}function q(e){var t=e.organizations,n=e.defaultSpaceHost,r=e.className,o=e.isInLogo;return a.a.createElement("a",{href:"".concat(n,"/r/organizations/new"),"data-testid":"btnNewOrg",className:f()(T,r)},a.a.createElement("div",null,a.a.createElement(y.a,{variant:"body",className:L},a.a.createElement(p.b,{name:"org-add-new2",width:"24",height:"24"}),__("创建空间"),a.a.createElement("span",{className:A},o?__("{type}创建",{type:__("免费")}):__("免费试用"))),o&&!(null!=t&&t.length)&&a.a.createElement(y.a,{variant:"body",type:"secondary",mt:8},__("在企业组织中使用语雀"))))}M.propTypes={organization:c.a.object.isRequired,suffix:c.a.node,className:c.a.string},D.Name=M,F.propTypes={organization:c.a.object.isRequired,className:c.a.string},D.Link=F,B.propTypes={src:c.a.string,name:c.a.string,radius:c.a.oneOfType([c.a.string,c.a.number]),size:c.a.oneOfType([c.a.string,c.a.node]),className:c.a.string},D.Logo=B,U.propTypes={org:c.a.object},D.Expire=U,D.Price=function(){return a.a.createElement("span",null,__("5999元/年，首年可享受优惠价："),a.a.createElement("strong",null,__("2999元")))},D.Package=function(){return a.a.createElement("span",null,__("标准版，2999 元/空间/年"))},z.propTypes={organization:c.a.object.isRequired,className:c.a.string},D.ExpireTip=z,G.propTypes={organization:c.a.object.isRequired,text:c.a.string,className:c.a.string},D.BtnUpgrade=G,V.propTypes={organization:c.a.object.isRequired,showThumb:c.a.bool,children:c.a.node,titleClassName:c.a.string,thumbClassName:c.a.string,actionsLayout:c.a.string},D.PaymentGuide=V,Y.propTypes={organization:c.a.object.isRequired},D.PremiumFeaturesLabel=Y,q.propTypes={organizations:c.a.array.isRequired,defaultSpaceHost:c.a.string.isRequired,className:c.a.string,isInLogo:c.a.bool},D.NewOrg=q;t.a=D},,function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=function(){return{height:0,opacity:0}},o=function(e){return{height:e.scrollHeight,opacity:1}},a=function(e,t){return!0===(null==t?void 0:t.deadline)||"height"===t.propertyName},i={motionName:"ant-motion-collapse",onAppearStart:r,onEnterStart:r,onAppearActive:o,onEnterActive:o,onLeaveStart:function(e){return{height:e.offsetHeight}},onLeaveActive:r,onAppearEnd:a,onEnterEnd:a,onLeaveEnd:a,motionDeadline:500},c=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)};t.a=i},,,function(e,t,n){"use strict";var r,o;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(373).ROLE,c={User:"User",GroupManager:"GroupManager",GroupMember:"GroupMember",GroupReadonlyMember:"GroupReadonlyMember"},u=(a(r={},c.GroupManager,i.owner),a(r,c.GroupMember,i.member),a(r,c.GroupReadonlyMember,i.readonly),r);e.exports={TARGET_TYPE:{Book:"Book",Doc:"Doc"},ALLOW_TARGET_TYPE:["Book","Doc"],ROLE:{readonly:0,edit:1,manage:2,noPermission:3},STATUS:{invited:0,joined:1,applying:2},OWNER_TYPE:c,LEGACY_ROLE_MAP:u,GROUP_ROLE_OWNER_TYPE_MAP:(o={},a(o,i.owner,c.GroupManager),a(o,i.member,c.GroupMember),a(o,i.readonly,c.GroupReadonlyMember),o)}},,,,function(e,t){var n=Array.isArray;e.exports=n},,function(e,t,n){"use strict";n.d(t,"a",(function(){return Je}));var r=n(57),o=n(58),a=n(66),i=n(72),c=n(14),u=n(18),l=n(11),s=n(28),f=n(0),d=n(10),p=n.n(d),m=n(85),h=n(163),y=n(41),v=n(70),b=f.createContext({}),g={visibility:"hidden"};var _=function(e){var t=e.prefixCls,n=e.prevIcon,r=void 0===n?"‹":n,o=e.nextIcon,a=void 0===o?"›":o,i=e.superPrevIcon,c=void 0===i?"«":i,u=e.superNextIcon,l=void 0===u?"»":u,s=e.onSuperPrev,d=e.onSuperNext,p=e.onPrev,m=e.onNext,h=e.children,y=f.useContext(b),v=y.hideNextBtn,_=y.hidePrevBtn;return f.createElement("div",{className:t},s&&f.createElement("button",{type:"button",onClick:s,tabIndex:-1,className:"".concat(t,"-super-prev-btn"),style:_?g:{}},c),p&&f.createElement("button",{type:"button",onClick:p,tabIndex:-1,className:"".concat(t,"-prev-btn"),style:_?g:{}},r),f.createElement("div",{className:"".concat(t,"-view")},h),m&&f.createElement("button",{type:"button",onClick:m,tabIndex:-1,className:"".concat(t,"-next-btn"),style:v?g:{}},a),d&&f.createElement("button",{type:"button",onClick:d,tabIndex:-1,className:"".concat(t,"-super-next-btn"),style:v?g:{}},l))};var w=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.viewDate,o=e.onPrevDecades,a=e.onNextDecades;if(f.useContext(b).hideHeader)return null;var i="".concat(t,"-header"),u=n.getYear(r),l=Math.floor(u/U)*U,s=l+U-1;return f.createElement(_,Object(c.default)({},e,{prefixCls:i,onSuperPrev:o,onSuperNext:a}),l,"-",s)};function E(e,t,n,r,o){var a=e.setHour(t,n);return a=e.setMinute(a,r),a=e.setSecond(a,o)}function O(e,t,n){if(!n)return t;var r=t;return r=e.setHour(r,e.getHour(n)),r=e.setMinute(r,e.getMinute(n)),r=e.setSecond(r,e.getSecond(n))}function x(e,t){var n=e.getYear(t),r=e.getMonth(t)+1,o=e.getEndDate(e.getFixedDate("".concat(n,"-").concat(r,"-01"))),a=e.getDate(o),i=r<10?"0".concat(r):"".concat(r);return"".concat(n,"-").concat(i,"-").concat(a)}function j(e){for(var t=e.prefixCls,n=e.disabledDate,r=e.onSelect,o=e.picker,a=e.rowNum,i=e.colNum,c=e.prefixColumn,s=e.rowClassName,d=e.baseDate,m=e.getCellClassName,h=e.getCellText,y=e.getCellNode,v=e.getCellDate,g=e.generateConfig,_=e.titleCell,w=e.headerCells,E=f.useContext(b),O=E.onDateMouseEnter,j=E.onDateMouseLeave,k=E.mode,S="".concat(t,"-cell"),C=[],N=0;N<a;N+=1){for(var P=[],T=void 0,A=function(e){var t,a=v(d,N*i+e),s=ee({cellDate:a,mode:k,disabledDate:n,generateConfig:g});0===e&&(T=a,c&&P.push(c(T)));var b=_&&_(a);P.push(f.createElement("td",{key:e,title:b,className:p()(S,Object(l.a)((t={},Object(u.a)(t,"".concat(S,"-disabled"),s),Object(u.a)(t,"".concat(S,"-start"),1===h(a)||"year"===o&&Number(b)%10==0),Object(u.a)(t,"".concat(S,"-end"),b===x(g,a)||"year"===o&&Number(b)%10==9),t),m(a))),onClick:function(){s||r(a)},onMouseEnter:function(){!s&&O&&O(a)},onMouseLeave:function(){!s&&j&&j(a)}},y?y(a):f.createElement("div",{className:"".concat(S,"-inner")},h(a))))},L=0;L<i;L+=1)A(L);C.push(f.createElement("tr",{key:N,className:s&&s(T)},P))}return f.createElement("div",{className:"".concat(t,"-body")},f.createElement("table",{className:"".concat(t,"-content")},w&&f.createElement("thead",null,f.createElement("tr",null,w)),f.createElement("tbody",null,C)))}var k=function(e){var t=B-1,n=e.prefixCls,r=e.viewDate,o=e.generateConfig,a="".concat(n,"-cell"),i=o.getYear(r),l=Math.floor(i/B)*B,s=Math.floor(i/U)*U,d=s+U-1,p=o.setYear(r,s-Math.ceil((12*B-U)/2));return f.createElement(j,Object(c.default)({},e,{rowNum:4,colNum:3,baseDate:p,getCellText:function(e){var n=o.getYear(e);return"".concat(n,"-").concat(n+t)},getCellClassName:function(e){var n,r=o.getYear(e),i=r+t;return n={},Object(u.a)(n,"".concat(a,"-in-view"),s<=r&&i<=d),Object(u.a)(n,"".concat(a,"-selected"),r===l),n},getCellDate:function(e,t){return o.addYear(e,t*B)}}))},S=n(40),C=n(119),N=n(616),P=new Map;function T(e,t,n){if(P.get(e)&&cancelAnimationFrame(P.get(e)),n<=0)P.set(e,requestAnimationFrame((function(){e.scrollTop=t})));else{var r=(t-e.scrollTop)/n*10;P.set(e,requestAnimationFrame((function(){e.scrollTop+=r,e.scrollTop!==t&&T(e,t,n-10)})))}}function A(e,t){var n=t.onLeftRight,r=t.onCtrlLeftRight,o=t.onUpDown,a=t.onPageUpDown,i=t.onEnter,c=e.which,u=e.ctrlKey,l=e.metaKey;switch(c){case v.a.LEFT:if(u||l){if(r)return r(-1),!0}else if(n)return n(-1),!0;break;case v.a.RIGHT:if(u||l){if(r)return r(1),!0}else if(n)return n(1),!0;break;case v.a.UP:if(o)return o(-1),!0;break;case v.a.DOWN:if(o)return o(1),!0;break;case v.a.PAGE_UP:if(a)return a(-1),!0;break;case v.a.PAGE_DOWN:if(a)return a(1),!0;break;case v.a.ENTER:if(i)return i(),!0}return!1}function L(e,t,n,r){var o=e;if(!o)switch(t){case"time":o=r?"hh:mm:ss a":"HH:mm:ss";break;case"week":o="gggg-wo";break;case"month":o="YYYY-MM";break;case"quarter":o="YYYY-[Q]Q";break;case"year":o="YYYY";break;default:o=n?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"}return o}function I(e,t,n){var r="time"===e?8:10,o="function"==typeof t?t(n.getNow()).length:t.length;return Math.max(r,o)+2}var R=null,D=new Set;var M={year:function(e){return"month"===e||"date"===e?"year":e},month:function(e){return"date"===e?"month":e},quarter:function(e){return"month"===e||"date"===e?"quarter":e},week:function(e){return"date"===e?"week":e},time:null,date:null};function F(e,t){return e.some((function(e){return e&&e.contains(t)}))}var B=10,U=10*B;var z=function(e){var t=e.prefixCls,n=e.onViewDateChange,r=e.generateConfig,o=e.viewDate,a=e.operationRef,i=e.onSelect,u=e.onPanelChange,l="".concat(t,"-decade-panel");a.current={onKeyDown:function(e){return A(e,{onLeftRight:function(e){i(r.addYear(o,e*B),"key")},onCtrlLeftRight:function(e){i(r.addYear(o,e*U),"key")},onUpDown:function(e){i(r.addYear(o,e*B*3),"key")},onEnter:function(){u("year",o)}})}};var s=function(e){var t=r.addYear(o,e*U);n(t),u(null,t)};return f.createElement("div",{className:l},f.createElement(w,Object(c.default)({},e,{prefixCls:t,onPrevDecades:function(){s(-1)},onNextDecades:function(){s(1)}})),f.createElement(k,Object(c.default)({},e,{prefixCls:t,onSelect:function(e){i(e,"mouse"),u("year",e)}})))};function G(e,t){return!e&&!t||!(!e||!t)&&void 0}function V(e,t,n){var r=G(t,n);return"boolean"==typeof r?r:e.getYear(t)===e.getYear(n)}function Y(e,t){return Math.floor(e.getMonth(t)/3)+1}function q(e,t,n){var r=G(t,n);return"boolean"==typeof r?r:V(e,t,n)&&Y(e,t)===Y(e,n)}function H(e,t,n){var r=G(t,n);return"boolean"==typeof r?r:V(e,t,n)&&e.getMonth(t)===e.getMonth(n)}function W(e,t,n){var r=G(t,n);return"boolean"==typeof r?r:e.getYear(t)===e.getYear(n)&&e.getMonth(t)===e.getMonth(n)&&e.getDate(t)===e.getDate(n)}function K(e,t,n,r){var o=G(n,r);return"boolean"==typeof o?o:e.locale.getWeek(t,n)===e.locale.getWeek(t,r)}function $(e,t,n){return W(e,t,n)&&function(e,t,n){var r=G(t,n);return"boolean"==typeof r?r:e.getHour(t)===e.getHour(n)&&e.getMinute(t)===e.getMinute(n)&&e.getSecond(t)===e.getSecond(n)}(e,t,n)}function Q(e,t,n,r){return!!(t&&n&&r)&&(!W(e,t,r)&&!W(e,n,r)&&e.isAfter(r,t)&&e.isAfter(n,r))}function X(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(t){case"year":return n.addYear(e,10*r);case"quarter":case"month":return n.addYear(e,r);default:return n.addMonth(e,r)}}function J(e,t){var n=t.generateConfig,r=t.locale,o=t.format;return"function"==typeof o?o(e):n.locale.format(r.locale,e,o)}function Z(e,t){var n=t.generateConfig,r=t.locale,o=t.formatList;return e&&"function"!=typeof o[0]?n.locale.parse(r.locale,e,o):null}function ee(e){var t=e.cellDate,n=e.mode,r=e.disabledDate,o=e.generateConfig;if(!r)return!1;var a=function(e,n,a){for(var i=n;i<=a;){var c=void 0;switch(e){case"date":if(c=o.setDate(t,i),!r(c))return!1;break;case"month":if(!ee({cellDate:c=o.setMonth(t,i),mode:"month",generateConfig:o,disabledDate:r}))return!1;break;case"year":if(!ee({cellDate:c=o.setYear(t,i),mode:"year",generateConfig:o,disabledDate:r}))return!1}i+=1}return!0};switch(n){case"date":case"week":return r(t);case"month":return a("date",1,o.getDate(o.getEndDate(t)));case"quarter":var i=3*Math.floor(o.getMonth(t)/3);return a("month",i,i+2);case"year":return a("month",0,11);case"decade":var c=o.getYear(t),u=Math.floor(c/B)*B;return a("year",u,u+B-1)}}var te=function(e){if(f.useContext(b).hideHeader)return null;var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.value,a=e.format,i="".concat(t,"-header");return f.createElement(_,{prefixCls:i},o?J(o,{locale:r,format:a,generateConfig:n}):" ")},ne=n(399);var re=function(e){var t=e.prefixCls,n=e.units,r=e.onSelect,o=e.value,a=e.active,i=e.hideDisabledOptions,c="".concat(t,"-cell"),l=f.useContext(b).open,s=Object(f.useRef)(null),d=Object(f.useRef)(new Map),m=Object(f.useRef)();return Object(f.useLayoutEffect)((function(){var e=d.current.get(o);e&&!1!==l&&T(s.current,e.offsetTop,120)}),[o]),Object(f.useLayoutEffect)((function(){if(l){var e=d.current.get(o);e&&(m.current=(t=e,n=function(){T(s.current,e.offsetTop,0)},function e(){Object(N.a)(t)?n():r=Object(C.a)((function(){e()}))}(),function(){C.a.cancel(r)}))}var t,n,r;return function(){var e;null===(e=m.current)||void 0===e||e.call(m)}}),[l]),f.createElement("ul",{className:p()("".concat(t,"-column"),Object(u.a)({},"".concat(t,"-column-active"),a)),ref:s,style:{position:"relative"}},n.map((function(e){var t;return i&&e.disabled?null:f.createElement("li",{key:e.value,ref:function(t){d.current.set(e.value,t)},className:p()(c,(t={},Object(u.a)(t,"".concat(c,"-disabled"),e.disabled),Object(u.a)(t,"".concat(c,"-selected"),o===e.value),t)),onClick:function(){e.disabled||r(e.value)}},f.createElement("div",{className:"".concat(c,"-inner")},e.label))})))};function oe(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=String(e);r.length<t;)r="".concat(n).concat(e);return r}function ae(e){return null==e?[]:Array.isArray(e)?e:[e]}function ie(e){var t={};return Object.keys(e).forEach((function(n){"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n&&"name"!==n||"data-__"===n.substr(0,7)||(t[n]=e[n])})),t}function ce(e,t){return e?e[t]:null}function ue(e,t,n){var r=[ce(e,0),ce(e,1)];return r[n]="function"==typeof t?t(r[n]):t,r[0]||r[1]?r:null}function le(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n+=1)if(e[n].disabled!==t[n].disabled)return!0;return!1}function se(e,t,n,r){for(var o=[],a=e;a<=t;a+=n)o.push({label:oe(a,2),value:a,disabled:(r||[]).includes(a)});return o}var fe=function(e){var t,n=e.generateConfig,r=e.prefixCls,o=e.operationRef,a=e.activeColumnIndex,i=e.value,c=e.showHour,u=e.showMinute,d=e.showSecond,p=e.use12Hours,m=e.hourStep,h=void 0===m?1:m,y=e.minuteStep,v=void 0===y?1:y,b=e.secondStep,g=void 0===b?1:b,_=e.disabledHours,w=e.disabledMinutes,O=e.disabledSeconds,x=e.hideDisabledOptions,j=e.onSelect,k=[],S="".concat(r,"-content"),C="".concat(r,"-time-panel"),N=i?n.getHour(i):-1,P=N,T=i?n.getMinute(i):-1,A=i?n.getSecond(i):-1,L=function(e,t,r,o){var a=i||n.getNow(),c=Math.max(0,t),u=Math.max(0,r),l=Math.max(0,o);return a=E(n,a,p&&e?c+12:c,u,l)},I=se(0,23,h,_&&_()),R=Object(ne.a)((function(){return I}),I,le);p&&(t=P>=12,P%=12);var D=f.useMemo((function(){if(!p)return[!1,!1];var e=[!0,!0];return R.forEach((function(t){var n=t.disabled,r=t.value;n||(r>=12?e[1]=!1:e[0]=!1)})),e}),[p,R]),M=Object(s.a)(D,2),F=M[0],B=M[1],U=f.useMemo((function(){return p?R.filter(t?function(e){return e.value>=12}:function(e){return e.value<12}).map((function(e){var t=e.value%12,n=0===t?"12":oe(t,2);return Object(l.a)(Object(l.a)({},e),{},{label:n,value:t})})):R}),[p,t,R]),z=se(0,59,v,w&&w(N)),G=se(0,59,g,O&&O(N,T));function V(e,t,n,r,o){!1!==e&&k.push({node:f.cloneElement(t,{prefixCls:C,value:n,active:a===k.length,onSelect:o,units:r,hideDisabledOptions:x}),onSelect:o,value:n,units:r})}o.current={onUpDown:function(e){var t=k[a];if(t)for(var n=t.units.findIndex((function(e){return e.value===t.value})),r=t.units.length,o=1;o<r;o+=1){var i=t.units[(n+e*o+r)%r];if(!0!==i.disabled){t.onSelect(i.value);break}}}},V(c,f.createElement(re,{key:"hour"}),P,U,(function(e){j(L(t,e,T,A),"mouse")})),V(u,f.createElement(re,{key:"minute"}),T,z,(function(e){j(L(t,P,e,A),"mouse")})),V(d,f.createElement(re,{key:"second"}),A,G,(function(e){j(L(t,P,T,e),"mouse")}));var Y=-1;return"boolean"==typeof t&&(Y=t?1:0),V(!0===p,f.createElement(re,{key:"12hours"}),Y,[{label:"AM",value:0,disabled:F},{label:"PM",value:1,disabled:B}],(function(e){j(L(!!e,P,T,A),"mouse")})),f.createElement("div",{className:S},k.map((function(e){return e.node})))};var de=function(e){var t=e.generateConfig,n=e.format,r=void 0===n?"HH:mm:ss":n,o=e.prefixCls,a=e.active,i=e.operationRef,l=e.showHour,d=e.showMinute,m=e.showSecond,h=e.use12Hours,y=void 0!==h&&h,v=e.onSelect,b=e.value,g="".concat(o,"-time-panel"),_=f.useRef(),w=f.useState(-1),E=Object(s.a)(w,2),O=E[0],x=E[1],j=[l,d,m,y].filter((function(e){return!1!==e})).length;return i.current={onKeyDown:function(e){return A(e,{onLeftRight:function(e){x((O+e+j)%j)},onUpDown:function(e){-1===O?x(0):_.current&&_.current.onUpDown(e)},onEnter:function(){v(b||t.getNow(),"key"),x(-1)}})},onBlur:function(){x(-1)}},f.createElement("div",{className:p()(g,Object(u.a)({},"".concat(g,"-active"),a))},f.createElement(te,Object(c.default)({},e,{format:r,prefixCls:o})),f.createElement(fe,Object(c.default)({},e,{prefixCls:o,activeColumnIndex:O,operationRef:_})))},pe=f.createContext({});function me(e){var t=e.cellPrefixCls,n=e.generateConfig,r=e.rangedValue,o=e.hoverRangedValue,a=e.isInView,i=e.isSameCell,c=e.offsetCell,l=e.today,s=e.value;return function(e){var f,d=c(e,-1),p=c(e,1),m=ce(r,0),h=ce(r,1),y=ce(o,0),v=ce(o,1),b=Q(n,y,v,e);function g(e){return i(m,e)}function _(e){return i(h,e)}var w=i(y,e),E=i(v,e),O=(b||E)&&(!a(d)||_(d)),x=(b||w)&&(!a(p)||g(p));return f={},Object(u.a)(f,"".concat(t,"-in-view"),a(e)),Object(u.a)(f,"".concat(t,"-in-range"),Q(n,m,h,e)),Object(u.a)(f,"".concat(t,"-range-start"),g(e)),Object(u.a)(f,"".concat(t,"-range-end"),_(e)),Object(u.a)(f,"".concat(t,"-range-start-single"),g(e)&&!h),Object(u.a)(f,"".concat(t,"-range-end-single"),_(e)&&!m),Object(u.a)(f,"".concat(t,"-range-start-near-hover"),g(e)&&(i(d,y)||Q(n,y,v,d))),Object(u.a)(f,"".concat(t,"-range-end-near-hover"),_(e)&&(i(p,v)||Q(n,y,v,p))),Object(u.a)(f,"".concat(t,"-range-hover"),b),Object(u.a)(f,"".concat(t,"-range-hover-start"),w),Object(u.a)(f,"".concat(t,"-range-hover-end"),E),Object(u.a)(f,"".concat(t,"-range-hover-edge-start"),O),Object(u.a)(f,"".concat(t,"-range-hover-edge-end"),x),Object(u.a)(f,"".concat(t,"-range-hover-edge-start-near-range"),O&&i(d,h)),Object(u.a)(f,"".concat(t,"-range-hover-edge-end-near-range"),x&&i(p,m)),Object(u.a)(f,"".concat(t,"-today"),i(l,e)),Object(u.a)(f,"".concat(t,"-selected"),i(s,e)),f}}var he=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.prefixColumn,o=e.locale,a=e.rowCount,i=e.viewDate,u=e.value,l=e.dateRender,s=f.useContext(pe),d=s.rangedValue,p=s.hoverRangedValue,m=function(e,t,n){var r=t.locale.getWeekFirstDay(e),o=t.setDate(n,1),a=t.getWeekDay(o),i=t.addDate(o,r-a);return t.getMonth(i)===t.getMonth(n)&&t.getDate(i)>1&&(i=t.addDate(i,-7)),i}(o.locale,n,i),h="".concat(t,"-cell"),y=n.locale.getWeekFirstDay(o.locale),v=n.getNow(),b=[],g=o.shortWeekDays||(n.locale.getShortWeekDays?n.locale.getShortWeekDays(o.locale):[]);r&&b.push(f.createElement("th",{key:"empty","aria-label":"empty cell"}));for(var _=0;_<7;_+=1)b.push(f.createElement("th",{key:_},g[(_+y)%7]));var w=me({cellPrefixCls:h,today:v,value:u,generateConfig:n,rangedValue:r?null:d,hoverRangedValue:r?null:p,isSameCell:function(e,t){return W(n,e,t)},isInView:function(e){return H(n,e,i)},offsetCell:function(e,t){return n.addDate(e,t)}}),E=l?function(e){return l(e,v)}:void 0;return f.createElement(j,Object(c.default)({},e,{rowNum:a,colNum:7,baseDate:m,getCellNode:E,getCellText:n.getDate,getCellClassName:w,getCellDate:n.addDate,titleCell:function(e){return J(e,{locale:o,format:"YYYY-MM-DD",generateConfig:n})},headerCells:b}))};var ye=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,a=e.onNextMonth,i=e.onPrevMonth,u=e.onNextYear,l=e.onPrevYear,s=e.onYearClick,d=e.onMonthClick;if(f.useContext(b).hideHeader)return null;var p="".concat(t,"-header"),m=r.shortMonths||(n.locale.getShortMonths?n.locale.getShortMonths(r.locale):[]),h=n.getMonth(o),y=f.createElement("button",{type:"button",key:"year",onClick:s,tabIndex:-1,className:"".concat(t,"-year-btn")},J(o,{locale:r,format:r.yearFormat,generateConfig:n})),v=f.createElement("button",{type:"button",key:"month",onClick:d,tabIndex:-1,className:"".concat(t,"-month-btn")},r.monthFormat?J(o,{locale:r,format:r.monthFormat,generateConfig:n}):m[h]),g=r.monthBeforeYear?[v,y]:[y,v];return f.createElement(_,Object(c.default)({},e,{prefixCls:p,onSuperPrev:l,onPrev:i,onNext:a,onSuperNext:u}),g)};var ve=function(e){var t=e.prefixCls,n=e.panelName,r=void 0===n?"date":n,o=e.keyboardConfig,a=e.active,i=e.operationRef,s=e.generateConfig,d=e.value,m=e.viewDate,h=e.onViewDateChange,y=e.onPanelChange,v=e.onSelect,b="".concat(t,"-").concat(r,"-panel");i.current={onKeyDown:function(e){return A(e,Object(l.a)({onLeftRight:function(e){v(s.addDate(d||m,e),"key")},onCtrlLeftRight:function(e){v(s.addYear(d||m,e),"key")},onUpDown:function(e){v(s.addDate(d||m,7*e),"key")},onPageUpDown:function(e){v(s.addMonth(d||m,e),"key")}},o))}};var g=function(e){var t=s.addYear(m,e);h(t),y(null,t)},_=function(e){var t=s.addMonth(m,e);h(t),y(null,t)};return f.createElement("div",{className:p()(b,Object(u.a)({},"".concat(b,"-active"),a))},f.createElement(ye,Object(c.default)({},e,{prefixCls:t,value:d,viewDate:m,onPrevYear:function(){g(-1)},onNextYear:function(){g(1)},onPrevMonth:function(){_(-1)},onNextMonth:function(){_(1)},onMonthClick:function(){y("month",m)},onYearClick:function(){y("year",m)}})),f.createElement(he,Object(c.default)({},e,{onSelect:function(e){return v(e,"mouse")},prefixCls:t,value:d,viewDate:m,rowCount:6})))},be=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}("date","time");var ge=function(e){var t=e.prefixCls,n=e.operationRef,r=e.generateConfig,o=e.value,a=e.defaultValue,i=e.disabledTime,d=e.showTime,m=e.onSelect,h="".concat(t,"-datetime-panel"),b=f.useState(null),g=Object(s.a)(b,2),_=g[0],w=g[1],E=f.useRef({}),x=f.useRef({}),j="object"===Object(y.a)(d)?Object(l.a)({},d):{},k=function(e){x.current.onBlur&&x.current.onBlur(e),w(null)};n.current={onKeyDown:function(e){if(e.which===v.a.TAB){var t=(n=e.shiftKey?-1:1,r=be.indexOf(_)+n,be[r]||null);return w(t),t&&e.preventDefault(),!0}var n,r;if(_){var o="date"===_?E:x;return o.current&&o.current.onKeyDown&&o.current.onKeyDown(e),!0}return!![v.a.LEFT,v.a.RIGHT,v.a.UP,v.a.DOWN].includes(e.which)&&(w("date"),!0)},onBlur:k,onClose:k};var S=function(e,t){var n=e;"date"===t&&!o&&j.defaultValue?(n=r.setHour(n,r.getHour(j.defaultValue)),n=r.setMinute(n,r.getMinute(j.defaultValue)),n=r.setSecond(n,r.getSecond(j.defaultValue))):"time"===t&&!o&&a&&(n=r.setYear(n,r.getYear(a)),n=r.setMonth(n,r.getMonth(a)),n=r.setDate(n,r.getDate(a))),m&&m(n,"mouse")},C=i?i(o||null):{};return f.createElement("div",{className:p()(h,Object(u.a)({},"".concat(h,"-active"),_))},f.createElement(ve,Object(c.default)({},e,{operationRef:E,active:"date"===_,onSelect:function(e){S(O(r,e,d&&"object"===Object(y.a)(d)?d.defaultValue:null),"date")}})),f.createElement(de,Object(c.default)({},e,{format:void 0},j,C,{defaultValue:void 0,operationRef:x,active:"time"===_,onSelect:function(e){S(e,"time")}})))};var _e=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.value,a="".concat(t,"-cell"),i="".concat(t,"-week-panel-row");return f.createElement(ve,Object(c.default)({},e,{panelName:"week",prefixColumn:function(e){return f.createElement("td",{key:"week",className:p()(a,"".concat(a,"-week"))},n.locale.getWeek(r.locale,e))},rowClassName:function(e){return p()(i,Object(u.a)({},"".concat(i,"-selected"),K(n,r.locale,o,e)))},keyboardConfig:{onLeftRight:null}}))};var we=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,a=e.onNextYear,i=e.onPrevYear,u=e.onYearClick;if(f.useContext(b).hideHeader)return null;var l="".concat(t,"-header");return f.createElement(_,Object(c.default)({},e,{prefixCls:l,onSuperPrev:i,onSuperNext:a}),f.createElement("button",{type:"button",onClick:u,className:"".concat(t,"-year-btn")},J(o,{locale:r,format:r.yearFormat,generateConfig:n})))};var Ee=function(e){var t=e.prefixCls,n=e.locale,r=e.value,o=e.viewDate,a=e.generateConfig,i=e.monthCellRender,u=f.useContext(pe),l=u.rangedValue,s=u.hoverRangedValue,d=me({cellPrefixCls:"".concat(t,"-cell"),value:r,generateConfig:a,rangedValue:l,hoverRangedValue:s,isSameCell:function(e,t){return H(a,e,t)},isInView:function(){return!0},offsetCell:function(e,t){return a.addMonth(e,t)}}),p=n.shortMonths||(a.locale.getShortMonths?a.locale.getShortMonths(n.locale):[]),m=a.setMonth(o,0),h=i?function(e){return i(e,n)}:void 0;return f.createElement(j,Object(c.default)({},e,{rowNum:4,colNum:3,baseDate:m,getCellNode:h,getCellText:function(e){return n.monthFormat?J(e,{locale:n,format:n.monthFormat,generateConfig:a}):p[a.getMonth(e)]},getCellClassName:d,getCellDate:a.addMonth,titleCell:function(e){return J(e,{locale:n,format:"YYYY-MM",generateConfig:a})}}))};var Oe=function(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,a=e.value,i=e.viewDate,u=e.onPanelChange,l=e.onSelect,s="".concat(t,"-month-panel");n.current={onKeyDown:function(e){return A(e,{onLeftRight:function(e){l(o.addMonth(a||i,e),"key")},onCtrlLeftRight:function(e){l(o.addYear(a||i,e),"key")},onUpDown:function(e){l(o.addMonth(a||i,3*e),"key")},onEnter:function(){u("date",a||i)}})}};var d=function(e){var t=o.addYear(i,e);r(t),u(null,t)};return f.createElement("div",{className:s},f.createElement(we,Object(c.default)({},e,{prefixCls:t,onPrevYear:function(){d(-1)},onNextYear:function(){d(1)},onYearClick:function(){u("year",i)}})),f.createElement(Ee,Object(c.default)({},e,{prefixCls:t,onSelect:function(e){l(e,"mouse"),u("date",e)}})))};var xe=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,a=e.onNextYear,i=e.onPrevYear,u=e.onYearClick;if(f.useContext(b).hideHeader)return null;var l="".concat(t,"-header");return f.createElement(_,Object(c.default)({},e,{prefixCls:l,onSuperPrev:i,onSuperNext:a}),f.createElement("button",{type:"button",onClick:u,className:"".concat(t,"-year-btn")},J(o,{locale:r,format:r.yearFormat,generateConfig:n})))};var je=function(e){var t=e.prefixCls,n=e.locale,r=e.value,o=e.viewDate,a=e.generateConfig,i=f.useContext(pe),u=i.rangedValue,l=i.hoverRangedValue,s=me({cellPrefixCls:"".concat(t,"-cell"),value:r,generateConfig:a,rangedValue:u,hoverRangedValue:l,isSameCell:function(e,t){return q(a,e,t)},isInView:function(){return!0},offsetCell:function(e,t){return a.addMonth(e,3*t)}}),d=a.setDate(a.setMonth(o,0),1);return f.createElement(j,Object(c.default)({},e,{rowNum:1,colNum:4,baseDate:d,getCellText:function(e){return J(e,{locale:n,format:n.quarterFormat||"[Q]Q",generateConfig:a})},getCellClassName:s,getCellDate:function(e,t){return a.addMonth(e,3*t)},titleCell:function(e){return J(e,{locale:n,format:"YYYY-[Q]Q",generateConfig:a})}}))};var ke=function(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,a=e.value,i=e.viewDate,u=e.onPanelChange,l=e.onSelect,s="".concat(t,"-quarter-panel");n.current={onKeyDown:function(e){return A(e,{onLeftRight:function(e){l(o.addMonth(a||i,3*e),"key")},onCtrlLeftRight:function(e){l(o.addYear(a||i,e),"key")},onUpDown:function(e){l(o.addYear(a||i,e),"key")}})}};var d=function(e){var t=o.addYear(i,e);r(t),u(null,t)};return f.createElement("div",{className:s},f.createElement(xe,Object(c.default)({},e,{prefixCls:t,onPrevYear:function(){d(-1)},onNextYear:function(){d(1)},onYearClick:function(){u("year",i)}})),f.createElement(je,Object(c.default)({},e,{prefixCls:t,onSelect:function(e){l(e,"mouse")}})))};var Se=function(e){var t=e.prefixCls,n=e.generateConfig,r=e.viewDate,o=e.onPrevDecade,a=e.onNextDecade,i=e.onDecadeClick;if(f.useContext(b).hideHeader)return null;var u="".concat(t,"-header"),l=n.getYear(r),s=Math.floor(l/Ne)*Ne,d=s+Ne-1;return f.createElement(_,Object(c.default)({},e,{prefixCls:u,onSuperPrev:o,onSuperNext:a}),f.createElement("button",{type:"button",onClick:i,className:"".concat(t,"-decade-btn")},s,"-",d))};var Ce=function(e){var t=e.prefixCls,n=e.value,r=e.viewDate,o=e.locale,a=e.generateConfig,i=f.useContext(pe),u=i.rangedValue,l=i.hoverRangedValue,s="".concat(t,"-cell"),d=a.getYear(r),p=Math.floor(d/Ne)*Ne,m=p+Ne-1,h=a.setYear(r,p-Math.ceil((12-Ne)/2)),y=me({cellPrefixCls:s,value:n,generateConfig:a,rangedValue:u,hoverRangedValue:l,isSameCell:function(e,t){return V(a,e,t)},isInView:function(e){var t=a.getYear(e);return p<=t&&t<=m},offsetCell:function(e,t){return a.addYear(e,t)}});return f.createElement(j,Object(c.default)({},e,{rowNum:4,colNum:3,baseDate:h,getCellText:a.getYear,getCellClassName:y,getCellDate:a.addYear,titleCell:function(e){return J(e,{locale:o,format:"YYYY",generateConfig:a})}}))},Ne=10;var Pe=function(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,a=e.value,i=e.viewDate,u=e.sourceMode,l=e.onSelect,s=e.onPanelChange,d="".concat(t,"-year-panel");n.current={onKeyDown:function(e){return A(e,{onLeftRight:function(e){l(o.addYear(a||i,e),"key")},onCtrlLeftRight:function(e){l(o.addYear(a||i,e*Ne),"key")},onUpDown:function(e){l(o.addYear(a||i,3*e),"key")},onEnter:function(){s("date"===u?"date":"month",a||i)}})}};var p=function(e){var t=o.addYear(i,10*e);r(t),s(null,t)};return f.createElement("div",{className:d},f.createElement(Se,Object(c.default)({},e,{prefixCls:t,onPrevDecade:function(){p(-1)},onNextDecade:function(){p(1)},onDecadeClick:function(){s("decade",i)}})),f.createElement(Ce,Object(c.default)({},e,{prefixCls:t,onSelect:function(e){s("date"===u?"date":"month",e),l(e,"mouse")}})))};function Te(e,t,n){return n?f.createElement("div",{className:"".concat(e,"-footer-extra")},n(t)):null}function Ae(e){var t,n,r=e.prefixCls,o=e.rangeList,a=void 0===o?[]:o,i=e.components,c=void 0===i?{}:i,u=e.needConfirmButton,l=e.onNow,s=e.onOk,d=e.okDisabled,p=e.showNow,m=e.locale;if(a.length){var h=c.rangeItem||"span";t=f.createElement(f.Fragment,null,a.map((function(e){var t=e.label,n=e.onClick,o=e.onMouseEnter,a=e.onMouseLeave;return f.createElement("li",{key:t,className:"".concat(r,"-preset")},f.createElement(h,{onClick:n,onMouseEnter:o,onMouseLeave:a},t))})))}if(u){var y=c.button||"button";l&&!t&&!1!==p&&(t=f.createElement("li",{className:"".concat(r,"-now")},f.createElement("a",{className:"".concat(r,"-now-btn"),onClick:l},m.now))),n=u&&f.createElement("li",{className:"".concat(r,"-ok")},f.createElement(y,{disabled:d,onClick:s},m.ok))}return t||n?f.createElement("ul",{className:"".concat(r,"-ranges")},t,n):null}var Le=function(e){var t,n=e.prefixCls,r=void 0===n?"rc-picker":n,o=e.className,a=e.style,i=e.locale,d=e.generateConfig,g=e.value,_=e.defaultValue,w=e.pickerValue,x=e.defaultPickerValue,j=e.disabledDate,k=e.mode,S=e.picker,C=void 0===S?"date":S,N=e.tabIndex,P=void 0===N?0:N,T=e.showNow,A=e.showTime,L=e.showToday,I=e.renderExtraFooter,R=e.hideHeader,D=e.onSelect,F=e.onChange,B=e.onPanelChange,U=e.onMouseDown,G=e.onPickerValueChange,V=e.onOk,Y=e.components,q=e.direction,H=e.hourStep,W=void 0===H?1:H,K=e.minuteStep,Q=void 0===K?1:K,X=e.secondStep,J=void 0===X?1:X,Z="date"===C&&!!A||"time"===C,ee=24%W==0,te=60%Q==0,ne=60%J==0,re=f.useContext(b),oe=re.operationRef,ae=re.panelRef,ie=re.onSelect,ce=re.hideRanges,ue=re.defaultOpenValue,le=f.useContext(pe),se=le.inRange,fe=le.panelPosition,me=le.rangedValue,he=le.hoverRangedValue,ye=f.useRef({}),be=f.useRef(!0),we=Object(h.a)(null,{value:g,defaultValue:_,postState:function(e){return!e&&ue&&"time"===C?ue:e}}),Ee=Object(s.a)(we,2),xe=Ee[0],je=Ee[1],Se=Object(h.a)(null,{value:w,defaultValue:x||xe,postState:function(e){var t=d.getNow();return e?!xe&&A?"object"===Object(y.a)(A)?O(d,Array.isArray(e)?e[0]:e,A.defaultValue||t):O(d,Array.isArray(e)?e[0]:e,_||t):e:t}}),Ce=Object(s.a)(Se,2),Ne=Ce[0],Le=Ce[1],Ie=function(e){Le(e),G&&G(e)},Re=function(e){var t=M[C];return t?t(e):e},De=Object(h.a)((function(){return"time"===C?"time":Re("date")}),{value:k}),Me=Object(s.a)(De,2),Fe=Me[0],Be=Me[1];f.useEffect((function(){Be(C)}),[C]);var Ue,ze=f.useState((function(){return Fe})),Ge=Object(s.a)(ze,2),Ve=Ge[0],Ye=Ge[1],qe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(Fe===C||n)&&(je(e),D&&D(e),ie&&ie(e,t),!F||$(d,e,xe)||(null==j?void 0:j(e))||F(e))},He=function(e){return ye.current&&ye.current.onKeyDown?([v.a.LEFT,v.a.RIGHT,v.a.UP,v.a.DOWN,v.a.PAGE_UP,v.a.PAGE_DOWN,v.a.ENTER].includes(e.which)&&e.preventDefault(),ye.current.onKeyDown(e)):(Object(m.a)(!1,"Panel not correct handle keyDown event. Please help to fire issue about this."),!1)};oe&&"right"!==fe&&(oe.current={onKeyDown:He,onClose:function(){ye.current&&ye.current.onClose&&ye.current.onClose()}}),f.useEffect((function(){g&&!be.current&&Le(g)}),[g]),f.useEffect((function(){be.current=!1}),[]);var We,Ke,$e,Qe=Object(l.a)(Object(l.a)({},e),{},{operationRef:ye,prefixCls:r,viewDate:Ne,value:xe,onViewDateChange:Ie,sourceMode:Ve,onPanelChange:function(e,t){var n=Re(e||Fe);Ye(Fe),Be(n),B&&(Fe!==n||$(d,Ne,Ne))&&B(t,n)},disabledDate:j});switch(delete Qe.onChange,delete Qe.onSelect,Fe){case"decade":Ue=f.createElement(z,Object(c.default)({},Qe,{onSelect:function(e,t){Ie(e),qe(e,t)}}));break;case"year":Ue=f.createElement(Pe,Object(c.default)({},Qe,{onSelect:function(e,t){Ie(e),qe(e,t)}}));break;case"month":Ue=f.createElement(Oe,Object(c.default)({},Qe,{onSelect:function(e,t){Ie(e),qe(e,t)}}));break;case"quarter":Ue=f.createElement(ke,Object(c.default)({},Qe,{onSelect:function(e,t){Ie(e),qe(e,t)}}));break;case"week":Ue=f.createElement(_e,Object(c.default)({},Qe,{onSelect:function(e,t){Ie(e),qe(e,t)}}));break;case"time":delete Qe.showTime,Ue=f.createElement(de,Object(c.default)({},Qe,"object"===Object(y.a)(A)?A:null,{onSelect:function(e,t){Ie(e),qe(e,t)}}));break;default:Ue=A?f.createElement(ge,Object(c.default)({},Qe,{onSelect:function(e,t){Ie(e),qe(e,t)}})):f.createElement(ve,Object(c.default)({},Qe,{onSelect:function(e,t){Ie(e),qe(e,t)}}))}if(ce||(We=Te(r,Fe,I),Ke=Ae({prefixCls:r,components:Y,needConfirmButton:Z,okDisabled:!xe||j&&j(xe),locale:i,showNow:T,onNow:Z&&function(){var e=d.getNow(),t=function(e,t,n,r,o,a){var i=Math.floor(e/r)*r;if(i<e)return[i,60-o,60-a];var c=Math.floor(t/o)*o;return c<t?[i,c,60-a]:[i,c,Math.floor(n/a)*a]}(d.getHour(e),d.getMinute(e),d.getSecond(e),ee?W:1,te?Q:1,ne?J:1),n=E(d,e,t[0],t[1],t[2]);qe(n,"submit")},onOk:function(){xe&&(qe(xe,"submit",!0),V&&V(xe))}})),L&&"date"===Fe&&"date"===C&&!A){var Xe=d.getNow(),Je="".concat(r,"-today-btn"),Ze=j&&j(Xe);$e=f.createElement("a",{className:p()(Je,Ze&&"".concat(Je,"-disabled")),"aria-disabled":Ze,onClick:function(){Ze||qe(Xe,"mouse",!0)}},i.today)}return f.createElement(b.Provider,{value:Object(l.a)(Object(l.a)({},re),{},{mode:Fe,hideHeader:"hideHeader"in e?R:re.hideHeader,hidePrevBtn:se&&"right"===fe,hideNextBtn:se&&"left"===fe})},f.createElement("div",{tabIndex:P,className:p()("".concat(r,"-panel"),o,(t={},Object(u.a)(t,"".concat(r,"-panel-has-range"),me&&me[0]&&me[1]),Object(u.a)(t,"".concat(r,"-panel-has-range-hover"),he&&he[0]&&he[1]),Object(u.a)(t,"".concat(r,"-panel-rtl"),"rtl"===q),t)),style:a,onKeyDown:He,onBlur:function(e){ye.current&&ye.current.onBlur&&ye.current.onBlur(e)},onMouseDown:U,ref:ae},Ue,We||Ke||$e?f.createElement("div",{className:"".concat(r,"-footer")},We,Ke,$e):null))},Ie=n(402),Re={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};var De=function(e){var t,n=e.prefixCls,r=e.popupElement,o=e.popupStyle,a=e.visible,i=e.dropdownClassName,c=e.dropdownAlign,l=e.transitionName,s=e.getPopupContainer,d=e.children,m=e.range,h=e.popupPlacement,y=e.direction,v="".concat(n,"-dropdown");return f.createElement(Ie.a,{showAction:[],hideAction:[],popupPlacement:void 0!==h?h:"rtl"===y?"bottomRight":"bottomLeft",builtinPlacements:Re,prefixCls:v,popupTransitionName:l,popup:r,popupAlign:c,popupVisible:a,popupClassName:p()(i,(t={},Object(u.a)(t,"".concat(v,"-range"),m),Object(u.a)(t,"".concat(v,"-rtl"),"rtl"===y),t)),popupStyle:o,getPopupContainer:s},d)};function Me(e){var t=e.open,n=e.value,r=e.isClickOutside,o=e.triggerOpen,a=e.forwardKeyDown,i=e.onKeyDown,c=e.blurToCancel,u=e.onSubmit,l=e.onCancel,d=e.onFocus,p=e.onBlur,m=Object(f.useState)(!1),h=Object(s.a)(m,2),y=h[0],b=h[1],g=Object(f.useState)(!1),_=Object(s.a)(g,2),w=_[0],E=_[1],O=Object(f.useRef)(!1),x=Object(f.useRef)(!1),j=Object(f.useRef)(!1),k={onMouseDown:function(){b(!0),o(!0)},onKeyDown:function(e){if(i(e,(function(){j.current=!0})),!j.current){switch(e.which){case v.a.ENTER:return t?!1!==u()&&b(!0):o(!0),void e.preventDefault();case v.a.TAB:return void(y&&t&&!e.shiftKey?(b(!1),e.preventDefault()):!y&&t&&!a(e)&&e.shiftKey&&(b(!0),e.preventDefault()));case v.a.ESC:return b(!0),void l()}t||[v.a.SHIFT].includes(e.which)?y||a(e):o(!0)}},onFocus:function(e){b(!0),E(!0),d&&d(e)},onBlur:function(e){!O.current&&r(document.activeElement)?(c?setTimeout((function(){for(var e=document.activeElement;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;r(e)&&l()}),0):t&&(o(!1),x.current&&u()),E(!1),p&&p(e)):O.current=!1}};return Object(f.useEffect)((function(){x.current=!1}),[t]),Object(f.useEffect)((function(){x.current=!0}),[n]),Object(f.useEffect)((function(){return e=function(e){var n=function(e){var t,n=e.target;return e.composed&&n.shadowRoot&&(null===(t=e.composedPath)||void 0===t?void 0:t.call(e)[0])||n}(e);if(t){var a=r(n);a?w&&!a||o(!1):(O.current=!0,requestAnimationFrame((function(){O.current=!1})))}},!R&&"undefined"!=typeof window&&window.addEventListener&&(R=function(e){Object(S.a)(D).forEach((function(t){t(e)}))},window.addEventListener("mousedown",R)),D.add(e),function(){D.delete(e),0===D.size&&(window.removeEventListener("mousedown",R),R=null)};var e})),[k,{focused:w,typing:y}]}function Fe(e){var t=e.valueTexts,n=e.onTextChange,r=f.useState(""),o=Object(s.a)(r,2),a=o[0],i=o[1],c=f.useRef([]);function u(){i(c.current[0])}return c.current=t,f.useEffect((function(){t.every((function(e){return e!==a}))&&u()}),[t.join("||")]),[a,function(e){i(e),n(e)},u]}var Be=n(297),Ue=n.n(Be);function ze(e,t){var n=t.formatList,r=t.generateConfig,o=t.locale;return Object(ne.a)((function(){if(!e)return[[""],""];for(var t="",a=[],i=0;i<n.length;i+=1){var c=n[i],u=J(e,{generateConfig:r,locale:o,format:c});a.push(u),0===i&&(t=u)}return[a,t]}),[e,n],(function(e,t){return e[0]!==t[0]||!Ue()(e[1],t[1])}))}function Ge(e,t){var n=t.formatList,r=t.generateConfig,o=t.locale,a=Object(f.useState)(null),i=Object(s.a)(a,2),c=i[0],u=i[1],l=Object(f.useRef)(null);function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cancelAnimationFrame(l.current),t?u(e):l.current=requestAnimationFrame((function(){u(e)}))}var p=ze(c,{formatList:n,generateConfig:r,locale:o}),m=Object(s.a)(p,2)[1];function h(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d(null,e)}return Object(f.useEffect)((function(){h(!0)}),[e]),Object(f.useEffect)((function(){return function(){return cancelAnimationFrame(l.current)}}),[]),[m,function(e){d(e)},h]}function Ve(e){var t,n=e.prefixCls,r=void 0===n?"rc-picker":n,o=e.id,a=e.tabIndex,i=e.style,d=e.className,y=e.dropdownClassName,v=e.dropdownAlign,g=e.popupStyle,_=e.transitionName,w=e.generateConfig,E=e.locale,O=e.inputReadOnly,x=e.allowClear,j=e.autoFocus,k=e.showTime,S=e.picker,C=void 0===S?"date":S,N=e.format,P=e.use12Hours,T=e.value,A=e.defaultValue,R=e.open,D=e.defaultOpen,M=e.defaultOpenValue,B=e.suffixIcon,U=e.clearIcon,z=e.disabled,G=e.disabledDate,V=e.placeholder,Y=e.getPopupContainer,q=e.pickerRef,H=e.panelRender,W=e.onChange,K=e.onOpenChange,Q=e.onFocus,X=e.onBlur,ee=e.onMouseDown,te=e.onMouseUp,ne=e.onMouseEnter,re=e.onMouseLeave,oe=e.onContextMenu,ce=e.onClick,ue=e.onKeyDown,le=e.onSelect,se=e.direction,fe=e.autoComplete,de=void 0===fe?"off":fe,pe=f.useRef(null),me="date"===C&&!!k||"time"===C,he=ae(L(N,C,k,P)),ye=f.useRef(null),ve=f.useRef(null),be=f.useRef(null),ge=Object(h.a)(null,{value:T,defaultValue:A}),_e=Object(s.a)(ge,2),we=_e[0],Ee=_e[1],Oe=f.useState(we),xe=Object(s.a)(Oe,2),je=xe[0],ke=xe[1],Se=f.useRef(null),Ce=Object(h.a)(!1,{value:R,defaultValue:D,postState:function(e){return!z&&e},onChange:function(e){K&&K(e),!e&&Se.current&&Se.current.onClose&&Se.current.onClose()}}),Ne=Object(s.a)(Ce,2),Pe=Ne[0],Te=Ne[1],Ae=ze(je,{formatList:he,generateConfig:w,locale:E}),Ie=Object(s.a)(Ae,2),Re=Ie[0],Be=Ie[1],Ue=Fe({valueTexts:Re,onTextChange:function(e){var t=Z(e,{locale:E,formatList:he,generateConfig:w});!t||G&&G(t)||ke(t)}}),Ve=Object(s.a)(Ue,3),Ye=Ve[0],qe=Ve[1],He=Ve[2],We=function(e){ke(e),Ee(e),W&&!$(w,we,e)&&W(e,e?J(e,{generateConfig:w,locale:E,format:he[0]}):"")},Ke=function(e){z&&e||Te(e)},$e=Me({blurToCancel:me,open:Pe,value:Ye,triggerOpen:Ke,forwardKeyDown:function(e){return Pe&&Se.current&&Se.current.onKeyDown?Se.current.onKeyDown(e):(Object(m.a)(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},isClickOutside:function(e){return!F([ye.current,ve.current,be.current],e)},onSubmit:function(){return!(!je||G&&G(je))&&(We(je),Ke(!1),He(),!0)},onCancel:function(){Ke(!1),ke(we),He()},onKeyDown:function(e,t){null==ue||ue(e,t)},onFocus:Q,onBlur:X}),Qe=Object(s.a)($e,2),Xe=Qe[0],Je=Qe[1],Ze=Je.focused,et=Je.typing;f.useEffect((function(){Pe||(ke(we),Re.length&&""!==Re[0]?Be!==Ye&&He():qe(""))}),[Pe,Re]),f.useEffect((function(){Pe||He()}),[C]),f.useEffect((function(){ke(we)}),[we]),q&&(q.current={focus:function(){pe.current&&pe.current.focus()},blur:function(){pe.current&&pe.current.blur()}});var tt=Ge(Ye,{formatList:he,generateConfig:w,locale:E}),nt=Object(s.a)(tt,3),rt=nt[0],ot=nt[1],at=nt[2],it=Object(l.a)(Object(l.a)({},e),{},{className:void 0,style:void 0,pickerValue:void 0,onPickerValueChange:void 0,onChange:null}),ct=f.createElement(Le,Object(c.default)({},it,{generateConfig:w,className:p()(Object(u.a)({},"".concat(r,"-panel-focused"),!et)),value:je,locale:E,tabIndex:-1,onSelect:function(e){null==le||le(e),ke(e)},direction:se,onPanelChange:function(t,n){var r=e.onPanelChange;at(!0),null==r||r(t,n)}}));H&&(ct=H(ct));var ut,lt,st=f.createElement("div",{className:"".concat(r,"-panel-container"),onMouseDown:function(e){e.preventDefault()}},ct);B&&(ut=f.createElement("span",{className:"".concat(r,"-suffix")},B)),x&&we&&!z&&(lt=f.createElement("span",{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){e.preventDefault(),e.stopPropagation(),We(null),Ke(!1)},className:"".concat(r,"-clear"),role:"button"},U||f.createElement("span",{className:"".concat(r,"-clear-btn")})));var ft="rtl"===se?"bottomRight":"bottomLeft";return f.createElement(b.Provider,{value:{operationRef:Se,hideHeader:"time"===C,panelRef:ye,onSelect:function(e,t){("submit"===t||"key"!==t&&!me)&&(We(e),Ke(!1))},open:Pe,defaultOpenValue:M,onDateMouseEnter:ot,onDateMouseLeave:at}},f.createElement(De,{visible:Pe,popupElement:st,popupStyle:g,prefixCls:r,dropdownClassName:y,dropdownAlign:v,getPopupContainer:Y,transitionName:_,popupPlacement:ft,direction:se},f.createElement("div",{ref:be,className:p()(r,d,(t={},Object(u.a)(t,"".concat(r,"-disabled"),z),Object(u.a)(t,"".concat(r,"-focused"),Ze),Object(u.a)(t,"".concat(r,"-rtl"),"rtl"===se),t)),style:i,onMouseDown:ee,onMouseUp:function(){te&&te.apply(void 0,arguments),pe.current&&(pe.current.focus(),Ke(!0))},onMouseEnter:ne,onMouseLeave:re,onContextMenu:oe,onClick:ce},f.createElement("div",{className:p()("".concat(r,"-input"),Object(u.a)({},"".concat(r,"-input-placeholder"),!!rt)),ref:ve},f.createElement("input",Object(c.default)({id:o,tabIndex:a,disabled:z,readOnly:O||"function"==typeof he[0]||!et,value:rt||Ye,onChange:function(e){qe(e.target.value)},autoFocus:j,placeholder:V,ref:pe,title:Ye},Xe,{size:I(C,he[0],w)},ie(e),{autoComplete:de})),ut,lt))))}var Ye=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).pickerRef=f.createRef(),e.focus=function(){e.pickerRef.current&&e.pickerRef.current.focus()},e.blur=function(){e.pickerRef.current&&e.pickerRef.current.blur()},e}return Object(o.a)(n,[{key:"render",value:function(){return f.createElement(Ve,Object(c.default)({},this.props,{pickerRef:this.pickerRef}))}}]),n}(f.Component),qe=Ye;function He(e,t,n,r){var o=X(e,n,r,1);function a(n){return n(e,t)?"same":n(o,t)?"closing":"far"}switch(n){case"year":return a((function(e,t){return function(e,t,n){var r=G(t,n);return"boolean"==typeof r?r:Math.floor(e.getYear(t)/10)===Math.floor(e.getYear(n)/10)}(r,e,t)}));case"quarter":case"month":return a((function(e,t){return V(r,e,t)}));default:return a((function(e,t){return H(r,e,t)}))}}function We(e){var t=e.values,n=e.picker,r=e.defaultDates,o=e.generateConfig,a=f.useState((function(){return[ce(r,0),ce(r,1)]})),i=Object(s.a)(a,2),c=i[0],u=i[1],l=f.useState(null),d=Object(s.a)(l,2),p=d[0],m=d[1],h=ce(t,0),y=ce(t,1);return[function(e){return c[e]?c[e]:ce(p,e)||function(e,t,n,r){var o=ce(e,0),a=ce(e,1);if(0===t)return o;if(o&&a)switch(He(o,a,n,r)){case"same":case"closing":return o;default:return X(a,n,r,-1)}return o}(t,e,n,o)||h||y||o.getNow()},function(e,n){if(e){var r=ue(p,e,n);u(ue(c,null,n)||[null,null]);var o=(n+1)%2;ce(t,o)||(r=ue(r,e,o)),m(r)}else(h||y)&&m(null)}]}function Ke(e,t){return e&&e[0]&&e[1]&&t.isAfter(e[0],e[1])?[e[1],e[0]]:e}function $e(e,t,n,r){return!!e||(!(!r||!r[t])||!!n[(t+1)%2])}function Qe(e){var t,n,r,o=e.prefixCls,a=void 0===o?"rc-picker":o,i=e.id,d=e.style,v=e.className,g=e.popupStyle,_=e.dropdownClassName,w=e.transitionName,E=e.dropdownAlign,O=e.getPopupContainer,x=e.generateConfig,j=e.locale,k=e.placeholder,S=e.autoFocus,C=e.disabled,N=e.format,P=e.picker,T=void 0===P?"date":P,A=e.showTime,R=e.use12Hours,D=e.separator,M=void 0===D?"~":D,B=e.value,U=e.defaultValue,z=e.defaultPickerValue,G=e.open,V=e.defaultOpen,H=e.disabledDate,Q=e.disabledTime,ee=e.dateRender,te=e.panelRender,ne=e.ranges,re=e.allowEmpty,oe=e.allowClear,le=e.suffixIcon,se=e.clearIcon,fe=e.pickerRef,de=e.inputReadOnly,me=e.mode,he=e.renderExtraFooter,ye=e.onChange,ve=e.onOpenChange,be=e.onPanelChange,ge=e.onCalendarChange,_e=e.onFocus,we=e.onBlur,Ee=e.onMouseEnter,Oe=e.onMouseLeave,xe=e.onOk,je=e.onKeyDown,ke=e.components,Se=e.order,Ce=e.direction,Ne=e.activePickerIndex,Pe=e.autoComplete,Ie=void 0===Pe?"off":Pe,Re="date"===T&&!!A||"time"===T,Be=Object(f.useRef)({}),Ue=Object(f.useRef)(null),Ve=Object(f.useRef)(null),Ye=Object(f.useRef)(null),qe=Object(f.useRef)(null),He=Object(f.useRef)(null),Qe=Object(f.useRef)(null),Xe=Object(f.useRef)(null),Je=ae(L(N,T,A,R)),Ze=Object(h.a)(0,{value:Ne}),et=Object(s.a)(Ze,2),tt=et[0],nt=et[1],rt=Object(f.useRef)(null),ot=f.useMemo((function(){return Array.isArray(C)?C:[C||!1,C||!1]}),[C]),at=Object(h.a)(null,{value:B,defaultValue:U,postState:function(e){return"time"!==T||Se?Ke(e,x):e}}),it=Object(s.a)(at,2),ct=it[0],ut=it[1],lt=We({values:ct,picker:T,defaultDates:z,generateConfig:x}),st=Object(s.a)(lt,2),ft=st[0],dt=st[1],pt=Object(h.a)(ct,{postState:function(e){var t=e;if(ot[0]&&ot[1])return t;for(var n=0;n<2;n+=1)!ot[n]||ce(t,n)||ce(re,n)||(t=ue(t,x.getNow(),n));return t}}),mt=Object(s.a)(pt,2),ht=mt[0],yt=mt[1],vt=Object(h.a)([T,T],{value:me}),bt=Object(s.a)(vt,2),gt=bt[0],_t=bt[1];Object(f.useEffect)((function(){_t([T,T])}),[T]);var wt=function(e,t){_t(e),be&&be(t,e)},Et=function(e,t,n){var r=e.picker,o=e.locale,a=e.selectedValue,i=e.disabledDate,c=e.disabled,u=e.generateConfig,l=ce(a,0),s=ce(a,1);function d(e){return u.locale.getWeekFirstDate(o.locale,e)}function p(e){return 100*u.getYear(e)+u.getMonth(e)}function m(e){return 10*u.getYear(e)+Y(u,e)}return[f.useCallback((function(e){if(i&&i(e))return!0;if(c[1]&&s)return!W(u,e,s)&&u.isAfter(e,s);if(t&&s)switch(r){case"quarter":return m(e)>m(s);case"month":return p(e)>p(s);case"week":return d(e)>d(s);default:return!W(u,e,s)&&u.isAfter(e,s)}return!1}),[i,c[1],s,t]),f.useCallback((function(e){if(i&&i(e))return!0;if(c[0]&&l)return!W(u,e,s)&&u.isAfter(l,e);if(n&&l)switch(r){case"quarter":return m(e)<m(l);case"month":return p(e)<p(l);case"week":return d(e)<d(l);default:return!W(u,e,l)&&u.isAfter(l,e)}return!1}),[i,c[0],l,n])]}({picker:T,selectedValue:ht,locale:j,disabled:ot,disabledDate:H,generateConfig:x},Be.current[1],Be.current[0]),Ot=Object(s.a)(Et,2),xt=Ot[0],jt=Ot[1],kt=Object(h.a)(!1,{value:G,defaultValue:V,postState:function(e){return!ot[tt]&&e},onChange:function(e){ve&&ve(e),!e&&rt.current&&rt.current.onClose&&rt.current.onClose()}}),St=Object(s.a)(kt,2),Ct=St[0],Nt=St[1],Pt=Ct&&0===tt,Tt=Ct&&1===tt,At=Object(f.useState)(0),Lt=Object(s.a)(At,2),It=Lt[0],Rt=Lt[1];Object(f.useEffect)((function(){!Ct&&Ue.current&&Rt(Ue.current.offsetWidth)}),[Ct]);var Dt=f.useRef();function Mt(e,t){if(e)clearTimeout(Dt.current),Be.current[t]=!0,nt(t),Nt(e),Ct||dt(null,t);else if(tt===t){Nt(e);var n=Be.current;Dt.current=setTimeout((function(){n===Be.current&&(Be.current={})}))}}function Ft(e){Mt(!0,e),setTimeout((function(){var t=[Qe,Xe][e];t.current&&t.current.focus()}),0)}function Bt(e,t){var n=e,r=ce(n,0),o=ce(n,1);r&&o&&x.isAfter(r,o)&&("week"===T&&!K(x,j.locale,r,o)||"quarter"===T&&!q(x,r,o)||"week"!==T&&"quarter"!==T&&"time"!==T&&!W(x,r,o)?(0===t?(n=[r,null],o=null):(r=null,n=[null,o]),Be.current=Object(u.a)({},t,!0)):"time"===T&&!1===Se||(n=Ke(n,x))),yt(n);var a=n&&n[0]?J(n[0],{generateConfig:x,locale:j,format:Je[0]}):"",i=n&&n[1]?J(n[1],{generateConfig:x,locale:j,format:Je[0]}):"";ge&&ge(n,[a,i],{range:0===t?"start":"end"});var c=$e(r,0,ot,re),l=$e(o,1,ot,re);(null===n||c&&l)&&(ut(n),!ye||$(x,ce(ct,0),r)&&$(x,ce(ct,1),o)||ye(n,[a,i]));var s=null;0!==t||ot[1]?1!==t||ot[0]||(s=0):s=1,null===s||s===tt||Be.current[s]&&ce(n,s)||!ce(n,t)?Mt(!1,t):Ft(s)}var Ut=function(e){return Ct&&rt.current&&rt.current.onKeyDown?rt.current.onKeyDown(e):(Object(m.a)(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},zt={formatList:Je,generateConfig:x,locale:j},Gt=ze(ce(ht,0),zt),Vt=Object(s.a)(Gt,2),Yt=Vt[0],qt=Vt[1],Ht=ze(ce(ht,1),zt),Wt=Object(s.a)(Ht,2),Kt=Wt[0],$t=Wt[1],Qt=function(e,t){var n=Z(e,{locale:j,formatList:Je,generateConfig:x});n&&!(0===t?xt:jt)(n)&&(yt(ue(ht,n,t)),dt(n,t))},Xt=Fe({valueTexts:Yt,onTextChange:function(e){return Qt(e,0)}}),Jt=Object(s.a)(Xt,3),Zt=Jt[0],en=Jt[1],tn=Jt[2],nn=Fe({valueTexts:Kt,onTextChange:function(e){return Qt(e,1)}}),rn=Object(s.a)(nn,3),on=rn[0],an=rn[1],cn=rn[2],un=Object(f.useState)(null),ln=Object(s.a)(un,2),sn=ln[0],fn=ln[1],dn=Object(f.useState)(null),pn=Object(s.a)(dn,2),mn=pn[0],hn=pn[1],yn=Ge(Zt,{formatList:Je,generateConfig:x,locale:j}),vn=Object(s.a)(yn,3),bn=vn[0],gn=vn[1],_n=vn[2],wn=Ge(on,{formatList:Je,generateConfig:x,locale:j}),En=Object(s.a)(wn,3),On=En[0],xn=En[1],jn=En[2],kn=function(e,t){return{blurToCancel:Re,forwardKeyDown:Ut,onBlur:we,isClickOutside:function(e){return!F([Ve.current,Ye.current,qe.current,Ue.current],e)},onFocus:function(t){nt(e),_e&&_e(t)},triggerOpen:function(t){Mt(t,e)},onSubmit:function(){Bt(ht,e),t()},onCancel:function(){Mt(!1,e),yt(ct),t()}}},Sn=Me(Object(l.a)(Object(l.a)({},kn(0,tn)),{},{open:Pt,value:Zt,onKeyDown:function(e,t){null==je||je(e,t)}})),Cn=Object(s.a)(Sn,2),Nn=Cn[0],Pn=Cn[1],Tn=Pn.focused,An=Pn.typing,Ln=Me(Object(l.a)(Object(l.a)({},kn(1,cn)),{},{open:Tt,value:on,onKeyDown:function(e,t){null==je||je(e,t)}})),In=Object(s.a)(Ln,2),Rn=In[0],Dn=In[1],Mn=Dn.focused,Fn=Dn.typing,Bn=ct&&ct[0]?J(ct[0],{locale:j,format:"YYYYMMDDHHmmss",generateConfig:x}):"",Un=ct&&ct[1]?J(ct[1],{locale:j,format:"YYYYMMDDHHmmss",generateConfig:x}):"";Object(f.useEffect)((function(){Ct||(yt(ct),Yt.length&&""!==Yt[0]?qt!==Zt&&tn():en(""),Kt.length&&""!==Kt[0]?$t!==on&&cn():an(""))}),[Ct,Yt,Kt]),Object(f.useEffect)((function(){yt(ct)}),[Bn,Un]),fe&&(fe.current={focus:function(){Qe.current&&Qe.current.focus()},blur:function(){Qe.current&&Qe.current.blur(),Xe.current&&Xe.current.blur()}});var zn=Object.keys(ne||{}).map((function(e){var t=ne[e],n="function"==typeof t?t():t;return{label:e,onClick:function(){Bt(n,null),Mt(!1,tt)},onMouseEnter:function(){fn(n)},onMouseLeave:function(){fn(null)}}}));function Gn(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;Ct&&mn&&mn[0]&&mn[1]&&x.isAfter(mn[1],mn[0])&&(r=mn);var o=A;if(A&&"object"===Object(y.a)(A)&&A.defaultValue){var i=A.defaultValue;o=Object(l.a)(Object(l.a)({},A),{},{defaultValue:ce(i,tt)||void 0})}var s=null;return ee&&(s=function(e,t){return ee(e,t,{range:tt?"end":"start"})}),f.createElement(pe.Provider,{value:{inRange:!0,panelPosition:t,rangedValue:sn||ht,hoverRangedValue:r}},f.createElement(Le,Object(c.default)({},e,n,{dateRender:s,showTime:o,mode:gt[tt],generateConfig:x,style:void 0,direction:Ce,disabledDate:0===tt?xt:jt,disabledTime:function(e){return!!Q&&Q(e,0===tt?"start":"end")},className:p()(Object(u.a)({},"".concat(a,"-panel-focused"),0===tt?!An:!Fn)),value:ce(ht,tt),locale:j,tabIndex:-1,onPanelChange:function(e,n){0===tt&&_n(!0),1===tt&&jn(!0),wt(ue(gt,n,tt),ue(ht,e,tt));var r=e;"right"===t&&gt[tt]===n&&(r=X(r,n,x,-1)),dt(r,tt)},onOk:null,onSelect:void 0,onChange:void 0,defaultValue:ce(ht,0===tt?1:0)})))}var Vn=0,Yn=0;tt&&Ye.current&&He.current&&Ve.current&&(Vn=Ye.current.offsetWidth+He.current.offsetWidth,Ve.current.offsetWidth&&Vn>Ve.current.offsetWidth&&(Yn=Vn));var qn="rtl"===Ce?{right:Vn}:{left:Vn};var Hn,Wn,Kn=f.createElement("div",{className:p()("".concat(a,"-range-wrapper"),"".concat(a,"-").concat(T,"-range-wrapper")),style:{minWidth:It}},f.createElement("div",{className:"".concat(a,"-range-arrow"),style:qn}),function(){var e,t=Te(a,gt[tt],he),n=Ae({prefixCls:a,components:ke,needConfirmButton:Re,okDisabled:!ce(ht,tt)||H&&H(ht[tt]),locale:j,rangeList:zn,onOk:function(){ce(ht,tt)&&(Bt(ht,tt),xe&&xe(ht))}});if("time"===T||A)e=Gn();else{var r=ft(tt),o=X(r,T,x),i=gt[tt]===T,c=Gn(!!i&&"left",{pickerValue:r,onPickerValueChange:function(e){dt(e,tt)}}),u=Gn("right",{pickerValue:o,onPickerValueChange:function(e){dt(X(e,T,x,-1),tt)}});e="rtl"===Ce?f.createElement(f.Fragment,null,u,i&&c):f.createElement(f.Fragment,null,c,i&&u)}var l=f.createElement(f.Fragment,null,f.createElement("div",{className:"".concat(a,"-panels")},e),(t||n)&&f.createElement("div",{className:"".concat(a,"-footer")},t,n));return te&&(l=te(l)),f.createElement("div",{className:"".concat(a,"-panel-container"),style:{marginLeft:Yn},ref:Ve,onMouseDown:function(e){e.preventDefault()}},l)}());le&&(Hn=f.createElement("span",{className:"".concat(a,"-suffix")},le)),oe&&(ce(ct,0)&&!ot[0]||ce(ct,1)&&!ot[1])&&(Wn=f.createElement("span",{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){e.preventDefault(),e.stopPropagation();var t=ct;ot[0]||(t=ue(t,null,0)),ot[1]||(t=ue(t,null,1)),Bt(t,null),Mt(!1,tt)},className:"".concat(a,"-clear")},se||f.createElement("span",{className:"".concat(a,"-clear-btn")})));var $n={size:I(T,Je[0],x)},Qn=0,Xn=0;Ye.current&&qe.current&&He.current&&(0===tt?Xn=Ye.current.offsetWidth:(Qn=Vn,Xn=qe.current.offsetWidth));var Jn="rtl"===Ce?{right:Qn}:{left:Qn};return f.createElement(b.Provider,{value:{operationRef:rt,hideHeader:"time"===T,onDateMouseEnter:function(e){hn(ue(ht,e,tt)),0===tt?gn(e):xn(e)},onDateMouseLeave:function(){hn(ue(ht,null,tt)),0===tt?_n():jn()},hideRanges:!0,onSelect:function(e,t){var n=ue(ht,e,tt);"submit"===t||"key"!==t&&!Re?(Bt(n,tt),0===tt?_n():jn()):yt(n)},open:Ct}},f.createElement(De,{visible:Ct,popupElement:Kn,popupStyle:g,prefixCls:a,dropdownClassName:_,dropdownAlign:E,getPopupContainer:O,transitionName:w,range:!0,direction:Ce},f.createElement("div",Object(c.default)({ref:Ue,className:p()(a,"".concat(a,"-range"),v,(t={},Object(u.a)(t,"".concat(a,"-disabled"),ot[0]&&ot[1]),Object(u.a)(t,"".concat(a,"-focused"),0===tt?Tn:Mn),Object(u.a)(t,"".concat(a,"-rtl"),"rtl"===Ce),t)),style:d,onClick:function(e){Ct||Qe.current.contains(e.target)||Xe.current.contains(e.target)||(ot[0]?ot[1]||Ft(1):Ft(0))},onMouseEnter:Ee,onMouseLeave:Oe,onMouseDown:function(e){!Ct||!Tn&&!Mn||Qe.current.contains(e.target)||Xe.current.contains(e.target)||e.preventDefault()}},ie(e)),f.createElement("div",{className:p()("".concat(a,"-input"),(n={},Object(u.a)(n,"".concat(a,"-input-active"),0===tt),Object(u.a)(n,"".concat(a,"-input-placeholder"),!!bn),n)),ref:Ye},f.createElement("input",Object(c.default)({id:i,disabled:ot[0],readOnly:de||"function"==typeof Je[0]||!An,value:bn||Zt,onChange:function(e){en(e.target.value)},autoFocus:S,placeholder:ce(k,0)||"",ref:Qe},Nn,$n,{autoComplete:Ie}))),f.createElement("div",{className:"".concat(a,"-range-separator"),ref:He},M),f.createElement("div",{className:p()("".concat(a,"-input"),(r={},Object(u.a)(r,"".concat(a,"-input-active"),1===tt),Object(u.a)(r,"".concat(a,"-input-placeholder"),!!On),r)),ref:qe},f.createElement("input",Object(c.default)({disabled:ot[1],readOnly:de||"function"==typeof Je[0]||!Fn,value:On||on,onChange:function(e){an(e.target.value)},placeholder:ce(k,1)||"",ref:Xe},Rn,$n,{autoComplete:Ie}))),f.createElement("div",{className:"".concat(a,"-active-bar"),style:Object(l.a)(Object(l.a)({},Jn),{},{width:Xn,position:"absolute"})}),Hn,Wn)))}var Xe=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).pickerRef=f.createRef(),e.focus=function(){e.pickerRef.current&&e.pickerRef.current.focus()},e.blur=function(){e.pickerRef.current&&e.pickerRef.current.blur()},e}return Object(o.a)(n,[{key:"render",value:function(){return f.createElement(Qe,Object(c.default)({},this.props,{pickerRef:this.pickerRef}))}}]),n}(f.Component),Je=Xe;t.b=qe},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(34),o={datasheetRecord:r.a.datasheetRecord,docs:{exports:r.a.docs.exports,findOne:r.a.docs.findOne,addToCatalog:r.a.docs.addToCatalog,cloneSheetData:r.a.docs.cloneSheetData},books:{exports:r.a.books.exports},import:{getImportResult:r.a.import.getImportResult},templates:{v2:r.a.templates.v2},editor:r.a.editor}},,,,,,,,,,,,,function(e,t,n){"use strict";n(245);var r=n(64),o=(n(133),n(31)),a=(n(1053),n(1069)),i=(n(175),n(84)),c=(n(351),n(200)),u=(n(96),n(23)),l=n(0),s=n.n(l),f=n(2),d=n.n(f),p=n(10),m=n.n(p),h=n(370),y=n(100),v=n.n(y),b=n(845),g=n(186),_=n(722),w=n(38),E=n(2073),O=n(167),x=n(124),j=n(295),k=n(592),S={articleTitle:"index-module_articleTitle_ed3ro",popover:"index-module_popover_7Xa-G",belongMenu:"index-module_belongMenu_YjMew",belongText:"index-module_belongText_hfI7c",belongMenuOverlay:"index-module_belongMenuOverlay_QN3zl",belongMenuLabel:"index-module_belongMenuLabel_BKBca",privacy:"index-module_privacy_kUCql"};function C(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R={Icon:function(e){var t=e.className,n=e.type,r=void 0===n?"doc":n,o=e.width,a=void 0===o?20:o;return s.a.createElement(w.b,{className:"doc-icon ".concat(t),name:j.b.getName("Doc",{type:r}),width:a})},AppIcon:function(){return s.a.createElement("span",{className:"app-icon larkicon larkicon-doc-app"})},Type:function(e){var t=e.type,n=null;return"Doc"===t?n=s.a.createElement("span",null,__("文档")):"Sheet"===t?n=s.a.createElement("span",null,__("表格")):"Table"===t&&(n=s.a.createElement("span",null,__("数据表"))),n},Belong:function(e){var t=e.group,n=e.book;return n&&t?s.a.createElement("span",{className:"doc-belong"},s.a.createElement("a",{href:"/".concat(t.login)},t.name),"/",s.a.createElement("a",{href:"/".concat(t.login,"/").concat(n.slug)},n.name)):s.a.createElement("span",{className:"doc-belong"},__("知识库不存在"))},getTypeText:function(e){var t=e;return"Doc"===e?t=__("文档#lower_case"):"Sheet"===e?t=__("表格#lower_case"):"Table"===e?t=__("数据表#lower_case"):"Board"===e&&(t=__("画板#lower_case")),t},getTypeTextOfBook:function(e){var t=e;return"Book"===e?t=__("文档"):"Sheet"===e&&(t=__("表格")),t},getFormalTitle:function(e){return e.title}};R.getDefaultTitle=x.a.getDefaultTitle,R.Contributors=function(e){var t=e.doc,n=e.showType,r=e.showAuthor,o=void 0===r||r,a=x.a.getDocShowAuthorOption(t);return o&&a!==v.a.SHOW_AUTHOR_OPTION.hide?"sheet"===n?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-sheet"},s.a.createElement("span",{className:"larkicon larkicon-user"}),s.a.createElement("span",{className:S.label},__("参与编辑：")," "),s.a.createElement(D,{doc:t,showAuthor:!0})):"doc"===n?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-doc",className:"meta-item"},s.a.createElement(u.a,{title:__("参与编辑")},s.a.createElement("span",{className:"author larkicon larkicon-user"})),s.a.createElement(D,{doc:t,showAuthor:o})):s.a.createElement(D,{doc:t,showAuthor:o}):null},R.Contributors.propTypes={doc:d.a.object.isRequired,showAuthor:d.a.bool.isRequired,showType:d.a.oneOf(["sheet","doc"])};var D=function(e){var t=e.doc,n=x.a.getDocShowAuthorOption(t);if(n===v.a.SHOW_AUTHOR_OPTION.hide)return null;if(n===v.a.SHOW_AUTHOR_OPTION.custom_text){var r=x.a.getDocShowAuthorCustomText(t);return r?s.a.createElement("span",{"data-testid":"doc-contributors-custom-text"},r):null}var o=x.a.getDocContributors(t);if(!o||0===o.length)return null;var a=o.slice(0,3);return s.a.createElement("span",{"data-testid":"doc-contributors",className:"doc-contributors"},a.map((function(e,t){return e&&s.a.createElement("span",{key:e.id},s.a.createElement(_.b,{user:e,type:_.a.link,withCard:!0,className:S.popover}),t!==a.length-1&&__("、"))})),o.length>3&&s.a.createElement("span",null,__("等")))};D.propTypes={doc:d.a.object.isRequired},R.Title=function(e){var t=e.doc,n=e.hasDraftSign,r=R.getFormalTitle(t);return n&&0===t.status?s.a.createElement("span",{className:"doc-title",title:r},s.a.createElement("span",{className:"doc-title-draft"},"[",__("草稿"),"]"),r):s.a.createElement("span",{className:"doc-title",title:r},r)},R.Title.propTypes={hasDraftSign:d.a.bool,doc:d.a.object},R.ArticleTitle=function(e){var t=e.title;return s.a.createElement("h1",{id:"article-title",className:m()(S.articleTitle,"doc-article-title")},t)},R.TemplateTag=function(e){return"YUQUE_TEMPLATE"===e.tag?s.a.createElement(c.a,{className:"doc-template-tag"},__("模板")):null},R.Time=function(e){var t=e.doc;return t.content_updated_at&&t.content_updated_at!==t.created_at?s.a.createElement("span",{className:"doc-time"},__("更改于"),s.a.createElement(g.a,{time:new Date(t.content_updated_at)})):s.a.createElement("span",{className:"doc-time"},__("创建于"),s.a.createElement(g.a,{time:new Date(t.created_at)}))},R.ShowTime=function(e){var t=e.doc,n=t[e.showBy]||t.updated_at;return s.a.createElement("span",{className:"doc-time"},s.a.createElement(g.a,{time:new Date(n)}))},R.DeleteTime=function(e){var t=e.doc;return s.a.createElement("span",{className:"doc-time"},__("删除于"),s.a.createElement(g.a,{time:new Date(t.deleted_at)}))},R.DraftTipContent=function(){return s.a.createElement("div",{className:"doc-draft-tip-content"},s.a.createElement("p",null,__("有内容未更新，请去编辑页更新")))},R.DraftTip=function(e){var t=e.doc,n=e.className;return t.content_modified?"Sheet"===t.type||"Table"===t.type?s.a.createElement("div",{className:n,title:__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新")},s.a.createElement(w.b,{name:"doc-has-new-content",height:18,width:18}),s.a.createElement("p",null,__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新"))):s.a.createElement(E.a,{style:{marginBottom:"Doc"===t.type?24:0},icon:s.a.createElement(w.b,{name:"edit-border",height:18,width:18}),content:s.a.createElement(R.DraftTipContent,{doc:t}),showClose:"Doc"===t.type}):null},R.DraftTip.propTypes={doc:d.a.object.isRequired,className:d.a.string},R.LastEditTip=function(e){var t=e.doc,n=t.content_updated_at;return s.a.createElement("span",null,t.last_editor&&t.last_editor.name,s.a.createElement(g.a,{time:n}),__("最后编辑"))},R.LastEditTip.propTypes={doc:d.a.object.isRequired},R.Link=function(e){var t=e.doc,n=e.url,r=e.target,o=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp?"_blank":"_self";return s.a.createElement("a",{href:n,target:r||o,className:"doc-link"},s.a.createElement(R.Title,{doc:t}))},R.Link.propTypes={doc:d.a.object,url:d.a.string,target:d.a.string},R.AccessScope=function(e){var t=e.doc,n=e.book,r=e.group,o=e.getPopupContainer,a=e.placement,i=void 0===a?"top":a;if(window.appData.sharePage)return null;if(n&&Object(O.b)({type:"doc",target:t,group:r,book:n}).getPrivacyValue()===b.PRIVACY.private)return s.a.createElement(u.a,{title:__("该文档访问需要权限"),getPopupContainer:o,placement:i},s.a.createElement("span",{className:"doc-access-scope"},s.a.createElement(w.b,{name:"permission-private",width:14})));return null},R.AccessScope.propTypes={group:d.a.object.isRequired,book:d.a.object.isRequired,doc:d.a.object.isRequired,getPopupContainer:d.a.func,placement:d.a.string},R.Status=function(e){var t=e.doc,n=e.withTip,r=void 0===n||n;if(0!==t.status)return null;var o=s.a.createElement("div",{className:"doc-draft-tip",style:{width:"360px"}},s.a.createElement(R.DraftTipContent,{doc:t})),a=s.a.createElement(c.a,{className:"doc-draft-tag","data-testid":"doc-draft-tag",onClick:function(e){e.stopPropagation(),e.preventDefault()}},t.published_at?__("未更新"):__("未发布"));return r?s.a.createElement(i.a,{placement:"bottomLeft",content:o},a):a},R.Status.displayName="LarkDocStatus",R.ShareLink=function(e){var t=e.doc;return t.share&&0===t.share.status?s.a.createElement(c.a,{className:"doc-share-tag"},s.a.createElement("a",{href:"/docs/share/".concat(t.share.token),target:"_blank"},__("分享中"))):null},R.ShareLink.displayName="LarkShareLink",R.Cover=function(e){var t=e.doc,n=e.size,r=void 0===n?{}:n,o=e.placeholder,a=t.cover||o;return a?s.a.createElement("div",{style:{width:"100%",height:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:'url("'.concat(Object(k.a)(a,L({},r)),'")')}}):s.a.createElement(w.b,{name:t.type.toLowerCase(),width:48})},R.LastEditor=function(e){var t=e.user;return t?s.a.createElement("span",{className:"doc-last-editor"},t.name):null},R.Creator=function(e){var t=e.doc,n=e.highlightUsers;if(x.a.getDocShowAuthorOption(t)===y.SHOW_AUTHOR_OPTION.hide)return s.a.createElement("span",{className:"info-not-show-creator"},__("不显示作者"));var r=x.a.getDocContributors(t);return r?(Array.isArray(r)||(r=[r]),s.a.createElement(u.a,{title:function(){return r.map((function(e){return e.name})).join("、")}},s.a.createElement("span",null,r.reduce((function(e,t,r){return null!=n&&n.includes(String(t.id))?(e.unshift.apply(e,[s.a.createElement("a",{href:"/".concat(t.login)},s.a.createElement("b",null,t.name)),"、"]),e):(e.push.apply(e,[s.a.createElement("a",{href:"/".concat(t.login)},t.name),"、"]),e)}),[]).slice(0,-1)))):null};var M=function(e){var t=e.belongs,n=e.onChange,r=e.overlayClassName,o=e.overlayPlacement;function i(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=P(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.text||(r.text=r.label,r.label=s.a.createElement("span",{className:S.belongMenuLabel},s.a.createElement(h.a,null),s.a.createElement("span",null,r.label)),r.children&&r.children.length&&i(r.children))}}catch(o){n.e(o)}finally{n.f()}return e}var c=N(s.a.useState(""),2),u=c[0],l=c[1],f=N(s.a.useState(C(t)),2),d=f[0],p=f[1];s.a.useEffect((function(){p(i(C(t)))}),[t]);return!d||d.length<=1?s.a.createElement("span",{className:S.belongText},u||__("归属")):s.a.createElement(a.a,{defaultValue:[null],popupClassName:m()(S.belongMenuOverlay,r),popupPlacement:o||"bottomLeft",options:d,onChange:function(e,t){n(e),e&&e[0]?l(t.map((function(e){return e.text})).join(" / ")):l("")},changeOnSelect:!0},s.a.createElement("span",{className:S.belongMenu},s.a.createElement("span",{className:S.belongText},u||__("归属")),s.a.createElement(w.b,{name:"down",width:16})))};M.propTypes={belongs:d.a.array.isRequired,onChange:d.a.func.isRequired,overlayClassName:d.a.string,overlayPlacement:d.a.string},R.BelongMenu=M,R.TypeMenu=function(e){var t=e.current,n=e.onChange,a=e.overlayClassName,i=e.overlayPlacement,c=[{name:__("所有"),value:""},{name:__("文档"),value:"Doc"},{name:__("表格"),value:"Sheet"},{name:__("画板"),value:"Board"},{name:__("演示文稿"),value:"Show"},{name:__("数据表"),value:"Table"}];t||(t="");var u=c.find((function(e){return e.value===t}));return s.a.createElement(r.a,{trigger:"click",placement:i||"bottomLeft",overlay:s.a.createElement(o.a,null,c.map((function(e){return s.a.createElement(o.a.Item,{key:e.value,onClick:function(){n(e.value)}},t===e.value&&s.a.createElement(h.a,null),e.name)}))),overlayClassName:a},s.a.createElement("span",null,u.value?u.name:__("类型")," ",s.a.createElement(w.b,{name:"down",width:16})))},R.TypeMenu.propTypes={current:d.a.string.isRequired,onChange:d.a.func.isRequired,overlayClassName:d.a.string,overlayPlacement:d.a.string};t.a=R},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r={startLogin:"startLogin",finishLogin:"finishLogin",closePage:"closePage",startShare:"startShare",startShareDoc:"startShareDoc",notePublish:"notePublish",nebulaWebAppBootstrap:"nebulaWebAppBootstrap",setTitleBar:"setTitleBar",updateTitleBar:"updateTitleBar",openPage:"openPage",notifyEvent:"notifyEvent",monitorEvent:"monitorEvent",noteHasBeenDestroy:"noteHasBeenDestroy",noteLoadReady:"noteLoadReady",noteLoadError:"noteLoadError",noteSaving:"noteSaving",reloadPage:"reloadPage",showToast:"showToast",noteModify:"noteModify",showConfirm:"showConfirm",showActionSheet:"showActionSheet",openUrlInSystem:"openUrlInSystem",noteWfMessage:"noteWfMessage",noteErrorMessage:"noteErrorMessage",downloadFile:"downloadFile",saveToGallery:"saveToGallery",impactVibration:"impactVibration",isHealthy:"isHealthy",onPageLoaded:"onPageLoaded",putStorage:"putStorage",getStorage:"getStorage",getClipboard:"getClipboard",setClipboard:"setClipboard",showCustomizedMenu:"showCustomizedMenu",hideCustomizedMenu:"hideCustomizedMenu",showEditLinkModal:"showEditLinkModal",showEditInputModal:"showEditInputModal",showRichActionMenu:"showRichActionMenu",updateRichActionMenu:"updateRichActionMenu",showSelectorMenu:"showSelectorMenu",refreshNoteFromEditor:"refreshNoteFromEditor",onPageFCP:"onPageFCP",onEditorFirstScreenRendered:"onEditorFirstScreenRendered",onEditorRendered:"onEditorRendered",onScreenshotSuccess:"onScreenshotSuccess"},o={startBootstrap:"startBootstrap",updateBootstrapInfo:"updateBootstrapInfo",startEditNote:"startEditNote",keyboardDidShow:"keyboardDidShow",keyboardDidHide:"keyboardDidHide",generateNotePoster:"generateNotePoster",resetNotePoster:"resetNotePoster",toggleDocMark:"toggleDocMark",toggleDocOutline:"toggleDocOutline",resetDocPosition:"resetDocPosition",reloadNote:"reloadNote",noteHeartbeat:"noteHeartbeat",addAndroidAbsoluteMask:"addAndroidAbsoluteMask",renderLakeAndScreenshot:"renderLakeAndScreenshot",switchPageUrl:"switchPageUrl"}},function(e,t,n){"use strict";t.rateLimit={accounts:{validationCodeLimitByIpMinute:5,validationCodeLimitByUserMinute:2,vmsLimitByDay:500,period:55,existsLimit:100,validationCodeCaptchaNeedByHour:300},apply:{limit:5},apiV2:{unauthorizeLimit:500,authorizedLimit:5e3,vipAuthorizedLimit:2e4,superVipAuthorizedLimit:36e4,period:3600,peakLimit:100},apiV2Upload:{limit:100,period:3600,peakLimit:10},apiVP:{limit:5e4,userLimit:2e4,period:3600,peakLimit:100},create:{comment:100,topic:50,quickLink:200},exportPerMinute:5,exportPerMinutePerServer:2e3,exportDocPerBook:500,officeConvertPerMinute:10,inviteGroupUserPerMinute:10,inviteOrganizationUserPerMinute:10,inviteDepartmentUserPerMinute:10,inviteDepartmentUserPerDay:50,inviteDepartmentUserSMSPerMinute:5,importInviteOrganizationUsersPerMinute:5,importInviteDepartmentUsersPerMinute:5,inviteBookUserPerMinute:10,uploadByUrlLimitForUser:500,uploadByFileLimitForUser:500,uploadAvatarLimitForUser:10,uploadByAvatarLimitForThirdPartAccount:5,queryMobileLimitForUser:20,cryptoLimitForLockedCardPerMinute:20,copyResourcesLimitForUser:5,sharePasswordVerifyLimit:5,orgAuditLogExportLimit:5,appCrash:{desktop:2},datasheetRecordSubmitLimit:30,orgContactLimit:5,importInviteNotificationsPerMinute:5},t.settingMemoryCacheMaxAge=3e4,t.attachmentExpires=31536e5,t.intranetProxy="https://intranetproxy.alipay.com/skylark/",t.emailTemplates={normal:{template:"本次操作需要的验证码是 ${code}，请在 15 分钟内输入验证码进行下一步操作。"},resetPassword:{template:"本次重置密码需要的验证码是 ${code}，请在 15 分钟内输入验证码进行下一步操作。"},verifyUser:{template:"本次验证账号安全需要的验证码是 ${code}，请在 15 分钟内输入验证码进行下一步操作。"},updateEmail:{template:"本次变更邮箱需要的验证码是 ${code}，请在 15 分钟内输入验证码进行下一步操作。"}},t.smsTemplates={normal:{code:"SMS_117511110",template:"验证码：${code}，15分钟内有效。"},globalNormal:{code:"SMS_149421158",template:"Verification code: ${code}, valid for 15 minutes."},updateMobile:{code:"SMS_117516101",template:"你正在更换手机操作，验证码：${code}，15分钟内有效。"},register:{code:"SMS_177541771",template:"验证码：${code}，15分钟内有效。如非本人操作，请忽略。"},resetPassword:{code:"SMS_177541771",template:"验证码：${code}，15分钟内有效。如非本人操作，请忽略。"},verifyUser:{code:"SMS_177541771",template:"验证码：${code}，15分钟内有效。如非本人操作，请忽略。"},enterpriseRegister:{code:"SMS_127169137",template:"恭喜你成功注册 ${name} 企业空间，通过企业域名 ${login}.yuque.com 进行企业知识协同。"},completeProfile:{code:"SMS_177541771",template:"验证码：${code}，15分钟内有效。如非本人操作，请忽略。"},login:{code:"SMS_177541771",template:"验证码：${code}，15分钟内有效。如非本人操作，请忽略。"},paidOrganization:{code:"SMS_163852155",template:"恭喜你，${name} 空间付费成功，如需帮助请联系 support@yuque.com。"},warning:{code:"SMS_164269137",template:"语雀报警：${message}"},content_report_feedback:{code:"SMS_165411437",tempalte:"你对${title}的侵权投诉${treatment}。如有疑问，请联系：support@yuque.com。"},content_report_notice:{code:"SMS_165416282",tempalte:"你的${title}因${reason}已被系统屏蔽。如有疑问，请联系：support@yuque.com。"},orgWillExpire:{code:"SMS_242560974",tempalte:"你的空间 “${organization}” 即将在 ${expire} 后到期，为了不影响功能使用，请提前完成支付，或在到期后降级为免费版继续使用。"},orgExpired:{code:"SMS_242581023",tempalte:"你的空间 “${organization}” 付费权益已到期，到期后只可查看，不可编辑。请及时续费，或降级为免费版继续使用。"},orgWillDeleteOwner:{code:"SMS_169865742",tempalte:"你的空间 “${organization}” 已进入删除流程，24 小时后执行删除操作，删除后内容不可恢复，当前可撤销删除操作。"},orgDeletedOwner:{code:"SMS_169870740",tempalte:"你的空间 “${organization}” 已删除，所有内容已被清除。"},paidUserMember:{code:"SMS_177554661",template:"恭喜你，“${name}” 已升级为语雀会员，如需帮助请联系 support@yuque.com。"},paidGroupMember:{code:"SMS_177544655",template:"恭喜你，团队 “${name}” 已升级为高级版，如需帮助请联系 support@yuque.com。"},renewUserMember:{code:"SMS_176943820",template:"恭喜你，会员 “${name}” 续费成功，如需帮助请联系 support@yuque.com。"},renewGroupMember:{code:"SMS_177539717",template:"恭喜你，团队 “${name}” 已成功续费高级版，如需帮助请联系 support@yuque.com。"},memberWillExpire:{code:"SMS_175542584",tempalte:"你的${level} “${name}” 即将在 ${expire} 后到期，为了不影响功能使用，请及时续费。"},memberExpired:{code:"SMS_175582528",tempalte:"你的${level} “${name}” 已到期。为了不影响功能使用，请及时续费。"},orgUploadUseOut:{code:"SMS_183145181",template:"你的空间 “${organization}” 上传流量已用完。为了不影响功能使用，请及时购买流量。"},orgUploadWillUseOut:{code:"SMS_182684943",template:"你的空间 “${organization}” 剩余上传流量不足 10GB。为了不影响功能使用，请及时购买流量。"},userUploadUseOut:{code:"SMS_183245788",template:"${user}上传流量已用完。为了不影响功能使用，请及时购买流量。"},userUploadWillUseOut:{code:"SMS_183240821",template:"${user}剩余上传流量不足 1GB。为了不影响功能使用，请及时购买流量。"},premiumDocOwner:{code:"SMS_183245800",tempalte:"恭喜你，用户 “${name}” 已对文档 “${docTitle}” 进行付费。"},infosecAuditUser:{code:"SMS_217240282",template:"您的账号${account}因${reason}，被系统${dispose}。"},groupUpgradeOwner:{code:"SMS_218170323",template:"您的语雀团队${name}将于${date}自动免费升级成语雀空间。"},inviteOrgUser:{code:"SMS_222466535",template:"你被邀请加入语雀空间，访问 ${login}.yuque.com 查看邀请"}},t.vmsTemplates={normal:{code:"TTS_170350406",template:"语雀向您发送的验证码为 ${code}，15分钟内有效。"},globalNormal:{code:"TTS_175533375",template:"The verification code is ${code}."}},t.userLimit={maxApplications:5},t.avatar={user:"https://gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png",group:"https://gw.alipayobjects.com/zos/rmsportal/SZXCSCJTuhRSmAggBlVp.png",publication:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*7sc0QLRt34kAAAAAAAAAAAAAARQnAQ",department:"//gw.alipayobjects.com/zos/bmw-prod/50ed3df8-e735-4a0a-893a-0d66860fb738.svg"},t.exportBookLimit={maxPublishDocs:200,maxDocs:500},t.ROLE={owner:0,member:1,outsourcer:2},t.YUQUE_LOGO="https://gw.alipayobjects.com/zos/rmsportal/XuVpGqBFxXplzvLjJBZB.svg",t.YUQUE_LOGO_PNG="https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*y_LbQJSIQvAAAAAAAAAAAABjAQAAAQ/original.png",t.YUQUE_IMAGE_HOSTS=["cdn.nlark.com","gw.alipayobjects.com","alipay-rmsdeploy-image.cn-hangzhou.alipay.aliyun-inc.com","private-alipayobjects.alipay.com","zos.alipayobjects.com","yuque.com","yuque.antfin-inc.com","yuque.antfin.com","intranetproxy.alipay.com","lark.alipay.net:7001","lark-assets-dev-aliyun.oss-cn-hangzhou.aliyuncs.com"],t.MAX_ITEMS_COUNT=1e3,t.PRIVACY=n(845).PRIVACY,t.DATA_MASK=n(845).DATA_MASK,t.account=n(2615),t.book=n(149),t.doc=n(100),t.doclet=n(525),t.activityLog=n(2616),t.user=n(117),t.sec=n(2617),t.comment=n(253),t.document=n(90),t.search=n(2618),t.webhook=n(2619),t.topic=n(2620),t.template=n(617),t.notify=n(2349),t.action=n(1207),t.actionTag=n(2621),t.mail=n(694),t.thirdpart=n(2121),t.groupUser=n(373),t.collaboration=n(265),t.organization=n(49),t.organizationUser=n(125),t.organizationGroup=n(2622),t.organizationRecommend=n(2623),t.organizationEvent=n(2624),t.organizationActionLog=n(2625),t.organizationCertification=n(311),t.login=n(2626),t.tip=n(518),t.highLevelScope=n(2027),t.pay=n(112),t.space=n(2627),t.share=n(444),t.joinToken=n(352),t.collection=n(2628),t.contentReport=n(234),t.application=n(643),t.attachment=n(2629),t.editor=n(2630),t.session=n(2631),t.auditLog=n(2353),t.recycle=n(2632),t.video=n(2633),t.resource=n(1445),t.quickLink=n(513),t.go=n(2634),t.coupon=n(2635),t.promo=n(214),t.userActionLog=n(2636),t.limit=n(131),t.bookStack=n(2272),t.flow=n(2637),t.userMerchants=n(2638),t.premiumOrder=n(2028),t.order=n(2374),t.actionMessage=n(2181),t.actionMessage=n(2181),t.artboard=n(2280),t.department=n(2029),t.ability=n(2639),t.workMessage=n(855),t.notificationTask=n(644),t.catalogNode=n(252),t.docVersion=n(2267),t.group=n(1921),t.viewBlock=n(1546),t.review=n(255),t.graph=n(2640),t.note=n(161),t.tag=n(1102),t.grain=n(195),t.odpsSync=n(2641),t.export=n(2642),t.datasheet=n(2643),t.list=n(2644),t.listUser=n(1091),t.thirdPartyConnector=n(2645),t.permission=n(2646),t.source=n(2647),t.infosec=n(1031),t.decryptedContent=n(2648),t.openapi=n(2649),t.recipient=n(1327),t.task=n(2650),t.contributor=n(2265),t.event=n(2367),t.hobby=n(406),t.migrationTask=n(969),t.accessToken=n(1214),t.docMail=n(2651),t.supervise=n(2652),t.corp=n(442),t.profile=n(2368),t.thirdpartAccountUserType=n(2653),t.statistics=n(1101),t.table=n(1913),t.mobileApp=n(2654),t.groupSettings=n(2655),t.activity=n(2656),t.wechat=n(2657),t.skylink=n(2658),t.dataSync=n(2362),t.skythings=n(2369),t.feedback=n(2659),t.attribution=n(2660),t.skycontentTaskRecord=n(2661),t.equityCenter=n(2662)},,function(e,t,n){"use strict";var r=n(14),o=n(0),a=n(197),i=(n(85),n(11)),c=n(181),u=n(689),l=n(593),s=new Map;var f=new l.default((function(e){e.forEach((function(e){var t,n=e.target;null===(t=s.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var d=n(57),p=n(58),m=n(66),h=n(72),y=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return this.props.children}}]),n}(o.Component),v=o.createContext(null);function b(e){var t=e.children,n=e.disabled,r=o.useRef(null),a=o.useRef(null),l=o.useContext(v),d="function"==typeof t,p=d?t(r):t,m=o.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!d&&o.isValidElement(p)&&Object(c.c)(p),b=h?p.ref:null,g=o.useMemo((function(){return Object(c.a)(b,r)}),[b,r]),_=o.useRef(e);_.current=e;var w=o.useCallback((function(e){var t=_.current,n=t.onResize,r=t.data,o=e.getBoundingClientRect(),a=o.width,c=o.height,u=e.offsetWidth,s=e.offsetHeight,f=Math.floor(a),d=Math.floor(c);if(m.current.width!==f||m.current.height!==d||m.current.offsetWidth!==u||m.current.offsetHeight!==s){var p={width:f,height:d,offsetWidth:u,offsetHeight:s};m.current=p;var h=u===Math.round(a)?a:u,y=s===Math.round(c)?c:s,v=Object(i.a)(Object(i.a)({},p),{},{offsetWidth:h,offsetHeight:y});null==l||l(v,e,r),n&&Promise.resolve().then((function(){n(v,e)}))}}),[]);return o.useEffect((function(){var e,t,o=Object(u.a)(r.current)||Object(u.a)(a.current);return o&&!n&&(e=o,t=w,s.has(e)||(s.set(e,new Set),f.observe(e)),s.get(e).add(t)),function(){return function(e,t){s.has(e)&&(s.get(e).delete(t),s.get(e).size||(f.unobserve(e),s.delete(e)))}(o,w)}}),[r.current,n]),o.createElement(y,{ref:a},h?o.cloneElement(p,{ref:g}):p)}function g(e){var t=e.children;return("function"==typeof t?[t]:Object(a.a)(t)).map((function(t,n){var a=(null==t?void 0:t.key)||"".concat("rc-observer-key","-").concat(n);return o.createElement(b,Object(r.default)({},e,{key:a}),t)}))}g.Collection=function(e){var t=e.children,n=e.onBatchResize,r=o.useRef(0),a=o.useRef([]),i=o.useContext(v),c=o.useCallback((function(e,t,o){r.current+=1;var c=r.current;a.current.push({size:e,element:t,data:o}),Promise.resolve().then((function(){c===r.current&&(null==n||n(a.current),a.current=[])})),null==i||i(e,t,o)}),[n,i]);return o.createElement(v.Provider,{value:c},t)};t.a=g},,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}},,function(e,t,n){"use strict";n(162)},function(e,t,n){var r=n(671),o=n(558);e.exports=function(e){return"number"==typeof e||o(e)&&"[object Number]"==r(e)}},,,function(e,t,n){var r=n(673),o=n(2281);e.exports=function(e){return o(r(e).toLowerCase())}},,function(e,t,n){"use strict";e.exports={SOURCE:{apply:1,create:2},STATUS:{init:0,applying:1,accepted:2,rejected:3}}},,,,,,function(e,t,n){"use strict";t.a={fullscreenWrapper:"Layout-module_fullscreenWrapper_OQ3Cd",wrapper:"Layout-module_wrapper_AliMd",wrapperActive:"Layout-module_wrapperActive_Ydxle",bar:"Layout-module_bar_closq",btn:"Layout-module_btn_YhGHp",btnActive:"Layout-module_btnActive_okzos",contentWrapper:"Layout-module_contentWrapper_fn6Qc",content:"Layout-module_content_pIrsG",header:"Layout-module_header_BZxN6",title:"Layout-module_title_+4KcU",btnClose:"Layout-module_btnClose_DvTaZ",body:"Layout-module_body_nYHEV",commentBubble:"Layout-module_commentBubble_nTUFg"}},,,function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(28),i=n(0),c=n(10),u=n.n(c),l=n(126),s=n(261),f=n(257),d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},p=function(e){var t,n=e.prefixCls,a=e.className,c=e.checked,l=e.onChange,s=e.onClick,p=d(e,["prefixCls","className","checked","onChange","onClick"]),m=(0,i.useContext(f.b).getPrefixCls)("tag",n),h=u()(m,(t={},Object(r.a)(t,"".concat(m,"-checkable"),!0),Object(r.a)(t,"".concat(m,"-checkable-checked"),c),t),a);return i.createElement("span",Object(o.default)({},p,{className:h,onClick:function(e){null==l||l(!c),null==s||s(e)}}))},m=n(962),h=n(1016),y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},v=new RegExp("^(".concat(m.a.join("|"),")(-inverse)?$")),b=new RegExp("^(".concat(m.b.join("|"),")$")),g=function(e,t){var n,c=e.prefixCls,d=e.className,p=e.style,m=e.children,g=e.icon,_=e.color,w=e.onClose,E=e.closeIcon,O=e.closable,x=void 0!==O&&O,j=y(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),k=i.useContext(f.b),S=k.getPrefixCls,C=k.direction,N=i.useState(!0),P=Object(a.a)(N,2),T=P[0],A=P[1];i.useEffect((function(){"visible"in j&&A(j.visible)}),[j.visible]);var L=function(){return!!_&&(v.test(_)||b.test(_))},I=Object(o.default)({backgroundColor:_&&!L()?_:void 0},p),R=L(),D=S("tag",c),M=u()(D,(n={},Object(r.a)(n,"".concat(D,"-").concat(_),R),Object(r.a)(n,"".concat(D,"-has-color"),_&&!R),Object(r.a)(n,"".concat(D,"-hidden"),!T),Object(r.a)(n,"".concat(D,"-rtl"),"rtl"===C),n),d),F=function(e){e.stopPropagation(),null==w||w(e),e.defaultPrevented||"visible"in j||A(!1)},B="onClick"in j||m&&"a"===m.type,U=Object(l.a)(j,["visible"]),z=g||null,G=z?i.createElement(i.Fragment,null,z,i.createElement("span",null,m)):m,V=i.createElement("span",Object(o.default)({},U,{ref:t,className:M,style:I}),G,x?E?i.createElement("span",{className:"".concat(D,"-close-icon"),onClick:F},E):i.createElement(s.a,{className:"".concat(D,"-close-icon"),onClick:F}):null);return B?i.createElement(h.a,null,V):V},_=i.forwardRef(g);_.displayName="Tag",_.CheckableTag=p;t.a=_},function(e,t,n){"use strict";n(175);var r=n(84),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(34),l=n(364),s=(n(612),n(233)),f=n(294),d=n(1355),p=n(2220),m=n(38),h=n(127),y={userCard:"index-module_userCard_NOTbr",body:"index-module_body_20bgh",avatar:"index-module_avatar_OBHFJ",userInfos:"index-module_userInfos_B16Pa",nameContainer:"index-module_nameContainer_elI96",name:"index-module_name_QeZm4",dingtalk:"index-module_dingtalk_kYXBj",badge:"index-module_badge_lsJBP",dingding:"index-module_dingding_l7pi0",infoWithBg:"index-module_infoWithBg_JGcdP",signature:"index-module_signature_aQ+Wz",infoList:"index-module_infoList_Y58li",infoItem:"index-module_infoItem_same7",icon:"index-module_icon_MGwU8",footer:"index-module_footer_FNHCP",follow:"index-module_follow_1HgLb",footerItem:"index-module_footerItem_H0y7j",number:"index-module_number_NahUE",userLink:"index-module_userLink_i0XYI",skeleton:"index-module_skeleton_Z4M4v",infoDetail:"index-module_infoDetail_dKXCO"};function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g={mobile:"user-mobile",email:"user-email",departments:"user-department-opa",job_title:"user-job",location:"user-location-line"},_=function(e){var t=e.style,n=void 0===t?{}:t,r=e.className,i=void 0===r?"":r,c=e.user,l=void 0===c?{}:c,b=e.profile,_=void 0===b?{}:b,w=e.loading,E=l.avatar_url,O=l.avatar,x=l.description,j=l.followers_count,k=l.following_count,S=l.name,C=l.id,N=window.appData,P=N.isYuque,T=N.isPublicCloud,A=N.organization,L=v(Object(o.useState)(),2),I=L[0],R=L[1],D=v(Object(o.useState)(null),2),M=D[0],F=D[1],B=v(Object(o.useState)(null),2),U=B[0],z=B[1],G=_.dingtalk_id,V=_.orgName,Y=_.role,q=_.status,H=_.isPublicUser,W=q===f.organizationUser.STATUS.terminated,K=Y===f.organizationUser.ROLE.outsourcer,$=A&&H;Object(o.useEffect)((function(){F("following_count"in _?_.following_count||0:k||0),z("followers_count"in _?_.followers_count||0:j||0)}),[_]);var Q=function(){I||u.a.users.mobile({id:C}).then(R)},X=function(e){return e.map((function(e){return{key:e,icon:g[e],value:_[e]}})).filter((function(e){return!!e.value}))},J=[];J=X(P?A?["mobile","email","departments","job_title"]:["location","job_title"]:["departments","job_title"]);var Z=null;$?Z=a.a.createElement("div",{className:y.infoWithBg},__("非本空间成员")):W?Z=a.a.createElement("div",{className:y.infoWithBg},T?__("已离职"):__("已退隐江湖")):K&&(Z=a.a.createElement("div",{className:y.infoWithBg},__("外部联系人")));var ee=!W&&!K&&!$;return a.a.createElement("div",{className:"".concat(i," ").concat(y.userCard),style:n,"data-aspm":"c39373"},a.a.createElement("div",{className:y.body},$?a.a.createElement(h.a,{src:E||O,size:48,className:y.avatar,bordered:!0}):a.a.createElement("a",{href:"/".concat(l.login),target:"_blank"},a.a.createElement(h.a,{src:E||O,size:48,className:y.avatar,bordered:!0})),a.a.createElement("div",{className:y.userInfos},a.a.createElement("div",{className:y.nameContainer},$?a.a.createElement("span",{className:y.name},V||S):a.a.createElement("a",{href:"/".concat(l.login),target:"_blank",className:y.name},V||S),G&&a.a.createElement("a",{href:"dingtalk://dingtalkclient/action/sendmsg?dingtalk_id=".concat(G),className:y.dingtalk,"data-testid":"dingtalk","data-aspm-click":"d001"},a.a.createElement(m.b,{name:"dingding-filled",className:y.dingding})),a.a.createElement(d.a,{user:l,useMobile:!0,className:y.badge}),Z),a.a.createElement("div",{className:y.signature},x||""),w&&a.a.createElement("div",{className:y.skeleton},a.a.createElement(s.a,{active:!0,title:!1})),J&&J.length>0?a.a.createElement("div",{className:y.infoList},J.map((function(e){return function(e){return"departments"===e.key?e.value.map((function(t,n){return a.a.createElement("div",{className:y.infoItem,key:e.key+n,"data-testid":e.key},a.a.createElement(m.b,{name:e.icon,width:16,className:y.icon}),a.a.createElement("span",{className:y.infoDetail},t))})):a.a.createElement("div",{className:y.infoItem,key:e.key,"data-testid":e.key},a.a.createElement(m.b,{name:e.icon,width:16,className:y.icon}),"mobile"===e.key?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:y.infoDetail},I||e.value),!I&&a.a.createElement("a",{onClick:Q},__("查看"))):a.a.createElement("span",{className:y.infoDetail},e.value))}(e)}))):null)),ee&&a.a.createElement("div",{className:y.footer},a.a.createElement("div",{className:y.follow},a.a.createElement("div",{className:y.footerItem},__("关注者"),a.a.createElement("span",{className:y.number},U)),a.a.createElement("div",{className:y.footerItem},__("关注了"),a.a.createElement("span",{className:y.number},M))),a.a.createElement(p.a,{user:l,className:y.followBtn})))};_.propTypes={user:c.a.object.isRequired,profile:c.a.object,style:c.a.object,className:c.a.string,loading:c.a.bool};var w=_,E=n(89),O="index-module_popover_Xyidp",x="index-module_overlay_A0ouW";function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t=e.user,n=void 0===t?{}:t,i=e.children,c=e.style,s=void 0===c?{}:c,f=e.className,d=void 0===f?"":f,p=n&&n.id,m=j(Object(o.useState)("topLeft"),2),h=m[0],y=m[1],v=Object(o.useRef)(null),b=Object(l.a)(u.a.users.profile),g=b.data,_=b.loading,k=b.request;if(null==p||E.a.isGroupOrPublication(n))return i;return window.h5?i:a.a.createElement(r.a,{placement:h,content:a.a.createElement(w,{user:n,profile:g||{},loading:_}),style:s,className:"".concat(d," ").concat(O),overlayClassName:x,mouseEnterDelay:.3},a.a.createElement("span",{onMouseOver:function(){var e=v&&v.current.getBoundingClientRect().top;y(e<240?"bottomLeft":"topLeft"),g||_||k({id:p})},ref:v,"data-testid":"content"},i))};S.propTypes={user:c.a.object.isRequired,style:c.a.object,className:c.a.string,children:c.a.any};t.a=S},,function(e,t,n){var r=n(1977),o=n(2146);e.exports=function(e,t){return e&&r(e,o(t))}},function(e,t,n){"use strict";t.a={logoWrapper:"ViewerHeader-module_logoWrapper_nnDzf",navigation:"ViewerHeader-module_navigation_opJY6",logoWrapperActive:"ViewerHeader-module_logoWrapperActive_Ptc2p",logo:"ViewerHeader-module_logo_-rHiY",wrapper:"ViewerHeader-module_wrapper_vhIJ4",search:"ViewerHeader-module_search_fw9Jl",mark:"ViewerHeader-module_mark_c28hV",collaborate:"ViewerHeader-module_collaborate_VW8td",playButton:"ViewerHeader-module_playButton_3Qm5h",skylink:"ViewerHeader-module_skylink_toi1A",popoverMore:"ViewerHeader-module_popoverMore_JrUsz",editorBtn:"ViewerHeader-module_editorBtn_Sb8OT",versionSelector:"ViewerHeader-module_versionSelector_Gx9Eb",versionName:"ViewerHeader-module_versionName_4oYUk",logoOnboardingWrapper:"ViewerHeader-module_logoOnboardingWrapper_VyXtw",logoOnboardingBanner:"ViewerHeader-module_logoOnboardingBanner_MmQAV",larkLogo:"ViewerHeader-module_larkLogo_2wmwH",buttonGroup:"ViewerHeader-module_buttonGroup_o-nqO",collabEntry:"ViewerHeader-module_collabEntry_XfPGf",larkDotZoom:"ViewerHeader-module_larkDotZoom_NeG+z"}},,function(e,t,n){"use strict";n(162),n(305)},function(e,t,n){var r=n(2009),o=n(1290),a=n(842),i=Math.ceil,c=Math.max;e.exports=function(e,t,n){t=(n?o(e,t,n):void 0===t)?1:c(a(t),0);var u=null==e?0:e.length;if(!u||t<1)return[];for(var l=0,s=0,f=Array(i(u/t));l<u;)f[s++]=r(e,l,l+=t);return f}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return f})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p}));var r=n(259),o="68687807",a="https://gw.alipayobjects.com/zos/nebulamng/2370540f-df0a-44a6-96a3-2f8f56a753f3/icon/57qrw1uw9c.png",i={dev:{name:"dev",host:"http://lark.alipay.net:7001",sessionKey:"_yuque_session"},test:{name:"test",host:"https://yuquetest.yuque.com",sessionKey:"_yuque_session_test"},test1:{name:"test1",host:"https://yuquetest-1.yuque.com",sessionKey:"_yuque_session_test_1"},test2:{name:"test2",host:"https://yuquetest-2.yuque.com",sessionKey:"_yuque_session_test_2"},test3:{name:"test3",host:"https://yuquetest-3.yuque.com",sessionKey:"_yuque_session_test_3"},test4:{name:"test4",host:"https://yuquetest-4.yuque.com",sessionKey:"_yuque_session_test_4"},test5:{name:"test5",host:"https://yuquetest-5.yuque.com",sessionKey:"_yuque_session_test_5"},test6:{name:"test6",host:"https://yuquetest-6.yuque.com",sessionKey:"_yuque_session_test_6"},pre:{name:"pre",host:"https://yuquepre.yuque.com",sessionKey:"_yuque_session_pre"},prod:{name:"prod",host:"https://www.yuque.com",sessionKey:"_yuque_session"}},c=[{get title(){return __("小记")},value:r.STATUS.unarchived},{get title(){return __("已归档")},value:r.STATUS.archived}],u=[{get title(){return __("待完成")},value:r.STATUS.unReady},{get title(){return __("已完成")},value:r.STATUS.ready}],l=[{get title(){return __("更新时间")},value:r.ORDER_BY.content_updated_at},{get title(){return __("创建时间")},value:r.ORDER_BY.first_published_at}],s={filterType:r.FILTER_TYPES.all,tag:null,status:r.STATUS.unarchived,order:r.ORDER_BY.content_updated_at,type:r.TYPE.note},f={filterType:r.FILTER_TYPES.all,tag:null,status:r.STATUS.unReady,order:r.ORDER_BY.content_updated_at,type:r.TYPE.todo},d="note/home/first_page",p="note/search/history"},,,,function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(28),c=n(55),u=n(10),l=n.n(u),s=n(163),f=n(70),d=a.forwardRef((function(e,t){var n,r=e.prefixCls,u=void 0===r?"rc-switch":r,d=e.className,p=e.checked,m=e.defaultChecked,h=e.disabled,y=e.loadingIcon,v=e.checkedChildren,b=e.unCheckedChildren,g=e.onClick,_=e.onChange,w=e.onKeyDown,E=Object(c.a)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),O=Object(s.a)(!1,{value:p,defaultValue:m}),x=Object(i.a)(O,2),j=x[0],k=x[1];function S(e,t){var n=j;return h||(k(n=e),null==_||_(n,t)),n}var C=l()(u,d,(n={},Object(o.a)(n,"".concat(u,"-checked"),j),Object(o.a)(n,"".concat(u,"-disabled"),h),n));return a.createElement("button",Object.assign({},E,{type:"button",role:"switch","aria-checked":j,disabled:h,className:C,ref:t,onKeyDown:function(e){e.which===f.a.LEFT?S(!1,e):e.which===f.a.RIGHT&&S(!0,e),null==w||w(e)},onClick:function(e){var t=S(!j,e);null==g||g(t,e)}}),y,a.createElement("span",{className:"".concat(u,"-inner")},j?v:b))}));d.displayName="Switch";var p=d,m=n(208),h=n(1016),y=n(257),v=n(132),b=n(95),g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=a.forwardRef((function(e,t){var n,i=e.prefixCls,c=e.size,u=e.loading,s=e.className,f=void 0===s?"":s,d=e.disabled,_=g(e,["prefixCls","size","loading","className","disabled"]);Object(b.a)("checked"in _||!("value"in _),"Switch","`value` is not a valid prop, do you mean `checked`?");var w=a.useContext(y.b),E=w.getPrefixCls,O=w.direction,x=a.useContext(v.b),j=E("switch",i),k=a.createElement("div",{className:"".concat(j,"-handle")},u&&a.createElement(m.a,{className:"".concat(j,"-loading-icon")})),S=l()((n={},Object(o.a)(n,"".concat(j,"-small"),"small"===(c||x)),Object(o.a)(n,"".concat(j,"-loading"),u),Object(o.a)(n,"".concat(j,"-rtl"),"rtl"===O),n),f);return a.createElement(h.a,{insertExtraNode:!0},a.createElement(p,Object(r.default)({},_,{prefixCls:j,className:S,disabled:d||u,ref:t,loadingIcon:k})))}));_.__ANT_SWITCH=!0,_.displayName="Switch";t.a=_},,function(e,t,n){"use strict";var r=n(386);n.d(t,"a",(function(){return r.spmClick})),n.d(t,"b",(function(){return r.spmExpo})),n.d(t,"c",(function(){return r.storeChInfo}))},,,function(e,t,n){"use strict";e.exports={APPROVE:{noneed:0,need:1},ROLE:{owner:0,member:1,readonly:2},ALLOW_OUTSIDER:{ALLOW:1,NORMAL:0}}},function(e,t,n){"use strict";function r(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}n.d(t,"a",(function(){return r}))},,,function(e,t,n){var r=n(671),o=n(269),a=n(558);e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==r(e)}},function(e,t,n){"use strict";n(245);var r=n(64),o=(n(50),n(19)),a=(n(133),n(31)),i=(n(96),n(23)),c=n(0),u=n.n(c),l=n(10),s=n.n(l),f=n(68),d=n(2),p=n.n(d),m=n(845),h=n(650),y=n(370),v=n(38),b="index-module_label_qcR+D",g=function(e){return e.visible?u.a.createElement("span",{className:b},__("空间")):null},_=n(88),w=n(114),E=n.n(w),O=n(907),x=n(17),j=n(549),k=n(1458),S="BookAction-module_wrap_AiMmc";function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=E()("book:action"),M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,r,o=T(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),R(L(t=o.call(this,e)),"doAction",(function(e){e&&t.setState({cmd:e,exportModal:e===x.a.BOOK.export_book.cmd,deleteModal:e===x.a.BOOK.delete_book.cmd})})),R(L(t),"handleCloseDeleteModal",(function(){t.setState({deleteModal:!1})})),t.state={exportModal:!1,deleteModal:!1,cmd:null},t}return t=a,(n=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.className,o=n.book;switch(this.state.cmd){case x.a.BOOK.manage.cmd:window.open("/g/".concat(o.namespace,"/docs"),"_self");break;case x.a.BOOK.catalog_manage.cmd:window.open("/".concat(o.namespace,"/toc"),"_self");break;case x.a.BOOK.manage_assets.cmd:window.open("/".concat(o.namespace,"/assets"),"_self");break;case x.a.BOOK.thread_list.cmd:window.open("/g/".concat(o.namespace,"/docs"),"_self");break;case x.a.BOOK.collaborators.cmd:window.open("/r/".concat(o.namespace,"/collaborators"),"_self");break;case x.a.BOOK.recycles.cmd:window.open("/r/".concat(o.namespace,"/trash"),"_self");break;case x.a.BOOK.statistics.cmd:window.open("/r/".concat(o.namespace,"/statistics"),"_self");break;case x.a.BOOK.settings.cmd:case x.a.BOOK.rename_book.cmd:window.open("/".concat(o.namespace,"/settings/basic"),"_self");break;case x.a.DOC.modify_toc.cmd:window.open("/".concat(o.namespace,"/toc"),"_self");break;default:D("no processor, do nothing, just trigger onSelect and set state")}var a=null==o||null===(e=o.abilities)||void 0===e?void 0:e.destroy;return u.a.createElement("div",{className:"".concat(S," ").concat(r)},void 0,u.a.createElement(O.a,{visible:this.state.exportModal,book:o,formats:j.a.getExportFormats(),onCancel:function(){return t.setState({exportModal:!1,cmd:null})}}),this.state.deleteModal&&a&&u.a.createElement(k.a,{closeModal:this.handleCloseDeleteModal}))}}])&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(u.a.Component);M.defaultProps={className:""},M.propTypes={className:p.a.string,book:p.a.object.isRequired};var F=Object(_.d)((function(e){return{book:e.book,group:e.group}}),null,null,{forwardRef:!0})(M),B=n(167),U=n(295),z={bookTitle:"index-module_bookTitle_lUUrB",name:"index-module_name_OMCDB",group:"index-module_group_xaGsx",text:"index-module_text_UrMgl",checked:"index-module_checked_3fCif",moreActions:"index-module_moreActions_YYACs"},G=["book","width"],V=["group","book","showBookIcon","showPrivateIcon","showOrgLabel","href","target","iconSize","className","draggable","onItemClick","isMobile"],Y=["group","book","showBookIcon","showPrivateIcon","showOrgLabel","callback"];function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}function K(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var $={book:__("文档"),sheet:__("表格"),design:__("图集"),column:__("专栏"),resource:__("资源")},Q={Icon:function(e){var t=e.book,n=e.width,r=void 0===n?24:n,o=K(e,G),a=t.type.toLowerCase(),c=$[a];return u.a.createElement(i.a,{title:c},u.a.createElement(v.b,W({name:U.b.getName("Book",t),style:U.b.getStyle(t),className:"book-icon",width:r},o)))}};Q.Icon.propTypes={book:p.a.object.isRequired,width:p.a.number},Q.AccessScope=function(e){var t=e.size||14,n=e.placement||"top";return e.public===m.PRIVACY.private?u.a.createElement(i.a,{title:__("私密知识库"),getPopupContainer:e.getPopupContainer,placement:n},u.a.createElement("span",{className:"name-lock"},u.a.createElement(v.b,{name:"permission-private",width:t}))):null},Q.AccessScope.propTypes={public:p.a.number,getPopupContainer:p.a.func,size:p.a.number,placement:p.a.string},Q.Link=function(e){var t=e.group,n=e.book,r=e.showBookIcon,o=void 0===r||r,a=e.showPrivateIcon,i=void 0===a||a,c=e.showOrgLabel,l=void 0!==c&&c,f=e.href,d=e.target,p=e.iconSize,m=e.className,h=e.draggable,y=e.onItemClick,v=e.isMobile,b=K(e,V),g=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp?"_blank":"_self";return u.a.createElement("a",{href:f||"/".concat(t.login,"/").concat(n.slug),className:s()("book-link",m),target:d||g,draggable:h,onClick:function(t){y&&(t.preventDefault(),y(e))}},u.a.createElement(Q.Title,W({},b,{group:t,book:n,showBookIcon:o,showPrivateIcon:i,showOrgLabel:l,iconSize:p,isMobile:v})))},Q.Link.propTypes={book:p.a.object,group:p.a.object,showBookIcon:p.a.bool,showOrgLabel:p.a.bool,className:p.a.string,target:p.a.string,showShareBadge:p.a.bool},Q.LinkWithCallback=function(e){var t=e.group,n=e.book,r=e.showBookIcon,o=void 0===r||r,a=e.showPrivateIcon,i=void 0===a||a,c=e.showOrgLabel,l=void 0!==c&&c,s=e.callback,f=K(e,Y);return u.a.createElement(u.a.Fragment,null,s?u.a.createElement("div",{onClick:s},u.a.createElement(Q.Title,{group:t,book:n,showBookIcon:o,showPrivateIcon:i,showOrgLabel:l})):u.a.createElement(Q.Link,W({group:t,book:n,showBookIcon:o,showOrgLabel:l,showPrivateIcon:i},f)))},Q.LinkWithCallback.propTypes={book:p.a.object,group:p.a.object,showPrivateIcon:p.a.bool,showBookIcon:p.a.bool,showOrgLabel:p.a.bool,className:p.a.string,target:p.a.string,callback:p.a.func,showShareBadge:p.a.bool},Q.PremiumIcon=function(e){var t=e.width,n=e.height;return u.a.createElement(i.a,{title:__("付费阅读")},u.a.createElement("a",{style:{display:"inline-block",marginLeft:"8px",verticalAlign:"middle",marginRight:"8px"},href:"https://www.yuque.com/yuque/thyzgp/un97yl",target:"_blank"},u.a.createElement(v.b,{name:"premium",width:t,height:n})))},Q.PremiumIcon.propTypes={width:p.a.number,height:p.a.number},Q.Title=function(e){var t=e.group,n=e.book,r=e.showGroupName,o=void 0!==r&&r,a=e.showBookIcon,i=void 0===a||a,c=e.showPrivateIcon,l=void 0===c||c,f=e.showOrgLabel,d=void 0!==f&&f,p=e.isMobile,m=void 0!==p&&p,h=e.checked,b=void 0!==h&&h,_=e.href,w=e.getPopupContainer,E=e.className,O=e.iconSize||(m?28:24),x=t&&(t.organization||{id:t.organization_id}),j=Object(B.b)({type:"book",target:n,org:x,group:t}).getPrivacyValue(),k=window.appData.me;return m?u.a.createElement("span",{className:s()(z.bookTitle,E)},u.a.createElement("div",{className:s()(z.icon,"book-icon-wrapper")},u.a.createElement(Q.Icon,{group:t,book:n,width:O})),u.a.createElement("div",{className:s()(z.name,"book-title-name")},u.a.createElement("div",{className:s()(z.text,"book-title-text"),title:n.name},n.name),t.name&&u.a.createElement("div",{className:s()(z.group,"book-title-desc")},t.name)),u.a.createElement("div",{className:z.checked},b&&u.a.createElement(y.a,null))):u.a.createElement("span",{className:s()("lark-book-title",E)},i&&u.a.createElement(Q.Icon,{group:t,book:n,width:O}),u.a.createElement("span",{className:"book-name"},o&&u.a.createElement(u.a.Fragment,null,u.a.createElement("span",null,t.name),u.a.createElement("span",{className:"book-name-split"},"/")),_&&u.a.createElement("a",{className:"book-name-text-wrapper",href:_},u.a.createElement("span",{className:"book-name-text",title:n.name},n.name)),!_&&u.a.createElement("span",{className:"book-name-text",title:n.name},n.name),(null==k?void 0:k.isAdmin)&&-1===n.status&&u.a.createElement("span",{className:"book-name-scope"},u.a.createElement(v.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375}})),l&&u.a.createElement("span",{className:"book-name-scope"},u.a.createElement(Q.AccessScope,{public:j,size:13,getPopupContainer:w})),d&&u.a.createElement("span",{className:"book-name-orglabel"},u.a.createElement(g,{visible:t&&t.organization_id>0}))))},Q.Title.propTypes={group:p.a.object,book:p.a.object,iconSize:p.a.number,showBookIcon:p.a.bool,showPrivateIcon:p.a.bool,showOrgLabel:p.a.bool,showGroupName:p.a.bool,isMobile:p.a.bool,checked:p.a.bool,href:p.a.string,getPopupContainer:p.a.func,showShareBadge:p.a.bool},Q.Belong=function(e){var t=e.book,n=e.clickable;return t.user?n?u.a.createElement("a",{href:"/".concat(t.user.login),title:t.user.name,className:"book-belong"},t.user.name):u.a.createElement("span",{className:"book-belong",title:t.user.name},t.user.name):null},Q.Belong.defaultProps={clickable:!0},Q.Belong.propTypes={book:p.a.object,clickable:p.a.bool},Q.Type=function(e){var t=e.type,n=$[(void 0===t?"book":t).toLowerCase()];return u.a.createElement("span",null,n)},Q.Type.propTypes={type:p.a.string},Q.NavMore=function(e){var t=Object(c.useRef)(null),n=q(Object(c.useState)(!1),2),r=n[0],o=n[1],i=e.book,l=e.group,s=e.me,f=j.a.actionsForNavMore(i,l,s).filter((function(e){return e.can||"divider"===e.action.cmd}));return f.length?u.a.createElement(u.a.Fragment,null,u.a.createElement(h.a,{className:z.moreActions,visible:r,onVisibleChange:function(e){return o(e)},direction:"circle",iconWidth:20,content:u.a.createElement(a.a,{selectable:!1},f.map((function(e){return"divider"===e.action.cmd?u.a.createElement(a.a.Divider,null):u.a.createElement(a.a.Item,{disabled:!1===e.can,key:e.action.cmd,onClick:function(){t.current.doAction(e.action.cmd),o(!1)}},e.action.title)})))}),u.a.createElement(F,{ref:t})):null},Q.NavMore.propTypes={book:p.a.object.isRequired,styles:p.a.object.isRequired,group:p.a.object.isRequired,me:p.a.object},Q.NavManage=function(e){var t=e.book,n=e.group;if(!t.abilities.create_doc)return null;var r="".concat(n.login,"/").concat(t.slug),a={id:"manage",url:"Design"===t.type?"/".concat(r,"/assets"):"/g/".concat(r,"/docs"),title:__("管理{type}",{type:function(){switch(t.type){case"Design":return __("源文件");case"Sheet":return __("表格");default:return __("文档")}}()})};return u.a.createElement(o.a,{title:a.title},u.a.createElement(f.Link,{to:a.url},a.title))},Q.NavManage.propTypes={group:p.a.object,book:p.a.object},Q.Commands={export_pdf:{title:__("导出 PDF"),cmd:"export_pdf",icon:""},settings:{title:__("设置"),cmd:"settings",icon:""},delete:{title:__("删除"),cmd:"delete",icon:""},move:{title:__("转移"),cmd:"move",icon:""},share:{title:__("分享"),cmd:"share",icon:""}},Q.FormPlaceholder=function(e,t){switch(e){case"Design":return"name"===t?__("如：语雀视觉设计"):__("如：视觉设计与规范");case"Sheet":return"name"===t?__("如：研发计划"):__("如：第一季度研发计划");case"Column":return"name"===t?__("如：团队专栏"):__("如：团队设计分享");case"Resource":return"name"===t?__("资源知识库"):__("上传资源文件、本地文档等内容");default:return"name"===t?__("如：产品文档"):__("如：产品设计与研发")}},Q.DocumentsAmount=function(e){var t=e.type,n=e.amount,r=e.className,o={doc:__("共 {amount} 个文档",{amount:n}),sheet:__("共 {amount} 个表格",{amount:n})};return u.a.createElement("span",{className:r||""},o[t.toLowerCase()]||o.doc)};var X=function(e){var t=e.belongs,n=e.onChange,o=__("归属");if(!t||t.length<=1)return u.a.createElement("span",null,o);return u.a.createElement(r.a,{trigger:["click"],overlay:u.a.createElement(a.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},t.map((function(e,t){return u.a.createElement(a.a.Item,{key:e.type},u.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),function(e){n(e.type)}(e)}},e.text))})))},u.a.createElement("span",null,o,u.a.createElement(v.b,{name:"down",width:16})))};X.propTypes={belongs:p.a.array.isRequired,onChange:p.a.func.isRequired},Q.BelongMenu=X;t.a=Q},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n(448),o=n.n(r),a=o()(window.appData&&window.appData.defaultSpaceHost).host;a=a.split(".").slice(-2).join(".");var i={relocate:function(e,t){t?setTimeout((function(){window.location.href=i.normalize(e)}),t):window.location.href=i.normalize(e)},normalize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=o()(e).host||"";if(t){if(t===window.location.host)return e;if(t===a)return e;if(!t.endsWith(a))return"/";var n=t.slice(0,-a.length);return/^[.a-zA-Z0-9_-]+\.$/.test(n)?e:"/"}return"/"!==e[0]&&(e="/".concat(e)),e}},c=(i.normalize,i.relocate);function u(){var e=window.location.hash,t=decodeURIComponent(e.split("#")[1]),n=document.getElementById(t);n&&n.scrollIntoView()}},,,function(e,t){function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.formatOne=function(e){var t=e;return t.user&&(t=a(a({},e),e.user)),t.uid||(t.work_id?e.uid="".concat(t.work_id):t.id?e.uid="".concat(t.id):t.provider_type&&t.provider_userid&&(e.uid="".concat(t.provider_type,"_").concat(t.provider_userid))),e},t.format=function(e){var r,o=n(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.formatOne(a)}}catch(i){o.e(i)}finally{o.f()}return e}},function(e,t,n){var r=n(1010),o=n(2173),a=Object.prototype.hasOwnProperty,i=o((function(e,t,n){a.call(e,n)?e[n].push(t):r(e,n,[t])}));e.exports=i},,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){switch(t.type){case"init":return{response:null,error:null,loading:!0};case"success":return{response:t.response,error:null,loading:!1};case"error":return{response:null,error:t.error,loading:!1};default:return{response:null,error:null,loading:!1}}}function c(e){var t=Object(r.useRef)(0),n=o(Object(r.useReducer)(i,{response:null,loading:!1,error:null}),2),a=n[0],c=n[1];return{data:a.response,loading:a.loading,request:function(n,r){var o=++t.current;return c({type:"init"}),e(n,r).then((function(e){return o===t.current&&c({type:"success",response:e}),e})).catch((function(e){if(c({type:"error",error:e}),null!=r&&r.ignoreGlobalMessage)throw e;console.error(e)}))},error:a.error}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.convertFieldsError=i,t.format=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,o=t[0],i=t.length;if("function"==typeof o)return o.apply(null,t.slice(1));if("string"==typeof o){for(var c=String(o).replace(a,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(n){return"[Circular]"}break;default:return e}})),u=t[r];r<i;u=t[++r])c+=" "+u;return c}return o},t.isEmptyValue=function(e,t){if(null==e)return!0;if("array"===t&&Array.isArray(e)&&!e.length)return!0;if(function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}(t)&&"string"==typeof e&&!e)return!0;return!1},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.asyncMap=function(e,t,n,r){if(t.first){var o=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e);return c(o,n,r)}var a=t.firstFields||[];!0===a&&(a=Object.keys(e));var u=Object.keys(e),l=u.length,s=0,f=[],d=new Promise((function(t,o){var d=function(e){if(f.push.apply(f,e),++s===l)return r(f),f.length?o({errors:f,fields:i(f)}):t()};u.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?c(r,n,d):function(e,t,n){var r=[],o=0,a=e.length;function i(e){r.push.apply(r,e),++o===a&&n(r)}e.forEach((function(e){t(e,i)}))}(r,n,d)}))}));return d.catch((function(e){return e})),d},t.complementError=function(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}},t.deepMerge=function(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];"object"===(void 0===a?"undefined":o(a))&&"object"===o(e[n])?e[n]=r({},e[n],a):e[n]=a}return e};var a=/%[sdj%]/g;t.warning=function(){};function i(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function c(e,t,n){var r=0,o=e.length;!function a(i){if(i&&i.length)n(i);else{var c=r;r+=1,c<o?t(e[c],a):n([])}}([])}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r={UPDATE_PAGE_DATA:"page/update-page-data",RESET_PAGE_DATA:"page/reset-page-data",SWITCH_TO_NOTE_TAB:"page/switch-to-note",SCROLL_TO_TOP:"page/scroll-to-top",UPDATE_DOC_DATA:"page/update-doc-data"},o={UPDATE_RECENT_LIST:"global/update-recent-list",UPDATE_NOTES_LIST:"global/update-notes-list",UPDATE_MY_BOOKS_LIST:"global/update-my-books-list",UPDATE_COLLAB_BOOKS_LIST:"global/update-collab-books-list",UPDATE_GROUPS_LIST:"global/update-groups-list",UPDATE_NOTIFICATION_LIST:"global/update-notification-list",UPDATE_NOTIFICATION_CHANNELS:"global/update-notification-channels",UPDATE_HEADLINES_EVENTS:"global/update-headlines-events",UPDATE_MY_EVENTS:"global/update-my-events",PUBLISH_NOTE:"global/publish-note"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return E}));n(60);var r=n(24),o=n(5),a=n(34);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f,d=[],p=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])+/g,m=/^\s*$/;function h(e){Object(o.a)("/api/logs/digest",{method:"POST",body:JSON.stringify(l({traceId:window.appData.traceId,type:"AutoTranslate",resource:"/api/services/translate/text"},e))}).catch((function(e){return{}}))}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.a.service.translate.image(l({url:e.src},t))}function v(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){var t=e.parentNode.tagName.toLowerCase();return!(["code","pre"].includes(t)||"a"===t&&e.nodeValue.startsWith("@")||m.test(e.nodeValue))}},null)}function b(e){return e&&e.nodeType===Node.ELEMENT_NODE&&!!e.innerHTML&&["a","u","strong","em","del","span","code"].includes(e.tagName.toLowerCase())}function g(e,t){var n=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=v(e[n]),o=r.nextNode();o;)t.push(o.nodeValue),o=r.nextNode();return t}(e);if(f=null,d=[],n.length>0){var o=Date.now();(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.a.service.translate.text(l({srcTextList:e,srcLanguage:"zh",tgtLanguage:"en"},t),{useOriginResp:!0})})(n,t).then((function(t){h({rt:Date.now()-o,success:200===t.code,message:200!==t.code?JSON.stringify(t):""}),200===t.code?requestAnimationFrame((function(){return function(e,t){for(var n=0,r=0;r<e.length;r++)for(var o=v(e[r]),a=o.nextNode();a;){var i=b(a.previousSibling)?" ":"",c=b(a.nextSibling)?" ":"";a.nodeValue=i+t[n++]+c,a=o.nextNode()}}(e,t.data)})):r.a.warn(t.data.message)}),(function(e){h({rt:Date.now()-o,success:!1,message:e.message})}))}}function _(e,t){!function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n].querySelectorAll('[data-lake-card="image"] img, [data-card-name="image"] img'),o=function(e){var n=r[e];y(n,t).then((function(e){e.result&&(n.src=e.result,n.dataset.overrideSrc=e.result)}))},a=0;a<r.length;a++)o(a)}(e,t),g(e,t)}var w=["codeblock","yuque","video","youku","lockedtext"];function E(e){var t,n=0;for(p.lastIndex=0;null!=(t=p.exec(e));)if((n+=t[0].length)/e.length>.2)return"zh";return"auto"}t.a=function(e,t){if(t.srcLanguage!==t.tgtLanguage){if("IntersectionObserver"in window){var n,r=new IntersectionObserver((function(e,n){for(var r=0;r<e.length;r++){var o=e[r];if(o.intersectionRatio>0){var a=o.target;a.dataset.hasOwnProperty("translated")?n.unobserve(a):(a.dataset.translated=1,d.push(a))}}d.length>0&&!f&&(f=setTimeout((function(){return _(d,t)}),200))}),{threshold:.1}),o=i(document.querySelectorAll(e));try{for(o.s();!(n=o.n()).done;){var a=n.value;"NE-HOLE"===a.tagName&&w.includes(a.firstChild.dataset.cardName)||r.observe(a)}}catch(c){o.e(c)}finally{o.f()}}}}},,,,function(e,t,n){"use strict";e.exports={STATUS:{invited:0,joined:1,applying:2,terminated:-1,blocked:-2},ROLE:{owner:0,member:1,readonly:2}}},,function(e,t,n){"use strict";n(162)},,,function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(28),c=n(41),u=n(55),l=n(11),s=n(10),f=n.n(s),d=n(197),p=n(847),m=n(163),h=n(40),y=n(119),v=n(296);function b(e){var t=Object(a.useRef)(),n=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return function(){n.current=!0,y.a.cancel(t.current)}}),[]),function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];n.current||(y.a.cancel(t.current),t.current=Object(y.a)((function(){e.apply(void 0,o)})))}}var g=n(70);function _(e,t){var n,r=e.prefixCls,i=e.id,c=e.active,u=e.rtl,l=e.tab,s=l.key,d=l.tab,p=l.disabled,m=l.closeIcon,h=e.tabBarGutter,y=e.tabPosition,v=e.closable,b=e.renderWrapper,_=e.removeAriaLabel,w=e.editable,E=e.onClick,O=e.onRemove,x=e.onFocus,j="".concat(r,"-tab");a.useEffect((function(){return O}),[]);var k={};"top"===y||"bottom"===y?k[u?"marginRight":"marginLeft"]=h:k.marginTop=h;var S=w&&!1!==v&&!p;function C(e){p||E(e)}var N=a.createElement("div",{key:s,ref:t,className:f()(j,(n={},Object(o.a)(n,"".concat(j,"-with-remove"),S),Object(o.a)(n,"".concat(j,"-active"),c),Object(o.a)(n,"".concat(j,"-disabled"),p),n)),style:k,onClick:C},a.createElement("div",{role:"tab","aria-selected":c,id:i&&"".concat(i,"-tab-").concat(s),className:"".concat(j,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(s),"aria-disabled":p,tabIndex:p?null:0,onClick:function(e){e.stopPropagation(),C(e)},onKeyDown:function(e){[g.a.SPACE,g.a.ENTER].includes(e.which)&&(e.preventDefault(),C(e))},onFocus:x},d),S&&a.createElement("button",{type:"button","aria-label":_||"remove",tabIndex:0,className:"".concat(j,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),w.onEdit("remove",{key:s,event:t})}},m||w.removeIcon||"×"));return b&&(N=b(N)),N}var w=a.forwardRef(_),E={width:0,height:0,left:0,top:0};var O={width:0,height:0,left:0,top:0,right:0};var x=n(297),j=n.n(x),k=n(85),S=n(403),C=n(57),N=n(58),P=n(66),T=n(72),A=n(126),L=n(399),I=["children","locked"],R=a.createContext(null);function D(e){var t=e.children,n=e.locked,r=Object(u.a)(e,I),o=a.useContext(R),i=Object(L.a)((function(){return e=o,t=r,n=Object(l.a)({},e),Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n;var e,t,n}),[o,r],(function(e,t){return!(n||e[0]===t[0]&&j()(e[1],t[1]))}));return a.createElement(R.Provider,{value:i},t)}function M(e,t,n,r){var o=a.useContext(R),i=o.activeKey,c=o.onActive,u=o.onInactive,l={active:i===e};return t||(l.onMouseEnter=function(t){null==n||n({key:e,domEvent:t}),c(e)},l.onMouseLeave=function(t){null==r||r({key:e,domEvent:t}),u(e)}),l}var F=["item"];function B(e){var t=e.item,n=Object(u.a)(e,F);return Object.defineProperty(n,"item",{get:function(){return Object(k.a)(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function U(e){var t=e.icon,n=e.props,r=e.children;return("function"==typeof t?a.createElement(t,Object(l.a)({},n)):t)||r||null}function z(e){var t=a.useContext(R),n=t.mode,r=t.rtl,o=t.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:e*o}:{paddingLeft:e*o}}var G=[],V=a.createContext(null);function Y(){return a.useContext(V)}var q=a.createContext(G);function H(e){var t=a.useContext(q);return a.useMemo((function(){return void 0!==e?[].concat(Object(h.a)(t),[e]):t}),[t,e])}var W=a.createContext(null),K=a.createContext(null);function $(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function Q(e){return $(a.useContext(K),e)}var X=a.createContext({}),J=["title","attribute","elementRef"],Z=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],ee=["active"],te=function(e){Object(P.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,o=e.elementRef,i=Object(u.a)(e,J),c=Object(A.a)(i,["eventKey"]);return Object(k.a)(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),a.createElement(S.a.Item,Object(r.default)({},n,{title:"string"==typeof t?t:void 0},c,{ref:o}))}}]),n}(a.Component),ne=function(e){var t,n=e.style,i=e.className,c=e.eventKey,s=(e.warnKey,e.disabled),d=e.itemIcon,p=e.children,m=e.role,y=e.onMouseEnter,v=e.onMouseLeave,b=e.onClick,_=e.onKeyDown,w=e.onFocus,E=Object(u.a)(e,Z),O=Q(c),x=a.useContext(R),j=x.prefixCls,k=x.onItemClick,S=x.disabled,C=x.overflowDisabled,N=x.itemIcon,P=x.selectedKeys,T=x.onActive,A=a.useContext(X)._internalRenderMenuItem,L="".concat(j,"-item"),I=a.useRef(),D=a.useRef(),F=S||s,G=H(c);var V=function(e){return{key:c,keyPath:Object(h.a)(G).reverse(),item:I.current,domEvent:e}},Y=d||N,q=M(c,F,y,v),W=q.active,K=Object(u.a)(q,ee),$=P.includes(c),J=z(G.length),ne={};"option"===e.role&&(ne["aria-selected"]=$);var re=a.createElement(te,Object(r.default)({ref:I,elementRef:D,role:null===m?"none":m||"menuitem",tabIndex:s?null:-1,"data-menu-id":C&&O?null:O},E,K,ne,{component:"li","aria-disabled":s,style:Object(l.a)(Object(l.a)({},J),n),className:f()(L,(t={},Object(o.a)(t,"".concat(L,"-active"),W),Object(o.a)(t,"".concat(L,"-selected"),$),Object(o.a)(t,"".concat(L,"-disabled"),F),t),i),onClick:function(e){if(!F){var t=V(e);null==b||b(B(t)),k(t)}},onKeyDown:function(e){if(null==_||_(e),e.which===g.a.ENTER){var t=V(e);null==b||b(B(t)),k(t)}},onFocus:function(e){T(c),null==w||w(e)}}),p,a.createElement(U,{props:Object(l.a)(Object(l.a)({},e),{},{isSelected:$}),icon:Y}));return A&&(re=A(re,e,{selected:$})),re};var re=function(e){var t=e.eventKey,n=Y(),r=H(t);return a.useEffect((function(){if(n)return n.registerPath(t,r),function(){n.unregisterPath(t,r)}}),[r]),n?null:a.createElement(ne,e)},oe=["label","children","key","type"];function ae(e,t){return Object(d.a)(e).map((function(e,n){if(a.isValidElement(e)){var r,o,i=e.key,c=null!==(r=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==r?r:i;null==c&&(c="tmp_key-".concat([].concat(Object(h.a)(t),[n]).join("-")));var u={key:c,eventKey:c};return a.cloneElement(e,u)}return e}))}function ie(e){return(e||[]).map((function(e,t){if(e&&"object"===Object(c.a)(e)){var n=e.label,o=e.children,i=e.key,l=e.type,s=Object(u.a)(e,oe),f=null!=i?i:"tmp-".concat(t);return o||"group"===l?"group"===l?a.createElement(Qe,Object(r.default)({key:f},s,{title:n}),ie(o)):a.createElement(je,Object(r.default)({key:f},s,{title:n}),ie(o)):"divider"===l?a.createElement(Xe,Object(r.default)({key:f},s)):a.createElement(re,Object(r.default)({key:f},s),n)}return null})).filter((function(e){return e}))}function ce(e,t,n){var r=e;return t&&(r=ie(t)),ae(r,n)}function ue(e){var t=a.useRef(e);t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var le=["className","children"],se=function(e,t){var n=e.className,o=e.children,i=Object(u.a)(e,le),c=a.useContext(R),l=c.prefixCls,s=c.mode,d=c.rtl;return a.createElement("ul",Object(r.default)({className:f()(l,d&&"".concat(l,"-rtl"),"".concat(l,"-sub"),"".concat(l,"-").concat("inline"===s?"inline":"vertical"),n)},i,{"data-menu-list":!0,ref:t}),o)},fe=a.forwardRef(se);fe.displayName="SubMenuList";var de=fe,pe=n(402),me={adjustX:1,adjustY:1},he={topLeft:{points:["bl","tl"],overflow:me,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:me,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:me,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:me,offset:[4,0]}},ye={topLeft:{points:["bl","tl"],overflow:me,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:me,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:me,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:me,offset:[4,0]}};function ve(e,t,n){return t||(n?n[e]||n.other:void 0)}var be={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function ge(e){var t=e.prefixCls,n=e.visible,r=e.children,c=e.popup,u=e.popupClassName,s=e.popupOffset,d=e.disabled,p=e.mode,m=e.onVisibleChange,h=a.useContext(R),v=h.getPopupContainer,b=h.rtl,g=h.subMenuOpenDelay,_=h.subMenuCloseDelay,w=h.builtinPlacements,E=h.triggerSubMenuAction,O=h.forceSubMenuRender,x=h.rootClassName,j=h.motion,k=h.defaultMotions,S=a.useState(!1),C=Object(i.a)(S,2),N=C[0],P=C[1],T=b?Object(l.a)(Object(l.a)({},ye),w):Object(l.a)(Object(l.a)({},he),w),A=be[p],L=ve(p,j,k),I=Object(l.a)(Object(l.a)({},L),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),D=a.useRef();return a.useEffect((function(){return D.current=Object(y.a)((function(){P(n)})),function(){y.a.cancel(D.current)}}),[n]),a.createElement(pe.a,{prefixCls:t,popupClassName:f()("".concat(t,"-popup"),Object(o.a)({},"".concat(t,"-rtl"),b),u,x),stretch:"horizontal"===p?"minWidth":null,getPopupContainer:v,builtinPlacements:T,popupPlacement:A,popupVisible:N,popup:c,popupAlign:s&&{offset:s},action:d?[]:[E],mouseEnterDelay:g,mouseLeaveDelay:_,onPopupVisibleChange:m,forceRender:O,popupMotion:I},r)}var _e=n(228);function we(e){var t=e.id,n=e.open,o=e.keyPath,c=e.children,u="inline",s=a.useContext(R),f=s.prefixCls,d=s.forceSubMenuRender,p=s.motion,m=s.defaultMotions,h=s.mode,y=a.useRef(!1);y.current=h===u;var v=a.useState(!y.current),b=Object(i.a)(v,2),g=b[0],_=b[1],w=!!y.current&&n;a.useEffect((function(){y.current&&_(!1)}),[h]);var E=Object(l.a)({},ve(u,p,m));o.length>1&&(E.motionAppear=!1);var O=E.onVisibleChanged;return E.onVisibleChanged=function(e){return y.current||e||_(!0),null==O?void 0:O(e)},g?null:a.createElement(D,{mode:u,locked:!y.current},a.createElement(_e.b,Object(r.default)({visible:w},E,{forceRender:d,removeOnLeave:!1,leavedClassName:"".concat(f,"-hidden")}),(function(e){var n=e.className,r=e.style;return a.createElement(de,{id:t,className:n,style:r},c)})))}var Ee=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Oe=["active"],xe=function(e){var t,n=e.style,c=e.className,s=e.title,d=e.eventKey,p=(e.warnKey,e.disabled),m=e.internalPopupClose,h=e.children,y=e.itemIcon,v=e.expandIcon,b=e.popupClassName,g=e.popupOffset,_=e.onClick,w=e.onMouseEnter,E=e.onMouseLeave,O=e.onTitleClick,x=e.onTitleMouseEnter,j=e.onTitleMouseLeave,k=Object(u.a)(e,Ee),C=Q(d),N=a.useContext(R),P=N.prefixCls,T=N.mode,A=N.openKeys,L=N.disabled,I=N.overflowDisabled,F=N.activeKey,G=N.selectedKeys,V=N.itemIcon,Y=N.expandIcon,q=N.onItemClick,K=N.onOpenChange,$=N.onActive,J=a.useContext(X)._internalRenderSubMenuItem,Z=a.useContext(W).isSubPathKey,ee=H(),te="".concat(P,"-submenu"),ne=L||p,re=a.useRef(),oe=a.useRef();var ae=y||V,ie=v||Y,ce=A.includes(d),le=!I&&ce,se=Z(G,d),fe=M(d,ne,x,j),pe=fe.active,me=Object(u.a)(fe,Oe),he=a.useState(!1),ye=Object(i.a)(he,2),ve=ye[0],be=ye[1],_e=function(e){ne||be(e)},xe=a.useMemo((function(){return pe||"inline"!==T&&(ve||Z([F],d))}),[T,pe,F,ve,d,Z]),je=z(ee.length),ke=ue((function(e){null==_||_(B(e)),q(e)})),Se=C&&"".concat(C,"-popup"),Ce=a.createElement("div",Object(r.default)({role:"menuitem",style:je,className:"".concat(te,"-title"),tabIndex:ne?null:-1,ref:re,title:"string"==typeof s?s:null,"data-menu-id":I&&C?null:C,"aria-expanded":le,"aria-haspopup":!0,"aria-controls":Se,"aria-disabled":ne,onClick:function(e){ne||(null==O||O({key:d,domEvent:e}),"inline"===T&&K(d,!ce))},onFocus:function(){$(d)}},me),s,a.createElement(U,{icon:"horizontal"!==T?ie:null,props:Object(l.a)(Object(l.a)({},e),{},{isOpen:le,isSubMenu:!0})},a.createElement("i",{className:"".concat(te,"-arrow")}))),Ne=a.useRef(T);if("inline"!==T&&(Ne.current=ee.length>1?"vertical":T),!I){var Pe=Ne.current;Ce=a.createElement(ge,{mode:Pe,prefixCls:te,visible:!m&&le&&"inline"!==T,popupClassName:b,popupOffset:g,popup:a.createElement(D,{mode:"horizontal"===Pe?"vertical":Pe},a.createElement(de,{id:Se,ref:oe},h)),disabled:ne,onVisibleChange:function(e){"inline"!==T&&K(d,e)}},Ce)}var Te=a.createElement(S.a.Item,Object(r.default)({role:"none"},k,{component:"li",style:n,className:f()(te,"".concat(te,"-").concat(T),c,(t={},Object(o.a)(t,"".concat(te,"-open"),le),Object(o.a)(t,"".concat(te,"-active"),xe),Object(o.a)(t,"".concat(te,"-selected"),se),Object(o.a)(t,"".concat(te,"-disabled"),ne),t)),onMouseEnter:function(e){_e(!0),null==w||w({key:d,domEvent:e})},onMouseLeave:function(e){_e(!1),null==E||E({key:d,domEvent:e})}}),Ce,!I&&a.createElement(we,{id:Se,open:le,keyPath:ee},h));return J&&(Te=J(Te,e,{selected:se,active:xe,open:le,disabled:ne})),a.createElement(D,{onItemClick:ke,mode:"horizontal"===T?"vertical":T,itemIcon:ae,expandIcon:ie},Te)};function je(e){var t,n=e.eventKey,r=e.children,o=H(n),i=ae(r,o),c=Y();return a.useEffect((function(){if(c)return c.registerPath(n,o),function(){c.unregisterPath(n,o)}}),[o]),t=c?i:a.createElement(xe,e,i),a.createElement(q.Provider,{value:o},t)}var ke=n(1334),Se=g.a.LEFT,Ce=g.a.RIGHT,Ne=g.a.UP,Pe=g.a.DOWN,Te=g.a.ENTER,Ae=g.a.ESC,Le=g.a.HOME,Ie=g.a.END,Re=[Ne,Pe,Se,Ce];function De(e,t){return Object(ke.a)(e,!0).filter((function(e){return t.has(e)}))}function Me(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var o=De(e,t),a=o.length,i=o.findIndex((function(e){return n===e}));return r<0?-1===i?i=a-1:i-=1:r>0&&(i+=1),o[i=(i+a)%a]}function Fe(e,t,n,r,i,c,u,l,s,f){var d=a.useRef(),p=a.useRef();p.current=t;var m=function(){y.a.cancel(d.current)};return a.useEffect((function(){return function(){m()}}),[]),function(a){var h=a.which;if([].concat(Re,[Te,Ae,Le,Ie]).includes(h)){var v,b,g,_=function(){return v=new Set,b=new Map,g=new Map,c().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat($(r,e),"']"));t&&(v.add(t),g.set(t,e),b.set(e,t))})),v};_();var w=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(b.get(t),v),E=g.get(w),O=function(e,t,n,r){var a,i,c,u,l="prev",s="next",f="children",d="parent";if("inline"===e&&r===Te)return{inlineTrigger:!0};var p=(a={},Object(o.a)(a,Ne,l),Object(o.a)(a,Pe,s),a),m=(i={},Object(o.a)(i,Se,n?s:l),Object(o.a)(i,Ce,n?l:s),Object(o.a)(i,Pe,f),Object(o.a)(i,Te,f),i),h=(c={},Object(o.a)(c,Ne,l),Object(o.a)(c,Pe,s),Object(o.a)(c,Te,f),Object(o.a)(c,Ae,d),Object(o.a)(c,Se,n?f:d),Object(o.a)(c,Ce,n?d:f),c);switch(null===(u={inline:p,horizontal:m,vertical:h,inlineSub:p,horizontalSub:h,verticalSub:h}["".concat(e).concat(t?"":"Sub")])||void 0===u?void 0:u[r]){case l:return{offset:-1,sibling:!0};case s:return{offset:1,sibling:!0};case d:return{offset:-1,sibling:!1};case f:return{offset:1,sibling:!1};default:return null}}(e,1===u(E,!0).length,n,h);if(!O&&h!==Le&&h!==Ie)return;(Re.includes(h)||[Le,Ie].includes(h))&&a.preventDefault();var x=function(e){if(e){var t=e,n=e.querySelector("a");(null==n?void 0:n.getAttribute("href"))&&(t=n);var r=g.get(e);l(r),m(),d.current=Object(y.a)((function(){p.current===r&&t.focus()}))}};if([Le,Ie].includes(h)||O.sibling||!w){var j,k,S=De(j=w&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(w):i.current,v);k=h===Le?S[0]:h===Ie?S[S.length-1]:Me(j,v,w,O.offset),x(k)}else if(O.inlineTrigger)s(E);else if(O.offset>0)s(E,!0),m(),d.current=Object(y.a)((function(){_();var e=w.getAttribute("aria-controls"),t=Me(document.getElementById(e),v);x(t)}),5);else if(O.offset<0){var C=u(E,!0),N=C[C.length-2],P=b.get(N);s(N,!1),x(P)}}null==f||f(a)}}var Be=Math.random().toFixed(5).toString().slice(2),Ue=0;var ze="__RC_UTIL_PATH_SPLIT__",Ge=function(e){return e.join(ze)},Ve="rc-menu-more";function Ye(){var e=a.useState({}),t=Object(i.a)(e,2)[1],n=Object(a.useRef)(new Map),r=Object(a.useRef)(new Map),o=a.useState([]),c=Object(i.a)(o,2),u=c[0],l=c[1],s=Object(a.useRef)(0),f=Object(a.useRef)(!1),d=Object(a.useCallback)((function(e,o){var a=Ge(o);r.current.set(a,e),n.current.set(e,a),s.current+=1;var i,c=s.current;i=function(){c===s.current&&(f.current||t({}))},Promise.resolve().then(i)}),[]),p=Object(a.useCallback)((function(e,t){var o=Ge(t);r.current.delete(o),n.current.delete(e)}),[]),m=Object(a.useCallback)((function(e){l(e)}),[]),y=Object(a.useCallback)((function(e,t){var r=n.current.get(e)||"",o=r.split(ze);return t&&u.includes(o[0])&&o.unshift(Ve),o}),[u]),v=Object(a.useCallback)((function(e,t){return e.some((function(e){return y(e,!0).includes(t)}))}),[y]),b=Object(a.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(ze),o=new Set;return Object(h.a)(r.current.keys()).forEach((function(e){e.startsWith(t)&&o.add(r.current.get(e))})),o}),[]);return a.useEffect((function(){return function(){f.current=!0}}),[]),{registerPath:d,unregisterPath:p,refreshOverflowKeys:m,isSubPathKey:v,getKeyPath:y,getKeys:function(){var e=Object(h.a)(n.current.keys());return u.length&&e.push(Ve),e},getSubPathKeys:b}}var qe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],He=[],We=["className","title","eventKey","children"],Ke=["children"],$e=function(e){var t=e.className,n=e.title,o=(e.eventKey,e.children),i=Object(u.a)(e,We),c=a.useContext(R).prefixCls,l="".concat(c,"-item-group");return a.createElement("li",Object(r.default)({},i,{onClick:function(e){return e.stopPropagation()},className:f()(l,t)}),a.createElement("div",{className:"".concat(l,"-title"),title:"string"==typeof n?n:void 0},n),a.createElement("ul",{className:"".concat(l,"-list")},o))};function Qe(e){var t=e.children,n=Object(u.a)(e,Ke),r=ae(t,H(n.eventKey));return Y()?r:a.createElement($e,Object(A.a)(n,["warnKey"]),r)}function Xe(e){var t=e.className,n=e.style,r=a.useContext(R).prefixCls;return Y()?null:a.createElement("li",{className:f()("".concat(r,"-item-divider"),t),style:n})}var Je=a.forwardRef((function(e,t){var n,c,s=e.prefixCls,d=void 0===s?"rc-menu":s,p=e.rootClassName,y=e.style,v=e.className,b=e.tabIndex,g=void 0===b?0:b,_=e.items,w=e.children,E=e.direction,O=e.id,x=e.mode,k=void 0===x?"vertical":x,C=e.inlineCollapsed,N=e.disabled,P=e.disabledOverflow,T=e.subMenuOpenDelay,A=void 0===T?.1:T,L=e.subMenuCloseDelay,I=void 0===L?.1:L,R=e.forceSubMenuRender,M=e.defaultOpenKeys,F=e.openKeys,U=e.activeKey,z=e.defaultActiveFirst,G=e.selectable,Y=void 0===G||G,q=e.multiple,H=void 0!==q&&q,Q=e.defaultSelectedKeys,J=e.selectedKeys,Z=e.onSelect,ee=e.onDeselect,te=e.inlineIndent,ne=void 0===te?24:te,oe=e.motion,ae=e.defaultMotions,ie=e.triggerSubMenuAction,le=void 0===ie?"hover":ie,se=e.builtinPlacements,fe=e.itemIcon,de=e.expandIcon,pe=e.overflowedIndicator,me=void 0===pe?"...":pe,he=e.overflowedIndicatorPopupClassName,ye=e.getPopupContainer,ve=e.onClick,be=e.onOpenChange,ge=e.onKeyDown,_e=(e.openAnimation,e.openTransitionName,e._internalRenderMenuItem),we=e._internalRenderSubMenuItem,Ee=Object(u.a)(e,qe),Oe=a.useMemo((function(){return ce(w,_,He)}),[w,_]),xe=a.useState(!1),ke=Object(i.a)(xe,2),Se=ke[0],Ce=ke[1],Ne=a.useRef(),Pe=function(e){var t=Object(m.a)(e,{value:e}),n=Object(i.a)(t,2),r=n[0],o=n[1];return a.useEffect((function(){Ue+=1;var e="".concat(Be,"-").concat(Ue);o("rc-menu-uuid-".concat(e))}),[]),r}(O),Te="rtl"===E;var Ae=a.useMemo((function(){return"inline"!==k&&"vertical"!==k||!C?[k,!1]:["vertical",C]}),[k,C]),Le=Object(i.a)(Ae,2),Ie=Le[0],Re=Le[1],De=a.useState(0),Me=Object(i.a)(De,2),ze=Me[0],Ge=Me[1],We=ze>=Oe.length-1||"horizontal"!==Ie||P,Ke=Object(m.a)(M,{value:F,postState:function(e){return e||He}}),$e=Object(i.a)(Ke,2),Qe=$e[0],Xe=$e[1],Je=function(e){Xe(e),null==be||be(e)},Ze=a.useState(Qe),et=Object(i.a)(Ze,2),tt=et[0],nt=et[1],rt="inline"===Ie,ot=a.useRef(!1);a.useEffect((function(){rt&&nt(Qe)}),[Qe]),a.useEffect((function(){ot.current&&(rt?Xe(tt):Je(He))}),[rt]),a.useEffect((function(){return ot.current=!0,function(){ot.current=!1}}),[]);var at=Ye(),it=at.registerPath,ct=at.unregisterPath,ut=at.refreshOverflowKeys,lt=at.isSubPathKey,st=at.getKeyPath,ft=at.getKeys,dt=at.getSubPathKeys,pt=a.useMemo((function(){return{registerPath:it,unregisterPath:ct}}),[it,ct]),mt=a.useMemo((function(){return{isSubPathKey:lt}}),[lt]);a.useEffect((function(){ut(We?He:Oe.slice(ze+1).map((function(e){return e.key})))}),[ze,We]);var ht=Object(m.a)(U||z&&(null===(n=Oe[0])||void 0===n?void 0:n.key),{value:U}),yt=Object(i.a)(ht,2),vt=yt[0],bt=yt[1],gt=ue((function(e){bt(e)})),_t=ue((function(){bt(void 0)}));Object(a.useImperativeHandle)(t,(function(){return{list:Ne.current,focus:function(e){var t,n,r,o,a=null!=vt?vt:null===(t=Oe.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;a&&(null===(n=Ne.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat($(Pe,a),"']")))||void 0===r||null===(o=r.focus)||void 0===o||o.call(r,e))}}}));var wt=Object(m.a)(Q||[],{value:J,postState:function(e){return Array.isArray(e)?e:null==e?He:[e]}}),Et=Object(i.a)(wt,2),Ot=Et[0],xt=Et[1],jt=ue((function(e){null==ve||ve(B(e)),function(e){if(Y){var t,n=e.key,r=Ot.includes(n);t=H?r?Ot.filter((function(e){return e!==n})):[].concat(Object(h.a)(Ot),[n]):[n],xt(t);var o=Object(l.a)(Object(l.a)({},e),{},{selectedKeys:t});r?null==ee||ee(o):null==Z||Z(o)}!H&&Qe.length&&"inline"!==Ie&&Je(He)}(e)})),kt=ue((function(e,t){var n=Qe.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Ie){var r=dt(e);n=n.filter((function(e){return!r.has(e)}))}j()(Qe,n)||Je(n)})),St=ue(ye),Ct=Fe(Ie,vt,Te,Pe,Ne,ft,st,bt,(function(e,t){var n=null!=t?t:!Qe.includes(e);kt(e,n)}),ge);a.useEffect((function(){Ce(!0)}),[]);var Nt=a.useMemo((function(){return{_internalRenderMenuItem:_e,_internalRenderSubMenuItem:we}}),[_e,we]),Pt="horizontal"!==Ie||P?Oe:Oe.map((function(e,t){return a.createElement(D,{key:e.key,overflowDisabled:t>ze},e)})),Tt=a.createElement(S.a,Object(r.default)({id:O,ref:Ne,prefixCls:"".concat(d,"-overflow"),component:"ul",itemComponent:re,className:f()(d,"".concat(d,"-root"),"".concat(d,"-").concat(Ie),v,(c={},Object(o.a)(c,"".concat(d,"-inline-collapsed"),Re),Object(o.a)(c,"".concat(d,"-rtl"),Te),c),p),dir:E,style:y,role:"menu",tabIndex:g,data:Pt,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?Oe.slice(-t):null;return a.createElement(je,{eventKey:Ve,title:me,disabled:We,internalPopupClose:0===t,popupClassName:he},n)},maxCount:"horizontal"!==Ie||P?S.a.INVALIDATE:S.a.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){Ge(e)},onKeyDown:Ct},Ee));return a.createElement(X.Provider,{value:Nt},a.createElement(K.Provider,{value:Pe},a.createElement(D,{prefixCls:d,rootClassName:p,mode:Ie,openKeys:Qe,rtl:Te,disabled:N,motion:Se?oe:null,defaultMotions:Se?ae:null,activeKey:vt,onActive:gt,onInactive:_t,selectedKeys:Ot,inlineIndent:ne,subMenuOpenDelay:A,subMenuCloseDelay:I,forceSubMenuRender:R,builtinPlacements:se,triggerSubMenuAction:le,getPopupContainer:St,itemIcon:fe,expandIcon:de,onItemClick:jt,onOpenChange:kt},a.createElement(W.Provider,{value:mt},Tt),a.createElement("div",{style:{display:"none"},"aria-hidden":!0},a.createElement(V.Provider,{value:pt},Oe)))))}));Je.Item=re,Je.SubMenu=je,Je.ItemGroup=Qe,Je.Divider=Xe;var Ze=Je,et={adjustX:1,adjustY:1},tt=[0,0],nt={topLeft:{points:["bl","tl"],overflow:et,offset:[0,-4],targetOffset:tt},topCenter:{points:["bc","tc"],overflow:et,offset:[0,-4],targetOffset:tt},topRight:{points:["br","tr"],overflow:et,offset:[0,-4],targetOffset:tt},bottomLeft:{points:["tl","bl"],overflow:et,offset:[0,4],targetOffset:tt},bottomCenter:{points:["tc","bc"],overflow:et,offset:[0,4],targetOffset:tt},bottomRight:{points:["tr","br"],overflow:et,offset:[0,4],targetOffset:tt}},rt=g.a.ESC,ot=g.a.TAB;var at=n(181),it=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function ct(e,t){var n=e.arrow,r=void 0!==n&&n,c=e.prefixCls,s=void 0===c?"rc-dropdown":c,d=e.transitionName,p=e.animation,m=e.align,h=e.placement,v=void 0===h?"bottomLeft":h,b=e.placements,g=void 0===b?nt:b,_=e.getPopupContainer,w=e.showAction,E=e.hideAction,O=e.overlayClassName,x=e.overlayStyle,j=e.visible,k=e.trigger,S=void 0===k?["hover"]:k,C=e.autoFocus,N=Object(u.a)(e,it),P=a.useState(),T=Object(i.a)(P,2),A=T[0],L=T[1],I="visible"in e?j:A,R=a.useRef(null);a.useImperativeHandle(t,(function(){return R.current}));var D=a.useRef(null),M="".concat(s,"-menu");!function(e){var t=e.visible,n=e.setTriggerVisible,r=e.triggerRef,o=e.menuRef,i=e.onVisibleChange,c=e.autoFocus,u=a.useRef(!1),l=function(){var e,o,a,c;t&&r.current&&(null===(e=r.current)||void 0===e||null===(o=e.triggerRef)||void 0===o||null===(a=o.current)||void 0===a||null===(c=a.focus)||void 0===c||c.call(a),n(!1),"function"==typeof i&&i(!1))},s=function(){var e,t;null===(e=o.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e),u.current=!0},f=function(e){var t;switch(e.keyCode){case rt:l();break;case ot:!u.current&&(null===(t=o.current)||void 0===t?void 0:t.focus)?(e.preventDefault(),s()):l()}};a.useEffect((function(){return t?(window.addEventListener("keydown",f),c&&Object(y.a)(s,3),function(){window.removeEventListener("keydown",f),u.current=!1}):function(){u.current=!1}}),[t])}({visible:I,setTriggerVisible:L,triggerRef:R,menuRef:D,onVisibleChange:e.onVisibleChange,autoFocus:C});var F,B,U,z,G,V,Y=function(){var t=e.overlay;return"function"==typeof t?t():t},q=function(t){var n=e.onOverlayClick,r=Y().props;L(!1),n&&n(t),r.onClick&&r.onClick(t)},H=function(){var e,t=Y(),n=Object(at.a)(D,t.ref),i=(e={prefixCls:M},Object(o.a)(e,"data-dropdown-inject",!0),Object(o.a)(e,"onClick",q),Object(o.a)(e,"ref",Object(at.c)(t)?n:void 0),e);return"string"==typeof t.type&&(delete i.prefixCls,delete i["data-dropdown-inject"]),a.createElement(a.Fragment,null,r&&a.createElement("div",{className:"".concat(s,"-arrow")}),a.cloneElement(t,i))},W=E;return W||-1===S.indexOf("contextMenu")||(W=["click"]),a.createElement(pe.a,Object(l.a)(Object(l.a)({builtinPlacements:g},N),{},{prefixCls:s,ref:R,popupClassName:f()(O,Object(o.a)({},"".concat(s,"-show-arrow"),r)),popupStyle:x,action:S,showAction:w,hideAction:W||[],popupPlacement:v,popupAlign:m,popupTransitionName:d,popupAnimation:p,popupVisible:I,stretch:(G=e.minOverlayWidthMatchTrigger,V=e.alignPoint,("minOverlayWidthMatchTrigger"in e?G:!V)?"minWidth":""),popup:"function"==typeof e.overlay?H:H(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;L(t),"function"==typeof n&&n(t)},getPopupContainer:_}),(B=e.children,U=B.props?B.props:{},z=f()(U.className,void 0!==(F=e.openClassName)?F:"".concat(s,"-open")),I&&B?a.cloneElement(B,{className:z}):B))}var ut=a.forwardRef(ct);function lt(e,t){var n=e.prefixCls,r=e.editable,o=e.locale,i=e.style;return r&&!1!==r.showAdd?a.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:i,"aria-label":(null==o?void 0:o.addAriaLabel)||"Add tab",onClick:function(e){r.onEdit("add",{event:e})}},r.addIcon||"+"):null}var st=a.forwardRef(lt);function ft(e,t){var n=e.prefixCls,r=e.id,c=e.tabs,u=e.locale,l=e.mobile,s=e.moreIcon,d=void 0===s?"More":s,p=e.moreTransitionName,m=e.style,h=e.className,y=e.editable,v=e.tabBarGutter,b=e.rtl,_=e.onTabClick,w=Object(a.useState)(!1),E=Object(i.a)(w,2),O=E[0],x=E[1],j=Object(a.useState)(null),k=Object(i.a)(j,2),S=k[0],C=k[1],N="".concat(r,"-more-popup"),P="".concat(n,"-dropdown"),T=null!==S?"".concat(N,"-").concat(S):null,A=null==u?void 0:u.dropdownAriaLabel,L=a.createElement(Ze,{onClick:function(e){var t=e.key,n=e.domEvent;_(t,n),x(!1)},id:N,tabIndex:-1,role:"listbox","aria-activedescendant":T,selectedKeys:[S],"aria-label":void 0!==A?A:"expanded dropdown"},c.map((function(e){return a.createElement(re,{key:e.key,id:"".concat(N,"-").concat(e.key),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(e.key),disabled:e.disabled},e.tab)})));function I(e){for(var t=c.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===S}))||0,r=t.length,o=0;o<r;o+=1){var a=t[n=(n+e+r)%r];if(!a.disabled)return void C(a.key)}}Object(a.useEffect)((function(){var e=document.getElementById(T);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[S]),Object(a.useEffect)((function(){O||C(null)}),[O]);var R=Object(o.a)({},b?"marginRight":"marginLeft",v);c.length||(R.visibility="hidden",R.order=1);var D=f()(Object(o.a)({},"".concat(P,"-rtl"),b)),M=l?null:a.createElement(ut,{prefixCls:P,overlay:L,trigger:["hover"],visible:O,transitionName:p,onVisibleChange:x,overlayClassName:D,mouseEnterDelay:.1,mouseLeaveDelay:.1},a.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:R,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":N,id:"".concat(r,"-more"),"aria-expanded":O,onKeyDown:function(e){var t=e.which;if(O)switch(t){case g.a.UP:I(-1),e.preventDefault();break;case g.a.DOWN:I(1),e.preventDefault();break;case g.a.ESC:x(!1);break;case g.a.SPACE:case g.a.ENTER:null!==S&&_(S,e)}else[g.a.DOWN,g.a.SPACE,g.a.ENTER].includes(t)&&(x(!0),e.preventDefault())}},d));return a.createElement("div",{className:f()("".concat(n,"-nav-operations"),h),style:m,ref:t},M,a.createElement(st,{prefixCls:n,locale:u,editable:y}))}var dt=a.forwardRef(ft),pt=Object(a.createContext)(null),mt=Math.pow(.995,20);function ht(e,t){var n=a.useRef(e),r=a.useState({}),o=Object(i.a)(r,2)[1];return[n.current,function(e){var r="function"==typeof e?e(n.current):e;r!==n.current&&t(r,n.current),n.current=r,o({})}]}var yt=function(e){var t,n=e.position,r=e.prefixCls,o=e.extra;if(!o)return null;var i=o;return"right"===n&&(t=i.right||!i.left&&i||null),"left"===n&&(t=i.left||null),t?a.createElement("div",{className:"".concat(r,"-extra-content")},t):null};function vt(e,t){var n,c,u=a.useContext(pt),s=u.prefixCls,d=u.tabs,p=e.className,m=e.style,g=e.id,_=e.animated,x=e.activeKey,j=e.rtl,k=e.extra,S=e.editable,C=e.locale,N=e.tabPosition,P=e.tabBarGutter,T=e.children,A=e.onTabClick,L=e.onTabScroll,I=Object(a.useRef)(),R=Object(a.useRef)(),D=Object(a.useRef)(),M=Object(a.useRef)(),F=(c=Object(a.useRef)(new Map),[function(e){return c.current.has(e)||c.current.set(e,a.createRef()),c.current.get(e)},function(e){c.current.delete(e)}]),B=Object(i.a)(F,2),U=B[0],z=B[1],G="top"===N||"bottom"===N,V=ht(0,(function(e,t){G&&L&&L({direction:e>t?"left":"right"})})),Y=Object(i.a)(V,2),q=Y[0],H=Y[1],W=ht(0,(function(e,t){!G&&L&&L({direction:e>t?"top":"bottom"})})),K=Object(i.a)(W,2),$=K[0],Q=K[1],X=Object(a.useState)(0),J=Object(i.a)(X,2),Z=J[0],ee=J[1],te=Object(a.useState)(0),ne=Object(i.a)(te,2),re=ne[0],oe=ne[1],ae=Object(a.useState)(0),ie=Object(i.a)(ae,2),ce=ie[0],ue=ie[1],le=Object(a.useState)(0),se=Object(i.a)(le,2),fe=se[0],de=se[1],pe=Object(a.useState)(null),me=Object(i.a)(pe,2),he=me[0],ye=me[1],ve=Object(a.useState)(null),be=Object(i.a)(ve,2),ge=be[0],_e=be[1],we=Object(a.useState)(0),Ee=Object(i.a)(we,2),Oe=Ee[0],xe=Ee[1],je=Object(a.useState)(0),ke=Object(i.a)(je,2),Se=ke[0],Ce=ke[1],Ne=function(e){var t=Object(a.useRef)([]),n=Object(a.useState)({}),r=Object(i.a)(n,2)[1],o=Object(a.useRef)("function"==typeof e?e():e),c=b((function(){var e=o.current;t.current.forEach((function(t){e=t(e)})),t.current=[],o.current=e,r({})}));return[o.current,function(e){t.current.push(e),c()}]}(new Map),Pe=Object(i.a)(Ne,2),Te=Pe[0],Ae=Pe[1],Le=function(e,t,n){return Object(a.useMemo)((function(){for(var n,r=new Map,o=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||E,a=o.left+o.width,i=0;i<e.length;i+=1){var c,u=e[i].key,s=t.get(u);s||(s=t.get(null===(c=e[i-1])||void 0===c?void 0:c.key)||E);var f=r.get(u)||Object(l.a)({},s);f.right=a-f.left-f.width,r.set(u,f)}return r}),[e.map((function(e){return e.key})).join("_"),t,n])}(d,Te,Z),Ie="".concat(s,"-nav-operations-hidden"),Re=0,De=0;function Me(e){return e<Re?Re:e>De?De:e}G?j?(Re=0,De=Math.max(0,Z-he)):(Re=Math.min(0,he-Z),De=0):(Re=Math.min(0,ge-re),De=0);var Fe=Object(a.useRef)(),Be=Object(a.useState)(),Ue=Object(i.a)(Be,2),ze=Ue[0],Ge=Ue[1];function Ve(){Ge(Date.now())}function Ye(){window.clearTimeout(Fe.current)}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=Le.get(e)||{width:0,height:0,left:0,right:0,top:0};if(G){var n=q;j?t.right<q?n=t.right:t.right+t.width>q+he&&(n=t.right+t.width-he):t.left<-q?n=-t.left:t.left+t.width>-q+he&&(n=-(t.left+t.width-he)),Q(0),H(Me(n))}else{var r=$;t.top<-$?r=-t.top:t.top+t.height>-$+ge&&(r=-(t.top+t.height-ge)),H(0),Q(Me(r))}}!function(e,t){var n=Object(a.useState)(),r=Object(i.a)(n,2),o=r[0],c=r[1],u=Object(a.useState)(0),l=Object(i.a)(u,2),s=l[0],f=l[1],d=Object(a.useState)(0),p=Object(i.a)(d,2),m=p[0],h=p[1],y=Object(a.useState)(),v=Object(i.a)(y,2),b=v[0],g=v[1],_=Object(a.useRef)(),w=Object(a.useRef)(),E=Object(a.useRef)(null);E.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;c({x:n,y:r}),window.clearInterval(_.current)},onTouchMove:function(e){if(o){e.preventDefault();var n=e.touches[0],r=n.screenX,a=n.screenY;c({x:r,y:a});var i=r-o.x,u=a-o.y;t(i,u);var l=Date.now();f(l),h(l-s),g({x:i,y:u})}},onTouchEnd:function(){if(o&&(c(null),g(null),b)){var e=b.x/m,n=b.y/m,r=Math.abs(e),a=Math.abs(n);if(Math.max(r,a)<.1)return;var i=e,u=n;_.current=window.setInterval((function(){Math.abs(i)<.01&&Math.abs(u)<.01?window.clearInterval(_.current):t(20*(i*=mt),20*(u*=mt))}),20)}},onWheel:function(e){var n=e.deltaX,r=e.deltaY,o=0,a=Math.abs(n),i=Math.abs(r);a===i?o="x"===w.current?n:r:a>i?(o=n,w.current="x"):(o=r,w.current="y"),t(-o,-o)&&e.preventDefault()}},a.useEffect((function(){function t(e){E.current.onTouchMove(e)}function n(e){E.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){E.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){E.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(I,(function(e,t){function n(e,t){e((function(e){return Me(e+t)}))}if(G){if(he>=Z)return!1;n(H,e)}else{if(ge>=re)return!1;n(Q,t)}return Ye(),Ve(),!0})),Object(a.useEffect)((function(){return Ye(),ze&&(Fe.current=window.setTimeout((function(){Ge(0)}),100)),Ye}),[ze]);var He=function(e,t,n,r,o){var i,c,u,l=o.tabs,s=o.tabPosition,f=o.rtl;["top","bottom"].includes(s)?(i="width",c=f?"right":"left",u=Math.abs(t.left)):(i="height",c="top",u=-t.top);var d=t[i],p=n[i],m=r[i],h=d;return p+m>d&&(h=d-m),Object(a.useMemo)((function(){if(!l.length)return[0,0];for(var t=l.length,n=t,r=0;r<t;r+=1){var o=e.get(l[r].key)||O;if(o[c]+o[i]>u+h){n=r-1;break}}for(var a=0,s=t-1;s>=0;s-=1)if((e.get(l[s].key)||O)[c]<u){a=s+1;break}return[a,n]}),[e,u,h,s,l.map((function(e){return e.key})).join("_"),f])}(Le,{width:he,height:ge,left:q,top:$},{width:ce,height:fe},{width:Oe,height:Se},Object(l.a)(Object(l.a)({},e),{},{tabs:d})),We=Object(i.a)(He,2),Ke=We[0],$e=We[1],Qe=d.map((function(e){var t=e.key;return a.createElement(w,{id:g,prefixCls:s,key:t,rtl:j,tab:e,closable:e.closable,editable:S,active:t===x,tabPosition:N,tabBarGutter:P,renderWrapper:T,removeAriaLabel:null==C?void 0:C.removeAriaLabel,ref:U(t),onClick:function(e){A(t,e)},onRemove:function(){z(t)},onFocus:function(){qe(t),Ve(),j||(I.current.scrollLeft=0),I.current.scrollTop=0}})})),Xe=b((function(){var e,t,n,r,o,a,i,c,u,l=(null===(e=I.current)||void 0===e?void 0:e.offsetWidth)||0,s=(null===(t=I.current)||void 0===t?void 0:t.offsetHeight)||0,f=(null===(n=M.current)||void 0===n?void 0:n.offsetWidth)||0,p=(null===(r=M.current)||void 0===r?void 0:r.offsetHeight)||0,m=(null===(o=D.current)||void 0===o?void 0:o.offsetWidth)||0,h=(null===(a=D.current)||void 0===a?void 0:a.offsetHeight)||0;ye(l),_e(s),xe(f),Ce(p);var y=((null===(i=R.current)||void 0===i?void 0:i.offsetWidth)||0)-f,v=((null===(c=R.current)||void 0===c?void 0:c.offsetHeight)||0)-p;ee(y),oe(v);var b=null===(u=D.current)||void 0===u?void 0:u.className.includes(Ie);ue(y-(b?0:m)),de(v-(b?0:h)),Ae((function(){var e=new Map;return d.forEach((function(t){var n=t.key,r=U(n).current;r&&e.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))})),Je=d.slice(0,Ke),Ze=d.slice($e+1),et=[].concat(Object(h.a)(Je),Object(h.a)(Ze)),tt=Object(a.useState)(),nt=Object(i.a)(tt,2),rt=nt[0],ot=nt[1],at=Le.get(x),it=Object(a.useRef)();function ct(){y.a.cancel(it.current)}Object(a.useEffect)((function(){var e={};return at&&(G?(j?e.right=at.right:e.left=at.left,e.width=at.width):(e.top=at.top,e.height=at.height)),ct(),it.current=Object(y.a)((function(){ot(e)})),ct}),[at,G,j]),Object(a.useEffect)((function(){qe()}),[x,at,Le,G]),Object(a.useEffect)((function(){Xe()}),[j,P,x,d.map((function(e){return e.key})).join("_")]);var ut,lt,ft,vt,bt=!!et.length,gt="".concat(s,"-nav-wrap");return G?j?(lt=q>0,ut=q+he<Z):(ut=q<0,lt=-q+he<Z):(ft=$<0,vt=-$+ge<re),a.createElement("div",{ref:t,role:"tablist",className:f()("".concat(s,"-nav"),p),style:m,onKeyDown:function(){Ve()}},a.createElement(yt,{position:"left",extra:k,prefixCls:s}),a.createElement(v.a,{onResize:Xe},a.createElement("div",{className:f()(gt,(n={},Object(o.a)(n,"".concat(gt,"-ping-left"),ut),Object(o.a)(n,"".concat(gt,"-ping-right"),lt),Object(o.a)(n,"".concat(gt,"-ping-top"),ft),Object(o.a)(n,"".concat(gt,"-ping-bottom"),vt),n)),ref:I},a.createElement(v.a,{onResize:Xe},a.createElement("div",{ref:R,className:"".concat(s,"-nav-list"),style:{transform:"translate(".concat(q,"px, ").concat($,"px)"),transition:ze?"none":void 0}},Qe,a.createElement(st,{ref:M,prefixCls:s,locale:C,editable:S,style:{visibility:bt?"hidden":null}}),a.createElement("div",{className:f()("".concat(s,"-ink-bar"),Object(o.a)({},"".concat(s,"-ink-bar-animated"),_.inkBar)),style:rt}))))),a.createElement(dt,Object(r.default)({},e,{ref:D,prefixCls:s,tabs:et,className:!bt&&Ie})),a.createElement(yt,{position:"right",extra:k,prefixCls:s}))}var bt=a.forwardRef(vt);function gt(e){var t=e.id,n=e.activeKey,r=e.animated,i=e.tabPosition,c=e.rtl,u=e.destroyInactiveTabPane,l=a.useContext(pt),s=l.prefixCls,d=l.tabs,p=r.tabPane,m=d.findIndex((function(e){return e.key===n}));return a.createElement("div",{className:f()("".concat(s,"-content-holder"))},a.createElement("div",{className:f()("".concat(s,"-content"),"".concat(s,"-content-").concat(i),Object(o.a)({},"".concat(s,"-content-animated"),p)),style:m&&p?Object(o.a)({},c?"marginRight":"marginLeft","-".concat(m,"00%")):null},d.map((function(e){return a.cloneElement(e.node,{key:e.key,prefixCls:s,tabKey:e.key,id:t,animated:p,active:e.key===n,destroyInactiveTabPane:u})}))))}function _t(e){var t=e.prefixCls,n=e.forceRender,r=e.className,o=e.style,c=e.id,u=e.active,s=e.animated,d=e.destroyInactiveTabPane,p=e.tabKey,m=e.children,h=a.useState(n),y=Object(i.a)(h,2),v=y[0],b=y[1];a.useEffect((function(){u?b(!0):d&&b(!1)}),[u,d]);var g={};return u||(s?(g.visibility="hidden",g.height=0,g.overflowY="hidden"):g.display="none"),a.createElement("div",{id:c&&"".concat(c,"-panel-").concat(p),role:"tabpanel",tabIndex:u?0:-1,"aria-labelledby":c&&"".concat(c,"-tab-").concat(p),"aria-hidden":!u,style:Object(l.a)(Object(l.a)({},g),o),className:f()("".concat(t,"-tabpane"),u&&"".concat(t,"-tabpane-active"),r)},(u||v||n)&&m)}var wt=0;function Et(e,t){var n,s,h=e.id,y=e.prefixCls,v=void 0===y?"rc-tabs":y,b=e.className,g=e.children,_=e.direction,w=e.activeKey,E=e.defaultActiveKey,O=e.editable,x=e.animated,j=void 0===x?{inkBar:!0,tabPane:!1}:x,k=e.tabPosition,S=void 0===k?"top":k,C=e.tabBarGutter,N=e.tabBarStyle,P=e.tabBarExtraContent,T=e.locale,A=e.moreIcon,L=e.moreTransitionName,I=e.destroyInactiveTabPane,R=e.renderTabBar,D=e.onChange,M=e.onTabClick,F=e.onTabScroll,B=Object(u.a)(e,["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll"]),U=function(e){return Object(d.a)(e).map((function(e){if(a.isValidElement(e)){var t=void 0!==e.key?String(e.key):void 0;return Object(l.a)(Object(l.a)({key:t},e.props),{},{node:e})}return null})).filter((function(e){return e}))}(g),z="rtl"===_;s=!1===j?{inkBar:!1,tabPane:!1}:!0===j?{inkBar:!0,tabPane:!0}:Object(l.a)({inkBar:!0,tabPane:!1},"object"===Object(c.a)(j)?j:{});var G=Object(a.useState)(!1),V=Object(i.a)(G,2),Y=V[0],q=V[1];Object(a.useEffect)((function(){q(Object(p.a)())}),[]);var H=Object(m.a)((function(){var e;return null===(e=U[0])||void 0===e?void 0:e.key}),{value:w,defaultValue:E}),W=Object(i.a)(H,2),K=W[0],$=W[1],Q=Object(a.useState)((function(){return U.findIndex((function(e){return e.key===K}))})),X=Object(i.a)(Q,2),J=X[0],Z=X[1];Object(a.useEffect)((function(){var e,t=U.findIndex((function(e){return e.key===K}));-1===t&&(t=Math.max(0,Math.min(J,U.length-1)),$(null===(e=U[t])||void 0===e?void 0:e.key));Z(t)}),[U.map((function(e){return e.key})).join("_"),K,J]);var ee=Object(m.a)(null,{value:h}),te=Object(i.a)(ee,2),ne=te[0],re=te[1],oe=S;Y&&!["left","right"].includes(S)&&(oe="top"),Object(a.useEffect)((function(){h||(re("rc-tabs-".concat(wt)),wt+=1)}),[]);var ae,ie={id:ne,activeKey:K,animated:s,tabPosition:oe,rtl:z,mobile:Y},ce=Object(l.a)(Object(l.a)({},ie),{},{editable:O,locale:T,moreIcon:A,moreTransitionName:L,tabBarGutter:C,onTabClick:function(e,t){null==M||M(e,t),$(e),null==D||D(e)},onTabScroll:F,extra:P,style:N,panes:g});return ae=R?R(ce,bt):a.createElement(bt,ce),a.createElement(pt.Provider,{value:{tabs:U,prefixCls:v}},a.createElement("div",Object(r.default)({ref:t,id:h,className:f()(v,"".concat(v,"-").concat(oe),(n={},Object(o.a)(n,"".concat(v,"-mobile"),Y),Object(o.a)(n,"".concat(v,"-editable"),O),Object(o.a)(n,"".concat(v,"-rtl"),z),n),b)},B),ae,a.createElement(gt,Object(r.default)({destroyInactiveTabPane:I},ie,{animated:s}))))}var Ot=a.forwardRef(Et);Ot.TabPane=_t;var xt=Ot,jt=n(928),kt=n(263),St=n(261),Ct=n(95),Nt=n(257),Pt=n(132),Tt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function At(e){var t,n=e.type,i=e.className,c=e.size,u=e.onEdit,l=e.hideAdd,s=e.centered,d=e.addIcon,p=Tt(e,["type","className","size","onEdit","hideAdd","centered","addIcon"]),m=p.prefixCls,h=p.moreIcon,y=void 0===h?a.createElement(jt.a,null):h,v=a.useContext(Nt.b),b=v.getPrefixCls,g=v.direction,_=b("tabs",m);"editable-card"===n&&(t={onEdit:function(e,t){var n=t.key,r=t.event;null==u||u("add"===e?r:n,e)},removeIcon:a.createElement(St.a,null),addIcon:d||a.createElement(kt.a,null),showAdd:!0!==l});var w=b();return Object(Ct.a)(!("onPrevClick"in p)&&!("onNextClick"in p),"Tabs","`onPrevClick` and `onNextClick` has been removed. Please use `onTabScroll` instead."),a.createElement(Pt.b.Consumer,null,(function(e){var u,l=void 0!==c?c:e;return a.createElement(xt,Object(r.default)({direction:g,moreTransitionName:"".concat(w,"-slide-up")},p,{className:f()((u={},Object(o.a)(u,"".concat(_,"-").concat(l),l),Object(o.a)(u,"".concat(_,"-card"),["card","editable-card"].includes(n)),Object(o.a)(u,"".concat(_,"-editable-card"),"editable-card"===n),Object(o.a)(u,"".concat(_,"-centered"),s),u),i),editable:t,moreIcon:y,prefixCls:_}))}))}At.TabPane=_t;t.a=At},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),o=n.n(r),a=n(114);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=n.n(a)()("util:dynamic.");function l(e){var t=e.loader,n=e.loading;return function(e){var a=i(Object(r.useState)(null),2),c=a[0],l=a[1];return u("dynamic loader",t),Object(r.useEffect)((function(){t().then((function(e){l((function(){return e.default}))})).catch((function(e){return console.error(e.stack)}))}),[]),c?o.a.createElement(c,e):o.a.createElement(n||"div")}}},function(e,t,n){"use strict";var r=n(1317),o=n(153),a=n(400),i=n(686),c="${label} is not a valid ${type}",u={locale:"en",Pagination:r.a,DatePicker:o.a,TimePicker:a.a,Calendar:i.a,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:c,method:c,array:c,object:c,number:c,date:c,boolean:c,integer:c,float:c,regexp:c,email:c,url:c,hex:c},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};t.a=u},,function(e,t,n){var r=n(1011),o=n(454),a=n(674),i=n(1178),c=n(958),u=n(1293),l=a((function(e){var t=u(e);return c(t)&&(t=void 0),i(r(e,1,c,!0),o(t,2))}));e.exports=l},function(e,t,n){"use strict";var r;function o(e){if("undefined"==typeof document)return 0;if(e||void 0===r){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),o=n.style;o.position="absolute",o.top="0",o.left="0",o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var a=t.offsetWidth;n.style.overflow="scroll";var i=t.offsetWidth;a===i&&(i=n.clientWidth),document.body.removeChild(n),r=a-i}return r}function a(e){var t=e.match(/^(.*)px$/),n=Number(null==t?void 0:t[1]);return Number.isNaN(n)?o():n}function i(e){if(!("undefined"!=typeof document&&e&&e instanceof Element))return{width:0,height:0};var t=getComputedStyle(e,"::-webkit-scrollbar"),n=t.width,r=t.height;return{width:a(n),height:a(r)}}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}))},,function(e,t,n){"use strict";var r=n(1464),o=n(34),a=n(505),i=r.a.FEATURES,c={readLiteFeatureGuide:function(e){if("function"==typeof navigator.sendBeacon){var t=new URLSearchParams;t.set("ctoken",Object(a.a)(window)),t.set("type",e.tip_id),navigator.sendBeacon("/api/mine/read_guide?".concat(t.toString()))}else o.a.mine.readGuide({type:e.tip_id});var n=document.querySelector(e.containerSelector);if(n){var r=n.querySelector(".larkui-feature-guide");if(!r)return;r.style.display="none"}},readMiniFeatureGuide:function(e,t){var n=e.tip_id;o.a.mine.readGuide({type:n}),t({type:"guide/readFeatureGuide",payload:{tip_id:n}})},findFeatureGuide:function(e){var t=e.tip_id,n=e.type;return i.find((function(e){return e.tip_id===t&&e.type===n}))},needDisplayGuide:function(e){if("#guide"===window.location.hash)return!0;var t=window.appData.readTip;return!t||!t[e]}};c.FEATURES=i,t.a=c},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(10),c=n.n(i),u=n(257),l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};t.a=function(e){return a.createElement(u.a,null,(function(t){var n,i=t.getPrefixCls,u=t.direction,s=e.prefixCls,f=e.type,d=void 0===f?"horizontal":f,p=e.orientation,m=void 0===p?"center":p,h=e.className,y=e.children,v=e.dashed,b=e.plain,g=l(e,["prefixCls","type","orientation","className","children","dashed","plain"]),_=i("divider",s),w=m.length>0?"-".concat(m):m,E=!!y,O=c()(_,"".concat(_,"-").concat(d),(n={},Object(o.a)(n,"".concat(_,"-with-text"),E),Object(o.a)(n,"".concat(_,"-with-text").concat(w),E),Object(o.a)(n,"".concat(_,"-dashed"),!!v),Object(o.a)(n,"".concat(_,"-plain"),!!b),Object(o.a)(n,"".concat(_,"-rtl"),"rtl"===u),n),h);return a.createElement("div",Object(r.default)({className:O},g,{role:"separator"}),y&&a.createElement("span",{className:"".concat(_,"-inner-text")},y))}))}},,function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(41),i=n(0),c=n(10),u=n.n(c),l=function(e){var t=e.prefixCls,n=e.className,r=e.width,a=e.style;return i.createElement("h3",{className:u()(t,n),style:Object(o.default)({width:r},a)})},s=n(40),f=function(e){var t=function(t){var n=e.width,r=e.rows,o=void 0===r?2:r;return Array.isArray(n)?n[t]:o-1===t?n:void 0},n=e.prefixCls,r=e.className,o=e.style,a=e.rows,c=Object(s.a)(Array(a)).map((function(e,n){return i.createElement("li",{key:n,style:{width:t(n)}})}));return i.createElement("ul",{className:u()(n,r),style:o},c)},d=n(257),p=function(e){var t,n,a=e.prefixCls,c=e.className,l=e.style,s=e.size,f=e.shape,d=u()((t={},Object(r.a)(t,"".concat(a,"-lg"),"large"===s),Object(r.a)(t,"".concat(a,"-sm"),"small"===s),t)),p=u()((n={},Object(r.a)(n,"".concat(a,"-circle"),"circle"===f),Object(r.a)(n,"".concat(a,"-square"),"square"===f),Object(r.a)(n,"".concat(a,"-round"),"round"===f),n)),m="number"==typeof s?{width:s,height:s,lineHeight:"".concat(s,"px")}:{};return i.createElement("span",{className:u()(a,d,p,c),style:Object(o.default)(Object(o.default)({},m),l)})},m=n(126),h=function(e){var t=function(t){var n=t.getPrefixCls,a=e.prefixCls,c=e.className,l=e.active,s=n("skeleton",a),f=Object(m.a)(e,["prefixCls"]),d=u()(s,"".concat(s,"-element"),Object(r.a)({},"".concat(s,"-active"),l),c);return i.createElement("div",{className:d},i.createElement(p,Object(o.default)({prefixCls:"".concat(s,"-avatar")},f)))};return i.createElement(d.a,null,t)};h.defaultProps={size:"default",shape:"circle"};var y=h,v=function(e){var t=function(t){var n=t.getPrefixCls,a=e.prefixCls,c=e.className,l=e.active,s=n("skeleton",a),f=Object(m.a)(e,["prefixCls"]),d=u()(s,"".concat(s,"-element"),Object(r.a)({},"".concat(s,"-active"),l),c);return i.createElement("div",{className:d},i.createElement(p,Object(o.default)({prefixCls:"".concat(s,"-button")},f)))};return i.createElement(d.a,null,t)};v.defaultProps={size:"default"};var b=v,g=function(e){var t=function(t){var n=t.getPrefixCls,a=e.prefixCls,c=e.className,l=e.active,s=n("skeleton",a),f=Object(m.a)(e,["prefixCls"]),d=u()(s,"".concat(s,"-element"),Object(r.a)({},"".concat(s,"-active"),l),c);return i.createElement("div",{className:d},i.createElement(p,Object(o.default)({prefixCls:"".concat(s,"-input")},f)))};return i.createElement(d.a,null,t)};g.defaultProps={size:"default"};var _=g,w=function(e){var t=function(t){var n=t.getPrefixCls,r=e.prefixCls,o=e.className,a=e.style,c=n("skeleton",r),l=u()(c,"".concat(c,"-element"),o);return i.createElement("div",{className:l},i.createElement("div",{className:u()("".concat(c,"-image"),o),style:a},i.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(c,"-image-svg")},i.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:"".concat(c,"-image-path")}))))};return i.createElement(d.a,null,t)};function E(e){return e&&"object"===Object(a.a)(e)?e:{}}var O=function(e){var t=function(t){var n=t.getPrefixCls,a=t.direction,c=e.prefixCls,s=e.loading,d=e.className,m=e.children,h=e.avatar,y=e.title,v=e.paragraph,b=e.active,g=e.round,_=n("skeleton",c);if(s||!("loading"in e)){var w,O,x,j=!!h,k=!!y,S=!!v;if(j){var C=Object(o.default)(Object(o.default)({prefixCls:"".concat(_,"-avatar")},function(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}(k,S)),E(h));O=i.createElement("div",{className:"".concat(_,"-header")},i.createElement(p,C))}if(k||S){var N,P;if(k){var T=Object(o.default)(Object(o.default)({prefixCls:"".concat(_,"-title")},function(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}(j,S)),E(y));N=i.createElement(l,T)}if(S){var A=Object(o.default)(Object(o.default)({prefixCls:"".concat(_,"-paragraph")},function(e,t){var n={};return e&&t||(n.width="61%"),n.rows=!e&&t?3:2,n}(j,k)),E(v));P=i.createElement(f,A)}x=i.createElement("div",{className:"".concat(_,"-content")},N,P)}var L=u()(_,(w={},Object(r.a)(w,"".concat(_,"-with-avatar"),j),Object(r.a)(w,"".concat(_,"-active"),b),Object(r.a)(w,"".concat(_,"-rtl"),"rtl"===a),Object(r.a)(w,"".concat(_,"-round"),g),w),d);return i.createElement("div",{className:L},O,x)}return m};return i.createElement(d.a,null,t)};O.defaultProps={avatar:!1,title:!0,paragraph:!0},O.Button=b,O.Avatar=y,O.Input=_,O.Image=w;var x=O;t.a=x},,,,,function(e,t,n){var r=n(2166),o=n(1995)((function(e,t,n,o){r(e,t,n,o)}));e.exports=o},,function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(0),i=n(28),c=n(1026),u=n(11),l=n(10),s=n.n(l),f=n(70),d=n(640),p=n(563),m=n(228);function h(e){var t=e.prefixCls,n=e.style,r=e.visible,i=e.maskProps,c=e.motionName;return a.createElement(m.b,{key:"mask",visible:r,motionName:c,leavedClassName:"".concat(t,"-mask-hidden")},(function(e){var r=e.className,c=e.style;return a.createElement("div",Object(o.default)({style:Object(u.a)(Object(u.a)({},c),n),className:s()("".concat(t,"-mask"),r)},i))}))}function y(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}var v=-1;function b(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}var g=a.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate})),_={width:0,height:0,overflow:"hidden",outline:"none"},w=a.forwardRef((function(e,t){var n=e.closable,r=e.prefixCls,c=e.width,l=e.height,f=e.footer,d=e.title,p=e.closeIcon,h=e.style,y=e.className,v=e.visible,w=e.forceRender,E=e.bodyStyle,O=e.bodyProps,x=e.children,j=e.destroyOnClose,k=e.modalRender,S=e.motionName,C=e.ariaId,N=e.onClose,P=e.onVisibleChanged,T=e.onMouseDown,A=e.onMouseUp,L=e.mousePosition,I=Object(a.useRef)(),R=Object(a.useRef)(),D=Object(a.useRef)();a.useImperativeHandle(t,(function(){return{focus:function(){var e;null===(e=I.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===R.current?I.current.focus():e||t!==I.current||R.current.focus()}}}));var M,F,B,U=a.useState(),z=Object(i.a)(U,2),G=z[0],V=z[1],Y={};function q(){var e,t,n,r,o,a=(e=D.current,t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,o=r.defaultView||r.parentWindow,n.left+=b(o),n.top+=b(o,!0),n);V(L?"".concat(L.x-a.left,"px ").concat(L.y-a.top,"px"):"")}void 0!==c&&(Y.width=c),void 0!==l&&(Y.height=l),G&&(Y.transformOrigin=G),f&&(M=a.createElement("div",{className:"".concat(r,"-footer")},f)),d&&(F=a.createElement("div",{className:"".concat(r,"-header")},a.createElement("div",{className:"".concat(r,"-title"),id:C},d))),n&&(B=a.createElement("button",{type:"button",onClick:N,"aria-label":"Close",className:"".concat(r,"-close")},p||a.createElement("span",{className:"".concat(r,"-close-x")})));var H=a.createElement("div",{className:"".concat(r,"-content")},B,F,a.createElement("div",Object(o.default)({className:"".concat(r,"-body"),style:E},O),x),M);return a.createElement(m.b,{visible:v,onVisibleChanged:P,onAppearPrepare:q,onEnterPrepare:q,forceRender:w,motionName:S,removeOnLeave:j,ref:D},(function(e,t){var n=e.className,o=e.style;return a.createElement("div",{key:"dialog-element",role:"document",ref:t,style:Object(u.a)(Object(u.a)(Object(u.a)({},o),h),Y),className:s()(r,y,n),onMouseDown:T,onMouseUp:A},a.createElement("div",{tabIndex:0,ref:I,style:_,"aria-hidden":"true"}),a.createElement(g,{shouldUpdate:v||w},k?k(H):H),a.createElement("div",{tabIndex:0,ref:R,style:_,"aria-hidden":"true"}))}))}));w.displayName="Content";var E=w;function O(e){var t=e.prefixCls,n=void 0===t?"rc-dialog":t,r=e.zIndex,c=e.visible,l=void 0!==c&&c,m=e.keyboard,b=void 0===m||m,g=e.focusTriggerAfterClose,_=void 0===g||g,w=e.scrollLocker,O=e.title,x=e.wrapStyle,j=e.wrapClassName,k=e.wrapProps,S=e.onClose,C=e.afterClose,N=e.transitionName,P=e.animation,T=e.closable,A=void 0===T||T,L=e.mask,I=void 0===L||L,R=e.maskTransitionName,D=e.maskAnimation,M=e.maskClosable,F=void 0===M||M,B=e.maskStyle,U=e.maskProps,z=Object(a.useRef)(),G=Object(a.useRef)(),V=Object(a.useRef)(),Y=a.useState(l),q=Object(i.a)(Y,2),H=q[0],W=q[1],K=Object(a.useRef)();function $(e){null==S||S(e)}K.current||(K.current="rcDialogTitle".concat(v+=1));var Q=Object(a.useRef)(!1),X=Object(a.useRef)(),J=null;return F&&(J=function(e){Q.current?Q.current=!1:G.current===e.target&&$(e)}),Object(a.useEffect)((function(){return l&&W(!0),function(){}}),[l]),Object(a.useEffect)((function(){return function(){clearTimeout(X.current)}}),[]),Object(a.useEffect)((function(){return H?(null==w||w.lock(),null==w?void 0:w.unLock):function(){}}),[H,w]),a.createElement("div",Object(o.default)({className:"".concat(n,"-root")},Object(p.a)(e,{data:!0})),a.createElement(h,{prefixCls:n,visible:I&&l,motionName:y(n,R,D),style:Object(u.a)({zIndex:r},B),maskProps:U}),a.createElement("div",Object(o.default)({tabIndex:-1,onKeyDown:function(e){if(b&&e.keyCode===f.a.ESC)return e.stopPropagation(),void $(e);l&&e.keyCode===f.a.TAB&&V.current.changeActive(!e.shiftKey)},className:s()("".concat(n,"-wrap"),j),ref:G,onClick:J,role:"dialog","aria-labelledby":O?K.current:null,style:Object(u.a)(Object(u.a)({zIndex:r},x),{},{display:H?null:"none"})},k),a.createElement(E,Object(o.default)({},e,{onMouseDown:function(){clearTimeout(X.current),Q.current=!0},onMouseUp:function(){X.current=setTimeout((function(){Q.current=!1}))},ref:V,closable:A,ariaId:K.current,prefixCls:n,visible:l,onClose:$,onVisibleChanged:function(e){if(e){var t;if(!Object(d.a)(G.current,document.activeElement))z.current=document.activeElement,null===(t=V.current)||void 0===t||t.focus()}else{if(W(!1),I&&z.current&&_){try{z.current.focus({preventScroll:!0})}catch(n){}z.current=null}H&&(null==C||C())}},motionName:y(n,N,P)}))))}var x=function(e){var t=e.visible,n=e.getContainer,r=e.forceRender,u=e.destroyOnClose,l=void 0!==u&&u,s=e.afterClose,f=a.useState(t),d=Object(i.a)(f,2),p=d[0],m=d[1];return a.useEffect((function(){t&&m(!0)}),[t]),!1===n?a.createElement(O,Object(o.default)({},e,{getOpenCount:function(){return 2}})):r||!l||p?a.createElement(c.a,{visible:t,forceRender:r,getContainer:n},(function(t){return a.createElement(O,Object(o.default)({},e,{destroyOnClose:l,afterClose:function(){null==s||s(),m(!1)}},t))})):null};x.displayName="Dialog";var j=x,k=n(261),S=n(40);var C=n(105),N=n(851),P=function(e){var t=a.useRef(!1),n=a.useRef(),r=a.useState(!1),c=Object(i.a)(r,2),u=c[0],l=c[1];a.useEffect((function(){var t;if(e.autoFocus){var r=n.current;t=setTimeout((function(){return r.focus()}))}return function(){t&&clearTimeout(t)}}),[]);var s=e.type,f=e.children,d=e.prefixCls,p=e.buttonProps;return a.createElement(C.a,Object(o.default)({},Object(N.a)(s),{onClick:function(){var n=e.actionFn,r=e.closeModal;if(!t.current)if(t.current=!0,n){var o;if(n.length)o=n(r),t.current=!1;else if(!(o=n()))return void r();!function(n){var r=e.closeModal;n&&n.then&&(l(!0),n.then((function(){r.apply(void 0,arguments)}),(function(e){console.error(e),l(!1),t.current=!1})))}(o)}else r()},loading:u,prefixCls:d},p,{ref:n}),f)},T=n(95),A=n(82),L=n(262),I=function(e){var t=e.icon,n=e.onCancel,o=e.onOk,i=e.close,c=e.zIndex,u=e.afterClose,l=e.visible,f=e.keyboard,d=e.centered,p=e.getContainer,m=e.maskStyle,h=e.okText,y=e.okButtonProps,v=e.cancelText,b=e.cancelButtonProps,g=e.direction,_=e.prefixCls,w=e.rootPrefixCls,E=e.bodyStyle,O=e.closable,x=void 0!==O&&O,j=e.closeIcon,k=e.modalRender,S=e.focusTriggerAfterClose;Object(T.a)(!("string"==typeof t&&t.length>2),"Modal","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(t,"` at https://ant.design/components/icon"));var C=e.okType||"primary",N="".concat(_,"-confirm"),I=!("okCancel"in e)||e.okCancel,R=e.width||416,D=e.style||{},M=void 0===e.mask||e.mask,F=void 0!==e.maskClosable&&e.maskClosable,B=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),U=s()(N,"".concat(N,"-").concat(e.type),Object(r.a)({},"".concat(N,"-rtl"),"rtl"===g),e.className),z=I&&a.createElement(P,{actionFn:n,closeModal:i,autoFocus:"cancel"===B,buttonProps:b,prefixCls:"".concat(w,"-btn")},v);return a.createElement(ce,{prefixCls:_,className:U,wrapClassName:s()(Object(r.a)({},"".concat(N,"-centered"),!!e.centered)),onCancel:function(){return i({triggerCancel:!0})},visible:l,title:"",footer:"",transitionName:Object(L.b)(w,"zoom",e.transitionName),maskTransitionName:Object(L.b)(w,"fade",e.maskTransitionName),mask:M,maskClosable:F,maskStyle:m,style:D,width:R,zIndex:c,afterClose:u,keyboard:f,centered:d,getContainer:p,closable:x,closeIcon:j,modalRender:k,focusTriggerAfterClose:S},a.createElement("div",{className:"".concat(N,"-body-wrapper")},a.createElement(A.b,{prefixCls:w},a.createElement("div",{className:"".concat(N,"-body"),style:E},t,void 0===e.title?null:a.createElement("span",{className:"".concat(N,"-title")},e.title),a.createElement("div",{className:"".concat(N,"-content")},e.content))),a.createElement("div",{className:"".concat(N,"-btns")},z,a.createElement(P,{type:C,actionFn:o,closeModal:i,autoFocus:"ok"===B,buttonProps:y,prefixCls:"".concat(w,"-btn")},h))))},R=n(382),D=n(158),M=n(257),F=function(e,t){var n=e.afterClose,r=e.config,c=a.useState(!0),u=Object(i.a)(c,2),l=u[0],s=u[1],f=a.useState(r),d=Object(i.a)(f,2),p=d[0],m=d[1],h=a.useContext(M.b),y=h.direction,v=h.getPrefixCls,b=v("modal"),g=v();function _(){s(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.some((function(e){return e&&e.triggerCancel}));p.onCancel&&r&&p.onCancel()}return a.useImperativeHandle(t,(function(){return{destroy:_,update:function(e){m((function(t){return Object(o.default)(Object(o.default)({},t),e)}))}}})),a.createElement(D.a,{componentName:"Modal",defaultLocale:R.a.Modal},(function(e){return a.createElement(I,Object(o.default)({prefixCls:b,rootPrefixCls:g},p,{close:_,visible:l,afterClose:n,okText:p.okText||(p.okCancel?e.okText:e.justOkText),direction:y,cancelText:p.cancelText||e.cancelText}))}))},B=a.forwardRef(F),U=n(39),z=n(540),G=n(499),V=n(541),Y=n(500),q=n(693),H=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},W="";function K(e){var t=document.createElement("div");document.body.appendChild(t);var n=Object(o.default)(Object(o.default)({},e),{close:c,visible:!0});function r(){var n=U.unmountComponentAtNode(t);n&&t.parentNode&&t.parentNode.removeChild(t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=o.some((function(e){return e&&e.triggerCancel}));e.onCancel&&i&&e.onCancel.apply(e,o);for(var u=0;u<ae.length;u++){var l=ae[u];if(l===c){ae.splice(u,1);break}}}function i(e){var n=e.okText,r=e.cancelText,i=e.prefixCls,c=H(e,["okText","cancelText","prefixCls"]);setTimeout((function(){var e=Object(q.b)(),u=(0,Object(A.c)().getPrefixCls)(void 0,W),l=i||"".concat(u,"-modal");U.render(a.createElement(I,Object(o.default)({},c,{prefixCls:l,rootPrefixCls:u,okText:n||(c.okCancel?e.okText:e.justOkText),cancelText:r||e.cancelText})),t)}))}function c(){for(var t=this,a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];i(n=Object(o.default)(Object(o.default)({},n),{visible:!1,afterClose:function(){"function"==typeof e.afterClose&&e.afterClose(),r.apply(t,c)}}))}return i(n),ae.push(c),{destroy:c,update:function(e){i(n="function"==typeof e?e(n):Object(o.default)(Object(o.default)({},n),e))}}}function $(e){return Object(o.default)(Object(o.default)({icon:a.createElement(Y.a,null),okCancel:!1},e),{type:"warning"})}function Q(e){return Object(o.default)(Object(o.default)({icon:a.createElement(z.a,null),okCancel:!1},e),{type:"info"})}function X(e){return Object(o.default)(Object(o.default)({icon:a.createElement(G.a,null),okCancel:!1},e),{type:"success"})}function J(e){return Object(o.default)(Object(o.default)({icon:a.createElement(V.a,null),okCancel:!1},e),{type:"error"})}function Z(e){return Object(o.default)(Object(o.default)({icon:a.createElement(Y.a,null),okCancel:!0},e),{type:"confirm"})}var ee=0,te=a.memo(a.forwardRef((function(e,t){var n=function(){var e=a.useState([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return[n,a.useCallback((function(e){return r((function(t){return[].concat(Object(S.a)(t),[e])})),function(){r((function(t){return t.filter((function(t){return t!==e}))}))}}),[])]}(),r=Object(i.a)(n,2),o=r[0],c=r[1];return a.useImperativeHandle(t,(function(){return{patchElement:c}}),[]),a.createElement(a.Fragment,null,o)})));var ne,re=n(965),oe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ae=[];Object(re.a)()&&document.documentElement.addEventListener("click",(function(e){ne={x:e.pageX,y:e.pageY},setTimeout((function(){ne=null}),100)}),!0);var ie=function(e){var t,n=a.useContext(M.b),i=n.getPopupContainer,c=n.getPrefixCls,u=n.direction,l=function(t){var n=e.onCancel;null==n||n(t)},f=function(t){var n=e.onOk;null==n||n(t)},d=function(t){var n=e.okText,r=e.okType,i=e.cancelText,c=e.confirmLoading;return a.createElement(a.Fragment,null,a.createElement(C.a,Object(o.default)({onClick:l},e.cancelButtonProps),i||t.cancelText),a.createElement(C.a,Object(o.default)({},Object(N.a)(r),{loading:c,onClick:f},e.okButtonProps),n||t.okText))},p=e.prefixCls,m=e.footer,h=e.visible,y=e.wrapClassName,v=e.centered,b=e.getContainer,g=e.closeIcon,_=e.focusTriggerAfterClose,w=void 0===_||_,E=oe(e,["prefixCls","footer","visible","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),O=c("modal",p),x=c(),S=a.createElement(D.a,{componentName:"Modal",defaultLocale:Object(q.b)()},d),P=a.createElement("span",{className:"".concat(O,"-close-x")},g||a.createElement(k.a,{className:"".concat(O,"-close-icon")})),T=s()(y,(t={},Object(r.a)(t,"".concat(O,"-centered"),!!v),Object(r.a)(t,"".concat(O,"-wrap-rtl"),"rtl"===u),t));return a.createElement(j,Object(o.default)({},E,{getContainer:void 0===b?i:b,prefixCls:O,wrapClassName:T,footer:void 0===m?S:m,visible:h,mousePosition:ne,onClose:l,closeIcon:P,focusTriggerAfterClose:w,transitionName:Object(L.b)(x,"zoom",e.transitionName),maskTransitionName:Object(L.b)(x,"fade",e.maskTransitionName)}))};ie.useModal=function(){var e=a.useRef(null),t=a.useState([]),n=Object(i.a)(t,2),r=n[0],o=n[1];a.useEffect((function(){r.length&&(Object(S.a)(r).forEach((function(e){e()})),o([]))}),[r]);var c=a.useCallback((function(t){return function(n){var r;ee+=1;var i,c=a.createRef(),u=a.createElement(B,{key:"modal-".concat(ee),config:t(n),ref:c,afterClose:function(){i()}});return i=null===(r=e.current)||void 0===r?void 0:r.patchElement(u),{destroy:function(){function e(){var e;null===(e=c.current)||void 0===e||e.destroy()}c.current?e():o((function(t){return[].concat(Object(S.a)(t),[e])}))},update:function(e){function t(){var t;null===(t=c.current)||void 0===t||t.update(e)}c.current?t():o((function(e){return[].concat(Object(S.a)(e),[t])}))}}}}),[]);return[a.useMemo((function(){return{info:c(Q),success:c(X),error:c(J),warning:c($),confirm:c(Z)}}),[]),a.createElement(te,{ref:e})]},ie.defaultProps={width:520,confirmLoading:!1,visible:!1,okType:"primary"};var ce=ie;function ue(e){return K($(e))}var le=ce;le.info=function(e){return K(Q(e))},le.success=function(e){return K(X(e))},le.error=function(e){return K(J(e))},le.warning=ue,le.warn=ue,le.confirm=function(e){return K(Z(e))},le.destroyAll=function(){for(;ae.length;){var e=ae.pop();e&&e()}},le.config=function(e){var t=e.rootPrefixCls;Object(T.a)(!1,"Modal","Modal.config is deprecated. Please use ConfigProvider.config instead."),W=t};t.a=le},function(e,t,n){"use strict";function r(e){return new Promise((function(t){!function n(){document.querySelector(e)?t():setTimeout(n,100)}()}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0);function o(e,t,n){var o=r.useRef({});return"value"in o.current&&!n(o.current.condition,t)||(o.current.value=e(),o.current.condition=t),o.current.value}},function(e,t,n){"use strict";t.a={placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(353),o="data-rc-order",a="rc-util-key",i=new Map;function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):a}function u(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function l(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function s(e){return Array.from((i.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(r.a)())return null;var n=t.csp,a=t.prepend,i=document.createElement("style");i.setAttribute(o,l(a)),(null==n?void 0:n.nonce)&&(i.nonce=null==n?void 0:n.nonce),i.innerHTML=e;var c=u(t),f=c.firstChild;if(a){if("queue"===a){var d=s(c).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute(o))}));if(d.length)return c.insertBefore(i,d[d.length-1].nextSibling),i}c.insertBefore(i,f)}else c.appendChild(i);return i}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u(t);return s(n).find((function(n){return n.getAttribute(c(t))===e}))}function p(e,t){var n=i.get(e);if(!n||!document.contains(n)){var r=f("",t),o=r.parentNode;i.set(e,o),o.removeChild(r)}}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=u(n);p(r,n);var o=d(t,n);if(o){var a,i,l;if((null===(a=n.csp)||void 0===a?void 0:a.nonce)&&o.nonce!==(null===(i=n.csp)||void 0===i?void 0:i.nonce))o.nonce=null===(l=n.csp)||void 0===l?void 0:l.nonce;return o.innerHTML!==e&&(o.innerHTML=e),o}var s=f(e,n);return s.setAttribute(c(n),t),s}},function(e,t,n){"use strict";var r=n(11),o=n(14),a=n(57),i=n(58),c=n(203),u=n(66),l=n(72),s=n(0),f=n.n(s),d=n(39),p=n.n(d),m=n(119),h=n(640),y=n(689),v=n(181),b=n(251),g=n(1316),_=n(10),w=n.n(_);function E(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}var O=n(28),x=n(55),j=n(847),k=n(228);function S(e){var t=e.prefixCls,n=e.motion,r=e.animation,o=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:o?{motionName:o}:null)}function C(e){var t=e.prefixCls,n=e.visible,a=e.zIndex,i=e.mask,c=e.maskMotion,u=e.maskAnimation,l=e.maskTransitionName;if(!i)return null;var f={};return(c||l||u)&&(f=Object(r.a)({motionAppear:!0},S({motion:c,prefixCls:t,transitionName:l,animation:u}))),s.createElement(k.b,Object(o.default)({},f,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return s.createElement("div",{style:{zIndex:a},className:w()("".concat(t,"-mask"),n)})}))}var N,P=n(41),T=n(616);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function M(){if(void 0!==N)return N;N="";var e=document.createElement("p").style;for(var t in D)t+"Transform"in e&&(N=t);return N}function F(){return M()?"".concat(M(),"TransitionProperty"):"transitionProperty"}function B(){return M()?"".concat(M(),"Transform"):"transform"}function U(e,t){var n=F();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function z(e,t){var n=B();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var G,V=/matrix\((.*)\)/,Y=/matrix3d\((.*)\)/;function q(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function H(e,t,n){var r=n;if("object"!==I(t))return void 0!==r?("number"==typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):G(e,t);for(var o in t)t.hasOwnProperty(o)&&H(e,o,t[o])}function W(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function K(e){return W(e)}function $(e){return W(e,!0)}function Q(e){var t=function(e){var t,n,r,o=e.ownerDocument,a=o.body,i=o&&o.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=i.clientLeft||a.clientLeft||0,top:r-=i.clientTop||a.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=K(r),t.top+=$(r),t}function X(e){return null!=e&&e==e.window}function J(e){return X(e)?e.document:9===e.nodeType?e:e.ownerDocument}var Z=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),ee=/^(top|right|bottom|left)$/;function te(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function ne(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function re(e,t,n){"static"===H(e,"position")&&(e.style.position="relative");var r=-999,o=-999,a=te("left",n),i=te("top",n),c=ne(a),u=ne(i);"left"!==a&&(r=999),"top"!==i&&(o=999);var l,s="",f=Q(e);("left"in t||"top"in t)&&(s=(l=e).style.transitionProperty||l.style[F()]||"",U(e,"none")),"left"in t&&(e.style[c]="",e.style[a]="".concat(r,"px")),"top"in t&&(e.style[u]="",e.style[i]="".concat(o,"px")),q(e);var d=Q(e),p={};for(var m in t)if(t.hasOwnProperty(m)){var h=te(m,n),y="left"===m?r:o,v=f[m]-d[m];p[h]=h===m?y+v:y-v}H(e,p),q(e),("left"in t||"top"in t)&&U(e,s);var b={};for(var g in t)if(t.hasOwnProperty(g)){var _=te(g,n),w=t[g]-f[g];b[_]=g===_?p[_]+w:p[_]-w}H(e,b)}function oe(e,t){var n=Q(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(B());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),o={x:r.x,y:r.y};"left"in t&&(o.x=r.x+t.left-n.left),"top"in t&&(o.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(B());if(r&&"none"!==r){var o,a=r.match(V);a?((o=(a=a[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,o[5]=t.y,z(e,"matrix(".concat(o.join(","),")"))):((o=r.match(Y)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,o[13]=t.y,z(e,"matrix3d(".concat(o.join(","),")")))}else z(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,o)}function ae(e,t){for(var n=0;n<e.length;n++)t(e[n])}function ie(e){return"border-box"===G(e,"boxSizing")}"undefined"!=typeof window&&(G=window.getComputedStyle?function(e,t,n){var r=n,o="",a=J(e);return(r=r||a.defaultView.getComputedStyle(e,null))&&(o=r.getPropertyValue(t)||r[t]),o}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(Z.test(n)&&!ee.test(t)){var r=e.style,o=r.left,a=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=o,e.runtimeStyle.left=a}return""===n?"auto":n});var ce=["margin","border","padding"];function ue(e,t,n){var r,o={},a=e.style;for(r in t)t.hasOwnProperty(r)&&(o[r]=a[r],a[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(a[r]=o[r])}function le(e,t,n){var r,o,a,i=0;for(o=0;o<t.length;o++)if(r=t[o])for(a=0;a<n.length;a++){var c=void 0;c="border"===r?"".concat(r).concat(n[a],"Width"):r+n[a],i+=parseFloat(G(e,c))||0}return i}var se={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function fe(e,t,n){var r=n;if(X(e))return"width"===t?se.viewportWidth(e):se.viewportHeight(e);if(9===e.nodeType)return"width"===t?se.docWidth(e):se.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],a="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),i=ie(e),c=0;(null==a||a<=0)&&(a=void 0,(null==(c=G(e,t))||Number(c)<0)&&(c=e.style[t]||0),c=parseFloat(c)||0),void 0===r&&(r=i?1:-1);var u=void 0!==a||i,l=a||c;return-1===r?u?l-le(e,["border","padding"],o):c:u?1===r?l:l+(2===r?-le(e,["border"],o):le(e,["margin"],o)):c+le(e,ce.slice(r),o)}ae(["Width","Height"],(function(e){se["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],se["viewport".concat(e)](n))},se["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,o=r.body,a=r.documentElement[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}}));var de={position:"absolute",visibility:"hidden",display:"block"};function pe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=t[0];return 0!==o.offsetWidth?r=fe.apply(void 0,t):ue(o,de,(function(){r=fe.apply(void 0,t)})),r}function me(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}ae(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);se["outer".concat(t)]=function(t,n){return t&&pe(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];se[e]=function(t,r){var o=r;return void 0!==o?t?(ie(t)&&(o+=le(t,["padding","border"],n)),H(t,e,o)):void 0:t&&pe(t,e,-1)}}));var he={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:J,offset:function(e,t,n){if(void 0===t)return Q(e);!function(e,t,n){if(n.ignoreShake){var r=Q(e),o=r.left.toFixed(0),a=r.top.toFixed(0),i=t.left.toFixed(0),c=t.top.toFixed(0);if(o===i&&a===c)return}n.useCssRight||n.useCssBottom?re(e,t,n):n.useCssTransform&&B()in document.body.style?oe(e,t):re(e,t,n)}(e,t,n||{})},isWindow:X,each:ae,css:H,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:me,getWindowScrollLeft:function(e){return K(e)},getWindowScrollTop:function(e){return $(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)he.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};me(he,se);var ye=he.getParent;function ve(e){if(he.isWindow(e)||9===e.nodeType)return null;var t,n=he.getDocument(e).body,r=he.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:ye(e);for(t=ye(e);t&&t!==n&&9!==t.nodeType;t=ye(t))if("static"!==(r=he.css(t,"position")))return t;return null}var be=he.getParent;function ge(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=ve(e),o=he.getDocument(e),a=o.defaultView||o.parentWindow,i=o.body,c=o.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===i||r===c||"visible"===he.css(r,"overflow")){if(r===i||r===c)break}else{var u=he.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=ve(r)}var l=null;he.isWindow(e)||9===e.nodeType||(l=e.style.position,"absolute"===he.css(e,"position")&&(e.style.position="fixed"));var s=he.getWindowScrollLeft(a),f=he.getWindowScrollTop(a),d=he.viewportWidth(a),p=he.viewportHeight(a),m=c.scrollWidth,h=c.scrollHeight,y=window.getComputedStyle(i);if("hidden"===y.overflowX&&(m=a.innerWidth),"hidden"===y.overflowY&&(h=a.innerHeight),e.style&&(e.style.position=l),t||function(e){if(he.isWindow(e)||9===e.nodeType)return!1;var t=he.getDocument(e),n=t.body,r=null;for(r=be(e);r&&r!==n&&r!==t;r=be(r))if("fixed"===he.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,s),n.top=Math.max(n.top,f),n.right=Math.min(n.right,s+d),n.bottom=Math.min(n.bottom,f+p);else{var v=Math.max(m,s+d);n.right=Math.min(n.right,v);var b=Math.max(h,f+p);n.bottom=Math.min(n.bottom,b)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function _e(e){var t,n,r;if(he.isWindow(e)||9===e.nodeType){var o=he.getWindow(e);t={left:he.getWindowScrollLeft(o),top:he.getWindowScrollTop(o)},n=he.viewportWidth(o),r=he.viewportHeight(o)}else t=he.offset(e),n=he.outerWidth(e),r=he.outerHeight(e);return t.width=n,t.height=r,t}function we(e,t){var n=t.charAt(0),r=t.charAt(1),o=e.width,a=e.height,i=e.left,c=e.top;return"c"===n?c+=a/2:"b"===n&&(c+=a),"c"===r?i+=o/2:"r"===r&&(i+=o),{left:i,top:c}}function Ee(e,t,n,r,o){var a=we(t,n[1]),i=we(e,n[0]),c=[i.left-a.left,i.top-a.top];return{left:Math.round(e.left-c[0]+r[0]-o[0]),top:Math.round(e.top-c[1]+r[1]-o[1])}}function Oe(e,t,n){return e.left<n.left||e.left+t.width>n.right}function xe(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function je(e,t,n){var r=[];return he.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function ke(e,t){return e[t]=-e[t],e}function Se(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function Ce(e,t){e[0]=Se(e[0],t.width),e[1]=Se(e[1],t.height)}function Ne(e,t,n,r){var o=n.points,a=n.offset||[0,0],i=n.targetOffset||[0,0],c=n.overflow,u=n.source||e;a=[].concat(a),i=[].concat(i);var l={},s=0,f=ge(u,!(!(c=c||{})||!c.alwaysByViewport)),d=_e(u);Ce(a,d),Ce(i,t);var p=Ee(d,t,o,a,i),m=he.merge(d,p);if(f&&(c.adjustX||c.adjustY)&&r){if(c.adjustX&&Oe(p,d,f)){var h=je(o,/[lr]/gi,{l:"r",r:"l"}),y=ke(a,0),v=ke(i,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(Ee(d,t,h,y,v),d,f)||(s=1,o=h,a=y,i=v)}if(c.adjustY&&xe(p,d,f)){var b=je(o,/[tb]/gi,{t:"b",b:"t"}),g=ke(a,1),_=ke(i,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(Ee(d,t,b,g,_),d,f)||(s=1,o=b,a=g,i=_)}s&&(p=Ee(d,t,o,a,i),he.mix(m,p));var w=Oe(p,d,f),E=xe(p,d,f);if(w||E){var O=o;w&&(O=je(o,/[lr]/gi,{l:"r",r:"l"})),E&&(O=je(o,/[tb]/gi,{t:"b",b:"t"})),o=O,a=n.offset||[0,0],i=n.targetOffset||[0,0]}l.adjustX=c.adjustX&&w,l.adjustY=c.adjustY&&E,(l.adjustX||l.adjustY)&&(m=function(e,t,n,r){var o=he.clone(e),a={width:t.width,height:t.height};return r.adjustX&&o.left<n.left&&(o.left=n.left),r.resizeWidth&&o.left>=n.left&&o.left+a.width>n.right&&(a.width-=o.left+a.width-n.right),r.adjustX&&o.left+a.width>n.right&&(o.left=Math.max(n.right-a.width,n.left)),r.adjustY&&o.top<n.top&&(o.top=n.top),r.resizeHeight&&o.top>=n.top&&o.top+a.height>n.bottom&&(a.height-=o.top+a.height-n.bottom),r.adjustY&&o.top+a.height>n.bottom&&(o.top=Math.max(n.bottom-a.height,n.top)),he.mix(o,a)}(p,d,f,l))}return m.width!==d.width&&he.css(u,"width",he.width(u)+m.width-d.width),m.height!==d.height&&he.css(u,"height",he.height(u)+m.height-d.height),he.offset(u,{left:m.left,top:m.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:o,offset:a,targetOffset:i,overflow:l}}function Pe(e,t,n){var r=n.target||t,o=_e(r),a=!function(e,t){var n=ge(e,t),r=_e(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return Ne(e,o,n,a)}Pe.__getOffsetParent=ve,Pe.__getVisibleRectForElement=ge;var Te=n(101),Ae=n.n(Te),Le=n(593);function Ie(e,t){var n=null,r=null;var o=new Le.default((function(e){var o=Object(O.a)(e,1)[0].target;if(document.documentElement.contains(o)){var a=o.getBoundingClientRect(),i=a.width,c=a.height,u=Math.floor(i),l=Math.floor(c);n===u&&r===l||Promise.resolve().then((function(){t({width:u,height:l})})),n=u,r=l}}));return e&&o.observe(e),function(){o.disconnect()}}function Re(e){return"function"!=typeof e?null:e()}function De(e){return"object"===Object(P.a)(e)&&e?e:null}var Me=function(e,t){var n=e.children,r=e.disabled,o=e.target,a=e.align,i=e.onAlign,c=e.monitorWindowResize,u=e.monitorBufferTime,l=void 0===u?0:u,s=f.a.useRef({}),d=f.a.useRef(),p=f.a.Children.only(n),m=f.a.useRef({});m.current.disabled=r,m.current.target=o,m.current.align=a,m.current.onAlign=i;var y=function(e,t){var n=f.a.useRef(!1),r=f.a.useRef(null);function o(){window.clearTimeout(r.current)}return[function a(i){if(o(),n.current&&!0!==i)r.current=window.setTimeout((function(){n.current=!1,a()}),t);else{if(!1===e())return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,o()}]}((function(){var e=m.current,t=e.disabled,n=e.target,r=e.align,o=e.onAlign;if(!t&&n){var a,i=d.current,c=Re(n),u=De(n);s.current.element=c,s.current.point=u,s.current.align=r;var l=document.activeElement;return c&&Object(T.a)(c)?a=Pe(i,c,r):u&&(a=function(e,t,n){var r,o,a=he.getDocument(e),i=a.defaultView||a.parentWindow,c=he.getWindowScrollLeft(i),u=he.getWindowScrollTop(i),l=he.viewportWidth(i),s=he.viewportHeight(i),f={left:r="pageX"in t?t.pageX:c+t.clientX,top:o="pageY"in t?t.pageY:u+t.clientY,width:0,height:0},d=r>=0&&r<=c+l&&o>=0&&o<=u+s,p=[n.points[0],"cc"];return Ne(e,f,L(L({},n),{},{points:p}),d)}(i,u,r)),function(e,t){e!==document.activeElement&&Object(h.a)(t,e)&&"function"==typeof e.focus&&e.focus()}(l,i),o&&a&&o(i,a),!0}return!1}),l),g=Object(O.a)(y,2),_=g[0],w=g[1],E=f.a.useRef({cancel:function(){}}),x=f.a.useRef({cancel:function(){}});f.a.useEffect((function(){var e,t,n=Re(o),r=De(o);d.current!==x.current.element&&(x.current.cancel(),x.current.element=d.current,x.current.cancel=Ie(d.current,_)),s.current.element===n&&((e=s.current.point)===(t=r)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&Ae()(s.current.align,a)||(_(),E.current.element!==n&&(E.current.cancel(),E.current.element=n,E.current.cancel=Ie(n,_)))})),f.a.useEffect((function(){r?w():_()}),[r]);var j=f.a.useRef(null);return f.a.useEffect((function(){c?j.current||(j.current=Object(b.a)(window,"resize",_)):j.current&&(j.current.remove(),j.current=null)}),[c]),f.a.useEffect((function(){return function(){E.current.cancel(),x.current.cancel(),j.current&&j.current.remove(),w()}}),[]),f.a.useImperativeHandle(t,(function(){return{forceAlign:function(){return _(!0)}}})),f.a.isValidElement(p)&&(p=f.a.cloneElement(p,{ref:Object(v.a)(p.ref,d)})),p},Fe=f.a.forwardRef(Me);Fe.displayName="Align";var Be=Fe,Ue=n(545),ze=n(542),Ge=n(429),Ve=n(566),Ye=["measure","alignPre","align",null,"motion"],qe=s.forwardRef((function(e,t){var n=e.visible,a=e.prefixCls,i=e.className,c=e.style,u=e.children,l=e.zIndex,f=e.stretch,d=e.destroyPopupOnHide,p=e.forceRender,h=e.align,y=e.point,v=e.getRootDomNode,b=e.getClassNameFromAlign,g=e.onAlign,_=e.onMouseEnter,E=e.onMouseLeave,x=e.onMouseDown,j=e.onTouchStart,C=e.onClick,N=Object(s.useRef)(),P=Object(s.useRef)(),T=Object(s.useState)(),A=Object(O.a)(T,2),L=A[0],I=A[1],R=function(e){var t=s.useState({width:0,height:0}),n=Object(O.a)(t,2),r=n[0],o=n[1];return[s.useMemo((function(){var t={};if(e){var n=r.width,o=r.height;-1!==e.indexOf("height")&&o?t.height=o:-1!==e.indexOf("minHeight")&&o&&(t.minHeight=o),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,r]),function(e){o({width:e.offsetWidth,height:e.offsetHeight})}]}(f),D=Object(O.a)(R,2),M=D[0],F=D[1];var B=function(e,t){var n=Object(Ve.a)(null),r=Object(O.a)(n,2),o=r[0],a=r[1],i=Object(s.useRef)();function c(e){a(e,!0)}function u(){m.a.cancel(i.current)}return Object(s.useEffect)((function(){c("measure")}),[e]),Object(s.useEffect)((function(){"measure"===o&&t(),o&&(i.current=Object(m.a)(Object(Ge.a)(Object(ze.a)().mark((function e(){var t,n;return Object(ze.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ye.indexOf(o),(n=Ye[t+1])&&-1!==t&&c(n);case 3:case"end":return e.stop()}}),e)})))))}),[o]),Object(s.useEffect)((function(){return function(){u()}}),[]),[o,function(e){u(),i.current=Object(m.a)((function(){c((function(e){switch(o){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(n,(function(){f&&F(v())})),U=Object(O.a)(B,2),z=U[0],G=U[1],V=Object(s.useState)(0),Y=Object(O.a)(V,2),q=Y[0],H=Y[1],W=Object(s.useRef)();function K(){var e;null===(e=N.current)||void 0===e||e.forceAlign()}function $(e,t){var n=b(t);L!==n&&I(n),H((function(e){return e+1})),"align"===z&&(null==g||g(e,t))}Object(Ue.a)((function(){"alignPre"===z&&H(0)}),[z]),Object(Ue.a)((function(){"align"===z&&(q<2?K():G((function(){var e;null===(e=W.current)||void 0===e||e.call(W)})))}),[q]);var Q=Object(r.a)({},S(e));function X(){return new Promise((function(e){W.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=Q[e];Q[e]=function(e,n){return G(),null==t?void 0:t(e,n)}})),s.useEffect((function(){Q.motionName||"motion"!==z||G()}),[Q.motionName,z]),s.useImperativeHandle(t,(function(){return{forceAlign:K,getElement:function(){return P.current}}}));var J=Object(r.a)(Object(r.a)({},M),{},{zIndex:l,opacity:"motion"!==z&&"stable"!==z&&n?0:void 0,pointerEvents:n||"stable"===z?void 0:"none"},c),Z=!0;!(null==h?void 0:h.points)||"align"!==z&&"stable"!==z||(Z=!1);var ee=u;return s.Children.count(u)>1&&(ee=s.createElement("div",{className:"".concat(a,"-content")},u)),s.createElement(k.b,Object(o.default)({visible:n,ref:P,leavedClassName:"".concat(a,"-hidden")},Q,{onAppearPrepare:X,onEnterPrepare:X,removeOnLeave:d,forceRender:p}),(function(e,t){var n=e.className,o=e.style,c=w()(a,i,L,n);return s.createElement(Be,{target:y||v,key:"popup",ref:N,monitorWindowResize:!0,disabled:Z,align:h,onAlign:$},s.createElement("div",{ref:t,className:c,onMouseEnter:_,onMouseLeave:E,onMouseDownCapture:x,onTouchStartCapture:j,onClick:C,style:Object(r.a)(Object(r.a)({},o),J)},ee))}))}));qe.displayName="PopupInner";var He=qe,We=s.forwardRef((function(e,t){var n=e.prefixCls,a=e.visible,i=e.zIndex,c=e.children,u=e.mobile,l=(u=void 0===u?{}:u).popupClassName,f=u.popupStyle,d=u.popupMotion,p=void 0===d?{}:d,m=u.popupRender,h=e.onClick,y=s.useRef();s.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return y.current}}}));var v=Object(r.a)({zIndex:i},f),b=c;return s.Children.count(c)>1&&(b=s.createElement("div",{className:"".concat(n,"-content")},c)),m&&(b=m(b)),s.createElement(k.b,Object(o.default)({visible:a,ref:y,removeOnLeave:!0},p),(function(e,t){var o=e.className,a=e.style,i=w()(n,l,o);return s.createElement("div",{ref:t,className:i,onClick:h,style:Object(r.a)(Object(r.a)({},a),v)},b)}))}));We.displayName="MobilePopupInner";var Ke=We,$e=["visible","mobile"],Qe=s.forwardRef((function(e,t){var n=e.visible,a=e.mobile,i=Object(x.a)(e,$e),c=Object(s.useState)(n),u=Object(O.a)(c,2),l=u[0],f=u[1],d=Object(s.useState)(!1),p=Object(O.a)(d,2),m=p[0],h=p[1],y=Object(r.a)(Object(r.a)({},i),{},{visible:l});Object(s.useEffect)((function(){f(n),n&&a&&h(Object(j.a)())}),[n,a]);var v=m?s.createElement(Ke,Object(o.default)({},y,{mobile:a,ref:t})):s.createElement(He,Object(o.default)({},y,{ref:t}));return s.createElement("div",null,s.createElement(C,y),v)}));Qe.displayName="Popup";var Xe=Qe,Je=s.createContext(null);function Ze(){}function et(){return""}function tt(e){return e?e.ownerDocument:window.document}var nt=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var rt,ot;t.a=(rt=g.a,ot=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r,i;return Object(a.a)(this,n),(r=t.call(this,e)).popupRef=s.createRef(),r.triggerRef=s.createRef(),r.portalContainer=void 0,r.attachId=void 0,r.clickOutsideHandler=void 0,r.touchOutsideHandler=void 0,r.contextMenuOutsideHandler1=void 0,r.contextMenuOutsideHandler2=void 0,r.mouseDownTimeout=void 0,r.focusTime=void 0,r.preClickTime=void 0,r.preTouchTime=void 0,r.delayTimer=void 0,r.hasPopupMouseDown=void 0,r.onMouseEnter=function(e){var t=r.props.mouseEnterDelay;r.fireEvents("onMouseEnter",e),r.delaySetPopupVisible(!0,t,t?null:e)},r.onMouseMove=function(e){r.fireEvents("onMouseMove",e),r.setPoint(e)},r.onMouseLeave=function(e){r.fireEvents("onMouseLeave",e),r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)},r.onPopupMouseEnter=function(){r.clearDelayTimer()},r.onPopupMouseLeave=function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&Object(h.a)(null===(t=r.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)},r.onFocus=function(e){r.fireEvents("onFocus",e),r.clearDelayTimer(),r.isFocusToShow()&&(r.focusTime=Date.now(),r.delaySetPopupVisible(!0,r.props.focusDelay))},r.onMouseDown=function(e){r.fireEvents("onMouseDown",e),r.preClickTime=Date.now()},r.onTouchStart=function(e){r.fireEvents("onTouchStart",e),r.preTouchTime=Date.now()},r.onBlur=function(e){r.fireEvents("onBlur",e),r.clearDelayTimer(),r.isBlurToHide()&&r.delaySetPopupVisible(!1,r.props.blurDelay)},r.onContextMenu=function(e){e.preventDefault(),r.fireEvents("onContextMenu",e),r.setPopupVisible(!0,e)},r.onContextMenuClose=function(){r.isContextMenuToShow()&&r.close()},r.onClick=function(e){if(r.fireEvents("onClick",e),r.focusTime){var t;if(r.preClickTime&&r.preTouchTime?t=Math.min(r.preClickTime,r.preTouchTime):r.preClickTime?t=r.preClickTime:r.preTouchTime&&(t=r.preTouchTime),Math.abs(t-r.focusTime)<20)return;r.focusTime=0}r.preClickTime=0,r.preTouchTime=0,r.isClickToShow()&&(r.isClickToHide()||r.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!r.state.popupVisible;(r.isClickToHide()&&!n||n&&r.isClickToShow())&&r.setPopupVisible(!r.state.popupVisible,e)},r.onPopupMouseDown=function(){var e;r.hasPopupMouseDown=!0,clearTimeout(r.mouseDownTimeout),r.mouseDownTimeout=window.setTimeout((function(){r.hasPopupMouseDown=!1}),0),r.context&&(e=r.context).onPopupMouseDown.apply(e,arguments)},r.onDocumentClick=function(e){if(!r.props.mask||r.props.maskClosable){var t=e.target,n=r.getRootDomNode(),o=r.getPopupDomNode();Object(h.a)(n,t)&&!r.isContextMenuOnly()||Object(h.a)(o,t)||r.hasPopupMouseDown||r.close()}},r.getRootDomNode=function(){var e=r.props.getTriggerDOMNode;if(e)return e(r.triggerRef.current);try{var t=Object(y.a)(r.triggerRef.current);if(t)return t}catch(n){}return p.a.findDOMNode(Object(c.a)(r))},r.getPopupClassNameFromAlign=function(e){var t=[],n=r.props,o=n.popupPlacement,a=n.builtinPlacements,i=n.prefixCls,c=n.alignPoint,u=n.getPopupClassNameFromAlign;return o&&a&&t.push(function(e,t,n,r){for(var o=n.points,a=Object.keys(e),i=0;i<a.length;i+=1){var c=a[i];if(E(e[c].points,o,r))return"".concat(t,"-placement-").concat(c)}return""}(a,i,e,c)),u&&t.push(u(e)),t.join(" ")},r.getComponent=function(){var e=r.props,t=e.prefixCls,n=e.destroyPopupOnHide,a=e.popupClassName,i=e.onPopupAlign,c=e.popupMotion,u=e.popupAnimation,l=e.popupTransitionName,f=e.popupStyle,d=e.mask,p=e.maskAnimation,m=e.maskTransitionName,h=e.maskMotion,y=e.zIndex,v=e.popup,b=e.stretch,g=e.alignPoint,_=e.mobile,w=e.forceRender,E=e.onPopupClick,O=r.state,x=O.popupVisible,j=O.point,k=r.getPopupAlign(),S={};return r.isMouseEnterToShow()&&(S.onMouseEnter=r.onPopupMouseEnter),r.isMouseLeaveToHide()&&(S.onMouseLeave=r.onPopupMouseLeave),S.onMouseDown=r.onPopupMouseDown,S.onTouchStart=r.onPopupMouseDown,s.createElement(Xe,Object(o.default)({prefixCls:t,destroyPopupOnHide:n,visible:x,point:g&&j,className:a,align:k,onAlign:i,animation:u,getClassNameFromAlign:r.getPopupClassNameFromAlign},S,{stretch:b,getRootDomNode:r.getRootDomNode,style:f,mask:d,zIndex:y,transitionName:l,maskAnimation:p,maskTransitionName:m,maskMotion:h,ref:r.popupRef,motion:c,mobile:_,forceRender:w,onClick:E}),"function"==typeof v?v():v)},r.attachParent=function(e){m.a.cancel(r.attachId);var t,n=r.props,o=n.getPopupContainer,a=n.getDocument,i=r.getRootDomNode();o?(i||0===o.length)&&(t=o(i)):t=a(r.getRootDomNode()).body,t?t.appendChild(e):r.attachId=Object(m.a)((function(){r.attachParent(e)}))},r.getContainer=function(){if(!r.portalContainer){var e=(0,r.props.getDocument)(r.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",r.portalContainer=e}return r.attachParent(r.portalContainer),r.portalContainer},r.setPoint=function(e){r.props.alignPoint&&e&&r.setState({point:{pageX:e.pageX,pageY:e.pageY}})},r.handlePortalUpdate=function(){r.state.prevPopupVisible!==r.state.popupVisible&&r.props.afterPopupVisibleChange(r.state.popupVisible)},r.triggerContextValue={onPopupMouseDown:r.onPopupMouseDown},i="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,r.state={prevPopupVisible:i,popupVisible:i},nt.forEach((function(e){r["fire".concat(e)]=function(t){r.fireEvents(e,t)}})),r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Object(b.a)(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Object(b.a)(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Object(b.a)(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Object(b.a)(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),m.a.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,o=e.builtinPlacements;return t&&o?function(e,t,n){var o=e[t]||{};return Object(r.a)(Object(r.a)({},o),n)}(o,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,o=1e3*t;if(this.clearDelayTimer(),o){var a=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,a),r.clearDelayTimer()}),o)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,t=this.props,n=t.children,o=t.forceRender,a=t.alignPoint,i=t.className,c=t.autoDestroy,u=s.Children.only(n),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,a&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var f=w()(u&&u.props&&u.props.className,i);f&&(l.className=f);var d=Object(r.a)({},l);Object(v.c)(u)&&(d.ref=Object(v.a)(this.triggerRef,u.ref));var p,m=s.cloneElement(u,d);return(e||this.popupRef.current||o)&&(p=s.createElement(rt,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&c&&(p=null),s.createElement(Je.Provider,{value:this.triggerContextValue},m,p)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),n}(s.Component),ot.contextType=Je,ot.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:et,getDocument:tt,onPopupVisibleChange:Ze,afterPopupVisibleChange:Ze,onPopupAlign:Ze,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},ot)},function(e,t,n){"use strict";var r=n(14),o=n(11),a=n(28),i=n(55),c=n(0),u=n(10),l=n.n(u),s=n(296),f=n(545),d=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],p=void 0;function m(e,t){var n=e.prefixCls,a=e.invalidate,u=e.item,f=e.renderItem,m=e.responsive,h=e.responsiveDisabled,y=e.registerSize,v=e.itemKey,b=e.className,g=e.style,_=e.children,w=e.display,E=e.order,O=e.component,x=void 0===O?"div":O,j=Object(i.a)(e,d),k=m&&!w;function S(e){y(v,e)}c.useEffect((function(){return function(){S(null)}}),[]);var C,N=f&&u!==p?f(u):_;a||(C={opacity:k?0:1,height:k?0:p,overflowY:k?"hidden":p,order:m?E:p,pointerEvents:k?"none":p,position:k?"absolute":p});var P={};k&&(P["aria-hidden"]=!0);var T=c.createElement(x,Object(r.default)({className:l()(!a&&n,b),style:Object(o.a)(Object(o.a)({},C),g)},P,j,{ref:t}),N);return m&&(T=c.createElement(s.a,{onResize:function(e){S(e.offsetWidth)},disabled:h},T)),T}var h=c.forwardRef(m);h.displayName="Item";var y=h,v=n(119),b=n(566);var g=["component"],_=["className"],w=["className"],E=function(e,t){var n=c.useContext(k);if(!n){var o=e.component,a=void 0===o?"div":o,u=Object(i.a)(e,g);return c.createElement(a,Object(r.default)({},u,{ref:t}))}var s=n.className,f=Object(i.a)(n,_),d=e.className,p=Object(i.a)(e,w);return c.createElement(k.Provider,{value:null},c.createElement(y,Object(r.default)({ref:t,className:l()(s,d)},f,p)))},O=c.forwardRef(E);O.displayName="RawItem";var x=O,j=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],k=c.createContext(null),S="responsive",C="invalidate";function N(e){return"+ ".concat(e.length," ...")}function P(e,t){var n=e.prefixCls,u=void 0===n?"rc-overflow":n,d=e.data,p=void 0===d?[]:d,m=e.renderItem,h=e.renderRawItem,g=e.itemKey,_=e.itemWidth,w=void 0===_?10:_,E=e.ssr,O=e.style,x=e.className,P=e.maxCount,T=e.renderRest,A=e.renderRawRest,L=e.suffix,I=e.component,R=void 0===I?"div":I,D=e.itemComponent,M=e.onVisibleChange,F=Object(i.a)(e,j),B=function(){var e=Object(b.a)({}),t=Object(a.a)(e,2)[1],n=Object(c.useRef)([]),r=0,o=0;return function(e){var a=r;return r+=1,n.current.length<a+1&&(n.current[a]=e),[n.current[a],function(e){n.current[a]="function"==typeof e?e(n.current[a]):e,v.a.cancel(o),o=Object(v.a)((function(){t({},!0)}))}]}}(),U="full"===E,z=B(null),G=Object(a.a)(z,2),V=G[0],Y=G[1],q=V||0,H=B(new Map),W=Object(a.a)(H,2),K=W[0],$=W[1],Q=B(0),X=Object(a.a)(Q,2),J=X[0],Z=X[1],ee=B(0),te=Object(a.a)(ee,2),ne=te[0],re=te[1],oe=B(0),ae=Object(a.a)(oe,2),ie=ae[0],ce=ae[1],ue=Object(c.useState)(null),le=Object(a.a)(ue,2),se=le[0],fe=le[1],de=Object(c.useState)(null),pe=Object(a.a)(de,2),me=pe[0],he=pe[1],ye=c.useMemo((function(){return null===me&&U?Number.MAX_SAFE_INTEGER:me||0}),[me,V]),ve=Object(c.useState)(!1),be=Object(a.a)(ve,2),ge=be[0],_e=be[1],we="".concat(u,"-item"),Ee=Math.max(J,ne),Oe=P===S,xe=p.length&&Oe,je=P===C,ke=xe||"number"==typeof P&&p.length>P,Se=Object(c.useMemo)((function(){var e=p;return xe?e=null===V&&U?p:p.slice(0,Math.min(p.length,q/w)):"number"==typeof P&&(e=p.slice(0,P)),e}),[p,w,V,P,xe]),Ce=Object(c.useMemo)((function(){return xe?p.slice(ye+1):p.slice(Se.length)}),[p,Se,xe,ye]),Ne=Object(c.useCallback)((function(e,t){var n;return"function"==typeof g?g(e):null!==(n=g&&(null==e?void 0:e[g]))&&void 0!==n?n:t}),[g]),Pe=Object(c.useCallback)(m||function(e){return e},[m]);function Te(e,t,n){(me!==e||void 0!==t&&t!==se)&&(he(e),n||(_e(e<p.length-1),null==M||M(e)),void 0!==t&&fe(t))}function Ae(e,t){$((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function Le(e){return K.get(Ne(Se[e],e))}Object(f.a)((function(){if(q&&Ee&&Se){var e=ie,t=Se.length,n=t-1;if(!t)return void Te(0,null);for(var r=0;r<t;r+=1){var o=Le(r);if(U&&(o=o||0),void 0===o){Te(r-1,void 0,!0);break}if(e+=o,0===n&&e<=q||r===n-1&&e+Le(n)<=q){Te(n,null);break}if(e+Ee>q){Te(r-1,e-o-ie+ne);break}}L&&Le(0)+ie>q&&fe(null)}}),[q,K,ne,ie,Ne,Se]);var Ie=ge&&!!Ce.length,Re={};null!==se&&xe&&(Re={position:"absolute",left:se,top:0});var De,Me={prefixCls:we,responsive:xe,component:D,invalidate:je},Fe=h?function(e,t){var n=Ne(e,t);return c.createElement(k.Provider,{key:n,value:Object(o.a)(Object(o.a)({},Me),{},{order:t,item:e,itemKey:n,registerSize:Ae,display:t<=ye})},h(e,t))}:function(e,t){var n=Ne(e,t);return c.createElement(y,Object(r.default)({},Me,{order:t,key:n,item:e,renderItem:Pe,itemKey:n,registerSize:Ae,display:t<=ye}))},Be={order:Ie?ye:Number.MAX_SAFE_INTEGER,className:"".concat(we,"-rest"),registerSize:function(e,t){re(t),Z(ne)},display:Ie};if(A)A&&(De=c.createElement(k.Provider,{value:Object(o.a)(Object(o.a)({},Me),Be)},A(Ce)));else{var Ue=T||N;De=c.createElement(y,Object(r.default)({},Me,Be),"function"==typeof Ue?Ue(Ce):Ue)}var ze=c.createElement(R,Object(r.default)({className:l()(!je&&u,x),style:O,ref:t},F),Se.map(Fe),ke?De:null,L&&c.createElement(y,Object(r.default)({},Me,{responsive:Oe,responsiveDisabled:!xe,order:ye,className:"".concat(we,"-suffix"),registerSize:function(e,t){ce(t)},display:!0,style:Re}),L));return Oe&&(ze=c.createElement(s.a,{onResize:function(e,t){Y(t.clientWidth)},disabled:!xe},ze)),ze}var T=c.forwardRef(P);T.displayName="Overflow",T.Item=x,T.RESPONSIVE=S,T.INVALIDATE=C;var A=T;t.a=A},function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"e",(function(){return _}));var r=n(14),o=n(57),a=n(58),i=n(66),c=n(72),u=n(18),l=n(0),s=n(10),f=n.n(s),d=n(126),p=n(1030),m=n(257),h=n(132),y=n(95);function v(e){return null==e?"":e}function b(e,t,n,r){if(n){var o=t,a=e.value;return"click"===t.type?((o=Object.create(t)).target=e,o.currentTarget=e,e.value="",n(o),void(e.value=a)):void 0!==r?((o=Object.create(t)).target=e,o.currentTarget=e,e.value=r,void n(o)):void n(o)}}function g(e,t,n,r,o){var a;return f()(e,(a={},Object(u.a)(a,"".concat(e,"-sm"),"small"===n),Object(u.a)(a,"".concat(e,"-lg"),"large"===n),Object(u.a)(a,"".concat(e,"-disabled"),r),Object(u.a)(a,"".concat(e,"-rtl"),"rtl"===o),Object(u.a)(a,"".concat(e,"-borderless"),!t),a))}function _(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}var w=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).direction="ltr",a.focus=function(e){_(a.input,e)},a.saveClearableInput=function(e){a.clearableInput=e},a.saveInput=function(e){a.input=e},a.onFocus=function(e){var t=a.props.onFocus;a.setState({focused:!0},a.clearPasswordValueAttribute),null==t||t(e)},a.onBlur=function(e){var t=a.props.onBlur;a.setState({focused:!1},a.clearPasswordValueAttribute),null==t||t(e)},a.handleReset=function(e){a.setValue("",(function(){a.focus()})),b(a.input,e,a.props.onChange)},a.renderInput=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=a.props,c=i.className,s=i.addonBefore,p=i.addonAfter,m=i.size,h=i.disabled,y=Object(d.a)(a.props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","inputType","bordered"]);return l.createElement("input",Object(r.default)({autoComplete:o.autoComplete},y,{onChange:a.handleChange,onFocus:a.onFocus,onBlur:a.onBlur,onKeyDown:a.handleKeyDown,className:f()(g(e,n,m||t,h,a.direction),Object(u.a)({},c,c&&!s&&!p)),ref:a.saveInput}))},a.clearPasswordValueAttribute=function(){a.removePasswordTimeout=setTimeout((function(){a.input&&"password"===a.input.getAttribute("type")&&a.input.hasAttribute("value")&&a.input.removeAttribute("value")}))},a.handleChange=function(e){a.setValue(e.target.value,a.clearPasswordValueAttribute),b(a.input,e,a.props.onChange)},a.handleKeyDown=function(e){var t=a.props,n=t.onPressEnter,r=t.onKeyDown;n&&13===e.keyCode&&n(e),null==r||r(e)},a.renderComponent=function(e){var t=e.getPrefixCls,n=e.direction,o=e.input,i=a.state,c=i.value,u=i.focused,s=a.props,f=s.prefixCls,d=s.bordered,m=void 0===d||d,y=t("input",f);return a.direction=n,l.createElement(h.b.Consumer,null,(function(e){return l.createElement(p.a,Object(r.default)({size:e},a.props,{prefixCls:y,inputType:"input",value:v(c),element:a.renderInput(y,e,m,o),handleReset:a.handleReset,ref:a.saveClearableInput,direction:n,focused:u,triggerFocus:a.focus,bordered:m}))}))};var i=void 0===e.value?e.defaultValue:e.value;return a.state={value:i,focused:!1,prevValue:e.value},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.clearPasswordValueAttribute()}},{key:"componentDidUpdate",value:function(){}},{key:"getSnapshotBeforeUpdate",value:function(e){return Object(p.b)(e)!==Object(p.b)(this.props)&&Object(y.a)(this.input!==document.activeElement,"Input","When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ"),null}},{key:"componentWillUnmount",value:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)}},{key:"blur",value:function(){this.input.blur()}},{key:"setSelectionRange",value:function(e,t,n){this.input.setSelectionRange(e,t,n)}},{key:"select",value:function(){this.input.select()}},{key:"setValue",value:function(e,t){void 0===this.props.value?this.setState({value:e},t):null==t||t()}},{key:"render",value:function(){return l.createElement(m.a,null,this.renderComponent)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevValue,r={prevValue:e.value};return void 0===e.value&&n===e.value||(r.value=e.value),r}}]),n}(l.Component);w.defaultProps={type:"text"},t.a=w},function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var r=n(18),o=n(14),a=["xxl","xl","lg","md","sm","xs"],i={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},c=new Map,u=-1,l={},s={matchHandlers:{},dispatch:function(e){return l=e,c.forEach((function(e){return e(l)})),c.size>=1},subscribe:function(e){return c.size||this.register(),u+=1,c.set(u,e),e(l),u},unsubscribe:function(e){c.delete(e),c.size||this.unregister()},unregister:function(){var e=this;Object.keys(i).forEach((function(t){var n=i[t],r=e.matchHandlers[n];null==r||r.mql.removeListener(null==r?void 0:r.listener)})),c.clear()},register:function(){var e=this;Object.keys(i).forEach((function(t){var n=i[t],a=function(n){var a=n.matches;e.dispatch(Object(o.default)(Object(o.default)({},l),Object(r.a)({},t,a)))},c=window.matchMedia(n);c.addListener(a),e.matchHandlers[n]={mql:c,listener:a},a(c)}))}};t.a=s},function(e,t,n){"use strict";e.exports={STATUS:{on_shelves:1,off_shelves:-1,waiting:0}}},function(e,t,n){"use strict";t.a={modal:"CatalogViewModel-module_modal_rJNDk",modalTitle:"CatalogViewModel-module_modalTitle_AJ8tO",modalDescription:"CatalogViewModel-module_modalDescription_n0icU",btnCloseModal:"CatalogViewModel-module_btnCloseModal_j2eMP"}},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(79);var r=n(44),o=(n(148),n(53)),a=(n(75),n(26)),i=(n(130),n(35)),c=(n(144),n(33)),u=(n(218),n(51)),l=n(0),s=n.n(l),f=n(2),d=n.n(f),p=n(1031),m=n(109),h=n(54),y="Form-module_auditBlockForm_8w2pu";function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(){b=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var g=p.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==v(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,c,"next",e)}function c(e){E(a,r,o,i,c,"throw",e)}i(void 0)}))}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=Object.keys(p.REASONS).map((function(e){return{label:p.REASONS[e].name,value:e}})),S={none:__("暂不处置"),blocked:__("屏蔽"),banned:__("封禁")};function C(e){var t=e.title,n=e.onSubmit,l=e.onCancel,f=e.doc,d=e.punishSelect,m=void 0===d?["blocked"]:d,v=e.notifyTypes,g=void 0===v?["notification","email"]:v,w=e.punishType,E=x(u.a.useForm(),1)[0],j=window.appData.me,C=void 0===j?{}:j,N=C.isSecurityOperator;function P(){return(P=O(b().mark((function e(){var t,r,o,a,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=E.getFieldsValue(),"Doc"!==w||!f){e.next=9;break}return r=N?"blockForSecurityOps":"block",e.next=5,h.a.docs[r](_(_({},t),{},{id:f.id}));case 5:o=e.sent,n(o),e.next=15;break;case 9:if("Note"!==w||!f){e.next=15;break}return a=N?"blockForSecurityOps":"block",e.next=13,h.a.notes[a](_(_({},t),{},{id:f.id}));case 13:i=e.sent,n(i);case 15:E.submit();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return!e.punishSelect&&C&&C.isSuperAdmin&&m.push("banned"),E.setFieldsValue({punish:m[0],notifyTypes:g,punish_user:"none"}),s.a.createElement(r.a,{title:t,visible:!0,onOk:function(){return P.apply(this,arguments)},onCancel:l,width:800},s.a.createElement("div",{"data-testid":"audit-block-form"},s.a.createElement(u.a,{form:E,className:y,onFinish:n,onValuesChange:function(e){e.reason&&(e.description=p.REASONS[e.reason].desc||__("涉嫌违规")),E.setFieldsValue(e)}},s.a.createElement(u.a.Item,{label:__("处罚"),name:"punish",rules:[{required:!0}]},s.a.createElement(c.a.Group,null,m.map((function(e){return s.a.createElement(c.a,{value:e},S[e])})))),s.a.createElement(u.a.Item,{label:__("原因"),name:"reason",rules:[{required:!0}]},s.a.createElement(i.a,{placeholder:__("请选择处罚原因"),options:k})),s.a.createElement(u.a.Item,{label:__("描述（尽量别改）"),name:"description"},s.a.createElement(a.a.TextArea,{autoSize:{minRows:3}})),s.a.createElement(u.a.Item,{label:__("备注（不会发送给用户）"),name:"remarks"},s.a.createElement(a.a.TextArea,{autoSize:{minRows:3}})),s.a.createElement(u.a.Item,{label:__("通知渠道"),name:"notifyTypes"},s.a.createElement(o.a.Group,{style:{width:"100%"}},s.a.createElement(o.a,{value:"notification"},"系统消息"),s.a.createElement(o.a,{value:"email"},"邮件"),w&&p.ALLOWED_SMS_AUDIT_TYPE.includes(w)&&s.a.createElement(o.a,{value:"sms"},"短信"))))))}C.propTypes={doc:d.a.object,title:d.a.string,onSubmit:d.a.func,onCancel:d.a.func,punishSelect:d.a.array,notifyTypes:d.a.array,punishType:d.a.string};t.default=Object(m.b)(C)},,,function(e,t,n){"use strict";n(162)},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(85);function o(e,t){var n=new Set;return e.forEach((function(e){t.has(e)||n.add(e)})),n}function a(e){var t=e||{},n=t.disabled,r=t.disableCheckbox,o=t.checkable;return!(!n&&!r)||!1===o}function i(e,t,n,i){var c,u=[];c=i||a;var l,s=new Set(e.filter((function(e){var t=!!n[e];return t||u.push(e),t}))),f=new Map,d=0;return Object.keys(n).forEach((function(e){var t=n[e],r=t.level,o=f.get(r);o||(o=new Set,f.set(r,o)),o.add(t),d=Math.max(d,r)})),Object(r.a)(!u.length,"Tree missing follow keys: ".concat(u.slice(0,100).map((function(e){return"'".concat(e,"'")})).join(", "))),l=!0===t?function(e,t,n,r){for(var a=new Set(e),i=new Set,c=0;c<=n;c+=1)(t.get(c)||new Set).forEach((function(e){var t=e.key,n=e.node,o=e.children,i=void 0===o?[]:o;a.has(t)&&!r(n)&&i.filter((function(e){return!r(e.node)})).forEach((function(e){a.add(e.key)}))}));for(var u=new Set,l=n;l>=0;l-=1)(t.get(l)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!r(n)&&e.parent&&!u.has(e.parent.key))if(r(e.parent.node))u.add(t.key);else{var o=!0,c=!1;(t.children||[]).filter((function(e){return!r(e.node)})).forEach((function(e){var t=e.key,n=a.has(t);o&&!n&&(o=!1),c||!n&&!i.has(t)||(c=!0)})),o&&a.add(t.key),c&&i.add(t.key),u.add(t.key)}}));return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(o(i,a))}}(s,f,d,c):function(e,t,n,r,a){for(var i=new Set(e),c=new Set(t),u=0;u<=r;u+=1)(n.get(u)||new Set).forEach((function(e){var t=e.key,n=e.node,r=e.children,o=void 0===r?[]:r;i.has(t)||c.has(t)||a(n)||o.filter((function(e){return!a(e.node)})).forEach((function(e){i.delete(e.key)}))}));c=new Set;for(var l=new Set,s=r;s>=0;s-=1)(n.get(s)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!a(n)&&e.parent&&!l.has(e.parent.key))if(a(e.parent.node))l.add(t.key);else{var r=!0,o=!1;(t.children||[]).filter((function(e){return!a(e.node)})).forEach((function(e){var t=e.key,n=i.has(t);r&&!n&&(r=!1),o||!n&&!c.has(t)||(o=!0)})),r||i.delete(t.key),o&&c.add(t.key),l.add(t.key)}}));return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(o(c,i))}}(s,t.halfCheckedKeys,f,d,c),l}},,,,function(e,t,n){"use strict";t.a={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}},function(e,t,n){"use strict";var r=n(32),o=n.n(r),a=n(85),i={getNow:function(){return o()()},getFixedDate:function(e){return o()(e,"YYYY-MM-DD")},getEndDate:function(e){return e.clone().endOf("month")},getWeekDay:function(e){var t=e.clone().locale("en_US");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},addYear:function(e,t){return e.clone().add(t,"year")},addMonth:function(e,t){return e.clone().add(t,"month")},addDate:function(e,t){return e.clone().add(t,"day")},setYear:function(e,t){return e.clone().year(t)},setMonth:function(e,t){return e.clone().month(t)},setDate:function(e,t){return e.clone().date(t)},setHour:function(e,t){return e.clone().hour(t)},setMinute:function(e,t){return e.clone().minute(t)},setSecond:function(e,t){return e.clone().second(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return o()().locale(e).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.clone().locale(e).weekday(0)},getWeek:function(e,t){return t.clone().locale(e).week()},getShortWeekDays:function(e){return o()().locale(e).localeData().weekdaysMin()},getShortMonths:function(e){return o()().locale(e).localeData().monthsShort()},format:function(e,t,n){return t.clone().locale(e).format(n)},parse:function(e,t,n){for(var r=[],i=0;i<n.length;i+=1){var c=n[i],u=t;if(c.includes("wo")||c.includes("Wo")){var l=(c=c.replace(/wo/g,"w").replace(/Wo/g,"W")).match(/[-YyMmDdHhSsWwGg]+/g),s=u.match(/[-\d]+/g);l&&s?(c=l.join(""),u=s.join("")):r.push(c.replace(/o/g,""))}var f=o()(u,c,e,!0);if(f.isValid())return f}for(var d=0;d<r.length;d+=1){var p=o()(t,r[d],e,!1);if(p.isValid())return Object(a.b)(!1,"Not match any format strictly and fallback to fuzzy match. Please help to fire a issue about this."),p}return null}}};t.a=i},function(e,t,n){"use strict";var r=n(41),o=n(18),a=n(14),i=n(28),c=n(0),u=n.n(c),l=n(11),s=n(57),f=n(58),d=n(66),p=n(72),m=n(85),h=function(e){var t,n,r=e.className,a=e.included,i=e.vertical,c=e.style,s=e.length,f=e.offset,d=e.reverse;s<0&&(d=!d,s=Math.abs(s),f=100-f);var p=i?(t={},Object(o.a)(t,d?"top":"bottom","".concat(f,"%")),Object(o.a)(t,d?"bottom":"top","auto"),Object(o.a)(t,"height","".concat(s,"%")),t):(n={},Object(o.a)(n,d?"right":"left","".concat(f,"%")),Object(o.a)(n,d?"left":"right","auto"),Object(o.a)(n,"width","".concat(s,"%")),n),m=Object(l.a)(Object(l.a)({},c),p);return a?u.a.createElement("div",{className:r,style:m}):null},y=n(55),v=n(40),b=n(607),g=n(129),_=n(251),w=n(10),E=n.n(w),O=function(e){var t=e.prefixCls,n=e.vertical,r=e.reverse,a=e.marks,i=e.dots,c=e.step,s=e.included,f=e.lowerBound,d=e.upperBound,p=e.max,h=e.min,y=e.dotStyle,v=e.activeDotStyle,b=p-h,g=function(e,t,n,r,o,a){Object(m.a)(!n||r>0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var i=Object.keys(t).map(parseFloat).sort((function(e,t){return e-t}));if(n&&r)for(var c=o;c<=a;c+=r)-1===i.indexOf(c)&&i.push(c);return i}(0,a,i,c,h,p).map((function(e){var a,i="".concat(Math.abs(e-h)/b*100,"%"),c=!s&&e===d||s&&e<=d&&e>=f,p=n?Object(l.a)(Object(l.a)({},y),{},Object(o.a)({},r?"top":"bottom",i)):Object(l.a)(Object(l.a)({},y),{},Object(o.a)({},r?"right":"left",i));c&&(p=Object(l.a)(Object(l.a)({},p),v));var m=E()((a={},Object(o.a)(a,"".concat(t,"-dot"),!0),Object(o.a)(a,"".concat(t,"-dot-active"),c),Object(o.a)(a,"".concat(t,"-dot-reverse"),r),a));return u.a.createElement("span",{className:m,style:p,key:e})}));return u.a.createElement("div",{className:"".concat(t,"-step")},g)},x=function(e){var t=e.className,n=e.vertical,a=e.reverse,i=e.marks,c=e.included,s=e.upperBound,f=e.lowerBound,d=e.max,p=e.min,m=e.onClickLabel,h=Object.keys(i),y=d-p,v=h.map(parseFloat).sort((function(e,t){return e-t})).map((function(e){var d,h=i[e],v="object"===Object(r.a)(h)&&!u.a.isValidElement(h),b=v?h.label:h;if(!b&&0!==b)return null;var g=!c&&e===s||c&&e<=s&&e>=f,_=E()((d={},Object(o.a)(d,"".concat(t,"-text"),!0),Object(o.a)(d,"".concat(t,"-text-active"),g),d)),w=Object(o.a)({marginBottom:"-50%"},a?"top":"bottom","".concat((e-p)/y*100,"%")),O=Object(o.a)({transform:"translateX(".concat(a?"50%":"-50%",")"),msTransform:"translateX(".concat(a?"50%":"-50%",")")},a?"right":"left","".concat((e-p)/y*100,"%")),x=n?w:O,j=v?Object(l.a)(Object(l.a)({},x),h.style):x;return u.a.createElement("span",{className:_,style:j,key:e,onMouseDown:function(t){return m(t,e)},onTouchStart:function(t){return m(t,e)}},b)}));return u.a.createElement("div",{className:t},v)},j=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).state={clickFocused:!1},e.setHandleRef=function(t){e.handle=t},e.handleMouseUp=function(){document.activeElement===e.handle&&e.setClickFocus(!0)},e.handleMouseDown=function(t){t.preventDefault(),e.focus()},e.handleBlur=function(){e.setClickFocus(!1)},e.handleKeyDown=function(){e.setClickFocus(!1)},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.onMouseUpListener=Object(_.a)(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(e){this.setState({clickFocused:e})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var e,t,n,r=this.props,i=r.prefixCls,c=r.vertical,s=r.reverse,f=r.offset,d=r.style,p=r.disabled,m=r.min,h=r.max,v=r.value,b=r.tabIndex,g=r.ariaLabel,_=r.ariaLabelledBy,w=r.ariaValueTextFormatter,O=Object(y.a)(r,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),x=E()(this.props.className,Object(o.a)({},"".concat(i,"-handle-click-focused"),this.state.clickFocused)),j=c?(e={},Object(o.a)(e,s?"top":"bottom","".concat(f,"%")),Object(o.a)(e,s?"bottom":"top","auto"),Object(o.a)(e,"transform",s?null:"translateY(+50%)"),e):(t={},Object(o.a)(t,s?"right":"left","".concat(f,"%")),Object(o.a)(t,s?"left":"right","auto"),Object(o.a)(t,"transform","translateX(".concat(s?"+":"-","50%)")),t),k=Object(l.a)(Object(l.a)({},d),j),S=b||0;return(p||null===b)&&(S=null),w&&(n=w(v)),u.a.createElement("div",Object(a.default)({ref:this.setHandleRef,tabIndex:S},O,{className:x,style:k,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":m,"aria-valuemax":h,"aria-valuenow":v,"aria-disabled":!!p,"aria-label":g,"aria-labelledby":_,"aria-valuetext":n}))}}]),n}(u.a.Component),k=n(39),S=n(70);function C(e,t){try{return Object.keys(t).some((function(n){return e.target===Object(k.findDOMNode)(t[n])}))}catch(n){return!1}}function N(e,t){var n=t.min,r=t.max;return e<n||e>r}function P(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0}function T(e,t){var n=t.marks,r=t.step,o=t.min,a=t.max,i=Object.keys(n).map(parseFloat);if(null!==r){var c=Math.pow(10,A(r)),u=Math.floor((a*c-o*c)/(r*c)),l=Math.min((e-o)/r,u),s=Math.round(l)*r+o;i.push(s)}var f=i.map((function(t){return Math.abs(e-t)}));return i[f.indexOf(Math.min.apply(Math,Object(v.a)(f)))]}function A(e){var t=e.toString(),n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}function L(e,t){return e?t.clientY:t.pageX}function I(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function R(e,t){var n=t.getBoundingClientRect();return e?n.top+.5*n.height:window.pageXOffset+n.left+.5*n.width}function D(e,t){var n=t.max,r=t.min;return e<=r?r:e>=n?n:e}function M(e,t){var n=t.step,r=isFinite(T(e,t))?T(e,t):0;return null===n?r:parseFloat(r.toFixed(A(n)))}function F(e){e.stopPropagation(),e.preventDefault()}function B(e,t,n){var r="increase",o="decrease",a=r;switch(e.keyCode){case S.a.UP:a=t&&n?o:r;break;case S.a.RIGHT:a=!t&&n?o:r;break;case S.a.DOWN:a=t&&n?r:o;break;case S.a.LEFT:a=!t&&n?r:o;break;case S.a.END:return function(e,t){return t.max};case S.a.HOME:return function(e,t){return t.min};case S.a.PAGE_UP:return function(e,t){return e+2*t.step};case S.a.PAGE_DOWN:return function(e,t){return e-2*t.step};default:return}return function(e,t){return function(e,t,n){var r={increase:function(e,t){return e+t},decrease:function(e,t){return e-t}},o=r[e](Object.keys(n.marks).indexOf(JSON.stringify(t)),1),a=Object.keys(n.marks)[o];return n.step?r[e](t,n.step):Object.keys(n.marks).length&&n.marks[a]?n.marks[a]:t}(a,e,t)}}function U(){}function z(e){var t;return t=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).onDown=function(e,t){var n=t,o=r.props,a=o.draggableTrack,i=o.vertical,c=r.state.bounds,u=a&&r.positionGetValue&&r.positionGetValue(n)||[],l=C(e,r.handlesRefs);if(r.dragTrack=a&&c.length>=2&&!l&&!u.map((function(e,t){var n=!!t||e>=c[t];return t===u.length-1?e<=c[t]:n})).some((function(e){return!e})),r.dragTrack)r.dragOffset=n,r.startBounds=Object(v.a)(c);else{if(l){var s=R(i,e.target);r.dragOffset=n-s,n=s}else r.dragOffset=0;r.onStart(n)}},r.onMouseDown=function(e){if(0===e.button){r.removeDocumentEvents();var t=L(r.props.vertical,e);r.onDown(e,t),r.addDocumentMouseEvents()}},r.onTouchStart=function(e){if(!P(e)){var t=I(r.props.vertical,e);r.onDown(e,t),r.addDocumentTouchEvents(),F(e)}},r.onFocus=function(e){var t=r.props,n=t.onFocus,o=t.vertical;if(C(e,r.handlesRefs)&&!r.dragTrack){var a=R(o,e.target);r.dragOffset=0,r.onStart(a),F(e),n&&n(e)}},r.onBlur=function(e){var t=r.props.onBlur;r.dragTrack||r.onEnd(),t&&t(e)},r.onMouseUp=function(){r.handlesRefs[r.prevMovedHandleIndex]&&r.handlesRefs[r.prevMovedHandleIndex].clickFocus()},r.onMouseMove=function(e){if(r.sliderRef){var t=L(r.props.vertical,e);r.onMove(e,t-r.dragOffset,r.dragTrack,r.startBounds)}else r.onEnd()},r.onTouchMove=function(e){if(!P(e)&&r.sliderRef){var t=I(r.props.vertical,e);r.onMove(e,t-r.dragOffset,r.dragTrack,r.startBounds)}else r.onEnd()},r.onKeyDown=function(e){r.sliderRef&&C(e,r.handlesRefs)&&r.onKeyboard(e)},r.onClickMarkLabel=function(e,t){e.stopPropagation(),r.onChange({value:t}),r.setState({value:t},(function(){return r.onEnd(!0)}))},r.saveSlider=function(e){r.sliderRef=e};var o=e.step,a=e.max,i=e.min,c=!isFinite(a-i)||(a-i)%o==0;return Object(m.a)(!o||Math.floor(o)!==o||c,"Slider[max] - Slider[min] (".concat(a-i,") should be a multiple of Slider[step] (").concat(o,")")),r.handlesRefs={},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"componentWillUnmount",value:function(){Object(b.a)(Object(g.a)(n.prototype),"componentWillUnmount",this)&&Object(b.a)(Object(g.a)(n.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var e=this.sliderRef,t=this.props,n=t.vertical,r=t.reverse,o=e.getBoundingClientRect();return n?r?o.bottom:o.top:window.pageXOffset+(r?o.right:o.left)}},{key:"getSliderLength",value:function(){var e=this.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.props.vertical?t.height:t.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=Object(_.a)(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Object(_.a)(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=Object(_.a)(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Object(_.a)(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var e;this.props.disabled||null===(e=this.handlesRefs[0])||void 0===e||e.focus()}},{key:"blur",value:function(){var e=this;this.props.disabled||Object.keys(this.handlesRefs).forEach((function(t){var n,r;null===(n=e.handlesRefs[t])||void 0===n||null===(r=n.blur)||void 0===r||r.call(n)}))}},{key:"calcValue",value:function(e){var t=this.props,n=t.vertical,r=t.min,o=t.max,a=Math.abs(Math.max(e,0)/this.getSliderLength());return n?(1-a)*(o-r)+r:a*(o-r)+r}},{key:"calcValueByPos",value:function(e){var t=(this.props.reverse?-1:1)*(e-this.getSliderStart());return this.trimAlignValue(this.calcValue(t))}},{key:"calcOffset",value:function(e){var t=this.props,n=t.min,r=(e-n)/(t.max-n);return Math.max(0,100*r)}},{key:"saveHandle",value:function(e,t){this.handlesRefs[e]=t}},{key:"render",value:function(){var e,t=this.props,r=t.prefixCls,a=t.className,i=t.marks,c=t.dots,s=t.step,f=t.included,d=t.disabled,p=t.vertical,m=t.reverse,h=t.min,y=t.max,v=t.children,_=t.maximumTrackStyle,w=t.style,j=t.railStyle,k=t.dotStyle,S=t.activeDotStyle,C=Object(b.a)(Object(g.a)(n.prototype),"render",this).call(this),N=C.tracks,P=C.handles,T=E()(r,(e={},Object(o.a)(e,"".concat(r,"-with-marks"),Object.keys(i).length),Object(o.a)(e,"".concat(r,"-disabled"),d),Object(o.a)(e,"".concat(r,"-vertical"),p),Object(o.a)(e,a,a),e));return u.a.createElement("div",{ref:this.saveSlider,className:T,onTouchStart:d?U:this.onTouchStart,onMouseDown:d?U:this.onMouseDown,onMouseUp:d?U:this.onMouseUp,onKeyDown:d?U:this.onKeyDown,onFocus:d?U:this.onFocus,onBlur:d?U:this.onBlur,style:w},u.a.createElement("div",{className:"".concat(r,"-rail"),style:Object(l.a)(Object(l.a)({},_),j)}),N,u.a.createElement(O,{prefixCls:r,vertical:p,reverse:m,marks:i,dots:c,step:s,included:f,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:y,min:h,dotStyle:k,activeDotStyle:S}),P,u.a.createElement(x,{className:"".concat(r,"-mark"),onClickLabel:d?U:this.onClickMarkLabel,vertical:p,marks:i,included:f,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:y,min:h,reverse:m}),v)}}]),n}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=Object(l.a)(Object(l.a)({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(e){var t=e.index,n=Object(y.a)(e,["index"]);return delete n.dragging,null===n.value?null:u.a.createElement(j,Object(a.default)({},n,{key:t}))},onBeforeChange:U,onChange:U,onAfterChange:U,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),t}var G=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).positionGetValue=function(e){return[]},r.onEnd=function(e){var t=r.state.dragging;r.removeDocumentEvents(),(t||e)&&r.props.onAfterChange(r.getValue()),r.setState({dragging:!1})};var o=void 0!==e.defaultValue?e.defaultValue:e.min,a=void 0!==e.value?e.value:o;return r.state={value:r.trimAlignValue(a),dragging:!1},Object(m.a)(!("minimumTrackStyle"in e),"minimumTrackStyle will be deprecated, please use trackStyle instead."),Object(m.a)(!("maximumTrackStyle"in e),"maximumTrackStyle will be deprecated, please use railStyle instead."),r}return Object(f.a)(n,[{key:"calcValueByPos",value:function(e){return 0}},{key:"calcOffset",value:function(e){return 0}},{key:"saveHandle",value:function(e,t){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.min,o=n.max,a=n.value,i=n.onChange;if("min"in this.props||"max"in this.props){var c=void 0!==a?a:t.value,u=this.trimAlignValue(c,this.props);u!==t.value&&(this.setState({value:u}),r===e.min&&o===e.max||!N(c,this.props)||i(u))}}},{key:"onChange",value:function(e){var t=this.props,n=!("value"in t),r=e.value>this.props.max?Object(l.a)(Object(l.a)({},e),{},{value:this.props.max}):e;n&&this.setState(r);var o=r.value;t.onChange(o)}},{key:"onStart",value:function(e){this.setState({dragging:!0});var t=this.props,n=this.getValue();t.onBeforeChange(n);var r=this.calcValueByPos(e);this.startValue=r,this.startPosition=e,r!==n&&(this.prevMovedHandleIndex=0,this.onChange({value:r}))}},{key:"onMove",value:function(e,t){F(e);var n=this.state.value,r=this.calcValueByPos(t);r!==n&&this.onChange({value:r})}},{key:"onKeyboard",value:function(e){var t=this.props,n=t.reverse,r=B(e,t.vertical,n);if(r){F(e);var o=this.state.value,a=r(o,this.props),i=this.trimAlignValue(a);if(i===o)return;this.onChange({value:i}),this.props.onAfterChange(i),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var e=this.props.startPoint||this.props.min;return this.state.value>e?e:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e)return null;var n=Object(l.a)(Object(l.a)({},this.props),t),r=D(e,n);return M(r,n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.vertical,o=t.included,a=t.disabled,i=t.minimumTrackStyle,c=t.trackStyle,s=t.handleStyle,f=t.tabIndex,d=t.ariaLabelForHandle,p=t.ariaLabelledByForHandle,m=t.ariaValueTextFormatterForHandle,y=t.min,v=t.max,b=t.startPoint,g=t.reverse,_=t.handle,w=this.state,E=w.value,O=w.dragging,x=this.calcOffset(E),j=_({className:"".concat(n,"-handle"),prefixCls:n,vertical:r,offset:x,value:E,dragging:O,disabled:a,min:y,max:v,reverse:g,index:0,tabIndex:f,ariaLabel:d,ariaLabelledBy:p,ariaValueTextFormatter:m,style:s[0]||s,ref:function(t){return e.saveHandle(0,t)}}),k=void 0!==b?this.calcOffset(b):0,S=c[0]||c;return{tracks:u.a.createElement(h,{className:"".concat(n,"-track"),vertical:r,included:o,offset:k,reverse:g,length:x-k,style:Object(l.a)(Object(l.a)({},i),S)}),handles:j}}}]),n}(u.a.Component),V=z(G),Y=function(e){var t=e.value,n=e.handle,r=e.bounds,o=e.props,a=o.allowCross,i=o.pushable,c=Number(i),u=D(t,o),l=u;return a||null==n||void 0===r||(n>0&&u<=r[n-1]+c&&(l=r[n-1]+c),n<r.length-1&&u>=r[n+1]-c&&(l=r[n+1]-c)),M(l,o)},q=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).positionGetValue=function(e){var t=r.getValue(),n=r.calcValueByPos(e),o=r.getClosestBound(n),a=r.getBoundNeedMoving(n,o);if(n===t[a])return null;var i=Object(v.a)(t);return i[a]=n,i},r.onEnd=function(e){var t=r.state.handle;r.removeDocumentEvents(),t||(r.dragTrack=!1),(null!==t||e)&&r.props.onAfterChange(r.getValue()),r.setState({handle:null})};var o=e.count,a=e.min,i=e.max,c=Array.apply(void 0,Object(v.a)(Array(o+1))).map((function(){return a})),u="defaultValue"in e?e.defaultValue:c,l=(void 0!==e.value?e.value:u).map((function(t,n){return Y({value:t,handle:n,props:e})})),f=l[0]===i?0:l.length-1;return r.state={handle:null,recent:f,bounds:l},r}return Object(f.a)(n,[{key:"calcValueByPos",value:function(e){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(e){return 0}},{key:"saveHandle",value:function(e,t){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.props,o=r.onChange,a=r.value,i=r.min,c=r.max;if(("min"in this.props||"max"in this.props)&&(i!==e.min||c!==e.max)){var u=a||t.bounds;if(u.some((function(e){return N(e,n.props)})))o(u.map((function(e){return D(e,n.props)})))}}},{key:"onChange",value:function(e){var t=this.props;if(!("value"in t))this.setState(e);else{var n={};["handle","recent"].forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),Object.keys(n).length&&this.setState(n)}var r=Object(l.a)(Object(l.a)({},this.state),e).bounds;t.onChange(r)}},{key:"onStart",value:function(e){var t=this.props,n=this.state,r=this.getValue();t.onBeforeChange(r);var o=this.calcValueByPos(e);this.startValue=o,this.startPosition=e;var a=this.getClosestBound(o);if(this.prevMovedHandleIndex=this.getBoundNeedMoving(o,a),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex}),o!==r[this.prevMovedHandleIndex]){var i=Object(v.a)(n.bounds);i[this.prevMovedHandleIndex]=o,this.onChange({bounds:i})}}},{key:"onMove",value:function(e,t,n,r){F(e);var o=this.state,a=this.props,i=a.max||100,c=a.min||0;if(n){var u=a.vertical?-t:t;u=a.reverse?-u:u;var l=i-Math.max.apply(Math,Object(v.a)(r)),s=c-Math.min.apply(Math,Object(v.a)(r)),f=Math.min(Math.max(u/(this.getSliderLength()/(i-c)),s),l),d=r.map((function(e){return Math.floor(Math.max(Math.min(e+f,i),c))}));o.bounds.map((function(e,t){return e===d[t]})).some((function(e){return!e}))&&this.onChange({bounds:d})}else{var p=this.calcValueByPos(t);p!==o.bounds[o.handle]&&this.moveTo(p)}}},{key:"onKeyboard",value:function(e){var t=this.props,n=t.reverse,r=B(e,t.vertical,n);if(r){F(e);var o=this.state,a=this.props,i=o.bounds,c=o.handle,u=i[null===c?o.recent:c],l=r(u,a),s=Y({value:l,handle:c,bounds:o.bounds,props:a});if(s===u)return;this.moveTo(s,!0)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(e){for(var t=this.state.bounds,n=0,r=1;r<t.length-1;r+=1)e>=t[r]&&(n=r);return Math.abs(t[n+1]-e)<Math.abs(t[n]-e)&&(n+=1),n}},{key:"getBoundNeedMoving",value:function(e,t){var n=this.state,r=n.bounds,o=n.recent,a=t,i=r[t+1]===r[t];return i&&r[o]===r[t]&&(a=o),i&&e!==r[t+1]&&(a=e<r[t+1]?t:t+1),a}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var e=this.state.bounds;return e[e.length-1]}},{key:"getPoints",value:function(){var e=this.props,t=e.marks,n=e.step,r=e.min,o=e.max,a=this.internalPointsCache;if(!a||a.marks!==t||a.step!==n){var i=Object(l.a)({},t);if(null!==n)for(var c=r;c<=o;c+=n)i[c]=c;var u=Object.keys(i).map(parseFloat);u.sort((function(e,t){return e-t})),this.internalPointsCache={marks:t,step:n,points:u}}return this.internalPointsCache.points}},{key:"moveTo",value:function(e,t){var n=this,r=this.state,o=this.props,a=Object(v.a)(r.bounds),i=null===r.handle?r.recent:r.handle;a[i]=e;var c=i;!1!==o.pushable?this.pushSurroundingHandles(a,c):o.allowCross&&(a.sort((function(e,t){return e-t})),c=a.indexOf(e)),this.onChange({recent:c,handle:c,bounds:a}),t&&(this.props.onAfterChange(a),this.setState({},(function(){n.handlesRefs[c].focus()})),this.onEnd())}},{key:"pushSurroundingHandles",value:function(e,t){var n=e[t],r=this.props.pushable,o=Number(r),a=0;if(e[t+1]-n<o&&(a=1),n-e[t-1]<o&&(a=-1),0!==a){var i=t+a,c=a*(e[i]-n);this.pushHandle(e,i,a,o-c)||(e[t]=e[i]-a*o)}}},{key:"pushHandle",value:function(e,t,n,r){for(var o=e[t],a=e[t];n*(a-o)<r;){if(!this.pushHandleOnePoint(e,t,n))return e[t]=o,!1;a=e[t]}return!0}},{key:"pushHandleOnePoint",value:function(e,t,n){var r=this.getPoints(),o=r.indexOf(e[t])+n;if(o>=r.length||o<0)return!1;var a=t+n,i=r[o],c=this.props.pushable,u=Number(c),l=n*(e[a]-i);return!!this.pushHandle(e,a,n,u-l)&&(e[t]=i,!0)}},{key:"trimAlignValue",value:function(e){var t=this.state,n=t.handle,r=t.bounds;return Y({value:e,handle:n,bounds:r,props:this.props})}},{key:"render",value:function(){var e=this,t=this.state,n=t.handle,r=t.bounds,a=this.props,i=a.prefixCls,c=a.vertical,l=a.included,s=a.disabled,f=a.min,d=a.max,p=a.reverse,m=a.handle,y=a.trackStyle,v=a.handleStyle,b=a.tabIndex,g=a.ariaLabelGroupForHandles,_=a.ariaLabelledByGroupForHandles,w=a.ariaValueTextFormatterGroupForHandles,O=r.map((function(t){return e.calcOffset(t)})),x="".concat(i,"-handle"),j=r.map((function(t,r){var a,u=b[r]||0;(s||null===b[r])&&(u=null);var l=n===r;return m({className:E()((a={},Object(o.a)(a,x,!0),Object(o.a)(a,"".concat(x,"-").concat(r+1),!0),Object(o.a)(a,"".concat(x,"-dragging"),l),a)),prefixCls:i,vertical:c,dragging:l,offset:O[r],value:t,index:r,tabIndex:u,min:f,max:d,reverse:p,disabled:s,style:v[r],ref:function(t){return e.saveHandle(r,t)},ariaLabel:g[r],ariaLabelledBy:_[r],ariaValueTextFormatter:w[r]})}));return{tracks:r.slice(0,-1).map((function(e,t){var n,r=t+1,a=E()((n={},Object(o.a)(n,"".concat(i,"-track"),!0),Object(o.a)(n,"".concat(i,"-track-").concat(r),!0),n));return u.a.createElement(h,{className:a,vertical:c,reverse:p,included:l,offset:O[r-1],length:O[r]-O[r-1],style:y[t],key:r})})),handles:j}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!("value"in e||"min"in e||"max"in e))return null;var n=e.value||t.bounds,r=n.map((function(n,r){return Y({value:n,handle:r,bounds:t.bounds,props:e})}));if(t.bounds.length===r.length){if(r.every((function(e,n){return e===t.bounds[n]})))return null}else r=n.map((function(t,n){return Y({value:t,handle:n,props:e})}));return Object(l.a)(Object(l.a)({},t),{},{bounds:r})}}]),n}(u.a.Component);q.displayName="Range",q.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var H=z(q),W=n(402),K={adjustX:1,adjustY:1},$=[0,0],Q={left:{points:["cr","cl"],overflow:K,offset:[-4,0],targetOffset:$},right:{points:["cl","cr"],overflow:K,offset:[4,0],targetOffset:$},top:{points:["bc","tc"],overflow:K,offset:[0,-4],targetOffset:$},bottom:{points:["tc","bc"],overflow:K,offset:[0,4],targetOffset:$},topLeft:{points:["bl","tl"],overflow:K,offset:[0,-4],targetOffset:$},leftTop:{points:["tr","tl"],overflow:K,offset:[-4,0],targetOffset:$},topRight:{points:["br","tr"],overflow:K,offset:[0,-4],targetOffset:$},rightTop:{points:["tl","tr"],overflow:K,offset:[4,0],targetOffset:$},bottomRight:{points:["tr","br"],overflow:K,offset:[0,4],targetOffset:$},rightBottom:{points:["bl","br"],overflow:K,offset:[4,0],targetOffset:$},bottomLeft:{points:["tl","bl"],overflow:K,offset:[0,4],targetOffset:$},leftBottom:{points:["br","bl"],overflow:K,offset:[-4,0],targetOffset:$}};function X(e){var t=e.showArrow,n=e.arrowContent,r=e.children,o=e.prefixCls,a=e.id,i=e.overlayInnerStyle,u=e.className,l=e.style;return c.createElement("div",{className:E()("".concat(o,"-content"),u),style:l},!1!==t&&c.createElement("div",{className:"".concat(o,"-arrow"),key:"arrow"},n),c.createElement("div",{className:"".concat(o,"-inner"),id:a,role:"tooltip",style:i},"function"==typeof r?r():r))}var J=function(e,t){var n=e.overlayClassName,o=e.trigger,i=void 0===o?["hover"]:o,u=e.mouseEnterDelay,s=void 0===u?0:u,f=e.mouseLeaveDelay,d=void 0===f?.1:f,p=e.overlayStyle,m=e.prefixCls,h=void 0===m?"rc-tooltip":m,v=e.children,b=e.onVisibleChange,g=e.afterVisibleChange,_=e.transitionName,w=e.animation,E=e.motion,O=e.placement,x=void 0===O?"right":O,j=e.align,k=void 0===j?{}:j,S=e.destroyTooltipOnHide,C=void 0!==S&&S,N=e.defaultVisible,P=e.getTooltipContainer,T=e.overlayInnerStyle,A=e.arrowContent,L=e.overlay,I=e.id,R=e.showArrow,D=Object(y.a)(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"]),M=Object(c.useRef)(null);Object(c.useImperativeHandle)(t,(function(){return M.current}));var F=Object(l.a)({},D);"visible"in e&&(F.popupVisible=e.visible);var B=!1,U=!1;if("boolean"==typeof C)B=C;else if(C&&"object"===Object(r.a)(C)){var z=C.keepParent;B=!0===z,U=!1===z}return c.createElement(W.a,Object(a.default)({popupClassName:n,prefixCls:h,popup:function(){return c.createElement(X,{showArrow:R,arrowContent:A,key:"content",prefixCls:h,id:I,overlayInnerStyle:T},L)},action:i,builtinPlacements:Q,popupPlacement:x,ref:M,popupAlign:k,getPopupContainer:P,onPopupVisibleChange:b,afterPopupVisibleChange:g,popupTransitionName:_,popupAnimation:w,popupMotion:E,defaultPopupVisible:N,destroyPopupOnHide:B,autoDestroy:U,mouseLeaveDelay:d,popupStyle:p,mouseEnterDelay:s},F),v)},Z=Object(c.forwardRef)(J),ee=n(181),te=n(119),ne=c.forwardRef((function(e,t){var n=e.visible,r=e.overlay,o=c.useRef(null),i=Object(ee.a)(t,o),u=c.useRef(null);function l(){te.a.cancel(u.current)}return c.useEffect((function(){return n?u.current=Object(te.a)((function(){var e;null===(e=o.current)||void 0===e||e.forcePopupAlign()})):l(),l}),[n,r]),c.createElement(Z,Object(a.default)({ref:i},e))}));var re=V;re.Range=H,re.Handle=j,re.createSliderWithTooltip=function(e){var t;return t=function(t){Object(d.a)(r,t);var n=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=n.apply(this,arguments)).state={visibles:{}},e.handleTooltipVisibleChange=function(t,n){e.setState((function(e){return{visibles:Object(l.a)(Object(l.a)({},e.visibles),{},Object(o.a)({},t,n))}}))},e.handleWithTooltip=function(t){var n,r=t.value,o=t.dragging,i=t.index,c=t.disabled,s=Object(y.a)(t,["value","dragging","index","disabled"]),f=e.props,d=f.tipFormatter,p=f.tipProps,m=f.handleStyle,h=f.getTooltipContainer,v=p.prefixCls,b=void 0===v?"rc-slider-tooltip":v,g=p.overlay,_=void 0===g?d(r):g,w=p.placement,E=void 0===w?"top":w,O=p.visible,x=void 0!==O&&O,k=Object(y.a)(p,["prefixCls","overlay","placement","visible"]);return n=Array.isArray(m)?m[i]||m[0]:m,u.a.createElement(ne,Object(a.default)({},k,{getTooltipContainer:h,prefixCls:b,overlay:_,placement:E,visible:!c&&(e.state.visibles[i]||o)||x,key:i}),u.a.createElement(j,Object(a.default)({},s,{style:Object(l.a)({},n),value:r,onMouseEnter:function(){return e.handleTooltipVisibleChange(i,!0)},onMouseLeave:function(){return e.handleTooltipVisibleChange(i,!1)}})))},e}return Object(f.a)(r,[{key:"render",value:function(){return u.a.createElement(e,Object(a.default)({},this.props,{handle:this.handleWithTooltip}))}}]),r}(u.a.Component),t.defaultProps={tipFormatter:function(e){return e},handleStyle:[{}],tipProps:{},getTooltipContainer:function(e){return e.parentNode}},t};var oe=re,ae=n(151),ie=c.forwardRef((function(e,t){var n=e.visible,r=Object(c.useRef)(null),o=Object(c.useRef)(null);function i(){te.a.cancel(o.current),o.current=null}return c.useEffect((function(){return n?o.current=Object(te.a)((function(){var e;null===(e=r.current)||void 0===e||e.forcePopupAlign(),o.current=null})):i(),i}),[n,e.title]),c.createElement(ae.a,Object(a.default)({ref:Object(ee.a)(r,t)},e))})),ce=n(257),ue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},le=c.forwardRef((function(e,t){var n,u=c.useContext(ce.b),l=u.getPrefixCls,s=u.direction,f=u.getPopupContainer,d=c.useState({}),p=Object(i.a)(d,2),m=p[0],h=p[1],y=function(e,t){h((function(n){return Object(a.default)(Object(a.default)({},n),Object(o.a)({},e,t))}))},v=function(e,t){return e||(t?"rtl"===s?"left":"right":"top")},b=function(t){var n=t.tooltipPrefixCls,r=t.prefixCls,o=t.info,i=o.value,u=o.dragging,s=o.index,d=ue(o,["value","dragging","index"]),p=e.tipFormatter,h=e.tooltipVisible,b=e.tooltipPlacement,g=e.getTooltipPopupContainer,_=e.vertical,w=!!p&&(m[s]||u),E=h||void 0===h&&w,O=l();return c.createElement(ie,{prefixCls:n,title:p?p(i):"",visible:E,placement:v(b,_),transitionName:"".concat(O,"-zoom-down"),key:s,overlayClassName:"".concat(r,"-tooltip"),getPopupContainer:g||f},c.createElement(j,Object(a.default)({},d,{value:i,onMouseEnter:function(){return y(s,!0)},onMouseLeave:function(){return y(s,!1)}})))},g=e.prefixCls,_=e.tooltipPrefixCls,w=e.range,O=e.className,x=ue(e,["prefixCls","tooltipPrefixCls","range","className"]),k=l("slider",g),S=l("tooltip",_),C=E()(O,Object(o.a)({},"".concat(k,"-rtl"),"rtl"===s));return"rtl"!==s||x.vertical||(x.reverse=!x.reverse),"object"===Object(r.a)(w)&&(n=w.draggableTrack),w?c.createElement(H,Object(a.default)({},x,{step:x.step,draggableTrack:n,className:C,ref:t,handle:function(e){return b({tooltipPrefixCls:S,prefixCls:k,info:e})},prefixCls:k})):c.createElement(oe,Object(a.default)({},x,{step:x.step,className:C,ref:t,handle:function(e){return b({tooltipPrefixCls:S,prefixCls:k,info:e})},prefixCls:k}))}));le.displayName="Slider",le.defaultProps={tipFormatter:function(e){return"number"==typeof e?e.toString():""}};t.a=le},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n(85),a="RC_FORM_INTERNAL_HOOKS",i=function(){Object(o.a)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},c=r.createContext({getFieldValue:i,getFieldsValue:i,getFieldError:i,getFieldsError:i,isFieldsTouched:i,isFieldTouched:i,isFieldValidating:i,isFieldsValidating:i,resetFields:i,setFields:i,setFieldsValue:i,validateFields:i,submit:i,getInternalHooks:function(){return i(),{dispatch:i,initEntityValue:i,registerField:i,useSubscribe:i,setInitialValues:i,setCallbacks:i,getFields:i,setValidateMessages:i,setPreserve:i}}});t.b=c},,,,,,function(e,t,n){"use strict";var r=n(1215);t.a=r.a},,function(e,t,n){"use strict";e.exports={TYPE:{dingtalk:"dingtalk",weixin:"weixin",teambition:"teambition",aone_teambition:"aone_teambition",dingtalk_selfcorp:"dingtalk_selfcorp"},ROOT_DEPARTMENT_ID:{dingtalk:"1",dingtalk_selfcorp:"1",weixin:"1"}}},,function(e,t,n){"use strict";var r={share:"share",form:"form"};e.exports={SCOPE:{all:0,specific:1,intranet:2},STATUS:{active:0,inactive:1},ALLOW_TARGET_TYPES:["Doc","Book","DatasheetView","Note"],ALLOW_TYPES:Object.values(r),ALLOW_TYPE_MAP:r}},function(e,t,n){e.exports=n(1224)},,,,,,,,,function(e,t,n){var r=n(2534),o=n(2574),a=n(1006),i=n(269),c=n(2579);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):c(e)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(162),n(305)},,function(e,t,n){"use strict";var r=n(1070),o=n.n(r),a=n(386),i=n(529);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,i,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function l(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}var s,f,d={getHost:function(){return window.location.origin},changeHref:function(e){window.location.href=e},windowOpen:function(e){if(window.YuqueDesktopJSBridge){var t,n="".concat(window.location.origin).concat(e);null===(t=window.YuqueDesktopJSBridge)||void 0===t||t.postMessage(i.DesktopBridgeEvents.openExternalLink,{targetUrl:n,isNewWindow:!1,forceBrowserOpen:!0})}else window.open(e)},download:function(e){window.location.href=e},upload:(s=u().mark((function e(){var t,n,r,i,c,l,s,f,d,p,m,h,y,v=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=v.length>0&&void 0!==v[0]?v[0]:{},n=t.requestData,r=t.params,i=t.onError,c=t.onSuccess,l=new FormData,s=r.action,f=r.data,d=r.file,p=r.headers,m=r.onProgress,h=r.withCredentials,y=r.filename,Object.keys(n).forEach((function(e){var t=n[e];null!=t&&l.append(e,t)})),l.append(y,d),o.a.post(s,l,{withCredentials:h,headers:p,onUploadProgress:function(e){var t=e.total,n=e.loaded;m({percent:Number(Math.round(n/t*100).toFixed(0))},d)}}).then((function(e){var t=e.data;c(t),Object(a.spmClick)("c34618.d69451",{file_type:f.type,book_id:f.book_id})})).catch((function(e){i(e)}));case 6:case"end":return e.stop()}}),e)})),f=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=s.apply(e,t);function a(e){l(o,n,r,a,i,"next",e)}function i(e){l(o,n,r,a,i,"throw",e)}a(void 0)}))},function(){return f.apply(this,arguments)})};t.a=d},function(e,t,n){var r=n(1011),o=n(2202),a=n(674),i=n(1290),c=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=c},,,,,,function(e,t,n){"use strict";n.d(t,"downloadCsvFile",(function(){return c})),n.d(t,"isValidResource",(function(){return u}));var r=n(1902),o=n(547);n.o(o,"allowResourceEdit")&&n.d(t,"allowResourceEdit",(function(){return o.allowResourceEdit})),n.o(o,"getExtname")&&n.d(t,"getExtname",(function(){return o.getExtname})),n.o(o,"getFileBgColor")&&n.d(t,"getFileBgColor",(function(){return o.getFileBgColor})),n.o(o,"getFileIcon")&&n.d(t,"getFileIcon",(function(){return o.getFileIcon})),n.o(o,"getFilename")&&n.d(t,"getFilename",(function(){return o.getFilename})),n.o(o,"isAudio")&&n.d(t,"isAudio",(function(){return o.isAudio})),n.o(o,"isImage")&&n.d(t,"isImage",(function(){return o.isImage})),n.o(o,"isPpt")&&n.d(t,"isPpt",(function(){return o.isPpt})),n.o(o,"isSketch")&&n.d(t,"isSketch",(function(){return o.isSketch})),n.o(o,"isVideo")&&n.d(t,"isVideo",(function(){return o.isVideo}));var a=n(547).getExtname,i=n(977).getFileAcceptArr;function c(e,t){var n=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"});Object(r.a)(n,t)}function u(e){var t=a(e);return!!t&&i().includes(".".concat(t.toLowerCase()))}},,,function(e,t,n){"use strict";e.exports={TYPE:{NORMAL:"Normal",DOC:"Doc",SHEET:"Sheet",DESIGN:"Design",Book:"Book",Column:"Column",Resource:"Resource",Thread:"Thread",GROUP:"Group",PUBLICATION:"Publication"},BLOCK_TYPE:{quickLink:"quick_link",recommend:"recommend",dashboardUserBooks:"dashboard_user_books",dashboardCollabBooks:"dashboard_collab_books",dashboardGroups:"dashboard_groups",dashboardPublications:"dashboard_publications",publicationColumn:"publication_column",dashboardBooks:"dashboard_books"},LIST_DISPLAY_TYPE:{vertical:"vertical",horizontal:"horizontal"}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(2196)),o=l(n(2715)),a=l(n(2716)),i=l(n(2717)),c=l(n(2718)),u=l(n(2719));function l(e){return e&&e.__esModule?e:{default:e}}t.default={required:r.default,whitespace:o.default,type:a.default,range:i.default,enum:c.default,pattern:u.default}},,function(e,t,n){"use strict";n(60);var r=n(24),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(376),l=n.n(u),s=n(112),f=n.n(s),d=n(34),p=n(89),m=(n(79),n(44)),h=(n(173),n(94)),y=n(10),v=n.n(y),b="paymodal-module_payModalContainer_-7P4F",g="paymodal-module_pricingContainer_IE8kt",_="paymodal-module_qrcodeContainer_aNOA5",w="paymodal-module_qrcodeImage_PfP82",E="paymodal-module_desc1_v1ln1",O="paymodal-module_qrcodeImageCon_wmICV",x="paymodal-module_alipayIconInQrCode_aiQkc",j="paymodal-module_qrcodeCon_b5rk3",k="paymodal-module_qrcodeTitleCon_UKj+0",S="paymodal-module_qrcodeTitleDesc_cUN4K",C="paymodal-module_qrcodeTitleValue_4k4b0";function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(i,e);var t,n,r,o=A(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={},t}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onClose,r=e.onCancel,o=e.qrCodeUrl,i=e.totalAmount;return a.a.createElement(m.a,{className:b,title:__("扫码支付"),visible:t,maskClosable:!1,onCancel:r,afterClose:n,footer:null,width:500,centered:!0,zIndex:9999},a.a.createElement("div",{className:g},a.a.createElement("div",{className:_},a.a.createElement("div",{className:k},a.a.createElement("p",{className:S},__("扫一扫付款 (元)")),a.a.createElement("p",{className:C},i)),a.a.createElement("div",{className:O},o?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:v()(x,"alipay-payment-icon")},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*GE2FQLYZ4kAAAAAAAAAAAABjARQnAQ"})),a.a.createElement("div",{className:j},a.a.createElement("img",{className:w,src:o}))):a.a.createElement(h.a,{size:"small"})),a.a.createElement("div",{className:E},__("打开手机支付宝，扫一扫付款")))))}}])&&P(t.prototype,n),r&&P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);R.propTypes={visible:c.a.bool,onClose:c.a.func,onCancel:c.a.func,qrCodeUrl:c.a.string,totalAmount:c.a.string};var D=R,M=(n(148),n(53)),F=(n(50),n(19)),B=(n(130),n(35)),U=n(32),z=n.n(U),G=n(131),V=n(309),Y=n.n(V),q=n(853),H=n(848),W={memberModalContainer:"membermodal-module_memberModalContainer_UQkC4",desc:"membermodal-module_desc_JofNr",link:"membermodal-module_link_GhyiF",inputNumber:"membermodal-module_inputNumber_iepWR",select:"membermodal-module_select_u4Ura",tips:"membermodal-module_tips_hkMrX",titleTips:"membermodal-module_titleTips_oWQ8t",payWith:"membermodal-module_payWith_tqEUb",payWithAlipayIcon:"membermodal-module_payWithAlipayIcon_o9Nmb",payWithAlipayText:"membermodal-module_payWithAlipayText_PWm4b",dashline:"membermodal-module_dashline_jMarO",priceTag:"membermodal-module_priceTag_q1DEj",hasDiscount:"membermodal-module_hasDiscount_08fuh",discountPrice:"membermodal-module_discountPrice_NqF1r",discountPriceValue:"membermodal-module_discountPriceValue_a83du",memberModalButtonCon:"membermodal-module_memberModalButtonCon_6vKEz",memberModalAgreeButton:"membermodal-module_memberModalAgreeButton_NdbXC",memberModalTermsButton:"membermodal-module_memberModalTermsButton_jCPs1",uploadPackages:"membermodal-module_uploadPackages_GOTDj",uploadPackageCard:"membermodal-module_uploadPackageCard_1RD0r",selectedUploadCard:"membermodal-module_selectedUploadCard_VMSYV",uploadSize:"membermodal-module_uploadSize_t-9U2",uploadPackagePrice:"membermodal-module_uploadPackagePrice_YwF2+"};function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=B.a.Option,X=f.a.MEMBER_USER_DISCOUNT_AMOUNT,J=f.a.MEMBER_USER_FULL_AMOUNT,Z=f.a.MEMBER_GROUP_BASE_AMOUNT,ee=f.a.MEMBER_GROUP_FULL_AMOUNT,te=f.a.MEMBER_UPLOAD_SIZE_ARR,ne=f.a.PERSORNAL_MEMBER_DSICOUNT_START_TIME,re=f.a.PERSORNAL_MEMBER_DSICOUNT_END_TIME,oe=f.a.PERSORNAL_MEMBER_DSICOUNT_TEXT,ae=function(e){var t=e.visible,n=e.onClose,i=e.startToPay,c=e.user,u=e.code,l=e.isRenew,s=e.isBuyUpload,f=e.duration,h=e.handleDurationChange,y=e.uploadSize,v=e.onSelectUploadSize,b=e.buyLoading,g=e.promoCode,_=e.setPromoCode,w=e.title,E=e.desc,O=K(Object(o.useState)(!1),2),x=O[0],j=O[1],k=K(Object(o.useState)(ne),2),S=k[0],C=k[1],N=K(Object(o.useState)(re),2),P=N[0],T=N[1],A=K(Object(o.useState)(oe),2),L=A[0],I=A[1],R=K(Object(o.useState)(X),2),D=R[0],U=R[1],V=K(Object(o.useState)(!1),2),$=V[0],ae=V[1];Object(o.useEffect)((function(){s||d.a.memberPay.discount({user_id:c.id}).then((function(e){j(e.hasDiscount),C(e.activityStartTime),T(e.activityEndTime),I(e.activityText),U(+e.activityAmount)}))}),[]);var ie,ce,ue=c.expired_at,le=!!ue&&z()().isAfter(z()(ue))||!ue?z()().endOf("day"):z()(ue),se=z()().isAfter(z()(S))&&z()().isBefore(z()(P)),fe=p.a.isGroupOrPublication(c);if(s)ie=1024===y?1e4:10*y;else{var de=fe?ee:J;if(ie=de*f,x)ce=ie+(fe?Z:D)-de}var pe=Object(H.a)({totalAmount:x?ce:ie,setPromoCode:_}),me=pe.totalAmountWithPromo,he=pe.onVerifySuccess,ye=pe.handlePromoChange;return a.a.createElement(m.a,{className:"member-modal",title:w||Y()(s?__("购买上传流量"):fe?l?__("高级版团队续费"):__("升级高级版团队"):l?__("语雀会员续费"):__("升级语雀会员")),visible:t,maskClosable:!1,closable:!0,onCancel:n,footer:null,centered:!0,width:500,zIndex:999},a.a.createElement("div",{"data-testid":"member-modal",className:W.memberModalContainer},a.a.createElement("div",{className:W.desc},function(){if(E)return E;if(s)return fe?__("流量购买后对{name}知识小组账户长期有效",{name:c.name}):__("流量购买后对{name}个人账户长期有效",{name:c.name});if(fe){var e=c.members_count;return l&&ue&&z()()<z()(ue)?__("当前团队 {members_count} 人，剩余有效期 {remain} 天",{members_count:e,remain:z()(ue).diff(z()(),"days")||1}):a.a.createElement(a.a.Fragment,null,__("支持更多成员、无限量知识库、大文件上传等专享权益"),a.a.createElement("a",{className:W.link,target:"_blank",href:G.LINKS.EXTERNAL_GROUP_INTRO_LINK},__("了解更多")))}return a.a.createElement(a.a.Fragment,null,__("支持无限量知识库、大文件上传等专享权益"),a.a.createElement("a",{className:W.link,target:"_blank",href:G.LINKS.EXTERNAL_MEMBER_INTRO_LINK},__("了解更多")))}()),s?a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,__("流量包")),a.a.createElement("div",{className:W.uploadPackages},te.map((function(e){return a.a.createElement("div",{key:e,className:"".concat(W.uploadPackageCard," ").concat(y===e?W.selectedUploadCard:""),onClick:function(){return v(e)}},a.a.createElement("div",{className:W.uploadSize},e,"GB"),a.a.createElement("div",{className:W.uploadPackagePrice},1024===e?1e4:10*e," ",__("元")))})))):a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,__("购买时长")),a.a.createElement("div",{className:W.inputNumber},a.a.createElement(B.a,{className:W.select,defaultValue:1,value:f,onChange:h},[1,2,3].map((function(e){return a.a.createElement(Q,{value:e,key:e},e,"年")})))),a.a.createElement("div",{className:W.tips},__("可使用至")," ",le&&le.add(f,"year").format("YYYY-MM-DD HH:mm:ss"))),a.a.createElement("h3",null,__("支付方式")),a.a.createElement("div",{className:W.payWith},a.a.createElement("img",{className:W.payWithAlipayIcon,src:"//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*5UvZRblzue4AAAAAAAAAAAAAARQnAQ"}),a.a.createElement("span",{className:W.payWithAlipayText},__("支付宝"))),a.a.createElement("h3",null,__("优惠码")),a.a.createElement("div",{className:W.inputNumber},a.a.createElement(q.a,{value:g,onChange:ye,onVerifySuccess:he})),a.a.createElement("p",{className:W.dashline}),a.a.createElement("h3",null,__("总计")),a.a.createElement("div",{className:W.totalInfo},a.a.createElement("span",{className:"".concat(W.priceTag," ").concat(x||me?W.hasDiscount:"")},ie," 元"),(x||me)&&a.a.createElement("span",{className:W.discountPrice,"data-testid":"discount-price"},x&&se&&!fe?__(L):__("优惠价")," ",a.a.createElement("span",{className:W.discountPriceValue},me||ce)," 元")),a.a.createElement("div",{className:W.memberModalButtonCon},a.a.createElement(F.a,{"data-aspm-click":"click-pay","data-aspm-param":u?"code=".concat(u):"code=member-modal",type:"primary",onClick:function(){$?i():r.a.warn(__("请先同意语雀付费服务协议再进行支付哦"))},loading:b},__("立即支付")),a.a.createElement("span",{className:"member-modal-h5-agree"},a.a.createElement("div",{className:W.memberModalAgreeButton},a.a.createElement(M.a,{onChange:function(e){var t=e.target.checked;ae(t)}})," ",a.a.createElement("span",null,__("同意"))),a.a.createElement("a",{className:W.memberModalTermsButton,target:"_blank",href:"/payment-terms"},"《",__("语雀付费服务协议"),"》")))))};ae.propTypes={visible:c.a.bool,user:c.a.object,onClose:c.a.func,startToPay:c.a.func,isRenew:c.a.bool,isBuyUpload:c.a.bool,code:c.a.string,duration:c.a.number,handleDurationChange:c.a.func,uploadSize:c.a.number,onSelectUploadSize:c.a.func,buyLoading:c.a.bool,promoCode:c.a.string,setPromoCode:c.a.func,title:c.a.string,desc:c.a.oneOfType([c.a.string,c.a.element])};var ie=ae,ce=n(140),ue="successmodal-module_successModalContainer_ENOHy",le="successmodal-module_successModalInfoCon_EYL4y",se="successmodal-module_successModalInfoTitle_yXIec",fe="successmodal-module_successModalButtonCon_uM8cu",de="successmodal-module_checkUploadButton_vFqCf",pe="successmodal-module_successModalSubTitle_hVcSK",me="successmodal-module_successModalItem_zxqQ2",he="successmodal-module_successModalBlank_tgeED",ye="successmodal-module_successModalDingQRCon_xxJZi";function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ge(e,t)}function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ee(e);if(t){var o=Ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}var Oe=f.a.MEMBER_USER_FULL_AMOUNT,xe=f.a.MEMBER_GROUP_FULL_AMOUNT,je=f.a.YUQUE_DINGDING_QR_CODE,ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(i,e);var t,n,r,o=_e(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={},t}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onClose,r=e.user,o=e.successData,i=e.isRenew,c=e.isBuyUpload,u=e.isH5,l=o||{},s=l.expired_at,f=l.updated_at,d=l.order_id,h=l.amount,y=l.buyer_name,v=l.duration,b=l.upload_size,g=p.a.isGroupOrPublication(r),_=g?xe:Oe,w="en-us"===window.appData.locale?" ":"";return a.a.createElement(m.a,{className:"paid-success-modal",title:null,visible:t,maskClosable:!1,closable:!1,footer:null,centered:!0,width:655,zIndex:9999},a.a.createElement("div",{className:ue,"data-testid":"success-modal"},g?a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*Jr1zSJ2iyIAAAAAAAAAAAABkARQnAQ"}):a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*sf5iRJWkl48AAAAAAAAAAABkARQnAQ"}),a.a.createElement("div",{className:le},c?a.a.createElement("h1",{className:se},__("恭喜你"),__("，"),__("上传流量购买成功")):a.a.createElement("h1",{className:se},__("恭喜你"),__("，"),g&&__("团队"),w,i?__("成功续费"):__("升级为"),w,g?__("高级版"):__("语雀会员")),a.a.createElement("p",{className:he}),a.a.createElement("p",{className:pe},__("订单信息")),a.a.createElement("p",{className:me},Y()(g?__("团队"):__("帐号")),"：",r.name),a.a.createElement("p",{className:me},__("订单号"),"：",d),c?a.a.createElement("p",{className:me},__("上传流量"),"：",Object(ce.getSizeValue)(b).value,Object(ce.getSizeValue)(b).unit):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:me},__("套餐"),"：",_," ",__("元/{text}/年",{text:g?__("团队"):__("人")})),a.a.createElement("p",{className:me},__("购买时长"),"：",v,__("年"))),a.a.createElement("p",{className:me},__("付款金额"),"：",h," ",__("元")),a.a.createElement("p",{className:me},__("付款人"),"：",y),a.a.createElement("p",{className:me},__("付款时间"),"：",f&&z()(f).format("YYYY-MM-DD HH:mm:ss")),!c&&a.a.createElement("p",{className:me},__("到期时间"),"：",s&&z()(s).format("YYYY-MM-DD HH:mm:ss")),!u&&a.a.createElement("div",{className:ye},a.a.createElement("img",{width:"120",height:"120",src:je}),a.a.createElement("p",null,__("使用钉钉扫一扫，加入金牌客户群"))),a.a.createElement("div",{className:fe},a.a.createElement(F.a,{type:"primary",onClick:n},__("立即使用")),c&&a.a.createElement(F.a,{className:de,href:g?"/".concat(r.login,"/settings/member"):"/settings/member"},__("查看上传流量"))))))}}])&&be(t.prototype,n),r&&be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);ke.propTypes={visible:c.a.bool,onClose:c.a.func,successData:c.a.object,isRenew:c.a.bool,user:c.a.object,isBuyUpload:c.a.bool,isH5:c.a.bool};var Se=ke,Ce="processmodal-module_processModalContainer_jrXul",Ne="processmodal-module_processModalImg_kmc6C",Pe="processmodal-module_processModalInfo_fOy8-",Te="processmodal-module_processModalOrderId_tDK+c";function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Me(e);if(t){var o=Me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(i,e);var t,n,r,o=Re(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={},t}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.currentOrderId,r=void 0===n?"":n;return a.a.createElement(m.a,{title:null,visible:t,maskClosable:!1,closable:!1,footer:null,centered:!0,width:480,zIndex:9999},a.a.createElement("div",{className:Ce,"data-testid":"process-modal"},a.a.createElement("img",{className:Ne,src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*7q7fR4_EUQQAAAAAAAAAAABjARQnAQ"}),a.a.createElement("p",{className:Pe},__("付费更新中，请稍后...")),a.a.createElement("p",{className:Te},r)))}}])&&Le(t.prototype,n),r&&Le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);Fe.propTypes={visible:c.a.bool,currentOrderId:c.a.string};var Be=Fe,Ue=n(1014);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qe(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$e(e);if(t){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return We(this,n)}}function We(e,t){if(t&&("object"===ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ke(e)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe=f.a.RECEIPT_TYPES,Je=new URLSearchParams(window.location.search).get("premium"),Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(c,e);var t,n,o,i=He(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Qe(Ke(t=i.call(this,e)),"handleDurationChange",(function(e){t.setState({duration:e})})),Qe(Ke(t),"onSelectUploadSize",(function(e){t.setState({uploadSize:e})})),Qe(Ke(t),"setPromoCode",(function(e){t.setState({promoCode:e})})),t.state={memberModalVisible:!1,payModalVisible:!1,successModalVisible:!1,processModalVisible:!1,receiptModalVisible:!1,payModalQRCodeUrl:null,successData:null,receiptSubmited:!1,currentCode:null,currentOrderId:null,isRenew:!1,isBuyUpload:!1,user:e.user,duration:1,uploadSize:10,totalAmount:null,buyLoading:!1,promoCode:void 0,title:"",desc:"",referer:""},t}return t=c,n=[{key:"queryOrderStatusWithRetry",value:function(e){var t=this,n=this.state,r=n.processModalVisible,o=n.payModalVisible,a=this.props.onPaySuccess;(r||o)&&(this.setState({currentOrderId:e}),d.a.memberPay.query({order_id:e}).then((function(n){if(n.isFinished)return t.setState({payModalVisible:!1,payModalQRCodeUrl:null,processModalVisible:!1,successModalVisible:!(a&&"function"==typeof a),successData:n}),void(a&&"function"==typeof a&&a());n.isClosed?t.setState({payModalVisible:!1,payModalQRCodeUrl:null,processModalVisible:!1,successModalVisible:!1}):(n.isPaid&&t.setState({payModalVisible:!1,payModalQRCodeUrl:null,processModalVisible:!0}),(n.isPaid||n.needQuery)&&setTimeout((function(){return t.queryOrderStatusWithRetry(e)}),3e3))})))}},{key:"handleSubmitModalClose",value:function(){this.setState({payModalVisible:!1,payModalQRCodeUrl:null})}},{key:"onSuccessModalClose",value:function(){this.setState({successModalVisible:!1}),this.updatePageStatus()}},{key:"updatePageStatus",value:function(){if(Je){var e=new URLSearchParams(window.location.search);e.delete("premium"),window.location.search=e.toString()}else["#renew"].includes(window.location.hash)?(window.location.hash="",window.location.reload()):window.location.reload()}},{key:"onMemberModalClose",value:function(){this.setState({memberModalVisible:!1})}},{key:"onPayModalClose",value:function(){this.setState({payModalVisible:!1,payModalQRCodeUrl:null})}},{key:"onPayModalCancel",value:function(){Je&&(r.a.info(__("支付流程未完成，已为你创建一个基础版团队")),setTimeout((function(){var e=new URLSearchParams(window.location.search);e.delete("premium"),window.location.search=e.toString()}),1e3)),this.setState({payModalVisible:!1,payModalQRCodeUrl:null})}},{key:"onReceiptModalClose",value:function(){this.setState({receiptModalVisible:!1})}},{key:"startToPay",value:function(){var e=this,t=this.state,n=t.isRenew,r=t.isBuyUpload,o=t.duration,a=t.uploadSize,i=t.user,c=t.promoCode,u=t.referer;this.setState({memberModalVisible:!1,payModalVisible:!0,buyLoading:!0});var s=d.a.memberPay.create,f={user_id:i.id,referer:u};r?(s=d.a.memberPay.buyData,f.upload_size=a):n?(s=d.a.memberPay.renew,f.duration=o):f.duration=o,c&&(f.promo_code=c),s(f).then((function(t){var n=t.existed_order_id,r=t.out_trade_no,o=t.qr_code,a=t.totalAmount;if(e.setState({buyLoading:!1}),n)return e.setState({payModalVisible:!1,payModalQRCodeUrl:null,totalAmount:a}),void setTimeout((function(){e.setState({processModalVisible:!0}),e.queryOrderStatusWithRetry(n)}),100);l.a.toDataURL(o,(function(t,n){e.setState({payModalQRCodeUrl:n,totalAmount:a})})),e.queryOrderStatusWithRetry(r)}))}},{key:"showMemberIntro",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUser||this.props.user;!p.a.isGroupOrPublication(t)||e.isBuyUpload?this.setState({memberModalVisible:!0,currentCode:e.code,isRenew:e.isRenew,isBuyUpload:e.isBuyUpload,user:t,title:e.title,desc:e.desc,referer:e.referer}):window.location.href="/404"}},{key:"onClickReceipt",value:function(){this.setState({successModalVisible:!1,receiptModalVisible:!0})}},{key:"onReceiptModalConfirm",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",o=e.form,a=o.validateFields;a((function(e,o){if(!e){var a=t.state.user,i=Xe[n],c=a.id;d.a.memberPay.applyReceipt(Ve({type:i,user_id:c},o)).then((function(){t.setState({receiptSubmited:!0}),t.props.onReceiptSuccess(),t.onReceiptModalClose(),r.a.success(__("已成功提交发票申请"))}))}}))}},{key:"onClickRenew",value:function(){this.showMemberIntro({isRenew:!0})}},{key:"render",value:function(){var e=this,t=window.appData,n=t.groupMemberInfo,r=t.userMemberInfo,o=this.state,i=o.user,c=o.duration,u=o.uploadSize,l=o.buyLoading,s=o.promoCode,f=((p.a.isGroupOrPublication(i)?n:r)||{}).receipt;return a.a.createElement("div",{"data-testid":"pay-flow"},i&&i.id&&this.state.memberModalVisible&&a.a.createElement(ie,{key:this.state.memberModalVisible,isBuyUpload:this.state.isBuyUpload,isRenew:this.state.isRenew,visible:this.state.memberModalVisible,startToPay:function(){return e.startToPay()},onClose:function(){return e.onMemberModalClose()},user:i,code:this.state.currentCode,duration:c,handleDurationChange:this.handleDurationChange,uploadSize:u,onSelectUploadSize:this.onSelectUploadSize,buyLoading:l,promoCode:s,setPromoCode:this.setPromoCode,title:this.state.title,desc:this.state.desc}),this.state.payModalVisible&&a.a.createElement(D,{isRenew:this.state.isRenew,totalAmount:this.state.totalAmount,visible:this.state.payModalVisible,onClose:function(){return e.onPayModalClose()},onCancel:function(){return e.onPayModalCancel()},qrCodeUrl:this.state.payModalQRCodeUrl,user:i}),this.state.processModalVisible&&a.a.createElement(Be,{visible:this.state.processModalVisible,currentOrderId:this.state.currentOrderId}),this.state.successModalVisible&&a.a.createElement(Se,{isRenew:this.state.isRenew,visible:this.state.successModalVisible,onClose:function(){return e.onSuccessModalClose()},onClickReceipt:function(){return e.onClickReceipt()},successData:this.state.successData,user:i,isBuyUpload:this.state.isBuyUpload}),this.state.receiptModalVisible&&a.a.createElement(Ue.a,{visible:this.state.receiptModalVisible,onClose:function(){return e.onReceiptModalClose()},onConfirm:function(t,n){return e.onReceiptModalConfirm(t,n)},receipt:f,submited:!!f||this.state.receiptSubmited,user:i}))}}],n&&Ye(t.prototype,n),o&&Ye(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.PureComponent);Ze.propTypes={user:c.a.object,onReceiptSuccess:c.a.func,onPaySuccess:c.a.func};t.a=Ze},function(e,t,n){"use strict";var r={public_popup:"public_popup",org_popup:"org_popup",public_notice:"public_notice",index_notice:"index_notice",org_notice:"org_notice",public_broadcast:"public_broadcast",org_broadcast:"org_broadcast",newbie:"newbie",user_join_org:"user_join_org",admin_create_org:"admin_create_org",org_will_expire:"org_will_expire",org_expired:"org_expired",org_upload_will_use_out:"org_upload_will_use_out",org_upload_use_out:"org_upload_use_out"};e.exports={TYPES_MAP:r,TYPES:Object.values(r),GUIDE_TYPES:["_for_test","user_paid_reminder","user_expired_reminder","group_paid_reminder","group_newbie_reminder","group_enable_upgrade","group_will_auto_upgrade","desktop_feature_group_upgraded","doc_present_mode_scale_guide","doc_present_mode_recent_edit_guide","group_issue_guide","skylink_guide"],SITE_TIP_TYPES:[r.org_popup,r.public_popup,r.org_notice,r.public_notice,r.index_notice,r.org_broadcast,r.public_broadcast],TIP_OPTIONS:{public_popup:{name:"个人全站弹窗"},org_popup:{name:"空间全站弹窗"},public_notice:{name:"个人工作台顶部条"},org_notice:{name:"空间工作台顶部条"},index_notice:{name:"官网顶部条"},public_broadcast:{name:"个人工作台右侧广播"},org_broadcast:{name:"空间工作台右侧广播"}},GUIDE_READ_STATUS:{read:1,unread:0}}},function(e,t,n){"use strict";t.a={getState:"editor.getState",enableTools:"editor.enableTools",updateEditorState:"editor.updateEditorState",firstContentChange:"editor.firstContentChange",contentChange:"editor.contentChange",applyChange:"editor.applyChange",publish:"editor.publish",keyboardDismiss:"keyboardDismiss",titleFocus:"titleFocus",clearContent:"clearContent",editorClicked:"editorClicked",editorTouchStart:"editorTouchStart",save:"editor.save",revert:"editor.revert",getContent:"getContent"}},,,function(e,t,n){var r=n(604),o=n(454),a=n(2178),i=n(1993);e.exports=function(e,t){if(null==e)return{};var n=r(i(e),(function(e){return[e]}));return t=o(t),a(e,n,(function(e,n){return t(e,n[0])}))}},function(e,t,n){"use strict";n(162)},,function(e,t,n){"use strict";var r=n(90),o={DOCLET:"Doclet",DOC:"Doc",STATUS:{draft:0,publish:1,pending:2,insecure:97,suspect:98,illegal:99,banned:100},CATEGORY:{BOOK_INDEX_PAGE:"book_index_page",NOTE:"note",ORG_BOARD:"org_board",SERVICIFY:"servicify",VIEW_BLOCK:"viewBlock",TEMPLATE:"template",USER_README:"user_readme",LIST_NOTICE:"list_notice",PUBLICATION_DESC:"publication_desc"},FORMAT:r.FORMAT,EDIT_TYPE:r.EDIT_TYPE,TARGET_TYPE:{ORGANIZATION:"Organization",TEMPLATE:"Template",VIEW_BLOCK:"ViewBlock",BOOK:"Book",USER:"User",ORGANIZATION_USER:"OrganizationUser",PUBLICATION:"User"},TYPE:{DOC:"Doc",MIND:"Mind",BOARD:"Board",SHEET:"Sheet",SHOW:"Show",TABLE:"Table"},STATUS_NAMES:{}};for(var a in o.STATUS)o.STATUS_NAMES[o.STATUS[a]]=a;e.exports=o},function(e,t,n){"use strict";n(162),n(903)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(973),a=n(294),i=n(652),c=n(2197).BaseValidatorClass,u=n(1206).MobileValidatorClass,l=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"httpURL",value:function(e){e=this._stringify(e);try{var t=new URL(e);if("https:"!==t.protocol&&"http:"!==t.protocol)throw new Error("protocol error")}catch(n){return this.__("请输入正确的 HTTP(s) URL 地址")}}},{key:"alphanumeric",value:function(e){if(!(e=this._stringify(e))||!o.isAlphanumeric(e))return this.__("必须都是字符和数字")}},{key:"numeric",value:function(e){if(!(e=this._stringify(e))||!o.isNumeric(e))return this.__("必须都是数字字符")}},{key:"decimal",value:function(e){if(!(e=this._stringify(e))||!o.isDecimal(e))return this.__("必须是小数或者整数")}},{key:"mobileCode",value:function(e,t){if("string"!=typeof e)return this.__("必须是字符串");if(!o.isNumeric(e))return this.__("必须都是数字字符");var n=t&&t.min||4;return e.length<n?this.__("至少 {s} 个数字",{s:n}):void 0}},{key:"IP",value:function(e){if(!(e=this._stringify(e))||!o.isIP(e))return this.__("必须是 IP v4 或者 v6 格式")}},{key:"IPv4",value:function(e){if(!(e=this._stringify(e))||!o.isIP(e,4))return this.__("必须是 IP v4 格式")}},{key:"IPv6",value:function(e){if(!(e=this._stringify(e))||!o.isIP(e,6))return this.__("必须是 IP v6 格式")}},{key:"bookPublic",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!o.isNumeric(e))return this.__("public 参数只允许是 0、1 或者 2");e=parseInt(e)}var t=a.book.PUBLIC;if(e!==t.public&&e!==t.private&&e!==t.intranet)return this.__("public 参数只允许是 0、1 或者 2")}},{key:"starType",value:function(e){if(e){var t=["Book","Design"];return t.includes(e)?void 0:this.__("type 参数只允许为 {s}",{s:t.join(", ")})}}},{key:"searchPage250",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!o.isNumeric(e))return this.__("只允许是正整数并且要小于等于 250");e=parseInt(e)}if(e<1||e>250||isNaN(e))return this.__("只允许是正整数并且要小于等于 250")}},{key:"isEmail",value:function(e){return e=this._stringify(e),o.isEmail(e)}},{key:"isUser",value:function(e){return e=this._stringify(e),/^[A-Za-z0-9][A-Za-z0-9\-_\.]{1,64}$/.test(e)}},{key:"isoDate",value:function(e){if(!e||!l.test(e))return this.__("必须是符合 ISO Date 格式的字符串")}},{key:"looseUrl",value:function(e){e=this._stringify(e);var t=this.__("请输入正确的 URL 地址");if(!e)return t;if(!/^\//.test(e)){if(/^\s*javascript:\/\//i.test(e))return t;try{new URL(e)}catch(n){return t}}}},{key:"stringArr",value:function(e,t){if(e&&t.values&&(e=e.split(",").map((function(e){return e.trim()})),e.some((function(e){return!t.values.includes(e)}))))return this.__("必须是 {type} 其中的值",{type:t.values.join("、")})}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=i.apply(void 0,[c].concat([u,s]));t.Validator=f,"undefined"!=typeof window&&"function"==typeof window.__&&(t.validator=new f(window.__))},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var r=n(56),o=n.n(r),a=n(235),i=n(1018),c=n(961);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=window.appData,s=l.isDingTalkMiniApp,f=l.isYuqueMobileApp;function d(e){try{var t=new URL(e);return window.appData.isYuque||window.appData.isPublicCloud?t.host.endsWith(".yuque.com")||t.host.endsWith(".alipay.com")||t.host.endsWith("lark.alipay.net:7001"):t.host.endsWith(".antfin.com")||t.host.endsWith(".antfin-inc.com")}catch(n){}return!1}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"isSupportRelocate",value:function(){return window.h5&&(s||f||window.dd||window.AlipayJSBridge)}},{key:"buildRelocateUrl",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.hash,i=void 0!==a&&a;if(s)t=i?"".concat(window.location.origin,"/index.html"):window.location.origin;else if(window.dd)t=window.location.origin;else if(window.AlipayJSBridge)if(i){t=o()(window,"AlipayJSBridge.startupParams.url");var c=o()(window,"AlipayJSBridge.startupParams.onlineHost");c&&(t="".concat(c,"/index.html"))}else{var u,l;t=(null===(u=window.yqWebApp)||void 0===u||null===(l=u.globalServiceEnv)||void 0===l?void 0:l.host)||window.location.origin}if(t)return i?(n=new window.URL(t)).hash=e:n=new window.URL(e,t),n.toString()}},{key:"relocate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hash,r=void 0!==n&&n,o=t.closeCurrentWindow,a=void 0!==o&&o,i=t.transparentTitle,c=void 0!==i&&i,u=this.buildRelocateUrl(e,{hash:r});this.relocateWithUrl(u,{closeCurrentWindow:a,transparentTitle:c})}},{key:"relocateWithUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.closeCurrentWindow,r=void 0!==n&&n,o=t.transparentTitle,u=void 0!==o&&o;if(e&&e.length){if(!d(e))return c.a.openInBrowser(e);if(s){var l=r?"redirectTo":"navigateTo";Object(i.a)(l,{url:"/pages/home/index?url=".concat(encodeURIComponent(e))})}else window.dd?window.dd.biz.util.openLink({url:e}):f?a.a.pushWebWindow({url:e}):window.AlipayJSBridge&&window.AlipayJSBridge.call("pushWindow",{url:e,param:{readTitle:!0,showOptionMenu:!1,transparentTitle:u,closeCurrentWindow:r}})}}}],n&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),m=new p;t.a=m},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return W})),n.d(t,"c",(function(){return K})),n.d(t,"e",(function(){return ee})),n.d(t,"b",(function(){return ne}));var r=n(0),o=n(14),a=n(55),i=n(18),c=n(11),u=n(40),l=n(57),s=n(58),f=n(203),d=n(66),p=n(72),m=n(197),h=n(85),y=n(434);function v(e){return null==e?[]:Array.isArray(e)?e:[e]}var b=n(15),g=n.n(b),_=n(429),w=n(41),E=n(2232),O=n(1324),x=n(2231);function j(e){return v(e)}function k(e,t){return Object(O.a)(e,t)}function S(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Object(x.a)(e,t,n,r);return o}function C(e,t){var n={};return t.forEach((function(t){var r=k(e,t);n=S(n,t,r)})),n}function N(e,t){return e&&e.some((function(e){return L(e,t)}))}function P(e){return"object"===Object(w.a)(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function T(e,t){var n=Array.isArray(e)?Object(u.a)(e):Object(c.a)({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],o=t[e],a=P(r)&&P(o);n[e]=a?T(r,o||{}):o})),n):n}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return T(e,t)}),e)}function L(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function I(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&e in t.target?t.target[e]:t}function R(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var o=e[t],a=t-n;return a>0?[].concat(Object(u.a)(e.slice(0,n)),[o],Object(u.a)(e.slice(n,t)),Object(u.a)(e.slice(t+1,r))):a<0?[].concat(Object(u.a)(e.slice(0,t)),Object(u.a)(e.slice(t+1,n+1)),[o],Object(u.a)(e.slice(n+1,r))):e}var D="'${name}' is not a valid ${type}",M={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:D,method:D,array:D,object:D,number:D,date:D,boolean:D,integer:D,float:D,regexp:D,email:D,url:D,hex:D},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},F=E.a;function B(e,t,n,r){var o=Object(c.a)(Object(c.a)({},n),{},{name:t,enum:(n.enum||[]).join(", ")}),a=function(e,t){return function(){return function(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}(e,Object(c.a)(Object(c.a)({},o),t))}};return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(o){var i=t[o];"string"==typeof i?n[o]=a(i,r):i&&"object"===Object(w.a)(i)?(n[o]={},e(i,n[o])):n[o]=i})),n}(A({},M,e))}function U(e,t,n,r,o){return z.apply(this,arguments)}function z(){return(z=Object(_.a)(g.a.mark((function e(t,n,o,a,l){var s,f,d,p,m,h;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(c.a)({},o),f=null,s&&"array"===s.type&&s.defaultField&&(f=s.defaultField,delete s.defaultField),d=new F(Object(i.a)({},t,[s])),p=B(a.validateMessages,t,s,l),d.messages(p),m=[],e.prev=7,e.next=10,Promise.resolve(d.validate(Object(i.a)({},t,n),Object(c.a)({},a)));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),e.t0.errors?m=e.t0.errors.map((function(e,t){var n=e.message;return r.isValidElement(n)?r.cloneElement(n,{key:"error_".concat(t)}):n})):(console.error(e.t0),m=[p.default()]);case 15:if(m.length||!f){e.next=20;break}return e.next=18,Promise.all(n.map((function(e,n){return U("".concat(t,".").concat(n),e,f,a,l)})));case 18:return h=e.sent,e.abrupt("return",h.reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(t))}),[]));case 20:return e.abrupt("return",m);case 21:case"end":return e.stop()}}),e,null,[[7,12]])})))).apply(this,arguments)}function G(e,t,n,r,o,a){var i,u=e.join("."),l=n.map((function(e){var t=e.validator;return t?Object(c.a)(Object(c.a)({},e),{},{validator:function(e,n,r){var o=!1,a=t(e,n,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){Object(h.a)(!o,"Your validator function has already return a promise. `callback` will be ignored."),o||r.apply(void 0,t)}))}));o=a&&"function"==typeof a.then&&"function"==typeof a.catch,Object(h.a)(o,"`callback` is deprecated. Please return a promise instead."),o&&a.then((function(){r()})).catch((function(e){r(e||" ")}))}}):e}));if(!0===o)i=new Promise(function(){var e=Object(_.a)(g.a.mark((function e(n,o){var i,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<l.length)){e.next=11;break}return e.next=4,U(u,t,l[i],r,a);case 4:if(!(c=e.sent).length){e.next=8;break}return o(c),e.abrupt("return");case 8:i+=1,e.next=1;break;case 11:n([]);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var s=l.map((function(e){return U(u,t,e,r,a)}));i=(o?function(e){return Y.apply(this,arguments)}(s):function(e){return V.apply(this,arguments)}(s)).then((function(e){return e.length?Promise.reject(e):[]}))}return i.catch((function(e){return e})),i}function V(){return(V=Object(_.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Object(u.a)(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.length&&e(r),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,n,r,o,a){return"function"==typeof e?e(t,n,"source"in a?{source:a.source}:{}):r!==o}var H=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var o;(Object(l.a)(this,n),(o=t.call(this,e)).state={resetCount:0},o.cancelRegisterFunc=null,o.mounted=!1,o.touched=!1,o.dirty=!1,o.validatePromise=null,o.errors=[],o.cancelRegister=function(){var e=o.props,t=e.preserve,n=e.isListField,r=e.name;o.cancelRegisterFunc&&o.cancelRegisterFunc(n,t,j(r)),o.cancelRegisterFunc=null},o.getNamePath=function(){var e=o.props,t=e.name,n=e.fieldContext.prefixName,r=void 0===n?[]:n;return void 0!==t?[].concat(Object(u.a)(r),Object(u.a)(t)):[]},o.getRules=function(){var e=o.props,t=e.rules,n=void 0===t?[]:t,r=e.fieldContext;return n.map((function(e){return"function"==typeof e?e(r):e}))},o.refresh=function(){o.mounted&&o.setState((function(e){return{resetCount:e.resetCount+1}}))},o.onStoreChange=function(e,t,n){var r=o.props,a=r.shouldUpdate,i=r.dependencies,c=void 0===i?[]:i,u=r.onReset,l=n.store,s=o.getNamePath(),f=o.getValue(e),d=o.getValue(l),p=t&&N(t,s);switch("valueUpdate"===n.type&&"external"===n.source&&f!==d&&(o.touched=!0,o.dirty=!0,o.validatePromise=null,o.errors=[]),n.type){case"reset":if(!t||p)return o.touched=!1,o.dirty=!1,o.validatePromise=null,o.errors=[],u&&u(),void o.refresh();break;case"setField":if(p){var m=n.data;return"touched"in m&&(o.touched=m.touched),"validating"in m&&!("originRCField"in m)&&(o.validatePromise=m.validating?Promise.resolve([]):null),"errors"in m&&(o.errors=m.errors||[]),o.dirty=!0,void o.reRender()}if(a&&!s.length&&q(a,e,l,f,d,n))return void o.reRender();break;case"dependenciesUpdate":if(c.map(j).some((function(e){return N(n.relatedFields,e)})))return void o.reRender();break;default:if(p||(!c.length||s.length||a)&&q(a,e,l,f,d,n))return void o.reRender()}!0===a&&o.reRender()},o.validateRules=function(e){var t=o.getNamePath(),n=o.getValue(),r=Promise.resolve().then((function(){if(!o.mounted)return[];var a=o.props,i=a.validateFirst,c=void 0!==i&&i,u=a.messageVariables,l=(e||{}).triggerName,s=o.getRules();l&&(s=s.filter((function(e){var t=e.validateTrigger;return!t||v(t).includes(l)})));var f=G(t,n,s,e,c,u);return f.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o.validatePromise===r&&(o.validatePromise=null,o.errors=e,o.reRender())})),f}));return o.validatePromise=r,o.dirty=!0,o.errors=[],o.reRender(),r},o.isFieldValidating=function(){return!!o.validatePromise},o.isFieldTouched=function(){return o.touched},o.isFieldDirty=function(){return o.dirty},o.getErrors=function(){return o.errors},o.isListField=function(){return o.props.isListField},o.isList=function(){return o.props.isList},o.isPreserve=function(){return o.props.preserve},o.getMeta=function(){return o.prevValidating=o.isFieldValidating(),{touched:o.isFieldTouched(),validating:o.prevValidating,errors:o.errors,name:o.getNamePath()}},o.getOnlyChild=function(e){if("function"==typeof e){var t=o.getMeta();return Object(c.a)(Object(c.a)({},o.getOnlyChild(e(o.getControlled(),t,o.props.fieldContext))),{},{isFunction:!0})}var n=Object(m.a)(e);return 1===n.length&&r.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},o.getValue=function(e){var t=o.props.fieldContext.getFieldsValue,n=o.getNamePath();return k(e||t(!0),n)},o.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.props,n=t.trigger,r=t.validateTrigger,a=t.getValueFromEvent,u=t.normalize,l=t.valuePropName,s=t.getValueProps,f=t.fieldContext,d=void 0!==r?r:f.validateTrigger,p=o.getNamePath(),m=f.getInternalHooks,h=f.getFieldsValue,b=m(y.a),g=b.dispatch,_=o.getValue(),w=s||function(e){return Object(i.a)({},l,e)},E=e[n],O=Object(c.a)(Object(c.a)({},e),w(_));O[n]=function(){var e;o.touched=!0,o.dirty=!0;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=a?a.apply(void 0,n):I.apply(void 0,[l].concat(n)),u&&(e=u(e,_,h(!0))),g({type:"updateValue",namePath:p,value:e}),E&&E.apply(void 0,n)};var x=v(d||[]);return x.forEach((function(e){var t=O[e];O[e]=function(){t&&t.apply(void 0,arguments);var n=o.props.rules;n&&n.length&&g({type:"validateField",namePath:p,triggerName:e})}})),O},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(y.a).initEntityValue)(Object(f.a)(o));return o}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(y.a).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,o=this.getOnlyChild(n),a=o.child;return o.isFunction?e=a:r.isValidElement(a)?e=r.cloneElement(a,this.getControlled(a.props)):(Object(h.a)(!a,"`children` of Field is not validate ReactElement."),e=a),r.createElement(r.Fragment,{key:t},e)}}]),n}(r.Component);H.contextType=y.b,H.defaultProps={trigger:"onChange",valuePropName:"value"};var W=function(e){var t=e.name,n=Object(a.a)(e,["name"]),i=r.useContext(y.b),c=void 0!==t?j(t):void 0,u="keep";return n.isListField||(u="_".concat((c||[]).join("_"))),r.createElement(H,Object(o.default)({key:u,name:c},n,{fieldContext:i}))},K=function(e){var t=e.name,n=e.initialValue,o=e.children,a=e.rules,i=e.validateTrigger,l=r.useContext(y.b),s=r.useRef({keys:[],id:0}).current;if("function"!=typeof o)return Object(h.a)(!1,"Form.List only accepts function as children."),null;var f=j(l.prefixName)||[],d=[].concat(Object(u.a)(f),Object(u.a)(j(t)));return r.createElement(y.b.Provider,{value:Object(c.a)(Object(c.a)({},l),{},{prefixName:d})},r.createElement(W,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:a,validateTrigger:i,initialValue:n,isList:!0},(function(e,t){var n=e.value,r=void 0===n?[]:n,a=e.onChange,i=l.getFieldValue,c=function(){return i(d||[])||[]},f={add:function(e,t){var n=c();t>=0&&t<=n.length?(s.keys=[].concat(Object(u.a)(s.keys.slice(0,t)),[s.id],Object(u.a)(s.keys.slice(t))),a([].concat(Object(u.a)(n.slice(0,t)),[e],Object(u.a)(n.slice(t))))):(s.keys=[].concat(Object(u.a)(s.keys),[s.id]),a([].concat(Object(u.a)(n),[e]))),s.id+=1},remove:function(e){var t=c(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(s.keys=s.keys.filter((function(e,t){return!n.has(t)})),a(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=c();e<0||e>=n.length||t<0||t>=n.length||(s.keys=R(s.keys,e,t),a(R(n,e,t)))}}},p=r||[];return Array.isArray(p)||(p=[]),o(p.map((function(e,t){var n=s.keys[t];return void 0===n&&(s.keys[t]=s.id,n=s.keys[t],s.id+=1),{name:t,key:n,isListField:!0}})),f,t)})))},$=n(28);var Q="__@field_split__";function X(e){return e.map((function(e){return"".concat(Object(w.a)(e),":").concat(e)})).join(Q)}var J=function(){function e(){Object(l.a)(this,e),this.kvs=new Map}return Object(s.a)(e,[{key:"set",value:function(e,t){this.kvs.set(X(e),t)}},{key:"get",value:function(e){return this.kvs.get(X(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(X(e))}},{key:"map",value:function(e){return Object(u.a)(this.kvs.entries()).map((function(t){var n=Object($.a)(t,2),r=n[0],o=n[1],a=r.split(Q);return e({key:a.map((function(e){var t=e.match(/^([^:]*):(.*)$/),n=Object($.a)(t,3),r=n[1],o=n[2];return"number"===r?Number(o):o})),value:o})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),Z=function e(t){var n=this;Object(l.a)(this,e),this.formHooked=!1,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===y.a?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve}):(Object(h.a)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.setInitialValues=function(e,t){n.initialValues=e||{},t&&(n.store=A({},e,n.store))},this.getInitialValue=function(e){return k(n.initialValues,e)},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){0},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new J;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=j(e);return t.get(n)||{INVALIDATE_NAME_PATH:j(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),o=[];return r.forEach((function(n){var r,a="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var i="getMeta"in n?n.getMeta():null;t(i)&&o.push(a)}else o.push(a)})),C(n.store,o.map(j))},this.getFieldValue=function(e){n.warningUnhooked();var t=j(e);return k(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors()}:{name:j(e[n]),errors:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=j(e);return n.getFieldsError([t])[0].errors},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,a=t[0],i=t[1],c=!1;0===t.length?o=null:1===t.length?Array.isArray(a)?(o=a.map(j),c=!1):(o=null,c=a):(o=a.map(j),c=i);var l=n.getFieldEntities(!0),s=function(e){return e.isFieldTouched()};if(!o)return c?l.every(s):l.some(s);var f=new J;o.forEach((function(e){f.set(e,[])})),l.forEach((function(e){var t=e.getNamePath();o.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&f.update(n,(function(t){return[].concat(Object(u.a)(t),[e])}))}))}));var d=function(e){return e.some(s)},p=f.map((function(e){return e.value}));return c?p.every(d):p.some(d)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(j);return t.some((function(e){var t=e.getNamePath();return N(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new J,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var o=t.get(r)||new Set;o.add({entity:e,value:n}),t.set(r,o)}}));var o,a=function(r){r.forEach((function(r){if(void 0!==r.props.initialValue){var o=r.getNamePath();if(void 0!==n.getInitialValue(o))Object(h.a)(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var a=t.get(o);if(a&&a.size>1)Object(h.a)(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var i=n.getFieldValue(o);e.skipExist&&void 0!==i||(n.store=S(n.store,o,Object(u.a)(a)[0].value))}}}}))};e.entities?o=e.entities:e.namePathList?(o=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=o).push.apply(n,Object(u.a)(Object(u.a)(r).map((function(e){return e.entity}))))}))):o=r,a(o)},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.store=A({},n.initialValues),n.resetWithFieldInitialValue(),void n.notifyObservers(t,null,{type:"reset"});var r=e.map(j);r.forEach((function(e){var t=n.getInitialValue(e);n.store=S(n.store,e,t)})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"})},this.setFields=function(e){n.warningUnhooked();var t=n.store;e.forEach((function(e){var r=e.name,o=(e.errors,Object(a.a)(e,["name","errors"])),i=j(r);"value"in o&&(n.store=S(n.store,i,o.value)),n.notifyObservers(t,[i],{type:"setField",data:e})}))},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=e.getMeta(),o=Object(c.a)(Object(c.a)({},r),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(o,"originRCField",{value:!0}),o}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===k(n.store,r)&&(n.store=S(n.store,r,t))}},this.registerField=function(e){if(n.fieldEntities.push(e),void 0!==e.props.initialValue){var t=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e}));var a=void 0!==r?r:n.preserve;if(!1===a&&(!t||o.length>1)){var i=e.getNamePath(),c=t?void 0:k(n.initialValues,i);i.length&&n.getFieldValue(i)!==c&&n.fieldEntities.every((function(e){return!L(e.getNamePath(),i)}))&&(n.store=S(n.store,i,c,!0))}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var o=e.namePath,a=e.triggerName;n.validateFields([o],{triggerName:a})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var o=Object(c.a)(Object(c.a)({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,o)}))}else n.forceRootUpdate()},this.updateValue=function(e,t){var r=j(e),o=n.store;n.store=S(n.store,r,t),n.notifyObservers(o,[r],{type:"valueUpdate",source:"internal"});var a=n.getDependencyChildrenFields(r);a.length&&n.validateFields(a),n.notifyObservers(o,a,{type:"dependenciesUpdate",relatedFields:[r].concat(Object(u.a)(a))});var i=n.callbacks.onValuesChange;i&&i(C(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(Object(u.a)(a)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;e&&(n.store=A(n.store,e)),n.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],o=new J;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=j(t);o.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(o.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var o=n.getNamePath();n.isFieldDirty()&&o.length&&(r.push(o),e(o))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var o=n.getFields();if(t){var a=new J;t.forEach((function(e){var t=e.name,n=e.errors;a.set(t,n)})),o.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}r(o.filter((function(t){var n=t.name;return N(e,n)})),o)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,o=r?e.map(j):[],a=[];n.getFieldEntities(!0).forEach((function(i){if(r||o.push(i.getNamePath()),(null==t?void 0:t.recursive)&&r){var u=i.getNamePath();u.every((function(t,n){return e[n]===t||void 0===e[n]}))&&o.push(u)}if(i.props.rules&&i.props.rules.length){var l=i.getNamePath();if(!r||N(o,l)){var s=i.validateRules(Object(c.a)({validateMessages:Object(c.a)(Object(c.a)({},M),n.validateMessages)},t));a.push(s.then((function(){return{name:l,errors:[]}})).catch((function(e){return Promise.reject({name:l,errors:e})})))}}}));var i=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(o,a){e.forEach((function(e,i){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[i]=e,n>0||(t&&a(r),o(r))}))}))})):Promise.resolve([])}(a);n.lastValidatePromise=i,i.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var u=i.then((function(){return n.lastValidatePromise===i?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(o),errorFields:t,outOfDate:n.lastValidatePromise!==i})}));return u.catch((function(e){return e})),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(r){console.error(r)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t};var ee=function(e){var t=r.useRef(),n=r.useState({}),o=Object($.a)(n,2)[1];if(!t.current)if(e)t.current=e;else{var a=new Z((function(){o({})}));t.current=a.getForm()}return[t.current]},te=r.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),ne=function(e){var t=e.validateMessages,n=e.onFormChange,o=e.onFormFinish,a=e.children,u=r.useContext(te),l=r.useRef({});return r.createElement(te.Provider,{value:Object(c.a)(Object(c.a)({},u),{},{validateMessages:Object(c.a)(Object(c.a)({},u.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:l.current}),u.triggerFormChange(e,t)},triggerFormFinish:function(e,t){o&&o(e,{values:t,forms:l.current}),u.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(l.current=Object(c.a)(Object(c.a)({},l.current),{},Object(i.a)({},e,t))),u.registerForm(e,t)},unregisterForm:function(e){var t=Object(c.a)({},l.current);delete t[e],l.current=t,u.unregisterForm(e)}})},a)},re=te,oe=function(e,t){var n=e.name,i=e.initialValues,l=e.fields,s=e.form,f=e.preserve,d=e.children,p=e.component,m=void 0===p?"form":p,h=e.validateMessages,v=e.validateTrigger,b=void 0===v?"onChange":v,g=e.onValuesChange,_=e.onFieldsChange,E=e.onFinish,O=e.onFinishFailed,x=Object(a.a)(e,["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"]),j=r.useContext(re),k=ee(s),S=Object($.a)(k,1)[0],C=S.getInternalHooks(y.a),N=C.useSubscribe,P=C.setInitialValues,T=C.setCallbacks,A=C.setValidateMessages,L=C.setPreserve;r.useImperativeHandle(t,(function(){return S})),r.useEffect((function(){return j.registerForm(n,S),function(){j.unregisterForm(n)}}),[j,S,n]),A(Object(c.a)(Object(c.a)({},j.validateMessages),h)),T({onValuesChange:g,onFieldsChange:function(e){if(j.triggerFormChange(n,e),_){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];_.apply(void 0,[e].concat(r))}},onFinish:function(e){j.triggerFormFinish(n,e),E&&E(e)},onFinishFailed:O}),L(f);var I=r.useRef(null);P(i,!I.current),I.current||(I.current=!0);var R=d,D="function"==typeof d;D&&(R=d(S.getFieldsValue(!0),S));N(!D);var M=r.useRef();r.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==Object(w.a)(e)||"object"!==Object(w.a)(t))return!1;var n=Object.keys(e),r=Object.keys(t),o=new Set([].concat(Object(u.a)(n),Object(u.a)(r)));return Object(u.a)(o).every((function(n){var r=e[n],o=t[n];return"function"==typeof r&&"function"==typeof o||r===o}))})(M.current||[],l||[])||S.setFields(l||[]),M.current=l}),[l,S]);var F=r.useMemo((function(){return Object(c.a)(Object(c.a)({},S),{},{validateTrigger:b})}),[S,b]),B=r.createElement(y.b.Provider,{value:F},R);return!1===m?B:r.createElement(m,Object(o.default)({},x,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),S.submit()},onReset:function(e){var t;e.preventDefault(),S.resetFields(),null===(t=x.onReset)||void 0===t||t.call(x,e)}}),B)},ae=r.forwardRef(oe);ae.FormProvider=ne,ae.Field=W,ae.List=K,ae.useForm=ee;t.d=ae},function(e,t,n){var r=n(2179);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(0),o=n(353),a=Object(o.a)()?r.useLayoutEffect:r.useEffect;t.a=a;var i=function(e,t){var n=r.useRef(!0);a((function(){if(!n.current)return e()}),t),a((function(){return n.current=!1,function(){n.current=!0}}),[])}},function(e,t,n){"use strict";t.a={modal:"index-module_modal_pcaUs",content:"index-module_content_QzTkp",footer:"index-module_footer_RFKYC",footerAction:"index-module_footerAction_rrJ4h",footerOther:"index-module_footerOther_dgcwT",actionBtn:"index-module_actionBtn_3gX8b",actionBtnWrapper:"index-module_actionBtnWrapper_NTfX9",errorTip:"index-module_errorTip_Z14UW"}},,function(e,t,n){"use strict";n(162)},,function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(10),c=n.n(i),u=n(257),l=n(158),s=function(){var e=(0,a.useContext(u.b).getPrefixCls)("empty-img-default");return a.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(24 31.67)"},a.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),a.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),a.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),a.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),a.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),a.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),a.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},a.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),a.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},f=function(){var e=(0,a.useContext(u.b).getPrefixCls)("empty-img-simple");return a.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},a.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),a.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},a.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),a.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))},d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},p=a.createElement(s,null),m=a.createElement(f,null),h=function(e){var t=e.className,n=e.prefixCls,i=e.image,s=void 0===i?p:i,f=e.description,h=e.children,y=e.imageStyle,v=d(e,["className","prefixCls","image","description","children","imageStyle"]),b=a.useContext(u.b),g=b.getPrefixCls,_=b.direction;return a.createElement(l.a,{componentName:"Empty"},(function(e){var i,u=g("empty",n),l=void 0!==f?f:e.description,d="string"==typeof l?l:"empty",p=null;return p="string"==typeof s?a.createElement("img",{alt:d,src:s}):s,a.createElement("div",Object(r.default)({className:c()(u,(i={},Object(o.a)(i,"".concat(u,"-normal"),s===m),Object(o.a)(i,"".concat(u,"-rtl"),"rtl"===_),i),t)},v),a.createElement("div",{className:"".concat(u,"-image"),style:y},p),l&&a.createElement("div",{className:"".concat(u,"-description")},l),h&&a.createElement("div",{className:"".concat(u,"-footer")},h))}))};h.PRESENTED_IMAGE_DEFAULT=p,h.PRESENTED_IMAGE_SIMPLE=m;t.a=h},function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(0),i=n.n(a),c=n(11),u=n(57),l=n(58),s=n(66),f=n(72),d=n(10),p=n.n(d),m=function(e){var t,n="".concat(e.rootPrefixCls,"-item"),o=p()(n,"".concat(n,"-").concat(e.page),(t={},Object(r.a)(t,"".concat(n,"-active"),e.active),Object(r.a)(t,"".concat(n,"-disabled"),!e.page),Object(r.a)(t,e.className,!!e.className),t));return i.a.createElement("li",{title:e.showTitle?e.page:null,className:o,onClick:function(){e.onClick(e.page)},onKeyPress:function(t){e.onKeyPress(t,e.onClick,e.page)},tabIndex:"0"},e.itemRender(e.page,"page",i.a.createElement("a",{rel:"nofollow"},e.page)))},h=13,y=38,v=40,b=function(e){Object(s.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={goInputText:""},e.buildOptionText=function(t){return"".concat(t," ").concat(e.props.locale.items_per_page)},e.changeSize=function(t){e.props.changeSize(Number(t))},e.handleChange=function(t){e.setState({goInputText:t.target.value})},e.handleBlur=function(t){var n=e.props,r=n.goButton,o=n.quickGo,a=n.rootPrefixCls,i=e.state.goInputText;r||""===i||(e.setState({goInputText:""}),t.relatedTarget&&(t.relatedTarget.className.indexOf("".concat(a,"-item-link"))>=0||t.relatedTarget.className.indexOf("".concat(a,"-item"))>=0)||o(e.getValidValue()))},e.go=function(t){""!==e.state.goInputText&&(t.keyCode!==h&&"click"!==t.type||(e.setState({goInputText:""}),e.props.quickGo(e.getValidValue())))},e}return Object(l.a)(n,[{key:"getValidValue",value:function(){var e=this.state.goInputText;return!e||isNaN(e)?void 0:Number(e)}},{key:"getPageSizeOptions",value:function(){var e=this.props,t=e.pageSize,n=e.pageSizeOptions;return n.some((function(e){return e.toString()===t.toString()}))?n:n.concat([t.toString()]).sort((function(e,t){return(isNaN(Number(e))?0:Number(e))-(isNaN(Number(t))?0:Number(t))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.pageSize,r=t.locale,o=t.rootPrefixCls,a=t.changeSize,c=t.quickGo,u=t.goButton,l=t.selectComponentClass,s=t.buildOptionText,f=t.selectPrefixCls,d=t.disabled,p=this.state.goInputText,m="".concat(o,"-options"),h=l,y=null,v=null,b=null;if(!a&&!c)return null;var g=this.getPageSizeOptions();if(a&&h){var _=g.map((function(t,n){return i.a.createElement(h.Option,{key:n,value:t.toString()},(s||e.buildOptionText)(t))}));y=i.a.createElement(h,{disabled:d,prefixCls:f,showSearch:!1,className:"".concat(m,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(n||g[0]).toString(),onChange:this.changeSize,getPopupContainer:function(e){return e.parentNode},"aria-label":r.page_size,defaultOpen:!1},_)}return c&&(u&&(b="boolean"==typeof u?i.a.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:d,className:"".concat(m,"-quick-jumper-button")},r.jump_to_confirm):i.a.createElement("span",{onClick:this.go,onKeyUp:this.go},u)),v=i.a.createElement("div",{className:"".concat(m,"-quick-jumper")},r.jump_to,i.a.createElement("input",{disabled:d,type:"text",value:p,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":r.page}),r.page,b)),i.a.createElement("li",{className:"".concat(m)},y,v)}}]),n}(i.a.Component);b.defaultProps={pageSizeOptions:["10","20","50","100"]};var g=b,_=n(1335);function w(){}function E(e){var t=Number(e);return"number"==typeof t&&!isNaN(t)&&isFinite(t)&&Math.floor(t)===t}function O(e,t,n){var r=void 0===e?t.pageSize:e;return Math.floor((n.total-1)/r)+1}var x=function(e){Object(s.a)(n,e);var t=Object(f.a)(n);function n(e){var r;Object(u.a)(this,n),(r=t.call(this,e)).getJumpPrevPage=function(){return Math.max(1,r.state.current-(r.props.showLessItems?3:5))},r.getJumpNextPage=function(){return Math.min(O(void 0,r.state,r.props),r.state.current+(r.props.showLessItems?3:5))},r.getItemIcon=function(e,t){var n=r.props.prefixCls,o=e||i.a.createElement("button",{type:"button","aria-label":t,className:"".concat(n,"-item-link")});return"function"==typeof e&&(o=i.a.createElement(e,Object(c.a)({},r.props))),o},r.savePaginationNode=function(e){r.paginationNode=e},r.isValid=function(e){var t=r.props.total;return E(e)&&e!==r.state.current&&E(t)&&t>0},r.shouldDisplayQuickJumper=function(){var e=r.props,t=e.showQuickJumper;return!(e.total<=r.state.pageSize)&&t},r.handleKeyDown=function(e){e.keyCode!==y&&e.keyCode!==v||e.preventDefault()},r.handleKeyUp=function(e){var t=r.getValidValue(e);t!==r.state.currentInputValue&&r.setState({currentInputValue:t}),e.keyCode===h?r.handleChange(t):e.keyCode===y?r.handleChange(t-1):e.keyCode===v&&r.handleChange(t+1)},r.handleBlur=function(e){var t=r.getValidValue(e);r.handleChange(t)},r.changePageSize=function(e){var t=r.state.current,n=O(e,r.state,r.props);t=t>n?n:t,0===n&&(t=r.state.current),"number"==typeof e&&("pageSize"in r.props||r.setState({pageSize:e}),"current"in r.props||r.setState({current:t,currentInputValue:t})),r.props.onShowSizeChange(t,e),"onChange"in r.props&&r.props.onChange&&r.props.onChange(t,e)},r.handleChange=function(e){var t=r.props,n=t.disabled,o=t.onChange,a=r.state,i=a.pageSize,c=a.current,u=a.currentInputValue;if(r.isValid(e)&&!n){var l=O(void 0,r.state,r.props),s=e;return e>l?s=l:e<1&&(s=1),"current"in r.props||r.setState({current:s}),s!==u&&r.setState({currentInputValue:s}),o(s,i),s}return c},r.prev=function(){r.hasPrev()&&r.handleChange(r.state.current-1)},r.next=function(){r.hasNext()&&r.handleChange(r.state.current+1)},r.jumpPrev=function(){r.handleChange(r.getJumpPrevPage())},r.jumpNext=function(){r.handleChange(r.getJumpNextPage())},r.hasPrev=function(){return r.state.current>1},r.hasNext=function(){return r.state.current<O(void 0,r.state,r.props)},r.runIfEnter=function(e,t){if("Enter"===e.key||13===e.charCode){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t.apply(void 0,r)}},r.runIfEnterPrev=function(e){r.runIfEnter(e,r.prev)},r.runIfEnterNext=function(e){r.runIfEnter(e,r.next)},r.runIfEnterJumpPrev=function(e){r.runIfEnter(e,r.jumpPrev)},r.runIfEnterJumpNext=function(e){r.runIfEnter(e,r.jumpNext)},r.handleGoTO=function(e){e.keyCode!==h&&"click"!==e.type||r.handleChange(r.state.currentInputValue)};var o=e.onChange!==w;"current"in e&&!o&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var a=e.defaultCurrent;"current"in e&&(a=e.current);var l=e.defaultPageSize;return"pageSize"in e&&(l=e.pageSize),a=Math.min(a,O(l,void 0,e)),r.state={current:a,currentInputValue:a,pageSize:l},r}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props.prefixCls;if(t.current!==this.state.current&&this.paginationNode){var r=this.paginationNode.querySelector(".".concat(n,"-item-").concat(t.current));r&&document.activeElement===r&&r.blur()}}},{key:"getValidValue",value:function(e){var t=e.target.value,n=O(void 0,this.state,this.props),r=this.state.currentInputValue;return""===t?t:isNaN(Number(t))?r:t>=n?n:Number(t)}},{key:"getShowSizeChanger",value:function(){var e=this.props,t=e.showSizeChanger,n=e.total,r=e.totalBoundaryShowSizeChanger;return void 0!==t?t:n>r}},{key:"renderPrev",value:function(e){var t=this.props,n=t.prevIcon,r=(0,t.itemRender)(e,"prev",this.getItemIcon(n,"prev page")),o=!this.hasPrev();return Object(a.isValidElement)(r)?Object(a.cloneElement)(r,{disabled:o}):r}},{key:"renderNext",value:function(e){var t=this.props,n=t.nextIcon,r=(0,t.itemRender)(e,"next",this.getItemIcon(n,"next page")),o=!this.hasNext();return Object(a.isValidElement)(r)?Object(a.cloneElement)(r,{disabled:o}):r}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,c=t.className,u=t.style,l=t.disabled,s=t.hideOnSinglePage,f=t.total,d=t.locale,h=t.showQuickJumper,y=t.showLessItems,v=t.showTitle,b=t.showTotal,_=t.simple,w=t.itemRender,E=t.showPrevNextJumpers,x=t.jumpPrevIcon,j=t.jumpNextIcon,k=t.selectComponentClass,S=t.selectPrefixCls,C=t.pageSizeOptions,N=this.state,P=N.current,T=N.pageSize,A=N.currentInputValue;if(!0===s&&f<=T)return null;var L=O(void 0,this.state,this.props),I=[],R=null,D=null,M=null,F=null,B=null,U=h&&h.goButton,z=y?1:2,G=P-1>0?P-1:0,V=P+1<L?P+1:L,Y=Object.keys(this.props).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(t[n]=e.props[n]),t}),{});if(_)return U&&(B="boolean"==typeof U?i.a.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},d.jump_to_confirm):i.a.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},U),B=i.a.createElement("li",{title:v?"".concat(d.jump_to).concat(P,"/").concat(L):null,className:"".concat(n,"-simple-pager")},B)),i.a.createElement("ul",Object(o.default)({className:p()(n,"".concat(n,"-simple"),Object(r.a)({},"".concat(n,"-disabled"),l),c),style:u,ref:this.savePaginationNode},Y),i.a.createElement("li",{title:v?d.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:p()("".concat(n,"-prev"),Object(r.a)({},"".concat(n,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},this.renderPrev(G)),i.a.createElement("li",{title:v?"".concat(P,"/").concat(L):null,className:"".concat(n,"-simple-pager")},i.a.createElement("input",{type:"text",value:A,disabled:l,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:"3"}),i.a.createElement("span",{className:"".concat(n,"-slash")},"/"),L),i.a.createElement("li",{title:v?d.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:p()("".concat(n,"-next"),Object(r.a)({},"".concat(n,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(V)),B);if(L<=3+2*z){var q={locale:d,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:v,itemRender:w};L||I.push(i.a.createElement(m,Object(o.default)({},q,{key:"noPager",page:1,className:"".concat(n,"-item-disabled")})));for(var H=1;H<=L;H+=1){var W=P===H;I.push(i.a.createElement(m,Object(o.default)({},q,{key:H,page:H,active:W})))}}else{var K=y?d.prev_3:d.prev_5,$=y?d.next_3:d.next_5;E&&(R=i.a.createElement("li",{title:v?K:null,key:"prev",onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:p()("".concat(n,"-jump-prev"),Object(r.a)({},"".concat(n,"-jump-prev-custom-icon"),!!x))},w(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(x,"prev page"))),D=i.a.createElement("li",{title:v?$:null,key:"next",tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:p()("".concat(n,"-jump-next"),Object(r.a)({},"".concat(n,"-jump-next-custom-icon"),!!j))},w(this.getJumpNextPage(),"jump-next",this.getItemIcon(j,"next page")))),F=i.a.createElement(m,{locale:d,last:!0,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:L,page:L,active:!1,showTitle:v,itemRender:w}),M=i.a.createElement(m,{locale:d,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:v,itemRender:w});var Q=Math.max(1,P-z),X=Math.min(P+z,L);P-1<=z&&(X=1+2*z),L-P<=z&&(Q=L-2*z);for(var J=Q;J<=X;J+=1){var Z=P===J;I.push(i.a.createElement(m,{locale:d,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:J,page:J,active:Z,showTitle:v,itemRender:w}))}P-1>=2*z&&3!==P&&(I[0]=Object(a.cloneElement)(I[0],{className:"".concat(n,"-item-after-jump-prev")}),I.unshift(R)),L-P>=2*z&&P!==L-2&&(I[I.length-1]=Object(a.cloneElement)(I[I.length-1],{className:"".concat(n,"-item-before-jump-next")}),I.push(D)),1!==Q&&I.unshift(M),X!==L&&I.push(F)}var ee=null;b&&(ee=i.a.createElement("li",{className:"".concat(n,"-total-text")},b(f,[0===f?0:(P-1)*T+1,P*T>f?f:P*T])));var te=!this.hasPrev()||!L,ne=!this.hasNext()||!L;return i.a.createElement("ul",Object(o.default)({className:p()(n,c,Object(r.a)({},"".concat(n,"-disabled"),l)),style:u,unselectable:"unselectable",ref:this.savePaginationNode},Y),ee,i.a.createElement("li",{title:v?d.prev_page:null,onClick:this.prev,tabIndex:te?null:0,onKeyPress:this.runIfEnterPrev,className:p()("".concat(n,"-prev"),Object(r.a)({},"".concat(n,"-disabled"),te)),"aria-disabled":te},this.renderPrev(G)),I,i.a.createElement("li",{title:v?d.next_page:null,onClick:this.next,tabIndex:ne?null:0,onKeyPress:this.runIfEnterNext,className:p()("".concat(n,"-next"),Object(r.a)({},"".concat(n,"-disabled"),ne)),"aria-disabled":ne},this.renderNext(V)),i.a.createElement(g,{disabled:l,locale:d,rootPrefixCls:n,selectComponentClass:k,selectPrefixCls:S,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:P,pageSize:T,pageSizeOptions:C,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:U}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};if("current"in e&&(n.current=e.current,e.current!==t.current&&(n.currentInputValue=n.current)),"pageSize"in e&&e.pageSize!==t.pageSize){var r=t.current,o=O(e.pageSize,t,e);r=r>o?o:r,"current"in e||(n.current=r,n.currentInputValue=r),n.pageSize=e.pageSize}return n}}]),n}(i.a.Component);x.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:w,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:w,locale:_.a,style:{},itemRender:function(e,t,n){return n},totalBoundaryShowSizeChanger:50};var j=x,k=n(1317),S=n(389),C=n(254),N=n(1452),P=n(1453),T=n(177),A=function(e){return a.createElement(T.a,Object(o.default)({size:"small"},e))};A.Option=T.a.Option;var L=A,I=n(158),R=n(257),D=n(615),M=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},F=function(e){var t=e.prefixCls,n=e.selectPrefixCls,i=e.className,c=e.size,u=e.locale,l=M(e,["prefixCls","selectPrefixCls","className","size","locale"]),s=Object(D.a)().xs,f=a.useContext(R.b),d=f.getPrefixCls,m=f.direction,h=d("pagination",t),y=function(e){var t=Object(o.default)(Object(o.default)({},e),u),f="small"===c||!(!s||c||!l.responsive),y=d("select",n),v=p()(Object(r.a)({mini:f},"".concat(h,"-rtl"),"rtl"===m),i);return a.createElement(j,Object(o.default)({},l,{prefixCls:h,selectPrefixCls:y},function(){var e=a.createElement("span",{className:"".concat(h,"-item-ellipsis")},"•••"),t=a.createElement("button",{className:"".concat(h,"-item-link"),type:"button",tabIndex:-1},a.createElement(S.a,null)),n=a.createElement("button",{className:"".concat(h,"-item-link"),type:"button",tabIndex:-1},a.createElement(C.a,null)),r=a.createElement("a",{className:"".concat(h,"-item-link")},a.createElement("div",{className:"".concat(h,"-item-container")},a.createElement(N.a,{className:"".concat(h,"-item-link-icon")}),e)),o=a.createElement("a",{className:"".concat(h,"-item-link")},a.createElement("div",{className:"".concat(h,"-item-container")},a.createElement(P.a,{className:"".concat(h,"-item-link-icon")}),e));if("rtl"===m){var i=[n,t];t=i[0],n=i[1];var c=[o,r];r=c[0],o=c[1]}return{prevIcon:t,nextIcon:n,jumpPrevIcon:r,jumpNextIcon:o}}(),{className:v,selectComponentClass:f?L:T.a,locale:t}))};return a.createElement(I.a,{componentName:"Pagination",defaultLocale:k.a},y)};t.a=F},,,function(e,t,n){var r=n(1178);e.exports=function(e){return e&&e.length?r(e):[]}},function(e,t,n){var r=n(2740)();e.exports=r},,function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},,function(e,t,n){"use strict";n(245);var r=n(64),o=(n(173),n(94)),a=(n(133),n(31)),i=(n(175),n(84)),c=n(0),u=n.n(c),l=n(39),s=n.n(l),f=n(88),d=n(68),p=n(2),m=n.n(p),h=n(370),y=n(260),v=n(2138),b=(n(120),n(63)),g=(n(50),n(19)),_={wrapper:"index-module_wrapper_alTol",card:"index-module_card_Dm9fp",header:"index-module_header_YOq+P",actions:"index-module_actions_Llvrj",btn:"index-module_btn_oP2jX",orgWrapper:"index-module_orgWrapper_z8yM0",orgLogo:"index-module_orgLogo_yaGXD",orgInfo:"index-module_orgInfo_nwgJw",orgName:"index-module_orgName_kmkjs"},w=function(e){var t=e.zone,n=e.onClick,r=e.onCancel,o=t.name;return u.a.createElement("div",{className:_.wrapper},u.a.createElement(b.a,{className:_.card},u.a.createElement("h2",{className:_.header},__("确定访问 {name} 吗？",{name:o})),u.a.createElement("div",{className:_.body},u.a.createElement("p",null,__("当前正在访问 {name}",{name:o})),u.a.createElement("p",null,__("切换到 {name} 后，所有产生的内容都归属于 {name}",{name:o})),u.a.createElement("div",{className:_.orgWrapper},u.a.createElement(y.a.Logo,{src:t.logo,size:40,className:_.orgLogo}),u.a.createElement("div",{className:_.orgInfo},u.a.createElement(y.a.Name,{organization:t,className:_.orgName}),u.a.createElement("p",null,t.name)))),u.a.createElement("div",{className:_.actions},u.a.createElement(g.a,{onClick:n,type:"primary",className:_.btn},__("确定")),u.a.createElement(g.a,{onClick:r,className:_.btn},__("取消")))))};w.propTypes={onCancel:m.a.func.isRequired,onClick:m.a.func.isRequired};var E=w,O=n(38),x=n(633),j=n(127),k=n(1309),S={wrapper:"YuqueLogo-module_wrapper_WV+7F",logo:"YuqueLogo-module_logo_jPo5B",organization:"YuqueLogo-module_organization_DMxcl",name:"YuqueLogo-module_name_F0-1R",yuqueName:"YuqueLogo-module_yuqueName_OsbYq",trigger:"YuqueLogo-module_trigger_7+gtT",triggerArrow:"YuqueLogo-module_triggerArrow_ZkvaE",orgList:"YuqueLogo-module_orgList_hTsCu",orgListItem:"YuqueLogo-module_orgListItem_Fj8Vz",orgInfo:"YuqueLogo-module_orgInfo_zoL8J",orgName:"YuqueLogo-module_orgName_gRkvb",overlayFooter:"YuqueLogo-module_overlayFooter_HSMK7",switchModal:"YuqueLogo-module_switchModal_ZKWIN",guideContainer:"YuqueLogo-module_guideContainer_fS4mS",logoTrigger:"YuqueLogo-module_logoTrigger_NKl5J",triggerNav:"YuqueLogo-module_triggerNav_mVuqf",navIcon:"YuqueLogo-module_navIcon_Uztoa",orgLogo:"YuqueLogo-module_orgLogo_6RNTu"};function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=["/","/about","/yuque/story","/yuque/help","/about/products","/about/security","/about/templates","/about/groups","/about/organization","/explore","/about/price","/template","/install/desktop","/download","/about/help","/about/careers"],T=function(){return P.includes(window.location.pathname)};function A(e){var t=e.theme,n=e.organization,l=e.logoSize,f=void 0===l?32:l,d=e.switchMore,p=void 0===d||d,m=e.hideName,b=void 0!==m&&m,g=e.isDigitalGarden,_=void 0!==g&&g,w=window.appData,N=w.organizations,P=w.defaultSpaceHost,L=w.me,I=w.zone,R=w.isYuque,D=(w.settings||{}).is_via_custom_domain,M=n&&n.id,F=C(Object(c.useState)(!1),2),B=F[0],U=F[1],z=C(Object(c.useState)(!1),2),G=z[0],V=z[1],Y=C(Object(c.useState)(window.appData.zoneIsolatingNotice),2),q=Y[0],H=Y[1],W=C(Object(c.useState)(null),2),K=W[0],$=W[1],Q=function(e){window.appData.organization?e&&e.id===n.id||(V(!0),$(e),document.querySelector("body").style.overflowY="hidden",U(!0),setTimeout((function(){U(!1)}),300)):window.location.href=e?e.host:P},X=u.a.useRef(),J=C(Object(c.useState)(0),2),Z=J[0],ee=J[1];if(q)return s.a.createPortal(u.a.createElement("div",{className:S.switchModal},u.a.createElement(E,{zone:I,onCancel:function(){window.location.href="/dashboard"},onClick:function(){return H(!1)}})),document.querySelector("body"));function te(){return u.a.createElement("a",{href:"/dashboard",className:S.wrapper},"organization"===t&&M?u.a.createElement(u.a.Fragment,null,n.logo?u.a.createElement(y.a.Logo,{src:n.logo,size:f,className:"".concat(S.logo," ").concat(S.orgLogo)}):u.a.createElement(O.b,{name:"icon-organization",width:f,height:f,className:"".concat(S.logo," ").concat(S.orgLogo)}),u.a.createElement(y.a.Name,{organization:n,className:S.name})):u.a.createElement(x.a.Yuque,{height:f,className:S.logo,mixed:!0}))}function ne(){var e;return window.h5||T()||"dashboard"===(null===(e=window.appData.matchCondition)||void 0===e?void 0:e.page)&&!window.appData.hideSidebar?te():u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,{type:"menu",content:u.a.createElement(k.a,null),placement:"bottomLeft",overlayClassName:S.headNewPopover,getPopupContainer:function(e){return e.parentNode},mouseLeaveDelay:.3},u.a.createElement("div",{className:S.logoTrigger},u.a.createElement("div",{"data-aspm-click":"",className:S.triggerNav,onClick:function(){window.location.href="/dashboard"}},u.a.createElement(O.b,{name:"nav-menu",className:S.navIcon,width:12})),u.a.createElement("div",{className:S.wrapper},"organization"===t&&M?u.a.createElement(u.a.Fragment,null,n.logo?u.a.createElement(y.a.Logo,{src:n.logo,size:f,className:"".concat(S.logo," ").concat(S.orgLogo)}):u.a.createElement(O.b,{name:"icon-organization",width:f,height:f,className:"".concat(S.logo," ").concat(S.orgLogo)})):u.a.createElement(x.a.MiniYuque,{className:S.logo})))),!b&&u.a.createElement("a",{href:"/dashboard"},"organization"===t&&M?u.a.createElement(y.a.Name,{organization:n,className:S.name}):u.a.createElement(x.a.Text,null)))}if(!R)return ne();if(!L||!L.id||!p)return te();var re=L.publicName||L.name,oe=L.publicAvatar||L.avatar_url;return _?u.a.createElement(u.a.Fragment,null,null!=n&&n.id?u.a.createElement(u.a.Fragment,null,ne()):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"head"},u.a.createElement("div",{className:"yuque-header-container"},u.a.createElement("div",{className:"logo","data-testid":"yuque-logo"},u.a.createElement(A,{hideName:!0})))))):u.a.createElement(u.a.Fragment,null,ne(),!window.h5&&!T()&&!D&&p&&!b&&u.a.createElement(r.a,{trigger:"click",align:{offset:[-Z,6]},onVisibleChange:function(e){e&&X&&X.current&&ee(X.current.offsetWidth)},getPopupContainer:function(e){return e.parentNode},overlay:u.a.createElement(a.a,{className:S.orgList},u.a.createElement(a.a.ItemGroup,{key:"personal",title:__("个人")},u.a.createElement(a.a.Item,{key:"0",className:S.orgListItem,onClick:function(){Q()}},u.a.createElement("span",{className:S.orgInfo},u.a.createElement(j.a,{className:S.orgLogo,src:oe,size:28,name:re}),u.a.createElement("span",{className:S.orgName},re)),!M&&u.a.createElement(h.a,null))),N&&u.a.createElement(a.a.ItemGroup,{key:"organization",title:__("空间")},N&&N.map((function(e){return u.a.createElement(a.a.Item,{key:e.id,className:S.orgListItem,onClick:function(){Q(e)}},u.a.createElement("span",{className:S.orgInfo},e.logo?u.a.createElement(y.a.Logo,{src:e.logo,size:28,className:S.orgLogo}):u.a.createElement(O.b,{name:"icon-organization",size:28,className:S.orgLogo}),u.a.createElement(y.a.Name,{organization:e,className:S.orgName})),n&&n.id===e.id&&u.a.createElement(h.a,null))}))),u.a.createElement(a.a.Divider,null),u.a.createElement(a.a.Item,{key:"footer",className:S.overlayFooter,"data-aspm-click":"d223064"},u.a.createElement(y.a.NewOrg,{organizations:N,defaultSpaceHost:P,isInLogo:!0})),G&&s.a.createPortal(u.a.createElement("div",{className:S.switchModal},B?u.a.createElement(o.a,null):u.a.createElement(v.a,{organization:K,originalOrg:n,currentUser:L,defaultSpaceHost:P,onCancel:function(){$(null),V(!1),document.querySelector("body").style.overflowY="auto"}})),document.querySelector("body")))},u.a.createElement("a",{className:S.trigger,"data-aspm-click":"d73395","data-aspm-param":"organization=".concat(n?n.id:0)},u.a.createElement("span",{className:S.guideContainer},u.a.createElement(O.b,{name:"down",className:S.triggerArrow,width:16})))))}A.propTypes={theme:m.a.string,organization:m.a.object,logoSize:m.a.number,switchMore:m.a.bool,hideName:m.a.bool};t.a=Object(d.withRouter)(Object(f.d)((function(e){return e}))(A))},function(e,t,n){"use strict";n(96);var r=n(23),o=(n(245),n(64)),a=(n(75),n(26)),i=(n(133),n(31)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f=n(88),d=n(68),p=n(10),m=n.n(p),h=n(38),y=n(506),v=n(34),b={container:"SearchHistory-module_container_UqGVY",pc:"SearchHistory-module_pc_kMCjg",list:"SearchHistory-module_list_cBLfp",item:"SearchHistory-module_item_c9dRe",header:"SearchHistory-module_header_6WZfo",delete:"SearchHistory-module_delete_0KMuU"};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function _(){_=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==g(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function w(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t=e.onItemClick,n=E(Object(c.useState)(!0),2),r=n[0],o=n[1],a=E(Object(c.useState)([]),2),i=a[0],u=a[1],l=function(){return o(!0),v.a.searchHistory.find().then((function(e){u(e)})).finally((function(){return o(!1)}))};Object(c.useEffect)((function(){l()}),[]);var s=function(){var e,t=(e=_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.searchHistory.destroy();case 2:u([]);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return{state:{list:i,loading:r},handler:{getData:l,cleanAll:s,onItemClick:t}}},j=function(e){var t=x(e),n=t.state,r=t.handler,o=e.isMobile,a=n.list,i=r.onItemClick,c=r.cleanAll;return a.length?u.a.createElement("div",{className:m()(b.container,"search-history",b[o?"h5":"pc"])},u.a.createElement("div",{className:b.header},u.a.createElement("div",null,__("搜索历史")),u.a.createElement("div",{className:b.delete,onClick:c},u.a.createElement(h.b,{name:"history-delete",width:14,height:14}),u.a.createElement("span",null,__("清空")))),u.a.createElement("div",{className:b.list},a.map((function(e){return u.a.createElement("div",{className:b.item,key:e.id,onClick:function(){return i(e.query)}},e.query)})))):null};j.defaultProps={isMobile:window.h5},j.propTypes={isMobile:s.a.bool};var k,S=j,C="index-module_wrapper_GykLb",N="index-module_mini_nGtGY",P="index-module_focus_YxfoL",T="index-module_option_YHab7",A="index-module_mobile_amSdC",L="index-module_optionText_g4SdL",I="index-module_optionScope_DqGEU",R="index-module_input_obspM",D="index-module_themeGrey_YGWIs",M="index-module_dropdown_3glOU",F="index-module_inputBoxWrapper_lVNI3",B="index-module_inputBoxIcon_jnSL0",U="index-module_searchIcon_4BV7+",z="index-module_inputBox_Ojtb6",G="index-module_inputBoxWrapperActive_aLYUO";function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $(this,n)}}function $(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){var t=e.share,n=e.search,r=void 0===n?{}:n,o=t&&t.token,a={q:"",type:"content",scope:r.scope,tab:y.a.clacTabByScope(r.scope,o)};return o&&(a.token=o),y.a.isSearchPage()&&(a=y.a.getQueryByString(window.location.search,e)),a}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(s,e);var t,n,c,l=K(s);function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),J(Q(n=l.call(this,e,t)),"handleChange",(function(e){var t=e.target.value;n.setState((function(e){return{inputValue:t,tab:(e.options[0]||{}).key}}))})),J(Q(n),"handleVisibleChange",(function(e){n.setState({dropdownVisible:e})})),J(Q(n),"handleSearch",(function(){var e=n.props,t=e.history,r=e.location,o=e.onSearch,a=e.embed,i=n.state,c=i.inputValue,u=i.tab;n.props.isMiniType&&(n.toggleInput(!1),n.setState({inputValue:""}));var l=q(q({},k),{},{p:1,q:c,tab:u});u===y.a.SEARCH_TABS.book&&l.token?l.scope="share":delete l.token;var s={forceOpen:u===y.a.SEARCH_TABS.group&&a};if(o)return o(l,s);if(y.a.isSearchPage()&&!window.h5){var f=y.a.getQueryByString(r.search);l.type=f.type,s.history=t}y.a.gotoSearchPage(l,s)})),J(Q(n),"handleClear",(function(){n.setState({inputValue:""}),y.a.isSearchPage()&&n.props.history.push("/search")})),J(Q(n),"onClickOutside",(function(e){!e.target.closest(".scoped-search")&&!e.target.closest(".search-history")&&(n.setState({inputValue:""}),n.toggleInput(!1))})),J(Q(n),"handleKeyDown",(function(e){var t=e.keyCode||e.which;if([38,40].includes(t)){e.preventDefault();var r=n.state.options,o=r.findIndex((function(e){return e.key===n.state.tab}));o+=38===t?-1:1,o=Math.max(0,o),o=Math.min(r.length-1,o),n.setState({tab:r[o].key})}})),J(Q(n),"toggleInput",(function(e){n.setState({active:e}),e&&n.inputRef&&n.inputRef.input&&n.inputRef.input.input&&n.inputRef.input.input.focus&&n.inputRef.input.input.focus()}));var r=q(q({},window.appData),e);return k=Z(r),n.state={active:!1,options:y.a.getShowTabs(k.tab,r),inputValue:k.q,tab:k.tab,dropdownVisible:!1},n}return t=s,(n=[{key:"componentDidMount",value:function(){this.props.isMiniType&&document.addEventListener("click",this.onClickOutside)}},{key:"componentDidUpdate",value:function(e){if(e.search.scope!==this.props.search.scope){var t=q(q({},window.appData),this.props);k=Z(t),this.setState({options:y.a.getShowTabs(k.tab,q(q({},window.appData),this.props))})}}},{key:"componentWillUnmount",value:function(){this.props.isMiniType&&document.removeEventListener("click",this.onClickOutside)}},{key:"renderMenu",value:function(){var e=this,t=this.state,n=t.inputValue,r=t.tab,o=t.options,a=this.props.isMobile;return n?u.a.createElement(i.a,{selectedKeys:[r]},o.map((function(t){return u.a.createElement(i.a.Item,{"data-testid":"scope",key:t.key,onClick:e.handleSearch,onMouseOver:function(){e.setState({tab:t.key})},className:m()(T,J({},A,a))},u.a.createElement("span",{className:L},n),u.a.createElement("span",{className:I},__("搜索#search"),t.label))}))):u.a.createElement(S,{onItemClick:function(t){e.setState({inputValue:t},(function(){e.inputRef.input&&e.inputRef.input.input&&e.inputRef.input.input.focus&&e.inputRef.input.input.focus()}))}})}},{key:"render",value:function(){var e,t=this,n=this.props.forceDisplay;if(!y.a.isSearchEnabled(q(q({},window.appData),this.props))&&!n)return null;var i=this.props,c=i.theme,l=i.isMiniType,s=i.isMobile,f=i.placement,d=void 0===f?"bottomLeft":f,p=this.state,v=p.inputValue,b=p.active,g=p.dropdownVisible;this.props.onHistroyChange&&this.props.onHistroyChange(g&&!v);var _=g?m()(C,P):C;l&&(_=m()(C,N));var w=u.a.createElement("div",{className:s?null:_,onKeyDown:this.handleKeyDown},u.a.createElement(o.a,{overlayClassName:M,trigger:["focus"],placement:d,overlay:this.renderMenu(),visible:g,onVisibleChange:this.handleVisibleChange,getPopupContainer:function(e){return e.parentNode}},u.a.createElement(a.a.Search,{placeholder:__("搜索"),ref:function(e){t.inputRef=e},"data-testid":"search-input",className:m()(R,(e={},J(e,D,"grey"===c),J(e,A,s),e)),value:v,maxLength:250,onChange:this.handleChange,onSearch:function(){t.inputRef.input&&t.inputRef.input.input&&t.inputRef.input.input.blur&&t.inputRef.input.input.blur(),setTimeout((function(){t.handleSearch()}),200)},onClear:this.handleClear,autoComplete:"nope",allowClear:!0})));return l?u.a.createElement("div",{className:m()(F,"scoped-search",[b?G:""])},u.a.createElement(r.a,{title:__("搜索"),placement:"bottom"},u.a.createElement("span",{onClick:function(){return t.toggleInput(!0)},className:B},u.a.createElement(h.b,{name:"webapp-search",width:20,className:U}))),u.a.createElement("div",{className:z},w)):w}}])&&H(t.prototype,n),c&&H(t,c),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.PureComponent);ee.defaultProps={isMobile:window.h5,forceDisplay:!1},ee.propTypes={onHistroyChange:s.a.func,theme:s.a.string,embed:s.a.bool,isMiniType:s.a.bool,onSearch:s.a.func,isMobile:s.a.bool,forceDisplay:s.a.bool};t.a=Object(f.d)((function(e){return{search:e.search}}))(Object(d.withRouter)(ee))},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(210);t.a=function(e){var t=e.text,n=e.loginType,r=void 0===n?"sms":n,i=e.onClickSwitch,c=e.isBack,u=void 0!==c&&c;return i||(i=function(){window.location.href="/login?loginType=".concat(r)}),t||(t="sms"===r?__("免密码登录"):__("密码登录")),o.a.createElement("div",{className:"switch-login-warp"},o.a.createElement("div",{className:"switch-login"},o.a.createElement("span",{"data-testid":"switchBtn",className:"switch-btn","data-aspm-click":"d007",onClick:i},"sms"===r?o.a.createElement(o.a.Fragment,null,o.a.createElement(a.IconIconMobile,null),o.a.createElement("span",null,u&&__("返回"),t)):o.a.createElement(o.a.Fragment,null,o.a.createElement(a.IconIconKey,null),o.a.createElement("span",null,u&&__("返回"),t)))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),o="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),a="aria-",i="data-";function c(e,t){return 0===e.indexOf(t)}function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:Object(r.a)({},n);var u={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||c(n,a))||t.data&&c(n,i)||t.attr&&o.includes(n))&&(u[n]=e[n])})),u}},function(e,t){e.exports=function(e){return null==e}},function(e,t,n){"use strict";function r(e){return Array.isArray(e.children)}function o(e){return"number"==typeof e.id}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(28),o=n(0);function a(e){var t=o.useRef(!1),n=o.useState(e),a=Object(r.a)(n,2),i=a[0],c=a[1];return o.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[i,function(e,n){n&&t.current||c(e)}]}},,function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var r=n(40);function o(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}function a(e,t){var n=t.labelInValue,r=t.combobox,o=new Map;if(void 0===e||""===e&&r)return[[],o];var a=Array.isArray(e)?e:[e],i=a;return n&&(i=a.filter((function(e){return null!==e})).map((function(e){var t=e.key,n=e.value,r=void 0!==n?n:t;return o.set(r,e),r}))),[i,o]}function i(e,t){var n=t.optionLabelProp,r=t.labelInValue,o=t.prevValueMap,a=t.options,i=t.getLabeledValue,c=e;return r&&(c=c.map((function(e){return i(e,{options:a,prevValueMap:o,labelInValue:r,optionLabelProp:n})}))),c}function c(e,t){var n,o=Object(r.a)(t);for(n=e.length-1;n>=0&&e[n].disabled;n-=1);var a=null;return-1!==n&&(a=o[n],o.splice(n,1)),{values:o,removedValue:a}}var u="undefined"!=typeof window&&window.document&&window.document.documentElement,l=0;function s(){var e;return u?(e=l,l+=1):e="TEST_OR_SSR",e}},,,,,,,,,,,,,,,function(e,t,n){"use strict";n(162)},,,function(e,t,n){"use strict";var r=n(382);t.a=r.a},function(e,t,n){var r=n(1010),o=n(2173)((function(e,t,n){r(e,n,t)}));e.exports=o},,function(e,t,n){"use strict";n.d(t,"a",(function(){return rt}));n(60);var r=n(24),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(88),l=n(207),s=n(659),f=n(149),d=n(90),p=n.n(d),m=n(1913),h=n(235),y=(n(96),n(23)),v=(n(50),n(19)),b=n(376),g=n.n(b),_=n(2028),w=n(364),E=n(34);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function x(){x=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==O(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function j(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){var n=t.cacheTime;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cacheMap={},this.cacheTime=n}var t,n,r,o,a;return t=e,n=[{key:"set",value:function(e,t){return this._cacheMap[e]={time:Date.now(),data:t},this._cacheMap[e].data}},{key:"get",value:function(e){var t=this._cacheMap[e];return t&&t.time&&Date.now()-t.time<=1e3*this.cacheTime?t.data:(delete this._cacheMap[e],null)}},{key:"fetch",value:(o=x().mark((function e(t,n){var r,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.get(t))){e.next=3;break}return e.abrupt("return",r);case 3:return e.next=5,n();case 5:return o=e.sent,this.set(t,o),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){j(a,n,r,i,c,"next",e)}function c(e){j(a,n,r,i,c,"throw",e)}i(void 0)}))},function(e,t){return a.apply(this,arguments)})}],n&&k(t.prototype,n),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),C=(n(79),n(44)),N=(n(173),n(94)),P="index-module_premiumBtnArea_lPEBe",T="index-module_payModalContainer_G8EhW",A="index-module_pricingContainer_GvOVg",L="index-module_qrcodeContainer_-l5NK",I="index-module_qrcodeImage_R7ati",R="index-module_desc1_gPrJ2",D="index-module_qrcodeImageCon_vWnKk",M="index-module_alipayIconInQrCode_pJ4iU",F="index-module_qrcodeCon_ZQUhz",B="index-module_qrcodeTitleCon_Joh7-",U="index-module_qrcodeTitleDesc_4b7lQ",z="index-module_qrcodeTitleValue_E0BFZ";function G(e){var t=e.visible,n=e.onCancel,r=e.qrCodeUrl,o=e.price;return a.a.createElement(C.a,{className:T,title:__("扫码支付"),visible:t,maskClosable:!1,onCancel:n,footer:null,width:520,centered:!0,zIndex:9999},a.a.createElement("div",{className:A,"data-testid":"qr-cord-modal"},a.a.createElement("div",{className:L},a.a.createElement("div",{className:B},a.a.createElement("p",{className:U},__("扫一扫付款 (元)")),a.a.createElement("p",{className:z},o)),a.a.createElement("div",{className:D},r?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:M},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*GE2FQLYZ4kAAAAAAAAAAAABjARQnAQ"})),a.a.createElement("div",{className:F},a.a.createElement("img",{className:I,src:r}))):a.a.createElement(N.a,{size:"small"})),a.a.createElement("div",{className:R},__("打开手机支付宝，扫一扫付款")))))}G.propTypes={visible:c.a.bool.isRequired,onCancel:c.a.func.isRequired,qrCodeUrl:c.a.string.isRequired,price:c.a.string.isRequired};var V=G;function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function q(){q=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Y(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function H(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){H(a,r,o,i,c,"next",e)}function c(e){H(a,r,o,i,c,"throw",e)}i(void 0)}))}}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q={},X=new S({cacheTime:60});function J(e){var t=e.doc,n=e.disabled,r=Q.useViewModel({doc:t}),i=Object(o.useRef)(0);return Object(o.useEffect)((function(){return r.orderId&&(i.current=window.setInterval(W(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.queryOrder();case 2:e.sent.status===_.STATUS.success&&window.location.reload();case 4:case"end":return e.stop()}}),e)}))),3e3)),function(){i.current&&clearInterval(i.current)}}),[r.orderId]),r.buttonVisible?n?a.a.createElement("div",{className:P},a.a.createElement(y.a,{placement:"top",title:__("该文档不是互联网所有人可见，设置为互联网可见后会自动恢复付费阅读")},a.a.createElement(v.a,{type:"primary",disabled:!0,onClick:r.showModel,"data-testid":"premium-button"},r.price,a.a.createElement("span",null," ",__("元付费阅读全文"))))):a.a.createElement(a.a.Fragment,null,r.modelVisiable&&a.a.createElement(V,{visible:r.modelVisiable,onCancel:r.closeModel,qrCodeUrl:r.qrCodeUrl,price:r.price}),a.a.createElement("div",{className:P},a.a.createElement(v.a,{type:"primary",onClick:r.showModel,"data-testid":"premium-button"},r.price,a.a.createElement("span",null," ",__("元付费阅读全文"))))):a.a.createElement(a.a.Fragment,null)}Q.useViewModel=function(e){var t=e.doc,n=window.appData.isPublicCloud,r=t.premium_started_at,a=t.premium_expired,i=t.abilities&&t.abilities.update,c=t.is_paid,u=n&&r&&!a&&!i&&!c,l=K(Object(o.useState)(!1),2),s=l[0],f=l[1],d=K(Object(o.useState)(""),2),p=d[0],m=d[1],h=K(Object(o.useState)(""),2),y=h[0],v=h[1],b=Object(w.a)(E.a.premiumOrders.create),_=b.request,O=b.error,x=Object(w.a)(E.a.premiumOrders.findByDoc).request,j=function(){var e=W(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X.fetch("createOrderRequest:".concat(t.id),W(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_({doc_id:t.id}));case 1:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=W(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",x({doc_id:t.id}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{orderId:p,qrCodeUrl:y,buttonVisible:u,price:t.premium_price,modelVisiable:s,showModel:function(){j().then((function(e){e&&e.id&&f(!0),m(e&&e.id),e&&e.meta&&e.meta.qr_code&&g.a.toDataURL(e.meta.qr_code,(function(e,t){v(t)}))}))},closeModel:function(){f(!1)},queryOrder:k,error:O}},J.propTypes={doc:c.a.object.isRequired};var Z=J,ee=n(42),te=n.n(ee),ne="index-module_premiumBtnArea_5Afok",re="index-module_premiumBtn_8KpgJ",oe="index-module_wechat_O4DRO";function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(){ie=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ae(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function ce(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ce(a,r,o,i,c,"next",e)}function c(e){ce(a,r,o,i,c,"throw",e)}i(void 0)}))}}var le=/micromessenger/.test(navigator.userAgent.toLowerCase()),se={},fe=new S({cacheTime:60});function de(e){var t=e.doc,n=e.disabled,r=se.useViewModel({doc:t});return r.buttonVisible?n?a.a.createElement("div",{className:ne},a.a.createElement(y.a,{placement:"top",title:__("该文档不是互联网所有人可见，设置为互联网可见后会自动恢复付费阅读")},a.a.createElement(v.a,{type:"primary",disabled:!0,onClick:r.showModel,"data-testid":"premium-button"},r.price,a.a.createElement("span",null," ",__("元付费阅读全文"))))):a.a.createElement("div",{className:ne},le?a.a.createElement("div",{className:oe},__("阅读全文，请通过浏览器打开")):a.a.createElement(v.a,{className:re,type:"primary",onClick:r.pay,"data-testid":"premium-button"},a.a.createElement(a.a.Fragment,null,r.price,a.a.createElement("span",null," ",__("元付费阅读全文"))))):a.a.createElement(a.a.Fragment,null)}se.useViewModel=function(e){var t=e.doc,n=window.appData.isPublicCloud,r=t.premium_started_at,o=t.premium_expired,a=t.abilities&&t.abilities.update,i=t.is_paid,c=n&&r&&!o&&!a&&!i,u=Object(w.a)(E.a.premiumOrders.create),l=u.request,s=u.error,f=function(){var e=ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fe.fetch("createOrderRequest:".concat(t.id),ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l({doc_id:t.id}));case 1:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=te()((function(){f().then((function(e){e&&e.meta&&e.meta.alipay_schema&&(window.location=e.meta.alipay_schema)}))}),200);return{buttonVisible:c,price:t.premium_price,pay:d,error:s}},de.propTypes={doc:c.a.object.isRequired,disabled:c.a.bool};var pe=de,me=n(124),he=n(1266),ye=n(1268),ve=n(581),be=n(386),ge=n(977),_e=n(661),we=n(2055);function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ce(e);if(t){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}var Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(a,e);var t,n,r,o=ke(a);function a(){return Oe(this,a),o.apply(this,arguments)}return t=a,n=[{key:"previewImgs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;we.default.previewImages(e,t)}}],n&&xe(t.prototype,n),r&&xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(_e.ViewerEnvAdapter),Pe=n(36),Te=n(988),Ae=n(511);function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Be(e);if(t){var o=Be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(e,t){if(t&&("object"===Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}var Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(a,e);var t,n,r,o=Me(a);function a(){return Ie(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"openLink",value:function(e){h.a.pushWebWindow({url:e})}},{key:"openLocalLink",value:function(e){h.a.pushWebWindow({url:e})}},{key:"openYuqueDocLink",value:function(e){h.a.pushWebWindow({url:e})}},{key:"openLocalYuqueDocLink",value:function(e){h.a.pushWebWindow({url:e})}},{key:"openMentionLink",value:function(e,t){h.a.pushWebWindow({url:e})}},{key:"openBookmarkLink",value:function(e){h.a.pushWebWindow({url:e})}},{key:"openThirdpartyLink",value:function(e){h.a.pushWebWindow({url:e})}},{key:"previewImgs",value:function(e,t){var n=Ae.a.getMobileAppVersion();Object(Te.compareVersion)(n,"0.3.2")?h.a.previewImage({images:e.map((function(e){return{url:e.src,thumbnailUrl:e.msrc,width:e.w,height:e.h}})),index:t}):Object(Pe.getImageBrowser)().open(e,t)}},{key:"longPressCard",value:function(e){var t=e.type,n=e.src,r=Ae.a.getMobileAppVersion();Object(Te.compareVersion)(r,"0.3.3")&&window.NativeBridges.showActionSheet({actions:[__("保存到相册")],onAction:function(e){0===e&&window.NativeBridges.saveToGallery({type:t,fileUrl:n})}})}}])&&Re(t.prototype,n),r&&Re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(_e.ViewerEnvAdapter);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}var Ge=["dispatch"];function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ve.apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){We(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(){Ke=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ze(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function $e(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$e(a,r,o,i,c,"next",e)}function c(e){$e(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tt(e);if(t){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return et(this,n)}}function et(e,t){if(t&&("object"===ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}var nt=ve.Biz.generateBoardWebProxy,rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(d,e);var t,n,o,i,c,u=Ze(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=u.call(this,e)).containerRef=a.a.createRef(),t.viewerRef=a.a.createRef(),t}return t=d,n=[{key:"componentDidMount",value:function(){this.renderViewer()}},{key:"componentDidUpdate",value:function(e){e.content!==this.props.content&&this.renderViewer()}},{key:"renderViewer",value:(c=Qe(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createDocViewer();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("renderLakexViewerError",e.t0),l.a.logViewerError(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return c.apply(this,arguments)})},{key:"renderViewerHeader",value:function(){this.viewerRef.current&&this.viewerRef.current.renderHeader()}},{key:"createDocViewer",value:(i=Qe(Ke().mark((function e(){var t,n,r,o,a,i,c,u=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(null===(t=this.props.doc)||void 0===t?void 0:t.id)||+new Date,console.time("LakexTextViewer-".concat(o)),e.next=4,s.a.getLakexEditor();case 4:if(a=e.sent,i=a.createDocViewer,this.viewerRef.current&&this.viewerRef.current.destroy(),this.containerRef.current){e.next=9;break}return e.abrupt("return");case 9:this.viewerRef.current=i(this.containerRef.current,this.buildOptions()),(c=this.viewerRef.current).on("ready",(function(){console.timeEnd("LakexTextViewer-".concat(o)),u.props.onReady&&u.props.onReady(c,c.getViewerContext())})),c.on("firstRender",(function(){u.props.onFirstRender&&u.props.onFirstRender(c)})),c.on("loaded",(function(){u.props.onLoaded&&u.props.onLoaded(c,c.getViewerContext())})),c.on("viewportLayoutChange",(function(e){u.props.onViewportLayoutChange&&u.props.onViewportLayoutChange(e)})),c.setDocument({type:"html"===(null===(n=this.props.doc)||void 0===n?void 0:n.format)?"text/html":"lake",value:this.props.content},{dynamicData:this.props.dynamicData||(null===(r=this.props.doc)||void 0===r?void 0:r.doc_dynamic_data)}),c.on("beforeEnterMaxView",(function(e,t){var n=t.id;if(u.props.onCardMaximizeEnter&&u.props.onCardMaximizeEnter(),n&&window.history.pushState){window.history.pushState({},"","".concat(window.location.pathname,"?inner=").concat(n));var r=document.querySelector("#doc-content");r&&(r.style.zIndex=999,r.style.position="relative")}})),c.on("leaveMaxView",(function(){if(u.props.customMaximizeRestore)u.props.customMaximizeRestore();else if(window.history.pushState){window.history.pushState({},"",window.location.pathname);var e=document.querySelector("#doc-content");e&&(e.style.zIndex="",e.style.position="")}u.props.onCardMaximizeLeave&&u.props.onCardMaximizeLeave()})),c.on("login",(function(){var e,t;u.props.onLogin,null===(e=(t=u.props).onLogin)||void 0===e||e.call(t)})),c.on("userAction",(function(e){var t;E.a.logs.editorUserAction(He({editor:"lakexTextViewer",uuid:null===(t=c.iKernel)||void 0===t?void 0:t.id},e),{ignoreGlobalMessage:!0})})),this.props.autoMaximizeCard&&c.enterMaxViewById(this.props.autoMaximizeCard),this.props.forwardedRef&&(this.props.forwardedRef.current={viewer:c});case 22:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"buildOptions",value:function(){var e,t,n,o,a,i,c,u,l,s,d,y,v,b,g,_,w,O,x,j=this.props,k=(null===(e=window.appData)||void 0===e?void 0:e.me)||{},S=j.doc||window.appData.doc,C=(null===(t=j.doc)||void 0===t?void 0:t.doc_id)||(null===(n=j.doc)||void 0===n?void 0:n.id)||(null===(o=window.appData.doc)||void 0===o?void 0:o.id),N=j.docType||(null===(a=j.doc)||void 0===a?void 0:a.type)||(null===(i=window.appData.doc)||void 0===i?void 0:i.type),P=!(null===(c=window.appData)||void 0===c||null===(u=c.me)||void 0===u||!u.id),T=null===(l=window.appData)||void 0===l?void 0:l.settings,A=null===(s=window.appData)||void 0===s||null===(d=s.matchCondition)||void 0===d?void 0:d.useTileRendering,L={},I=null===(y=window.appData)||void 0===y||null===(v=y.doc)||void 0===v||null===(b=v.abilities)||void 0===b?void 0:b.update,R=(null===(g=j.theme)||void 0===g?void 0:g.viewport)||(j.simpleUI?p.a.VIEWPORT.adapt:p.a.VIEWPORT.fixed);L.isLogged=P,L.boundaryTopOffset=j.boundaryTopOffset||0,L.layout=R,L.mode=R,L.typography=(null===(_=j.theme)||void 0===_?void 0:_.typography)||p.a.TYPOGRAPHY.traditional,L.premium=null===(w=j.meta)||void 0===w?void 0:w.premium,L.viewResizeObserver=j.viewResizeObserver,L.premium&&(L.premium.disabled=j.book&&j.book.premium===f.PREMIUM_STATUS.disabled),L.docId=C,L.tileRendering=j.tileRendering&&A,L.envAdapter=new Ne,L.image={onBeforeRenderImage:he.a,lazyLoad:j.imageLazyLoad},L.vote={queryDetailUrl:"/api/votes?doc_id=".concat(C),queryCheckUrl:"/api/votes/mine?doc_id=".concat(C),voteUrl:"/api/votes?doc_id=".concat(C),allowVote:P},L.lockedtext={action:"/api/services/crypto"},L.video={queryAction:"/api/video",attachable_id:C,attachable_type:"Doc"},L.audio={queryURL:"/api/video",attachable_id:C,attachable_type:"Doc",allowAudioPlayer:me.a.isAllowAudio(j.doc,j.book,j.group)},L.toc={enable:!window.h5&&this.props.genOutline,getContainer:this.props.getTOCContainer},L.comments={enable:j.enableComments,enableCardComment:j.enableComments&&P,enableLineCommentCount:j.enableComments,enableParagraphComment:j.enableComments&&P},L.wording={enable:j.enableWording,enableShowWordingComments:j.enableWording,enableCreateWording:j.enableWording&&P},L.board={boardWebProxy:nt(E.a,null==k?void 0:k.id,be,window.appData),onClickSaveMaterial:function(e){if(e){var t=e.id;be.click("b4693.c107443.d223056",{material_id:t})}}},L.disabledPlugins=[],j.autoMaximizeCard&&(L.disableToolbar=!0),j.viewerMode&&(L.viewerMode=j.viewerMode);var D={};D.optimizeGlobalViewerCopy=j.optimizeGlobalViewerCopy,j.enableExportParser&&(L.viewerMode="simple",L.disableToolbar=!0,D.isExport=this.props.enableExportParser,D.exportType=this.props.exportParserType,D.docMaxWidth=this.props.exportDocMaxWidth,"word"===j.exportParserType&&(L.convertSvgImage=!0),L.image.ocr=!1,L.image.resizeThreshold=1073741824);var M,F,B=!1;"word"!==j.exportParserType&&T&&!0===T.disableDocumentCopy&&(B=!0,null!==(M=j.doc)&&void 0!==M&&null!==(F=M.abilities)&&void 0!==F&&F.update&&(B=!1),L.board.preventSaveMaterial=!0),B&&(D.preventCopy=!0,j.preventCopySelfContainer?D.preventCopyContainer=this.containerRef.current:D.preventCopyContainer=document.getElementById("content"),D.preventCopyMessage=function(){r.a.warn(__("管理员已开启禁止复制功能，如有疑问，请联系管理员"))}),L.clipboard=D,!1===j.genAnchor&&(L.heading={anchor:!1}),L.heading=He(He({},L.heading),{},{folding:!!j.headingFolding});var U=function(){return!new URL(window.location.href).searchParams.get("translate")};return L.selection={selectionMapping:function(){return U()}},L.clipboard.optimizeGlobalViewerCopy=function(){return U()},L.clipboard.optimizeViewerCopy=function(){return U()},j.simpleUI&&(L.uiSwitch={default:"simple"}),L.checkIn={user:{id:k.id,work_id:k.work_id,name:k.name,login:k.login,avatar_url:k.avatar_url,description:k.description},enable:!this.props.disableDynamicCardFunction,allowExport:P&&I},L.list={enableDynamic:P&&I&&j.enableDynamicTaskList,allFromStart:"present"===j.viewerMode},L.dynamicData={docId:C,docType:N,webProxy:{datasheetRecord:E.a.datasheetRecord}},j.scrollNode&&(L.scrollNode=j.scrollNode),null!==(O=window.appData)&&void 0!==O&&O.isYuqueMobileApp&&(L.envAdapter=new Ue,L.file||(L.file={}),L.file.downloadFileHandler=function(){var e=Qe(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.downloadFile({url:t,fileName:n});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L.file.previewFileHandler=function(e){var t,n,r=(null===(t=window.nebulaMobileApp)||void 0===t||null===(n=t.envInfo)||void 0===n?void 0:n.origin)||window.location.origin;h.a.pushWebWindow({url:"".concat(r).concat(e)})}),L.dataTable={webProxy:E.a,webSdk:ye.a,doc:He(He({},S),{},{id:C,type:N}),editable:!window.appData.sharePage&&"doc"===j.scene&&I,abilities:null===(x=j.doc)||void 0===x?void 0:x.abilities,image:{uploadConfig:me.a.imageUploadUrl,accept:Object(ge.getImageAccept)()},file:{uploadConfig:me.a.fileUploadUrl,accept:Object(ge.getFileAccept)()},maxRecordCount:m.CARD_MAX_RECORD_COUNT},L}},{key:"render",value:function(){var e=window.h5?pe:Z;return a.a.createElement("div",{className:"yuque-doc-content","data-df":"lake",style:{position:"relative"}},a.a.createElement("div",{ref:this.containerRef}),this.props.doc&&a.a.createElement(e,{doc:this.props.doc,disabled:this.props.book&&this.props.book.premium===f.PREMIUM_STATUS.disabled}))}}],n&&Xe(t.prototype,n),o&&Xe(t,o),Object.defineProperty(t,"prototype",{writable:!1}),d}(o.PureComponent);rt.defaultProps={scene:"other",disableYuqueCardEmbedView:!1,customMaximizeRestore:null,autoMaximizeCard:null,tileRendering:!1,optimizeGlobalViewerCopy:!1,imageLazyLoad:!1,enableDynamicTaskList:!1,viewResizeObserver:!1,boundaryTopOffset:0,disableDynamicCardFunction:!1,enableWording:!1,enableComments:!1},rt.propTypes={id:c.a.oneOfType([c.a.string,c.a.number]),preventCopySelfContainer:c.a.bool,content:c.a.string,docUrl:c.a.string,genAnchor:c.a.bool,genOutline:c.a.bool,onReady:c.a.func,onFirstRender:c.a.func,onLoaded:c.a.func,enableExportParser:c.a.bool,enableWording:c.a.bool,enableComments:c.a.bool,exportParserType:c.a.string,exportDocMaxWidth:c.a.number,disableYuqueCardEmbedView:c.a.bool,doc:c.a.object,docType:c.a.string,book:c.a.object,group:c.a.object,meta:c.a.object,theme:c.a.object,scene:c.a.oneOf(["doc","other"]),customMaximizeRestore:c.a.func,onCardMaximizeEnter:c.a.func,onCardMaximizeLeave:c.a.func,autoMaximizeCard:c.a.string,tileRendering:c.a.bool,optimizeGlobalViewerCopy:c.a.bool,viewerMode:c.a.string,simpleUI:c.a.bool,imageLazyLoad:c.a.bool,enableDynamicTaskList:c.a.bool,dynamicData:c.a.array,viewResizeObserver:c.a.bool,boundaryTopOffset:c.a.number,onViewportLayoutChange:c.a.func,disableDynamicCardFunction:c.a.bool,getTOCContainer:c.a.func,headingFolding:c.a.bool,onLogin:c.a.func.isRequired,forwardedRef:c.a.object};t.b=Object(u.d)()((function(e){var t=e.dispatch,n=Ye(e,Ge);return a.a.createElement(rt,Ve({onLogin:function(){var e,n;null!==(e=window.appData)&&void 0!==e&&null!==(n=e.me)&&void 0!==n&&n.id||null==t||t({type:"error/toggleLoginModal",payload:{visible:!0}})}},n))}))},function(e,t,n){"use strict";n(96);var r=n(23),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(32),l=n.n(u),s=n(131),f=n(38),d=n(89),p=n(433),m=n(517),h="badge-module_memberBadgeContainer_5R71j",y="badge-module_memberBadgeName_suodc",v="badge-module_safeIcon_OhaRO",b="badge-module_unsafeIcon_xJAtw",g="badge-module_memberBadgeNameCon_PlSXK",_="badge-module_memberBadgeIcon_tSYE9",w="badge-module_memberBadgeDesc_9icVs",E="badge-module_memberBadgeEnDesc_1zIJ4",O="badge-module_memberBadgeUpgradeAction_WIH5Q",x="badge-module_memberBadgeTooltip_hEhqR";function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function k(){k=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==j(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function S(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){S(a,r,o,i,c,"next",e)}function c(e){S(a,r,o,i,c,"throw",e)}i(void 0)}))}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(j,e);var t,n,o,i,c,u=T(j);function j(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,j),(t=u.call(this,e)).payFlowRef=a.a.createRef(),t}return t=j,n=[{key:"showMemberRenewIntro",value:(c=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.shouldRender("paymentTerms");case 2:if(!e.sent){e.next=8;break}return e.next=5,p.a.executeRender("paymentTerms",__("语雀付费服务协议更新"),__("《语雀付费服务协议》"));case 5:this.payFlowRef.current.showMemberIntro({isRenew:!0}),e.next=9;break;case 8:this.payFlowRef.current.showMemberIntro({isRenew:!0});case 9:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"showMemberIntro",value:(i=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.shouldRender("paymentTerms");case 2:if(!e.sent){e.next=8;break}return e.next=5,p.a.executeRender("paymentTerms",__("语雀付费服务协议更新"),__("《语雀付费服务协议》"));case 5:this.payFlowRef.current.showMemberIntro(),e.next=9;break;case 8:this.payFlowRef.current.showMemberIntro();case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,n=t.user,o=t.organization,i=t.dispatch,c=(t.showInvite,t.forceBadge),u=t.showSafe,p=n.name,j=n.origin_name,k=n.member_level,S=n.isPaid,C=n.email,N=n.hasPassword,P=window.appData,T=P.userMemberInfo,A=P.groupMemberInfo,L=d.a.isGroupOrPublication(n),I=L?A:T,R="en-us"===window.appData.locale,D=!(!o||!o.id),M=""!==C&&!0===N,F=u&&M,B=u&&!M,U=function(){if(D)return a.a.createElement("div",null,o.name);if(k){if(S){var t=l()(I.expired_at).diff(l()(),"days");return t<30?a.a.createElement("div",null,__("语雀会员剩余 {days} 天到期",{days:t}),a.a.createElement("a",{className:O,onClick:function(){return e.showMemberRenewIntro()}},__("立即续费"))):a.a.createElement("div",null,__("语雀会员有效期至 {time}",{time:l()(I.expired_at).format("YYYY-MM-DD")}),a.a.createElement("a",{className:O,onClick:function(){return e.showMemberRenewIntro()}},__("续费")))}return a.a.createElement("div",null,__("语雀会员已到期"),a.a.createElement("a",{className:O,onClick:function(){return e.showMemberRenewIntro()}},__("续费")))}return a.a.createElement("div",null,__("升级会员享受更多权益"),a.a.createElement("a",{"data-aspm-click":"click-pay","data-aspm-param":"scene=show-upgrade-introduction",className:O,onClick:function(){return e.showMemberIntro()}},__("立即升级")))};return a.a.createElement("div",{className:h,"data-testid":"badge"},a.a.createElement("div",{className:y},a.a.createElement("span",{className:g},j||p),a.a.createElement(r.a,{overlayClassName:x,title:U(),color:"white"},function(){if(!D&&(c||k)){var e=S?"_active":"";return a.a.createElement("span",{className:_},a.a.createElement("a",{href:L?s.LINKS.EXTERNAL_GROUP_INTRO_LINK:"/settings/member",target:"_blank"},a.a.createElement(f.b,{name:"user_member".concat(e),height:22,width:23})))}}()),a.a.createElement(r.a,{overlayClassName:x,title:a.a.createElement("div",null,M?__("账户安全系数高"):__("你的账号安全系数低"),a.a.createElement("a",{className:O,href:"/settings/account",target:"_blank"},M?__("点击查看"):__("升级保障"))),color:"white"},a.a.createElement("a",{href:"/settings/account",target:"_blank"},F&&a.a.createElement(f.b,{className:v,name:"safe",height:24,width:24}),B&&a.a.createElement(f.b,{className:b,name:"unsafe",height:36,width:31})))),a.a.createElement("div",{className:R?E:w},U()),!D&&a.a.createElement(m.a,{dispatch:i,user:n,ref:this.payFlowRef}))}}],n&&N(t.prototype,n),o&&N(t,o),Object.defineProperty(t,"prototype",{writable:!1}),j}(o.PureComponent);I.defaultProps={showSafe:!1,showMember:!1},I.propTypes={user:c.a.object,organization:c.a.object,dispatch:c.a.func,forceBadge:c.a.bool,showSafe:c.a.bool,showMember:c.a.bool};var R=I,D=(n(166),n(65)),M=(n(50),n(19)),F=(n(178),n(45)),B=n(49),U=n(113),z=n(1013),G=n(1460),V=n(2034),Y={memberBoardContainer:"board-module_memberBoardContainer_gN7pi",memberBoardRight:"board-module_memberBoardRight_6DlQt",memberBoardName:"board-module_memberBoardName_YNQRQ",certification:"board-module_certification_b5+ky",memberBoardNameCon:"board-module_memberBoardNameCon_i3Jda",memberBoardMainName:"board-module_memberBoardMainName_UiUuz",memberBoardIcon:"board-module_memberBoardIcon_zumcO",memberBoardRenewButton:"board-module_memberBoardRenewButton_Gg-zI",memberBoardCountdown:"board-module_memberBoardCountdown_RqOSU",memberBoardDesc:"board-module_memberBoardDesc_AnX25",memberBoardLink:"board-module_memberBoardLink_uaK6n",memberBoardOrgDesc:"board-module_memberBoardOrgDesc_yTvNM"};function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function H(){H=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==q(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function W(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function K(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){W(a,r,o,i,c,"next",e)}function c(e){W(a,r,o,i,c,"throw",e)}i(void 0)}))}}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(u,e);var t,n,r,o,i,c=X(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).payFlowRef=a.a.createRef(),t}return t=u,n=[{key:"showMemberIntro",value:(i=K(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.shouldRender("paymentTerms");case 2:if(!e.sent){e.next=8;break}return e.next=5,p.a.executeRender("paymentTerms",__("语雀付费服务协议更新"),__("《语雀付费服务协议》"));case 5:this.payFlowRef.current.showMemberIntro(),e.next=9;break;case 8:this.payFlowRef.current.showMemberIntro();case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"showMemberRenewIntro",value:function(){this.payFlowRef.current.showMemberIntro({isRenew:!0})}},{key:"startToPay",value:(o=K(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.shouldRender("paymentTerms");case 2:if(!e.sent){e.next=8;break}return e.next=5,p.a.executeRender("paymentTerms",__("语雀付费服务协议更新"),__("《语雀付费服务协议》"));case 5:this.payFlowRef.current.startToPay(),e.next=9;break;case 8:this.payFlowRef.current.startToPay();case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"componentDidMount",value:function(){"#renew"===window.location.hash&&(this.payFlowRef.current.showMemberIntro({isRenew:!0}),window.location.hash="")}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.dispatch,o=t.organization,i=t.onBuy;if(o){var c=o.payment_type,u=o.expired_at,p=c===B.PAYMENT_TYPE.downgrade_free,h=c===B.PAYMENT_TYPE.paid||c===B.PAYMENT_TYPE.trial,y=c===B.PAYMENT_TYPE.vip?"VIP":h?__("付费版空间"):__("免费版空间"),v=l()().isAfter(u),b=U.a.isFree(o);return a.a.createElement("div",{className:Y.memberBoardContainer,"data-testid":"board"},a.a.createElement(D.a,{className:Y.memberBoardNameCon},a.a.createElement(F.a,{span:12},a.a.createElement("div",{className:Y.memberBoardName},a.a.createElement("span",{style:{marginRight:"8px"}},y),a.a.createElement(G.a,{className:Y.certification}))),a.a.createElement(F.a,{span:12,className:Y.memberBoardRight},!b&&a.a.createElement(V.a,{usage:"organization"}),h&&v&&a.a.createElement(z.a,{organization:o}),a.a.createElement("span",{className:Y.memberBoardRenewButton},a.a.createElement(M.a,{type:"primary",onClick:function(){return i(h?B.ORDER_TYPE.renew:p?B.ORDER_TYPE.upgrade:"tryout")}},h?U.a.getPaymentAction(c):p?__("升级付费版"):__("试用付费版"))))),a.a.createElement(D.a,{className:Y.memberBoardDesc},a.a.createElement(F.a,{span:24},a.a.createElement("span",null,h&&(v?__("空间已过期"):__("{desc}至 ".concat(l()(u).format("YYYY-MM-DD")),{desc:c===B.PAYMENT_TYPE.trial?__("试用期"):__("有效期")}))))))}var g=n.name,_=n.member_level,w=n.isPaid,E=window.appData,O=E.userMemberInfo,x=E.groupMemberInfo,j=E.organization,k=d.a.isGroupOrPublication(n),S=k?x:O,C=(S||{}).countDownDays,N="en-us"===window.appData.locale?" ":"",P=d.a.isPublication(n),T=!(!j||!j.id);return a.a.createElement("div",{className:Y.memberBoardContainer,"data-testid":"board"},a.a.createElement(D.a,null,a.a.createElement(F.a,{span:12},a.a.createElement("div",{className:Y.memberBoardName},g,function(){if(!(!_||P||T&&k)){var e="member".concat(w?"":"-expired","-level").concat(_);return a.a.createElement("span",{className:Y.memberBoardIcon},a.a.createElement("a",{href:k?s.LINKS.EXTERNAL_GROUP_INTRO_LINK:s.LINKS.EXTERNAL_MEMBER_INTRO_LINK,target:"_blank"},a.a.createElement(f.b,{name:e,height:22,width:23})))}}())),!k&&a.a.createElement(F.a,{span:12,className:Y.memberBoardRight},a.a.createElement(V.a,{usage:k?"group":"member"}),_>0?a.a.createElement("span",{className:Y.memberBoardRenewButton},a.a.createElement(M.a,{type:"primary",onClick:function(){return e.showMemberRenewIntro()}},__("续费"))):a.a.createElement("span",{className:Y.memberBoardRenewButton},a.a.createElement(M.a,{"data-aspm-click":"click-pay","data-aspm-param":"scene=show-upgrade-introduction",type:"primary",onClick:function(){return e.showMemberIntro()}},__("立即升级"))))),a.a.createElement(D.a,{className:Y.memberBoardDesc},a.a.createElement(F.a,{span:24},P||T&&k?null:_?w?a.a.createElement("div",null,a.a.createElement("span",{className:Y.memberBoardMainName},k?__("高级版团队"):__("语雀会员")),a.a.createElement("span",null,0===C?a.a.createElement(a.a.Fragment,null,__("有效期至")," ",l()(S.expired_at).format("YYYY-MM-DD HH:mm:ss")):a.a.createElement(a.a.Fragment,null,__("有效期至")," ",l()(S.expired_at).format("YYYY-MM-DD")))):k?a.a.createElement("div",null,__("高级版团队已到期")):a.a.createElement("div",null,__("语雀会员"),N,__("已到期"),__("，现在续费享受更多权益"),a.a.createElement("a",{target:"_blank",href:k?s.LINKS.EXTERNAL_GROUP_INTRO_LINK:s.LINKS.EXTERNAL_MEMBER_INTRO_LINK,className:Y.memberBoardLink},__("查看会员权益"))):k?null:a.a.createElement("div",null,a.a.createElement("span",{className:Y.memberBoardSubDesc},__("升级会员享受更多权益")),a.a.createElement("a",{target:"_blank",href:k?s.LINKS.EXTERNAL_GROUP_INTRO_LINK:s.LINKS.EXTERNAL_MEMBER_INTRO_LINK,className:Y.memberBoardLink},__("了解更多"))))),a.a.createElement(m.a,{dispatch:r,user:n,ref:this.payFlowRef,onReceiptSuccess:function(){return e.onReceiptSuccess()}}))}}],n&&$(t.prototype,n),r&&$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.PureComponent);ee.propTypes={user:c.a.object,organization:c.a.object,dispatch:c.a.func,onBuy:c.a.func};var te=ee,ne=(n(144),n(33)),re=n(309),oe=n.n(re),ae=n(112),ie=n.n(ae),ce="selector-module_memberSelectorContainer_SzVML",ue="selector-module_memberSelectorTips_vqgUs";function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=he(e);if(t){var o=he(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return me(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}var ye=ie.a.MEMBER_GROUP_FULL_AMOUNT,ve=ie.a.MEMBER_GROUP_BASE_AMOUNT,be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(i,e);var t,n,r,o=de(i);function i(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),n=me(t),a=function(e){var n=e.target.value;t.setState({value:n}),t.props.onChange(n)},(r="onChangeLevel")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={value:0},t}return t=i,(n=[{key:"render",value:function(){return a.a.createElement("div",{className:ce,"data-testid":"selector"},a.a.createElement(ne.a.Group,{onChange:this.onChangeLevel,defaultValue:0},a.a.createElement(ne.a.Button,{value:0},__("基础版"),a.a.createElement("br",null),__("免费")),a.a.createElement(ne.a.Button,{value:1,"data-testid":"premium"},__("高级版"),a.a.createElement("br",null),ye," ",__("元"),"/",oe()(__("年")),"/",oe()(__("团队")))),1===this.state.value&&a.a.createElement("div",{className:ue},__("立即升级，可享受首年 {value} 元优惠价",{value:ve})))}}])&&se(t.prototype,n),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);be.propTypes={onChange:c.a.func};var ge=be,_e="collabtip-module_collabTipContainer_SNM76",we="collabtip-module_collabTipUpgradeButton_-+2mS";function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Se(e);if(t){var o=Se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ke(this,n)}}function ke(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(i,e);var t,n,r,o=je(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={},t.payFlowRef=a.a.createRef(),t}return t=i,(n=[{key:"showMemberIntro",value:function(){this.payFlowRef.current.showMemberIntro({code:"max_book_collaborator_number"})}},{key:"_hasOwnerAbility",value:function(){var e=window.appData.group;if(e&&e.abilities)return e.abilities.destroy}},{key:"_hasGroupMemberAbility",value:function(){var e=window.appData.group;if(e&&e.abilities)return e.abilities.create_book}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.dispatch,o=d.a.isGroupOrPublication(n),i=s.MEMBER_RULE[o?"Group":"User"],c=this._hasOwnerAbility(),u=this._hasGroupMemberAbility();return n.isPaid?a.a.createElement("div",{className:_e,"data-testid":"collatip"},__("知识库成员已达 {value} 人上限",{value:i.member.max_book_collaborator_number})):a.a.createElement("div",{className:_e,"data-testid":"collatip"},a.a.createElement("div",null,o?__("基础版团队"):__("普通用户"),__("知识库成员仅能添加 {value} 人",{value:i.normal.max_book_collaborator_number}),__("，"),!c&&u&&__("联系管理员"),__("升级至{userLevel}可添加 {value} 人",{userLevel:o?__("高级版团队"):__("语雀会员"),value:i.member.max_book_collaborator_number}),c&&a.a.createElement("span",{"data-aspm-click":"click-pay","data-aspm-param":"code=max_book_collaborator_number",className:we,onClick:function(){return e.showMemberIntro()}},__("立即升级"))),a.a.createElement(m.a,{dispatch:r,user:n,ref:this.payFlowRef}))}}])&&Oe(t.prototype,n),r&&Oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);Ce.propTypes={user:c.a.object,dispatch:c.a.func};var Ne=Ce,Pe=n(124),Te="DocCollaboratorTip-module_contentText_3pLj-",Ae="DocCollaboratorTip-module_contentCountWrapper_-NPtH",Le="DocCollaboratorTip-module_contentIcon_o95Dj",Ie="DocCollaboratorTip-module_contentCount_dj5PU";function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return De(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Me=function(e){var t=e.collaboratorCount,n=e.user,r=window.appData.organization,i=!(null==r||!r.id),c=Re(Object(o.useState)(t),2),u=c[0],l=c[1];Object(o.useEffect)((function(){l(t)}),[t]);var s=Pe.a.getDocCollaboratorLimit(n);return a.a.createElement(a.a.Fragment,null,function(){var e=null;if(u<s)return e;if(i?r.isPaid:n.isPaid)e=__("协作人数已达上限");else{var t,o="https://www.yuque.com/about/price#".concat(i?"organization":"personal"),c=i?__("升级空间"):__("升级会员");e=__("协作人数已达上限，{upgrade} 享 500 人高效协作",{upgrade:a.a.createElement("a",{href:o,target:"_blank"},c)}),d.a.isGroupOrPublication(n)&&(e=__("协作人数已达上限")),!i||null!==(t=r.abilities)&&void 0!==t&&t.destroy||(e=__("协作人数已达上限，请联系管理员升级空间"))}return a.a.createElement("div",{className:Te},e)}(),a.a.createElement("div",{className:Ae},a.a.createElement(f.b,{className:Le,name:"member",width:16}),a.a.createElement("span",{className:Ie},Math.max(u,0),"/",s)))};Me.propTypes={collaboratorCount:c.a.array,user:c.a.object};var Fe=Me,Be=n(852),Ue=n(140),ze=n.n(Ue),Ge="paidreminder-module_paidReminderContainer_XkI46",Ve="paidreminder-module_paidReminderIcon_r3HQS",Ye="paidreminder-module_paidReminderMainTitle_K90jV",qe="paidreminder-module_paidReminderRightCon_6FQkp",He="paidreminder-module_paidReminderDescLink_3LTEo",We="paidreminder-module_paidReminderSubTitle_yAG70",Ke="paidreminder-module_paidReminderSubText_ZUHE7",$e="paidreminder-module_paidReminderDescCon_SH5W5";function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tt(e);if(t){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return et(this,n)}}function et(e,t){if(t&&("object"===Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(i,e);var t,n,r,o=Ze(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={},t}return t=i,(n=[{key:"render",value:function(){if(window.h5)return null;var e=window.appData,t=e.organization;if(!e.isPublicCloud||t)return null;var n=this.props.user,r=n.type,o=d.a.isGroupOrPublication(n),i=s.MEMBER_RULE[r],c="member-desc";return a.a.createElement("div",{className:Ge,"data-testid":"paid-reminder"},a.a.createElement("h2",{className:Ye},o?__("恭喜你，团队升级为高级版"):__("恭喜你，升级为语雀会员")),a.a.createElement("a",{className:He,target:"_blank",href:o?s.LINKS.EXTERNAL_GROUP_INTRO_LINK:s.LINKS.EXTERNAL_MEMBER_INTRO_LINK},__("了解更多权益")),a.a.createElement(D.a,{className:$e},a.a.createElement(F.a,{span:"6"},a.a.createElement(D.a,null,a.a.createElement(F.a,{span:"5",style:{minWidth:50}},a.a.createElement("span",{className:Ve},a.a.createElement(f.b,{name:"".concat(c,"-4"),height:48,width:48}))),a.a.createElement(F.a,{span:"19",className:qe},a.a.createElement("p",{className:We},__("无限量知识库")),a.a.createElement("p",{className:Ke},o?__("基础版团队仅能创建 {value} 个",{value:i.normal.max_book_number}):__("普通用户仅能创建 {value} 个",{value:i.normal.max_book_number}))))),a.a.createElement(F.a,{span:"6"},a.a.createElement(D.a,null,a.a.createElement(F.a,{span:"5",style:{minWidth:50}},a.a.createElement("span",{className:Ve},o?a.a.createElement(f.b,{name:"".concat(c,"-1"),height:48,width:48}):a.a.createElement(f.b,{name:"".concat(c,"-5"),height:48,width:48}))),a.a.createElement(F.a,{span:"19",className:qe},o?a.a.createElement("div",null,a.a.createElement("p",{className:We},__("可添加{value} 位团队成员",{value:i.member.max_group_member_number})),a.a.createElement("p",{className:Ke},__("基础版团队仅能添加 {value} 位成员",{value:i.normal.max_group_member_number}))):a.a.createElement("div",null,a.a.createElement("p",{className:We},__("支持单个大文件")),a.a.createElement("p",{className:Ke},__("图片 {value1}{unit1}，视频 {value2}{unit2}，其他格式 {value3}{unit3}",{value1:ze.a.getSizeValue(i.member.max_single_image_size).value,unit1:ze.a.getSizeValue(i.member.max_single_image_size).unit,value2:ze.a.getSizeValue(i.member.max_single_video_size).value,unit2:ze.a.getSizeValue(i.member.max_single_video_size).unit,value3:ze.a.getSizeValue(i.member.max_single_file_size).value,unit3:ze.a.getSizeValue(i.member.max_single_file_size).unit})))))),a.a.createElement(F.a,{span:"6"},a.a.createElement(D.a,null,a.a.createElement(F.a,{span:"5",style:{minWidth:50}},a.a.createElement("span",{className:Ve},o?a.a.createElement(f.b,{name:"".concat(c,"-5"),height:48,width:48}):a.a.createElement(f.b,{name:"".concat(c,"-1"),height:48,width:48}))),a.a.createElement(F.a,{span:"19",className:qe},o?a.a.createElement("div",null,a.a.createElement("p",{className:We},__("支持单个大文件")),a.a.createElement("p",{className:Ke},__("图片 {value1}{unit1}，视频 {value2}{unit2}，其他格式 {value3}{unit3}",{value1:ze.a.getSizeValue(i.member.max_single_image_size).value,unit1:ze.a.getSizeValue(i.member.max_single_image_size).unit,value2:ze.a.getSizeValue(i.member.max_single_video_size).value,unit2:ze.a.getSizeValue(i.member.max_single_video_size).unit,value3:ze.a.getSizeValue(i.member.max_single_file_size).value,unit3:ze.a.getSizeValue(i.member.max_single_file_size).unit}))):a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement("p",{className:We},__("{value} 位知识库成员",{value:i.member.max_book_collaborator_number})),a.a.createElement("p",{className:Ke},__("普通用户仅能添加 {value} 位",{value:i.normal.max_book_collaborator_number}))))))),a.a.createElement(F.a,{span:"6"},a.a.createElement(D.a,null,a.a.createElement(F.a,{span:"5",style:{minWidth:50}},a.a.createElement("span",{className:Ve},a.a.createElement(f.b,{name:"".concat(c,"-2"),height:48,width:48}))),a.a.createElement(F.a,{span:"19",className:qe},a.a.createElement("div",null,a.a.createElement("p",{className:We},__("赠送 {value}{unit} 上传流量",{value:ze.a.getSizeValue(s.USER_MEMBER_SEND_UPLOALD_SIZE).value,unit:ze.a.getSizeValue(s.USER_MEMBER_SEND_UPLOALD_SIZE).unit})),a.a.createElement("p",{className:Ke},__("首次付费赠送，约等于可上传 1 万张图片"))))))))}}])&&Xe(t.prototype,n),r&&Xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);nt.propTypes={user:c.a.object};var rt=nt,ot=n(2248),at="groupintro-module_groupIntroContainer_XUWAC",it="groupintro-module_groupIntroMainImage_wg4Nf",ct="groupintro-module_groupIntroMore_4N4Va";function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pt(e);if(t){var o=pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dt(this,n)}}function dt(e,t){if(t&&("object"===ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(i,e);var t,n,r,o=ft(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={},t}return t=i,(n=[{key:"render",value:function(){var e="en-us"===window.appData.locale;return a.a.createElement("div",{className:at,"data-testid":"groupintro"},a.a.createElement(D.a,null,a.a.createElement(F.a,{span:24},a.a.createElement("div",{className:it},e?a.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/basement_prod/0ba80d6a-abd1-41da-82ca-1aa40928c650.svg"}):a.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/basement_prod/9191d568-5928-41b5-a195-da00b1c07d1b.svg"})),a.a.createElement("div",{className:ct},a.a.createElement("a",{href:s.LINKS.EXTERNAL_GROUP_INTRO_LINK,target:"_blank"},__("了解更多")," ",a.a.createElement(ot.a,null))))))}}])&&lt(t.prototype,n),r&&lt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);mt.propTypes={};var ht=mt,yt=n(1355),vt=n(2223),bt=(n(120),n(63)),gt=n(500),_t=n(117),wt=n(10),Et=n.n(wt),Ot=n(91),xt=n(34),jt={expireReminderCard:"expirereminder-module_expireReminderCard_eDl3a",expireReminderEnContainer:"expirereminder-module_expireReminderEnContainer_+9utL",expireReminderUsageTitle:"expirereminder-module_expireReminderUsageTitle_9ILTK",expireReminderContainer:"expirereminder-module_expireReminderContainer_dAKqh",expireReminderSubTitle:"expirereminder-module_expireReminderSubTitle_+fGMT",expireReminderIcon:"expirereminder-module_expireReminderIcon_xRFP7",expireReminderUsage:"expirereminder-module_expireReminderUsage_VdEP2",expireReminderUsageText:"expirereminder-module_expireReminderUsageText_KWKIp",expireReminderUsageSubTitle:"expirereminder-module_expireReminderUsageSubTitle_3d+wW",expireReminderUsageSubIcon:"expirereminder-module_expireReminderUsageSubIcon_SJ1iO",expireReminderButtonCon:"expirereminder-module_expireReminderButtonCon_g0x1d",expireReminderContactUs:"expirereminder-module_expireReminderContactUs_XCUp2",expireReminderImage:"expirereminder-module_expireReminderImage_5+JsF",expireReminderSmallImage:"expirereminder-module_expireReminderSmallImage_4FJYy",expireReminderOwners:"expirereminder-module_expireReminderOwners_k7yJW"};function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nt(e,t){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nt(e,t)}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=At(e);if(t){var o=At(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tt(this,n)}}function Tt(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function At(e){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},At(e)}var Lt="user_expired_reminder",It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nt(e,t)}(i,e);var t,n,r,o=Pt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={visible:!1,doc_count:0},t}return t=i,(n=[{key:"hasGroupOwnerAbility",value:function(){var e=window.appData.group;return e&&e.abilities&&e.abilities.destroy}},{key:"hasOwnerAbility",value:function(){var e=this.props.user;return!d.a.isGroupOrPublication(e)||this.hasGroupOwnerAbility()}},{key:"getRenewDesc",value:function(){var e=this.props.user;if(!d.a.isGroupOrPublication(e))return __("为了不影响功能使用，请及时续费");if(this.hasGroupOwnerAbility())return __("为了不影响功能使用，请及时续费");var t=window.appData.groupMemberInfo;return t&&t.groupOwners?a.a.createElement(a.a.Fragment,null,__("联系管理员"),a.a.createElement("span",{className:jt.expireReminderOwners},t.groupOwners.map((function(e,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{href:e.login,target:"_blank"},e.name),n!==t.groupOwners.length-1&&a.a.createElement(a.a.Fragment,null,__("、")))}))),__("续费")):__("联系管理员续费")}},{key:"getStorageKey",value:function(){var e=this.props.user;return"member-expire-reminder/".concat(e.id)}},{key:"getNearByDayValue",value:function(e){for(var t=0;t<_t.PUSH_DAYS_BEFROE_EXPIRE.length;t++){var n=_t.PUSH_DAYS_BEFROE_EXPIRE[t],r=_t.PUSH_DAYS_BEFROE_EXPIRE[t+1];if(t+1>=_t.PUSH_DAYS_BEFROE_EXPIRE.length)return n;if(e<=n&&e>r)return n}}},{key:"showExpire",value:function(){var e=this.props.user,t=d.a.isGroupOrPublication(e);if(!t){var n=window.appData,r=n.userMemberInfo,o=n.groupMemberInfo,a=n.readTip;if(!(a&&e.id&&[].concat(a.user_expired_reminder).includes(e.id))){var i=t?o:r;if(i){var c=i.countDownDays;if(i.isAllowRenew){var u=this.getNearByDayValue(c),l=this.getStorageKey(),s=parseInt(Ot.default.get(l),10);s!==u&&(this.setState({visible:!0}),this.getUserStatistics(e.id)),0===s&&xt.a.mine.readGuide({type:Lt,id:e.id}).then((function(){Ot.default.remove(l)}))}}}}}},{key:"getUserStatistics",value:function(e){var t=this;xt.a.groupStatistics.docs({id:e}).then((function(e){t.setState({doc_count:e&&e.doc_count})}))}},{key:"componentDidMount",value:function(){this.showExpire()}},{key:"onClose",value:function(){var e=this.props.user,t=d.a.isGroupOrPublication(e),n=window.appData,r=n.userMemberInfo,o=n.groupMemberInfo,a=n.readTip,i=(t?o:r).countDownDays,c=this.getNearByDayValue(i),u=this.getStorageKey(),l=Math.max(c,0),s=Lt;0===l?xt.a.mine.readGuide({type:s,id:e.id}).then((function(){var t=a[s];a[s]=null==t?e.id:[].concat(t,e.id),Ot.default.remove(u)})):Ot.default.set(u,l),this.setState({visible:!1})}},{key:"onClickRenew",value:function(){Be.a.showMemberRenewIntro()}},{key:"getUsage",value:function(){var e=this.state.doc_count,t=this.props.user,n=t||{},r=n.books_count,o=void 0===r?0:r,a=n.members_count,i=void 0===a?0:a,c=d.a.isGroupOrPublication(t),u=window.appData,l=u.userMemberInfo,s=u.groupMemberInfo,f=c?s:l;if(f){var p=f.countDownDays,m=f.usage||{},h=m.attachment_size,y=void 0===h?0:h,v=m.image_size,b=void 0===v?0:v,g=m.video_size,_=y+b+(void 0===g?0:g);return{name:t.name,level_text:c?__("高级版团队"):__("语雀会员"),countdown:p,usage:{book_count:o,doc_count:e,total_resource_size:_,group_member_count:i}}}}},{key:"getSubTitle",value:function(e){var t="en-us"===window.appData.locale?" ":"",n=this.props.user,r=d.a.isGroupOrPublication(n);return n.isPaid?0===e.countdown?a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(a.a.Fragment,null,"“",e.name,"” "),__("将在今天 ({value}) 到期",{value:l()(n.expired_at).format("YYYY-MM-DD HH:mm:ss")}),"，",this.getRenewDesc(),"。"):1===e.countdown?a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(a.a.Fragment,null,"“",e.name," ”"),__("即将在")," ",__("{value1} 天后 ({value2}) ",{value1:e.countdown,value2:l()(n.expired_at).format("YYYY-MM-DD HH:mm:ss")}),t,__("到期"),"，",this.getRenewDesc(),"。"):a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(a.a.Fragment,null,"“",e.name," ”"),__("即将在")," ",__("{value} 天后",{value:e.countdown}),t,__("到期"),"，",this.getRenewDesc(),"。"):a.a.createElement(a.a.Fragment,null,__("已到期"),"，",this.getRenewDesc(),"。")}},{key:"render",value:function(){var e,t=this;if(window.h5)return null;if(!this.state.visible)return null;var n=window.appData,r=n.locale,o=n.organization;if(!n.isPublicCloud||o)return null;var i=this.getUsage();if(!i)return null;var c=this.props.user,u=d.a.isGroupOrPublication(c),l=this.hasOwnerAbility(),s="en-us"===r,p=s?" ":"";return a.a.createElement("div",{className:u?"layout-container":null},a.a.createElement(bt.a,{"data-testid":"expire-reminder",className:jt.expireReminderCard,extra:a.a.createElement("span",{className:"larkicon larkicon-close","data-testid":"close-btn",onClick:function(){return t.onClose()}})},a.a.createElement("div",{className:Et()((e={},St(e,jt.expireReminderContainer,!0),St(e,jt.expireReminderEnContainer,s),e))},a.a.createElement(gt.a,{className:jt.expireReminderIcon}),a.a.createElement("h2",null,__("你的"),p,i.level_text,p,c.isPaid?__("即将到期"):__("已到期")),a.a.createElement("p",{className:jt.expireReminderSubTitle},__("你的"),p,i.level_text,p,this.getSubTitle(i)),u?a.a.createElement(D.a,{className:jt.expireReminderUsage},a.a.createElement(F.a,{span:6},a.a.createElement("div",{className:jt.expireReminderUsageCon},a.a.createElement("p",{className:jt.expireReminderUsageTitle},a.a.createElement("span",{className:jt.expireReminderUsageSubIcon},a.a.createElement(f.b,{name:"expire-member",width:15,height:15})),a.a.createElement("span",{className:jt.expireReminderUsageSubTitle},oe()(__("成员")))),a.a.createElement("p",{className:jt.expireReminderUsageText},i.usage.group_member_count))),a.a.createElement(F.a,{span:6},a.a.createElement("div",{className:jt.expireReminderUsageCon},a.a.createElement("p",{className:jt.expireReminderUsageTitle},a.a.createElement("span",{className:jt.expireReminderUsageSubIcon},a.a.createElement(f.b,{name:"expire-book",width:15,height:15})),a.a.createElement("span",{className:jt.expireReminderUsageSubTitle},oe()(__("知识库")))),a.a.createElement("p",{className:jt.expireReminderUsageText},i.usage.book_count))),a.a.createElement(F.a,{span:6},a.a.createElement("div",{className:jt.expireReminderUsageCon},a.a.createElement("p",{className:jt.expireReminderUsageTitle},a.a.createElement("span",{className:jt.expireReminderUsageSubIcon},a.a.createElement(f.b,{name:"expire-doc",width:15,height:15})),a.a.createElement("span",{className:jt.expireReminderUsageSubTitle},oe()(__("文档")))),a.a.createElement("p",{className:jt.expireReminderUsageText},i.usage.doc_count))),a.a.createElement(F.a,{span:6},a.a.createElement("div",{className:jt.expireReminderUsageCon},a.a.createElement("p",{className:jt.expireReminderUsageTitle},a.a.createElement("span",{className:jt.expireReminderUsageSubIcon},a.a.createElement(f.b,{name:"expire-resource",width:15,height:15})),a.a.createElement("span",{className:jt.expireReminderUsageSubTitle},oe()(__("上传流量")))),a.a.createElement("p",{className:jt.expireReminderUsageText},ze.a.getSizeValue(i.usage.total_resource_size).value.toFixed(2),ze.a.getSizeValue(i.usage.total_resource_size).unit)))):a.a.createElement(D.a,{className:jt.expireReminderUsage},a.a.createElement(F.a,{span:8},a.a.createElement("div",{className:jt.expireReminderUsageCon},a.a.createElement("p",{className:jt.expireReminderUsageTitle},a.a.createElement("span",{className:jt.expireReminderUsageSubIcon},a.a.createElement(f.b,{name:"expire-book",width:15,height:15})),a.a.createElement("span",{className:jt.expireReminderUsageSubTitle},oe()(__("知识库")))),a.a.createElement("p",{className:jt.expireReminderUsageText},i.usage.book_count))),a.a.createElement(F.a,{span:8},a.a.createElement("div",{className:jt.expireReminderUsageCon},a.a.createElement("p",{className:jt.expireReminderUsageTitle},a.a.createElement("span",{className:jt.expireReminderUsageSubIcon},a.a.createElement(f.b,{name:"expire-doc",width:15,height:15})),a.a.createElement("span",{className:jt.expireReminderUsageSubTitle},oe()(__("文档")))),a.a.createElement("p",{className:jt.expireReminderUsageText},i.usage.doc_count))),a.a.createElement(F.a,{span:8},a.a.createElement("div",{className:jt.expireReminderUsageCon},a.a.createElement("p",{className:jt.expireReminderUsageTitle},a.a.createElement("span",{className:jt.expireReminderUsageSubIcon},a.a.createElement(f.b,{name:"expire-resource",width:15,height:15})),a.a.createElement("span",{className:jt.expireReminderUsageSubTitle},oe()(__("上传流量")))),a.a.createElement("p",{className:jt.expireReminderUsageText},ze.a.getSizeValue(i.usage.total_resource_size).value.toFixed(2),ze.a.getSizeValue(i.usage.total_resource_size).unit)))),l&&a.a.createElement(D.a,{className:jt.expireReminderButtonCon},a.a.createElement(F.a,{span:24},a.a.createElement(M.a,{type:"primary",onClick:function(){return t.onClickRenew()}},__("立即续费")),a.a.createElement("a",{className:jt.expireReminderContactUs,href:"https://www.yuque.com/feedbacks/new",target:"_blank"},a.a.createElement(M.a,null,__("联系客服"))))),a.a.createElement("div",{className:l?jt.expireReminderImage:jt.expireReminderSmallImage},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ojF7RpGFUJUAAAAAAAAAAABkARQnAQ"})))))}}])&&Ct(t.prototype,n),r&&Ct(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);It.propTypes={user:c.a.object};var Rt=It,Dt=(n(175),n(84)),Mt=n(68),Ft=n(540),Bt="baseUsage-module_baseUsage_g0EJX",Ut="baseUsage-module_titleTips_qNIGn",zt="baseUsage-module_buy_MC96A",Gt="baseUsage-module_title_aMGMh",Vt="baseUsage-module_limit_Ot5RH",Yt="baseUsage-module_usage_kh-9T",qt="baseUsage-module_usageBarDescItem_lGQPK",Ht="baseUsage-module_usageBarDescIcon_PWraZ",Wt="baseUsage-module_usageBarTips_AWI-M",Kt="baseUsage-module_usageBarCon_BO6f5",$t="baseUsage-module_usageBarItem_3-DKT",Qt="baseUsage-module_uploadTip_FgZbs",Xt=function(e){var t=e.title,n=e.tips,o=e.buy,i=e.limit,c=e.usage,u=e.className,l=void 0===u?"":u,s=e["data-testid"],f=e.exchangeUrl,d=c.totalUsed,p=c.usageList,m=window.appData.organization,h=(void 0===m?{}:m).payment_type===B.PAYMENT_TYPE.trial;return a.a.createElement("div",{"data-testid":s,className:Et()(Bt,l)},a.a.createElement("div",{className:Gt,"data-testid":"test-title"},t,n&&a.a.createElement(Dt.a,{className:Ut,placement:"top",content:n},a.a.createElement(Ft.a,null)),a.a.createElement("span",{className:zt},o),f&&a.a.createElement(Mt.NavLink,{to:f},a.a.createElement("a",null,__("兑换")))),a.a.createElement("div",{className:Vt,"data-testid":"test-limit"},i,"  ",h&&"10GB"===i&&a.a.createElement("span",{className:Qt},__("试用期内，流量限制为 10GB"))),a.a.createElement("div",{className:Yt,"data-testid":"test-usage-detail"},d,a.a.createElement("div",{"data-testid":"test-legend"},p.map((function(e){return e.text&&a.a.createElement("span",{className:qt,key:e.color},a.a.createElement("span",{className:Ht,style:{backgroundColor:e.color}}),a.a.createElement("span",null,e.text," ",e.originValue,e.unit," ",e.tips&&a.a.createElement(r.a,{className:Wt,placement:"bottom",title:e.tips},a.a.createElement(Ft.a,null))))})))),a.a.createElement("div",{className:Kt,"data-testid":"test-usageBar"},p.map((function(e){return a.a.createElement("div",{key:e.color,className:$t,style:{left:"".concat(e.offset,"%"),width:"".concat(e.value,"%"),backgroundColor:e.color}})}))))};Xt.propTypes={title:c.a.string,tips:c.a.string,buy:c.a.element,limit:c.a.string,usage:c.a.object,className:c.a.string,"data-testid":c.a.string,exchangeUrl:c.a.string};var Jt=Xt,Zt=function(e){var t=e.organization,n=e.onBuy,r=t.usage,o=t.members_count,i=t.payment_type,c=t.expired_at,u=i===B.PAYMENT_TYPE.paid,f=l()().isAfter(c),d=t.max_member||500,p=__("空间"),m=r||{},h=m.attachment_size,y=void 0===h?0:h,v=m.video_size,b=void 0===v?0:v,g=m.image_size,_=void 0===g?0:g,w=m.max_upload_size,E=void 0===w?0:w,O=s.SIZE.GB,x=[{text:__("附件"),value:y/O,color:"#669AFB",tips:__("包括所有上传到{where}的文件（除本地视频、图片）",{where:p.toLowerCase()})},{text:__("本地视频"),value:b/O,color:"#F7C515"},{text:__("图片"),value:_/O,color:"#EB7452"}],j=E/O,k=0,S=x.map((function(e,t){var n=x[t-1];return n?(e.offset=100*n._value/j,e._value=n._value+e.value):(e.offset=0,e._value=e.value),k+=e.value,e.originValue=e.value.toFixed(2),e.value=100*e.value/j,e.unit="GB",e})),C={totalUsed:__("已用 {totalUsage}GB",{totalUsage:k.toFixed(2)}),usageList:S},N="".concat(j.toFixed(2),"GB"),P=u?a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{onClick:function(){return n(B.ORDER_TYPE.data)}},__("购买流量")),"  ",a.a.createElement("a",{href:"/r/organizations/dashboard/settings?type=grains"},__("兑换流量"))):a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/grn3zi",target:"_blank","data-testid":"test-upload-info-upgrade"},__("获取更多流量")),"  ",a.a.createElement("a",{href:"/r/organizations/dashboard/settings?type=grains"},__("兑换流量"))),T=u&&!f?a.a.createElement("a",{onClick:function(){return n(B.ORDER_TYPE.buyMember)}},__("升级")):null,A=__("{max_member} 人",{max_member:d}),L={totalUsed:__("当前 {members_count} 人",{members_count:o}),usageList:[{value:100*o/d,offset:0,color:"#669AFB"}]};return a.a.createElement(D.a,null,a.a.createElement(F.a,{span:7},a.a.createElement(Jt,{"data-testid":"member-usage",title:__("人数规模"),buy:T,limit:A,usage:L})),a.a.createElement(F.a,{span:15,push:2},a.a.createElement(Jt,{"data-testid":"upload-usage",title:__("上传流量"),buy:P,limit:N,usage:C})))};Zt.propTypes={organization:c.a.object,onBuy:c.a.func};var en=Zt,tn=function(e){var t=e.group,n=Object(o.useRef)(null),r=t.max_member,i=t.members_count,c=t.groupMemberInfo.usage,u=d.a.isPublication(t)?__("知识小组"):__("团队"),l=c||{},f=l.attachment_size,p=void 0===f?0:f,h=l.video_size,y=void 0===h?0:h,v=l.image_size,b=void 0===v?0:v,g=l.max_upload_size,_=void 0===g?0:g,w=s.SIZE.GB,E=[{text:__("附件"),value:p/w,color:"#669AFB",tips:__("包括所有上传到{where}的文件（除本地视频、图片）",{where:u.toLowerCase()})},{text:__("本地视频"),value:y/w,color:"#F7C515"},{text:__("图片"),value:b/w,color:"#EB7452"}],O=_/w,x=0,j=E.map((function(e,t){var n=E[t-1];return n?(e.offset=100*n._value/O,e._value=n._value+e.value):(e.offset=0,e._value=e.value),x+=e.value,e.originValue=e.value.toFixed(2),e.value=100*e.value/O,e.unit="GB",e})),k={totalUsed:"已用 ".concat(x.toFixed(2),"GB"),usageList:j},S="".concat(O.toFixed(2),"GB"),C=a.a.createElement("a",{onClick:function(){n.current.showMemberIntro({isBuyUpload:!0})}},"购买流量"),N=t.isPaid?s.MEMBER_RULE.Group.member.max_group_member_number:s.MEMBER_RULE.Group.normal.max_group_member_number,P=r||N,T="".concat(P," 人"),A={totalUsed:"当前 ".concat(i," 人"),usageList:[{value:100*i/P,offset:0,color:"#669AFB"}]};return a.a.createElement(D.a,null,a.a.createElement(F.a,{span:6},a.a.createElement(Jt,{"data-testid":"member-usage",title:__("人数规模"),limit:T,usage:A})),a.a.createElement(F.a,{span:16,push:2},a.a.createElement(Jt,{"data-testid":"upload-usage",title:__("上传流量"),buy:C,limit:S,usage:k,exchangeUrl:"./grains"})),a.a.createElement(m.a,{user:t,ref:n}))};tn.propTypes={group:c.a.object};var nn=tn,rn=function(e){var t=e.user,n=Object(o.useRef)(null),r=window.appData.userMemberInfo.usage,i=__("个人语雀下"),c=r||{},u=c.attachment_size,l=void 0===u?0:u,f=c.video_size,d=void 0===f?0:f,p=c.image_size,h=void 0===p?0:p,y=c.max_upload_size,v=void 0===y?0:y,b=s.SIZE.GB,g=[{text:__("附件"),value:l/b,color:"#669AFB",tips:__("包括所有上传到{where}的文件（除本地视频、图片）",{where:i.toLowerCase()})},{text:__("本地视频"),value:d/b,color:"#F7C515"},{text:__("图片"),value:h/b,color:"#EB7452"}],_=v/b,w=0,E=g.map((function(e,t){var n=g[t-1];return n?(e.offset=100*n._value/_,e._value=n._value+e.value):(e.offset=0,e._value=e.value),w+=e.value,e.originValue=e.value.toFixed(2),e.value=100*e.value/_,e.unit="GB",e})),O={totalUsed:"已用 ".concat(w.toFixed(2),"GB"),usageList:E},x="".concat(parseFloat(_.toFixed(2)),"GB"),j=a.a.createElement("a",{onClick:function(){n.current.showMemberIntro({isBuyUpload:!0})}},__("购买"));return a.a.createElement(D.a,null,a.a.createElement(Jt,{"data-testid":"upload-usage",title:__("上传流量"),buy:j,limit:x,usage:O,exchangeUrl:"./grains"}),a.a.createElement(m.a,{user:t,ref:n}))};rn.propTypes={user:c.a.object};var on=rn,an="uploadExhaustReminder-module_UploadExhaustReminderCard_cBlO2",cn="uploadExhaustReminder-module_UploadExhaustReminderEnContainer_WNK2j",un="uploadExhaustReminder-module_UploadExhaustReminderContainer_XX4Gr",ln="uploadExhaustReminder-module_UploadExhaustReminderSubTitle_hv3if",sn="uploadExhaustReminder-module_UploadExhaustReminderIcon_Y2-xC",fn="uploadExhaustReminder-module_UploadExhaustReminderButtonCon_mHoxS",dn="uploadExhaustReminder-module_UploadExhaustReminderImage_zteOX",pn="uploadExhaustReminder-module_UploadExhaustReminderSmallImage_3HP6j",mn="uploadExhaustReminder-module_UploadExhaustReminderOwners_N0DgD";function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bn(e,t)}function gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn(e);if(t){var o=wn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _n(this,n)}}function _n(e,t){if(t&&("object"===hn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wn(e){return wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wn(e)}var En=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bn(e,t)}(i,e);var t,n,r,o=gn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={visible:!1},t}return t=i,(n=[{key:"hasGroupOwnerAbility",value:function(){var e=window.appData.group;return e&&e.abilities&&e.abilities.destroy}},{key:"hasOwnerAbility",value:function(){var e=this.props.user;return!d.a.isGroupOrPublication(e)||this.hasGroupOwnerAbility()}},{key:"getStorageKey",value:function(){var e=this.props.user;return"upload-exhaust-reminder/".concat(e.id)}},{key:"getRemainUpload",value:function(e){var t=e.attachment_size,n=e.image_size,r=e.video_size;return e.max_upload_size-t-n-r}},{key:"showUploadExhaust",value:function(){var e=window.appData,t=e.groupMemberInfo,n=void 0===t?{}:t,r=e.userMemberInfo,o=void 0===r?{}:r,a=this.props.user,i=d.a.isGroupOrPublication(a)?n.usage:o.usage;if(i){var c=this.getRemainUpload(i),u=this.getStorageKey(),l=+(Ot.default.get(u)||0);c>1*Math.pow(1024,3)?Ot.default.remove(u):c>0&&l||l>=2||this.setState({visible:!0})}}},{key:"componentDidMount",value:function(){this.showUploadExhaust()}},{key:"onClose",value:function(){var e=this.getStorageKey(),t=+(Ot.default.get(e)||0);Ot.default.set(e,t+1),this.setState({visible:!1})}},{key:"buyUpload",value:function(){Be.a.showMemberIntro(null,{isBuyUpload:!0})}},{key:"getOwners",value:function(){var e=window.appData.groupMemberInfo;return e&&e.groupOwners?a.a.createElement("span",{className:mn},e.groupOwners.map((function(t,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{href:t.login,target:"_blank"},t.name),n!==e.groupOwners.length-1&&a.a.createElement(a.a.Fragment,null,__("、")))}))):""}},{key:"getTitles",value:function(e,t,n){var r,o,a=this.getRemainUpload(t);return d.a.isGroupOrPublication(e)?a>0?(r=__("你的团队剩余上传流量不足 1GB"),o=n?__("你的团队“{name}”剩余上传流量不足 1GB。为了不影响功能使用，请及时购买流量。",{name:e.name}):__("为了不影响功能使用，请联系管理员{owners}及时购买流量。",{owners:this.getOwners()})):(r=__("你的团队上传流量已用完"),o=n?__("你的团队“{name}”上传流量已用完。为了不影响功能使用，请及时购买流量。",{name:e.name}):__("为了不影响功能使用，请联系管理员{owners}及时购买流量。",{owners:this.getOwners()})):a>0?(r=__("你的剩余上传流量不足 1GB"),o=__("你的剩余上传流量不足 1GB。为了不影响功能使用，请及时购买流量。",{name:e.name})):(r=__("你的上传流量已用完"),o=__("你的上传流量已用完。为了不影响功能使用，请及时购买流量。",{name:e.name})),{title:r,subTitle:o}}},{key:"render",value:function(){var e,t=this;if(window.h5||!this.state.visible)return null;var n=window.appData,r=n.locale,o=n.organization,i=n.isPublicCloud,c=n.groupMemberInfo,u=void 0===c?{}:c,l=n.userMemberInfo,s=void 0===l?{}:l;if(!i||o)return null;var f=this.props.user,p=d.a.isGroupOrPublication(f),m=p?u.usage:s.usage;if(!m)return null;var h=this.hasOwnerAbility(),y="en-us"===r,v=this.getTitles(f,m,h),b=v.title,g=v.subTitle;return a.a.createElement("div",{className:p?"layout-container":null,"data-testid":"upload-exhaust-reminder"},a.a.createElement(bt.a,{"data-testid":"expire-reminder",className:an,extra:a.a.createElement("span",{className:"larkicon larkicon-close",onClick:function(){return t.onClose()}})},a.a.createElement("div",{className:Et()((e={},yn(e,un,!0),yn(e,cn,y),e))},a.a.createElement(gt.a,{className:sn}),a.a.createElement("h2",null,b),a.a.createElement("p",{className:ln},g),h&&a.a.createElement(D.a,{className:fn},a.a.createElement(M.a,{type:"primary",onClick:function(){return t.buyUpload()}},__("购买流量"))),a.a.createElement("div",{className:h?dn:pn},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ojF7RpGFUJUAAAAAAAAAAABkARQnAQ"})))))}}])&&vn(t.prototype,n),r&&vn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);En.propTypes={user:c.a.object};var On=En,xn=(n(128),n(78)),jn=(n(60),n(24)),kn=n(186),Sn=n(1014),Cn=(n(79),n(44)),Nn="index-module_successModalContainer_-aK4t",Pn="index-module_successModalInfoCon_7ecQr",Tn="index-module_successModalInfoTitle_ByhnY",An="index-module_successModalSubTitle_kd51r",Ln="index-module_successModalItem_+QbaR",In="index-module_successModalBlank_KXceZ",Rn=function(e){var t=e.user,n=e.order,r=e.visible,o=e.onClose,i=n.order_id,c=n.order_type,u=n.amount,s=n.duration,f=n.upload_size,p=n.updated_at,m=n.buyer,h=c===_t.ORDER_TYPE.data,y=c===_t.ORDER_TYPE.renew,v=d.a.isGroupOrPublication(t),b=v?ae.MEMBER_GROUP_FULL_AMOUNT:ae.MEMBER_USER_FULL_AMOUNT,g="en-us"===window.appData.locale?" ":"";return a.a.createElement(Cn.a,{className:"order-detail-modal",title:"订单详情",visible:r,onCancel:o,closable:!0,maskClosable:!1,footer:null,centered:!0,width:656},a.a.createElement("div",{className:Nn,"data-testid":"success-modal"},a.a.createElement("div",{className:Pn},h?a.a.createElement("h1",{className:Tn},__("购买语雀上传流量")):a.a.createElement("h1",{className:Tn},v&&__("团队"),g,y?__("续费"):__("升级"),g,v?__("高级版"):__("语雀会员")),a.a.createElement("p",{className:In}),a.a.createElement("p",{className:An},__("订单信息")),a.a.createElement("p",{className:Ln},oe()(v?__("团队"):__("帐号")),"：",t.name),a.a.createElement("p",{className:Ln},__("订单号"),"：",i),h?a.a.createElement("p",{className:Ln,"data-testid":"order-desc"},__("上传流量"),"：",Object(Ue.getSizeValue)(f).value,Object(Ue.getSizeValue)(f).unit):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:Ln,"data-testid":"order-desc"},__("套餐"),"：",b," ",__("元/{text}/年",{text:v?__("团队"):__("人")})),a.a.createElement("p",{className:Ln},__("购买时长"),"：",s,__("年"))),a.a.createElement("p",{className:Ln},__("付款金额"),"：",u," ",__("元")),a.a.createElement("p",{className:Ln,"data-testid":"buyer"},__("付款人"),"：",m&&m.name),a.a.createElement("p",{className:Ln},__("付款时间"),"：",p&&l()(p).format("YYYY-MM-DD HH:mm:ss")))))};Rn.propTypes={user:c.a.object.isRequired,order:c.a.object.isRequired,visible:c.a.bool.isRequired,onClose:c.a.func.isRequired};var Dn=Rn,Mn="orderReceipt-module_table_ulliM",Fn="orderReceipt-module_tableHeader_FQ+zb",Bn="orderReceipt-module_content_wbMym",Un="orderReceipt-module_amount_tDmhL",zn="orderReceipt-module_user_TgHTF",Gn="orderReceipt-module_timer_WuSe8",Vn="orderReceipt-module_actions_tViEs";function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $n(e){var t=e.user,n=Wn(Object(o.useState)([]),2),r=n[0],i=n[1],c=Wn(Object(o.useState)(0),2),u=c[0],l=c[1],s=Wn(Object(o.useState)(1),2),f=s[0],p=s[1],m=Wn(Object(o.useState)(null),2),h=m[0],y=m[1],v=Wn(Object(o.useState)(null),2),b=v[0],g=v[1];if(Object(o.useEffect)((function(){xt.a.userOrders.find({id:t.id,offset:50*(f-1),limit:50},{useOriginResp:!0}).then((function(e){i(e.data),l(e.meta.total)}))}),[f,t.id]),d.a.isGroupOrPublication(t)&&!r.length)return null;var _=[{title:__("订单号"),dataIndex:"order_id",width:200},{title:__("内容"),dataIndex:"order_type",width:200,className:Bn,render:function(e,n){return a.a.createElement("a",{onClick:function(){return g(n)},"data-testid":"order-content"},function(e,n){var r=n.duration,o=n.upload_size,a=d.a.isGroupOrPublication(t)?__("高级版"):__("会员");switch(e){case _t.ORDER_TYPE.buy:return __("升级{subject}，时长 {duration}年",{subject:a,duration:r});case _t.ORDER_TYPE.renew:return __("续费{subject}，时长 {duration}年",{subject:a,duration:r});case _t.ORDER_TYPE.data:return __("购买上传流量，{upload_size}{unit}",{upload_size:Object(Ue.getSizeValue)(o).value,unit:Object(Ue.getSizeValue)(o).unit});default:return __("升级{subject}，时长 1年",{subject:a})}}(e,n))}},{title:__("支付时间"),dataIndex:"updated_at",width:120,className:Gn,render:function(e){return a.a.createElement(kn.a,{time:e})}},{title:__("支付金额"),dataIndex:"amount",width:120,className:Un,render:function(e){return __("{amount} 元",{amount:parseFloat(e)})}},{title:__("操作"),dataIndex:"receipt",width:120,key:"actions",className:Vn,render:function(e,t,n){return t.receipt?__("已申请发票"):a.a.createElement(M.a,{type:"link",onClick:function(){y(t)}},__("申请发票"))}}],w=r.length<u&&{pageSize:50,current:f,total:u,onChange:function(e){p(e)}};return a.a.createElement(a.a.Fragment,null,a.a.createElement(xn.a,{rowKey:"id",className:Mn,columns:_,dataSource:r,pagination:w,title:function(){return a.a.createElement("span",{className:Fn},__("支付历史"))}}),h&&a.a.createElement(Sn.a,{visible:!0,onClose:function(){return y(null)},onConfirm:function(e,n){(0,e.form.validateFields)((function(e,o){e||xt.a.userReceipts.create(qn(qn({},o),{},{type:ae.RECEIPT_TYPES[n||"normal"],order_id:h.order_id,id:t.id})).then((function(e){i(r.map((function(t){return t.order_id===e.order_id&&(t.receipt=e),t}))),y(null),jn.a.success(__("已成功提交发票申请"))}))}))},receipt:h.receipt,submited:!!h.receipt}),b&&a.a.createElement(Dn,{visible:!0,user:t,order:b,onClose:function(){return g(null)}}))}$n.propTypes={user:c.a.object};var Qn=$n;function Xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zn(e){var t=e.user,n=Xn(Object(o.useState)([]),2),r=n[0],i=n[1],c=Xn(Object(o.useState)(0),2),u=c[0],l=c[1],s=Xn(Object(o.useState)(1),2),f=s[0],p=s[1],m=Xn(Object(o.useState)(null),2),h=m[0],y=m[1];if(Object(o.useEffect)((function(){xt.a.userReceipts.find({id:t.id,offset:50*(f-1),limit:50},{useOriginResp:!0}).then((function(e){i(e.data),l(e.meta.total)}))}),[f,t.id]),d.a.isGroupOrPublication(t)&&!r.length)return null;var v=[{title:__("发票类型"),dataIndex:"type",render:function(e,t,n){return e===ae.RECEIPT_TYPES.normal?__("普通电子发票"):__("专用发票")}},{title:__("申请人"),dataIndex:"contact_name",className:zn},{title:__("申请时间"),dataIndex:"created_at",className:Gn,render:function(e){return a.a.createElement(kn.a,{time:e})}},{title:__("操作"),key:"actions",className:Vn,render:function(e,t){return a.a.createElement(M.a,{type:"link",onClick:function(){return y(t)}},__("查看发票信息"))}}],b=r.length<u&&{paegSize:50,current:f,total:u,onChange:function(e){p(e)}};return a.a.createElement(a.a.Fragment,null,a.a.createElement(xn.a,{rowKey:"id",className:Mn,columns:v,dataSource:r,pagination:b,title:function(){return a.a.createElement("span",{className:Fn},__("发票管理"))}}),h&&a.a.createElement(Sn.a,{visible:!0,onClose:function(){return y(null)},receipt:h,submited:h}))}Zn.propTypes={user:c.a.object};var er=Zn;t.a={Badge:R,BadgeLite:yt.a,BadgeIcon:vt.a,Board:te,LevelSelector:ge,CollabTip:Ne,DocCollaboratorTip:Fe,Message:Be.a,PayFlow:m.a,PaidReminder:rt,GroupIntro:ht,ExpireReminder:Rt,OrganizationUsage:en,GroupUsage:nn,UserUsage:on,UploadExhaustReminder:On,Orders:Qn,Receipts:er}},,function(e,t,n){"use strict";var r=n(294);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width,o=t.height,a=t.fill,i=t.format,c=t.quality;if(e){if(e.startsWith("/r/avatar_buc/"))return e;if(e.startsWith("/__workers/r/avatar_buc/"))return e;if(e.includes(".svg"))return e;if(!e.includes(window.location.host)&&r.YUQUE_IMAGE_HOSTS.every((function(t){return!e.includes(t)})))return e;try{var u=new URL(e),l=u.searchParams,s=u.pathname,f=function(e,t){l.get("x-oss-process")?l.set("x-oss-process","".concat(l.get("x-oss-process"),"/").concat(e,",").concat(t)):l.append("x-oss-process","image/".concat(e,",").concat(t))};if(s.endsWith(".gif")&&(n||o)&&!i&&(i="jpeg",c="Q_85"),n||o){var d=[];a&&d.push("m_fill"),n&&d.push("w_".concat(n)),o&&d.push("h_".concat(o)),f("resize",d.join(","))}return i&&f("format",i),c&&f("quality",c),u.toString()}catch(p){return e}}}},,,,,,,,,,,function(e,t,n){var r=n(2141),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},,,,,function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return g}));var r=n(18),o=n(278),a=n(40),i=n(41),c=n(11),u=n(85),l=n(568);function s(e,t){var n,r=e.key;return"value"in e&&(n=e.value),null!=r?r:void 0!==n?n:"rc-index-key-".concat(t)}function f(e){var t=[];return function e(n,r){n.forEach((function(n){r||!("options"in n)?t.push({key:s(n,t.length),groupOption:r,data:n}):(t.push({key:s(n,t.length),group:!0,data:n}),e(n.options,!0))}))}(e,!1),t}function d(e){var t=Object(c.a)({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Object(u.a)(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.prevValueOptions,o=void 0===r?[]:r,a=new Map;return t.forEach((function(e){if(!e.group){var t=e.data;a.set(t.value,t)}})),e.map((function(e){var t=a.get(e);return t||(t=Object(c.a)({},o.find((function(t){return t._INTERNAL_OPTION_VALUE_===e})))),d(t)}))}var m=function(e,t){var n=t.options,r=t.prevValueMap,o=t.labelInValue,a=t.optionLabelProp,c=p([e],n)[0],l={value:e},s=o?r.get(e):void 0;return s&&"object"===Object(i.a)(s)&&"label"in s?(l.label=s.label,c&&"string"==typeof s.label&&"string"==typeof c[a]&&s.label.trim()!==c[a].trim()&&Object(u.a)(!1,"`label` of `value` is not same as `label` in Select options.")):c&&a in c?l.label=c[a]:(l.label=e,l.isCacheable=!0),l.key=l.value,l};function h(e){return Object(l.d)(e).join("")}function y(e,t,n){var r,o=n.optionFilterProp,i=n.filterOption,u=[];return!1===i?Object(a.a)(t):(r="function"==typeof i?i:function(e){return function(t,n){var r=t.toLowerCase();return"options"in n?h(n.label).toLowerCase().includes(r):h(n[e]).toLowerCase().includes(r)}}(o),t.forEach((function(t){if("options"in t)if(r(e,t))u.push(t);else{var n=t.options.filter((function(t){return r(e,t)}));n.length&&u.push(Object(c.a)(Object(c.a)({},t),{},{options:n}))}else r(e,d(t))&&u.push(t)})),u)}function v(e,t){if(!t||!t.length)return null;var n=!1;var r=function e(t,r){var i=Object(o.a)(r),c=i[0],u=i.slice(1);if(!c)return[t];var l=t.split(c);return n=n||l.length>1,l.reduce((function(t,n){return[].concat(Object(a.a)(t),Object(a.a)(e(n,u)))}),[]).filter((function(e){return e}))}(e,t);return n?r:null}function b(e,t){return p([e],t)[0].disabled}function g(e,t,n,o){var i=Object(l.d)(t).slice().sort(),c=Object(a.a)(e),u=new Set;return e.forEach((function(e){e.options?e.options.forEach((function(e){u.add(e.value)})):u.add(e.value)})),i.forEach((function(e){var t,a=o?e.value:e;u.has(a)||c.push(o?(t={},Object(r.a)(t,n,e.label),Object(r.a)(t,"value",a),t):{value:a})})),c}},function(e,t,n){"use strict";t.a={moodSelectorItem:"index-module_moodSelectorItem_Aw0jI",moodSelectorItemSelected:"index-module_moodSelectorItemSelected_LaPcI",itemContainer:"index-module_itemContainer_NzWug",mood:"index-module_mood_5mtvc",moodIcon:"index-module_moodIcon_E4eVh",small:"index-module_small_F0G9H",mini:"index-module_mini_sXIs1",moodTitle:"index-module_moodTitle_Oturj","mood-1":"index-module_mood-1_BeRPn","mood-2":"index-module_mood-2_bu1dM","mood-3":"index-module_mood-3_kIZsL","mood-4":"index-module_mood-4_gVC+i","mood-5":"index-module_mood-5_kTiYD",container:"index-module_container_IgPu3"}},,,function(e,t,n){"use strict";n(245);var r=n(64),o=(n(133),n(31)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(370),s=n(38),f=n(167),d={menuItem:"index-module_menuItem_tFAf0",trigger:"index-module_trigger_Tv1qS",permission:"index-module_permission_CP8ZH",permissionIcon:"index-module_permissionIcon_IY0Ga",permissionContent:"index-module_permissionContent_PA99A",permissionLabel:"index-module_permissionLabel_OuX94",permissionInfo:"index-module_permissionInfo_cfIWr",triggerIcon:"index-module_triggerIcon_dAp+G",triggerLarkIcon:"index-module_triggerLarkIcon_oqtxp",dropdown:"index-module_dropdown_cnMjL",disabled:"index-module_disabled_PyHjO",securityTip:"index-module_securityTip_MWiA3",highlight:"index-module_highlight_s-Pqa"};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,a,c=y(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),_(b(t=c.call(this,e)),"onChangePermission",(function(e){t.setState({value:e,visible:!1}),t.props.onChangePermission(e)})),_(b(t),"getPermissionTip",(function(e){var n=e.value,r=t.props,o=r.isUser,a=r.isPublication,i=r.type,c=r.enableChangeToCommunity,u=r.isPublicCloud,l=r.isYuque;return!c||1!==n||o||a?Object(f.d)(n,{isUser:o,isPublication:a,type:i},{isPublicCloud:u,isYuque:l}):t.transferPermission.desc})),_(b(t),"getPermissionLabel",(function(e){var n=e.label,r=e.value,o=t.props,a=o.isUser,i=o.isPublication;return!o.enableChangeToCommunity||1!==r||a||i?"function"==typeof n?n(a,i):n:t.transferPermission.label})),_(b(t),"onVisibleChange",(function(e){t.setState({visible:e})})),t.state={value:e.defaultValue||0,visible:!1},t.transferPermission={label:__("升级为知识小组"),desc:__("对互联网可见")},t}return t=u,(n=[{key:"renderAliSecurityTip",value:function(){var e=window.appData.locale;return i.a.createElement("div",{className:d.securityTip,"data-testid":"ali-security-tip"},"zh-cn"===e?i.a.createElement("p",null,"如涉及到公司敏感信息（包括L3、L4及部分L2级信息），请设置为内网私密。包括但不限于：",i.a.createElement("span",{className:d.highlight},"密码口令私钥，个人隐私信息，客户数据、业务及运营数据、保密项目数据等不适合在公司内部公开的数据。")):i.a.createElement("p",null,"If your document invovling sensitive information (including L3, L4 and some L2 information), please set knowledge base as privacy. Included but not limited to:",i.a.createElement("span",{className:d.highlight},"password, private key, personal privacy, customer data, business and operational data, confidential project data, and anything not suitable for disclosure within the company.")))}},{key:"render",value:function(){var e=this,t=this.state.value,n=this.props.permissions,a=n.find((function(e){return e.value===t}));a||(a=n[0]);var c=n.filter((function(e){return!e.disabled||e.disabled&&e.value===a.value}));return 1===c.length?i.a.createElement("div",{className:"".concat(d.disabled," ").concat(this.props.className),"data-testid":"permission-selector"},i.a.createElement("div",{className:d.permission},i.a.createElement("div",{className:d.permissionIcon},i.a.createElement(s.b,{name:c[0].icon,width:20})),i.a.createElement("div",{className:d.permissionContent},i.a.createElement("h6",{className:d.permissionLabel},this.getPermissionLabel({label:c[0].label})),i.a.createElement("p",{className:d.permissionDesc},this.getPermissionTip({value:t}))))):i.a.createElement("div",{"data-role":"permission-selector",className:this.props.className,"data-testid":"permission-selector"},i.a.createElement(r.a,{trigger:["click"],overlayClassName:d.dropdown,visible:this.state.visible,onVisibleChange:this.onVisibleChange,getPopupContainer:function(e){return e.parentNode},overlay:i.a.createElement(o.a,{selectedKeys:["".concat(a.value)]},c.map((function(t){var n=i.a.createElement("div",{className:d.menuItem},i.a.createElement("div",{className:d.permission},i.a.createElement("div",{className:d.permissionIcon},i.a.createElement(s.b,{name:t.icon,width:20})),i.a.createElement("div",{className:d.permissionContent},i.a.createElement("h6",{className:d.permissionLabel},e.getPermissionLabel(t)),i.a.createElement("p",{className:d.permissionDesc},e.getPermissionTip(t)))),t.value===a.value&&i.a.createElement("span",{className:d.menuItemChecked},i.a.createElement(l.a,null)));return i.a.createElement(o.a.Item,{key:t.value,onClick:function(){e.onChangePermission(t.value)},disabled:t.disabled},n)})))},i.a.createElement("div",{className:d.trigger},i.a.createElement("div",{className:d.permission},i.a.createElement("div",{className:d.permissionIcon},i.a.createElement(s.b,{name:a.icon,width:20})),i.a.createElement("div",{className:d.permissionContent},i.a.createElement("h6",{className:d.permissionLabel},this.getPermissionLabel(a)),i.a.createElement("p",{className:d.permissionDesc},this.getPermissionTip(a)))),i.a.createElement("span",{className:d.triggerIcon},i.a.createElement(s.b,{name:"icon-down",width:14,className:d.triggerLarkIcon})))),this.props.withAliSecurityTip&&0!==this.state.value&&4!==this.state.value&&this.renderAliSecurityTip())}}])&&m(t.prototype,n),a&&m(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(a.PureComponent);w.defaultProps={isPublicCloud:window.appData.isPublicCloud,isYuque:window.appData.isYuque},w.propTypes={className:u.a.string,defaultValue:u.a.number,isUser:u.a.bool,isPublication:u.a.bool,type:u.a.oneOf(["organization","group","book","doc"]),items:u.a.array,permissions:u.a.array.isRequired,onChangePermission:u.a.func.isRequired,withAliSecurityTip:u.a.bool,enableChangeToCommunity:u.a.bool,isPublicCloud:u.a.bool,isYuque:u.a.bool};t.a=w},function(e,t,n){"use strict";var r=n(2037);t.a=r.a},function(e,t,n){"use strict";var r=n(28),o=n(0),a=n(405);t.a=function(){var e=Object(o.useState)({}),t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(o.useEffect)((function(){var e=a.a.subscribe((function(e){i(e)}));return function(){return a.a.unsubscribe(e)}}),[]),n}},function(e,t,n){"use strict";t.a=function(e){if(!e)return!1;if(e instanceof HTMLElement&&e.offsetParent)return!0;if(e instanceof SVGGraphicsElement&&e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e instanceof HTMLElement&&e.getBoundingClientRect){var o=e.getBoundingClientRect(),a=o.width,i=o.height;if(a||i)return!0}return!1}},function(e,t,n){"use strict";e.exports={TARGET_TYPE:{USER:"User",BOOK:"Book",ORGANIZATION:"Organization"},TEMPLATE_TYPE_MAP:{BOOK:"book",OFFICIAL:"official",GROUP:"group",PERSONAL:"personal"},SCENE:{TEMPLATE:"template",MATERIAL:"material"},TYPE:{BOOK:0,OFFICIAL:1,GROUP:2,PERSONAL:3},FORMAT:{LAKE:"lake",LAKESHEET:"lakesheet",LAKEMIND:"lakemind",LAKEBOARD:"lakeboard",LAKESHOW:"lakeshow",LAKETABLE:"laketable"},FORMAT_TYPE_MAP:{lake:"Doc",lakesheet:"Sheet",lakemind:"Mind",lakeboard:"Board",lakeshow:"Show",laketable:"Table"},TYPE_FORMAT_MAP:{Doc:"lake",Sheet:"lakesheet",Mind:"lakemind",Board:"lakeboard",Show:"lakeshow",Table:"laketable"},DOCUMENT_TYPE:{DOC:"Doc",MIND:"Mind",BOARD:"Board",SHEET:"Sheet",SHOW:"Show",TABLE:"Table"},INIT_USER_BOOK:"templates/init_user",INIT_MOBILE_USER_BOOK:"templates/init_mobile_user",INIT_ORGANIZATION_USER_BOOK:"templates/init_organization_user",SUPPORT_PLATFORM:{PC:"pc",DESKTOP:"desktop"},OFFICIAL_TEMPLATE_CHANNEL:{TEMPLATE_CENTER_CONFIG:"template_center_config",TEMPLATE_GUIDE_4_DOC_CREATION:"template_guide_doc_creation",TEMPLATE_GUIDE_4_BOARD_CREATION:"template_guide_board_creation",TEMPLATE_GUIDE_4_TABLE_CREATION:"template_guide_table_creation",TEMPLATE_GUIDE_4_SHEET_CREATION:"template_guide_sheet_creation",MATERIAL_LIB_BOARD_CONFIG:"material_lib_board_config"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));function r(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}function o(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{left:t.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(40),o=n(14),a=n(18),i=n(28),c=n(41),u=n(0),l=n(10),s=n.n(l),f=n(248),d=n(615),p=n(405),m=n(257),h=n(552),y=n(2037),v=n(1215),b=n(118),g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e){var t,n=e.prefixCls,r=e.children,i=e.actions,c=e.extra,l=e.className,f=e.colStyle,d=g(e,["prefixCls","children","actions","extra","className","colStyle"]),p=u.useContext(O),h=p.grid,y=p.itemLayout,_=u.useContext(m.b).getPrefixCls,w=_("list",n),E=i&&i.length>0&&u.createElement("ul",{className:"".concat(w,"-item-action"),key:"actions"},i.map((function(e,t){return u.createElement("li",{key:"".concat(w,"-item-action-").concat(t)},e,t!==i.length-1&&u.createElement("em",{className:"".concat(w,"-item-action-split")}))}))),x=h?"div":"li",j=u.createElement(x,Object(o.default)({},d,{className:s()("".concat(w,"-item"),Object(a.a)({},"".concat(w,"-item-no-flex"),!("vertical"===y?c:(u.Children.forEach(r,(function(e){"string"==typeof e&&(t=!0)})),!(t&&u.Children.count(r)>1)))),l)}),"vertical"===y&&c?[u.createElement("div",{className:"".concat(w,"-item-main"),key:"content"},r,E),u.createElement("div",{className:"".concat(w,"-item-extra"),key:"extra"},c)]:[r,E,Object(b.a)(c,{key:"extra"})]);return h?u.createElement(v.a,{flex:1,style:f},j):j};_.Meta=function(e){var t=e.prefixCls,n=e.className,r=e.avatar,a=e.title,i=e.description,c=g(e,["prefixCls","className","avatar","title","description"]),l=(0,u.useContext(m.b).getPrefixCls)("list",t),f=s()("".concat(l,"-item-meta"),n),d=u.createElement("div",{className:"".concat(l,"-item-meta-content")},a&&u.createElement("h4",{className:"".concat(l,"-item-meta-title")},a),i&&u.createElement("div",{className:"".concat(l,"-item-meta-description")},i));return u.createElement("div",Object(o.default)({},c,{className:f}),r&&u.createElement("div",{className:"".concat(l,"-item-meta-avatar")},r),(a||i)&&d)};var w=_,E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},O=u.createContext({});O.Consumer;function x(e){var t,n=e.pagination,l=void 0!==n&&n,v=e.prefixCls,b=e.bordered,g=void 0!==b&&b,_=e.split,w=void 0===_||_,x=e.className,j=e.children,k=e.itemLayout,S=e.loadMore,C=e.grid,N=e.dataSource,P=void 0===N?[]:N,T=e.size,A=e.header,L=e.footer,I=e.loading,R=void 0!==I&&I,D=e.rowKey,M=e.renderItem,F=e.locale,B=E(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),U=l&&"object"===Object(c.a)(l)?l:{},z=u.useState(U.defaultCurrent||1),G=Object(i.a)(z,2),V=G[0],Y=G[1],q=u.useState(U.defaultPageSize||10),H=Object(i.a)(q,2),W=H[0],K=H[1],$=u.useContext(m.b),Q=$.getPrefixCls,X=$.renderEmpty,J=$.direction,Z={},ee=function(e){return function(t,n){Y(t),K(n),l&&l[e]&&l[e](t,n)}},te=ee("onChange"),ne=ee("onShowSizeChange"),re=Q("list",v),oe=R;"boolean"==typeof oe&&(oe={spinning:oe});var ae=oe&&oe.spinning,ie="";switch(T){case"large":ie="lg";break;case"small":ie="sm"}var ce=s()(re,(t={},Object(a.a)(t,"".concat(re,"-vertical"),"vertical"===k),Object(a.a)(t,"".concat(re,"-").concat(ie),ie),Object(a.a)(t,"".concat(re,"-split"),w),Object(a.a)(t,"".concat(re,"-bordered"),g),Object(a.a)(t,"".concat(re,"-loading"),ae),Object(a.a)(t,"".concat(re,"-grid"),!!C),Object(a.a)(t,"".concat(re,"-something-after-last-item"),!!(S||l||L)),Object(a.a)(t,"".concat(re,"-rtl"),"rtl"===J),t),x),ue=Object(o.default)(Object(o.default)(Object(o.default)({},{current:1,total:0}),{total:P.length,current:V,pageSize:W}),l||{}),le=Math.ceil(ue.total/ue.pageSize);ue.current>le&&(ue.current=le);var se=l?u.createElement("div",{className:"".concat(re,"-pagination")},u.createElement(h.a,Object(o.default)({},ue,{onChange:te,onShowSizeChange:ne}))):null,fe=Object(r.a)(P);l&&P.length>(ue.current-1)*ue.pageSize&&(fe=Object(r.a)(P).splice((ue.current-1)*ue.pageSize,ue.pageSize));var de=Object(d.a)(),pe=u.useMemo((function(){for(var e=0;e<p.b.length;e+=1){var t=p.b[e];if(de[t])return t}}),[de]),me=u.useMemo((function(){if(C){var e=pe&&C[pe]?C[pe]:C.column;return e?{width:"".concat(100/e,"%"),maxWidth:"".concat(100/e,"%")}:void 0}}),[null==C?void 0:C.column,pe]),he=ae&&u.createElement("div",{style:{minHeight:53}});if(fe.length>0){var ye=fe.map((function(e,t){return function(e,t){return M?((n="function"==typeof D?D(e):"string"==typeof D?e[D]:e.key)||(n="list-item-".concat(t)),Z[t]=n,M(e,t)):null;var n}(e,t)})),ve=u.Children.map(ye,(function(e,t){return u.createElement("div",{key:Z[t],style:me},e)}));he=C?u.createElement(y.a,{gutter:C.gutter},ve):u.createElement("ul",{className:"".concat(re,"-items")},ye)}else j||ae||(he=function(e,t){return u.createElement("div",{className:"".concat(e,"-empty-text")},F&&F.emptyText||t("List"))}(re,X));var be=ue.position||"bottom";return u.createElement(O.Provider,{value:{grid:C,itemLayout:k}},u.createElement("div",Object(o.default)({className:ce},B),("top"===be||"both"===be)&&se,A&&u.createElement("div",{className:"".concat(re,"-header")},A),u.createElement(f.a,oe,he,j),L&&u.createElement("div",{className:"".concat(re,"-footer")},L),S||("bottom"===be||"both"===be)&&se))}x.Item=w;t.b=x},,,,,function(e,t,n){"use strict";var r=n(14),o=n(18),a=(n(15),n(0)),i=n(1361),c=n(261),u=n(10),l=n.n(u),s=n(499),f=n(541),d=n(500),p=n(540),m=n(28),h=n(1017),y=n(257);var v,b,g=n(82),_={},w=4.5,E=24,O=24,x="",j="topRight",k=!1;function S(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;switch(e){case"topLeft":t={left:0,top:n,bottom:"auto"};break;case"topRight":t={right:0,top:n,bottom:"auto"};break;case"bottomLeft":t={left:0,top:"auto",bottom:r};break;default:t={right:0,top:"auto",bottom:r}}return t}function C(e,t){var n=e.placement,r=void 0===n?j:n,u=e.top,s=e.bottom,f=e.getContainer,d=void 0===f?v:f,p=e.closeIcon,m=void 0===p?b:p,h=e.prefixCls,y=(0,Object(g.c)().getPrefixCls)("notification",h||x),w="".concat(y,"-").concat(r),E=_[w];if(E)Promise.resolve(E).then((function(e){t({prefixCls:"".concat(y,"-notice"),instance:e})}));else{var O=a.createElement("span",{className:"".concat(y,"-close-x")},m||a.createElement(c.a,{className:"".concat(y,"-close-icon")})),C=l()("".concat(y,"-").concat(r),Object(o.a)({},"".concat(y,"-rtl"),!0===k));_[w]=new Promise((function(e){i.a.newInstance({prefixCls:y,className:C,style:S(r,u,s),getContainer:d,closeIcon:O},(function(n){e(n),t({prefixCls:"".concat(y,"-notice"),instance:n})}))}))}}var N={success:s.a,info:p.a,error:f.a,warning:d.a};function P(e,t){var n=e.duration,r=e.icon,i=e.type,c=e.description,u=e.message,s=e.btn,f=e.onClose,d=e.onClick,p=e.key,m=e.style,h=e.className,y=void 0===n?w:n,v=null;r?v=a.createElement("span",{className:"".concat(t,"-icon")},e.icon):i&&(v=a.createElement(N[i]||null,{className:"".concat(t,"-icon ").concat(t,"-icon-").concat(i)}));var b=!c&&v?a.createElement("span",{className:"".concat(t,"-message-single-line-auto-margin")}):null;return{content:a.createElement("div",{className:v?"".concat(t,"-with-icon"):"",role:"alert"},v,a.createElement("div",{className:"".concat(t,"-message")},b,u),a.createElement("div",{className:"".concat(t,"-description")},c),s?a.createElement("span",{className:"".concat(t,"-btn")},s):null),duration:y,closable:!0,onClose:f,onClick:d,key:p,style:m||{},className:l()(h,Object(o.a)({},"".concat(t,"-").concat(i),!!i))}}var T,A,L={open:function(e){C(e,(function(t){var n=t.prefixCls;t.instance.notice(P(e,n))}))},close:function(e){Object.keys(_).forEach((function(t){return Promise.resolve(_[t]).then((function(t){t.removeNotice(e)}))}))},config:function(e){var t=e.duration,n=e.placement,r=e.bottom,o=e.top,a=e.getContainer,i=e.closeIcon,c=e.prefixCls;void 0!==c&&(x=c),void 0!==t&&(w=t),void 0!==n?j=n:e.rtl&&(j="topLeft"),void 0!==r&&(O=r),void 0!==o&&(E=o),void 0!==a&&(v=a),void 0!==i&&(b=i),void 0!==e.rtl&&(k=e.rtl)},destroy:function(){Object.keys(_).forEach((function(e){Promise.resolve(_[e]).then((function(e){e.destroy()})),delete _[e]}))}};["success","info","warning","error"].forEach((function(e){L[e]=function(t){return L.open(Object(r.default)(Object(r.default)({},t),{type:e}))}})),L.warn=L.warning,L.useNotification=(T=C,A=P,function(){var e,t=null,n={add:function(e,n){null==t||t.component.add(e,n)}},o=Object(h.a)(n),i=Object(m.a)(o,2),c=i[0],u=i[1],l=a.useRef({});return l.current.open=function(n){var o=n.prefixCls,a=e("notification",o);T(Object(r.default)(Object(r.default)({},n),{prefixCls:a}),(function(e){var r=e.prefixCls,o=e.instance;t=o,c(A(n,r))}))},["success","info","warning","error"].forEach((function(e){l.current[e]=function(t){return l.current.open(Object(r.default)(Object(r.default)({},t),{type:e}))}})),[l.current,a.createElement(y.a,{key:"holder"},(function(t){return e=t.getPrefixCls,u}))]});t.a=L},function(e,t,n){"use strict";n(162)},function(e,t,n){var r=n(1998),o=n(454),a=n(842),i=Math.max,c=Math.min;e.exports=function(e,t,n){var u=null==e?0:e.length;if(!u)return-1;var l=u-1;return void 0!==n&&(l=a(n),l=n<0?i(u+l,0):c(l,u-1)),r(e,o(t,3),l,!0)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c}));var r=n(142),o=n.n(r);function a(e){var t=e.lastIndexOf(".");return t>=0?e.substring(t).toLowerCase():""}function i(){if(window.appData&&window.appData.locale)return window.appData.locale;var e="zh-cn",t=new URLSearchParams(window.location.search).get("language");if(t)return e="en-us"===t||"en"===t?"en-us":"zh-cn";var n=o.a.get("lang"),r=navigator.userAgent.match(/Language\/(\w)+/);return r=r?r[1].toLowerCase():navigator.language?navigator.language.toLowerCase():"",n?e="en-us"===n?"en-us":"zh-cn":r&&(e="en-us"===r||"en"===r?"en-us":"zh-cn"),e}function c(){var e=window.appData,t=e.isYuque,n=e.defaultSpaceHost;return!(t&&"/enterprise"===window.location.pathname&&window.location.origin===n)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return b}));var r=n(0),o=n.n(r),a=n(39),i=n.n(a),c=n(1220);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=o.a.createRef(),this.container=r,r instanceof HTMLElement?this.node=this.renderByDom(t,n):this.node=this.renderByNode(t,n)}var t,n,r;return t=e,r=[{key:"render",value:function(t,n,r){return new e(t,n,r)}}],(n=[{key:"renderByDom",value:function(e,t){var n=this;i.a.render(o.a.createElement(c.a,{component:e,props:t,ref:function(e){n.ref=e}}),this.container)}},{key:"renderByNode",value:function(e,t){var n=this;return o.a.createElement(c.a,{component:e,props:t,ref:function(e){n.ref=e}})}},{key:"update",value:function(e){if(!this.ref)return null;this.ref.update(e)}},{key:"dispose",value:function(){i.a.unmountComponentAtNode(this.container)}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function y(e,t){var n=document.createElement("div");return document.body.appendChild(n),l.render(e,t,n)}function v(e,t){var n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(c,e);var n,r,a,i=p(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this)).ref=o.a.createRef(),e}return n=c,(r=[{key:"componentDidMount",value:function(){t(this.ref)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{ref:function(t){e.ref=t}},this.props.children)}}])&&f(n.prototype,r),a&&f(n,a),Object.defineProperty(n,"prototype",{writable:!1}),c}(o.a.Component);return o.a.createElement(n,null,e)}function b(e,t,n){var r=l.render(e,t);return v(r.node,(function(){n(r)}))}},function(e,t,n){n.p=window.resourceBaseUrl||window.publicPath},,function(e,t,n){"use strict";n(133);var r=n(31),o=n(0),a=n.n(o),i=n(39),c=n.n(i),u=n(2),l=n.n(u),s=n(10),f=n.n(s),d=n(88),p=n(370),m=n(389),h=n(254),y=n(2251),v=n(358),b=n(17),g=n(561),_=n(260),w=n(127),E=n(1356),O=n(1357),x=n(1336),j=n(38),k=n(560),S=n(1158);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(u,e);var t,n,o,i=T(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),R(L(t=i.call(this,e)),"toggleUserMenu",(function(){var e=t.state.showUserMenu;t.setState({showUserMenu:!e,showNewMenu:!1,switchOrgView:!1},(function(){var e=document.body.style;if(t.state.showUserMenu){e.overflow="hidden",e.position="fixed";var n=t.userMenu.current;n&&(t.timer&&clearTimeout(t.timer),t.timer=setTimeout((function(){var e=50,t=document.body.querySelector(".m-header");if(t){var r=t.getBoundingClientRect();e=r.top+r.height}n.style.top="".concat(e,"px"),n.style.opacity=1}),0))}else e.overflow="",e.position=""}))})),R(L(t),"logout",(function(e){e.preventDefault(),(0,t.props.dispatch)({type:"me/loginOut"}).then((function(e){e.data&&Object(v.b)("/")}))})),R(L(t),"toggleSwitchOrg",(function(){t.setState((function(e){return{switchOrgView:!e.switchOrgView}}))})),R(L(t),"renderOrgNav",(function(){var e=window.appData,n=e.organizations,o=e.defaultSpaceHost,i=t.props.me;if(n){var c=n.map((function(e){return{host:e.host,icon:e.logo,name:e.name}})),u=function(e){var t=!1;return e.host===window.location.origin&&(t=!0),a.a.createElement(r.a.Item,{className:"org-nav-item",key:e.name},a.a.createElement("a",{href:e.host},a.a.createElement(w.a,{src:e.icon,size:32,name:i.name,radius:e.isSelf?32:2}),a.a.createElement("span",{className:"org-nav-text"},a.a.createElement("span",null,e.name)),t&&a.a.createElement("span",{className:"org-nav-check"},a.a.createElement(p.a,null))))};return a.a.createElement("div",{className:"header-nav-org-switch"},a.a.createElement("div",{className:"m-header header-nav-org-header"},a.a.createElement("a",{onClick:t.toggleSwitchOrg,className:"navi-left"},a.a.createElement(m.a,null)),a.a.createElement("span",{className:"page-title"},__("切换空间")),a.a.createElement("span",{className:"navi-right"})),a.a.createElement("div",{className:"header-nav-org-menu"},a.a.createElement("span",{className:"header-nav-org-menu-split"},__("个人")),a.a.createElement(r.a,null,u({host:o,icon:i.avatar_url,name:i.publicName||i.name,isSelf:!0})),a.a.createElement("span",{className:"header-nav-org-menu-split"},__("空间")),a.a.createElement(r.a,null,c.map((function(e){return u(e)})))))}return null})),R(L(t),"renderSiteNav",(function(){var e=t.props,n=e.organization,o=e.me,i=!(!n||!n.id),c=window.appData,u=c.canReadOrg,l=c.status,s=!1;i&&403===l&&null!=u&&(s=n&&!u);var f={"/explore/headlines":__("广场")};i||(f["https://www.yuque.com/about/help"]=__("帮助"));var d=b.a.DOC.goto_note,p=[""];return p="/"===window.location.pathname?["/"]:"/about/help"===window.location.pathname?["https://www.yuque.com/about/help"]:window.location.pathname===d.url?[d.url]:Object.keys(f).filter((function(e){return window.location.pathname.startsWith(e)})),a.a.createElement(r.a,{mode:"inline",selectedKeys:p,defaultOpenKeys:["/dashboard","org"]},!s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(r.a.Item,{key:"/dashboard"},a.a.createElement("a",{href:"/dashboard/recent"},__("工作台"))),Object.keys(f).map((function(e){return a.a.createElement(r.a.Item,{key:e},a.a.createElement("a",{href:e},f[e]))})),a.a.createElement(r.a.Item,{key:"index"},a.a.createElement("a",{href:"/".concat(t.props.me.login),title:o.name},__("个人主页")))),a.a.createElement(r.a.Item,{key:"org-switch",className:"header-nav-more"},a.a.createElement("a",{onClick:t.toggleSwitchOrg},__("切换空间"),a.a.createElement("div",{className:"header-nav-more-info"},null!=n&&n.id?a.a.createElement(a.a.Fragment,null,n.logo?a.a.createElement(_.a.Logo,{src:n.logo,size:32,className:"header-nav-more-info-avatar"}):a.a.createElement(j.b,{name:"icon-organization",width:32,height:32,radius:4,className:"header-nav-more-info-avatar"}),a.a.createElement(_.a.Name,{organization:n,className:"header-nav-more-info-name"})):a.a.createElement(a.a.Fragment,null,a.a.createElement(w.a,{src:o.avatar_url,size:32,name:o.name,radius:32,className:"header-nav-more-info-avatar"}),a.a.createElement("span",{className:"header-nav-more-info-name"},o.name)),a.a.createElement(h.a,null)))),window.appData.isYuque&&a.a.createElement(r.a.Item,{key:"logout"},a.a.createElement("a",{href:"#",onClick:t.logout},__("退出账号"))))})),R(L(t),"toggleNewMenu",(function(){t.setState((function(e){return{showNewMenu:!e.showNewMenu,showUserMenu:!1}}))})),t.state={showUserMenu:!1,showNewMenu:!1,showHistory:!1,switchOrgView:!1},t.userMenu=a.a.createRef(),t.timer=null,t}return t=u,(n=[{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"getContent",value:function(){var e=this.props.me;return this.state.showHistory?a.a.createElement("div",{style:{height:600}}):e.id?a.a.createElement(a.a.Fragment,null,this.renderSiteNav()):a.a.createElement(x.a,{mode:"vertical"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.me,o=t.space,i=t.title,u=t.group,l=window.appData,s=l.isAlipayWebApp,d=l.isAlipayApp,p=l.isDingTalkMiniApp,m=l.isYuqueMobileApp,h=l.organization,v=l.canReadOrg,_=u&&u.login&&u.abilities&&u.abilities.create_book?"/".concat(u.login,"/new"):"/new";if(s||p||m)return null;if(d&&/MiniProgram/i.test(window.navigator.userAgent))return null;var w=f()({"m-header":!0}),x=!1;return null!=v&&(x=h&&!v),a.a.createElement("div",{id:"header",className:w},a.a.createElement("div",{className:"navi-left"},a.a.createElement("div",{className:"btn-burger",onClick:this.toggleUserMenu},this.state.showUserMenu?a.a.createElement("span",{className:"m-larkicon m-larkicon-close"}):a.a.createElement("span",{className:"m-larkicon m-larkicon-toc"})),this.state.showUserMenu&&c.a.createPortal(a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"user-dropmenu-mask",onClick:this.toggleUserMenu}),a.a.createElement("div",{className:"user-dropmenu",ref:this.userMenu},a.a.createElement("div",{className:"search"},a.a.createElement(g.a,{theme:"grey",onHistroyChange:function(t){e.setState({showHistory:t})}})),this.getContent())),document.querySelector("#ReactApp")),this.state.switchOrgView&&a.a.createElement("div",null,this.renderOrgNav())),i?a.a.createElement("span",{className:"page-title"},i):a.a.createElement("div",{className:"m-header-logo"},a.a.createElement(k.a,{theme:"organization"})),n.id?a.a.createElement("div",{className:"navi-right"},!x&&a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,{trigger:"click"}),a.a.createElement("div",{className:"navi-new"},a.a.createElement("div",{className:"btn-new",onClick:this.toggleNewMenu},a.a.createElement(y.a,null)),this.state.showNewMenu&&c.a.createPortal(a.a.createElement("div",{className:"navi-new-menu-mask",onClick:this.toggleNewMenu}),document.querySelector("#ReactApp")),this.state.showNewMenu&&c.a.createPortal(a.a.createElement("div",{className:"navi-new-menu"},a.a.createElement("div",{className:"navi-new-menu-arrow"}),a.a.createElement(r.a,null,a.a.createElement(r.a.Item,{key:"create_doc"},a.a.createElement(S.a,{command:b.a.DOC.create_doc},a.a.createElement("a",{className:"menu-item-container"},a.a.createElement(j.b,{className:"iconContainer",name:b.a.DOC.create_doc.icon,width:16,height:16}),__("新建文档")))),a.a.createElement(r.a.Item,{key:"create_sheet"},a.a.createElement(S.a,{command:b.a.DOC.create_sheet},a.a.createElement("a",{className:"menu-item-container"},a.a.createElement(j.b,{className:"iconContainer",name:b.a.DOC.create_sheet.icon,width:16,height:16}),__("新建表格")))),a.a.createElement(r.a.Divider,null),a.a.createElement(r.a.Item,{key:"create_book"},a.a.createElement("a",{href:_},a.a.createElement("a",{className:"menu-item-container"},a.a.createElement(j.b,{className:"iconContainer",name:b.a.BOOK.create.icon,width:16,height:16}),__("新建知识库")))))),document.querySelector(".navi-new"))))):a.a.createElement("div",{className:"navi-right"},a.a.createElement("a",{href:"/login",className:"btn-login"},__("登录 / 注册"))),a.a.createElement(O.a,{dispatch:this.props.dispatch,me:n,space:o}))}}])&&N(t.prototype,n),o&&N(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.PureComponent);D.propTypes={title:l.a.node,group:l.a.object,dispatch:l.a.object,organization:l.a.object,me:l.a.object,space:l.a.object};t.a=Object(d.d)((function(e){return e}))(D)},function(e,t,n){"use strict";var r=n(0),o=n.n(r);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}var i={public:{full:"https://gw.alipayobjects.com/zos/bmw-prod/d3ef2bc4-a58e-436e-b604-38d304d9e335.svg",icon:"https://gw.alipayobjects.com/zos/bmw-prod/735cefc9-f976-4c87-8b48-85f713f5b713.svg",text:"https://gw.alipayobjects.com/zos/bmw-prod/85646fff-457a-4846-b35a-d3839a5ff476.svg",alt:"语雀"},internal:{0:{full:"https://gw.alipayobjects.com/zos/bmw-prod/c9b55b7f-de56-41f4-948c-3a9191c37604.svg",icon:"https://gw.alipayobjects.com/zos/bmw-prod/851f77c0-1f75-4625-bc99-7986ccd2bfd2.svg",text:"https://gw.alipayobjects.com/zos/bmw-prod/a3ef687d-bf52-4713-9059-38be5d2dde4b.svg",alt:"阿里语雀"},1:{full:"https://gw.alipayobjects.com/zos/bmw-prod/b297df6e-e35f-4c82-8ec9-fae822a498b4.svg",icon:"https://gw.alipayobjects.com/zos/bmw-prod/851f77c0-1f75-4625-bc99-7986ccd2bfd2.svg",text:"https://gw.alipayobjects.com/zos/bmw-prod/27b63531-7f94-45fc-940a-9979a6701c12.svg",alt:"蚂蚁语雀"}}};function c(){var e=window.appData.zone,t=i.public;return window.appData.isYuque||(t=i.internal[0],e&&(t=i.internal[e.id]||t)),t}var u={Yuque:function(e){var t=e.height,n=void 0===t?32:t,r=e.mixed,a=void 0!==r&&r,i=e.className,u=void 0===i?"":i,l=c();return a?o.a.createElement("span",{className:u},o.a.createElement("img",{src:l.icon,alt:l.alt,width:n,height:n}),o.a.createElement("img",{src:l.text,height:n,style:{marginLeft:"2px"}})):o.a.createElement("img",{src:l.full,alt:l.alt,height:n,className:u})},MiniYuque:function(e){var t=e.height,n=void 0===t?32:t,r=e.className,a=void 0===r?"":r,i=c();return o.a.createElement("img",{src:i.icon,alt:i.alt,width:n,height:n,className:a})},Text:function(e){var t=c();return o.a.createElement("img",a({},e,{src:t.text,height:"32",style:{marginLeft:"2px"},alt:t.alt}))}};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(49),u=(n(79),n(44)),l=(n(50),n(19)),s=n(500),f=n(113),d=(n(148),n(53)),p=(n(144),n(33)),m=(n(60),n(24)),h=(n(130),n(35)),y=n(32),v=n.n(y),b=n(112),g=n.n(b),_=n(524),w=n.n(_),E=n(853),O=n(848),x=(n(175),n(84)),j=(n(374),n(170)),k=n(906),S=n(38),C="index-module_orgCostDetail_cLnEB",N="index-module_content_oAhH8",P="index-module_row_by2z2",T="index-module_right_3Ce8Y",A="index-module_tips_EUcPA",L="index-module_title_J6b5y",I="index-module_hasDiscount_TqEsK",R="index-module_rawPrice_2UTkU",D=function(e){var t,n=e.orderType,r=e.duration,a=e.memberSize,i=e.max_member,u=e.organizationInfo,l=e.hasDiscount,s=e.totalAmount,f=e.totalAmountWithPromo,d=e.totalAmountWithoutDiscount,p=u.created_at,m=u.expired_at,h=0;if(f&&(h=+f-+s),n===c.ORDER_TYPE.upgrade)t=o.a.createElement("div",{className:N,"data-testid":"orgCostDetail-content"},o.a.createElement("div",{className:P},o.a.createElement("div",null,__("套餐升级费用"),__("（购买{duration}年）",{duration:r})),o.a.createElement("div",{className:T},l&&o.a.createElement("span",{className:R},d," ",__("元")),"  ",o.a.createElement("div",{className:l?I:""},s," ",__("元")))),l&&o.a.createElement("div",{className:A},__("老客户限时专享：12 元/人/年")),!!f&&o.a.createElement("div",{className:P},o.a.createElement("div",null,__("优惠码")),o.a.createElement("div",null,h," ",__("元"))),o.a.createElement(j.a,{dashed:!0}),o.a.createElement("div",{className:P},o.a.createElement("div",null,__("总计")),o.a.createElement("div",null,f||s," ",__("元"))));else{var y=w.a.getCostDetail(p,m,a,i,r,l),v=y.renewAmount,b=y.upgradeAmount,g=y.rawRenewAmount,_=y.rawUpgradeAmount;t=o.a.createElement("div",{className:N,"data-testid":"orgCostDetail-content"},(n===c.ORDER_TYPE.renew||n===c.ORDER_TYPE.buy)&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:P},o.a.createElement("div",null,n===c.ORDER_TYPE.buy?__("套餐付费费用"):__("套餐续费费用"),__("（购买{duration}年）",{duration:r})),o.a.createElement("div",{className:T},l&&o.a.createElement("span",{className:R},g," ",__("元")),"  ",o.a.createElement("div",{className:l?I:""},v," ",__("元")))),l&&o.a.createElement("div",{className:A},__("老客户限时专享：12 元/人/年"))),b>0&&n!==c.ORDER_TYPE.buy&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:P},o.a.createElement("div",null,__("当前套餐升级费用")),o.a.createElement("div",{className:T},l&&o.a.createElement("span",{className:R},_," ",__("元")),"  ",o.a.createElement("div",{className:l?I:""},b," ",__("元")))),l&&o.a.createElement("div",{className:A},__("老客户限时专享：12 元/人/年"))),!!f&&o.a.createElement("div",{className:P},o.a.createElement("div",null,__("优惠码")),o.a.createElement("div",null,h," ",__("元"))),o.a.createElement(j.a,{dashed:!0}),o.a.createElement("div",{className:P},o.a.createElement("div",null,__("总计")),o.a.createElement("div",null,f||s," ",__("元"))))}var E=o.a.createElement("div",{className:L},__("费用明细"),"   ",o.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/qvua5h",target:"_blank"},o.a.createElement(k.a,null)));return o.a.createElement(x.a,{content:t,title:E,placement:"topRight",trigger:"click"},o.a.createElement("div",{className:C,"data-testid":"orgCostDetail"},o.a.createElement(S.b,{name:"cost-detail",width:16,height:17,style:{verticalAlign:"text-bottom"}})," ",__("费用明细")))};D.propTypes={orderType:i.a.number,duration:i.a.number,memberSize:i.a.number,max_member:i.a.number,organizationInfo:i.a.object,hasDiscount:i.a.bool,totalAmount:i.a.string,totalAmountWithPromo:i.a.string,totalAmountWithoutDiscount:i.a.string};var M=D,F=n(1314),B=n(1020),U={row:"Pay-module_row_02i1B",left:"Pay-module_left_u3-Jq",name:"Pay-module_name_4PPzr",nameRow:"Pay-module_nameRow_iKvRZ",version:"Pay-module_version_C36aU",paidVersion:"Pay-module_paidVersion_pBnh8",cardList:"Pay-module_cardList_OD1er",memberSize:"Pay-module_memberSize_Snqz8",show:"Pay-module_show_u86Cd",totalInfo:"Pay-module_totalInfo_YM7Fb",footer:"Pay-module_footer_MsuSK",termsContainer:"Pay-module_termsContainer_MMlAf",pricingContainer:"Pay-module_pricingContainer_hjkUd",desc:"Pay-module_desc_a1fXI",dashline:"Pay-module_dashline_y-S0k",pricingInfo:"Pay-module_pricingInfo_NRstM",pricingMainTitle:"Pay-module_pricingMainTitle_pinlM",pricingSubTitle:"Pay-module_pricingSubTitle_FlFF9",inputNumber:"Pay-module_inputNumber_Uaz26",pricingDesc:"Pay-module_pricingDesc_SK8fY",priceTag:"Pay-module_priceTag_ot6Kz",hasDiscount:"Pay-module_hasDiscount_KLNoP",discountPrice:"Pay-module_discountPrice_HbCLz",discountPriceValue:"Pay-module_discountPriceValue_CUsg2",payWith:"Pay-module_payWith_vFDxq",payWithAlipayIcon:"Pay-module_payWithAlipayIcon_SjV5X",payWithAlipayText:"Pay-module_payWithAlipayText_r3AWK",uploadPackages:"Pay-module_uploadPackages_VO59r",uploadPackageCard:"Pay-module_uploadPackageCard_6UXsL",selectedUploadCard:"Pay-module_selectedUploadCard_yWd2Y",uploadSize:"Pay-module_uploadSize_WpwBc",uploadPackagePrice:"Pay-module_uploadPackagePrice_zQPrm",buyMemberCon:"Pay-module_buyMemberCon_CB8+C",currentMember:"Pay-module_currentMember_4XK3Q",upgradeMember:"Pay-module_upgradeMember_6duT1",memberValue:"Pay-module_memberValue_l6w8U",tips:"Pay-module_tips_BIW+T",discountInfo:"Pay-module_discountInfo_Uq4+K",promo:"Pay-module_promo_sD6ap"};function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V=h.a.Option,Y=function(e){var t=e.orderType,n=e.memberSize,a=e.handleMemberChange,i=e.duration,u=e.handleDurationChange,s=e.buyLoading,f=e.handleSubmitBuy,y=e.max_member,g=e.organizationInfo,_=e.promoCode,x=e.setPromoCode,j=e.handlePaymentTypeChange,k=e.currentMember,C=z(Object(r.useState)(!1),2),N=C[0],P=C[1],T=z(Object(r.useState)(!1),2),A=T[0],L=T[1],I=Object(r.useRef)(null),R=g.expired_at,D=g.created_at;g.payment_type===c.PAYMENT_TYPE.trial&&(t=c.ORDER_TYPE.buy);var G=t===c.ORDER_TYPE.renew,Y=w()({order_type:t,duration:i,max_member:y,member_size:n,expired_at:R,created_at:D}),q=w.a.hasDiscount(D),H=Y;q&&+(H=w()({order_type:t,duration:i,max_member:y,member_size:n,expired_at:R,created_at:D,enableDiscount:!1}))<=+Y&&(q=!1);var W=Object(O.a)({totalAmount:Y,setPromoCode:x}),K=W.totalAmountWithPromo,$=W.onVerifySuccess,Q=W.handlePromoChange,X=(v()(R).diff(Date.now(),"days")||1)<0?v()().endOf("day"):R,J=v()(X).add(i,"year");return o.a.createElement("div",{className:"".concat(U.pricingContainer," ").concat(U.renew),"data-testid":"renew-package",ref:I},o.a.createElement("div",{className:U.row},o.a.createElement("div",{className:U.left},__("空间名称"),"："),o.a.createElement("div",{className:"".concat(U.right," ").concat(U.nameRow)},o.a.createElement("span",{className:U.name},window.appData.organization.name)," ",o.a.createElement(F.a,{organization:g}))),o.a.createElement("div",{className:U.row,style:{paddingBottom:48}},o.a.createElement("div",{className:U.left},G?__("续费套餐"):__("升级套餐"),"："),o.a.createElement("div",{className:U.inputNumber,style:{width:240}},o.a.createElement(B.a,{defaultValue:n,onChange:function(e){a(e)},currentMember:k,getPopupContainer:function(){return I.current}}),n!==y?o.a.createElement("div",{className:U.tips},n>y?__("所选套餐人数高于当前套餐，新的人数限制将在支付成功后立即生效"):__("所选套餐人数低于当前套餐，新的人数限制将在支付成功后立即生效")):o.a.createElement("div",{className:U.tips},__("当前空间使用人数：{currentMember} 人",{currentMember:k})))),o.a.createElement("div",{className:U.row,style:{marginBottom:20}},o.a.createElement("div",{className:U.left},__("购买时长"),"："),o.a.createElement("div",{className:U.inputNumber},o.a.createElement(h.a,{className:U.select,defaultValue:1,value:i,onChange:u,style:{width:100}},[1,2,3].map((function(e){return o.a.createElement(V,{value:e,key:e},e,__("年"))}))),o.a.createElement("div",{className:U.tips},__("购买后有效期至"),"：",J.format("YYYY-MM-DD")))),o.a.createElement("div",{className:U.row},o.a.createElement("div",{className:U.left},__("支付方式"),"："),o.a.createElement("div",{className:U.inputNumber},o.a.createElement(p.a.Group,{defaultValue:b.PAYMENT_TYPE.normal,onChange:function(e){return j(e.target.value)}},o.a.createElement(p.a.Button,{value:b.PAYMENT_TYPE.normal},__("支付宝")),o.a.createElement(p.a.Button,{value:b.PAYMENT_TYPE.settle},__("银行转账"))))),o.a.createElement("div",{className:U.promo},o.a.createElement("div",{className:U.left,onClick:function(){P(!N)}},o.a.createElement(S.b,{name:"promo",width:18})," ",__("优惠码")),N&&o.a.createElement("div",{style:{width:240},className:U.inputNumber},o.a.createElement(E.a,{value:_,onChange:Q,onVerifySuccess:$}))),o.a.createElement("p",{className:U.dashline}),o.a.createElement("h3",null,__("费用总计"),"："),o.a.createElement("div",{className:U.totalInfo},o.a.createElement("span",{className:"".concat(U.priceTag," ").concat(q||K?U.hasDiscount:"")},H)," 元",(q||K)&&o.a.createElement("span",{className:U.discountPrice},__("优惠价")," ",o.a.createElement("span",{className:U.discountPriceValue},K||Y)," 元"),"  ",o.a.createElement(M,{orderType:t,duration:i,memberSize:n,max_member:y,organizationInfo:g,hasDiscount:q,totalAmount:Y,totalAmountWithPromo:K,totalAmountWithoutDiscount:H})),q&&o.a.createElement("div",{className:U.discountInfo},__("老客户专享优惠至 {TRANSITION_DEADLINE}",{TRANSITION_DEADLINE:b.TRANSITION_DEADLINE.split(" ")[0]})),o.a.createElement("div",{className:U.discountInfo},__("支持电子发票或专用发票开具，需 7 个工作日")),o.a.createElement("div",{className:U.footer},o.a.createElement(l.a,{"data-testid":"buy-button",type:"primary",loading:s,onClick:function(){A?f({total_amount:K||Y}):m.a.info(__("需阅读并同意《语雀空间服务协议》后才能支付"))}},s?__("购买中"):__("立即支付")),o.a.createElement("p",{className:U.termsContainer},o.a.createElement(d.a,{onChange:function(){L(!A)},checked:A,"data-testid":"check-terms"},__("我已阅读并同意")),o.a.createElement("a",{target:"_blank",href:"/org-terms"},__("《语雀空间服务协议》")))))};Y.propTypes={orderType:i.a.number,memberSize:i.a.number,handleMemberChange:i.a.func,expired_at:i.a.string,duration:i.a.number,handleDurationChange:i.a.func,buyLoading:i.a.bool,handleSubmitBuy:i.a.func,max_member:i.a.number,organizationInfo:i.a.object,promoCode:i.a.string,setPromoCode:i.a.func,handlePaymentTypeChange:i.a.func,currentMember:i.a.number};var q=Y;function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(e){var t=e.max_member,n=e.memberSize,a=e.handleMemberChange,i=e.buyLoading,u=e.handleSubmitBuy,s=e.organizationInfo,f=e.promoCode,h=e.setPromoCode,y=e.handlePaymentTypeChange,g=H(Object(r.useState)(!1),2),_=g[0],x=g[1],j=H(Object(r.useState)(!1),2),k=j[0],C=j[1],N=Object(r.useRef)(null),P=s.expired_at,T=s.created_at,A=w()({order_type:c.ORDER_TYPE.buyMember,max_member:t,member_size:n,expired_at:P,created_at:T}),L=w.a.hasDiscount(T),I=A;L&&+(I=w()({order_type:c.ORDER_TYPE.buyMember,max_member:t,member_size:n,expired_at:P,created_at:T,enableDiscount:!1}))<=+A&&(L=!1);var R=c.PRICE_STAGES.find((function(e){return e.member===t})),D=Object(O.a)({totalAmount:A,setPromoCode:h}),F=D.totalAmountWithPromo,z=D.onVerifySuccess,G=D.handlePromoChange;return o.a.createElement("div",{className:U.pricingContainer,"data-testid":"buy-member-modal",ref:N},o.a.createElement("div",{className:U.row},o.a.createElement("h3",{className:U.left},__("当前套餐"),"："),o.a.createElement("div",{className:"".concat(U.right," ").concat(U.nameRow)},o.a.createElement("span",null,t," ",__("人"),"，"),o.a.createElement("span",null,R&&R.price," ",__("元/年")))),o.a.createElement("div",{className:U.row,style:{marginBottom:24}},o.a.createElement("h3",{className:U.left},__("升级套餐"),"："),o.a.createElement("div",{className:U.inputNumber,style:{width:240}},o.a.createElement(B.a,{isBuyMember:!0,defaultValue:n,onChange:function(e){a(e)},currentMember:t+1,getPopupContainer:function(){return N.current}}),o.a.createElement("div",{className:U.tips},__("升级后有效期至"),"：",v()(P).format("YYYY-MM-DD")))),o.a.createElement("h3",null,__("支付方式")),o.a.createElement(p.a.Group,{defaultValue:b.PAYMENT_TYPE.normal,onChange:function(e){return y(e.target.value)},style:{marginTop:8}},o.a.createElement(p.a.Button,{value:b.PAYMENT_TYPE.normal},__("支付宝")),o.a.createElement(p.a.Button,{value:b.PAYMENT_TYPE.settle},__("银行转账"))),o.a.createElement("div",{className:U.promo,style:{marginTop:18}},o.a.createElement("div",{className:U.left,onClick:function(){x(!_)}},o.a.createElement(S.b,{name:"promo",width:18})," ",__("优惠码")),_&&o.a.createElement("div",{style:{width:240},className:U.inputNumber},o.a.createElement(E.a,{value:f,onChange:G,onVerifySuccess:z}))),o.a.createElement("p",{className:U.dashline}),o.a.createElement("h3",null,__("费用总计"),"："),o.a.createElement("div",{className:U.totalInfo},o.a.createElement("span",{className:"".concat(U.priceTag," ").concat(L||F?U.hasDiscount:"")},I)," 元",(L||F)&&o.a.createElement("span",{className:U.discountPrice},"优惠价 ",o.a.createElement("span",{className:U.discountPriceValue},F||A)," 元"),"  ",o.a.createElement(M,{orderType:c.ORDER_TYPE.buyMember,memberSize:n,max_member:t,organizationInfo:s,hasDiscount:L,totalAmount:A,totalAmountWithPromo:F,totalAmountWithoutDiscount:I})),L&&o.a.createElement("div",{className:U.discountInfo},__("老客户专享优惠至 {TRANSITION_DEADLINE}",{TRANSITION_DEADLINE:b.TRANSITION_DEADLINE.split(" ")[0]})),o.a.createElement("div",{className:U.discountInfo},__("支持电子发票或专用发票开具，需 7 个工作日")),o.a.createElement("div",{className:U.footer},o.a.createElement(l.a,{"data-testid":"buy-button",type:"primary",loading:i,onClick:function(){k?u({total_amount:A}):m.a.info(__("需阅读并同意《语雀空间服务协议》后才能支付"))}},i?__("购买中"):__("立即支付")),o.a.createElement("p",{className:U.termsContainer},o.a.createElement(d.a,{onChange:function(){C(!k)},checked:k,"data-testid":"check-terms"},__("我已阅读并同意")),o.a.createElement("a",{target:"_blank",href:"/org-terms"},__("《语雀空间服务协议》")))))};K.propTypes={max_member:i.a.number,memberSize:i.a.number,handleMemberChange:i.a.func,buyLoading:i.a.bool,handleSubmitBuy:i.a.func,organizationInfo:i.a.object,promoCode:i.a.string,setPromoCode:i.a.func,handlePaymentTypeChange:i.a.func};var $=K;function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e){var t=e.buyLoading,n=e.handleSubmitBuy,a=e.promoCode,i=e.setPromoCode,u=e.handlePaymentTypeChange,s=Q(Object(r.useState)(!1),2),f=s[0],h=s[1],y=Q(Object(r.useState)(!1),2),v=y[0],g=y[1],_=Q(Object(r.useState)(b.ORG_UPLOAD_SIZE_MAP["100G"].value),2),x=_[0],j=_[1],k=w()({order_type:c.ORDER_TYPE.data,upload_size:x}),C=Object(O.a)({totalAmount:k,setPromoCode:i}),N=C.totalAmountWithPromo,P=C.onVerifySuccess,T=C.handlePromoChange,A=window.appData.organization,L=void 0===A?{}:A;return o.a.createElement("div",{className:U.pricingContainer,"data-testid":"buy-upload"},o.a.createElement("div",{className:U.desc},__("流量购买后对{orgName}空间账户长期有效",{orgName:L.name})),o.a.createElement("h3",null,__("流量包")),o.a.createElement("div",{className:U.uploadPackages},Object.keys(b.ORG_UPLOAD_SIZE_MAP).map((function(e){return o.a.createElement("div",{key:b.ORG_UPLOAD_SIZE_MAP[e].value,className:"".concat(U.uploadPackageCard," ").concat(x===b.ORG_UPLOAD_SIZE_MAP[e].value?U.selectedUploadCard:""),onClick:function(){return j(b.ORG_UPLOAD_SIZE_MAP[e].value)}},o.a.createElement("div",{className:U.uploadSize},e),o.a.createElement("div",{className:U.uploadPackagePrice},b.ORG_UPLOAD_SIZE_MAP[e].price," ",__("元")))}))),o.a.createElement("h3",null,__("支付方式")),o.a.createElement(p.a.Group,{defaultValue:b.PAYMENT_TYPE.normal,onChange:function(e){return u(e.target.value)},style:{marginTop:8}},o.a.createElement(p.a.Button,{value:b.PAYMENT_TYPE.normal},__("支付宝")),o.a.createElement(p.a.Button,{value:b.PAYMENT_TYPE.settle},__("银行转账"))),o.a.createElement("div",{className:U.promo,style:{marginTop:24}},o.a.createElement("div",{className:U.left,onClick:function(){h(!f)}},o.a.createElement(S.b,{name:"promo",width:18})," ",__("优惠码")),f&&o.a.createElement("div",{style:{width:240},className:U.inputNumber},o.a.createElement(E.a,{value:a,onChange:T,onVerifySuccess:P}))),o.a.createElement("p",{className:U.dashline}),o.a.createElement("h3",null,__("费用总计"),"："),o.a.createElement("div",{className:U.totalInfo},o.a.createElement("span",{className:"".concat(U.priceTag," ").concat(N?U.hasDiscount:"")},k)," ",__("元"),N&&o.a.createElement("span",{className:U.discountPrice},__("优惠价")," ",o.a.createElement("span",{className:U.discountPriceValue},N||k)," ",__("元"))),o.a.createElement("div",{className:U.footer},o.a.createElement(l.a,{"data-testid":"buy-button",type:"primary",loading:t,onClick:function(){v?n({uploadSize:x,total_amount:k}):m.a.info(__("需阅读并同意《语雀空间服务协议》后才能支付"))}},t?__("购买中"):__("立即支付")),o.a.createElement("p",{className:U.termsContainer},o.a.createElement(d.a,{onChange:function(){g(!v)},checked:v,"data-testid":"check-terms"},__("我已阅读并同意")),o.a.createElement("a",{target:"_blank",href:"/org-terms"},"《语雀空间服务协议》"))))};J.propTypes={buyLoading:i.a.bool,handleSubmitBuy:i.a.func,promoCode:i.a.string,setPromoCode:i.a.func,handlePaymentTypeChange:i.a.func};var Z=J,ee="Qrcode-module_qrcodeImageCon_yy+Gi",te="Qrcode-module_alipayIconInQrCode_5Ng19",ne="Qrcode-module_qrcodeContainer_c79eX",re="Qrcode-module_qrcodeImage_UEIyZ",oe="Qrcode-module_desc1_ArZR9",ae="Qrcode-module_desc2_E5sDl",ie="Qrcode-module_qrcodeTitleCon_-LJr2",ce="Qrcode-module_qrcodeTitleDesc_OOQby",ue="Qrcode-module_qrcodeTitleValue_PBwE+",le=function(e){var t=e.qrcodeUrl,n=e.totalAmount;return o.a.createElement("div",{className:ne,"data-testid":"qrcode"},o.a.createElement("div",{className:ie},o.a.createElement("div",{className:ce},__("扫一扫付款 (元)")),o.a.createElement("div",{className:ue},n)),o.a.createElement("div",{className:ee},o.a.createElement("div",{className:te},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*GE2FQLYZ4kAAAAAAAAAAAABjARQnAQ"})),o.a.createElement("img",{className:re,src:t})),o.a.createElement("div",{className:oe},__("打开手机支付宝，扫一扫继续付款")),o.a.createElement("div",{className:ae},__("付款后可在线申请发票")))};le.propTypes={qrcodeUrl:i.a.string,totalAmount:i.a.number};var se=le,fe={noLineModal:"PayModal-module_noLineModal_r4djn",warnContent:"PayModal-module_warnContent_TTDov"};function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me,he=function(e){var t,n=e.type,r=e.qrcodeUrl,a=e.visible,i=e.onCancel,d=e.buyLoading,p=e.memberSize,m=e.max_member,h=e.handleMemberChange,y=e.handleSubmitBuy,v=e.handleSelectPackage,b=e.duration,g=e.handleDurationChange,_=e.remaining,w=e.totalAmount,E=e.organizationInfo,O=void 0===E?{}:E,x=e.promoCode,j=e.setPromoCode,k=e.handlePaymentTypeChange,S=e.currentMember,C=(pe(t={qrcode:__("扫码支付")},c.ORDER_TYPE.upgrade,__("空间升级")),pe(t,c.ORDER_TYPE.renew,__("空间{action}",{action:f.a.getPaymentAction(O.payment_type)})),pe(t,c.ORDER_TYPE.buyMember,__("套餐升级")),pe(t,c.ORDER_TYPE.data,__("购买上传流量")),t),N=null;if([c.ORDER_TYPE.upgrade,c.ORDER_TYPE.renew,c.ORDER_TYPE.buyMember].includes(n)&&!c.PRICE_STAGES.find((function(e){return e.member===m})))N=o.a.createElement("div",null,o.a.createElement("div",{className:fe.warnContent},o.a.createElement(s.a,{style:{color:"#faad14"}}),"  ",__("当前空间套餐异常，请联系 support@yuque.com 进行处理。")),o.a.createElement("div",{className:fe.footer},o.a.createElement(l.a,{type:"primary",onClick:i},__("确定"))));else switch(n){case"qrcode":N=o.a.createElement(se,{qrcodeUrl:r,totalAmount:w});break;case c.ORDER_TYPE.upgrade:case c.ORDER_TYPE.renew:N=o.a.createElement(q,{orderType:n,handleSelectPackage:v,remaining:_,max_member:m,memberSize:p,handleMemberChange:h,duration:b,handleDurationChange:g,buyLoading:d,handleSubmitBuy:y,organizationInfo:O,promoCode:x,setPromoCode:j,handlePaymentTypeChange:k,currentMember:S});break;case c.ORDER_TYPE.buyMember:N=o.a.createElement($,{max_member:m,memberSize:p,handleMemberChange:h,buyLoading:d,handleSubmitBuy:y,organizationInfo:O,promoCode:x,setPromoCode:j,handlePaymentTypeChange:k,currentMember:S});break;case c.ORDER_TYPE.data:N=o.a.createElement(Z,{buyLoading:d,handleSubmitBuy:y,promoCode:x,setPromoCode:j,handlePaymentTypeChange:k})}var P=[c.ORDER_TYPE.renew,c.ORDER_TYPE.buyMember].includes(n)?"":fe.noLineModal;return o.a.createElement(u.a,{title:C[n],visible:a,maskClosable:!1,onCancel:i,footer:null,width:560,centered:!0,className:P},o.a.createElement("div",{"data-testid":"pay-modal"},N))};he.propTypes={type:i.a.oneOf(["qrcode"].concat((me=Object.values(c.ORDER_TYPE),function(e){if(Array.isArray(e))return de(e)}(me)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(me)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(me)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))),visible:i.a.bool,qrcodeUrl:i.a.string,onCancel:i.a.func,buyLoading:i.a.bool,memberSize:i.a.number,max_member:i.a.number,handleMemberChange:i.a.func,handleSubmitBuy:i.a.func,handleSelectPackage:i.a.func,duration:i.a.number,handleDurationChange:i.a.func,remaining:i.a.number,totalAmount:i.a.number,organizationInfo:i.a.object,promoCode:i.a.string,setPromoCode:i.a.func,handlePaymentTypeChange:i.a.func,currentMember:i.a.number};var ye=he,ve="ProcessingModal-module_processContainer_dOZ9t",be="ProcessingModal-module_processImg_Fl+7o",ge="ProcessingModal-module_processInfo_VPh0u",_e=function(e){var t=e.visible;return o.a.createElement(u.a,{title:null,visible:t,maskClosable:!1,closable:!1,footer:null,centered:!0,width:480},o.a.createElement("div",{className:ve,"data-testid":"processing-modal"},o.a.createElement("img",{className:be,src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*7q7fR4_EUQQAAAAAAAAAAABjARQnAQ"}),o.a.createElement("p",{className:ge},__("付费更新中，请稍后..."))))};_e.propTypes={visible:i.a.bool};var we=_e,Ee=n(140),Oe="PaidSuccessModal-module_successModalContainer_gb6Iw",xe="PaidSuccessModal-module_successModalInfoCon_aLoy0",je="PaidSuccessModal-module_successModalButtonCon_BP8Ns",ke="PaidSuccessModal-module_applyReceiptButton_BrptN",Se="PaidSuccessModal-module_checkUploadButton_n0Sct",Ce="PaidSuccessModal-module_successModalSubTitle_Hq8oy",Ne="PaidSuccessModal-module_successModalItem_EBnTl",Pe="PaidSuccessModal-module_successModalBlank_3ENdm",Te="PaidSuccessModal-module_successModalDingQRCon_mfDmy",Ae=function(e){var t=e.organizationInfo,n=void 0===t?{}:t,r=e.visible,a=e.onClose,i=e.onClickApplyReceipt,s=window.appData.me,d=n.name,p=n.expired_at,m=n.order_id,h=n.order_type,y=n.duration,b=n.upload_size,g=n.max_member,_=n.amount,w=n.order_updated_at,E=n.payment_type,O="",x="",j="",k=!1,S=!1,C=!1,N="https://gw.alipayobjects.com/zos/basement_prod/414287bc-179c-45e7-852b-548dce104594.svg";switch(h){case c.ORDER_TYPE.buy:case c.ORDER_TYPE.renew:O=__("恭喜你，语雀空间{action}成功",{action:f.a.getPaymentAction(E)}),x=__("套餐"),j=__("付费版｜{max_member}人套餐",{max_member:g}),k=!0,S=!0,C=!1;break;case c.ORDER_TYPE.upgrade:O=__("恭喜你，语雀空间升级成功"),x=__("套餐"),j=__("付费版｜{max_member}人套餐",{max_member:g}),k=!0,S=!0,C=!1;break;case c.ORDER_TYPE.buyMember:O=__("恭喜你，空间人数规模升级成功"),C=!0,N="https://gw.alipayobjects.com/zos/basement_prod/9b2a92b0-f11e-419c-b95e-41c222aea25b.svg";break;case c.ORDER_TYPE.data:O=__("恭喜你，上传流量购买成功"),x=__("上传流量"),j="".concat(Object(Ee.getSizeValue)(b).value).concat(Object(Ee.getSizeValue)(b).unit),N="https://gw.alipayobjects.com/zos/basement_prod/39563d69-6bdd-4ee3-8844-0f549452d13f.svg"}return o.a.createElement(u.a,{className:"paid-success-modal",title:null,visible:r,maskClosable:!1,closable:!1,footer:null,centered:!0,width:656},o.a.createElement("div",{className:Oe,"data-testid":"paid-success-modal"},o.a.createElement("img",{src:N}),o.a.createElement("div",{className:xe},o.a.createElement("h1",null,O),o.a.createElement("p",{className:Pe}),o.a.createElement("p",{className:Ce},__("订单信息")),o.a.createElement("p",{className:Ne},__("空间名称"),"：",d),o.a.createElement("p",{className:Ne},__("订单号"),"：",m),x&&o.a.createElement("p",{className:Ne},x,"：",j),S&&o.a.createElement("p",{className:Ne},__("购买时长"),"：",y," ",__("年")),C&&o.a.createElement("p",{className:Ne},__("人数规模"),"：",__("{max_member}人",{max_member:g})),o.a.createElement("p",{className:Ne},__("付款金额"),"：",_," ",__("元")),o.a.createElement("p",{className:Ne},__("付款人"),"：",s&&s.name),o.a.createElement("p",{className:Ne},__("付款时间"),"：",v()(w).format("YYYY-MM-DD HH:mm:ss")),k&&o.a.createElement("p",{className:Ne},__("到期时间"),"：",v()(p).format("YYYY-MM-DD HH:mm:ss")),!window.h5&&o.a.createElement("div",{className:Te},o.a.createElement("img",{width:"120",height:"120",src:c.DINGTALK_QRCODE}),o.a.createElement("p",null,__("使用钉钉扫一扫，加入金牌客户群"))),o.a.createElement("div",{className:je},o.a.createElement(l.a,{type:"primary",onClick:a,"data-testid":"close-button"},__("立即使用")),o.a.createElement(l.a,{className:ke,onClick:function(){return i()}},__("申请开票")),h===c.ORDER_TYPE.data&&o.a.createElement(l.a,{className:Se,href:"/r/organizations/dashboard/cashier"},__("查看上传流量"))))))};Ae.propTypes={organizationInfo:i.a.object.isRequired,visible:i.a.bool,onClose:i.a.func,onClickApplyReceipt:i.a.func};var Le=Ae,Ie=(n(209),n(61)),Re=n(637),De=n(638),Me=n(34),Fe={contactTips:"ReceiptModal-module_contactTips_f0fAJ",receiptTypeTitle:"ReceiptModal-module_receiptTypeTitle_mZi8G",receiptTypeTitleText:"ReceiptModal-module_receiptTypeTitleText_QQBhY",receiptDesc:"ReceiptModal-module_receiptDesc_fY2bw"};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ye=g.a.RECEIPT_TYPES,qe=Ie.a.create()(Re.a),He=Ie.a.create()(De.a),We=function(e){var t=e.visible,n=e.organizationInfo,a=e.handleApplyReceiptCancel,i=e.hasReceipt,c=e.setHasReceipt,l=(window.appData||{}).organization,s=void 0===l?{}:l,f=(window.appData.paymentInfo||{}).receipt,d=f&&void 0!==f.type?f.type:1,h=Ge(Object(r.useState)(d),2),y=h[0],v=h[1],b=Ge(Object(r.useState)(!0),2),g=b[0],_=b[1],w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",r=e.form.validateFields;r((function(e,r){if(!e){var o=Ye[t];Me.a.organizationReceipts.create(Ue(Ue({},r),{},{type:o,order_id:n.order_id,organization_id:s.id})).then((function(e){m.a.success(__("已成功提交发票申请")),c(!0),a()}))}}))};return o.a.createElement(u.a,{className:"receipt-success-modal",title:o.a.createElement(o.a.Fragment,null,i?__("已提交申请"):__("申请发票"),o.a.createElement("p",{className:Fe.receiptDesc},__("发票将在申请后的 7 个工作日内开具"))),visible:t,maskClosable:!1,closable:i,onCancel:a,footer:null,centered:!0,width:500},o.a.createElement("div",{className:Fe.receiptContainer,"data-testid":"receipt-modal"},i?o.a.createElement("p",{className:Fe.contactTips},__("如需帮助请联系"),"：support@yuque.com"):o.a.createElement("div",{className:Fe.receiptTypeTitle},o.a.createElement(p.a.Group,{disabled:i||!g,onChange:function(){v(0===y?1:0)},value:y},o.a.createElement(p.a,{value:1},__("专用发票")),o.a.createElement(p.a,{value:0},__("普通电子发票")))),0===y?o.a.createElement(qe,{handleClickReceiptConfirm:w,handleApplyReceiptCancel:a,handleReceiptChange:_,data:f,isFinished:i}):o.a.createElement(He,{handleClickReceiptConfirm:w,handleApplyReceiptCancel:a,handleReceiptChange:_,data:f,isFinished:i})))};We.propTypes={visible:i.a.bool,organizationInfo:i.a.object,handleApplyReceiptCancel:i.a.func,hasReceipt:i.a.bool,setHasReceipt:i.a.func};var Ke,$e=We,Qe=(n(246),n(110)),Xe=(n(437),n(372)),Je=n(208),Ze={wrapper:"SubAccountInfoModal-module_wrapper_P6mlj",infoField:"SubAccountInfoModal-module_infoField_IMZ6p",infoFieldTitle:"SubAccountInfoModal-module_infoFieldTitle_tgwmv",infoFieldPaymentAlert:"SubAccountInfoModal-module_infoFieldPaymentAlert_UOLk7",buttons:"SubAccountInfoModal-module_buttons_rfW-e",btn:"SubAccountInfoModal-module_btn_WuNy4",loading:"SubAccountInfoModal-module_loading_sNKQL",loadingDesc:"SubAccountInfoModal-module_loadingDesc_QHGbP"};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var at=(ot(Ke={},c.ORDER_TYPE.buy,__("购买空间")),ot(Ke,c.ORDER_TYPE.upgrade,__("升级空间")),ot(Ke,c.ORDER_TYPE.renew,__("续费空间")),ot(Ke,c.ORDER_TYPE.buyMember,__("购买空间人数")),ot(Ke,c.ORDER_TYPE.data,__("购买空间流量")),ot(Ke,c.ORDER_TYPE.downgrade,__("降级空间")),Ke),it=function(e){var t,n=(window.appData.paymentInfo||{}).order_type,a=function(e){var t=void 0!==e.orderTypeFromAppData,n=nt(Object(r.useState)(!t),2),o=n[0],a=n[1],i=at[e.orderTypeFromAppData]||"";return{state:tt(tt({},e),{},{showExistedTips:t,showMainField:o,orderTypeName:i}),setShowMainField:a}}(tt(tt({},e),{},{orderTypeFromAppData:n})),i=a.state,c=i.visible,s=i.subAccountInfo,f=i.closeSettleOrder,d=i.closeAccountInfoModal,p=i.showExistedTips,m=i.showMainField,h=i.orderTypeName,y=a.setShowMainField;return o.a.createElement(u.a,{title:__("购买空间套餐"),visible:c,maskClosable:!1,closable:!0,footer:null,centered:!0,width:550,onCancel:d},s&&s.order?o.a.createElement("div",{className:Ze.wrapper,"data-testid":"subaccount-modal"},p&&!m&&o.a.createElement("div",{className:Ze.tips},o.a.createElement("div",null,__("你有订单尚未完成，请先完成订单或取消订单")),o.a.createElement("div",{className:Ze.buttons},o.a.createElement(l.a,{type:"primary",onClick:function(){return y(!0)},className:Ze.btn},__("去查看")))),m&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Ze.infoField},o.a.createElement(Xe.a,{message:"收款方名称及账户有更新，请注意核对",type:"warning",showIcon:!0,closable:!0,className:Ze.infoFieldPaymentAlert}),n&&o.a.createElement("p",null,o.a.createElement("span",{className:Ze.infoFieldTitle},__("订单类型")),h),o.a.createElement("p",null,o.a.createElement("span",{className:Ze.infoFieldTitle},__("转账金额")),s.order.amount," ",__("元")),o.a.createElement("p",null,o.a.createElement("span",{className:Ze.infoFieldTitle},__("收款公司")),s.local_account_name),o.a.createElement("p",null,o.a.createElement("span",{className:Ze.infoFieldTitle},__("收款账户")),s.account_no_4_credit_transfer),o.a.createElement("p",null,o.a.createElement("span",{className:Ze.infoFieldTitle},__("开户行")),s.local_bank_name_4_transfer)),o.a.createElement("div",{className:Ze.infoField},o.a.createElement("p",null,o.a.createElement("span",{className:Ze.infoFieldTitle},__("订单号")),s.order.order_id),o.a.createElement("div",null,__("请于 10 日内转账付款，银行转账有延迟，稍后将以短信形式通知您开通情况。")),o.a.createElement("div",null,__("如有任何疑问，请发邮件到")," ",o.a.createElement("a",{href:"mailto:support@yuque.com"},"support@yuque.com")," ",__("，会有专人协助您解决。"))),o.a.createElement("div",{className:Ze.buttons},o.a.createElement(Qe.a,{title:__("你确定取消订单吗？"),onConfirm:f,okText:__("取消订单"),cancelText:__("再想想")},o.a.createElement(l.a,{type:"danger",className:Ze.btn},__("取消订单")))))):(t=__("正在准备相关信息，可能需等待 1-5 分钟"),o.a.createElement("div",{className:Ze.loading},o.a.createElement(Je.a,null),t&&o.a.createElement("div",{className:Ze.loadingDesc},t))))};it.propTypes={visible:i.a.bool,subAccountInfo:i.a.object,closeSettleOrder:i.a.func,closeAccountInfoModal:i.a.func};var ct,ut=it,lt=n(289),st=n.n(lt),ft=n(376),dt=n.n(ft),pt=n(56),mt=n.n(pt);function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t,wt=3e3,Et=!1,Ot=function(e,t,n){if(e.max_member<t){var r=c.PRICE_STAGES.find((function(e){return e.member>t}));if(r)return r.member}return e.max_member},xt=Me.a.pay,jt=xt.create,kt=xt.upgrade,St=xt.renew,Ct=xt.buyMember,Nt=xt.buyUpload,Pt=xt.downgrade,Tt=(gt(ct={},c.ORDER_TYPE.buy,jt),gt(ct,c.ORDER_TYPE.upgrade,kt),gt(ct,c.ORDER_TYPE.renew,St),gt(ct,c.ORDER_TYPE.buyMember,Ct),gt(ct,c.ORDER_TYPE.data,Nt),gt(ct,c.ORDER_TYPE.downgrade,Pt),ct),At=function(e){var t,n=e.organization,o=void 0===n?{}:n,a=e.visible,i=void 0!==a&&a,u=e.type,l=void 0===u?"buyModal":u,s=e.orderType,f=e.onClose,d=window.appData.paymentInfo||{},p=d.order_id,m=d.receipt,h=d.isSettleOrder,y=vt(Object(r.useState)(!1),2),g=y[0],_=y[1],w=vt(Object(r.useState)(!1),2),E=w[0],O=w[1],x=vt(Object(r.useState)(!1),2),j=x[0],k=x[1],S=vt(Object(r.useState)(!1),2),C=S[0],N=S[1],P=vt(Object(r.useState)(!1),2),T=P[0],A=P[1],L=vt(Object(r.useState)(null),2),I=L[0],R=L[1],D=vt(Object(r.useState)(!!m),2),M=D[0],F=D[1],B=vt(Object(r.useState)(!1),2),U=B[0],z=B[1],G=vt(Object(r.useState)(yt(yt({},o),{},{order_id:p})),2),V=G[0],Y=G[1],q=vt(Object(r.useState)(1===o.payment_type),2),H=q[0],W=q[1],K=vt(Object(r.useState)(null),2),$=K[0],Q=K[1],X=vt(Object(r.useState)(null),2),J=X[0],Z=X[1],ee=vt(Object(r.useState)(o.members_count||o.max_member),2),te=ee[0],ne=ee[1],re=s===c.ORDER_TYPE.renew?Ot(V,te):null===(t=c.PRICE_STAGES.find((function(e){return e.member>=o.max_member})))||void 0===t?void 0:t.member,oe=vt(Object(r.useState)(re),2),ae=oe[0],ie=oe[1],ce=vt(Object(r.useState)(1),2),ue=ce[0],le=ce[1],se=vt(Object(r.useState)(0),2),fe=se[0],de=se[1],pe=vt(Object(r.useState)(),2),me=pe[0],he=pe[1],ye=vt(Object(r.useState)(b.PAYMENT_TYPE.normal),2),ve=ye[0],be=ye[1],ge=Object(r.useRef)(null),_e=function(){k(!1),N(!0)},we=function e(t){Me.a.pay.query({order_id:t}).then((function(n){return n.isFinished?(_(!1),O(!1),k(!0),W(!0),void Y(n)):(n.isPaid&&(_(!1),O(!0),W(!0)),n.isClosed?(_(!1),O(!1),void k(!1)):void((n.isPaid||n.needQuery)&&(ge.current=setTimeout((function(){return e(t)}),wt))))}))},Ee=function e(t){Me.a.pay.query({order_id:t}).then((function(n){return n.isFinished?(_(!1),O(!1),k(!0),W(!0),void Y(n)):n.isClosed?(_(!1),O(!1),void k(!1)):(n.account_no&&(R(n),_(!1),A(!0),ge.current=setTimeout((function(){return e(t)}),wt)),void(n.needQuery&&(_(!1),A(!0),ge.current=setTimeout((function(){return e(t)}),wt))))}))},Oe=function(){if(_t||h)return A(!0),void Ee(_t||p);if(s===c.ORDER_TYPE.buyMember){var e=c.PRICE_STAGES.find((function(e){return e.member>o.max_member}));ie(e?e.member:c.MAX_MEMBER_LIMIT)}Q(null),z(!1),_(!0)};Object(r.useEffect)((function(){if(i){switch(l){case"buyModal":Oe();break;case"receiptModal":_e()}Me.a.organizations.membersCount({id:o.id}).then(ne)}}),[i]),Object(r.useEffect)((function(){if(!Et&&(Et=!0,!H&&window.appData.paymentInfo&&!h)){var e=st.a.parse(window.location.search).order_id,t=window.appData.paymentInfo,n=t.orderExpired,r=t.isFinished;if(p&&!r)return function(e){var t=window.location,n="".concat(t.protocol,"//").concat(t.host).concat(t.pathname,"?order_id=").concat(e);t.href=n}(p);n?window.location.href=window.location.pathname:e&&(O(!0),we(e))}}),[g]),Object(r.useEffect)((function(){return function(){ge.current&&(clearTimeout(ge.current),ge.current=null)}}),[]);var xe=o.max_member;if(Object(r.useEffect)((function(){if(s===c.ORDER_TYPE.renew){var e=Ot(V,te);ie(e)}}),[re]),!window.appData.paymentInfo)return{};var je=function(e){f&&f(),e&&window.location.reload()},ke=V.expired_at,Se=v()(ke).diff(Date.now(),"days")||1;return{payModalVisible:g,processModalVisible:E,successModalVisible:j,receiptModalVisible:C,subAccountInfoModalVisible:T,subAccountInfo:I,startToApplyReceipt:_e,buyLoading:U,organizationInfo:V,payModalType:$?"qrcode":s,qrcodeUrl:J,handleSubmitBuy:function(e){var t=e.uploadSize,n=e.realOrderType,r=void 0===n?s:n;if(!U){z(!0);var o={member_size:ae,duration:ue,upload_size:t,promo_code:me,payment_type:ve};ve===b.PAYMENT_TYPE.settle?Tt[r](o).then((function(e){z(!1);var t=e.order_id;de(+e.amount),_t=t,Ee(t)})).catch((function(){z(!1)})):Tt[r](o).then((function(e){z(!1);var t=e.out_trade_no;Q({orderId:t,url:e.qr_code}),dt.a.toDataURL(e.qr_code,(function(e,t){Z(t)})),de(+e.totalAmount),we(t)})).catch((function(){z(!1)}))}},handlePayModalCancel:function(){_(!1),je(!1)},handleApplyReceiptCancel:function(){N(!1),je(!0)},handleMemberChange:function(e){ie(e)},closePaidSuccessModal:function(){k(!1),je(!0)},memberSize:ae,hasReceipt:M,setHasReceipt:F,duration:ue,handleDurationChange:function(e){le(e)},remaining:Se,totalAmount:fe,promoCode:me,setPromoCode:he,handlePaymentTypeChange:function(e){return be(e)},closeAccountInfoModal:function(){f&&f(),ge.current&&(clearTimeout(ge.current),ge.current=null),A(!1)},closeSettleOrder:function(){var e=mt()(I,"order.order_id");e&&Me.a.pay.close({order_id:e}).then((function(){window.location.reload()}))},currentMember:te,maxMember:xe}},Lt=function(e){var t=e.organization,n=e.visible,r=e.type,a=e.orderType,i=e.onClose,c=At({organization:t,visible:n,type:r,orderType:a,onClose:i}),u=c.payModalVisible,l=c.processModalVisible,s=c.successModalVisible,f=c.receiptModalVisible,d=c.subAccountInfoModalVisible,p=c.subAccountInfo,m=c.startToApplyReceipt,h=c.buyLoading,y=c.organizationInfo,v=void 0===y?{}:y,b=c.payModalType,g=c.qrcodeUrl,_=c.handleSubmitBuy,w=c.handlePayModalCancel,E=c.handleApplyReceiptCancel,O=c.handleMemberChange,x=c.closePaidSuccessModal,j=c.memberSize,k=c.hasReceipt,S=c.setHasReceipt,C=c.handleSelectPackage,N=c.selectedPackage,P=c.duration,T=c.handleDurationChange,A=c.remaining,L=c.totalAmount,I=c.promoCode,R=c.setPromoCode,D=c.handlePaymentTypeChange,M=c.closeAccountInfoModal,F=c.closeSettleOrder,B=c.currentMember,U=c.maxMember||0;return o.a.createElement("div",{"data-testid":"org-pay-flow"},o.a.createElement(ye,{key:"pay-modal-".concat(u),visible:u,type:b,qrcodeUrl:g,onCancel:w,buyLoading:h,memberSize:j,max_member:U,handleMemberChange:O,handleSubmitBuy:_,handleSelectPackage:C,selectedPackage:N,duration:P,handleDurationChange:T,remaining:A,organizationInfo:v,totalAmount:L,promoCode:I,setPromoCode:R,handlePaymentTypeChange:D,currentMember:B}),o.a.createElement(we,{key:"process-modal-".concat(l),visible:l}),o.a.createElement(Le,{key:"success-modal-".concat(s),visible:s,organizationInfo:v,onClose:x,onClickApplyReceipt:m}),o.a.createElement($e,{key:"receipt-modal-".concat(f),visible:f,organizationInfo:v,handleApplyReceiptCancel:E,hasReceipt:k,setHasReceipt:S}),o.a.createElement(ut,{key:"subaccount-modal-".concat(d),visible:d,subAccountInfo:p,closeAccountInfoModal:M,closeSettleOrder:F}))};Lt.propTypes={organization:i.a.object.isRequired,type:i.a.oneOf(["buyModal","receiptModal"]),orderType:i.a.oneOf(Object.values(c.ORDER_TYPE)),visible:i.a.bool,onClose:i.a.func};t.a=Lt},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),o=n.n(r),a=/\{(\w*)\}/g,i=/\[(\w*):(\w*)\|(\w*)\]/g,c=/#\w*$/,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.__localeData__;n&&(e=(null==u?void 0:u[e])||e);var l=e;l=l.replace(i,(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=t[n[1]],a=n[2],i=n[3];return o&&o>1?i:a})),l=l.replace(c,"");var s=[],f=!1,d=0,p=l.length,m=l;return l=l.replace(a,(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];s.push(m.substring(d,n[2])),d=n[2]+n[0].length;var a=n[1].trim();if(!a)return"";a.match(/^\d+$/)&&(a=parseInt(a,10));var i=t[a];return void 0===i?(s.push(n[0]),n[0]):(s.push(i),o.a.isValidElement(i)?(f=!0,""):i)})),d<p&&s.push(m.substring(d)),f?s.map((function(e,t){return o.a.createElement(r.Fragment,{key:Math.random()},e)})):l}},function(e,t,n){var r=n(309),o=n(2690)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=o},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(166),n(65)),a=(n(178),n(45)),i=(n(209),n(61)),c=(n(75),n(26)),u=n(0),l=n.n(u),s=n(2),f=n.n(s),d=n(856);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(f,e);var t,n,u,s=y(f);function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),t=s.call(this,e);var n=void 0===e.isFinished||!e.isFinished;return t.state={editing:n,btnLoading:!1},t}return t=f,(n=[{key:"render",value:function(){var e=this,t=this.props.form,n=t.getFieldDecorator,u=t.validateFields,s=t.resetFields,f=this.props,p=f.handleClickReceiptConfirm,m=f.handleApplyReceiptCancel,h=f.handleReceiptChange,y=f.data,v=f.isFinished,b=f.submitButtonText,g=y||{},_=this.state,w=_.editing,E=_.btnLoading;return l.a.createElement(i.a,{layout:"vertical"},l.a.createElement(o.a,null,l.a.createElement(a.a,{span:24},l.a.createElement(i.a.Item,{label:__("发票抬头")},n("title",{initialValue:g.title,rules:[{required:!0,message:__("请填写发票抬头")}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写发票抬头")}))))),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:24},l.a.createElement(i.a.Item,{label:__("税号")},n("tax_no",{initialValue:g.tax_no,rules:[{required:!0,message:__("请填写税号")},{validator:function(e,t,n){if(t&&t.length>32)return n("不能超过 32 个字符");n()}}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写税号")}))))),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:24,className:d.a.contactInfoTitle})),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:11},l.a.createElement(i.a.Item,{label:__("收件人")},n("contact_name",{initialValue:g.contact_name,rules:[{required:!0,message:__("请填写收件人姓名")}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写收件人姓名")})))),l.a.createElement(a.a,{push:2,span:11},l.a.createElement(i.a.Item,{label:__("收件人电话")},n("contact_telephone",{initialValue:g.contact_telephone,rules:[{required:!0,message:__("请填写收件人电话")}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写收件人电话")}))))),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:24},l.a.createElement(i.a.Item,{label:__("邮箱")},n("detail_address",{initialValue:g.detail_address,rules:[{required:!0,type:"email",message:__("请填写正确的邮箱地址")}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写邮箱")}))))),!v&&l.a.createElement(o.a,{className:d.a.receiptButtons},l.a.createElement(a.a,{span:24},l.a.createElement(r.a,{type:"primary",onClick:function(){return function(){if(!w)return e.setState({btnLoading:!0}),void p(e.props);u((function(t){t||(h(!1),e.setState({editing:!1}))}))}()},loading:E},w?__("下一步"):b||__("确认开票")),l.a.createElement(r.a,{className:d.a.cancelButton,onClick:function(){return function(){if(w)return m(),void s();h(!0),e.setState({editing:!0})}()}},w?__("取消"):__("返回修改")))))}}])&&m(t.prototype,n),u&&m(t,u),Object.defineProperty(t,"prototype",{writable:!1}),f}(l.a.PureComponent);g.propTypes={handleClickReceiptConfirm:f.a.func.isRequired,handleApplyReceiptCancel:f.a.func.isRequired,handleReceiptChange:f.a.func.isRequired,form:f.a.object.isRequired,data:f.a.object,isFinished:f.a.bool,submitButtonText:f.a.string},t.a=g},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(166),n(65)),a=(n(178),n(45)),i=(n(209),n(61)),c=(n(75),n(26)),u=n(0),l=n.n(u),s=n(2),f=n.n(s),d=n(856);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(f,e);var t,n,u,s=y(f);function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),t=s.call(this,e);var n=void 0===e.isFinished||!e.isFinished;return t.state={editing:n,btnLoading:!1},t}return t=f,(n=[{key:"render",value:function(){var e=this,t=this.props.form,n=t.getFieldDecorator,u=t.validateFields,s=t.resetFields,f=this.props,p=f.handleClickReceiptConfirm,m=f.handleApplyReceiptCancel,h=f.handleReceiptChange,y=f.data,v=f.isFinished,b=f.submitButtonText,g=y||{},_=this.state,w=_.editing,E=_.btnLoading;return l.a.createElement(i.a,{layout:"vertical"},l.a.createElement(o.a,null,l.a.createElement(a.a,{span:24},l.a.createElement(i.a.Item,{label:__("发票抬头")},n("title",{initialValue:g.title,rules:[{required:!0,message:__("请填写发票抬头")}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写发票抬头")}))))),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:11},l.a.createElement(i.a.Item,{label:__("税号")},n("tax_no",{initialValue:g.tax_no,rules:[{required:!0,message:__("请填写税号")},{validator:function(e,t,n){if(t&&t.length>32)return n("不能超过 32 个字符");n()}}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写税号")})))),l.a.createElement(a.a,{push:2,span:11},l.a.createElement(i.a.Item,{label:__("公司注册电话")},n("telephone",{initialValue:g.telephone,rules:[{required:!0,message:__("请填写公司注册电话")},{validator:function(e,t,n){if(t&&t.length>32)return n("不能超过 32 个字符");n()}}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写公司注册电话")}))))),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:11},l.a.createElement(i.a.Item,{label:__("开户行")},n("bank_name",{initialValue:g.bank_name,rules:[{required:!0,message:__("请填写开户行")},{validator:function(e,t,n){if(t&&t.length>42)return n("不能超过 42 个字符");n()}}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写开户行")})))),l.a.createElement(a.a,{push:2,span:11},l.a.createElement(i.a.Item,{label:__("银行账户")},n("bank_account",{initialValue:g.bank_account,rules:[{required:!0,message:__("请填写银行账户")},{validator:function(e,t,n){if(t&&t.length>64)return n("不能超过 64 个字符");n()}}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写银行账户")}))))),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:24},l.a.createElement(i.a.Item,{label:__("公司注册地址")},n("address",{initialValue:g.address,rules:[{required:!0,message:__("请填写公司注册地址")},{validator:function(e,t,n){if(t&&t.length>170)return n("不能超过 170 个字符");n()}}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写公司注册地址")}))))),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:24,className:d.a.contactInfoTitle})),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:11},l.a.createElement(i.a.Item,{label:__("收件人")},n("contact_name",{initialValue:g.contact_name,rules:[{required:!0,message:__("请填写收件人姓名")}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写收件人姓名")})))),l.a.createElement(a.a,{push:2,span:11},l.a.createElement(i.a.Item,{label:__("收件人电话")},n("contact_telephone",{initialValue:g.contact_telephone,rules:[{required:!0,message:__("请填写收件人电话")}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写收件人电话")}))))),l.a.createElement(o.a,null,l.a.createElement(a.a,{span:24},l.a.createElement(i.a.Item,{label:__("快递地址")},n("detail_address",{initialValue:g.detail_address,rules:[{required:!0,message:__("请填写快递地址")}]})(l.a.createElement(c.a,{disabled:!w,placeholder:__("请填写快递地址")}))))),!v&&l.a.createElement(o.a,{className:d.a.receiptButtons},l.a.createElement(a.a,{span:24},l.a.createElement(r.a,{type:"primary",onClick:function(){return function(){if(!w)return e.setState({btnLoading:!0}),void p(e.props,"special");u((function(t){t||(h(!1),e.setState({editing:!1}))}))}()},loading:E},w?__("下一步"):b||__("确认开票")),l.a.createElement(r.a,{className:d.a.cancelButton,onClick:function(){return function(){if(w)return m(),void s();h(!0),e.setState({editing:!0})}()}},w?__("取消"):__("返回修改")))))}}])&&m(t.prototype,n),u&&m(t,u),Object.defineProperty(t,"prototype",{writable:!1}),f}(l.a.PureComponent);g.propTypes={handleClickReceiptConfirm:f.a.func.isRequired,handleApplyReceiptCancel:f.a.func.isRequired,handleReceiptChange:f.a.func.isRequired,form:f.a.object.isRequired,data:f.a.object,isFinished:f.a.bool,submitButtonText:f.a.string},t.a=g},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(28),o=n(0);function a(){var e=o.useReducer((function(e){return e+1}),0);return Object(r.a)(e,2)[1]}},function(e,t,n){"use strict";function r(e,t){return!!e&&e.contains(t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(964),o=n(2233),a=n.n(o);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(){};window.performance?window.performance.mark||(window.performance.mark=u):window.performance={mark:u};var l={},s="----MARK_INFO----";function f(e,t){l[e]||(l[e]=!0,t&&(e="".concat(e).concat(s).concat(t)),window.performance.mark(e))}document.addEventListener("visibilitychange",(function e(){if(document.removeEventListener("visibilitychange",e),performance&&performance.getEntriesByType){var t,n=performance.getEntriesByType("mark"),o={},c=i(n);try{for(c.s();!(t=c.n()).done;){var u=t.value;if(u.name.includes(s)){var l=u.name.split(s),f=l[0],d=l[1];o[f]=d}else o[u.name]=u.startTime.toFixed()}}catch(h){c.e(h)}finally{c.f()}var p=document.querySelector('meta[name="pagename"]');if(!p)return;var m=p.content;a.a.forEach((function(e){if(e.pagename===m){var t={},n=!1;Object.keys(e.keyMap).forEach((function(r){t[r]=o[e.keyMap[r]],r.startsWith("m")&&(+t[r]>6e6||+t[r]<0)&&(n=!0)})),n||r.a.logPerf(e.code,e.msg,t)}}))}}))},,function(e,t,n){"use strict";e.exports={STATUS:{reject:-2,checking:-1,disabled:0,normal:1}}},function(e,t,n){"use strict";e.exports={STATUS:{idle:0,scheduled:1,processing:2,pausing:3,complete:4},STATUS_NAME:["未发送","已调度","发送中","已暂停","已完成"]}},,,,,,,,,,,,,,,,function(e,t,n){var r=n(1289);e.exports=function(e){return r(e,4)}},,,function(e,t,n){var r=n(842);e.exports=function(e){return"number"==typeof e&&e==r(e)}},function(e,t,n){"use strict";n(162),n(305)},,,,,,,function(e,t,n){var r=n(1005),o=n(2526),a=n(2527),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},function(e,t,n){var r=n(1980),o=n(1978);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){var r=n(1989);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(1006),o=n(2169),a=n(2170);e.exports=function(e,t){return a(o(e,t,r),e+"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.call=i,t.default=void 0,t.note=a,t.noteOnce=function(e,t){i(a,e,t)},t.resetWarned=function(){r={}},t.warning=o,t.warningOnce=c;var r={};function o(e,t){0}function a(e,t){0}function i(e,t,n){t||r[n]||(e(!1,n),r[n]=!0)}function c(e,t){i(o,e,t)}var u=c;t.default=u},,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n.n(r);t.a=function(){return o.a.createElement("div",null)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r="data-lark-popup-container",o="data-lark-doc-embed",a="doc_embed"},function(e,t,n){"use strict";n(696);var r=n(319),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(996),l=n(357),s=n(287),f=n(260),d=n(633),p=n(109);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,n,o,i=v(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).breadcrumbRef=a.a.createRef(),t}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.group,o=t.book,i=t.doc,c=t.separator,f=t.noPrivateTip,d=t.noDocPrivateTip,m=t.docLevelUrl,h=t.noGroup,y=t.showBookIcon,v=t.isNote,b=t.disableClickOnIcon,g=o?o.namespace||"".concat(n.login,"/").concat(o.slug):null;return v?null:a.a.createElement(p.a,null,a.a.createElement("div",{className:"lark-breadcrumb",ref:this.breadcrumbRef},y&&a.a.createElement(l.a.Icon,{group:n,book:o}),a.a.createElement(r.a,{separator:c},!h&&n&&a.a.createElement(r.a.Item,{href:"/".concat(n.login)},a.a.createElement(u.a.Name,{user:n,className:"".concat(o||i?"":"lark-breadcrumb-current")})),o&&(b?a.a.createElement(r.a.Item,{className:"lark-breadcrumb-link-ellipsis"},a.a.createElement("span",{className:"".concat(i?"":"lark-breadcrumb-current")},a.a.createElement(l.a.Title,{group:n,book:o,showBookIcon:!1,showPrivateIcon:!f,href:"/".concat(g),getPopupContainer:function(){return e.breadcrumbRef.current}}))):a.a.createElement(r.a.Item,{href:"/".concat(g),className:"lark-breadcrumb-link-ellipsis"},a.a.createElement("span",{className:"".concat(i?"":"lark-breadcrumb-current")},a.a.createElement(l.a.Title,{group:n,book:o,showBookIcon:!1,showPrivateIcon:!f,getPopupContainer:function(){return e.breadcrumbRef.current}})))),i&&a.a.createElement(r.a.Item,{className:"header-crumb-doc",href:m||"/".concat(g,"/").concat(i.slug)},a.a.createElement("span",{className:"lark-breadcrumb-current"},a.a.createElement(s.a.Title,{doc:i})),!d&&a.a.createElement(s.a.AccessScope,{group:n,book:o,doc:i,getPopupContainer:function(){return e.breadcrumbRef.current}})))))}}])&&h(t.prototype,n),o&&h(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.PureComponent);_.propTypes={group:c.a.object.isRequired,book:c.a.object,doc:c.a.object,separator:c.a.node,noPrivateTip:c.a.bool,noDocPrivateTip:c.a.bool,docLevelUrl:c.a.string,noGroup:c.a.bool,showBookIcon:c.a.bool,isNote:c.a.bool,disableClickOnIcon:c.a.bool},_.Logo=function(e){var t=e.separator,n=e.organization,r=e.allowClick,o=n&&n.id?a.a.createElement(f.a.Logo,{src:n.logo,size:28}):a.a.createElement(d.a.MiniYuque,{height:"40"});return a.a.createElement("span",{className:"lark-breadcrumb-logo"},r?a.a.createElement("a",{href:"/",className:"lark-logo"},o):o,t&&a.a.createElement("span",{className:"lark-breadcrumb-separator"},t))},_.Logo.defaultProps={allowClick:!0},_.Logo.propTypes={separator:c.a.node,organization:c.a.object,allowClick:c.a.bool};t.a=_},,,function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(55),i=n(11),c=n(57),u=n(58),l=n(203),s=n(66),f=n(72),d=n(0),p=n(10),m=n.n(p),h=n(1021),y=n(221),v=function(e){for(var t=e.prefixCls,n=e.level,r=e.isStart,a=e.isEnd,i="".concat(t,"-indent-unit"),c=[],u=0;u<n;u+=1){var l;c.push(d.createElement("span",{key:u,className:m()(i,(l={},Object(o.a)(l,"".concat(i,"-start"),r[u]),Object(o.a)(l,"".concat(i,"-end"),a[u]),l))}))}return d.createElement("span",{"aria-hidden":"true",className:"".concat(t,"-indent")},c)},b=n(202),g="open",_="close",w=function(e){Object(s.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments)).state={dragNodeHighlight:!1},e.onSelectorClick=function(t){(0,e.props.context.onNodeClick)(t,Object(b.b)(e.props)),e.isSelectable()?e.onSelect(t):e.onCheck(t)},e.onSelectorDoubleClick=function(t){(0,e.props.context.onNodeDoubleClick)(t,Object(b.b)(e.props))},e.onSelect=function(t){if(!e.isDisabled()){var n=e.props.context.onNodeSelect;t.preventDefault(),n(t,Object(b.b)(e.props))}},e.onCheck=function(t){if(!e.isDisabled()){var n=e.props,r=n.disableCheckbox,o=n.checked,a=e.props.context.onNodeCheck;if(e.isCheckable()&&!r){t.preventDefault();var i=!o;a(t,Object(b.b)(e.props),i)}}},e.onMouseEnter=function(t){(0,e.props.context.onNodeMouseEnter)(t,Object(b.b)(e.props))},e.onMouseLeave=function(t){(0,e.props.context.onNodeMouseLeave)(t,Object(b.b)(e.props))},e.onContextMenu=function(t){(0,e.props.context.onNodeContextMenu)(t,Object(b.b)(e.props))},e.onDragStart=function(t){var n=e.props.context.onNodeDragStart;t.stopPropagation(),e.setState({dragNodeHighlight:!0}),n(t,Object(l.a)(e));try{t.dataTransfer.setData("text/plain","")}catch(r){}},e.onDragEnter=function(t){var n=e.props.context.onNodeDragEnter;t.preventDefault(),t.stopPropagation(),n(t,Object(l.a)(e))},e.onDragOver=function(t){var n=e.props.context.onNodeDragOver;t.preventDefault(),t.stopPropagation(),n(t,Object(l.a)(e))},e.onDragLeave=function(t){var n=e.props.context.onNodeDragLeave;t.stopPropagation(),n(t,Object(l.a)(e))},e.onDragEnd=function(t){var n=e.props.context.onNodeDragEnd;t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,Object(l.a)(e))},e.onDrop=function(t){var n=e.props.context.onNodeDrop;t.preventDefault(),t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,Object(l.a)(e))},e.onExpand=function(t){var n=e.props,r=n.loading,o=n.context.onNodeExpand;r||o(t,Object(b.b)(e.props))},e.setSelectHandle=function(t){e.selectHandle=t},e.getNodeState=function(){var t=e.props.expanded;return e.isLeaf()?null:t?g:_},e.hasChildren=function(){var t=e.props.eventKey;return!!((e.props.context.keyEntities[t]||{}).children||[]).length},e.isLeaf=function(){var t=e.props,n=t.isLeaf,r=t.loaded,o=e.props.context.loadData,a=e.hasChildren();return!1!==n&&(n||!o&&!a||o&&r&&!a)},e.isDisabled=function(){var t=e.props.disabled;return!(!e.props.context.disabled&&!t)},e.isCheckable=function(){var t=e.props.checkable,n=e.props.context.checkable;return!(!n||!1===t)&&n},e.syncLoadData=function(t){var n=t.expanded,r=t.loading,o=t.loaded,a=e.props.context,i=a.loadData,c=a.onNodeLoad;r||i&&n&&!e.isLeaf()&&(e.hasChildren()||o||c(Object(b.b)(e.props)))},e.renderSwitcherIconDom=function(t){var n=e.props.switcherIcon,r=e.props.context.switcherIcon,o=n||r;return"function"==typeof o?o(Object(i.a)(Object(i.a)({},e.props),{},{isLeaf:t})):o},e.renderSwitcher=function(){var t=e.props.expanded,n=e.props.context.prefixCls;if(e.isLeaf()){var r=e.renderSwitcherIconDom(!0);return!1!==r?d.createElement("span",{className:m()("".concat(n,"-switcher"),"".concat(n,"-switcher-noop"))},r):null}var o=m()("".concat(n,"-switcher"),"".concat(n,"-switcher_").concat(t?g:_)),a=e.renderSwitcherIconDom(!1);return!1!==a?d.createElement("span",{onClick:e.onExpand,className:o},a):null},e.renderCheckbox=function(){var t=e.props,n=t.checked,r=t.halfChecked,o=t.disableCheckbox,a=e.props.context.prefixCls,i=e.isDisabled(),c=e.isCheckable();if(!c)return null;var u="boolean"!=typeof c?c:null;return d.createElement("span",{className:m()("".concat(a,"-checkbox"),n&&"".concat(a,"-checkbox-checked"),!n&&r&&"".concat(a,"-checkbox-indeterminate"),(i||o)&&"".concat(a,"-checkbox-disabled")),onClick:e.onCheck},u)},e.renderIcon=function(){var t=e.props.loading,n=e.props.context.prefixCls;return d.createElement("span",{className:m()("".concat(n,"-iconEle"),"".concat(n,"-icon__").concat(e.getNodeState()||"docu"),t&&"".concat(n,"-icon_loading"))})},e.renderSelector=function(){var t,n,r=e.state.dragNodeHighlight,o=e.props,a=o.title,i=o.selected,c=o.icon,u=o.loading,l=o.data,s=e.props.context,f=s.prefixCls,p=s.showIcon,h=s.icon,y=s.draggable,v=s.loadData,b=s.titleRender,g=e.isDisabled(),_="function"==typeof y?y(l):y,w="".concat(f,"-node-content-wrapper");if(p){var E=c||h;t=E?d.createElement("span",{className:m()("".concat(f,"-iconEle"),"".concat(f,"-icon__customize"))},"function"==typeof E?E(e.props):E):e.renderIcon()}else v&&u&&(t=e.renderIcon());n="function"==typeof a?a(l):b?b(l):a;var O=d.createElement("span",{className:"".concat(f,"-title")},n);return d.createElement("span",{ref:e.setSelectHandle,title:"string"==typeof a?a:"",className:m()("".concat(w),"".concat(w,"-").concat(e.getNodeState()||"normal"),!g&&(i||r)&&"".concat(f,"-node-selected"),!g&&_&&"draggable"),draggable:!g&&_||void 0,"aria-grabbed":!g&&_||void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,onClick:e.onSelectorClick,onDoubleClick:e.onSelectorDoubleClick,onDragStart:_?e.onDragStart:void 0},t,O,e.renderDropIndicator())},e.renderDropIndicator=function(){var t=e.props,n=t.disabled,r=t.eventKey,o=e.props.context,a=o.draggable,i=o.dropLevelOffset,c=o.dropPosition,u=o.prefixCls,l=o.indent,s=o.dropIndicatorRender,f=o.dragOverNodeKey,d=o.direction;return!n&&!1!==a&&f===r?s({dropPosition:c,dropLevelOffset:i,indent:l,prefixCls:u,direction:d}):null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var e=this.props.selectable,t=this.props.context.selectable;return"boolean"==typeof e?e:t}},{key:"render",value:function(){var e,t=this.props,n=t.eventKey,i=t.className,c=t.style,u=t.dragOver,l=t.dragOverGapTop,s=t.dragOverGapBottom,f=t.isLeaf,p=t.isStart,h=t.isEnd,g=t.expanded,_=t.selected,w=t.checked,E=t.halfChecked,O=t.loading,x=t.domRef,j=t.active,k=t.data,S=t.onMouseMove,C=Object(a.a)(t,["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove"]),N=this.props.context,P=N.prefixCls,T=N.filterTreeNode,A=N.draggable,L=N.keyEntities,I=N.dropContainerKey,R=N.dropTargetKey,D=this.isDisabled(),M=Object(y.f)(C),F=(L[n]||{}).level,B=h[h.length-1],U="function"==typeof A?A(k):A;return d.createElement("div",Object(r.default)({ref:x,className:m()(i,"".concat(P,"-treenode"),(e={},Object(o.a)(e,"".concat(P,"-treenode-disabled"),D),Object(o.a)(e,"".concat(P,"-treenode-switcher-").concat(g?"open":"close"),!f),Object(o.a)(e,"".concat(P,"-treenode-checkbox-checked"),w),Object(o.a)(e,"".concat(P,"-treenode-checkbox-indeterminate"),E),Object(o.a)(e,"".concat(P,"-treenode-selected"),_),Object(o.a)(e,"".concat(P,"-treenode-loading"),O),Object(o.a)(e,"".concat(P,"-treenode-active"),j),Object(o.a)(e,"".concat(P,"-treenode-leaf-last"),B),Object(o.a)(e,"drop-target",R===n),Object(o.a)(e,"drop-container",I===n),Object(o.a)(e,"drag-over",!D&&u),Object(o.a)(e,"drag-over-gap-top",!D&&l),Object(o.a)(e,"drag-over-gap-bottom",!D&&s),Object(o.a)(e,"filter-node",T&&T(Object(b.b)(this.props))),e)),style:c,onDragEnter:U?this.onDragEnter:void 0,onDragOver:U?this.onDragOver:void 0,onDragLeave:U?this.onDragLeave:void 0,onDrop:U?this.onDrop:void 0,onDragEnd:U?this.onDragEnd:void 0,onMouseMove:S},M),d.createElement(v,{prefixCls:P,level:F,isStart:p,isEnd:h}),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(d.Component),E=function(e){return d.createElement(h.a.Consumer,null,(function(t){return d.createElement(w,Object(r.default)({},e,{context:t}))}))};E.displayName="TreeNode",E.defaultProps={title:"---"},E.isTreeNode=1;t.a=E},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(39),o=n.n(r);function a(e){return e instanceof HTMLElement?e:o.a.findDOMNode(e)}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n(14),o=n(382),a=Object(r.default)({},o.a.Modal);function i(e){a=e?Object(r.default)(Object(r.default)({},a),e):Object(r.default)({},o.a.Modal)}function c(){return a}},function(e,t,n){"use strict";e.exports={retryInterval:5e3,STATUS:{idle:0,scheduled:1,processing:2,complete:3}}},function(e,t,n){"use strict";t.a={wrapper:"index-module_wrapper_v4NAg",autoHeight:"index-module_autoHeight_ueCPS",show:"index-module_show_T1qbj",main:"index-module_main_HsmlC",forceNoBackGround:"index-module_forceNoBackGround_J5u2Y"}},,,function(e,t,n){"use strict";n(162),n(375)},,,,,function(e,t,n){"use strict";var r=n(14),o=n(28),a=n(0),i=n(10),c=n.n(i),u=n(163),l=n(498),s=n(70),f=n(151),d=n(105),p=n(851),m=n(158),h=n(382),y=n(257),v=n(1212),b=n(118),g=n(262),_=void 0,w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},E=a.forwardRef((function(e,t){var n=Object(u.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),i=Object(o.a)(n,2),l=i[0],E=i[1],O=function(t,n){var r;E(t),null===(r=e.onVisibleChange)||void 0===r||r.call(e,t,n)},x=function(t){var n;O(!1,t),null===(n=e.onConfirm)||void 0===n||n.call(_,t)},j=function(t){var n;O(!1,t),null===(n=e.onCancel)||void 0===n||n.call(_,t)},k=a.useContext(y.b).getPrefixCls,S=e.prefixCls,C=e.placement,N=e.children,P=e.overlayClassName,T=w(e,["prefixCls","placement","children","overlayClassName"]),A=k("popover",S),L=k("popconfirm",S),I=c()(L,P),R=a.createElement(m.a,{componentName:"Popconfirm",defaultLocale:h.a.Popconfirm},(function(t){return function(t,n){var o=e.okButtonProps,i=e.cancelButtonProps,c=e.title,u=e.cancelText,l=e.okText,s=e.okType,f=e.icon;return a.createElement("div",{className:"".concat(t,"-inner-content")},a.createElement("div",{className:"".concat(t,"-message")},f,a.createElement("div",{className:"".concat(t,"-message-title")},Object(v.a)(c))),a.createElement("div",{className:"".concat(t,"-buttons")},a.createElement(d.a,Object(r.default)({onClick:j,size:"small"},i),u||n.cancelText),a.createElement(d.a,Object(r.default)({onClick:x},Object(p.a)(s),{size:"small"},o),l||n.okText)))}(A,t)})),D=k();return a.createElement(f.a,Object(r.default)({},T,{prefixCls:A,placement:C,onVisibleChange:function(t){e.disabled||O(t)},visible:l,overlay:R,overlayClassName:I,ref:t,transitionName:Object(g.b)(D,"zoom-big",e.transitionName)}),Object(b.a)(N,{onKeyDown:function(e){var t,n;a.isValidElement(N)&&(null===(n=null==N?void 0:(t=N.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===s.a.ESC&&l&&O(!1,e)}(e)}}))}));E.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:a.createElement(l.a,null),disabled:!1},t.a=E},function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(0),i=n(10),c=n.n(i),u=n(126),l=n(257),s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},f=function(e){var t=e.prefixCls,n=e.className,i=e.hoverable,u=void 0===i||i,f=s(e,["prefixCls","className","hoverable"]);return a.createElement(l.a,null,(function(e){var i=(0,e.getPrefixCls)("card",t),l=c()("".concat(i,"-grid"),n,Object(r.a)({},"".concat(i,"-grid-hoverable"),u));return a.createElement("div",Object(o.default)({},f,{className:l}))}))},d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},p=function(e){return a.createElement(l.a,null,(function(t){var n=t.getPrefixCls,r=e.prefixCls,i=e.className,u=e.avatar,l=e.title,s=e.description,f=d(e,["prefixCls","className","avatar","title","description"]),p=n("card",r),m=c()("".concat(p,"-meta"),i),h=u?a.createElement("div",{className:"".concat(p,"-meta-avatar")},u):null,y=l?a.createElement("div",{className:"".concat(p,"-meta-title")},l):null,v=s?a.createElement("div",{className:"".concat(p,"-meta-description")},s):null,b=y||v?a.createElement("div",{className:"".concat(p,"-meta-detail")},y,v):null;return a.createElement("div",Object(o.default)({},f,{className:m}),h,b)}))},m=n(378),h=n(614),y=n(440),v=n(132),b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var g=function(e){var t,n,i,s=a.useContext(l.b),d=s.getPrefixCls,p=s.direction,g=a.useContext(v.b),_=e.prefixCls,w=e.className,E=e.extra,O=e.headStyle,x=void 0===O?{}:O,j=e.bodyStyle,k=void 0===j?{}:j,S=e.title,C=e.loading,N=e.bordered,P=void 0===N||N,T=e.size,A=e.type,L=e.cover,I=e.actions,R=e.tabList,D=e.children,M=e.activeTabKey,F=e.defaultActiveTabKey,B=e.tabBarExtraContent,U=e.hoverable,z=e.tabProps,G=void 0===z?{}:z,V=b(e,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),Y=d("card",_),q=0===k.padding||"0px"===k.padding?{padding:24}:void 0,H=a.createElement("div",{className:"".concat(Y,"-loading-block")}),W=a.createElement("div",{className:"".concat(Y,"-loading-content"),style:q},a.createElement(h.a,{gutter:8},a.createElement(y.a,{span:22},H)),a.createElement(h.a,{gutter:8},a.createElement(y.a,{span:8},H),a.createElement(y.a,{span:15},H)),a.createElement(h.a,{gutter:8},a.createElement(y.a,{span:6},H),a.createElement(y.a,{span:18},H)),a.createElement(h.a,{gutter:8},a.createElement(y.a,{span:13},H),a.createElement(y.a,{span:9},H)),a.createElement(h.a,{gutter:8},a.createElement(y.a,{span:4},H),a.createElement(y.a,{span:3},H),a.createElement(y.a,{span:16},H))),K=void 0!==M,$=Object(o.default)(Object(o.default)({},G),(t={},Object(r.a)(t,K?"activeKey":"defaultActiveKey",K?M:F),Object(r.a)(t,"tabBarExtraContent",B),t)),Q=R&&R.length?a.createElement(m.a,Object(o.default)({size:"large"},$,{className:"".concat(Y,"-head-tabs"),onChange:function(t){var n;null===(n=e.onTabChange)||void 0===n||n.call(e,t)}}),R.map((function(e){return a.createElement(m.a.TabPane,{tab:e.tab,disabled:e.disabled,key:e.key})}))):null;(S||E||Q)&&(i=a.createElement("div",{className:"".concat(Y,"-head"),style:x},a.createElement("div",{className:"".concat(Y,"-head-wrapper")},S&&a.createElement("div",{className:"".concat(Y,"-head-title")},S),E&&a.createElement("div",{className:"".concat(Y,"-extra")},E)),Q));var X,J=L?a.createElement("div",{className:"".concat(Y,"-cover")},L):null,Z=a.createElement("div",{className:"".concat(Y,"-body"),style:k},C?W:D),ee=I&&I.length?a.createElement("ul",{className:"".concat(Y,"-actions")},function(e){return e.map((function(t,n){return a.createElement("li",{style:{width:"".concat(100/e.length,"%")},key:"action-".concat(n)},a.createElement("span",null,t))}))}(I)):null,te=Object(u.a)(V,["onTabChange"]),ne=T||g,re=c()(Y,(n={},Object(r.a)(n,"".concat(Y,"-loading"),C),Object(r.a)(n,"".concat(Y,"-bordered"),P),Object(r.a)(n,"".concat(Y,"-hoverable"),U),Object(r.a)(n,"".concat(Y,"-contain-grid"),(a.Children.forEach(e.children,(function(e){e&&e.type&&e.type===f&&(X=!0)})),X)),Object(r.a)(n,"".concat(Y,"-contain-tabs"),R&&R.length),Object(r.a)(n,"".concat(Y,"-").concat(ne),ne),Object(r.a)(n,"".concat(Y,"-type-").concat(A),!!A),Object(r.a)(n,"".concat(Y,"-rtl"),"rtl"===p),n),w);return a.createElement("div",Object(o.default)({},te,{className:re}),i,J,Z,ee)};g.Grid=f,g.Meta=p;t.a=g},,function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(28),i=n(0),c=n(261),u=n(499),l=n(500),s=n(540),f=n(541),d=n(497),p=n(498),m=n(606),h=n(154),y=n(228),v=n(10),b=n.n(v),g=n(257),_=n(1320),w=n(57),E=n(58),O=n(66),x=n(72),j=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(w.a)(this,n),(e=t.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},e}return Object(E.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.description,r=e.children,o=this.state,a=o.error,c=o.info,u=c&&c.componentStack?c.componentStack:null,l=void 0===t?(a||"").toString():t,s=void 0===n?u:n;return a?i.createElement(T,{type:"error",message:l,description:i.createElement("pre",null,s)}):r}}]),n}(i.Component),k=n(118),S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},C={success:d.a,info:m.a,error:h.a,warning:p.a},N={success:u.a,info:s.a,error:f.a,warning:l.a},P=function(e){var t,n=e.description,u=e.prefixCls,l=e.message,s=e.banner,f=e.className,d=void 0===f?"":f,p=e.style,m=e.onMouseEnter,h=e.onMouseLeave,v=e.onClick,w=e.afterClose,E=e.showIcon,O=e.closable,x=e.closeText,j=e.action,P=S(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),T=i.useState(!1),A=Object(a.a)(T,2),L=A[0],I=A[1],R=i.useRef(),D=i.useContext(g.b),M=D.getPrefixCls,F=D.direction,B=M("alert",u),U=function(e){var t;I(!0),null===(t=P.onClose)||void 0===t||t.call(P,e)},z=!!x||O,G=function(){var e=P.type;return void 0!==e?e:s?"warning":"info"}(),V=!(!s||void 0!==E)||E,Y=b()(B,"".concat(B,"-").concat(G),(t={},Object(o.a)(t,"".concat(B,"-with-description"),!!n),Object(o.a)(t,"".concat(B,"-no-icon"),!V),Object(o.a)(t,"".concat(B,"-banner"),!!s),Object(o.a)(t,"".concat(B,"-rtl"),"rtl"===F),t),d),q=Object(_.a)(P);return i.createElement(y.b,{visible:!L,motionName:"".concat(B,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:w},(function(e){var t,a,u=e.className,s=e.style;return i.createElement("div",Object(r.default)({ref:R,"data-show":!L,className:b()(Y,u),style:Object(r.default)(Object(r.default)({},p),s),onMouseEnter:m,onMouseLeave:h,onClick:v,role:"alert"},q),V?(t=P.icon,a=(n?N:C)[G]||null,t?Object(k.c)(t,i.createElement("span",{className:"".concat(B,"-icon")},t),(function(){return{className:b()("".concat(B,"-icon"),Object(o.a)({},t.props.className,t.props.className))}})):i.createElement(a,{className:"".concat(B,"-icon")})):null,i.createElement("div",{className:"".concat(B,"-content")},i.createElement("div",{className:"".concat(B,"-message")},l),i.createElement("div",{className:"".concat(B,"-description")},n)),j?i.createElement("div",{className:"".concat(B,"-action")},j):null,z?i.createElement("button",{type:"button",onClick:U,className:"".concat(B,"-close-icon"),tabIndex:0},x?i.createElement("span",{className:"".concat(B,"-close-text")},x):i.createElement(c.a,null)):null)}))};P.ErrorBoundary=j;var T=t.a=P},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(10),c=n.n(i),u=n(41),l=n(28),s=n(55),f=n(70),d=n(181),p=n(57),m=n(58);function h(){return"function"==typeof BigInt}function y(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),(t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(t="0".concat(t));var r=t||"0",o=r.split("."),a=o[0]||"0",i=o[1]||"0";"0"===a&&"0"===i&&(n=!1);var c=n?"-":"";return{negative:n,negativeStr:c,trimStr:r,integerStr:a,decimalStr:i,fullStr:"".concat(c).concat(r)}}function v(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function b(e){var t=String(e);if(v(e)){var n=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return(null==r?void 0:r[1])&&(n+=r[1].length),n}return t.includes(".")&&_(t)?t.length-t.indexOf(".")-1:0}function g(e){var t=String(e);if(v(e)){if(e>Number.MAX_SAFE_INTEGER)return String(h()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(h()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(b(t))}return y(t).fullStr}function _(e){return"number"==typeof e?!Number.isNaN(e):!!e&&(/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e))}var w=function(){function e(t){Object(p.a)(this,e),this.origin="",(t||0===t)&&String(t).trim()?(this.origin=String(t),this.number=Number(t)):this.empty=!0}return Object(m.a)(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=Number(t);if(Number.isNaN(n))return this;var r=this.number+n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var o=Math.max(b(this.number),b(n));return new e(r.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(null==e?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?this.isInvalidate()?"":g(this.number):this.origin}}]),e}(),E=function(){function e(t){if(Object(p.a)(this,e),this.origin="",(t||0===t)&&String(t).trim())if(this.origin=String(t),"-"!==t){var n=t;if(v(n)&&(n=Number(n)),_(n="string"==typeof n?n:g(n))){var r=y(n);this.negative=r.negative;var o=r.trimStr.split(".");this.integer=BigInt(o[0]);var a=o[1]||"0";this.decimal=BigInt(a),this.decimalLen=a.length}else this.nan=!0}else this.nan=!0;else this.empty=!0}return Object(m.a)(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var t="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(t)}},{key:"negate",value:function(){var t=new e(this.toString());return t.negative=!t.negative,t}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=new e(t);if(n.isInvalidate())return this;var r=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),o=y((this.alignDecimal(r)+n.alignDecimal(r)).toString()),a=o.negativeStr,i=o.trimStr,c="".concat(a).concat(i.padStart(r+1,"0"));return new e("".concat(c.slice(0,-r),".").concat(c.slice(-r)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(null==e?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?this.isInvalidate()?"":y("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}();function O(e){return h()?new E(e):new w(e)}function x(e,t,n){if(""===e)return"";var r=y(e),o=r.negativeStr,a=r.integerStr,i=r.decimalStr,c="".concat(t).concat(i),u="".concat(o).concat(a);if(n>=0){var l=Number(i[n]);return l>=5?x(O(e).add("0.".concat("0".repeat(n)).concat(10-l)).toString(),t,n):0===n?u:"".concat(u).concat(t).concat(i.padEnd(n,"0").slice(0,n))}return".0"===c?u:"".concat(u).concat(c)}var j=n(847);function k(e){var t=e.prefixCls,n=e.upNode,i=e.downNode,u=e.upDisabled,l=e.downDisabled,s=e.onStep,f=a.useRef(),d=a.useRef();d.current=s;var p=function(e,t){e.preventDefault(),d.current(t),f.current=setTimeout((function e(){d.current(t),f.current=setTimeout(e,200)}),600)},m=function(){clearTimeout(f.current)};if(a.useEffect((function(){return m}),[]),Object(j.a)())return null;var h="".concat(t,"-handler"),y=c()(h,"".concat(h,"-up"),Object(o.a)({},"".concat(h,"-up-disabled"),u)),v=c()(h,"".concat(h,"-down"),Object(o.a)({},"".concat(h,"-down-disabled"),l)),b={unselectable:"on",role:"button",onMouseUp:m,onMouseLeave:m};return a.createElement("div",{className:"".concat(h,"-wrap")},a.createElement("span",Object(r.default)({},b,{onMouseDown:function(e){p(e,!0)},"aria-label":"Increase Value","aria-disabled":u,className:y}),n||a.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),a.createElement("span",Object(r.default)({},b,{onMouseDown:function(e){p(e,!1)},"aria-label":"Decrease Value","aria-disabled":l,className:v}),i||a.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}var S=n(85);var C=n(353),N=Object(C.a)()?a.useLayoutEffect:a.useEffect;function P(e,t){var n=a.useRef(!1);N((function(){if(n.current)return e();n.current=!0}),t)}var T=function(e,t){return e||t.isEmpty()?t.toString():t.toNumber()},A=function(e){var t=O(e);return t.isInvalidate()?null:t},L=a.forwardRef((function(e,t){var n,i=e.prefixCls,p=void 0===i?"rc-input-number":i,m=e.className,h=e.style,y=e.min,v=e.max,w=e.step,E=void 0===w?1:w,j=e.defaultValue,C=e.value,N=e.disabled,L=e.readOnly,I=e.upHandler,R=e.downHandler,D=e.keyboard,M=e.stringMode,F=e.parser,B=e.formatter,U=e.precision,z=e.decimalSeparator,G=e.onChange,V=e.onInput,Y=e.onPressEnter,q=e.onStep,H=Object(s.a)(e,["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep"]),W="".concat(p,"-input"),K=a.useRef(null),$=a.useState(!1),Q=Object(l.a)($,2),X=Q[0],J=Q[1],Z=a.useRef(!1),ee=a.useRef(!1),te=a.useState((function(){return O(null!=C?C:j)})),ne=Object(l.a)(te,2),re=ne[0],oe=ne[1];var ae=a.useCallback((function(e,t){if(!t)return U>=0?U:Math.max(b(e),b(E))}),[U,E]),ie=a.useCallback((function(e){var t=String(e);if(F)return F(t);var n=t;return z&&(n=n.replace(z,".")),n.replace(/[^\w.-]+/g,"")}),[F,z]),ce=a.useCallback((function(e,t){if(B)return B(e);var n="number"==typeof e?g(e):e;if(!t){var r=ae(n,t);if(_(n)&&(z||r>=0))n=x(n,z||".",r)}return n}),[B,ae,z]),ue=a.useState((function(){var e=null!=j?j:C;return re.isInvalidate()&&["string","number"].includes(Object(u.a)(e))?Number.isNaN(e)?"":e:ce(re.toString(),!1)})),le=Object(l.a)(ue,2),se=le[0],fe=le[1];function de(e,t){fe(ce(e.isInvalidate()?e.toString(!1):e.toString(!t),t))}var pe,me,he,ye=a.useMemo((function(){return A(v)}),[v]),ve=a.useMemo((function(){return A(y)}),[y]),be=a.useMemo((function(){return!(!ye||!re||re.isInvalidate())&&ye.lessEquals(re)}),[ye,re]),ge=a.useMemo((function(){return!(!ve||!re||re.isInvalidate())&&re.lessEquals(ve)}),[ve,re]),_e=(pe=K.current,me=X,he=Object(a.useRef)(null),[function(){try{var e=pe.selectionStart,t=pe.selectionEnd,n=pe.value,r=n.substring(0,e),o=n.substring(t);he.current={start:e,end:t,value:n,beforeTxt:r,afterTxt:o}}catch(a){}},function(){if(pe&&he.current&&me)try{var e=pe.value,t=he.current,n=t.beforeTxt,r=t.afterTxt,o=t.start,a=e.length;if(e.endsWith(r))a=e.length-he.current.afterTxt.length;else if(e.startsWith(n))a=n.length;else{var i=n[o-1],c=e.indexOf(i,o-1);-1!==c&&(a=c+1)}pe.setSelectionRange(a,a)}catch(u){Object(S.a)(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(u.message))}}]),we=Object(l.a)(_e,2),Ee=we[0],Oe=we[1],xe=function(e){return ye&&!e.lessEquals(ye)?ye:ve&&!ve.lessEquals(e)?ve:null},je=function(e){return!xe(e)},ke=function(e,t){var n,r=e,o=je(r)||r.isEmpty();if(r.isEmpty()||t||(r=xe(r)||r,o=!0),!L&&!N&&o){var a=r.toString(),i=ae(a,t);return i>=0&&(r=O(x(a,".",i))),r.equals(re)||(n=r,void 0===C&&oe(n),null==G||G(r.isEmpty()?null:T(M,r)),void 0===C&&de(r,t)),r}return re},Se=function(e){if(Ee(),fe(e),!ee.current){var t=O(ie(e));t.isNaN()||ke(t,!0)}},Ce=function(e){var t;if(!(e&&be||!e&&ge)){Z.current=!1;var n=O(E);e||(n=n.negate());var r=(re||O(0)).add(n.toString()),o=ke(r,!1);null==q||q(T(M,o),{offset:E,type:e?"up":"down"}),null===(t=K.current)||void 0===t||t.focus()}},Ne=function(e){var t=O(ie(se)),n=t;n=t.isNaN()?re:ke(t,e),void 0!==C?de(re,!1):n.isNaN()||de(n,!1)};return P((function(){re.isInvalidate()||de(re,!1)}),[U]),P((function(){var e=O(C);oe(e),(e.isNaN()||!Z.current||B)&&de(e,!1)}),[C]),P((function(){B&&Oe()}),[se]),a.createElement("div",{className:c()(p,m,(n={},Object(o.a)(n,"".concat(p,"-focused"),X),Object(o.a)(n,"".concat(p,"-disabled"),N),Object(o.a)(n,"".concat(p,"-readonly"),L),Object(o.a)(n,"".concat(p,"-not-a-number"),re.isNaN()),Object(o.a)(n,"".concat(p,"-out-of-range"),!re.isInvalidate()&&!je(re)),n)),style:h,onFocus:function(){J(!0)},onBlur:function(){Ne(!1),J(!1),Z.current=!1},onKeyDown:function(e){var t=e.which;Z.current=!0,t===f.a.ENTER&&(ee.current||(Z.current=!1),Ne(!0),null==Y||Y(e)),!1!==D&&!ee.current&&[f.a.UP,f.a.DOWN].includes(t)&&(Ce(f.a.UP===t),e.preventDefault())},onKeyUp:function(){Z.current=!1},onCompositionStart:function(){ee.current=!0},onCompositionEnd:function(){ee.current=!1,Se(K.current.value)}},a.createElement(k,{prefixCls:p,upNode:I,downNode:R,upDisabled:be,downDisabled:ge,onStep:Ce}),a.createElement("div",{className:"".concat(W,"-wrap")},a.createElement("input",Object(r.default)({autoComplete:"off",role:"spinbutton","aria-valuemin":y,"aria-valuemax":v,"aria-valuenow":re.isInvalidate()?null:re.toString(),step:E},H,{ref:Object(d.a)(K,t),className:W,value:se,onChange:function(e){var t=e.target.value;F||(t=t.replace(/。/g,".")),Se(t),null==V||V(t)},disabled:N,readOnly:L}))))}));L.displayName="InputNumber";var I=L,R=n(1063),D=n(348),M=n(257),F=n(132),B=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},U=a.forwardRef((function(e,t){var n,i=a.useContext(M.b),u=i.getPrefixCls,l=i.direction,s=a.useContext(F.b),f=e.className,d=e.size,p=e.prefixCls,m=e.bordered,h=void 0===m||m,y=e.readOnly,v=B(e,["className","size","prefixCls","bordered","readOnly"]),b=u("input-number",p),g=a.createElement(R.a,{className:"".concat(b,"-handler-up-inner")}),_=a.createElement(D.a,{className:"".concat(b,"-handler-down-inner")}),w=d||s,E=c()((n={},Object(o.a)(n,"".concat(b,"-lg"),"large"===w),Object(o.a)(n,"".concat(b,"-sm"),"small"===w),Object(o.a)(n,"".concat(b,"-rtl"),"rtl"===l),Object(o.a)(n,"".concat(b,"-readonly"),y),Object(o.a)(n,"".concat(b,"-borderless"),!h),n),f);return a.createElement(I,Object(r.default)({ref:t,className:E,upHandler:g,downHandler:_,prefixCls:b,readOnly:y},v))}));t.a=U},function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(41),i=n(40),c=n(28),u=n(15),l=n.n(u),s=n(0),f=n.n(s),d=n(57),p=n(58),m=n(66),h=n(72),y=n(55),v=n(542),b=n(429),g=n(10),_=n.n(g),w=n(563);function E(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(n){return t}}function O(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var n=new FormData;e.data&&Object.keys(e.data).forEach((function(t){var r=e.data[t];Array.isArray(r)?r.forEach((function(e){n.append("".concat(t,"[]"),e)})):n.append(t,r)})),e.file instanceof Blob?n.append(e.filename,e.file,e.file.name):n.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(function(e,t){var n="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),r=new Error(n);return r.status=t.status,r.method=e.method,r.url=e.action,r}(e,t),E(t)):e.onSuccess(E(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};return null!==r["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach((function(e){null!==r[e]&&t.setRequestHeader(e,r[e])})),t.send(n),{abort:function(){t.abort()}}}var x=+new Date,j=0;function k(){return"rc-upload-".concat(x,"-").concat(++j)}var S=n(85),C=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",o=e.type||"",a=o.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var n=r.toLowerCase(),i=t.toLowerCase(),c=[i];return".jpg"!==i&&".jpeg"!==i||(c=[".jpg",".jpeg"]),c.some((function(e){return n.endsWith(e)}))}return/\/\*$/.test(t)?a===t.replace(/\/.*$/,""):o===t||!!/^\w+$/.test(t)&&(Object(S.a)(!1,"Upload takes an invalidate 'accept' type '".concat(t,"'.Skip for check.")),!0)}))}return!0};var N=function(e,t,n){var r=function e(r,o){r.path=o||"",r.isFile?r.file((function(e){n(e)&&(r.fullPath&&!e.webkitRelativePath&&(Object.defineProperties(e,{webkitRelativePath:{writable:!0}}),e.webkitRelativePath=r.fullPath.replace(/^\//,""),Object.defineProperties(e,{webkitRelativePath:{writable:!1}})),t([e]))})):r.isDirectory&&function(e,t){var n=e.createReader(),r=[];!function e(){n.readEntries((function(n){var o=Array.prototype.slice.apply(n);r=r.concat(o),o.length?e():t(r)}))}()}(r,(function(t){t.forEach((function(t){e(t,"".concat(o).concat(r.name,"/"))}))}))};e.forEach((function(e){r(e.webkitGetAsEntry())}))},P=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],T=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={uid:k()},e.reqs={},e.fileInput=void 0,e._isMounted=void 0,e.onChange=function(t){var n=e.props,r=n.accept,o=n.directory,a=t.target.files,c=Object(i.a)(a).filter((function(e){return!o||C(e,r)}));e.uploadFiles(c),e.reset()},e.onClick=function(t){var n=e.fileInput;if(n){var r=e.props,o=r.children,a=r.onClick;if(o&&"button"===o.type){var i=n.parentNode;i.focus(),i.querySelector("button").blur()}n.click(),a&&a(t)}},e.onKeyDown=function(t){"Enter"===t.key&&e.onClick(t)},e.onFileDrop=function(t){var n=e.props.multiple;if(t.preventDefault(),"dragover"!==t.type)if(e.props.directory)N(Array.prototype.slice.call(t.dataTransfer.items),e.uploadFiles,(function(t){return C(t,e.props.accept)}));else{var r=Object(i.a)(t.dataTransfer.files).filter((function(t){return C(t,e.props.accept)}));!1===n&&(r=r.slice(0,1)),e.uploadFiles(r)}},e.uploadFiles=function(t){var n=Object(i.a)(t),r=n.map((function(t){return t.uid=k(),e.processFile(t,n)}));Promise.all(r).then((function(t){var n=e.props.onBatchStart;null==n||n(t.map((function(e){return{file:e.origin,parsedFile:e.parsedFile}}))),t.filter((function(e){return null!==e.parsedFile})).forEach((function(t){e.post(t)}))}))},e.processFile=function(){var t=Object(b.a)(Object(v.a)().mark((function t(n,r){var o,i,c,u,l,s,f,d,p;return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props.beforeUpload,i=n,!o){t.next=14;break}return t.prev=3,t.next=6,o(n,r);case 6:i=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),i=!1;case 12:if(!1!==i){t.next=14;break}return t.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!=typeof(c=e.props.action)){t.next=21;break}return t.next=18,c(n);case 18:u=t.sent,t.next=22;break;case 21:u=c;case 22:if("function"!=typeof(l=e.props.data)){t.next=29;break}return t.next=26,l(n);case 26:s=t.sent,t.next=30;break;case 29:s=l;case 30:return f="object"!==Object(a.a)(i)&&"string"!=typeof i||!i?n:i,d=f instanceof File?f:new File([f],n.name,{type:n.type}),(p=d).uid=n.uid,t.abrupt("return",{origin:n,data:s,parsedFile:p,action:u});case 35:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n){return t.apply(this,arguments)}}(),e.saveFileInput=function(t){e.fileInput=t},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(e){var t=this,n=e.data,r=e.origin,o=e.action,a=e.parsedFile;if(this._isMounted){var i=this.props,c=i.onStart,u=i.customRequest,l=i.name,s=i.headers,f=i.withCredentials,d=i.method,p=r.uid,m=u||O,h={action:o,filename:l,data:n,file:a,headers:s,withCredentials:f,method:d||"post",onProgress:function(e){var n=t.props.onProgress;null==n||n(e,a)},onSuccess:function(e,n){var r=t.props.onSuccess;null==r||r(e,a,n),delete t.reqs[p]},onError:function(e,n){var r=t.props.onError;null==r||r(e,n,a),delete t.reqs[p]}};c(r),this.reqs[p]=m(h)}}},{key:"reset",value:function(){this.setState({uid:k()})}},{key:"abort",value:function(e){var t=this.reqs;if(e){var n=e.uid?e.uid:e;t[n]&&t[n].abort&&t[n].abort(),delete t[n]}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort&&t[e].abort(),delete t[e]}))}},{key:"render",value:function(){var e,t=this.props,n=t.component,a=t.prefixCls,i=t.className,c=t.disabled,u=t.id,l=t.style,s=t.multiple,d=t.accept,p=t.capture,m=t.children,h=t.directory,v=t.openFileDialogOnClick,b=t.onMouseEnter,g=t.onMouseLeave,E=Object(y.a)(t,P),O=_()((e={},Object(r.a)(e,a,!0),Object(r.a)(e,"".concat(a,"-disabled"),c),Object(r.a)(e,i,i),e)),x=h?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},j=c?{}:{onClick:v?this.onClick:function(){},onKeyDown:v?this.onKeyDown:function(){},onMouseEnter:b,onMouseLeave:g,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return f.a.createElement(n,Object(o.default)({},j,{className:O,role:"button",style:l}),f.a.createElement("input",Object(o.default)({},Object(w.a)(E,{aria:!0,data:!0}),{id:u,type:"file",ref:this.saveFileInput,onClick:function(e){return e.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:d},x,{multiple:s,onChange:this.onChange},null!=p?{capture:p}:{})),m)}}]),n}(s.Component),A=T;function L(){}var I=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).uploader=void 0,e.saveUploader=function(t){e.uploader=t},e}return Object(p.a)(n,[{key:"abort",value:function(e){this.uploader.abort(e)}},{key:"render",value:function(){return f.a.createElement(A,Object(o.default)({},this.props,{ref:this.saveUploader}))}}]),n}(s.Component);I.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:L,onError:L,onSuccess:L,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var R=I,D=n(163),M=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},F=function(e,t){var n=e.style,r=e.height,a=M(e,["style","height"]);return s.createElement(ge,Object(o.default)({ref:t},a,{type:"drag",style:Object(o.default)(Object(o.default)({},n),{height:r})}))},B=s.forwardRef(F);B.displayName="Dragger";var U=B,z=n(228),G=n(208),V=n(1066),Y=n(1064),q=n(1065),H=n(118);function W(e){return Object(o.default)(Object(o.default)({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function K(e,t){var n=Object(i.a)(t),r=n.findIndex((function(t){return t.uid===e.uid}));return-1===r?n.push(e):n[r]=e,n}function $(e,t){var n=void 0!==e.uid?"uid":"name";return t.filter((function(t){return t[n]===e[n]}))[0]}var Q=function(e){return 0===e.indexOf("image/")},X=200;var J=n(262),Z=n(257),ee=n(105),te=n(639),ne=n(539),re=n(902),oe=n(1062),ae=n(151),ie=n(1270),ce=s.forwardRef((function(e,t){var n,a,i,u=e.prefixCls,l=e.className,f=e.style,d=e.locale,p=e.listType,m=e.file,h=e.items,y=e.progress,v=e.iconRender,b=e.actionIconRender,g=e.itemRender,w=e.isImgUrl,E=e.showPreviewIcon,O=e.showRemoveIcon,x=e.showDownloadIcon,j=e.removeIcon,k=e.downloadIcon,S=e.onPreview,C=e.onDownload,N=e.onClose,P=s.useState(!1),T=Object(c.a)(P,2),A=T[0],L=T[1],I=s.useRef();s.useEffect((function(){return I.current=setTimeout((function(){L(!0)}),300),function(){window.clearTimeout(I.current)}}),[]);var R="".concat(u,"-span"),D=v(m),M=s.createElement("div",{className:"".concat(u,"-text-icon")},D);if("picture"===p||"picture-card"===p)if("uploading"===m.status||!m.thumbUrl&&!m.url){var F,B=_()((F={},Object(r.a)(F,"".concat(u,"-list-item-thumbnail"),!0),Object(r.a)(F,"".concat(u,"-list-item-file"),"uploading"!==m.status),F));M=s.createElement("div",{className:B},D)}else{var U,G=(null==w?void 0:w(m))?s.createElement("img",{src:m.thumbUrl||m.url,alt:m.name,className:"".concat(u,"-list-item-image")}):D,V=_()((U={},Object(r.a)(U,"".concat(u,"-list-item-thumbnail"),!0),Object(r.a)(U,"".concat(u,"-list-item-file"),w&&!w(m)),U));M=s.createElement("a",{className:V,onClick:function(e){return S(m,e)},href:m.url||m.thumbUrl,target:"_blank",rel:"noopener noreferrer"},G)}var Y,q=_()((n={},Object(r.a)(n,"".concat(u,"-list-item"),!0),Object(r.a)(n,"".concat(u,"-list-item-").concat(m.status),!0),Object(r.a)(n,"".concat(u,"-list-item-list-type-").concat(p),!0),n)),H="string"==typeof m.linkProps?JSON.parse(m.linkProps):m.linkProps,W=O?b(("function"==typeof j?j(m):j)||s.createElement(re.a,null),(function(){return N(m)}),u,d.removeFile):null,K=x&&"done"===m.status?b(("function"==typeof k?k(m):k)||s.createElement(oe.a,null),(function(){return C(m)}),u,d.downloadFile):null,$="picture-card"!==p&&s.createElement("span",{key:"download-delete",className:_()("".concat(u,"-list-item-card-actions"),{picture:"picture"===p})},K,W),Q=_()("".concat(u,"-list-item-name")),X=m.url?[s.createElement("a",Object(o.default)({key:"view",target:"_blank",rel:"noopener noreferrer",className:Q,title:m.name},H,{href:m.url,onClick:function(e){return S(m,e)}}),m.name),$]:[s.createElement("span",{key:"view",className:Q,onClick:function(e){return S(m,e)},title:m.name},m.name),$],J=E?s.createElement("a",{href:m.url||m.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:m.url||m.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},onClick:function(e){return S(m,e)},title:d.previewFile},s.createElement(ne.a,null)):null,ee="picture-card"===p&&"uploading"!==m.status&&s.createElement("span",{className:"".concat(u,"-list-item-actions")},J,"done"===m.status&&K,W);Y=m.response&&"string"==typeof m.response?m.response:(null===(a=m.error)||void 0===a?void 0:a.statusText)||(null===(i=m.error)||void 0===i?void 0:i.message)||d.uploadError;var te=s.createElement("span",{className:R},M,X),ce=(0,s.useContext(Z.b).getPrefixCls)(),ue=s.createElement("div",{className:q},s.createElement("div",{className:"".concat(u,"-list-item-info")},te),ee,A&&s.createElement(z.b,{motionName:"".concat(ce,"-fade"),visible:"uploading"===m.status,motionDeadline:2e3},(function(e){var t=e.className,n="percent"in m?s.createElement(ie.a,Object(o.default)({},y,{type:"line",percent:m.percent})):null;return s.createElement("div",{className:_()("".concat(u,"-list-item-progress"),t)},n)}))),le=_()("".concat(u,"-list-").concat(p,"-container"),l),se="error"===m.status?s.createElement(ae.a,{title:Y,getPopupContainer:function(e){return e.parentNode}},ue):ue;return s.createElement("div",{className:le,style:f,ref:t},g?g(se,m,h,{download:C.bind(null,m),preview:S.bind(null,m),remove:N.bind(null,m)}):se)})),ue=Object(o.default)({},J.a);delete ue.onAppearEnd,delete ue.onEnterEnd,delete ue.onLeaveEnd;var le=function(e,t){var n,a=e.listType,u=e.previewFile,l=e.onPreview,f=e.onDownload,d=e.onRemove,p=e.locale,m=e.iconRender,h=e.isImageUrl,y=e.prefixCls,v=e.items,b=void 0===v?[]:v,g=e.showPreviewIcon,w=e.showRemoveIcon,E=e.showDownloadIcon,O=e.removeIcon,x=e.downloadIcon,j=e.progress,k=e.appendAction,S=e.itemRender,C=Object(te.a)(),N=s.useState(!1),P=Object(c.a)(N,2),T=P[0],A=P[1];s.useEffect((function(){"picture"!==a&&"picture-card"!==a||(b||[]).forEach((function(e){"undefined"!=typeof document&&"undefined"!=typeof window&&window.FileReader&&window.File&&(e.originFileObj instanceof File||e.originFileObj instanceof Blob)&&void 0===e.thumbUrl&&(e.thumbUrl="",u&&u(e.originFileObj).then((function(t){e.thumbUrl=t||"",C()})))}))}),[a,b,u]),s.useEffect((function(){A(!0)}),[]);var L=function(e,t){if(l)return null==t||t.preventDefault(),l(e)},I=function(e){"function"==typeof f?f(e):e.url&&window.open(e.url)},R=function(e){null==d||d(e)},D=function(e){if(m)return m(e,a);var t="uploading"===e.status,n=h&&h(e)?s.createElement(Y.a,null):s.createElement(q.a,null),r=t?s.createElement(G.a,null):s.createElement(V.a,null);return"picture"===a?r=t?s.createElement(G.a,null):n:"picture-card"===a&&(r=t?p.uploading:n),r},M=function(e,t,n,r){var a={type:"text",size:"small",title:r,onClick:function(n){t(),Object(H.b)(e)&&e.props.onClick&&e.props.onClick(n)},className:"".concat(n,"-list-item-card-actions-btn")};if(Object(H.b)(e)){var i=Object(H.a)(e,Object(o.default)(Object(o.default)({},e.props),{onClick:function(){}}));return s.createElement(ee.a,Object(o.default)({},a,{icon:i}))}return s.createElement(ee.a,a,s.createElement("span",null,e))};s.useImperativeHandle(t,(function(){return{handlePreview:L,handleDownload:I}}));var F=s.useContext(Z.b),B=F.getPrefixCls,U=F.direction,W=B("upload",y),K=_()((n={},Object(r.a)(n,"".concat(W,"-list"),!0),Object(r.a)(n,"".concat(W,"-list-").concat(a),!0),Object(r.a)(n,"".concat(W,"-list-rtl"),"rtl"===U),n)),$=Object(i.a)(b.map((function(e){return{key:e.uid,file:e}}))),Q="picture-card"===a?"animate-inline":"animate",X={motionDeadline:2e3,motionName:"".concat(W,"-").concat(Q),keys:$,motionAppear:T};return"picture-card"!==a&&(X=Object(o.default)(Object(o.default)({},ue),X)),s.createElement("div",{className:K},s.createElement(z.a,Object(o.default)({},X,{component:!1}),(function(e){var t=e.key,n=e.file,r=e.className,o=e.style;return s.createElement(ce,{key:t,locale:p,prefixCls:W,className:r,style:o,file:n,items:b,progress:j,listType:a,isImgUrl:h,showPreviewIcon:g,showRemoveIcon:w,showDownloadIcon:E,removeIcon:O,downloadIcon:x,iconRender:D,actionIconRender:M,itemRender:S,onPreview:L,onDownload:I,onClose:R})})),k&&s.createElement(z.b,X,(function(e){var t=e.className,n=e.style;return Object(H.a)(k,(function(e){return{className:_()(e.className,t),style:Object(o.default)(Object(o.default)({},n),e.style)}}))})))},se=s.forwardRef(le);se.displayName="UploadList",se.defaultProps={listType:"text",progress:{strokeWidth:2,showInfo:!1},showRemoveIcon:!0,showDownloadIcon:!1,showPreviewIcon:!0,previewFile:function(e){return new Promise((function(t){if(e.type&&Q(e.type)){var n=document.createElement("canvas");n.width=X,n.height=X,n.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(X,"px; height: ").concat(X,"px; z-index: 9999; display: none;"),document.body.appendChild(n);var r=n.getContext("2d"),o=new Image;o.onload=function(){var e=o.width,a=o.height,i=X,c=X,u=0,l=0;e>a?l=-((c=a*(X/e))-i)/2:u=-((i=e*(X/a))-c)/2,r.drawImage(o,u,l,i,c);var s=n.toDataURL();document.body.removeChild(n),t(s)},o.src=window.URL.createObjectURL(e)}else t("")}))},isImageUrl:function(e){if(e.type&&!e.thumbUrl)return Q(e.type);var t=e.thumbUrl||e.url||"",n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),t=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(t)||[""])[0]}(t);return!(!/^data:image\//.test(t)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(n))||!/^data:/.test(t)&&!n}};var fe=se,de=n(158),pe=n(382),me=n(95),he=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(t){a(t)}}function c(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},ye="__LIST_IGNORE_".concat(Date.now(),"__"),ve=function(e,t){var n,u=e.fileList,f=e.defaultFileList,d=e.onRemove,p=e.showUploadList,m=e.listType,h=e.onPreview,y=e.onDownload,v=e.onChange,b=e.onDrop,g=e.previewFile,w=e.disabled,E=e.locale,O=e.iconRender,x=e.isImageUrl,j=e.progress,k=e.prefixCls,S=e.className,C=e.type,N=e.children,P=e.style,T=e.itemRender,A=e.maxCount,L=Object(D.a)(f||[],{value:u,postState:function(e){return null!=e?e:[]}}),I=Object(c.a)(L,2),M=I[0],F=I[1],B=s.useState("drop"),U=Object(c.a)(B,2),z=U[0],G=U[1],V=s.useRef();s.useEffect((function(){Object(me.a)("fileList"in e||!("value"in e),"Upload","`value` is not a valid prop, do you mean `fileList`?"),Object(me.a)(!("transformFile"in e),"Upload","`transformFile` is deprecated. Please use `beforeUpload` directly.")}),[]),s.useMemo((function(){var e=Date.now();(u||[]).forEach((function(t,n){t.uid||Object.isFrozen(t)||(t.uid="__AUTO__".concat(e,"_").concat(n,"__"))}))}),[u]);var Y=function(e,t,n){var r=Object(i.a)(t);1===A?r=r.slice(-1):A&&(r=r.slice(0,A)),F(r);var o={file:e,fileList:r};n&&(o.event=n),null==v||v(o)},q=function(e){var t=e.filter((function(e){return!e.file[ye]}));if(t.length){var n=t.map((function(e){return W(e.file)})),r=Object(i.a)(M);n.forEach((function(e){r=K(e,r)})),n.forEach((function(e,n){var o=e;if(t[n].parsedFile)e.status="uploading";else{var a,i=e.originFileObj;try{a=new File([i],i.name,{type:i.type})}catch(c){(a=new Blob([i],{type:i.type})).name=i.name,a.lastModifiedDate=new Date,a.lastModified=(new Date).getTime()}a.uid=e.uid,o=a}Y(o,r)}))}},H=function(e,t,n){try{"string"==typeof e&&(e=JSON.parse(e))}catch(a){}if($(t,M)){var r=W(t);r.status="done",r.percent=100,r.response=e,r.xhr=n;var o=K(r,M);Y(r,o)}},Q=function(e,t){if($(t,M)){var n=W(t);n.status="uploading",n.percent=e.percent;var r=K(n,M);Y(n,r,e)}},X=function(e,t,n){if($(n,M)){var r=W(n);r.error=e,r.response=t,r.status="error";var o=K(r,M);Y(r,o)}},J=function(e){var t;Promise.resolve("function"==typeof d?d(e):d).then((function(n){var r;if(!1!==n){var a=function(e,t){var n=void 0!==e.uid?"uid":"name",r=t.filter((function(t){return t[n]!==e[n]}));return r.length===t.length?null:r}(e,M);a&&(t=Object(o.default)(Object(o.default)({},e),{status:"removed"}),null==M||M.forEach((function(e){var n=void 0!==t.uid?"uid":"name";e[n]!==t[n]||Object.isFrozen(e)||(e.status="removed")})),null===(r=V.current)||void 0===r||r.abort(t),Y(t,a))}}))},ee=function(e){G(e.type),"drop"===e.type&&(null==b||b(e))};s.useImperativeHandle(t,(function(){return{onBatchStart:q,onSuccess:H,onProgress:Q,onError:X,fileList:M,upload:V.current}}));var te=s.useContext(Z.b),ne=te.getPrefixCls,re=te.direction,oe=ne("upload",k),ae=Object(o.default)(Object(o.default)({onBatchStart:q,onError:X,onProgress:Q,onSuccess:H},e),{prefixCls:oe,beforeUpload:function(t,n){return he(void 0,void 0,void 0,l.a.mark((function r(){var o,i,c,u;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.beforeUpload,i=e.transformFile,c=t,!o){r.next=13;break}return r.next=5,o(t,n);case 5:if(!1!==(u=r.sent)){r.next=8;break}return r.abrupt("return",!1);case 8:if(delete t[ye],u!==ye){r.next=12;break}return Object.defineProperty(t,ye,{value:!0,configurable:!0}),r.abrupt("return",!1);case 12:"object"===Object(a.a)(u)&&u&&(c=u);case 13:if(!i){r.next=17;break}return r.next=16,i(c);case 16:c=r.sent;case 17:return r.abrupt("return",c);case 18:case"end":return r.stop()}}),r)})))},onChange:void 0});delete ae.className,delete ae.style,N&&!w||delete ae.id;var ie=function(e){return p?s.createElement(de.a,{componentName:"Upload",defaultLocale:pe.a.Upload},(function(t){var n="boolean"==typeof p?{}:p,r=n.showRemoveIcon,a=n.showPreviewIcon,i=n.showDownloadIcon,c=n.removeIcon,u=n.downloadIcon;return s.createElement(fe,{listType:m,items:M,previewFile:g,onPreview:h,onDownload:y,onRemove:J,showRemoveIcon:!w&&r,showPreviewIcon:a,showDownloadIcon:i,removeIcon:c,downloadIcon:u,iconRender:O,locale:Object(o.default)(Object(o.default)({},t),E),isImageUrl:x,progress:j,appendAction:e,itemRender:T})})):e};if("drag"===C){var ce,ue=_()(oe,(ce={},Object(r.a)(ce,"".concat(oe,"-drag"),!0),Object(r.a)(ce,"".concat(oe,"-drag-uploading"),M.some((function(e){return"uploading"===e.status}))),Object(r.a)(ce,"".concat(oe,"-drag-hover"),"dragover"===z),Object(r.a)(ce,"".concat(oe,"-disabled"),w),Object(r.a)(ce,"".concat(oe,"-rtl"),"rtl"===re),ce),S);return s.createElement("span",null,s.createElement("div",{className:ue,onDrop:ee,onDragOver:ee,onDragLeave:ee,style:P},s.createElement(R,Object(o.default)({},ae,{ref:V,className:"".concat(oe,"-btn")}),s.createElement("div",{className:"".concat(oe,"-drag-container")},N))),ie())}var le=_()(oe,(n={},Object(r.a)(n,"".concat(oe,"-select"),!0),Object(r.a)(n,"".concat(oe,"-select-").concat(m),!0),Object(r.a)(n,"".concat(oe,"-disabled"),w),Object(r.a)(n,"".concat(oe,"-rtl"),"rtl"===re),n)),se=s.createElement("div",{className:le,style:N?void 0:{display:"none"}},s.createElement(R,Object(o.default)({},ae,{ref:V})));return"picture-card"===m?s.createElement("span",{className:_()("".concat(oe,"-picture-card-wrapper"),S)},ie(se)):s.createElement("span",{className:S},se,ie())},be=s.forwardRef(ve);be.Dragger=U,be.LIST_IGNORE=ye,be.displayName="Upload",be.defaultProps={type:"select",multiple:!1,action:"",data:{},accept:"",showUploadList:!0,listType:"text",className:"",disabled:!1,supportServerRender:!0};var ge=be;ge.Dragger=U;t.a=ge},,,,,,function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(40),c=n(57),u=n(58),l=n(66),s=n(72),f=n(41),d=n(10),p=n.n(d),m=n(297),h=n.n(m),y=n(197),v=n(228),b=n(28),g=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=e.forceRender,c=e.className,u=e.style,l=e.children,s=e.isActive,f=e.role,d=a.useState(s||i),m=Object(b.a)(d,2),h=m[0],y=m[1];return a.useEffect((function(){(i||s)&&y(!0)}),[i,s]),h?a.createElement("div",{ref:t,className:p()("".concat(r,"-content"),(n={},Object(o.a)(n,"".concat(r,"-content-active"),s),Object(o.a)(n,"".concat(r,"-content-inactive"),!s),n),c),style:u,role:f},a.createElement("div",{className:"".concat(r,"-content-box")},l)):null}));g.displayName="PanelContent";var _=g,w=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleItemClick=function(){var t=e.props,n=t.onItemClick,r=t.panelKey;"function"==typeof n&&n(r)},e.handleKeyPress=function(t){"Enter"!==t.key&&13!==t.keyCode&&13!==t.which||e.handleItemClick()},e}return Object(u.a)(n,[{key:"shouldComponentUpdate",value:function(e){return!h()(this.props,e)}},{key:"render",value:function(){var e,t,n=this,i=this.props,c=i.className,u=i.id,l=i.style,s=i.prefixCls,f=i.header,d=i.headerClass,m=i.children,h=i.isActive,y=i.showArrow,b=i.destroyInactivePanel,g=i.accordion,w=i.forceRender,E=i.openMotion,O=i.expandIcon,x=i.extra,j=i.collapsible,k="disabled"===j,S=p()("".concat(s,"-header"),(e={},Object(o.a)(e,d,d),Object(o.a)(e,"".concat(s,"-header-collapsible-only"),"header"===j),e)),C=p()((t={},Object(o.a)(t,"".concat(s,"-item"),!0),Object(o.a)(t,"".concat(s,"-item-active"),h),Object(o.a)(t,"".concat(s,"-item-disabled"),k),t),c),N=a.createElement("i",{className:"arrow"});y&&"function"==typeof O&&(N=O(this.props));var P=null!=x&&"boolean"!=typeof x;return a.createElement("div",{className:C,style:l,id:u},a.createElement("div",{className:S,onClick:function(){return"header"!==j&&n.handleItemClick()},role:g?"tab":"button",tabIndex:k?-1:0,"aria-expanded":h,onKeyPress:this.handleKeyPress},y&&N,"header"===j?a.createElement("span",{onClick:this.handleItemClick,className:"".concat(s,"-header-text")},f):f,P&&a.createElement("div",{className:"".concat(s,"-extra")},x)),a.createElement(v.b,Object(r.default)({visible:h,leavedClassName:"".concat(s,"-content-hidden")},E,{forceRender:w,removeOnLeave:b}),(function(e,t){var n=e.className,r=e.style;return a.createElement(_,{ref:t,prefixCls:s,className:n,style:r,isActive:h,forceRender:w,role:g?"tabpanel":null},m)})))}}]),n}(a.Component);w.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var E=w;function O(e){var t=e;if(!Array.isArray(t)){var n=Object(f.a)(t);t="number"===n||"string"===n?[t]:[]}return t.map((function(e){return String(e)}))}var x=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(e){var r;Object(c.a)(this,n),(r=t.call(this,e)).onClickItem=function(e){var t=r.state.activeKey;if(r.props.accordion)t=t[0]===e?[]:[e];else{var n=(t=Object(i.a)(t)).indexOf(e);n>-1?t.splice(n,1):t.push(e)}r.setActiveKey(t)},r.getNewChild=function(e,t){if(!e)return null;var n=r.state.activeKey,o=r.props,i=o.prefixCls,c=o.openMotion,u=o.accordion,l=o.destroyInactivePanel,s=o.expandIcon,f=o.collapsible,d=e.key||String(t),p=e.props,m=p.header,h=p.headerClass,y=p.destroyInactivePanel,v=p.collapsible,b=null!=v?v:f,g={key:d,panelKey:d,header:m,headerClass:h,isActive:u?n[0]===d:n.indexOf(d)>-1,prefixCls:i,destroyInactivePanel:null!=y?y:l,openMotion:c,accordion:u,children:e.props.children,onItemClick:"disabled"===b?null:r.onClickItem,expandIcon:s,collapsible:b};return"string"==typeof e.type?e:a.cloneElement(e,g)},r.getItems=function(){var e=r.props.children;return Object(y.a)(e).map(r.getNewChild)},r.setActiveKey=function(e){"activeKey"in r.props||r.setState({activeKey:e}),r.props.onChange(r.props.accordion?e[0]:e)};var o=e.activeKey,u=e.defaultActiveKey;return"activeKey"in e&&(u=o),r.state={activeKey:O(u)},r}return Object(u.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!h()(this.props,e)||!h()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,r=t.className,i=t.style,c=t.accordion,u=p()((e={},Object(o.a)(e,n,!0),Object(o.a)(e,r,!!r),e));return a.createElement("div",{className:u,style:i,role:c?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=O(e.activeKey)),t}}]),n}(a.Component);x.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},x.Panel=E;var j=x,k=(x.Panel,n(254)),S=n(126),C=n(257),N=n(95),P=function(e){Object(N.a)(!("disabled"in e),"Collapse.Panel",'`disabled` is deprecated. Please use `collapsible="disabled"` instead.');var t=a.useContext(C.b).getPrefixCls,n=e.prefixCls,i=e.className,c=void 0===i?"":i,u=e.showArrow,l=void 0===u||u,s=t("collapse",n),f=p()(Object(o.a)({},"".concat(s,"-no-arrow"),!l),c);return a.createElement(j.Panel,Object(r.default)({},e,{prefixCls:s,className:f}))},T=n(262),A=n(118),L=function(e){var t,n,i,c=a.useContext(C.b),u=c.getPrefixCls,l=c.direction,s=e.prefixCls,f=e.className,d=void 0===f?"":f,m=e.bordered,h=void 0===m||m,v=e.ghost,b=u("collapse",s),g=void 0!==(n=e.expandIconPosition)?n:"rtl"===l?"right":"left",_=p()((t={},Object(o.a)(t,"".concat(b,"-borderless"),!h),Object(o.a)(t,"".concat(b,"-icon-position-").concat(g),!0),Object(o.a)(t,"".concat(b,"-rtl"),"rtl"===l),Object(o.a)(t,"".concat(b,"-ghost"),!!v),t),d),w=Object(r.default)(Object(r.default)({},T.a),{motionAppear:!1,leavedClassName:"".concat(b,"-content-hidden")});return a.createElement(j,Object(r.default)({openMotion:w},e,{bordered:h,expandIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.expandIcon,r=n?n(t):a.createElement(k.a,{rotate:t.isActive?90:void 0});return Object(A.a)(r,(function(){return{className:p()(r.props.className,"".concat(b,"-arrow"))}}))},prefixCls:b,className:_}),(i=e.children,Object(y.a)(i).map((function(e,t){var n;if(null===(n=e.props)||void 0===n?void 0:n.disabled){var o=e.key||String(t),a=e.props,i=a.disabled,c=a.collapsible,u=Object(r.default)(Object(r.default)({},Object(S.a)(e.props,["disabled"])),{key:o,collapsible:null!=c?c:i?"disabled":void 0});return Object(A.a)(e,u)}return e}))))};L.Panel=P;var I=L;t.a=I},,,function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(40),i=n(0),c=n(10),u=n.n(c),l=n(197),s=n(348),f=n(1350),d=n(257),p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},m=function(e){var t,n,o=e.prefixCls,a=e.separator,c=void 0===a?"/":a,u=e.children,l=e.overlay,m=e.dropdownProps,h=p(e,["prefixCls","separator","children","overlay","dropdownProps"]),y=(0,i.useContext(d.b).getPrefixCls)("breadcrumb",o);return t="href"in h?i.createElement("a",Object(r.default)({className:"".concat(y,"-link")},h),u):i.createElement("span",Object(r.default)({className:"".concat(y,"-link")},h),u),n=t,t=l?i.createElement(f.a,Object(r.default)({overlay:l,placement:"bottomCenter"},m),i.createElement("span",{className:"".concat(y,"-overlay-link")},n,i.createElement(s.a,null))):n,u?i.createElement("span",null,t,c&&i.createElement("span",{className:"".concat(y,"-separator")},c)):null};m.__ANT_BREADCRUMB_ITEM=!0;var h=m,y=function(e){var t=e.children,n=(0,i.useContext(d.b).getPrefixCls)("breadcrumb");return i.createElement("span",{className:"".concat(n,"-separator")},t||"/")};y.__ANT_BREADCRUMB_SEPARATOR=!0;var v=y,b=n(108),g=n(95),_=n(118),w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function E(e,t,n,r){var o=n.indexOf(e)===n.length-1,a=function(e,t){if(!e.breadcrumbName)return null;var n=Object.keys(t).join("|");return e.breadcrumbName.replace(new RegExp(":(".concat(n,")"),"g"),(function(e,n){return t[n]||e}))}(e,t);return o?i.createElement("span",null,a):i.createElement("a",{href:"#/".concat(r.join("/"))},a)}var O=function(e,t){return e=(e||"").replace(/^\//,""),Object.keys(t).forEach((function(n){e=e.replace(":".concat(n),t[n])})),e},x=function(e){var t,n=e.prefixCls,c=e.separator,s=void 0===c?"/":c,f=e.style,p=e.className,m=e.routes,y=e.children,v=e.itemRender,x=void 0===v?E:v,j=e.params,k=void 0===j?{}:j,S=w(e,["prefixCls","separator","style","className","routes","children","itemRender","params"]),C=i.useContext(d.b),N=C.getPrefixCls,P=C.direction,T=N("breadcrumb",n);if(m&&m.length>0){var A=[];t=m.map((function(e){var t,n=O(e.path,k);return n&&A.push(n),e.children&&e.children.length&&(t=i.createElement(b.a,null,e.children.map((function(e){return i.createElement(b.a.Item,{key:e.path||e.breadcrumbName},x(e,k,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=Object(a.a)(e),o=O(t,n);return o&&r.push(o),r}(A,e.path,k)))})))),i.createElement(h,{overlay:t,separator:s,key:n||e.breadcrumbName},x(e,k,m,A))}))}else y&&(t=Object(l.a)(y).map((function(e,t){return e?(Object(g.a)(e.type&&(!0===e.type.__ANT_BREADCRUMB_ITEM||!0===e.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Object(_.a)(e,{separator:s,key:t})):e})));var L=u()(T,Object(o.a)({},"".concat(T,"-rtl"),"rtl"===P),p);return i.createElement("div",Object(r.default)({className:L,style:f},S),t)};x.Item=h,x.Separator=v;var j=x;t.a=j},function(e,t,n){var r=n(2204)(n(626));e.exports=r},,function(e,t,n){"use strict";n(584);var r=n(283),o=(n(1226),n(1465)),a=(n(96),n(23)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(88),f=n(1466),d=n(68),p=n(10),m=n.n(p),h=n(1468),y=n(1467),v=n(590),b=n(212),g=n(1299),_=n(909),w=n(2117),E=n(1297),O=n(952),x=n(109),j=n(91);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(a,e);var t,n,r,o=N(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),L(T(n=o.call(this,e,t)),"detectAdBlock",(function(){var e=document.querySelector(".text-ad");e&&!e.getBoundingClientRect().width&&n.setState({hasAdBlock:!0})})),L(T(n),"detectImageLoadFailed",(function(){var e=new Image;e.onerror=function(){n.setState({imgLoadFailed:!0}),n.detectAdBlock()},e.src="https://cdn.nlark.com/lark/0/2018/png/9296/1535108081082-5764a7bd-6b65-44ed-b8c9-b6cd79b43972.png"})),L(T(n),"handleClose",(function(){n.setState({dismissed:!0}),j.default.set("adBlockDismissed",!0)})),n.state={hasAdBlock:!1,imgLoadFailed:!1,dismissed:!0},n}return t=a,(n=[{key:"componentDidMount",value:function(){var e=j.default.get("adBlockDismissed");e||(this.setState({dismissed:e}),this.detectImageLoadFailed())}},{key:"render",value:function(){var e=this.state,t=e.dismissed,n=e.hasAdBlock,r=e.imgLoadFailed,o=!t&&n&&r;return c.a.createElement("div",{className:"adblock-detect".concat(o?" visible":"")},c.a.createElement("div",{className:"text-ad"},"Adblocker"),o&&c.a.createElement("div",{className:"adblock-tip"},c.a.createElement("div",{className:"adblock-tip-content"},c.a.createElement("p",null,"我们检测到你可能安装了 AdBlock 或 AdBlock Plus 插件，它的部分策略会影响到站点上某些功能的正常使用。"),c.a.createElement("p",null,"具体信息可参考 ",c.a.createElement("a",{href:"https://www.yuque.com/yuque/cdgcvd/pgu5x6",target:"_blank"},"帮助文档"),"。")),c.a.createElement("button",{className:"btn-close",onClick:this.handleClose},c.a.createElement("span",{className:"larkicon larkicon-close"}))))}}])&&S(t.prototype,n),r&&S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.Component),R=n(2134),D=n(261),M=n(2107),F="index-module_container_6Mjld",B="index-module_content_MJzMt",U="index-module_action_Q6DuL";function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V="GLOBAL_TOP_TIP_CLOSE_ID",Y=j.default.get(V),q=function(e){return"zh-cn"===window.appData.locale&&(!!e&&(!function(e){var t=window.appData.readTip;return!!t&&(t[e.type]||0)>=e.id}(e)&&(!Y||e.id>Number(Y))))},H=function(e){var t=e.dispatch,n=e.me,r=window.appData.topTip,o=z(Object(i.useState)(q(r)),2),a=o[0],u=o[1],l=r&&r.content;return l&&a?c.a.createElement("div",{id:"site-top-tip",className:F,"data-testid":"topTip"},c.a.createElement("div",{className:B,dangerouslySetInnerHTML:{__html:l},"data-testid":"tipContent"}),c.a.createElement("div",{className:U},c.a.createElement(D.a,{"data-testid":"closeIcn",onClick:function(){u(!1),j.default.set(V,r.id),M.a.emit("top-tip-closed"),n&&n.id&&t({type:"proxy.web/mine.readTip",payload:{data:{id:r.id,type:r.type}}})}}))):null};H.propTypes={dispatch:l.a.func,me:l.a.object};var W=Object(s.d)((function(e){return{me:e.me}}))(H),K=n(518),$=n.n(K),Q=n(49),X=n(622),J=n(634),Z=(n(79),n(44)),ee=(n(50),n(19)),te=n(32),ne=n.n(te),re=n(1300),oe="index-module_modal_+w2xG",ae="index-module_content_ELGEz",ie="index-module_footer_7rjH0",ce="index-module_footerAction_TxqKZ",ue="index-module_footerOther_Hk4Cc",le="index-module_actionBtn_-st4b",se=function(e){var t=e.visible,n=e.onClose,r=e.tip,o=e.organization,a=e.dispatch,i=o.statistics,u=o.expired_at,l=o.name,s=o.abilities,f=function(e){var t=e.showPayModel;n(t),a({type:"proxy.web/mine.readUserTip",payload:{data:{id:r.id,type:r.type}}})};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Z.a,{className:oe,visible:t,onCancel:f,header:null,footer:null,width:654,maskClosable:!1,closable:!1,centered:!0},c.a.createElement("img",{src:"//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*00obTaEO8VcAAAAAAAAAAABkARQnAQ",width:"100%"}),c.a.createElement("div",{className:ae,"data-testid":"tip-content"},c.a.createElement("h1",null,__('"{name}" 空间使用即将到期',{name:l})),c.a.createElement("p",null,__('你的空间 "{name}" 付费权益即将在 {countdown} 到期，为了不影响功能使用，请提前完成支付，或在到期后降级为免费版继续使用。',{name:l,countdown:ne()().to(new Date(u))})),i&&c.a.createElement(re.a,{statistics:i}),c.a.createElement("div",{className:ie},c.a.createElement("div",{className:ce},s&&s.destroy?c.a.createElement(ee.a,{"data-testid":"buy-button",className:le,onClick:function(){f({showPayModel:!0})},type:"primary"},__("立即支付")):null,c.a.createElement(ee.a,{className:le,onClick:f},__("知道了"))),c.a.createElement("div",{className:ue},c.a.createElement("a",{href:"https://www.yuque.com/feedbacks/new"},__("联系客服")))))))};se.propTypes={dispatch:l.a.func.isRequired,organization:l.a.object.isRequired,tip:l.a.object.isRequired,visible:l.a.bool.isRequired,onClose:l.a.func.isRequired};var fe=Object(s.d)((function(e){return e}))(se),de=n(2108),pe=(n(148),n(53)),me=n(34),he=n(546);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function ve(){ve=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ye(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function be(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){be(a,r,o,i,c,"next",e)}function c(e){be(a,r,o,i,c,"throw",e)}i(void 0)}))}}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e){var t=e.visible,n=e.onClose,r=e.organization,o=r.name,a=r.abilities,u=_e(Object(i.useState)([]),2),l=u[0],s=u[1];function f(){return(f=ge(ve().mark((function e(){var t;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.organizationUsers.find({organization_id:r.id,user_role:"0"});case 2:(t=e.sent)&&t.length&&s(t.slice(0,3));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(i.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]);var d=_e(Object(i.useState)(!1),2),p=d[0],m=d[1];function h(){m(!0)}var y=_e(Object(i.useState)(!1),2),v=y[0],b=y[1];function g(){return(g=ge(ve().mark((function e(){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return",h());case 2:return e.next=4,me.a.organizations.signTerms({id:r.id});case 4:n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement(Z.a,{className:he.a.modal,visible:t,header:null,footer:null,width:654,onCancel:n,maskClosable:!1,centered:!0},c.a.createElement("img",{src:"//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*00obTaEO8VcAAAAAAAAAAABkARQnAQ",width:"100%"}),c.a.createElement("div",{className:he.a.content,"data-testid":"tip-content"},c.a.createElement("h1",null,__('"{name}" 空间尚未签署协议',{name:o})),c.a.createElement("p",null,a&&a.destroy?__('您的空间 "{name}" 尚未签署语雀空间服务协议，目前只可查看，无法编辑。为避免给您的使用造成不便，请尽快进行签署。',{name:o}):__('您所在的空间 "{name}" 尚未签署语雀空间服务协议，目前只可查看，无法编辑。为避免给您的使用造成不便，请联系任一空间管理员 {admins} 前往 {dashboard} 进行签署。',{name:o,admins:c.a.createElement("span",null,l.map((function(e,t){return e.user?c.a.createElement(c.a.Fragment,null,t>0&&", ",c.a.createElement("a",{href:"/".concat(e.user.login),target:"_blank"},e.name||e.user.name)):null}))),dashboard:c.a.createElement("a",{href:"".concat(r.host,"/dashboard"),target:"_blank"},__("空间工作台"))})),c.a.createElement("div",{className:he.a.footer},a&&a.destroy?c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement(pe.a,{onChange:function(e){b(e)},checked:v,"data-testid":"check-terms"},__("我已阅读并同意"),c.a.createElement("a",{target:"_blank",href:"/org-terms"},"《语雀空间服务协议》"))),c.a.createElement("p",{className:he.a.actionBtnWrapper},c.a.createElement(ee.a,{onClick:function(){return g.apply(this,arguments)},type:"primary"},__("确认签署")),p&&c.a.createElement("p",{className:he.a.errorTip},__("请阅读并同意《语雀空间服务协议》")))):c.a.createElement("p",{className:he.a.actionBtnWrapper},c.a.createElement(ee.a,{onClick:n,type:"primary"},__("知道了"))))))}Ee.propTypes={organization:l.a.object.isRequired,visible:l.a.bool.isRequired,onClose:l.a.func.isRequired};var Oe=Ee;function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ke=function(e){var t,n,r=e.organization,o=e.error,a=e.dispatch,u=xe(Object(i.useState)(!1),2),l=u[0],s=u[1],f=xe(Object(X.b)("orgpay"),2),d=f[0],p=f[1];d?(s(!0),p()):window.appData.tips&&(t=b.a.getOrgExpireTip(r,$.a.TYPES_MAP.org_will_expire),n=b.a.getOrgExpireTip(r,$.a.TYPES_MAP.org_expired));var m=xe(Object(i.useState)(!!t),2),h=m[0],y=m[1],v=xe(Object(i.useState)(!!n),2),g=v[0],_=v[1],w=o.orgExpiredModalVisible||g,E=function(e){y(!1),_(!1),a({type:"error/toggleOrgLimitTip",payload:{orgExpiredModalVisible:!1}}),e&&s(!0)};var O=r.abilities&&r.abilities.destroy&&window.appData.shouldShowSignTermsModal||o.orgSignTermsModalVisible,x=xe(Object(i.useState)(O),2),j=x[0],k=x[1];return Object(i.useEffect)((function(){o.orgSignTermsModalVisible&&k(o.orgSignTermsModalVisible)}),[o.orgSignTermsModalVisible]),c.a.createElement(c.a.Fragment,null,h&&c.a.createElement(fe,{tip:t,visible:h,onClose:E}),c.a.createElement(de.a,{tip:n,organization:r,visible:w,onClose:E}),l&&c.a.createElement(J.a,{type:"buyModal",key:l,orderType:Q.ORDER_TYPE.renew,organization:r,onClose:function(){s(!1)},visible:l}),j&&c.a.createElement(Oe,{organization:r,visible:j,onClose:function(){k(!1),a({type:"error/toggleOrgLimitTip",payload:{orgSignTermsModalVisible:!1}})}}))};ke.propTypes={organization:l.a.object.isRequired,error:l.a.object.isRequired,dispatch:l.a.func.isRequired};var Se=Object(s.d)((function(e){return{organization:e.organization,error:e.error}}))(ke),Ce="index-module_modal_LBSEw",Ne="index-module_content_1A2G2",Pe="index-module_footer_XdjzM",Te="index-module_footerAction_eteAQ",Ae="index-module_footerOther_8dyH7",Le="index-module_actionBtn_MoKy6";function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var De=function(e){var t=Ie(Object(i.useState)(),2),n=t[0],r=t[1],o=Ie(Object(i.useState)(),2),a=o[0],u=o[1],l=e.visible,s=e.onClose,f=e.tip,d=e.organization,p=d.abilities;Object(i.useEffect)((function(){me.a.organizations.usage({id:d.id}).then(u)}),[d]),Object(i.useEffect)((function(){me.a.organizations.owners({id:d.id}).then(r)}),[d]);var m=function(e){var t=e.showPayModel;s(t),me.a.mine.readTip({id:f.id,type:f.type})},h=a||{},y=h.attachment_size,v=void 0===y?0:y,b=h.video_size,g=void 0===b?0:b,_=h.image_size,w=void 0===_?0:_,E=h.max_upload_size,O=(void 0===E?0:E)-v-g-w;if(!a||O>10*Math.pow(1024,3))return null;var x=O<=0;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Z.a,{className:Ce,visible:l,onCancel:m,header:null,footer:null,width:654,maskClosable:!1,closable:!1,centered:!0},c.a.createElement("img",{src:"//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*00obTaEO8VcAAAAAAAAAAABkARQnAQ",width:"100%"}),c.a.createElement("div",{className:Ne,"data-testid":"tip-content"},c.a.createElement("h1",null,x?__("你的语雀空间上传流量已用完"):__("你的语雀空间剩余上传流量不足 10GB")),c.a.createElement("p",null,p&&p.destroy?__("为了不影响功能使用，请及时购买流量。"):__("为了不影响功能使用，请联系管理员 {owners} 及时购买流量。",{owners:c.a.createElement(c.a.Fragment,null,n&&n.map((function(e,t){return c.a.createElement("a",{key:e.id,href:"//yuque.com/".concat(e.user.login),target:"_blank"},e.name||e.user.name,t===n.length-1?"":"、")})))})),c.a.createElement("div",{className:Pe},c.a.createElement("div",{className:Te},p&&p.destroy?c.a.createElement(ee.a,{"data-testid":"buy-button",className:Le,onClick:function(){m({showPayModel:!0})},type:"primary"},__("购买流量")):null,c.a.createElement(ee.a,{className:Le,onClick:m},__("知道了"))),c.a.createElement("div",{className:Ae},c.a.createElement("a",{href:"https://www.yuque.com/feedbacks/new"},__("联系客服")))))))};De.propTypes={organization:l.a.object.isRequired,tip:l.a.object.isRequired,visible:l.a.bool.isRequired,onClose:l.a.func.isRequired};var Me=De;function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ue=function(e){var t,n=e.organization,r=Fe(Object(i.useState)(!1),2),o=r[0],a=r[1],u=Fe(Object(X.b)("orgpay-buyUpload"),2),l=u[0],s=u[1];l?(a(!0),s()):window.appData.tips&&(t=b.a.getUploadExhaustTip(n));var f=n&&n.payment_type===Q.PAYMENT_TYPE.paid,d=Fe(Object(i.useState)(!!t&&f),2),p=d[0],m=d[1];return c.a.createElement("div",{"data-testid":"org-upload-exhaust"},p&&c.a.createElement(Me,{organization:n,tip:t,visible:p,onClose:function(e){m(!1),e&&a(!0)}}),o&&c.a.createElement(J.a,{type:"buyModal",key:o,orderType:Q.ORDER_TYPE.data,organization:n,onClose:function(){a(!1)},visible:o}))};Ue.propTypes={organization:l.a.object.isRequired};var ze=Object(s.d)((function(e){return{organization:e.organization}}))(Ue),Ge=n(142),Ve=n.n(Ge),Ye=n(1337),qe=n(633),He=n(964),We=n(1060),Ke="index-module_wrapper_ZofC9",$e="index-module_content_jdMnv",Qe="index-module_tip_pWfb3",Xe="index-module_footer_rB+SG",Je="index-module_tips_DhBM+",Ze="index-module_label_Jgy2u",et="index-module_footerBtns_qt7dj";function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(){nt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==tt(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function rt(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ot(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rt(a,r,o,i,c,"next",e)}function c(e){rt(a,r,o,i,c,"throw",e)}i(void 0)}))}}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct="intranet_alert_timestamp_v2",ut="nomore",lt=/Macaca UI Robot/;function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.appData,n=t.me,r=t.isYuque,o=t.settings,a=void 0===o?{}:o,c=t.isDesktopApp,u=Object(i.useState)(!1),l=at(u,2),s=l[0],f=l[1],d=Object(i.useState)(!1),p=at(d,2),m=p[0],h=p[1];function y(){return v.apply(this,arguments)}function v(){return(v=ot(nt().mark((function t(){var o,i,u;return nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:if(!e.forceHide){t.next=4;break}return t.abrupt("return",!1);case 4:if(!c){t.next=6;break}return t.abrupt("return",!1);case 6:if(!lt.test(window.navigator.userAgent)){t.next=8;break}return t.abrupt("return",!1);case 8:if(!We.a.isServify()){t.next=10;break}return t.abrupt("return",!1);case 10:if((o=a.intranet_safe_tip)&&o.length){t.next=13;break}return t.abrupt("return",!1);case 13:if("open"===o[0]||o.some((function(e){return Number(e)===(null==n?void 0:n.id)}))){t.next=15;break}return t.abrupt("return",!1);case 15:if(!(i=Ve.a.get(ct))){t.next=21;break}if(i!==ut){t.next=19;break}return t.abrupt("return",!1);case 19:if(ne()(Number(i)).format("YYYY-MM-DD")!==ne()().format("YYYY-MM-DD")){t.next=21;break}return t.abrupt("return",!1);case 21:if("lark.alipay.net"!==window.location.hostname){t.next=23;break}return t.abrupt("return",!0);case 23:if("www.yuque.com"===window.location.host){t.next=26;break}return t.abrupt("return",!1);case 26:return t.next=28,Object(Ye.a)();case 28:return u=t.sent,t.abrupt("return",u);case 30:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){var e,t,n=document.location.hostname.split(".").slice(-2).join(".");s?Ve.a.set(ct,ut,{domain:n,expires:7}):Ve.a.set(ct,(new Date).getTime(),{domain:n,expires:1}),h(!1),He.a.logEvent("intranet_alert_v2",null===(e=window.appData)||void 0===e||null===(t=e.me)||void 0===t?void 0:t.id)}return Object(i.useEffect)((function(){function e(){return(e=ot(nt().mark((function e(){return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:e.sent&&h(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{state:{visible:m,noMoreAlert:s},setNoMoreAlert:f,onConfirm:b,checkVisible:y}}function ft(e){var t=st(e),n=t.state,r=n.visible,o=n.noMoreAlert,a=t.setNoMoreAlert,i=t.onConfirm;return r?c.a.createElement("div",{className:Ke},c.a.createElement("div",{className:$e},c.a.createElement("div",null,c.a.createElement(qe.a.Yuque,{height:48})),c.a.createElement("div",{className:Qe},c.a.createElement("h3",null,__("正在通过集团内网访问公网语雀，请注意信息安全")),c.a.createElement("p",null,__("当前您正在访问的是语雀商业化版本，仅服务于互联网上的个人或组织，请注意数据外泄风险，勿发布工作相关内容，如因工作需要对外发布内容需先经过 "),c.a.createElement("a",{href:"https://yuque.antfin.com/docs/share/4a3f85ef-8668-42f4-a88b-4dda23ed378a",target:"_blank"},__("数据安全评估"))),c.a.createElement("div",{className:Xe},c.a.createElement("div",{className:Je,onClick:function(){a(!o)}},c.a.createElement(pe.a,{checked:o}),c.a.createElement("span",{className:Ze},__("七天内不再提示"))),c.a.createElement("div",{className:et},c.a.createElement(ee.a,{type:"default",onClick:i},__("继续访问")),c.a.createElement(ee.a,{type:"primary",style:{marginLeft:16}},c.a.createElement("a",{href:"https://yuque.antfin.com/",target:"_self"},__("跳转到内网语雀")))))))):null}ft.defaultProps={forceHide:!1},ft.propTypes={forceHide:l.a.bool},ft.useViewModel=st;var dt=ft;function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.__neInjector=window.__neInjector||{},window.__neInjector.videoRemark=h.a;var ht=function(e){var t=e.children,n=e.title,r=e.placement;return window.h5?c.a.createElement(c.a.Fragment,null,t):c.a.createElement(a.a,{title:n,placement:r},t)},yt=window.appData.isDesktopApp,vt="win32"===navigator.platform.toLowerCase(),bt=window.self!==window.top,gt=function(e){var t=e.children,n=e.history,a=e.fullfoot,u=e.className,l=e.organization,s=e.showFeatureGuide,p=e.foot,h=e.doc,j=e.headless||!1!==e.headless&&window!==window.top,k=null!=e.showFoot?e.showFoot:!e.headless,S=e.showSiteTip,C=void 0===S||S,N=n.location.query,P=void 0===N?{}:N,T="doc_embed"===P.view||"servicify"===P.from;(T||window.appData.isEnterprise||!0===window.appData.hideSiteTip)&&(C=!1);var A=pt(Object(i.useState)(!1),2),L=A[0],D=A[1],M=pt(Object(i.useState)(!1),2),F=M[0],B=M[1];Object(i.useEffect)((function(){D(e.error.loginModalVisible),B(e.error.from)}),[e.error.loginModalVisible]),Object(i.useEffect)((function(){var e;"doc_embed"===P.view&&(e=document.getElementById("header"))&&(e.style.display="none")}),[P.view]);var U=l&&l.id&&window.appData.me&&window.appData.me.id;window.__member_message_ref=c.a.createRef();var z=!1;if(yt){var G=window.navigator.userAgent;z=G&&/yuque-desktop\/0\.[2-7]/.test(G)}var V=h&&("Doc"===h.type||"Thread"===h.type);return c.a.createElement(r.a,{autoInsertSpaceInButton:!1,locale:b.a.getAntdLocale()},L&&c.a.createElement(g.a,{visible:L,from:F,onCancel:function(){"doc_reader"===e.error.from&&Object(_.a)("doc_reader_login_modal"),e.dispatch({type:"error/toggleLoginModal",payload:{visible:!L}})}}),c.a.createElement(w.a,null),c.a.createElement(I,null),C&&c.a.createElement(R.a,null),U&&c.a.createElement(Se,null),U&&c.a.createElement(ze,null),V&&c.a.createElement(o.a,{className:"default-back-top",visibilityHeight:2*window.innerHeight},c.a.createElement("div",null,c.a.createElement(ht,{title:__("回到顶部"),placement:"left"},c.a.createElement(f.a,null)))),c.a.createElement(x.a,null,c.a.createElement(v.a.Message,{dispatch:e.dispatch,ref:window.__member_message_ref})),c.a.createElement(d.Router,{history:n},j?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:m()({desktopApp:yt,desktopAppOldVersion:z,isWin:vt})},c.a.createElement(x.a,{withFallbackUI:!0,isDesktopApp:!0},t)),k&&(p||c.a.createElement(O.a,{full:a}))):c.a.createElement("div",{className:m()("lark",u)},c.a.createElement(x.a,null,c.a.createElement(W,null)),c.a.createElement(E.a,e),c.a.createElement("div",{className:"main-wrapper"},c.a.createElement(x.a,{withFallbackUI:!0},t)),k&&(p||c.a.createElement(O.a,{full:a})))),!window.h5&&!bt&&!1!==s&&c.a.createElement(y.a,null),c.a.createElement(dt,{forceHide:j||T}))};gt.defaultProps={showSiteTip:!0},gt.propTypes={children:l.a.node,headless:l.a.bool,organization:l.a.object,className:l.a.string,history:l.a.object,showSiteTip:l.a.bool,showAnnouncement:l.a.bool,fullfoot:l.a.bool,dispatch:l.a.func,error:l.a.object,showFeatureGuide:l.a.bool,showFoot:l.a.bool,foot:l.a.element};t.a=Object(x.b)(Object(s.d)((function(e){return{error:e.error,organization:e.organization,doc:e.doc}}))(gt),!0)},function(e,t,n){var r=n(604),o=n(1289),a=n(2203),i=n(1007),c=n(957),u=n(2746),l=n(2180),s=n(1993),f=l((function(e,t){var n={};if(null==e)return n;var l=!1;t=r(t,(function(t){return t=i(t,e),l||(l=t.length>1),t})),c(e,s(e),n),l&&(n=o(n,7,u));for(var f=t.length;f--;)a(n,t[f]);return n}));e.exports=f},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(321),u={link:"Link",text:"Text"},l=function(e){var t,n=e.user,r=void 0===n?{}:n,a=e.type,i=void 0===a?u.text:a,l=e.withCard,s=e.children,f=e.style,d=void 0===f?{}:f,p=e.className,m=void 0===p?"":p,h=e.target,y=r.name,v=r.login;switch(i){case u.link:t=o.a.createElement("a",{href:"/".concat(v),"data-testid":"login-a-tag",target:h,style:d,className:m},s||y);break;case u.text:default:t=s||y}return l?o.a.createElement(c.a,{user:r,style:d,className:m},t):t};l.propTypes={user:i.a.object.isRequired,withCard:i.a.bool,style:i.a.object,className:i.a.string,type:i.a.oneOf([u.link,u.text,u.card]),children:i.a.any,target:i.a.object},t.b=l},,function(e,t,n){"use strict";n(50);var r=n(19),o=(n(350),n(230)),a=(n(1054),n(1082)),i=(n(60),n(24)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f=n(2247),d=n(36),p=n(10),m=n.n(p),h=n(592),y=n(38),v="index-module_coverUploaderWrapper_JM8NQ",b="index-module_cropper_FJZMe",g="index-module_cropperInner_cE6wj",_="index-module_coverThumb_aqkDl",w="index-module_placeholderWrapper_I8JnT",E="index-module_placeholder_fRP2-",O="index-module_placeholderImg_RI3Xy",x="index-module_preview_0S38r",j="index-module_uploadWrapper_Lddj1",k="index-module_uploadAction_IvY3J",S="index-module_btnRemove_ewCeL",C="index-module_btnRemoveIcon_Kaa0G";function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(p,e);var t,n,l,s=L(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),M(R(t=s.call(this,e)),"onSubmit",(function(){return new Promise((function(e,n){t.cropper?t.handleUpload().then((function(t){return e(t&&t.url)}),(function(e){i.a.error(__("封面上传失败，请重试")),n(e)})):e(t.state.cover)}))})),M(R(t),"getUploadProps",(function(){return{beforeUpload:function(e){var n=t.props.fileSizeLimit;if(e.size/1024/1024>n)return i.a.error(__("图片大小不能超过 {size}M",{size:n})),!1;var r=new FileReader;return r.addEventListener("load",(function(){t.setState({cover:r.result}),t.coverRef.current.focus(),"function"==typeof t.props.beforeUpload&&t.props.beforeUpload(r.result)}),!1),e&&r.readAsDataURL(e),!1},showUploadList:!1,accept:"image/*"}})),M(R(t),"handleUpload",(function(){if(t.cropper&&void 0!==t.cropper.getCroppedCanvas())return new Promise((function(e,n){t.cropper.getCroppedCanvas({imageSmoothingQuality:"high"}).toBlob((function(r){var o=new FormData;t.props.attachable_type&&o.append("attachable_type",t.props.attachable_type),t.props.attachable_id&&o.append("attachable_id",t.props.attachable_id),o.append("file",r,"image.png"),o.append("ocr","off"),Object(d.ajax)({url:"/api/upload/attach",method:"POST",data:o,dataType:"json",processData:!1,success:function(t){e(t.data)},error:function(){n()}})}),"image/png",1)}))})),M(R(t),"handleRemoveImg",(function(){t.setState({cover:""});var e=t.props.onRemove;e&&"function"==typeof e&&e()}));var n=e.defaultPreviewImage,r=e.cover;return t.state={cover:r||n},t.coverRef=Object(c.createRef)(),t.cropper=null,t}return t=p,(n=[{key:"componentDidUpdate",value:function(e){e.cover!==this.props.cover&&this.setState({cover:this.props.cover})}},{key:"componentWillUnmount",value:function(){this.coverRef=null,this.cropper=null}},{key:"render",value:function(){var e=this,t=this.state.cover,n=this.props,i=n.aspectRatio,c=n.cropperStyle,l=n.cropperClassName,s=n.previewClassName,d=n.previewKey,w=n.placeholder,E=c.containerWidth,O=c.containerHeight,N=c.cropWidth;return u.a.createElement("div",{className:v,ref:this.coverRef,tabIndex:"-1"},u.a.createElement("div",{className:m()(b,l),"data-testid":"cover-uploader-cropper"},u.a.createElement(o.a.Dragger,P({},this.getUploadProps(),{openFileDialogOnClick:!t}),t?u.a.createElement(a.a,{ref:function(t){e.cropper=t},src:t,containerWidth:E,containerHeight:O,aspectRatio:i,preview:d?".".concat(d):".image-preview",cropWidth:N}):u.a.createElement(u.a.Fragment,null,t?u.a.createElement("div",{className:g,style:{width:E,height:E/i}},u.a.createElement("div",{className:_,style:{backgroundImage:"url(".concat(Object(h.a)(t,{height:245,width:392,fill:!0}),")")}})):u.a.createElement(p.Placeholder,{placeholder:w})))),u.a.createElement("div",{className:j},t&&u.a.createElement("div",{className:m()("image-preview",x,s,d),"data-testid":"cover-uploader-previewKey"}),u.a.createElement("div",{className:k},u.a.createElement(o.a,this.getUploadProps(),t?u.a.createElement(r.a,null,__("重新上传")):u.a.createElement(r.a,null,u.a.createElement(f.a,null)," ",__("上传图片"))),t&&u.a.createElement("span",{className:S,onClick:this.handleRemoveImg},u.a.createElement("span",{className:C},u.a.createElement(y.b,{name:"icon-delete",width:16})),u.a.createElement("span",null,__("清除"))))))}}])&&T(t.prototype,n),l&&T(t,l),Object.defineProperty(t,"prototype",{writable:!1}),p}(c.Component);F.Placeholder=function(e){var t=e.placeholder;return u.a.createElement("div",{className:w},u.a.createElement("div",{className:E},u.a.createElement("div",{className:O}),u.a.createElement("p",null,t||__("添加封面有助于吸引读者"))))},F.Placeholder.propTypes={placeholder:s.a.string},F.propTypes={cover:s.a.string,beforeUpload:s.a.func,aspectRatio:s.a.number,cropperStyle:s.a.shape({containerWidth:s.a.number,containerHeight:s.a.number,cropWidth:s.a.number}),defaultPreviewImage:s.a.string,fileSizeLimit:s.a.number,cropperClassName:s.a.string,previewClassName:s.a.string,previewKey:s.a.string,onRemove:s.a.func,placeholder:s.a.string,attachable_type:s.a.string,attachable_id:s.a.number},F.defaultProps={cropperStyle:{containerWidth:240,containerHeight:150,cropWidth:400},aspectRatio:1.6,fileSizeLimit:20};t.a=F},function(e,t,n){var r=n(604),o=n(454),a=n(2159),i=n(269);e.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}},function(e,t,n){"use strict";var r=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(30)),a=r(n(2667)),i=r(n(727)),c={lang:(0,o.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},a.default),timePickerLocale:(0,o.default)({},i.default)};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};t.default=r},function(e,t,n){"use strict";var r=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(30)),a=r(n(2668)),i=r(n(729)),c={lang:(0,o.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},a.default),timePickerLocale:(0,o.default)({},i.default)};c.lang.ok="确 定";var u=c;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};t.default=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(2143),o=n(2144),a=n(672);e.exports=function(e){return a(e)?r(e):o(e)}},function(e,t,n){e.exports=n(1151)},function(e,t,n){"use strict";var r=n(123).default;Object.defineProperty(t,"__esModule",{value:!0}),t.injectCSS=d,t.removeCSS=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=p(e,n);null==r||null===(t=r.parentNode)||void 0===t||t.removeChild(r)},t.updateCSS=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l(n);m(r,n);var o=p(t,n);if(o){var a,i,c;if((null===(a=n.csp)||void 0===a?void 0:a.nonce)&&o.nonce!==(null===(i=n.csp)||void 0===i?void 0:i.nonce))o.nonce=null===(c=n.csp)||void 0===c?void 0:c.nonce;return o.innerHTML!==e&&(o.innerHTML=e),o}var s=d(e,n);return s.setAttribute(u(n),t),s};var o=r(n(2607)),a="data-rc-order",i="rc-util-key",c=new Map;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):i}function l(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function s(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function f(e){return Array.from((c.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,o.default)())return null;var n=t.csp,r=t.prepend,i=document.createElement("style");i.setAttribute(a,s(r)),(null==n?void 0:n.nonce)&&(i.nonce=null==n?void 0:n.nonce),i.innerHTML=e;var c=l(t),u=c.firstChild;if(r){if("queue"===r){var d=f(c).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute(a))}));if(d.length)return c.insertBefore(i,d[d.length-1].nextSibling),i}c.insertBefore(i,u)}else c.appendChild(i);return i}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l(t);return f(n).find((function(n){return n.getAttribute(u(t))===e}))}function m(e,t){var n=c.get(e);if(!n||!document.contains(n)){var r=d("",t),o=r.parentNode;c.set(e,o),o.removeChild(r)}}},,,function(e,t,n){var r=n(2201);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(88),i=n(2),c=n.n(i),u=n(996),l=n(212);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(i,e);var t,n,r,a=m(i);function i(){return f(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.me,n=e.children,r=e.place;return!window.appData.isYuque||t&&t.id?n:"comment"===r?o.a.createElement("div",{className:"comment-action"},__("{register} 或 {login} 语雀进行评论",{register:o.a.createElement("a",{onClick:function(){l.a.register()},"data-aspm-click":"d65961"},__("注册")),login:o.a.createElement("a",{onClick:function(){l.a.login()},"data-aspm-click":"d65962"},__("登录"))})):o.a.createElement("div",{className:"login-action"},o.a.createElement(u.a.Login,null))}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);v.propTypes={me:c.a.object,place:c.a.string,children:c.a.node};t.a=Object(a.d)((function(e){return{me:e.me}}))(v)},function(e,t,n){"use strict";n(162),n(375)},function(e,t,n){"use strict";e.exports={PRIVACY:{private:0,public:1,intranet:2,intranet_all:3},DATA_MASK:{dynamic:0,force:1}}},,function(e,t,n){"use strict";t.a=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))}},function(e,t,n){"use strict";var r=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t,n=e.initValue,a=e.totalAmount,i=e.setPromoCode,c=o(Object(r.useState)(n),2),u=c[0],l=c[1];u&&(t=(t=a-u>1?a-u:1).toFixed(2));return{totalAmountWithPromo:t,onVerifySuccess:function(e){l(e&&e.amount)},handlePromoChange:function(e){i(e),u&&l(0)}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(232),o=n.n(r),a=n(579),i=n.n(a),c=function e(t){i()(this,e),o()(this,t)};function u(e){return e instanceof c}function l(e){return u(e)?e:new c(e)}},function(e,t,n){"use strict";n(60);var r=n(24),o=(n(79),n(44)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(179),s=n.n(l),f=n(252),d=n(10),p=n.n(d),m=n(34),h=n(312),y=n(1904),v=n(1303),b=n(407);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function _(){_=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==g(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){x(a,r,o,i,c,"next",e)}function c(e){x(a,r,o,i,c,"throw",e)}i(void 0)}))}}function k(e){u.a.checkPropTypes(k.propTypes,e,"prop","CatalogViewModel");var t=e.item,n=e.group,a=e.book,c=e.doc,l=e.catalog,d=e.disableSelectorBooks,g=e.showRepoSelector,w=void 0===g||g,O=e.onCopy,x=e.onMove,S=e.onAction,C=e.onDestroy,N=e.onUnshare,P=e.hideCopyWithChildren,T=void 0!==P&&P,A=function(e){t&&S({node_uuid:t.uuid,action:"edit",title:e.title,url:e.url,type:f.TYPES.link,open_window:e.open_window})};return{handleEditLinkNode:A,showCopyToModal:function(){var e=o.a.confirm(),u=function(){var n=j(_().mark((function n(){var o,u,s,f,d,p,h,y,v,b,g=arguments;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=g.length>0&&void 0!==g[0]?g[0]:{},n.next=3,m.a.catalogNodes.copy({book_id:a.id,node_uuid:t&&t.uuid,target_uuid:o.target_uuid,action:o.action,target_book_id:o.targetBook.id,with_children:o.with_children,insert_to_catalog:o.insert_to_catalog,doc_id:c&&c.id},{useOriginResp:!0});case 3:if(u=n.sent,s=u.data,f=u.meta,d=f.toc_updated_at,p=f.docIds,e.destroy(),h=o.targetBook,y=o.targetGroup,h.id!==a.id?(v=p[0],b=v?"/go/doc/".concat(p[0]):"/".concat(y.login,"/").concat(h.slug),r.a.success(__("已复制到：{target}",{target:i.a.createElement("a",{href:b,target:"_blank"},h.name)}),3)):r.a.success(__("复制成功")),!O){n.next=11;break}return n.next=11,O(l,s,E(E({},o),{},{currentItem:t,toc_updated_at:d,doc_ids:p}));case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();e.update({className:p()(b.a.modalCatalog,b.a.modal),icon:null,closable:!0,width:600,footer:null,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:b.a.modalTitle},__("复制到...")),w&&i.a.createElement("p",{className:b.a.modalDescription},__("可复制到有创建文档权限的知识库"))),content:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{currentGroup:n,currentBook:a,disableSelectorBooks:d,showRepoSelector:w,items:t?[t]:[],submitType:"copy",onSubmit:u,onCancel:function(){e.destroy()},hideCopyWithChildren:T}))})},showMoveToModal:function(){var e=o.a.confirm(),u=function(){var n=j(_().mark((function n(){var o,u,s,f,d,p,h,y=arguments;return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=y.length>0&&void 0!==y[0]?y[0]:{},u=o.targetGroup,s=o.targetBook,f="/".concat(u.login,"/").concat(s.slug),n.prev=3,n.next=6,m.a.catalogNodes.move({book_id:a.id,node_uuid:t&&t.uuid,target_uuid:o.target_uuid,action:o.action,target_book_id:o.targetBook.id,with_children:o.with_children,insert_to_catalog:o.insert_to_catalog,doc_id:c&&c.id},{useOriginResp:!0,ignoreGlobalMessage:!0});case 6:if(d=n.sent,p=d.data,h=d.meta.docIds,e.destroy(),s.id!==a.id?r.a.success(__("已移动到：{target}",{target:i.a.createElement("a",{href:f,target:"_blank"},s.name)}),3):r.a.success(__("移动成功")),!x){n.next=14;break}return n.next=14,x(l,p,E(E({},o),{},{currentItem:t,docIds:h}));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(3),r.a.error(__("出错了，可尝试在 {targetBookNode} 找到文档",{targetBookNode:i.a.createElement("a",{href:"".concat(f,"/toc?tempStore=1"),target:"_blank"},__("全部文档"))}));case 19:case"end":return n.stop()}}),n,null,[[3,16]])})));return function(){return n.apply(this,arguments)}}();e.update({className:p()(b.a.modalCatalog,b.a.modal),icon:null,closable:!0,width:600,footer:null,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:b.a.modalTitle},__("移动到...")),w&&i.a.createElement("p",{className:b.a.modalDescription},__("可移动到有创建文档权限的知识库"))),content:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{currentGroup:n,currentBook:a,disableSelectorBooks:d,showRepoSelector:w,items:t?[t]:[],submitType:"move",onSubmit:u,onCancel:function(){e.destroy()}}))})},showLinkNodeModal:function(){var e=o.a.confirm();e.update({className:b.a.modal,icon:null,closable:!0,width:520,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:b.a.modalTitle},__("添加链接")),i.a.createElement("p",{className:b.a.modalDescription},__("通过添加网页链接，可插入非本知识库的内容"))),content:i.a.createElement(v.a,{item:t,onSubmit:function(t){A(t),e.destroy()},onCancel:function(){return e.destroy()}})})},showRemoveConfirmModal:function(){if(t){var e=o.a.confirm(),c=t.child_uuid?"removeWithChildren":"remove";e.update({className:b.a.removeModal,width:437,centered:!0,title:__("确认要移出目录吗？",{name:t.title}),content:t.child_uuid?__("将同时移出 {name} 下的所有节点",{name:t.title}):null,onOk:function(){S({node_uuid:t.uuid,action:c}),r.a.success(i.a.createElement(i.a.Fragment,null,__("移出成功！"),i.a.createElement("a",{href:"/".concat(n.login,"/").concat(a.slug,"/toc?tempStore=1&status=notInTOC")},__("查看"))))},okText:__("确认"),cancelText:__("取消")})}},showDestroyConfirmModal:function(){var e;t&&o.a.confirm().update({className:b.a.removeModal,width:437,centered:!0,title:__("确认删除 {name} 吗？",{name:t.title}),content:t.child_uuid?__("同时删除 {name} 下的所有文档",{name:t.title}):null,onOk:(e=j(_().mark((function e(){var n,r,o,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.updateNode(a,{node_uuid:t.uuid,action:"destroyWithChildren",has_child:!!t.child_uuid});case 2:n=e.sent,r=n.toc,o=n.deletedDocIds,i=void 0===o?[]:o,C&&C(l,r,{currentItem:t,docIds:i});case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),okText:__("确认"),cancelText:__("取消")})},showUnshareConfirmModal:function(){if(t){var e=__("你正在取消《{title}》的分享链接，取消后用户将无法通过原有链接浏览",{title:t.title});o.a.confirm({title:__("关闭分享"),content:e,onOk:function(){N(t)}})}},copyLink:function(){var e;if(t.type===f.TYPES.link)e=t.url;else{var o=window.location,i=o.protocol,c=o.host;e="".concat(i,"//").concat(c,"/").concat(n.login,"/").concat(a.slug,"/").concat(t.url)}s()(e),r.a.success(__("链接复制成功"))}}}k.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,doc:u.a.object,catalog:u.a.array.isRequired,item:u.a.object,disableSelectorBooks:u.a.array,showRepoSelector:u.a.bool,onCopy:u.a.func,onMove:u.a.func,onAction:u.a.func,onDestroy:u.a.func,onUnshare:u.a.func},t.a={useViewModel:k}},function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(14),o=n(18),a=n(28),i=n(41),c=n(0),u=n.n(c),l=n(10),s=n.n(l),f=n(126),d=n(257),p=n(57),m=function e(t){return Object(p.a)(this,e),new Error("unreachable case: ".concat(JSON.stringify(t)))},h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},y=function(e){return c.createElement(d.a,null,(function(t){var n,a=t.getPrefixCls,i=t.direction,u=e.prefixCls,l=e.size,f=e.className,d=h(e,["prefixCls","size","className"]),p=a("btn-group",u),y="";switch(l){case"large":y="lg";break;case"small":y="sm";break;case"middle":case void 0:break;default:console.warn(new m(l))}var v=s()(p,(n={},Object(o.a)(n,"".concat(p,"-").concat(y),y),Object(o.a)(n,"".concat(p,"-rtl"),"rtl"===i),n),f);return c.createElement("div",Object(r.default)({},d,{className:v}))}))},v=n(1016),b=n(303),g=n(95),_=n(132),w=n(228),E=n(208),O=function(){return{width:0,opacity:0,transform:"scale(0)"}},x=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},j=function(e){var t=e.prefixCls,n=!!e.loading;return e.existIcon?u.a.createElement("span",{className:"".concat(t,"-loading-icon")},u.a.createElement(E.a,null)):u.a.createElement(w.b,{visible:n,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:O,onAppearActive:x,onEnterStart:O,onEnterActive:x,onLeaveStart:x,onLeaveActive:O},(function(e,n){var r=e.className,o=e.style;return u.a.createElement("span",{className:"".concat(t,"-loading-icon"),style:o,ref:n},u.a.createElement(E.a,{className:r}))}))},k=n(118),S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},C=/^[\u4e00-\u9fa5]{2}$/,N=C.test.bind(C);function P(e){return"text"===e||"link"===e}function T(e,t){var n=!1,r=[];return c.Children.forEach(e,(function(e){var t=Object(i.a)(e),o="string"===t||"number"===t;if(n&&o){var a=r.length-1,c=r[a];r[a]="".concat(c).concat(e)}else r.push(e);n=o})),c.Children.map(r,(function(e){return function(e,t){if(null!=e){var n=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&"string"==typeof e.type&&N(e.props.children)?Object(k.a)(e,{children:e.props.children.split("").join(n)}):"string"==typeof e?(N(e)&&(e=e.split("").join(n)),c.createElement("span",null,e)):e}}(e,t)}))}Object(b.a)("default","primary","ghost","dashed","link","text"),Object(b.a)("circle","round"),Object(b.a)("submit","button","reset");function A(e){return"danger"===e?{danger:!0}:{type:e}}var L=function(e,t){var n,u,l=e.loading,p=void 0!==l&&l,m=e.prefixCls,h=e.type,y=e.danger,b=e.shape,w=e.size,E=e.className,O=e.children,x=e.icon,k=e.ghost,C=void 0!==k&&k,A=e.block,L=void 0!==A&&A,I=e.htmlType,R=void 0===I?"button":I,D=S(e,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),M=c.useContext(_.b),F=c.useState(!!p),B=Object(a.a)(F,2),U=B[0],z=B[1],G=c.useState(!1),V=Object(a.a)(G,2),Y=V[0],q=V[1],H=c.useContext(d.b),W=H.getPrefixCls,K=H.autoInsertSpaceInButton,$=H.direction,Q=t||c.createRef(),X=c.useRef(),J=function(){return 1===c.Children.count(O)&&!x&&!P(h)};u="object"===Object(i.a)(p)&&p.delay?p.delay||!0:!!p,c.useEffect((function(){clearTimeout(X.current),"number"==typeof u?X.current=window.setTimeout((function(){z(u)}),u):z(u)}),[u]),c.useEffect((function(){if(Q&&Q.current&&!1!==K){var e=Q.current.textContent;J()&&N(e)?Y||q(!0):Y&&q(!1)}}),[Q]);var Z=function(t){var n,r=e.onClick,o=e.disabled;U||o?t.preventDefault():null===(n=r)||void 0===n||n(t)};Object(g.a)(!("string"==typeof x&&x.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(x,"` at https://ant.design/components/icon")),Object(g.a)(!(C&&P(h)),"Button","`link` or `text` button can't be a `ghost` button.");var ee=W("btn",m),te=!1!==K,ne="";switch(w||M){case"large":ne="lg";break;case"small":ne="sm"}var re=U?"loading":x,oe=s()(ee,(n={},Object(o.a)(n,"".concat(ee,"-").concat(h),h),Object(o.a)(n,"".concat(ee,"-").concat(b),b),Object(o.a)(n,"".concat(ee,"-").concat(ne),ne),Object(o.a)(n,"".concat(ee,"-icon-only"),!O&&0!==O&&!!re),Object(o.a)(n,"".concat(ee,"-background-ghost"),C&&!P(h)),Object(o.a)(n,"".concat(ee,"-loading"),U),Object(o.a)(n,"".concat(ee,"-two-chinese-chars"),Y&&te),Object(o.a)(n,"".concat(ee,"-block"),L),Object(o.a)(n,"".concat(ee,"-dangerous"),!!y),Object(o.a)(n,"".concat(ee,"-rtl"),"rtl"===$),n),E),ae=x&&!U?x:c.createElement(j,{existIcon:!!x,prefixCls:ee,loading:!!U}),ie=O||0===O?T(O,J()&&te):null,ce=Object(f.a)(D,["navigate"]);if(void 0!==ce.href)return c.createElement("a",Object(r.default)({},ce,{className:oe,onClick:Z,ref:Q}),ae,ie);var ue=c.createElement("button",Object(r.default)({},D,{type:R,className:oe,onClick:Z,ref:Q}),ae,ie);return P(h)?ue:c.createElement(v.a,null,ue)},I=c.forwardRef(L);I.displayName="Button",I.Group=y,I.__ANT_BUTTON=!0;t.b=I},function(e,t,n){"use strict";n(60);var r=n(24),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(261),l=n(140),s=n.n(l),f=n(131),d=n(117),p=n(49),m=n(634),h=n(1209),y=n(113),v=n(89),b=n(517),g="message-module_memberMessageContainer_7bp54",_="message-module_memberMessageAction_9Iy5y",w="message-module_memberMessageClose_QyNkz";function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(c,e);var t,n,o,i=j(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),N(S(t=i.call(this,e)),"handleOrgMaxMemberLimit",(function(){switch(r.a.destroy(),(window.appData.organization||{}).payment_type){case p.PAYMENT_TYPE.paid:t.setState({orgPayflowVisible:!0,orderType:p.ORDER_TYPE.buyMember});break;case p.PAYMENT_TYPE.trial:t.setState({orgPayflowVisible:!0,orderType:p.ORDER_TYPE.renew});break;case p.PAYMENT_TYPE.downgrade_free:t.setState({orgPayflowVisible:!0,orderType:p.ORDER_TYPE.upgrade});break;case p.PAYMENT_TYPE.free:t.setState({orgTryOutVisible:!0})}})),N(S(t),"handleOrgMaxUploadLimit",(function(){switch(r.a.destroy(),(window.appData.organization||{}).payment_type){case p.PAYMENT_TYPE.paid:t.setState({orgPayflowVisible:!0,orderType:p.ORDER_TYPE.data});break;case p.PAYMENT_TYPE.trial:t.setState({orgPayflowVisible:!0,orderType:p.ORDER_TYPE.renew});break;case p.PAYMENT_TYPE.downgrade_free:t.setState({orgPayflowVisible:!0,orderType:p.ORDER_TYPE.upgrade});break;case p.PAYMENT_TYPE.free:t.setState({orgTryOutVisible:!0})}})),N(S(t),"handleOrgUpgrade",(function(){switch(r.a.destroy(),(window.appData.organization||{}).payment_type){case p.PAYMENT_TYPE.downgrade_free:t.setState({orgPayflowVisible:!0,orderType:p.ORDER_TYPE.upgrade});break;case p.PAYMENT_TYPE.free:t.setState({orgTryOutVisible:!0})}})),N(S(t),"handleCloseOrgPayFlow",(function(){t.setState({orgPayflowVisible:!1})})),N(S(t),"handleCloseTryOut",(function(){t.setState({orgTryOutVisible:!1})})),N(S(t),"getOrgMaxFileLimitMsg",(function(e,n,o,i,c,l,s,f,d,m){var h=__("，请联系空间管理员升级版本");n.destroy&&(e.payment_type===p.PAYMENT_TYPE.free?h=__("，试用付费版空间获得 {value}{unit} 上传大小限制",{value:o.value,unit:o.unit}):e.payment_type===p.PAYMENT_TYPE.downgrade_free&&(h=__("，升级付费版空间获得 {value}{unit} 上传大小限制",{value:o.value,unit:o.unit})));return a.a.createElement("span",{className:g,"data-testid":"test-max-file-size"},a.a.createElement("span",{"data-testid":"org-max_file_size"},__("当前空间版本不支持上传超过  {value}{unit} 的{desc}",{desc:i,value:c.value,unit:c.unit})+(l?"":h)),l||window.h5||!n.destroy?null:a.a.createElement("span",{"data-testid":"org-buy","data-aspm-click":"click-pay","data-aspm-param":s?"code=".concat(s):"code=default-scene1",onClick:function(){return t.handleOrgUpgrade()},className:_},e.payment_type===p.PAYMENT_TYPE.free?__("立即试用"):__("立即升级")),(f||d)&&a.a.createElement("span",{className:w,onClick:function(){m&&m(),r.a.destroy()}},a.a.createElement(u.a,null)))})),t.state={orgPayflowVisible:!1,orgTryOutVisible:!1,orderType:p.ORDER_TYPE.buy},t.payFlowRef=a.a.createRef(),t}return t=c,n=[{key:"startToPay",value:function(){this.payFlowRef.current.startToPay()}},{key:"showMemberIntro",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.a.destroy();var n=t.user||this.user,o=!1;n.member_level===d.MEMBER_LEVEL.paid&&(o=!0),this.payFlowRef.current.showMemberIntro({title:t.title,desc:t.desc,referer:t.referer,code:e,currentUser:n,isRenew:o,isBuyUpload:t.isBuyUpload})}},{key:"showMemberRenewIntro",value:function(e){r.a.destroy(),this.payFlowRef.current.showMemberIntro({code:e,isRenew:!0})}},{key:"getMaxResourceMsg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.user||this.user,r=t||{},o=r.limit,i=window,c=i.appData,u=void 0===c?{}:c,l=u.isPublicCloud,f=u.organizationUser,d=void 0===f?{}:f,p=u.organization||d.organization,m=p&&p.abilities||{},h=this._hasOwnerAbility(e),y=this._hasGroupMemberAbility(e);if(p){var v=(p.owners||[]).slice(0,3);return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{"data-testid":"org-max_resource_total_size"},__("上传流量超过 {value}{unit} 限制",{value:s.a.getSizeValue(o).value,unit:s.a.getSizeValue(o).unit}),!window.h5&&l&&a.a.createElement(a.a.Fragment,null,m.destroy?a.a.createElement("span",{className:_},a.a.createElement("a",{href:"".concat(p.host,"/r/organizations/dashboard/cashier"),target:"_blank"},__("获取更多流量"))):a.a.createElement(a.a.Fragment,null,__("，请联系空间管理员 {admins}",{admins:a.a.createElement(a.a.Fragment,null,v.map((function(e,t){return a.a.createElement("span",null,e.name,t<v.length-1&&", ")})))})))))}if("User"===(null==n?void 0:n.type))return a.a.createElement("span",{"data-testid":"test-max_resource_total_size"},__("上传流量超过 {value}{unit} 限制",{value:s.a.getSizeValue(o).value,unit:s.a.getSizeValue(o).unit}),!window.h5&&l&&h&&a.a.createElement("span",{className:_},a.a.createElement("a",{href:"".concat(window.appData.defaultSpaceHost,"/settings/member"),target:"_blank"},__("获取更多流量"))));var b=(n.owners||[]).slice(0,3);return a.a.createElement("span",{"data-testid":"group-max_resource_total_size"},__("上传流量超过 {value}{unit} 限制",{value:s.a.getSizeValue(o).value,unit:s.a.getSizeValue(o).unit}),e.isImport&&__("，部分文件导入成功"),!window.h5&&l&&(h||y)&&a.a.createElement(a.a.Fragment,null,h?a.a.createElement("span",{className:_},a.a.createElement("a",{href:"/".concat(n.login,"/settings/member"),target:"_blank"},__("获取更多流量"))):a.a.createElement(a.a.Fragment,null,__("，请联系管理员 {admins}",{admins:a.a.createElement(a.a.Fragment,null,b.map((function(e,t){return a.a.createElement("span",null,e.name,t<b.length-1&&", ")})))}))))}},{key:"getDescMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=n.user||this.user,i=r||{},c=i.limit,u=window,l=u.appData,d=void 0===l?{}:l,p=d.isPublicCloud,m=d.organizationUser,h=void 0===m?{}:m,b=d.organization||h.organization,g=b&&b.abilities||{},w=v.a.isPublication(o,b),E=b||!p||o.isPaid||w,O=this._hasOwnerAbility(n),x=this._hasGroupMemberAbility(n),j=f.MEMBER_RULE[o.type];if(n.isImport){if("max_single_file_size"===e){var k="User"===o.type?__("语雀会员"):__("高级版团队"),S=j[E?"member":"normal"][e];w&&!o.isPaid&&(S=j.normal[e]);var C=j.member[e],N=s.a.getSizeValue(S),P=s.a.getSizeValue(C);return a.a.createElement("span",null,__("导入文件中有附件超过 {value}{unit} 限制，部分文件导入成功",{value:N.value,unit:N.unit}),!E&&(O||x)&&a.a.createElement(a.a.Fragment,null,__("，"),__("升级{userLevel}享受 {value}{unit} 大{type}上传",{value:P.value,unit:P.unit,userLevel:k,type:__("文件")}),!E&&!O&&x&&a.a.createElement("span",{className:_},a.a.createElement("a",{href:"/".concat(o.login,"/members"),target:"_blank"},__("联系管理员升级")))))}if("max_resource_total_size"===e)return this.getMaxResourceMsg(n,r)}if("max_group_number"===e)return a.a.createElement("span",null,__("知识小组数量超限，只能创建 {value} 个",{value:j.normal[e]}));if("max_group_member_number"===e)return w?a.a.createElement("span",null,__("当前知识小组仅能添加 {value} 人，开通语雀空间可添加更多协作人员",{value:c||(o.isPaid?j.member[e]:j.normal[e])}),a.a.createElement("span",{className:_},a.a.createElement("a",{target:"_blank",href:f.LINKS.EXTERNAL_ORGANIZATION_INTRO_LINK},__("了解更多")))):o.isPaid?a.a.createElement("span",null,__("高级版团队仅能添加 {value} 人，开通语雀空间可添加更多协作人员",{value:c||j.member[e]}),a.a.createElement("span",{className:_},a.a.createElement("a",{target:"_blank",href:f.LINKS.EXTERNAL_ORGANIZATION_INTRO_LINK},__("了解更多")))):a.a.createElement("span",null,__("基础版团队成员仅能添加 {value1} 人",{value1:c||j.normal[e]}),!E&&(O||x)&&a.a.createElement(a.a.Fragment,null,__("，"),__("{where}升级至高级版可添加 {value2} 人",{where:window.h5?"在 PC 端":"",value2:j.member[e]}),!E&&!O&&x&&a.a.createElement("span",{className:_},a.a.createElement("a",{href:"/".concat(o.login,"/members"),target:"_blank"},__("联系管理员升级")))));if("max_book_number"===e){var T="User"===o.type?__("普通用户"):__("基础版团队");w&&(T=__("知识小组"));var A="User"===o.type?__("语雀会员"):__("高级版团队");return a.a.createElement("span",null,__("{text}仅能创建 {value} 个知识库",{value:j.normal[e],text:T}),!E&&(O||x)&&a.a.createElement(a.a.Fragment,null,__("，"),__("{where}升级至{userLevel}享受无限量知识库",{where:window.h5?"在 PC 端":"",userLevel:A}),!E&&!O&&x&&a.a.createElement("span",{className:_},a.a.createElement("a",{href:"/".concat(o.login,"/members"),target:"_blank"},__("联系管理员升级")))))}if("max_book_collaborator_number"===e){var L="User"===o.type?__("用户"):__("团队"),I="User"===o.type?__("语雀会员"):__("高级版团队");return w&&(L=__("知识小组"),I=__("知识小组")),o.isPaid?a.a.createElement("span",null,I,__("知识库成员数量超过限制")):a.a.createElement("span",{"data-testid":"test-max_book_collaborator_number"},L,__("知识库成员数量超过限制"))}if("max_resource_total_size"===e)return this.getMaxResourceMsg(n,r);if(j&&j.normal[e]){var R="User"===o.type?__("语雀会员"):__("高级版团队"),D={max_single_image_size:__("图片大小"),max_single_video_size:__("视频大小"),max_single_file_size:__("文件大小")},M={max_single_image_size:__("图片"),max_single_video_size:__("视频"),max_single_file_size:__("文件")},F=D[e],B=M[e];if(!F)return;b&&(E=!y.a.isFree(b));var U=j[E?"member":"normal"][e];w&&!o.isPaid&&(U=j.normal[e]);var z=j.member[e],G=s.a.getSizeValue(U),V=s.a.getSizeValue(z);return b?this.getOrgMaxFileLimitMsg(b,g,V,B,G,E,e):a.a.createElement("span",{"data-testid":"test-max_single_file_size"},__("{desc}超过 {value}{unit} 限制",{value:G.value,unit:G.unit,desc:F}),!E&&(O||x)&&a.a.createElement(a.a.Fragment,null,__("，"),__("{where}升级至{userLevel}享受 {value}{unit} 大{type}上传",{where:window.h5?"在 PC 端":"",userLevel:R,value:V.value,unit:V.unit,type:B}),!E&&!O&&x&&a.a.createElement("span",{className:_},a.a.createElement("a",{href:"/".concat(o.login,"/members"),target:"_blank"},__("联系管理员升级")))))}return"organization_max_member"===e?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{"data-testid":"test-organization_max_member"},__("空间成员已达上限，",{max_member:b.max_member||500})+(g.destroy?__("升级人数规模可添加更多成员"):__("请联系空间管理员"))),g.destroy?a.a.createElement("span",{"data-testid":"buy-org-member","data-aspm-click":"click-pay","data-aspm-param":e?"code=".concat(e):"code=default-scene1",onClick:function(){return t.handleOrgMaxMemberLimit()},className:_},__("立即升级")):null):void 0}},{key:"getMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,i=n.user||this.user;if(i){var c=this.getDescMessage(e,n,o);if(c){var l,s=window.appData,f=s.organization,d=s.isPublicCloud,p=f||!d||i.isPaid,m=["max_group_number","max_resource_total_size"].includes(e),h=this._hasOwnerAbility(n),y=this._hasGroupMemberAbility(n),b=!p&&!h&&y,E="max_group_member_number"===e||i.isPaid,O=f&&["max_resource_total_size","organization_max_member"].includes(e),x=v.a.isPublication(i,f),j=!window.h5&&!p&&!m&&h&&!x,k=a.a.createElement("span",{className:g},c,j&&a.a.createElement("span",{"data-testid":"test-buy-button","data-aspm-click":"click-pay","data-aspm-param":e?"code=".concat(e):"code=default-scene1",onClick:function(){return t.showMemberIntro(e,{user:n.user})},className:_},__("立即升级")),(j||b||E||O)&&a.a.createElement("span",{className:w,onClick:function(){l&&l(),r.a.destroy()}},a.a.createElement(u.a,null)));return{msg:k,alwaysOpen:j||b||E||O,level:"warning",callback:function(e){l=e}}}}}},{key:"getMessageWithFile",value:function(e,t){var n=this,o={max_single_image_size:__("图片大小"),max_single_file_size:__("文件大小"),max_single_video_size:__("视频大小")},i={max_single_image_size:__("图片"),max_single_video_size:__("视频"),max_single_file_size:__("文件")},c=o[t],l=i[t];if(c){var d=window.appData,p=d.organization,m=d.isPublicCloud,h=d.me,b=d.group,E=d.doc,O=e.filesize,x=this.user,j=E&&E.abilities&&E.abilities.update;b&&b.abilities&&!j&&("User"===b.type?(J=this._hasOwnerAbility())||(x=h):v.a.isGroupOrPublication(b)&&(this._hasGroupMemberAbility()||(x=h)));var k=v.a.isPublication(x,p),S=!m||x.isPaid||k;p&&(S=!y.a.isFree(p));var C=f.MEMBER_RULE[x.type],N=C[S?"member":"normal"][t];if(k&&!x.isPaid&&(N=C.normal[t]),O>=N){var P="User"===x.type?__("语雀会员"):__("高级版团队"),T=C.member[t],A=s.a.getSizeValue(N),L=s.a.getSizeValue(T),I=this._hasOwnerAbility(),R=this._hasGroupMemberAbility(),D=!S&&!I&&R,M=!window.h5&&!S&&I;if(p){var F=p&&p.abilities||{};X=this.getOrgMaxFileLimitMsg(p,F,L,l,A,S,t,M,D,Q)}else X=a.a.createElement("span",{className:g,"data-testid":"test-max-file-size"},a.a.createElement("span",null,__("{desc}超过 {value}{unit} 限制",{desc:c,value:A.value,unit:A.unit}),!S&&(I||R)&&a.a.createElement(a.a.Fragment,null,__("，"),__("{where}升级至{userLevel}享受 {value}{unit} 大{type}上传",{where:window.h5?__("在 PC 端"):"",userLevel:P,value:L.value,unit:L.unit,type:l}),D&&a.a.createElement("span",{className:_},a.a.createElement("a",{href:"/".concat(x.login,"/members"),target:"_blank"},__("联系管理员升级"))))),M&&a.a.createElement("span",{"data-aspm-click":"click-pay","data-aspm-param":t?"code=".concat(t):"code=default-scene2",onClick:function(){return n.showMemberIntro(t)},className:_},__("立即升级")),(M||D)&&a.a.createElement("span",{className:w,onClick:function(){Q&&Q(),r.a.destroy()}},a.a.createElement(u.a,null)));return{msg:X,alwaysOpen:M||D,level:"warning",callback:function(e){Q=e}}}var B=window.appData,U=B.isYuque,z=B.userMemberInfo,G=B.organizationUsage,V=B.groupMemberInfo;if(U){var Y=(z||{}).usage;if(p?Y=G||{}:"Group"===x.type&&(Y=(V||{}).usage),Y){var q=Y,H=q.attachment_size,W=q.video_size,K=q.image_size,$=q.max_upload_size;if(H+W+K+O>$){var Q,X,J=this._hasOwnerAbility();if(M=!window.h5&&J,X=this.getMaxResourceMsg({user:x},{limit:$}))return{msg:a.a.createElement("span",{className:g,"data-testid":"test-max_resource_total_size"},X,M&&a.a.createElement("span",{className:w,onClick:function(){Q&&Q(),r.a.destroy()}},a.a.createElement(u.a,null))),alwaysOpen:M,level:"warning",callback:function(e){Q=e}}}}}}}},{key:"_hasOwnerAbility",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=window.appData.group;if(void 0!==t.isOwner)return t.isOwner;var r=window.appData.doc;if(r&&r.abilities){if(!r.abilities.destroy)return;if(n&&n.abilities)return n.abilities.destroy}return n&&n.abilities?n.abilities.destroy:e}},{key:"_hasGroupMemberAbility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.appData.group;return void 0!==e.isOwner?!1===e.isOwner:t&&t.abilities?"Group"===t.type&&(t.abilities.create_book||t.abilities.read_private):void 0}},{key:"render",value:function(){var e=this.state,t=e.orgPayflowVisible,n=e.orgTryOutVisible,r=e.orderType,o=this.props.user,i=window.appData,c=void 0===i?{}:i,u=c.me,l=c.group,s=c.organizationUser,f=void 0===s?{}:s,d=c.organization||f.organization;return l&&l.id?this.user=l:this.user=o||u,this.user?(v.a.isGroupOrPublication(this.user)&&!this._hasGroupMemberAbility()&&(this.user=o||u),a.a.createElement("div",{"data-testid":"member-message"},a.a.createElement(b.a,{onPaySuccess:this.props.onPaySuccess,user:this.user,ref:this.payFlowRef}),d&&t&&a.a.createElement(m.a,{key:t,organization:d,onClose:this.handleCloseOrgPayFlow,visible:t,type:"buyModal",orderType:r}),d&&n&&a.a.createElement(h.a,{key:n,visible:n,organization:d,onClose:this.handleCloseTryOut}))):null}}],n&&O(t.prototype,n),o&&O(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.PureComponent);P.getMessage=function(e,t,n){if(window.__member_message_ref&&window.__member_message_ref.current)return window.__member_message_ref.current.getMessage(e,t,n)},P.getMessageWithFile=function(e,t){if(window.__member_message_ref&&window.__member_message_ref.current)return window.__member_message_ref.current.getMessageWithFile(e,t)},P.startToPay=function(){window.__member_message_ref&&window.__member_message_ref.current&&window.__member_message_ref.current.startToPay()},P.showMemberIntro=function(e,t){window.__member_message_ref&&window.__member_message_ref.current&&window.__member_message_ref.current.showMemberIntro(e,t)},P.showMemberRenewIntro=function(e){window.__member_message_ref&&window.__member_message_ref.current&&window.__member_message_ref.current.showMemberRenewIntro(e)},P.propTypes={user:c.a.object};t.a=P},function(e,t,n){"use strict";n(75);var r=n(26),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(10),l=n.n(u),s=n(34),f="index-module_mainInput_x4D9t",d="index-module_verify_AUWnn",p="index-module_active_+a3zX",m="index-module_verifyResult_pdxsH",h="index-module_success_NhSta";function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.value,n=e.onChange,i=e.onVerifySuccess,c=v(Object(o.useState)({}),2),u=c[0],b=c[1],g=function(e){u.success&&b({success:!1,message:__("优惠码已修改，请重新验证")}),n(e)},_=l()(m,y({},h,u.success)),w=l()(d,y({},p,!!t));return a.a.createElement("span",null,a.a.createElement(r.a,{"data-testid":"verifier-input",type:"text",value:t,onChange:function(e){return g(e.target.value&&e.target.value.trim())},suffix:a.a.createElement("a",{className:w,onClick:function(){s.a.promo.verify({code:t},{ignoreGlobalMessage:!0}).then((function(e){b(e),e.success&&i(e.promo)})).catch((function(){b({success:!1,message:__("优惠码无效")})}))},"data-testid":"verifier-a"},__("验证")),className:f,placeholder:__("输入优惠码后点击验证")}),a.a.createElement("div",{className:_,"data-testid":"verifier-message"},u.message))};g.propTypes={value:c.a.string,onChange:c.a.func,onVerifySuccess:c.a.func};t.a=g},,function(e,t,n){"use strict";e.exports={STATUS:{idle:0,scheduled:1,processing:2,complete:3}}},function(e,t,n){"use strict";t.a={contactInfoTitle:"receipt-module_contactInfoTitle_+WTvl",receiptButtons:"receipt-module_receiptButtons_tBTuB",cancelButton:"receipt-module_cancelButton_1xXKN"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(162)},,,,,,,function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";n(60);var r=n(24),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(88),l=n(908),s=n(657),f=n(979),d=n(980),p=n(981),m=n(1096),h=n(982),y=n(1097),v=n(983),b=n(204),g=n(1362);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=b.memberSelectorType.ORGANIZATION,k=b.memberSelectorType.GROUP,S=b.memberSelectorType.BOOK,C=b.memberSelectorType.SIMPLE_WITH_ROLE,N=b.memberSelectorType.LIST,P=b.memberSelectorType.SIMPLE;var T=a.a.forwardRef((function(e,t){var n=function(e){var t={type:e.type};e.organization&&(t.organization=e.organization),e.group&&(t.group=e.group),e.book&&(t.book=e.book),e.doc&&(t.doc=e.doc),e.list&&(t.list=e.list),e.role&&(t.supportRoles=[e.role]),e.members&&(t.members=e.members),e.disableDepSelect&&(t.disableDepSelect=e.disableDepSelect);var n,i=O(Object(o.useState)(null),2),c=i[0],u=i[1],l=O(Object(o.useState)(null),2),b=l[0],_=l[1],E=e.group&&"User"===e.group.type,x=Object(o.useMemo)((function(){return e.type===j?null:d.a.create(t)}),[t]),T=Object(o.useMemo)((function(){return e.type===j?null:v.a.create(t)}),[t]),A=Object(o.useMemo)((function(){var n=w(w({},t),{},{dataSourceServices:[]});return x&&x.enable&&n.dataSourceServices.push(x),T&&T.enable&&n.dataSourceServices.push(T),e.type===C&&(n.me=e.me),s.a.create(n)}),[t]),L=Object(o.useMemo)((function(){return f.a.create(t)}),[t]),I=Object(o.useMemo)((function(){return e.type===j?null:p.a.create(t)}),[t]),R=Object(o.useMemo)((function(){return e.type===j?null:m.a.create(t)}),[t]),D=Object(o.useMemo)((function(){return e.type===k||e.type===j?null:h.a.create(t)}),[t]),M=Object(o.useMemo)((function(){return e.type!==j?null:y.a.create(t)}),[t]),F=[],B=[];if(x&&x.enable&&(!e.disableSelectors||!e.disableSelectors.includes("addrbook"))){var U=null!=e.enableDepSelect?e.enableDepSelect:x.enableDepSelect();x.componentType="ListSelector",x.componentProps={id:d.a.id,title:d.a.title,iconName:d.a.iconName,getData:x.getData,getInitData:x.getInitData,getIconUrl:x.getIconUrl,getIconName:x.getIconName,enableDepthAll:x.enableDepthAll(),enableSelectNav:U,checkValid:A.checkValid},B.push(x)}if(!T||!T.enable||e.disableSelectors&&e.disableSelectors.includes("yuque_contacts_selector")||(T.componentType="ListSelector",T.componentProps={id:v.a.id,title:v.a.title,iconName:v.a.iconName,getData:T.getData,getInitData:T.getInitData,getIconUrl:T.getIconUrl,getIconName:T.getIconName,enableDepthAll:T.enableDepthAll(),checkValid:A.checkValid,disableNavTop:!0},B.push(T)),R&&R.enable&&(R.componentType="ListSelector",R.componentProps={id:m.a.id,title:m.a.title,getData:R.getData,getInitData:R.getInitData,getIconUrl:R.getIconUrl,getIconName:R.getIconName,checkValid:A.checkValid},B.push(R)),I&&I.enable&&(I.componentType="ListSelector",I.componentProps={id:p.a.id,title:p.a.title,iconName:p.a.iconName,getData:I.getData,getInitData:I.getInitData,getIconUrl:I.getIconUrl,getIconName:I.getIconName,checkValid:A.checkValid},B.push(I)),D&&D.enable&&!E&&(D.componentType="ListSelector",D.componentProps={id:h.a.id,title:h.a.title,iconName:h.a.iconName,getData:D.getData,getInitData:D.getInitData,getIconUrl:D.getIconUrl,getIconName:D.getIconName,getFilterRoles:D.getFilterRoles,checkValid:A.checkValid},B.push(D)),L&&L.enable&&(L.componentType="InviteSelector",L.componentProps={id:f.a.id,title:f.a.title,roleSelectorType:"radio",getJoinUrl:L.getUrl,getToken:L.getToken,updateToken:L.updateToken,roles:L.validRoles,inviteRoles:b,getCopyText:L.getCopyText,tipContent:c,actionTipText:"book"===e.type?__("访问链接即可获得权限："):null,moreSettingOptions:L.getMoreSettingOptions()},F.push(L)),A&&A.enable){var z;window.appData.organization&&(z=a.a.createElement(g.a,null));var G=e.roleSelector;A.componentType="SearchSelector",A.componentProps={id:s.a.id,title:s.a.title,searchUser:A.searchUser,getUserCount:A.getUserCount,checkValid:A.checkValid,onSubmit:A.submit,roles:A.validRoles,inviteRoles:b,quickSelectors:B,notFoundContent:z,actionTipText:"book"===e.type?__("权限："):null,roleSelector:G,getDefaultUsers:e.getDefaultUsers||A.searchUsersByIds},e.type===P&&(A.componentProps.disableMeta=x.enableDepSelect(),A.componentProps.onSubmit=e.onSubmit),window.appData.isYuque||(A.componentProps.disableMeta=x.enableDepSelect()),e.type===C&&(A.componentProps.title=e.title,A.componentProps.roles=e.roles,A.componentProps.onSubmit=e.onSubmit,e.initialValues&&(A.componentProps.initialValues=e.initialValues)),F.push(A)}return M&&M.enable&&(M.componentType="ImportSelector",M.componentProps={id:y.a.id,title:y.a.title,role:M.role,getUploadProps:M.getUploadProps,getBtnText:M.getBtnText},F.push(M)),Object(o.useEffect)((function(){L&&L.enable&&(window.appData.organization&&[k,S].includes(e.type)&&L.orgDataReady().then((function(){u(a.a.createElement("div",null,a.a.createElement("span",null,L.getOrgTipText()),a.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},L.canPublic?__("关闭邀请空间外人员?"):__("邀请空间外成员?"))))})),L.getInviteAddRoles().then((function(e){_(e)})).catch((function(e){r.a.error(e.message)})))}),[]),[S,j,N].includes(e.type)?n=f.a.id:[P,C,k].includes(e.type)&&(n=s.a.id),{selectors:F,quickSelectors:B,defaultTabKey:n,wideTabKey:s.a.id,addrbookSelectorBiz:x,searchSelectorBiz:A,inviteSelectorBiz:L,outsourcerSelectorBiz:I,orgMemberSelectorBiz:R,groupUserSelectorBiz:D,importSelectorBiz:M,yuqueContactsSelectorBiz:T}}(e),i=n.selectors,c=n.quickSelectors,u=n.defaultTabKey,b=n.wideTabKey,_=n.searchSelectorBiz;if(a.a.useImperativeHandle(t,(function(){return{searchSelectorBiz:_}}),[]),!i.length)return null;var E=i.map((function(e){var t=l.a[e.componentType];return t?(e.componentProps.quickSelectors&&(e.componentProps.quickSelectors=e.componentProps.quickSelectors.map((function(e){var t=l.a[e.componentType];return t?a.a.createElement(t,e.componentProps):null})).filter((function(e){return!!e}))),a.a.createElement(t,e.componentProps)):null})).filter((function(e){return!!e}));return a.a.createElement(l.a,{selectors:E,getWidth:function(e){return e===b&&c&&c.length>0?720:491},defaultTabKey:u,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}));T.defaultProps={disableSelectors:[]},T.propTypes={organization:c.a.object,role:c.a.oneOf([0,1,2]),onCancel:c.a.func,onClose:c.a.func,visible:c.a.bool,disableSelectors:c.a.array,disableDepSelect:c.a.bool},t.a=Object(u.d)((function(e){return{organization:e.organization,group:e.group,book:e.book,doc:e.doc,me:e.me}}),null,null,{forwardRef:!0})(T)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),i=n(260),c=n(295);t.a=function(e){var t=window.appData.isPublicCloud,n=e.group,r=e.size,u=e.showOrgLabel,l=void 0!==u&&u,s=n.organization;return o.a.createElement("div",{className:"group-avatar",style:{width:"".concat(r,"px"),height:"".concat(r,"px")}},t&&l&&s&&o.a.createElement("span",{className:"lock"},o.a.createElement(i.a.Logo,{src:s.logo,size:r>32?20:13,radius:100})),n?o.a.createElement(a.a,{src:n.avatar||n.avatar_url,size:r,name:n.name,icon:c.b.getName("User",n)}):o.a.createElement("span",{className:"default-group-avatar"},o.a.createElement("span",{className:"larkicon larkicon-group-avatar"})))}},,,,,,,,,,,,,,function(e,t,n){var r=n(1998),o=n(454),a=n(842),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var u=null==n?0:a(n);return u<0&&(u=i(c+u,0)),r(e,o(t,3),u)}},,function(e,t,n){var r=n(957),o=n(1995),a=n(837),i=o((function(e,t,n,o){r(t,a(t),e,o)}));e.exports=i},,function(e,t,n){var r=n(957),o=n(1177);e.exports=function(e){return r(e,o(e))}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}},function(e,t,n){"use strict";var r=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(726)).default;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"}},function(e,t,n){"use strict";var r=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(728)).default;t.default=o},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(633),s=n(212),f=n(17),d=n(1278),p=n(34),m=window.appData,h=m.isDesktopApp,y=m.isAlipayWebApp,v=m.isDingTalkMiniApp,b=function(e){var t="/about/organization"===window.location.pathname,n=window.location.pathname===f.a.DOC.goto_note.url,r=o.a.useMemo((function(){return s.a.getFooterLinks(window.location)}),[]);if(h)return null;if(y)return null;if(n)return null;if(v)return null;var a=function(e){p.a.settings.switchMobileVersion({mobile_view:e}).then((function(){window.location.reload()}))},i=e.full,c=e.style,m=u()("footer",e.className,{"footer-full":i,"footer-theme-organization":t,"footer-h5":window.h5}),b=window.appData,g=b.organization,_=b.zone,w=!(!g||!g.id);return o.a.createElement(d.a,null,o.a.createElement("div",{id:"footer",className:m,style:c||{},"data-testid":"footer"},o.a.createElement("div",{className:"footer-container"},o.a.createElement("div",{className:"footer-container-sitemap"},!w&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"slogan","data-testid":"slogan"},o.a.createElement(l.a.Yuque,{height:24,zone:_})),o.a.createElement("span",{className:"split"})),o.a.createElement("div",{className:"links","data-testid":"links"},r.map((function(e){return e.url?o.a.createElement("a",{key:e.name,href:e.url,target:e.target||"_blank",className:"link-primary"===e.type?"link-primary":""},e.name):"split"===e.type?o.a.createElement("span",{className:"split",key:e.name}):"link-with-effect"===e.type?o.a.createElement("a",{key:e.name,onClick:function(){var t;"switch-to-mobile"!==(t=e.action)?"switch-to-desktop"===t&&a("desktop"):a("mobile")},"data-testid":e.action},e.name):null})))),i&&!w&&o.a.createElement("div",{className:"copyright","data-testid":"copyright"},o.a.createElement("span",null,"© 语雀  经营许可证编号：合字B2-20190051"),o.a.createElement("span",null,"ICP备案号：",o.a.createElement("a",{href:"https://beian.miit.gov.cn/",target:"_blank"},"浙ICP备14032978号-13"))))))};b.propTypes={className:i.a.string,full:i.a.bool,style:i.a.object};t.a=b},function(e,t,n){"use strict";n(175);var r=n(84),o=(n(96),n(23)),a=(n(60),n(24)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(3177),f=n(3180),d=n(88),p=n(1207),m=n.n(p),h=n(116),y=n(2263),v="index-module_icon_8jbpI",b="index-module_markedHover_4Ud1t",g="index-module_markedNormal_Gyg87",_="index-module_smallMark_zhFVP",w="index-module_mark_5VZ1B",E="index-module_markIconContent_0HBQL",O="index-module_isMiniTypeMark_K8beU";function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.target,n=e.isMiniType,u=e.me,l=void 0===u?{}:u,d=e.reGetData,p=e.size,m=void 0===p?"normal":p,j=x(Object(i.useState)(!1),2),k=j[0],S=j[1],C=x(Object(i.useState)(),2),N=C[0],P=C[1],T=x(Object(i.useState)(!1),2),A=T[0],L=T[1],I=x(Object(i.useState)(t.action_tags||null),2),R=I[0],D=I[1];Object(i.useEffect)((function(){L(!!t.id)}),[t.id]),Object(i.useEffect)((function(){D(t.action_tags)}),[t.action_tags]);var M={target_type:e.targetType,id:N||t&&t.id,target_id:t&&t.target_id,action_tags:R},F=c.a.createElement(y.a,{record:M,dispatch:e.dispatch,refetch:function(e){var t=e.type,n=e.value,r=n&&n.map((function(e){return e.id})).join();D(r),"CANCEL"===t&&(L(!1),S(!1),D(null),d&&d())}}),B="small"===m?_:w;return c.a.createElement(r.a,{type:"menu",trigger:["click"],content:F,visible:k,onVisibleChange:function(e){if(!l||!l.id)return null;S(e)},destroyPopupOnHide:!0,getPopupContainer:function(e){return e.parentNode},placement:n?"bottomRight":"bottomLeft"},c.a.createElement("div",{className:n?O:B},c.a.createElement(o.a,{title:n?__("收藏"):null,placement:"bottom"},c.a.createElement("div",{className:k&&n?b:g},A?c.a.createElement("div",{className:E,"data-testid":"already-mark",onClick:function(){S(!0)}},window.h5?c.a.createElement("img",{width:"12",height:"12",style:{marginRight:"4px"},src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*LpjOSJolIloAAAAAAAAAAAAAARQnAQ",alt:"avatar"}):c.a.createElement(s.a,{className:v,style:{color:"rgb(237,164,58)"}}),!n&&c.a.createElement("span",null,__("已收藏"))):c.a.createElement("div",{className:E,"data-testid":"select-group-mark-entry",onClick:function(){!function(){var n,r=e.targetType,o=e.dispatch,i=window.appData,u=i.sharePage,s=i.share;i.isCollaborationPage&&(n=r),l.id?h.webProxy.mine.marks.create({target_type:r,target_id:t.target_id,share_target_type:u&&s&&s.target_type,collaboration_target_type:n}).then((function(e){L(!0),P(e.id),setTimeout((function(){S(!0)}),100);var t=window.appData,n=t.organization,r=t.defaultSpaceHost,o=n&&n.id,i="/dashboard/collections",u=i;0===e.organization_id&&o&&(u="".concat(r).concat(i));var l=c.a.createElement("a",{href:u},"收藏");a.a.success(c.a.createElement("span",null,"收藏成功，前往 ",l," 查看")),d&&d()})).catch((function(e){a.a.error(e.message)})):o({type:"error/toggleLoginModal",payload:{visible:!0}})}()}},window.h5?c.a.createElement("img",{width:"12",height:"12",style:{marginRight:"4px"},src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*s0VKTqCIM0EAAAAAAAAAAAAAARQnAQ",alt:"avatar"}):c.a.createElement(f.a,{className:v}),!n&&c.a.createElement("span",null,__("收藏")))))))};k.defaultProps={me:window.appData.me,isMobile:window.h5},k.propTypes={isMiniType:l.a.bool,target:l.a.object,targetType:l.a.oneOf(m.a.ALLOW_MARK_TARGET_TYPES).isRequired,style:l.a.object,onStatusChange:l.a.func,me:l.a.object,isMobile:l.a.bool};t.a=Object(d.d)()(k)},,function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){var r=n(2546),o=n(2549);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(1991),o=n(1010);e.exports=function(e,t,n,a){var i=!n;n||(n={});for(var c=-1,u=t.length;++c<u;){var l=t[c],s=a?a(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),i?o(n,l,s):r(n,l,s)}return n}},function(e,t,n){var r=n(672),o=n(558);e.exports=function(e){return o(e)&&r(e)}},,function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(557),o=n.n(r),a=n(235);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.ddOpenLink=window.ddOpenLink||o.a;var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"popWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.dd?window.appData.isDingTalkMiniApp?window.dd.postMessage({name:"navigateBackWithParams",params:e}):window.dd.navigateBack():window.appData.isYuqueMobileApp?a.a.closePage():window.AlipayJSBridge&&window.AlipayJSBridge.call("popWindow",e)}},{key:"openInBrowser",value:function(e){return window.appData.isDesktopApp?(window.parent.postMessage({name:"openExternalLink",args:[e,e,!0]},"*"),!0):window.dd||window.appData.isDingTalkApp?(o()({url:e}),!0):!!window.AlipayJSBridge&&(window.AlipayJSBridge.call("openInBrowser",{url:e}),!0)}}],n&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u=new c;t.a=u},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(303),o=Object(r.a)("success","processing","error","default","warning"),a=Object(r.a)("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime")},function(e,t,n){"use strict";var r=n(0),o=n(10),a=n.n(o);t.a=function(e){var t,n=e.className,o=e.customizeIcon,i=e.customizeIconProps,c=e.onMouseDown,u=e.onClick,l=e.children;return t="function"==typeof o?o(i):o,r.createElement("span",{className:n,onMouseDown:function(e){e.preventDefault(),c&&c(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:u,"aria-hidden":!0},void 0!==t?t:r.createElement("span",{className:a()(n.split(/\s+/).map((function(e){return"".concat(e,"-icon")})))},l))}},function(e,t,n){"use strict";var r=n(207);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c}));var r,o=n(353),a=function(){return Object(o.a)()&&window.document.documentElement},i=function(e){if(a()){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some((function(e){return e in n.style}))}return!1},c=function(){if(!a())return!1;if(void 0!==r)return r;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),r=1===e.scrollHeight,document.body.removeChild(e),r}},,function(e,t,n){"use strict";n(60);var r=n(24),o=(n(50),n(19)),a=(n(209),n(61)),i=(n(75),n(26)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f=n(88),d=n(289),p=n.n(d),m=n(234),h="ReportForm-module_container_CFFvb",y="ReportForm-module_title_NFreI",v="ReportForm-module_subtitle_iS17z",b="ReportForm-module_reportType_F9Aq+",g="ReportForm-module_reportTypeItem_fcNpj",_="ReportForm-module_btns_P3Kpd",w="ReportForm-module_reportReason_Ll05f",E="ReportForm-module_backBtn_Epa1y";function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function x(){x=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==O(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function j(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=[{name:__("含有广告等引导性内容"),type:"normal",code:m.REPORT_TYPE.ad},{name:__("含有辱骂等不友善内容"),type:"normal",code:m.REPORT_TYPE.abuse},{name:__("含有色情、淫秽内容"),type:"normal",code:m.REPORT_TYPE.vulgar},{name:__("含有反社会、血腥暴力等内容"),type:"normal",code:m.REPORT_TYPE.political},{name:__("“清朗”系列专项举报"),type:"normal",code:m.REPORT_TYPE.clearnet},{name:__("其他违法犯罪（如毒品、枪支、违规借贷等）"),type:"normal",code:m.REPORT_TYPE.illegal},{name:__("侵犯知识产权"),type:"tort"}],M=[{name:__("个人侵权"),type:"tort",code:m.REPORT_TYPE.personal_tort},{name:__("企业侵权"),type:"tort",code:m.REPORT_TYPE.enterprise_tort}],F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(l,e);var t,n,r,c=T(l);function l(){var e;C(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return R(L(e=c.call.apply(c,[this].concat(n))),"handleSubmit",(function(t){t.preventDefault();var n=e.props,r=n.onOk;(0,n.form.validateFields)((function(e,t){e||r(t)}))})),e}return t=l,(n=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return u.a.createElement(a.a,null,u.a.createElement("div",{className:v},__("具体说明")),u.a.createElement(a.a.Item,{required:!1},e("reason",{validateFirst:!0,rules:[{required:!0,max:500,message:__("请输入举报原因（字数不多于500）")}]})(u.a.createElement(i.a.TextArea,{className:w,rows:5,maxLength:500,placeholder:__("举报原因（字数不多于 500）")}))),u.a.createElement("div",{className:_},u.a.createElement(o.a,{block:!0,onClick:this.props.onCancel},__("返回")),u.a.createElement(o.a,{block:!0,type:"primary",htmlType:"submit",onClick:this.handleSubmit},__("提交"))))}}])&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(u.a.PureComponent);R(F,"propTypes",{onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired,form:s.a.object.isRequired});var B=a.a.create()(F),U=function(e){var t=e.onCancel,n=e.onOk;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:v},window.h5?__("侵权类举报请到 PC 端完成"):__("请选择类型")),!window.h5&&u.a.createElement("ul",{className:b},M.map((function(e,t){return u.a.createElement("li",{key:e.code||t,className:g,onClick:function(){return function(e){n(e)}(e)}},e.name)}))),u.a.createElement(o.a,{block:!0,className:E,onClick:function(){t()}},__("返回")))};U.propTypes={onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired};var z=function(e){var t=k(Object(c.useState)(),2),n=t[0],o=t[1];function a(e,t){t.preventDefault(),o(e)}var i=function(t){return function(){var n,o=(n=x().mark((function n(o){var a,i;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=window.appData.sharePage&&window.appData.share.token,"tort"!==t.type){n.next=6;break}return e.onClose(),i=p.a.stringify({report_type:o.code,target_id:e.targetId,target_type:e.targetType,token:a}),window.open("/r/content_reports?".concat(i)),n.abrupt("return");case 6:return n.next=8,e.dispatch({type:"proxy.web/contentReport.create",payload:{data:{report_type:t.code,target_id:e.targetId,target_type:e.targetType,token:a,meta:{reason:o.reason,referer_url:window.location.href}}}});case 8:e.onClose(),r.a.success(__("已收到你的举报，感谢反馈"));case 10:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){j(a,r,o,i,c,"next",e)}function c(e){j(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return o.apply(this,arguments)}}()};function l(){o(null)}return n?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:y},n.name),"tort"===n.type?u.a.createElement(U,{onOk:i(n),onCancel:l}):u.a.createElement(B,{onOk:i(n),onCancel:l})):u.a.createElement("div",{className:h},u.a.createElement("div",{className:y},__("举报")),u.a.createElement("div",{className:v},__("请选举报原因")),u.a.createElement("ul",{className:b},D.map((function(e,t){return u.a.createElement("li",{key:e.code||t,onClick:a.bind(null,e)},u.a.createElement("div",{className:g},e.name))}))))};z.propTypes={targetId:s.a.number.isRequired,targetType:s.a.oneOf(["Doc"]).isRequired,onClose:s.a.func.isRequired};t.a=Object(f.d)()(z)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(119),o=0,a={};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=o++,i=t;function c(){(i-=1)<=0?(e(),delete a[n]):a[n]=Object(r.a)(c)}return a[n]=Object(r.a)(c),n}i.cancel=function(e){void 0!==e&&(r.a.cancel(a[e]),delete a[e])},i.ids=a},function(e,t,n){"use strict";e.exports={TASK_PREFIX:"migration_task_",STATUS:{running:"running",stopped:"stopped",completed:"completed",error:"error"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c}));n(1909);var r=n(1911),o=n.n(r);window.ddShare=window.ddShare||o.a;var a={GREEN_ICON:"https://gw.alipayobjects.com/zos/nebulamng/2370540f-df0a-44a6-96a3-2f8f56a753f3/icon/57qrw1uw9c.png",ORANGE_ICON:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*A51lR7woXOsAAAAAAAAAAAAAARQnAQ"},i=function(){for(var e=document.querySelectorAll("meta[property]"),t={},n=0;n<e.length;n++){var r=e[n],o=r.getAttribute("property");if(o){var a=o.match(/^og:(\w+)/)[1];a&&(t[a]=r.getAttribute("content"))}}return t},c=o.a},function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return b}));var r=n(40),o=n(18),a=n(28),i=n(14),c=n(0),u=n(10),l=n.n(u),s=n(257),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},d=c.createContext({siderHook:{addSider:function(){return null},removeSider:function(){return null}}});function p(e){var t=e.suffixCls,n=e.tagName,r=e.displayName;return function(e){var o=function(r){var o=c.useContext(s.b).getPrefixCls,a=r.prefixCls,u=o(t,a);return c.createElement(e,Object(i.default)({prefixCls:u,tagName:n},r))};return o.displayName=r,o}}var m=function(e){var t=e.prefixCls,n=e.className,r=e.children,o=e.tagName,a=f(e,["prefixCls","className","children","tagName"]),u=l()(t,n);return c.createElement(o,Object(i.default)({className:u},a),r)},h=p({suffixCls:"layout",tagName:"section",displayName:"Layout"})((function(e){var t,n=c.useContext(s.b).direction,u=c.useState([]),p=Object(a.a)(u,2),m=p[0],h=p[1],y=e.prefixCls,v=e.className,b=e.children,g=e.hasSider,_=e.tagName,w=f(e,["prefixCls","className","children","hasSider","tagName"]),E=l()(y,(t={},Object(o.a)(t,"".concat(y,"-has-sider"),"boolean"==typeof g?g:m.length>0),Object(o.a)(t,"".concat(y,"-rtl"),"rtl"===n),t),v);return c.createElement(d.Provider,{value:{siderHook:{addSider:function(e){h((function(t){return[].concat(Object(r.a)(t),[e])}))},removeSider:function(e){h((function(t){return t.filter((function(t){return t!==e}))}))}}}},c.createElement(_,Object(i.default)({className:E},w),b))})),y=p({suffixCls:"layout-header",tagName:"header",displayName:"Header"})(m),v=p({suffixCls:"layout-footer",tagName:"footer",displayName:"Footer"})(m),b=p({suffixCls:"layout-content",tagName:"main",displayName:"Content"})(m);t.e=h},,,,function(e,t,n){"use strict";n(162),n(1301),n(375)},function(e,t,n){"use strict";n(162)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(119),o=n(1216);function a(e,t,n,r){var o=n-t;return(e/=r/2)<1?o/2*e*e*e+t:o/2*((e-=2)*e*e+2)+t}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getContainer,i=void 0===n?function(){return window}:n,c=t.callback,u=t.duration,l=void 0===u?450:u,s=i(),f=Object(o.a)(s,!0),d=Date.now(),p=function t(){var n=Date.now()-d,i=a(n>l?l:n,f,e,l);Object(o.b)(s)?s.scrollTo(window.pageXOffset,i):s instanceof HTMLDocument||"HTMLDocument"===s.constructor.name?s.documentElement.scrollTop=i:s.scrollTop=i,n<l?Object(r.a)(t):"function"==typeof c&&c()};Object(r.a)(p)}},,,,,,,,,function(e,t,n){var r=n(1289);e.exports=function(e,t){return r(e,5,t="function"==typeof t?t:void 0)}},,,function(e,t,n){var r=n(604),o=n(2206),a=n(674),i=n(2207),c=a((function(e){var t=r(e,i);return t.length&&t[0]===e[0]?o(t):[]}));e.exports=c},function(e,t,n){var r=n(1178);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?r(e,void 0,t):[]}},function(e,t,n){"use strict";var r=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(933)),a=r(n(728)),i=r(n(729)),c=r(n(934)),u="${label}不是一个有效的${type}",l={locale:"zh-cn",Pagination:o.default,DatePicker:a.default,TimePicker:i.default,Calendar:c.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:u,method:u,array:u,object:u,number:u,date:u,boolean:u,integer:u,float:u,regexp:u,email:u,url:u,hex:u},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};t.default=l},function(e,t,n){"use strict";var r=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(2749)).default;t.default=o},function(e,t,n){"use strict";t.a={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]}},function(e,t,n){"use strict";var r=n(1075);t.a=r.a},function(e,t,n){"use strict";n(245);var r=n(64),o=(n(133),n(31)),a=(n(50),n(19)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(10),f=n.n(s),d=n(38),p="index-module_belongs_A3uam",m="index-module_meta_Jn6WP",h="index-module_truncation_g-6vp";function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={Login:function(e){var t=e.goto,n=t?"/login?goto=".concat(encodeURIComponent(t)):"/login";return c.a.createElement(a.a,{href:n,size:e.size,type:"primary","data-aspm-click":"d65962"},__("登录 / 注册"))}};g.Login.propTypes={size:l.a.oneOf(["small","large"]),goto:l.a.string},g.Job=function(e){var t=e.user,n=e.truncation;if(t)return c.a.createElement("span",{className:f()(m,b({},h,n))},c.a.createElement(d.b,{name:"user-job",width:16,height:16}),c.a.createElement("span",null,t.job_title||__("未填写")))},g.Job.propTypes={user:l.a.object.isRequired,truncation:l.a.bool},g.Location=function(e){var t=e.user,n=e.truncation,r=e.size,o=void 0===r?16:r;return t=t||{},c.a.createElement("span",{className:f()(m,b({},h,n))},c.a.createElement(d.b,{name:"user-location",width:o,height:o}),c.a.createElement("span",null,t.location||__("未填写")))},g.Location.propTypes={size:l.a.object.number,user:l.a.object.isRequired,truncation:l.a.bool},g.Department=function(e){var t,n=e.user,r=e.truncation;if(n)return c.a.createElement("div",null,null!==(t=n.departments)&&void 0!==t&&t.length?n.departments.map((function(e){return c.a.createElement("span",{className:f()(m,b({},h,r))},c.a.createElement(d.b,{name:"user-department-opa",width:16,height:16}),c.a.createElement("span",null,e))})):c.a.createElement("span",{className:f()(m,b({},h,r))},c.a.createElement(d.b,{name:"user-department-opa",width:16,height:16}),c.a.createElement("span",null,n.department||__("未填写"))))},g.Department.propTypes={user:l.a.object.isRequired,truncation:l.a.bool},g.Link=function(e){var t=e.user,n=e.className;return c.a.createElement("a",{href:"/".concat(t.login),title:t.name,className:n},t.name)},g.Link.propTypes={user:l.a.object.isRequired,className:l.a.string},g.Name=function(e){var t=e.user,n=e.className;return c.a.createElement("span",{title:t.name,className:n},t.name)},g.Name.propTypes={user:l.a.object.isRequired,className:l.a.string};var _=function(e){var t=e.belongs,n=e.onChange,a=y(Object(i.useState)(__("管理员")),2),u=a[0],l=a[1];return c.a.createElement(r.a,{trigger:["click"],overlay:c.a.createElement(o.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},t.map((function(e,t){return c.a.createElement(o.a.Item,{key:e.type},c.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),function(e){n(e.type),l(e.text)}(e)}},e.text))})))},c.a.createElement("span",null,u,c.a.createElement("span",{className:f()("larkicon","larkicon-arrow-down",p)})))};_.propTypes={belongs:l.a.array.isRequired,onChange:l.a.func.isRequired},g.BelongMenu=_;t.a=g},,,function(e,t,n){"use strict";n(175);var r=n(84),o=(n(50),n(19)),a=(n(75),n(26)),i=(n(96),n(23)),c=(n(60),n(24)),u=(n(2779),n(2266)),l=(n(922),n(427)),s=(n(344),n(196)),f=n(0),d=n.n(f),p=n(2),m=n.n(p),h=n(88),y=n(376),v=n.n(y),b=n(32),g=n.n(b),_=n(10),w=n.n(_),E=n(2250),O=n(109),x=function(e){var t=null,n=null,r=null,o=null;return d.a.createElement("div",{onTouchStart:function(e){e.stopPropagation(),t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY},onTouchEnd:function(a){a.stopPropagation(),r=a.changedTouches[0].pageX,o=a.changedTouches[0].pageY;var i=r-t,c=o-n;Math.abs(c)>Math.abs(i)&&c>30&&e.onSwipeDown()}},e.children)};x.propTypes={onSwipeDown:m.a.func,children:m.a.node};var j=x,k=n(970),S=n(1156),C=n(235),N=n(191),P=n(179),T=n.n(P),A=n(38),L=n(2082),I=n(34),R={shareBtn:"index-module_shareBtn_MYKPn",shareIcon:"index-module_shareIcon_UoXj5",shareInactive:"index-module_shareInactive_cSvCg",shareInactiveTitle:"index-module_shareInactiveTitle_n5K1c",actionBlockTitleDisabled:"index-module_actionBlockTitleDisabled_VJvWG",actionBlockTilteTip:"index-module_actionBlockTilteTip_hXUbO",actionBlockTitle:"index-module_actionBlockTitle_5dtod",shareActive:"index-module_shareActive_IHLgc",link:"index-module_link_ByXOk",linkBtn:"index-module_linkBtn_Gjnu2",linkExpiredTime:"index-module_linkExpiredTime_CYlbG",linkInput:"index-module_linkInput_rDrEn",actionMore:"index-module_actionMore_5Lfa5",actionMoreIcon:"index-module_actionMoreIcon_lEpXH",actions:"index-module_actions_rq6S-",actionUnfold:"index-module_actionUnfold_9BGeC",actionItem:"index-module_actionItem_TiqS2",actionBlock:"index-module_actionBlock_YdM52",qr:"index-module_qr_IPBVu",qrText:"index-module_qrText_ZjpAe",password:"index-module_password_GFKAi",scope:"index-module_scope_HmEvu",scopeIcon:"index-module_scopeIcon_3t0vt",btnReset:"index-module_btnReset_gdsVL",iconReset:"index-module_iconReset_cr8v-",modalContainer:"index-module_modalContainer_-oEKr",shareCancel:"index-module_shareCancel_1Oq6k",shareModal:"index-module_shareModal_fhHUv",shareButtons:"index-module_shareButtons_MDnoy",buttonItem:"index-module_buttonItem_wZa34",buttonText:"index-module_buttonText_1BWyp",singleCopyBtn:"index-module_singleCopyBtn_TRBPr",shareMoreSettings:"index-module_shareMoreSettings_PL5fK",paymentLink:"index-module_paymentLink_BKZGU",shareMorePageContent:"index-module_shareMorePageContent_LOd5U",passwordText:"index-module_passwordText_tk1DK",actionMoreIconMobile:"index-module_actionMoreIconMobile_Jl8NW",actionMoreIconMobileActive:"index-module_actionMoreIconMobileActive_KvnUA"};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}function V(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(m,e);var t,n,f,p=G(m);function m(){var e;B(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return H(Y(e=p.call.apply(p,[this].concat(n))),"state",{share:null,qrcode:"",actionUnfold:!1,showModal:e.props.showShareModal,showShareMorePage:!1}),H(Y(e),"getShareModelConfig",(function(){var t=e.state.share,n=e.props,r=n.organization,o=n.group,a=n.book,i=n.doc,c=n.me,u=n.note,l=window.appData,s=l.isYuque,f=l.settings,p=void 0===f?{}:f,m=r&&!!r.id,h=m&&p.is_trusted_organization,y=1===(null==r?void 0:r.share_to_outside_enable),v=(null==t?void 0:t.is_active)&&!(null!=t&&t.is_time_expired),b=v?__("分享中"):__("分享"),_=!1;_="Note"===(null==t?void 0:t.target_type)?null==c?void 0:c.isPaid:null==o?void 0:o.isPaid,null!=r&&r.id&&(_=r.isPaid||h);var w,E,O=(null==t?void 0:t.expired_at)&&g()(t.expired_at).format("YYYY-MM-DD HH:mm:ss"),x=O?__("链接有效期至 ")+O:__("链接永久有效");return null!=t&&t.is_time_expired&&(x=__("链接已过期")),w=null!=t&&t.is_scope_all&&v?__("内容已转为公开，互联网所有获得链接的人皆可访问。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:d.a.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank"},__("服务协议"))}):__("开启后，互联网所有获得链接的人皆可访问。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:d.a.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank"},__("服务协议"))}),m&&(v?null!=t&&t.is_scope_all&&y?(w=__("内容已转为公开，所有获得链接的人皆可访问。"),E=__("该文档互联网可见")):(w=__("空间内所有获得链接的人皆可访问。"),E=__("该文档空间内可见")):(w=__("开启后，空间内所有获得链接的人皆可访问。"),E=__("该文档空间内可见"))),s||(w=null!=t&&t.is_scope_all&&v?__("内网所有获得链接的人皆可访问，请注意信息安全。"):__("开启后，内网所有获得链接的人皆可访问，请注意信息安全。")),{linkExpiredText:x,headerText:w,isInOrg:m,isShareToOutside:y,isActiveShare:v,isPaid:_,buttonText:b,organization:r,group:o,doc:i,book:a,me:c,share:t,isYuque:s,note:u,readOnlyHeaderText:E}})),H(Y(e),"copyLink",(function(t){t.preventDefault();var n=e.getShareModelConfig(),r=n.isActiveShare,o=n.share,a=n.book,i=n.doc,c=n.note,u=e.props,l=u.onCopySharingUrl,s=u.onCopyUrl,f=u.type,d=null;if(d="doc"===f?i:"book"===f?a:c,r){var p=Object(L.a)(o,f,d);l?l({doc:i,share:o}):T()(p,{format:"text/plain"}),e.toast(__("链接已复制"))}else s?s(i):T()(window.location.href),e.toast(__("成功复制到剪切板"))})),H(Y(e),"setShare",(function(t){e.setState({share:t},(function(){e.generateQrcode()}))})),H(Y(e),"getShare",(function(){var t,n=e.props,r=n.type,o=n.book,a=n.doc,i=n.note;if("doc"!==r||null!=a&&null!==(t=a.abilities)&&void 0!==t&&t.share){var c="doc"===r?"Doc":"Book",u="doc"===r?null==a?void 0:a.id:null==o?void 0:o.id;"note"===r&&(c="Note",u=i.id),I.a.shares.findOne({target_type:c,target_id:u}).then((function(t){e.setShare(t)}))}})),H(Y(e),"generateQrcode",(function(){v.a.toDataURL(e.getShareLink(),(function(t,n){e.setState({qrcode:n})}))})),H(Y(e),"onChangeShareStatus",(function(t){"function"==typeof e.props.onChangeShareStatus&&e.props.onChangeShareStatus(e.state.share,t)})),H(Y(e),"getShareLink",(function(){var t=e.state.share,n=e.props.type;return t?"doc"===n?"".concat(window.location.origin,"/docs/share/").concat(t.token):"book"===n?"".concat(window.location.origin,"/books/share/").concat(t.token):"".concat(window.location.origin,"/r/notes/share/").concat(t.token):""})),H(Y(e),"activeShare",(function(){var t=e.state.share,n=e.props,r=n.type,o=n.book,a=n.doc,i=n.note,c=t?"update":"create",u="doc"===r?"Doc":"Book",l="doc"===r?null==a?void 0:a.id:null==o?void 0:o.id;"note"===r&&(u="Note",l=i.id);var s={token:null==t?void 0:t.token,target_type:u,target_id:l,status:0,scope:window.appData.organization?2:0};I.a.shares[c](s).then((function(t){e.toast(__("设置成功")),e.setState({share:t},(function(){e.generateQrcode(),e.onChangeShareStatus(!0)}))}))})),H(Y(e),"updateShare",(function(t){var n=e.state.share,r=e.props,o=r.type,a=r.book,i=r.doc,c=r.note,u="doc"===o?"Doc":"Book",l="doc"===o?null==i?void 0:i.id:null==a?void 0:a.id;return"note"===o&&(u="Note",l=c.id),I.a.shares.update(F(F({expired_at:n.expired_at},t),{},{target_type:u,target_id:l,token:null==n?void 0:n.token})).then((function(t){e.toast(__("设置成功")),e.setState({share:t},(function(){e.onChangeShareStatus(!0)}))}))})),H(Y(e),"updateScope",(function(t){var n=t?0:2;e.updateShare({scope:n})})),H(Y(e),"updatePassword",(function(t){var n=e.state.share;I.a.shares.newPassword({token:null==n?void 0:n.token,enable:t}).then((function(t){e.toast(__("设置成功")),e.setState({share:t})}))})),H(Y(e),"resetPassword",(function(){var t=e.state.share;t&&I.a.shares.newPassword({token:t.token,enable:!0}).then((function(t){e.toast(__("重置成功")),e.setState({share:t})}))})),H(Y(e),"closeShare",(function(){e.updateShare({status:1})})),H(Y(e),"toggleShare",(function(t){t?e.activeShare():e.closeShare()})),H(Y(e),"toggleActionUnfold",(function(){var t=e.state.actionUnfold;e.setState({actionUnfold:!t})})),H(Y(e),"renderSharePlatforms",(function(){return window.appData.sharePlatforms?window.appData.sharePlatforms.map((function(e,t){return d.a.createElement(d.a.Fragment,{key:t},t>0&&d.a.createElement("span",null,"、"),"dingtalk"===e&&__("钉钉"),"wechat"===e&&__("微信"))})):null})),H(Y(e),"toggleModal",(function(t){var n=e.state,r=n.showModal,o=n.share;e.setState({showModal:void 0!==t?t:!r},(function(){e.props.onChangeShareStatus&&e.props.onChangeShareStatus(o,e.state.showModal)}))})),H(Y(e),"handleDingTalkShare",(function(){var t=e.getShareModelConfig(),n=t.isActiveShare,r=t.doc,o=t.book,a=t.note,i=t.isYuque,c=t.share,u=e.props.type,l=null;l="doc"===u?r:"book"===u?o:a;var s=Object(k.c)(),f=n?Object(L.a)(c,u,l):window.location.href.replace("/index.html#",""),d=Object(S.buildDingTalkMiniAppSchemaUrl)(f,null,i),p=d.shareUrl,m=d.shareDesc,h=s.description||"";m&&(h="".concat(m," ").concat(h));var y={title:s.title||"",content:h,image:s.image,url:p,type:1,onSuccess:e.toggleModal,onFail:e.toggleModal};window.shareOptions=y,Object(k.b)(y)})),H(Y(e),"getDocShareInfo",(function(){for(var t=e.props,n=t.doc,r=t.book,o=t.group,a={},i=document.querySelectorAll("meta"),c=0;c<i.length;c++){var u=i[c];if(u.hasAttribute("property"))a[u.getAttribute("property")]=u.getAttribute("content")}var l=a["og:title"]||document.title,s=a["og:description"]||"语雀是一个知识创作与分享工具",f=a["og:image"],d="/".concat(o.login,"/").concat(r.slug,"/").concat(n.slug),p=r.name;return{docId:n.id,title:l,link:d,description:s,cover:f,bookName:p,updatedAt:g()(n.updated_at).format("MM-DD HH:mm")}})),H(Y(e),"handleShare",(function(){if(window.appData.isYuqueMobileApp)if(N.a.isReady){var t=e.getDocShareInfo(),n=e.props.doc;C.a.startShareDoc({docId:t.docId,docTitle:t.title,docDescription:t.description,public:n.public,url:"".concat(window.location.origin).concat(t.link)})}else e.toggleModal();else e.toggleModal()})),H(Y(e),"toggleShareMorePage",(function(){var t=e.state.showShareMorePage;e.setState({showShareMorePage:!t})})),H(Y(e),"renderMobileModal",(function(){var t,n=e.props.note,r=window.appData.isDingTalkMiniApp,o=e.getShareModelConfig(),a=o.isActiveShare,i=o.headerText,c=o.linkExpiredText,u=(null===(t=window.screen)||void 0===t?void 0:t.availHeight)&&window.screen.availHeight-56-100;return d.a.createElement(l.a,{popup:!0,visible:e.state.showModal,onClose:function(t){e.toggleModal(!1)},animationType:"slide-up",className:R.modalContainer},d.a.createElement(j,{onSwipeDown:function(){return e.toggleModal(!1)}},d.a.createElement("div",{className:R.shareModal,style:u>0?{maxHeight:u}:{}},d.a.createElement("div",{className:R.shareInactive},d.a.createElement("div",{className:R.shareInactiveTitle},d.a.createElement("h4",null,__("公开分享")),d.a.createElement(s.a,{onChange:e.toggleShare,defaultChecked:a,checked:a})),d.a.createElement("p",null,i)),a&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:R.shareActive},d.a.createElement("h4",null,r?__("分享到"):__("分享链接")),c&&d.a.createElement("p",null,c),r?d.a.createElement("div",{className:R.shareButtons},d.a.createElement("div",{className:R.buttonItem,onClick:e.handleDingTalkShare,"data-testid":"share-to-dingtalk"},d.a.createElement("div",{className:R.buttonIcon},d.a.createElement(A.b,{name:"share-dingtalk-icon",height:40,width:40})),d.a.createElement("div",{className:R.buttonText},__("钉钉"))),d.a.createElement("div",{className:R.buttonItem,onClick:e.copyLink},d.a.createElement("div",{className:R.buttonIcon},d.a.createElement(A.b,{name:"share-link",height:40,width:40})),d.a.createElement("div",{className:R.buttonText},d.a.createElement("span",{onClick:e.copyLink,"data-testid":"copy-link-btn"},__("复制链接"))))):d.a.createElement("div",{className:R.singleCopyBtn,onClick:e.copyLink,"data-testid":"copy-link-btn"},__("复制链接"))),!n&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:R.shareMoreSettings,onClick:e.toggleShareMorePage,"data-testid":"more-btn"},d.a.createElement("p",null,__("更多设置")),d.a.createElement(A.b,{name:"arrow-down",width:22,className:w()(R.actionMoreIconMobile,H({},R.actionMoreIconMobileActive,e.state.showShareMorePage))})),e.state.showShareMorePage&&d.a.createElement("div",{className:R.shareMorePageContent},e.renderActions())))),d.a.createElement("div",{className:R.shareCancel,onClick:function(){return e.toggleModal(!1)}},__("取消"))))})),H(Y(e),"renderMobile",(function(){var t,n=e.props,r=n.doc;return"doc"!==n.type||null!=r&&null!==(t=r.abilities)&&void 0!==t&&t.share?d.a.createElement(d.a.Fragment,null,e.props.autoOpen?null:d.a.createElement("div",{onClick:e.handleShare,style:{marginTop:"2px"}},d.a.createElement(A.b,{name:"h5-social-share",height:20,width:18})),e.renderMobileModal()):d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{onClick:e.handleShare,style:{marginTop:"2px"}},d.a.createElement(A.b,{name:"h5-social-share",height:20,width:18})),e.renderMobileShareModal())})),e}return t=m,(n=[{key:"componentDidMount",value:function(){this.getShare()}},{key:"toast",value:function(e){this.props.isH5?u.a.info(e,1):c.a.success(e)}},{key:"renderActions",value:function(){var e=this.state.share,t=this.props.note,n=this.getShareModelConfig(),r=n.isInOrg,o=n.isShareToOutside;return d.a.createElement("div",{className:R.actions},!t&&d.a.createElement("div",{className:R.actionItem},d.a.createElement("div",{className:R.actionBlock},d.a.createElement("span",{className:R.actionBlockTitle},d.a.createElement("span",{className:R.actionBlockTilteTip},__("密码访问"))),d.a.createElement(s.a,{onChange:this.updatePassword,defaultChecked:null==e?void 0:e.password_enable})),(null==e?void 0:e.password_enable)&&d.a.createElement("div",{className:R.password},d.a.createElement("span",{"data-testid":"password-text",className:R.passwordText},__("密码：{password}",{password:e.password})),d.a.createElement("a",{onClick:this.resetPassword,className:R.btnReset},d.a.createElement(E.a,{className:R.iconReset}),d.a.createElement("span",null,__("重置密码"))))),r&&!t&&d.a.createElement("div",{className:R.actionItem},d.a.createElement("div",{className:R.actionBlock},d.a.createElement("span",{className:w()(R.actionBlockTitle,H({},R.actionBlockTitleDisabled,!o))},d.a.createElement("span",{className:R.actionBlockTilteTip},__("互联网可见"))),d.a.createElement(i.a,{placement:"topRight",title:o?"":__("管理员已关闭空间对外分享，请联系管理员开启")},d.a.createElement(s.a,{disabled:!o,onChange:this.updateScope,defaultChecked:(null==e?void 0:e.is_scope_all)&&o}))),(null==e?void 0:e.is_scope_all)&&o&&d.a.createElement("div",{className:R.scope},d.a.createElement(A.b,{name:"warning",height:16,width:16,className:R.scopeIcon}),d.a.createElement("p",null,__("内容已转为公开，互联网所有获得链接的人皆可访问。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:d.a.createElement("a",{href:"https://www.yuque.com/terms",target:"_blank"},__("服务协议"))})))))}},{key:"renderPCPopover",value:function(){var e=this.state,t=e.share,n=e.actionUnfold,r=this.props.note,i=this.getShareModelConfig(),c=i.linkExpiredText,u=i.headerText,l=i.isActiveShare;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:R.shareInactive},d.a.createElement("div",{className:R.shareInactiveTitle},d.a.createElement("h4",null,__("公开分享")),d.a.createElement(s.a,{onChange:this.toggleShare,defaultChecked:l})),d.a.createElement("p",null,u)),l&&d.a.createElement("div",{className:R.shareActive},d.a.createElement(o.a.Group,{className:R.link},d.a.createElement(a.a,{"data-testid":"doc-share-link",className:R.linkInput,defaultValue:this.getShareLink(),disabled:!0}),d.a.createElement(o.a,{"data-testid":"copy-link-btn",type:"primary",className:R.linkBtn,onClick:this.copyLink},t.password_enable?__("复制链接和密码"):__("复制链接"))),d.a.createElement("p",{className:R.linkExpiredTime},c),!r&&d.a.createElement("div",{className:n?R.actionUnfold:""},d.a.createElement("div",{className:R.actionMore},d.a.createElement("span",{onClick:this.toggleActionUnfold,"data-testid":"more-btn",style:{cursor:"pointer"}},__("更多设置"),d.a.createElement(A.b,{name:"arrow-down",className:R.actionMoreIcon,size:"16"}))),this.renderActions()),!r&&d.a.createElement("div",{className:R.qr},d.a.createElement("span",{className:R.qrImg},d.a.createElement("img",{src:this.state.qrcode,style:{width:64,height:64}})),d.a.createElement("p",{className:R.qrText},__("使用{platforms}扫码分享当前链接",{platforms:d.a.createElement("span",null,this.renderSharePlatforms())})))))}},{key:"renderPC",value:function(){var e,t=this,n=this.props,a=n.noButton,i=n.overlayClassName,c=this.getShareModelConfig().buttonText;return e=a?this.props.content||d.a.createElement("span",{style:{display:"block"},title:c},__("分享")):d.a.createElement(o.a,{"data-testid":"doc-action-share",title:c,className:R.shareBtn},d.a.createElement("span",null,c)),d.a.createElement(d.a.Fragment,null,d.a.createElement(r.a,{content:this.renderPCPopover(),trigger:"click",noArrow:!0,placement:"bottomRight",onVisibleChange:this.onChangeShareStatus,overlayClassName:w()(R.popover,i),getPopupContainer:function(e){return"note"===t.props.type?e.closest(".note-list-item").querySelector(".note-item-more-btn"):e.parentNode}},e))}},{key:"renderMobileShareModal",value:function(){var e=this,t=window.appData.isDingTalkMiniApp,n=this.getShareModelConfig().readOnlyHeaderText;return d.a.createElement(l.a,{popup:!0,visible:this.state.showModal,onClose:function(t){e.toggleModal(!1)},animationType:"slide-up",className:R.modalContainer},d.a.createElement(j,{onSwipeDown:function(){return e.toggleModal(!1)}},d.a.createElement("div",{className:R.shareModal},d.a.createElement("div",{className:R.shareActive},d.a.createElement("h4",null,t?__("分享到"):__("分享链接")),d.a.createElement("p",null,n),t?d.a.createElement("div",{className:R.shareButtons},d.a.createElement("div",{className:R.buttonItem,onClick:this.handleDingTalkShare,"data-testid":"share-to-dingtalk"},d.a.createElement("div",{className:R.buttonIcon},d.a.createElement(A.b,{name:"share-dingtalk-icon",height:40,width:40})),d.a.createElement("div",{className:R.buttonText},__("钉钉"))),d.a.createElement("div",{className:R.buttonItem,onClick:this.copyLink},d.a.createElement("div",{className:R.buttonIcon},d.a.createElement(A.b,{name:"share-link",height:40,width:40})),d.a.createElement("div",{className:R.buttonText},d.a.createElement("span",{onClick:this.copyLink,"data-testid":"copy-link-btn"},__("复制链接"))))):d.a.createElement("div",{className:R.singleCopyBtn,onClick:this.copyLink,"data-testid":"copy-link-btn"},__("复制链接")))),d.a.createElement("div",{className:R.shareCancel,onClick:function(){return e.toggleModal(!1)}},__("取消"))))}},{key:"render",value:function(){return this.props.isH5?this.renderMobile():this.renderPC()}}])&&U(t.prototype,n),f&&U(t,f),Object.defineProperty(t,"prototype",{writable:!1}),m}(d.a.Component);W.propTypes={group:m.a.object,book:m.a.object,doc:m.a.object,note:m.a.object,me:m.a.object,organization:m.a.object,type:m.a.oneOf(["book","doc","note"]).isRequired,onChangeShareStatus:m.a.func,overlayClassName:m.a.string,noButton:m.a.bool,isH5:m.a.bool,autoOpen:m.a.bool,showShareModal:m.a.bool,onCopyUrl:m.a.func,onCopySharingUrl:m.a.func};t.a=Object(h.d)((function(e){return e}))(Object(O.b)(W))},function(e,t,n){"use strict";n(175);var r=n(84),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(306),l=n.n(u),s=n(10),f=n.n(s),d=n(38),p="CornerBubble-module_cornerBubble_2kGnu",m="CornerBubble-module_cornerCount_O3YTX",h="CornerBubble-module_cornerCountLarge_3x8Br",y="CornerBubble-module_cornerCountHover_x2J7h",v="CornerBubble-module_cornerIcon_N8Ibc";function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){var t,n,o,i=e.count,c=e.style,u=e.onClick,s=e.iconName,g=e.iconSize,_=e.countPopoverContent,w=e.countPopoverClassName;return a.a.createElement("div",{className:p,onClick:u,style:c},l()(i)&&i>0&&(n=!!_,o=a.a.createElement("div",{className:f()((t={},b(t,m,!0),b(t,y,n),b(t,h,i>99),t))},i>99?"99+":i),n?a.a.createElement(r.a,{placement:"topRight",trigger:"hover",overlayClassName:w,content:_},o):o),a.a.createElement(d.b,{className:v,name:s,width:g||20}))};g.propTypes={iconName:c.a.string.isRequired,iconSize:c.a.number,count:c.a.number,style:c.a.object,onClick:c.a.func,countPopoverContent:c.a.element,countPopoverClassName:c.a.string};t.a=g},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(926),u=n(1916);function l(e){var t=e.content,n=e.width,a=e.height,i=e.print,l=Object(r.useMemo)((function(){return u.a.contentToShow(t)}),[t]),s=Object(r.useRef)();Object(r.useEffect)((function(){function e(e){e.origin===window.location.origin&&"show:play"===e.data&&s.current.execCommand("toggleMode")}return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[]);var f={};return a&&(f.height=a),n&&(f.width=n),o.a.createElement("div",{className:e.className,style:f,"data-testid":"lake-show-viewer"},o.a.createElement(c.b,{data:l,ref:s,print:i}))}l.defaultProps={className:""},l.propTypes={className:i.a.string,content:i.a.string,print:i.a.string,height:i.a.oneOfType([i.a.string,i.a.number]),width:i.a.oneOfType([i.a.string,i.a.number])},t.a=l},,,function(e,t,n){"use strict";n(79);var r=n(44),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(211),l=n.n(u),s=n(88),f=n(967);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["children"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){v=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function p(){}function m(){}var h={};c(h,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(k([])));b&&b!==t&&n.call(b,o)&&(h=b);var g=m.prototype=f.prototype=Object.create(h);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==d(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=m,c(g,"constructor",m),c(m,"constructor",p),p.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_(a,r,o,i,c,"next",e)}function c(e){_(a,r,o,i,c,"throw",e)}i(void 0)}))}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t=E(Object(o.useState)(!1),2),n=t[0],i=t[1];function c(){i(!1)}function u(){return(u=w(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"proxy.web/contentReport.check",payload:{data:{target_id:e.targetId,target_type:e.targetType,token:window.appData.sharePage&&window.appData.share.token}}});case 2:i(!0);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var l=e.children,s=g(e,p);return a.a.createElement(a.a.Fragment,null,l({onShowPanel:function(){return u.apply(this,arguments)}}),a.a.createElement(r.a,{destroyOnClose:!0,title:null,footer:null,visible:n,onCancel:c},a.a.createElement(f.a,b({},s,{onClose:c}))))};x.propTypes=h(h({},l()(f.a.propTypes,["targetId","targetType"])),{},{token:c.a.string,children:c.a.func.isRequired}),t.a=Object(s.d)()(x)},function(e,t,n){var r=n(603).Symbol;e.exports=r},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(269),o=n(1988),a=n(2575),i=n(673);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:a(i(e))}},function(e,t,n){var r=n(671),o=n(558);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(1008);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},function(e,t,n){var r=n(2161);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(1986),o=n(2610);e.exports=function e(t,n,a,i,c){var u=-1,l=t.length;for(a||(a=o),c||(c=[]);++u<l;){var s=t[u];n>0&&a(s)?n>1?e(s,n-1,a,i,c):r(c,s):i||(c[c.length]=s)}return c}},function(e,t,n){var r=n(1998),o=n(2611),a=n(2612);e.exports=function(e,t,n){return t==t?a(e,t,n):r(e,o,n)}},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(50),n(19)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(370),d=n(261),p=n(34),m={orgDowngradeModal:"index-module_orgDowngradeModal_0x76S",container:"index-module_container_yYXuw",content:"index-module_content_veUj2",ordDowngradeBtn:"index-module_ordDowngradeBtn_uK2RB",textBtn:"index-module_textBtn_hBH9+",footer:"index-module_footer_prgVo",submitBtn:"index-module_submitBtn_-exwc",row:"index-module_row_zSNo-",mini:"index-module_mini_W2eQI"};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var y=["organization","onClick","text","type"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function b(){b=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(k([])));v&&v!==t&&n.call(v,o)&&(m=v);var g=p.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function g(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){g(a,r,o,i,c,"next",e)}function c(e){g(a,r,o,i,c,"throw",e)}i(void 0)}))}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var x=function(e){var t=e.organization,n=e.onClick,c=e.text,u=e.type,l=O(e,y),h=w(Object(a.useState)(!1),2),g=h[0],E=h[1],x=w(Object(a.useState)(!1),2),j=x[0],k=x[1],S=w(Object(a.useState)(!1),2),C=S[0],N=S[1];Object(a.useEffect)((function(){var e=function(){var e=_(b().mark((function e(){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.organizations.downgradeInfo({id:t.id});case 2:n=e.sent,N(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var P,T,A,L=C.noOuterSourcer,I=void 0!==L&&L,R=C.unbinded,D=void 0!==R&&R,M=C.memberSizeOk,F=void 0!==M&&M,B=I&&D&&F,U=function(){var e=_(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,p.a.organizations.downgrade({id:t.id});case 4:k(!1),window.location.reload(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),k(!1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),z=function(){n&&n(),E(!0)};return i.a.createElement(i.a.Fragment,null,"mini"===u?i.a.createElement("div",v({onClick:z,className:m.mini,"data-testid":"org-downgrade-btn",type:u||"default"},l),c||__("降级")):i.a.createElement(o.a,v({onClick:z,className:s()(m.ordDowngradeBtn,(P={},T=m.textBtn,A="text"===u,T in P?Object.defineProperty(P,T,{value:A,enumerable:!0,configurable:!0,writable:!0}):P[T]=A,P)),"data-testid":"org-downgrade-btn",type:u||"default"},l),c||__("降级为免费版")),i.a.createElement(r.a,{visible:g,onCancel:function(){return E(!1)},footer:null,onClose:function(){return E(!1)},className:m.orgDowngradeModal,width:654,maskClosable:!1},i.a.createElement("div",{className:m.container},i.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*00obTaEO8VcAAAAAAAAAAABkARQnAQ",width:"100%"}),i.a.createElement("div",{className:m.content,"data-testid":"organization-expired-content"},i.a.createElement("h1",null,__("降级到免费版空间")),i.a.createElement("p",null,__("免费空间不支持钉钉通讯录绑定、外部联系人、IP 白名单等空间管控能力，且最多支持 50 位成员")),i.a.createElement("p",{style:{marginTop:24,lineHeight:1.8}},__("降级需满足以下条件：")),i.a.createElement("div",{className:m.row},i.a.createElement("div",{className:m.left},D?i.a.createElement(f.a,{style:{color:"#37be71"}}):i.a.createElement(d.a,{style:{color:"#ff5153"}})," ",__("解除通讯录绑定")),!D&&i.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/wu8xg1",target:"_blank"},__("如何解绑"))),i.a.createElement("div",{className:m.row},i.a.createElement("div",{className:m.left},I?i.a.createElement(f.a,{style:{color:"#37be71"}}):i.a.createElement(d.a,{style:{color:"#ff5153"}})," ",__("删除所有外部联系人")),!I&&i.a.createElement("a",{href:"/r/organizations/dashboard/members?role=external",target:"_blank"},__("立刻删除"))),i.a.createElement("div",{className:m.row},i.a.createElement("div",{className:m.left},F?i.a.createElement(f.a,{style:{color:"#37be71"}}):i.a.createElement(d.a,{style:{color:"#ff5153"}})," ",__("成员数低于 50 人（含）")),!F&&i.a.createElement("a",{href:"/r/organizations/dashboard/members?role=all",target:"_blank"},__("管理成员"))))),i.a.createElement("div",{className:m.footer},i.a.createElement(o.a,{type:"primary","data-testid":"submit-btn",onClick:U,className:m.submitBtn,loading:j,disabled:!B},__("确定降级")))))};x.propTypes={organization:u.a.object,onClick:u.a.func,text:u.a.string,type:u.a.string};t.a=x},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(144),n(33)),a=(n(209),n(61)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(637),f=n(638),d="receiptmodal-module_receiptContainer_E57+C",p="receiptmodal-module_contactTips_rQ4lg",m="receiptmodal-module_receiptTypeTitle_u72yN",h="receiptmodal-module_receiptDesc_87YQ3";function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E=a.a.create()(s.a),O=a.a.create()(f.a),x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(u,e);var t,n,a,i=g(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=(t=i.call(this,e)).props.receipt;return t.state={radioValue:n&&void 0!==n.type?n.type:0},t}return t=u,(n=[{key:"onRadioChange",value:function(){0===this.state.radioValue?this.setState({radioValue:1}):this.setState({radioValue:0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.onClose,i=t.onChange,u=void 0===i?function(){}:i,l=t.onConfirm,s=t.submited,f=t.receipt,y=this.state.radioValue;return c.a.createElement(r.a,{className:"receipt-success-modal",title:c.a.createElement(c.a.Fragment,null,s?__("已提交申请"):__("申请发票"),c.a.createElement("p",{className:h},__("发票将在申请后的 7 个工作日内开具"))),visible:n,maskClosable:!1,closable:!0,onCancel:a,footer:null,centered:!0,width:480,zIndex:9999},c.a.createElement("div",{className:d,"data-testid":"receipt-modal"},s?c.a.createElement("p",{className:p},__("如需帮助请联系"),"：support@yuque.com"):c.a.createElement("div",{className:m},c.a.createElement(o.a.Group,{disabled:s,onChange:function(){return e.onRadioChange()},value:y},c.a.createElement(o.a,{value:1,"data-testid":"special"},__("专用发票")),c.a.createElement(o.a,{value:0},__("普通电子发票")))),0===y?c.a.createElement(E,{handleClickReceiptConfirm:l,handleApplyReceiptCancel:a,handleReceiptChange:u,data:f,isFinished:s}):c.a.createElement(O,{handleClickReceiptConfirm:l,handleApplyReceiptCancel:a,handleReceiptChange:u,data:f,isFinished:s})))}}])&&v(t.prototype,n),a&&v(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.PureComponent);x.propTypes={visible:l.a.bool,submited:l.a.bool,onClose:l.a.func,onChange:l.a.func,onConfirm:l.a.func,receipt:l.a.object};t.a=x},function(e,t,n){"use strict";n(96);var r=n(23),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(32),l=n.n(u),s=n(2038);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(c,e);var t,n,o,i=h(c);function c(){return d(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"renderContent",value:function(){var e=this.props,t=e.docStatus,n=e.savedAt,r=e.netStatus;if(r===s.NET_STATUS.offline)switch(t){case"loading":return a.a.createElement("span",{"data-testid":"loading_offline"},__("网络断开..."));case"changed":return a.a.createElement("span",{"data-testid":"auto_saving_offline"},__("网络断开，正在离线编辑..."));case"saving":return a.a.createElement("span",{"data-testid":"saving_offline"},__("网络断开，正在尝试保存..."));case"publishing":return a.a.createElement("span",{"data-testid":"publishing_offline"},__("网络断开，正在尝试发布..."));case"published":return a.a.createElement("span",{"data-testid":"published_offline"},__("已发布"));case"saved":return a.a.createElement("span",{"data-testid":"saved_offline"},__("已保存")," ",n&&l()(n).format("H:mm:ss"));case"loaded":return a.a.createElement("span",{"data-testid":"loaded_offline"},__("网络断开, 无法加载"));default:return null}else if(r===s.NET_STATUS.congestion)switch(t){case"loading":return a.a.createElement("span",{"data-testid":"loading_congestion"},__("正在加载..."));case"changed":return a.a.createElement("span",{"data-testid":"auto_saving_congestion"},__("实时协同网络异常..."));case"saving":return a.a.createElement("span",{"data-testid":"saving_congestion"},__("正在保存..."));case"publishing":return a.a.createElement("span",{"data-testid":"publishing_congestion"},__("正在发布..."));case"published":return a.a.createElement("span",{"data-testid":"published_congestion"},__("已发布"));case"saved":return a.a.createElement("span",{"data-testid":"saved_congestion"},__("已保存")," ",n&&l()(n).format("H:mm:ss"));case"loaded":return a.a.createElement("span",{"data-testid":"loaded_congestion"},__("已加载最新版本"));default:return null}else switch(t){case"loading":return a.a.createElement("span",{"data-testid":"loading"},__("正在加载..."));case"changed":return a.a.createElement("span",{"data-testid":"auto_saving"},__("自动保存中..."));case"saving":return a.a.createElement("span",{"data-testid":"saving"},__("正在保存..."));case"publishing":return a.a.createElement("span",{"data-testid":"publishing"},__("正在发布..."));case"published":return a.a.createElement("span",{"data-testid":"published"},__("已发布"));case"saved":return a.a.createElement("span",{"data-testid":"saved"},__("已保存")," ",n&&l()(n).format("H:mm:ss"));case"loaded":return a.a.createElement("span",{"data-testid":"loaded"},__("已加载最新版本"));default:return null}}},{key:"render",value:function(){var e=this,t=this.renderContent(),n=this.props.showHistory;return t&&n?a.a.createElement(r.a,{title:__("查看历史版本"),trigger:["hover","click"],placement:"bottom"},a.a.createElement("span",{style:{cursor:"pointer"},onClick:function(t){return e.handleClick(t)}},t)):t}},{key:"handleClick",value:function(e){var t;"a"!==(null===(t=e.target)||void 0===t?void 0:t.tagName.toLowerCase())&&(0,this.props.showHistory)()}}])&&p(t.prototype,n),o&&p(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.PureComponent);b.propTypes={savedAt:c.a.instanceOf(Date),docStatus:c.a.string,netStatus:c.a.string,showHistory:c.a.func},t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,o=n(57),a=n(58),i=n(203),c=n(66),u=n(72),l=n(0),s=n(401),f=n(181),d=n(968),p=n(257),m=n(118);function h(e){return!e||null===e.offsetParent||e.hidden}function y(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3])||!(t[1]===t[2]&&t[2]===t[3])}var v=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).containerRef=l.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,n){var o,a;if(!(!t||h(t)||t.className.indexOf("-leave")>=0)){var c=e.props.insertExtraNode;e.extraNode=document.createElement("div");var u=Object(i.a)(e).extraNode,l=e.context.getPrefixCls;u.className="".concat(l(""),"-click-animating-node");var f=e.getAttributeName();if(t.setAttribute(f,"true"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&y(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){u.style.borderColor=n;var d=(null===(o=t.getRootNode)||void 0===o?void 0:o.call(t))||t.ownerDocument,p=d instanceof Document?d.body:null!==(a=d.firstChild)&&void 0!==a?a:d;r=Object(s.a)("\n      [".concat(l(""),"-click-animating-without-extra-node='true']::after, .").concat(l(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:e.csp,attachTo:p})}c&&t.appendChild(u),["transition","animation"].forEach((function(n){t.addEventListener("".concat(n,"start"),e.onTransitionStart),t.addEventListener("".concat(n,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var n=e.containerRef.current;t&&t.target===n&&!e.animationStart&&e.resetEffect(n)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!h(n.target)){e.resetEffect(t);var r=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,r)}),0),d.a.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=Object(d.a)((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(t){var n=t.csp,r=e.props.children;if(e.csp=n,!l.isValidElement(r))return r;var o=e.containerRef;return Object(f.c)(r)&&(o=Object(f.a)(r.ref,e.containerRef)),Object(m.a)(r,{ref:o})},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var n=this.props.insertExtraNode,o=this.getAttributeName();e.setAttribute(o,"false"),r&&(r.innerHTML=""),n&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(n){e.removeEventListener("".concat(n,"start"),t.onTransitionStart),e.removeEventListener("".concat(n,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return l.createElement(p.a,null,this.renderWave)}}]),n}(l.Component);v.contextType=p.b},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(40),o=n(14),a=n(28),i=n(0),c=n(1323);function u(e){var t=i.useRef({}),n=i.useState([]),u=Object(a.a)(n,2),l=u[0],s=u[1];return[function(n){var a=!0;e.add(n,(function(e,n){var u=n.key;if(e&&(!t.current[u]||a)){var l=i.createElement(c.a,Object(o.default)({},n,{holder:e}));t.current[u]=l,s((function(e){var t=e.findIndex((function(e){return e.key===n.key}));if(-1===t)return[].concat(Object(r.a)(e),[l]);var o=Object(r.a)(e);return o[t]=l,o}))}a=!1}))},i.createElement(i.Fragment,null,l)]}},function(e,t,n){"use strict";var r=n(266),o=n.n(r);t.a=function(e,t){var n,r;return n=t,r=o()(),new Promise((function(t,o){window.dd.addCustomEvents({eventId:r,success:function(e){t(e)},failed:function(e){o(e)}}),window.dd.postMessage({name:e,params:n,callbackId:r})}))}},,function(e,t,n){"use strict";n(96);var r=n(23),o=(n(130),n(35)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(49),s=n(2222);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=o.a.Option,m=function(e){var t=e.defaultValue,n=e.onChange,c=e.currentMember,u=void 0===c?50:c,d=e.isBuyMember,m=e.getPopupContainer,h=f(Object(a.useState)(!1),2),y=h[0],v=h[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{getPopupContainer:m,style:{width:"100%"},defaultValue:t,onChange:n},l.PRICE_STAGES.filter((function(e){return e.member<u})).map((function(e){return i.a.createElement(p,{value:e.member,key:e.member,disabled:!0},i.a.createElement(r.a,{title:d?__("所选套餐需大于当前套餐人数规模"):__("所选套餐不能低于空间人数")},i.a.createElement("span",null,e.member," ",__("人"),"，",e.price," ",__("元/年"))))})),l.PRICE_STAGES.filter((function(e){return e.member>=u})).map((function(e){return i.a.createElement(p,{value:e.member,key:e.member},i.a.createElement("span",null,e.member," ",__("人"),"，",e.price," ",__("元/年")))})),i.a.createElement(p,{value:"tip",disabled:!0},i.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},__("想要更多人数？")," ",i.a.createElement("a",{onClick:function(){v(!0)}},__("联系我们"))))),i.a.createElement(s.a,{visible:y,onClose:function(){v(!1)}}))};m.propTypes={defaultValue:u.a.number,onChange:u.a.func.isRequired,currentMember:u.a.number,isBuyMember:u.a.bool,getPopupContainer:u.a.func},t.a=m},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),o=r.createContext(null)},function(e,t,n){"use strict";t.a={getSelectedKeys:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter((function(e){return"/"===e||e.includes("/lark")?t===e:t.startsWith(e)}))}}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t=e.content,n=e.disableHeaderBr;if(!t)return[];var r=t.trim().split("\n"),a=[],i=function(e){var t=/(https?:\/\/[^\s]+)/g,n=e.split(t);if(!n)return e;var r,a=[],i=c(n);try{for(i.s();!(r=i.n()).done;){var u=r.value;if(t.test(u)){var l=o.a.createElement("a",{href:u,target:"_blank"},u);a.push(l)}else a.push(u)}}catch(s){i.e(s)}finally{i.f()}return o.a.createElement.apply(o.a,["span",null].concat(a))};return 1===r.length?i(t):(n||a.push(o.a.createElement("br",{key:-1})),r.forEach((function(e,t){a.push(o.a.createElement(o.a.Fragment,{key:t},i(e))),r.length-1!==t&&a.push(o.a.createElement("br",{key:"sep-".concat(t)}))})),a)}l.propTypes={content:i.a.string.isRequired},t.a=l},function(e,t,n){"use strict";n(175);var r,o=n(84),a=(n(50),n(19)),i=(n(96),n(23)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f=n(38),d=(n(60),n(24)),p=n(88),m=n(265),h=n(590),y=(n(130),n(35)),v=(n(173),n(94)),b=(n(133),n(31)),g=n(263),_=n(127),w=n(10),E=n.n(w),O=(n(245),n(64)),x=n(370),j=n(2053),k={role:"RoleSelector-module_role_jDwZn",trigger:"RoleSelector-module_trigger_PbJ3K",active:"RoleSelector-module_active_lhpS5",up:"RoleSelector-module_up_BKR9i",menu:"RoleSelector-module_menu_MwfMA",label:"RoleSelector-module_label_JI2Gx",menuItem:"RoleSelector-module_menuItem_cwz56",desc:"RoleSelector-module_desc_lnp7h"};function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=(N(r={},m.ROLE.edit,{label:Object(j.getPermissionName)(m.ROLE.edit),desc:__("拥有文档的编辑权限"),role:m.ROLE.edit}),N(r,m.ROLE.readonly,{label:Object(j.getPermissionName)(m.ROLE.readonly),desc:__("仅拥有只读和评论权限"),role:m.ROLE.readonly}),r),T=function(e){var t=S(Object(c.useState)(!1),2),n=t[0],r=t[1],o=e.role,a=e.placement,i=e.canChange,l=e.disableItems,s=e.externalActions;if(!i){var d=P[o];return u.a.createElement("span",{className:k.status},d&&d.label)}return u.a.createElement("div",{className:"role-selector"},u.a.createElement(O.a,{trigger:["click"],placement:a,onVisibleChange:function(e){r(e)},overlay:u.a.createElement(b.a,{selectedKeys:["".concat(o)],className:k.menu},[m.ROLE.edit,m.ROLE.readonly].map((function(t){var n=P[t],o=l.includes(n.role);return u.a.createElement(b.a.Item,{key:n.role,disabled:o,onClick:function(){return t=n.role,e.onChange(t),void r(!1);var t}},u.a.createElement("a",{className:k.menuItem,href:"#"},u.a.createElement("span",null,u.a.createElement("span",{className:k.label},n.label),u.a.createElement("span",{className:k.desc},n.desc)),u.a.createElement(x.a,{style:{color:"#000000"}})))})),s&&s())},u.a.createElement("span",{className:E()(k.trigger,N({},k.active,n))},P[o].label," ",u.a.createElement(f.b,{name:"down",className:E()(N({},k.up,n)),width:16}))))};T.propTypes={onChange:s.a.func,placement:s.a.string,canChange:s.a.bool,role:s.a.oneOf([m.ROLE.readonly,m.ROLE.edit]),externalActions:s.a.func,disableItems:s.a.array},T.defaultProps={onChange:function(){},placement:"bottomRight",role:"0",canChange:!0,disableItems:[]};var A=T,L={avatar:"Item-module_avatar_JD1HW",userInfo:"Item-module_userInfo_F4pgj",name:"Item-module_name_ff-QM",pending:"Item-module_pending_KikZW",login:"Item-module_login_bu7O2",loginLong:"Item-module_loginLong_Up71X",actions:"Item-module_actions_Mfqej",deleteAction:"Item-module_deleteAction_5Mfu2",actionItem:"Item-module_actionItem_piU3P",actionItemLabel:"Item-module_actionItemLabel_kzYeZ",deleteActionItem:"Item-module_deleteActionItem_RJWcd",addIcon:"Item-module_addIcon_f354N"};function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t}var t,n,r;return t=e,(n=[{key:"actionId",get:function(){throw new Error("需要实现这个对象")}},{key:"actionType",get:function(){throw new Error("需要实现这个对象")}},{key:"uid",get:function(){return this.data.uid}},{key:"id",get:function(){return this.data.id}},{key:"login",get:function(){return this.data.login}},{key:"name",get:function(){return this.data.name}},{key:"avatar",get:function(){return this.data.avatar_url}},{key:"role",get:function(){return this.data.role}},{key:"provider_type",get:function(){return this.data.provider_type}},{key:"provider_userid",get:function(){return this.data.provider_userid}},{key:"isUpdateAbility",value:function(){}},{key:"isApplying",value:function(){}},{key:"isInvited",value:function(){}},{key:"isJoined",value:function(){}},{key:"isGroupMember",value:function(){}},{key:"isMine",value:function(){}},{key:"isNewUser",value:function(){}}])&&I(t.prototype,n),r&&I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),D=function(e){if(!(e.data instanceof R))throw new Error("data should be extend ItemBase");return function(e){var t,n,r,o=e.data,a=e.renderActions,i=o.department||o.login||o.uid;return u.a.createElement("div",{"data-testid":"join-user-item",key:o.uid,className:"clearfix ".concat(L.joinUserItem),onClick:function(){o.ableToAdd()&&e.onAdd(o)}},u.a.createElement("span",{className:L.avatar},u.a.createElement(_.a,{src:o.avatar,name:o.name,size:"sm"})),u.a.createElement("div",{className:L.userInfo},u.a.createElement("span",{className:L.name},o.name),o.isGroupMember()&&u.a.createElement("span",{className:L.pending},__("团队成员")),o.isGroupReadonlyMember()&&u.a.createElement("span",{className:L.pending},__("只读成员")),!o.isGroupMember()&&!o.isGroupReadonlyMember()&&o.isInvited()&&u.a.createElement("span",{className:L.pending},__("尚未加入")),!o.isGroupMember()&&!o.isGroupReadonlyMember()&&o.isApplying()&&u.a.createElement("span",{className:L.pending},__("申请加入")),u.a.createElement("div",null,u.a.createElement("span",{className:E()(L.login,(t={},n=L.loginLong,r=(null==i?void 0:i.length)>20,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),title:i},i))),u.a.createElement("div",{className:L.actions},a(e)))}(e)};D.propTypes={data:s.a.object.isRequired,renderActions:s.a.func,onAgree:s.a.func,onReject:s.a.func,onDelete:s.a.func,onRoleChange:s.a.func,onAdd:s.a.func},D.defaultProps={renderActions:function(e){var t=e.data;if(t.ableToAdd())return u.a.createElement("span",{className:L.actionItem},u.a.createElement(g.a,{className:L.addIcon}));if(t.isMine())return u.a.createElement("span",{className:L.actionItemLabel},__("你自己"));var n=[];if(t.isUpdateAbility()){var r=u.a.createElement("a",{key:"deleteItem",className:L.deleteActionItem,"data-testid":"join-user-delete-button",onClick:function(){e.onDelete(t)}},__("移除"));t.isApplying()?(n.push(u.a.createElement("a",{onClick:function(){e.onAgree(t)},className:L.actionItem,"data-testid":"join-user-agree-button"},__("同意"))),n.push(u.a.createElement("a",{onClick:function(){e.onReject(t)},className:E()(L.actionItem,L.deleteAction)},__("拒绝")))):(t.isJoined()||t.isInvited())&&n.push(u.a.createElement(A,{role:t.role,onChange:function(n){e.onRoleChange(t,n)},externalActions:function(){return u.a.createElement(b.a.Item,null,r)},canChange:t.isUpdateAbility()}))}return u.a.createElement(u.a.Fragment,null,n.map((function(e,t){return u.a.createElement("span",{key:t},e)})))},onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onAdd:function(){}};var M=D;function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e){var t=F(Object(c.useState)(""),2),n=t[0],r=t[1],o=e.renderItem,a=e.dataSource,i="searchSelector-".concat(+new Date);return u.a.createElement("div",{className:"join-user-search-selector",id:i},u.a.createElement("div",{className:"selector"},u.a.createElement(y.a,{mode:"multiple",labelInValue:!0,value:[],placeholder:e.placeholder,notFoundContent:e.loading?u.a.createElement(v.a,{justify:"block"}):n?e.renderNotFound():null,filterOption:!1,onSearch:function(t){r(t),e.onSearch(t)},onChange:e.onChange,onSelect:function(t,n){r("");var o=a.find((function(n){return n[e.key]===t.key}));o&&e.onSelect(o)},onBlur:function(){r(""),e.onBlur&&e.onBlur()},style:{width:"100%"},disabled:e.disableSearch,getPopupContainer:function(){return document.getElementById(i)}},a.map((function(t){return u.a.createElement(y.a.Option,{key:t[e.key],className:"selector-item",disabled:e.disableSelect(t)},u.a.createElement("div",{className:"full-item"},u.a.createElement(o,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions})),u.a.createElement("div",{className:"simple-item"},t[e.name]))})))))};U.propTypes={dataSource:s.a.array,renderItem:s.a.func,renderNotFound:s.a.func,renderActions:s.a.func,key:s.a.string,name:s.a.string,disableSelect:s.a.func,onSearch:s.a.func,onChange:s.a.func,onSelect:s.a.func,onAgree:s.a.func,onReject:s.a.func,onDelete:s.a.func,onRoleChange:s.a.func,onAdd:s.a.func,onBlur:s.a.func,loading:s.a.bool,placeholder:s.a.string,disableSearch:s.a.bool},U.defaultProps={key:"uid",name:"name",placeholder:__("搜索添加用户"),loading:!1,dataSource:[],renderItem:M,renderNotFound:function(){return null},onSearch:function(){},onChange:function(){},onSelect:function(){},onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onBlur:function(){},onAdd:function(){},disableSelect:function(){return!1},disableSearch:!1};var z=U,G=(n(148),n(53)),V=(n(75),n(26)),Y=n(2250),q=n(179),H=n.n(q),W="JoinLink-module_wrapper_JVzRQ",K="JoinLink-module_link_IYaJQ",$="JoinLink-module_option_SQI7x",Q="JoinLink-module_resetLink_uVwNF",X="JoinLink-module_resetIcon_05Qgc",J="JoinLink-module_disabledWrapper_xzogk";function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=function(e){var t=e.link,n=e.loading,r=e.onRefreshLink,o=e.disableInvite,i=o?{cursor:"default"}:{};return u.a.createElement("div",{className:E()(W,te({},J,o))},u.a.createElement("div",{className:K},__("通过链接快速邀请协作"),u.a.createElement(V.a.Group,{compact:!0},u.a.createElement(V.a,{style:{width:"70%"},disabled:!0,value:t,readOnly:!0}),u.a.createElement(a.a,{style:ee({width:"30%"},i),onClick:function(){o||(H()(t),d.a.success(__("邀请链接已复制")))}},__("复制链接")))),u.a.createElement("div",{className:$},u.a.createElement(G.a,{checked:e.checked,disabled:o,onChange:function(){e.onCheckChange(!e.checked)}},__("通过链接加入时需审批确认")),u.a.createElement("a",{onClick:function(){o||r()},className:Q},u.a.createElement(Y.a,{spin:n,className:X}),__("重置链接"))))};ne.propTypes={link:s.a.string.isRequired,checked:s.a.bool.isRequired,onRefreshLink:s.a.func,onCheckChange:s.a.func.isRequired,loading:s.a.bool,disableInvite:s.a.bool},ne.defaultProps={onRefreshLink:function(){},loading:!1,disableInvite:!1};var re=ne,oe="EmptyTip-module_emptyTip_aBtYt",ae="EmptyTip-module_emptyImage_u42M6",ie="EmptyTip-module_emptyText_JUjEv",ce=function(e){return u.a.createElement("div",{className:oe},u.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*aSg9SJR6isIAAAAAAAAAAAAAARQnAQ",className:ae}),u.a.createElement("p",{className:ie},e.emptyText||__("暂无协作者")))};ce.propTypes={emptyText:s.a.string};var ue=ce,le="List-module_list_kgiSz",se="List-module_item_Yt8gv",fe=function(e){var t=e.dataSource,n=e.renderItem;return u.a.createElement("div",{className:"clearfix ".concat(le)},t.map((function(t){return u.a.createElement("div",{key:t.id||t.login,className:se},u.a.createElement(n,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions}))})))};fe.propTypes={dataSource:s.a.array,onAgree:s.a.func,onReject:s.a.func,onDelete:s.a.func,onRoleChange:s.a.func,onAdd:s.a.func,renderItem:s.a.func,renderActions:s.a.func},fe.defaultProps={dataSource:[],onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onAdd:function(){},renderItem:M};var de=fe,pe={modal:"Modal-module_modal_A7Nqp",title:"Modal-module_title_Fhe+q",menu:"Modal-module_menu_GTmMW",searchWrapper:"Modal-module_searchWrapper_G76nZ",btnLoadMore:"Modal-module_btnLoadMore_+NLxh",listWrapper:"Modal-module_listWrapper_YI-Wn"},me=function(e){var t=window.appData,n=t.isYuque,r=t.organization,o=t.group;return u.a.createElement("div",{className:pe.modal},u.a.createElement("h4",{className:pe.title},e.title),u.a.createElement("div",{className:pe.content},n&&!r&&e.memberCollabTip&&u.a.createElement(h.a.CollabTip,{dispatch:e.dispatch,user:o}),e.showSearch&&u.a.createElement("div",{className:pe.searchWrapper},u.a.createElement(z,{loading:e.searchLoading,dataSource:e.searchData,placeholder:e.placeholder,onSelect:e.onSelect,onSearch:e.onSearch,onChange:e.onChange,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,onBlur:e.onBlur,disableSelect:e.disableSelect,disableSearch:e.disableSearch,renderNotFound:e.renderSearchNotFound,renderItem:e.renderItem,renderActions:e.renderActions})),n&&e.memberDocCollaboratorTip&&u.a.createElement(h.a.DocCollaboratorTip,{collaboratorCount:e.collaboratorCount,user:o,organization:r}),e.dataSource.length>0?u.a.createElement("div",{className:pe.listWrapper},u.a.createElement(de,{dataSource:e.dataSource,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderItem:e.renderItem,renderActions:e.renderActions}),e.moreLoading?u.a.createElement("div",{className:pe.btnLoadMore},__("加载中...")):e.shouldLoadMore?u.a.createElement("div",{className:pe.btnLoadMore,onClick:e.onLoadMore},__("加载更多")):null):u.a.createElement(ue,null)),e.showJoinLink&&u.a.createElement(re,{link:e.link,disableInvite:e.disableInvite,onRefreshLink:e.onRefreshLink,checked:e.checked,onCheckChange:e.onCheckChange,loading:e.linkLoading}))};me.propTypes={dataSource:s.a.array,searchData:s.a.array,title:s.a.string.isRequired,placeholder:s.a.string,link:s.a.string.isRequired,checked:s.a.bool.isRequired,onCheckChange:s.a.func.isRequired,shouldLoadMore:s.a.bool,disableSelect:s.a.func,onLoadMore:s.a.func,onCancel:s.a.func.isRequired,onRefreshLink:s.a.func.isRequired,onSearch:s.a.func,onChange:s.a.func,onSelect:s.a.func,onAgree:s.a.func,onReject:s.a.func,onDelete:s.a.func,onRoleChange:s.a.func,onAdd:s.a.func,onBlur:s.a.func,searchLoading:s.a.bool,linkLoading:s.a.bool,moreLoading:s.a.bool,renderSearchNotFound:s.a.func,renderItem:s.a.func,renderActions:s.a.func,showSearch:s.a.bool,showJoinLink:s.a.bool,dispatch:s.a.func,memberCollabTip:s.a.bool,memberDocCollaboratorTip:s.a.bool,collaboratorCount:s.a.number,disableInvite:s.a.bool,disableSearch:s.a.bool},me.defaultProps={collaboratorCount:0,dataSource:[],searchData:[],shouldLoadMore:!1,moreLoading:!1,onLoadMore:function(){},showSearch:!0,showJoinLink:!0,disableInvite:!1,disableSearch:!1};var he=me,ye=n(34),ve=n(109),be=n(622),ge=n(124),_e=n(361),we=n(2259),Ee="SearchNotFound-module_notfound_MSXOw",Oe="SearchNotFound-module_notfoundTitle_Br7DA",xe=function(){return u.a.createElement("div",{className:Ee},u.a.createElement("p",{className:Oe},__("未在空间中找到该用户，请检查输入或联系管理员添加到空间成员")))},je=function(){return u.a.createElement("div",{className:Ee},u.a.createElement("p",{className:Oe},__("未搜索到相关用户")))},ke=n(373);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t,n){return t&&Ne(e.prototype,t),n&&Ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}function Ae(e,t){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ae(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var o=Re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}var De=function(e){Te(n,e);var t=Le(n);function n(e,r,o,a,i){var c;return Ce(this,n),(c=t.call(this,e)).collaborator=r,c.groupUser=o,c.target=a,c.book=i||a,c}return Pe(n,[{key:"department",get:function(){var e,t,n;return(null===(e=this.data)||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.department)||(null===(n=this.data)||void 0===n?void 0:n.dep)||null}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return this.data.uid||Object(_e.format)([this.data]),this.data.uid}},{key:"userId",get:function(){return this.data.id}},{key:"role",get:function(){return this.collaborator&&String(this.collaborator.role)}},{key:"workId",get:function(){return this.data.workid}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator&&this.collaborator.status===m.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator&&this.collaborator.status===m.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator&&this.collaborator.status===m.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==ke.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===ke.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}}]),n}(R),Me=function(e){Te(n,e);var t=Le(n);function n(e,r,o,a){var i;return Ce(this,n),(i=t.call(this,e)).collaborator=e,i.user=e.user,i.groupUser=r,i.target=o,i.book=a||o,i.departments=e.departments,i}return Pe(n,[{key:"department",get:function(){var e;return null!==(e=this.departments)&&void 0!==e&&e.length?this.departments.map((function(e){return e.name})).join("-"):null}},{key:"ownerType",get:function(){return this.collaborator.owner_type}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return this.user.uid||Object(_e.format)([this.user]),this.user.uid}},{key:"userId",get:function(){return this.user.id}},{key:"role",get:function(){return String(this.collaborator.role)}},{key:"login",get:function(){return this.user.login}},{key:"name",get:function(){return this.user.name}},{key:"avatar",get:function(){return this.user.avatar_url}},{key:"workId",get:function(){return this.user.workid}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator.status===m.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator.status===m.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator.status===m.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==ke.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===ke.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login&&this.isUser()}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}},{key:"isUser",value:function(){return this.ownerType===m.OWNER_TYPE.User}}]),n}(R);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ve=function(e){var t=e.group,n=e.book,r=e.doc,o=e.organization,a=e.dispatch,i=e.isEditing,l=e.onReverting,s=window.appData.isYuque,f=ze(Object(c.useState)(0),2),p=f[0],h=f[1],y=ze(Object(c.useState)(0),2),v=y[0],b=y[1],g=ze(Object(c.useState)(!1),2),_=g[0],w=g[1],E=ze(Object(c.useState)(!1),2),O=E[0],x=E[1],j=ze(Object(be.c)(r,{dispatch:a,book:n,group:t,isEditing:i}),5),k=j[0],S=j[1],C=j[2],N=j[3],P=j[4],T=ze(Object(be.e)(r,{dispatch:a,organization:o,optional_properties:"profile"}),4),A=T[0],L=T[1],I=T[2],R=T[3],D=function(e){ye.a.collaborations.count({target_type:"Doc",target_id:e.id}).then((function(e){b((null==e?void 0:e.count)||0)}))},M=function(e){w(!0),a({type:"proxy.web/collaborations.find",payload:{data:{target_type:"Doc",target_id:e.id,offset:p,optional_properties:"departments"},reducer:0===p?"doc/updateCollaborations":"doc/addCollaborations"}}).then((function(e){w(!1),200===e.length&&x(!0)}))};Object(c.useEffect)((function(){e.visible&&(M(r),a({type:"proxy.web/groups.users",payload:{data:{id:t.id},reducer:"group/updateMembers"}}),D(r))}),[e.visible,r.id,t.id]);var F=function(e){a({type:"proxy.web/collaborations.destroy",payload:{data:{id:e.actionId,type:e.actionType},reducer:"doc/removeCollaboration"}}).then((function(){var t=!e.isMine()&&!e.isApplying();d.a.success(u.a.createElement("span",null,__("操作成功"),t&&u.a.createElement("a",{className:we.a.revertLink,onClick:function(){l&&l(),d.a.destroy(),a({type:"doc/addCollaborator",payload:{data:e.collaborator}}).then((function(){d.a.success(__("撤销成功!")),M(r),D(r)}))}},__("撤销"))),3),D(r)}))},B=s&&v>=ge.a.getDocCollaboratorLimit(t);Object(_e.format)(t.members.map((function(e){return e.user}))),Object(_e.format)(r.collaborations.map((function(e){return e.user})));var U=A.map((function(e){var o=t.members.find((function(t){return t.user.uid===e.uid})),a=r.collaborations.find((function(t){return t.user.uid===e.uid}));return new De(e,a,o,r,n)})),z=r.collaborations.map((function(e){var o=t.members.find((function(t){return t.user.uid===e.user.uid}));return new Me(e,o,r,n)}));return u.a.createElement(he,{memberDocCollaboratorTip:s&&!!r,collaboratorCount:v,title:__("邀请协作者"),placeholder:__("输入用户名、用户 ID 邀请协作"),dataSource:z,link:k,onRefreshLink:S,linkLoading:C,checked:N,onCheckChange:P,searchData:U,onSearch:L,onSelect:function(e){e.ableToAdd()&&function(e){var t={target_type:"Doc",target_id:r.id,role:m.ROLE.edit};e.userId?t.user_id=e.userId:t=Be(Be({},t),{},{login:e.login,workid:e.workId,name:e.name,provider_type:e.provider_type,provider_userid:e.provider_userid}),a({type:"proxy.web/collaborations.create",payload:{data:t,reducer:"doc/addOneCollaboration"}}).then((function(){d.a.success(__("添加成功")),setTimeout((function(){D(r)}),100)}))}(e),R(e)},onBlur:R,disableSelect:function(e){return B||e&&!e.ableToAdd()},disableSearch:B,searchLoading:I,onAgree:function(e){a({type:"proxy.web/collaborations.approve",payload:{data:{id:e.actionId},reducer:"doc/updateOneCollaboration"}}).then((function(){d.a.success(__("已通过申请")),D(r)}))},onReject:F,onDelete:F,onRoleChange:function(e,t){a({type:"proxy.web/collaborations.update",payload:{data:{id:e.actionId,role:t},reducer:"doc/updateOneCollaboration"}}).then((function(){d.a.success(__("更新成功")),D(r)}))},disableInvite:B,onLoadMore:function(){h(p+200),M()},shouldLoadMore:O,onLoading:_,showSearch:r.abilities.create_collaborator,showJoinLink:r.abilities.create_collaborator,renderSearchNotFound:o&&o.id?xe:je})};Ve.propTypes={dispatch:s.a.func.isRequired,organization:s.a.object.isRequired,group:s.a.object.isRequired,book:s.a.object.isRequired,doc:s.a.object.isRequired,visible:s.a.bool,isEditing:s.a.bool,onReverting:s.a.func};var Ye=Object(p.d)((function(e){return e}))(Object(ve.b)(Ve)),qe={iconWrapper:"index-module_iconWrapper_Af16l",icon:"index-module_icon_LDSdy",revertLink:"index-module_revertLink_dekb0"};function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=function(e){var t="#collaborator"===window.location.hash,n=He(Object(c.useState)(t),2),r=n[0],l=n[1],s=e.type,d=e.isEditing,p=e.isMiniType;return u.a.createElement(u.a.Fragment,null,u.a.createElement(o.a,{content:"doc"===s&&u.a.createElement(Ye,{visible:r,isEditing:d,onReverting:function(){l(!0)}}),visible:r,trigger:"click",noArrow:!0,onVisibleChange:function(e){e||(l(!1),window.location.hash=""),l(e)},autoAdjustOverflow:!0,placement:"bottomRight",className:qe.popover,getPopupContainer:function(e){return e.parentNode}},p?u.a.createElement(i.a,{title:__("协作"),placement:"bottom"},u.a.createElement("span",{"data-testid":"doc-action-collaborate","data-aspm-click":"d225876",onClick:function(){return l(!0)},className:qe.iconWrapper},u.a.createElement(f.b,{name:"nav-invite",className:qe.icon}))):u.a.createElement(a.a,{"data-testid":"doc-collaboration","data-aspm-click":"d225876",title:__("协作"),onClick:function(){return l(!0)}},__("协作"))))};Ke.defaultProps={isMiniType:!0},Ke.propTypes={type:s.a.oneOf(["book","doc"]),isEditing:s.a.bool,isMiniType:s.a.bool};t.a=Ke},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(843),u=n(1356),l=(n(175),n(84)),s=(n(133),n(31)),f=n(88),d=n(142),p=n.n(d),m=n(358),h=n(38),y=n(428),v=n(127),b=n(590),g=(n(50),n(19)),_=n(260),w={menu:"index-module_menu_e6Xkm",item:"index-module_item_++WlE",orgAdd:"index-module_orgAdd_EYe6N",orgAddIcon:"index-module_orgAddIcon_IsdZT",text:"index-module_text_9lWCX",loading:"index-module_loading_99Q7b",actions:"index-module_actions_e-sLd",empty:"index-module_empty_KIo0V",intro:"index-module_intro_eYPFZ",introImg:"index-module_introImg_xy8Vr",mobileEmpty:"index-module_mobileEmpty_9jGUl"};function E(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t=window.appData,n=t.defaultSpaceHost,r=t.organizations,a=void 0===r?[]:r,i=t.me.canCreateOrg,c=E(a);return c.length?o.a.createElement(s.a,{className:w.menu},c.map((function(e){return o.a.createElement(s.a.Item,{key:e.id},o.a.createElement("a",{key:e.id,title:e.name,className:w.item,onClick:function(){Object(m.b)(e.host)}},o.a.createElement(_.a.Logo,{src:e.logo||e.logo_url,size:24,className:w.titleIcon,radius:"2px"}),o.a.createElement(_.a.Name,{organization:e,className:w.text})))})),!window.appData.isEnterprise&&i&&[o.a.createElement(s.a.Divider,{key:"divider-1",className:w.divider}),o.a.createElement(s.a.Item,{key:"add-org","data-aspm-click":"c36328.d246176"},o.a.createElement(_.a.NewOrg,{className:w.orgAdd,organizations:a,defaultSpaceHost:n}))]):window.h5?o.a.createElement("div",{className:w.mobileEmpty},o.a.createElement("div",{className:w.actions},o.a.createElement(g.a,{type:"primary",href:"/r/organizations/new"},__("免费试用")),o.a.createElement(g.a,{href:"https://www.yuque.com/yuque/rvzzxz/rfwopm"},__("了解更多")))):e.showGuide?o.a.createElement("div",{className:w.empty},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*ZpHiQqOgTHgAAAAAAAAAAABjARQnAQ",className:w.introImg}),o.a.createElement("div",{className:w.intro},o.a.createElement("h6",null,__("语雀空间，助力企业知识管理")),o.a.createElement("p",null,__("面向企业或组织，提供全新的体系化知识管理，在线完成知识协同，点击下方了解更多")),o.a.createElement("div",{className:w.actions},o.a.createElement(g.a,{type:"primary",href:"/r/organizations/new"},__("免费使用")),o.a.createElement(g.a,{href:"https://www.yuque.com/yuque/rvzzxz/rfwopm"},__("了解更多"))))):o.a.createElement(s.a,{className:w.menu},o.a.createElement(s.a.Item,{key:"add-org","data-aspm-click":"c36328.d246176"},o.a.createElement(_.a.NewOrg,{className:w.orgAdd,organizations:a,defaultSpaceHost:n})))};x.propTypes={showGuide:i.a.bool};var j=x,k=n(349),S=n(212),C=n(1357),N={headerUser:"index-module_headerUser_d76Z5",icon:"index-module_icon_gyZXn",headerUserMenu:"index-module_headerUserMenu_pAweA",new:"index-module_new_0Ry17",installDesktopIcon:"index-module_installDesktopIcon_MsnnU",installDesktop:"index-module_installDesktop_xQljU",headerTag:"index-module_headerTag_IcM9T",orgItemCheck:"index-module_orgItemCheck_fs1TN",text:"index-module_text_Wvjr7","user-menu-item-link":"index-module_user-menu-item-link_DLEWJ",larkicon:"index-module_larkicon_HW6Vp","user-new":"index-module_user-new_Z1ZZ+",orgMenu:"index-module_orgMenu_lfUZa",profileMenu:"index-module_profileMenu_yg-fa"},P=Object(f.d)((function(e){return e}))((function(e){var t=e.me,n=e.space,r=e.dispatch,a=window.appData,i=a.isYuque,c=a.isEnterprise,u=a.corp,f=a.organization,d=a.customDomain,g=a.canReadOrg,_=a.locale,w=a.defaultSpaceHost,E=!!f;403===a.status&&null!=g&&(E=f&&g);var O="/".concat(t.login),x="".concat(E?"":w,"/settings/profile"),P=S.a.getLocaleSwitchUrl("en-us"===_?"zh-cn":"en-us"),T="en-us"===_?"简体中文":"English",A="en-us"===_?"chinese":"english",L=o.a.createElement("div",{className:N.headerUserMenu},window.appData.isPublicCloud&&o.a.createElement(b.a.Badge,{showSafe:!0,showMember:!0,dispatch:r,user:t,organization:E?f:null}),o.a.createElement(s.a,{className:N.profileMenu},window.appData.isPublicCloud&&o.a.createElement(s.a.Divider,{key:"divider-1"}),window.appData.me.enable_theme_switch&&o.a.createElement(s.a.Item,null,o.a.createElement("a",{className:N.mainLink,onClick:function(){var e,t,n=window.appData.themeManager,r=(null==n?void 0:n.current)===y.Theme.dark?y.Theme.default:y.Theme.dark;n.switch(r,null===(e=window.appData)||void 0===e||null===(t=e.me)||void 0===t?void 0:t.id),p.a.set("current_theme",n.current)}},o.a.createElement("span",null,o.a.createElement("span",null,__("切换主题"))))),o.a.createElement(s.a.Item,null,o.a.createElement("a",{href:"/dashboard/my_books",target:"_blank",className:N.mainLink,"data-aspm-click":"c36328.d246174"},o.a.createElement(h.b,{name:"knowledge-base",height:16,width:16,className:N.icon}),o.a.createElement("span",{className:"text"},o.a.createElement("span",null,__("我的知识库"))))),o.a.createElement(s.a.Item,null,o.a.createElement("a",{href:O,target:"_blank",className:N.mainLink,"data-aspm-click":"c36328.d246175"},o.a.createElement(h.b,{name:"digitalgarden",height:16,width:16,className:N.icon}),o.a.createElement("span",{className:"text"},o.a.createElement("span",null,__("数字花园"))))),o.a.createElement(s.a.Item,null,o.a.createElement("a",{href:x,target:"_blank",className:N.mainLink},o.a.createElement(h.b,{name:"setting",height:16,width:16,className:N.icon}),o.a.createElement("span",{className:"text"},o.a.createElement("span",null,__("帐户设置"))))),o.a.createElement(s.a.Divider,null)),i&&!E&&o.a.createElement("div",{className:N.orgMenu},o.a.createElement(j,null)),o.a.createElement(s.a,{className:N.profileMenu},o.a.createElement(s.a.Item,null,o.a.createElement("a",{href:P,className:N.mainLink},o.a.createElement(h.b,{name:A,height:16,width:16,className:N.icon}),o.a.createElement("span",{className:"text"},o.a.createElement("span",null,T)))),!(i&&E)&&o.a.createElement(s.a.Item,null,o.a.createElement("a",{href:"/download",className:N.mainLink,"data-aspm-click":"c36328.d246257"},o.a.createElement(h.b,{className:N.installDesktopIcon,name:"install-desktop",height:16,width:16}),o.a.createElement("span",{className:N.installDesktop},__("下载桌面端")))),!d&&o.a.createElement(s.a.Item,null,o.a.createElement("a",{href:"/help",target:"_blank",className:N.mainLink},o.a.createElement(h.b,{name:"helpdoc",height:16,width:16,className:N.icon}),o.a.createElement("span",{className:"text"},o.a.createElement("span",null,__("帮助文档"))))),o.a.createElement(s.a.Divider,null),o.a.createElement(s.a.Item,null,o.a.createElement("a",{onClick:function(e){e.preventDefault(),Object(k.a)("c36328.d73386_6"),r({type:"me/loginOut"}).then((function(e){e.data&&(c?Object(m.b)("/login?from=logout&goto=".concat(encodeURIComponent(window.location.href))):u&&"teambition"===u.type?Object(m.b)("/login?from=logout&goto=".concat(encodeURIComponent(window.location.href),"&platform=teambition")):window.location.href=e.data.goto||"/")}))},className:N.mainLink},o.a.createElement(h.b,{name:"logout",height:16,width:16,className:N.icon}),o.a.createElement("span",{className:"text"},o.a.createElement("span",null,__("退出登录#logout"))))))),I=o.a.createElement("div",{className:N.headerUser,"data-aspm-click":"c36328.d73387"},o.a.createElement(v.a,{src:t.avatar_url,size:24,name:t.name}),o.a.createElement(h.b,{name:"down",width:16,className:N.icon}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{overlayClassName:"popover-header-user",placement:"bottomRight",type:"menu",content:L,align:{offset:[0,-16]}},I),o.a.createElement(C.a,{dispatch:r,me:t,space:n}))})),T=n(309),A=n.n(T),L=n(17),I=n(623),R=n(1158),D=n(89),M="HeadNewButton-module_header-new-btn_VH3hy",F="HeadNewButton-module_header-add-btn_nJ9ub",B="HeadNewButton-module_headNewPopover_DoiNN",U="HeadNewButton-module_menuItemContainer_VLntH",z="HeadNewButton-module_featureGuide_YV+Pu",G="HeadNewButton-module_iconContainer_HmX2B",V="HeadNewButton-module_headNewMenu_TXIWb";function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){var t=function(e){var t=e.group;return{actionList:o.a.useMemo((function(){return[q(q({},L.a.DOC.create_doc),{},{menuTitle:__("文档"),aspm:"c73330.d73333"}),q(q({},L.a.DOC.create_sheet),{},{menuTitle:__("表格"),aspm:"c73330.d73334"}),q(q({},L.a.DOC.create_board),{},{menuTitle:__("画板"),aspm:"c73330.d73337",tip_id:void 0}),q(q({},L.a.DOC.create_table),{},{menuTitle:__("数据表"),aspm:"c73330.d143087"}),L.a.DOC.divide,q(q({},L.a.BOOK.create),{},{menuTitle:__("知识库"),aspm:"c73330.d73332"}),D.a.canCreateGroup()&&!D.a.isPublication()?q(q({},L.a.GROUP.create),{},{aspm:"c73330.d73331",menuTitle:D.a.isPublication()?__("知识小组"):__("团队"),title:D.a.isPublication()?L.a.GROUP.create.publication_title:L.a.GROUP.create.title}):null,L.a.DOC.divide,q(q({},L.a.DOC.create_from_template),{},{aspm:"c73330.d73335"}),q(q({},L.a.DOC.import_to_book),{},{aspm:"c73330.d73336"})].filter((function(e){return!!e}))}),[t])}}({group:e.group}),n=t.actionList,r=o.a.createElement(s.a,{className:V},n.map((function(e,t){var n=A()(e.menuTitle||e.title||"");if(e.url)return o.a.createElement(s.a.Item,{key:e.cmd},o.a.createElement("a",{className:U,href:e.url,"data-aspm-click":e.aspm},o.a.createElement(h.b,{className:G,name:e.icon,width:20,height:20}),o.a.createElement("span",null,n)));if(e.cmd===L.a.DOC.divide.cmd)return o.a.createElement(s.a.Divider,{key:t});var r=o.a.createElement("a",{className:U,"data-aspm-click":e.aspm},o.a.createElement(h.b,{className:G,name:e.icon,width:20,height:20}),o.a.createElement("span",null,n));return e.tip_id&&(r=o.a.createElement(I.a,{tip_id:e.tip_id,className:z},r)),o.a.createElement(s.a.Item,{key:e.cmd},o.a.createElement(R.a,{command:e},r))})));return o.a.createElement(l.a,{type:"menu",content:r,placement:"bottomRight",arrowPointAtCenter:!0,overlayClassName:B,getPopupContainer:function(e){return e.parentNode},align:{offset:[32,-16]},hideWhenInactive:!0},o.a.createElement("a",{className:M,"data-aspm-click":"d73396"},o.a.createElement("span",{className:F}),o.a.createElement("span",null,__("新建"))))};W.propTypes={group:i.a.object};var K=Object(f.d)((function(e){return{group:e.group}}))(W),$=function(e){var t=e.showNewBtn,n=void 0===t||t,r=e.showNotification,a=void 0===r||r,i=window.appData.me;return o.a.createElement(c.a,{me:i},o.a.createElement("ul",{className:"UserHeadActions__list"},n&&o.a.createElement("li",{className:"UserHeadActions__item"},o.a.createElement(K,null)),a&&o.a.createElement("li",{className:"UserHeadActions__item"},o.a.createElement(u.a,null)),o.a.createElement("li",{className:"UserHeadActions__item"},o.a.createElement(P,null))))};$.propTypes={showNewBtn:i.a.bool,showNotification:i.a.bool};t.a=$},function(e,t,n){"use strict";var r=n(57),o=n(58),a=n(66),i=n(72),c=n(41),u=n(0),l=n(119),s=n(1316),f=n(353),d=n(385);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};var n=t.element,r=void 0===n?document.body:n,o={},a=Object.keys(e);return a.forEach((function(e){o[e]=r.style[e]})),a.forEach((function(t){r.style[t]=e[t]})),o};var m={},h=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),r=document.body.className;if(e){if(!n.test(r))return;return p(m),m={},void(document.body.className=r.replace(n,"").trim())}var o=Object(d.a)();if(o&&(m=p({position:"relative",width:"calc(100% - ".concat(o,"px)")}),!n.test(r))){var a="".concat(r," ").concat(t);document.body.className=a.trim()}}},y=n(40),v=0,b=[],g="ant-scrolling-effect",_=new RegExp("".concat(g),"g"),w=new Map,E=Object(o.a)((function e(t){var n=this;Object(r.a)(this,e),this.lockTarget=void 0,this.options=void 0,this.getContainer=function(){var e;return null===(e=n.options)||void 0===e?void 0:e.container},this.reLock=function(e){var t=b.find((function(e){return e.target===n.lockTarget}));t&&n.unLock(),n.options=e,t&&(t.options=e,n.lock())},this.lock=function(){var e;if(!b.some((function(e){return e.target===n.lockTarget})))if(b.some((function(e){var t,r=e.options;return(null==r?void 0:r.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})))b=[].concat(Object(y.a)(b),[{target:n.lockTarget,options:n.options}]);else{var t=0,r=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body;(r===document.body&&window.innerWidth-document.documentElement.clientWidth>0||r.scrollHeight>r.clientHeight)&&(t=Object(d.a)());var o=r.className;if(0===b.filter((function(e){var t,r=e.options;return(null==r?void 0:r.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})).length&&w.set(r,p({width:0!==t?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:r})),!_.test(o)){var a="".concat(o," ").concat(g);r.className=a.trim()}b=[].concat(Object(y.a)(b),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var e,t=b.find((function(e){return e.target===n.lockTarget}));if(b=b.filter((function(e){return e.target!==n.lockTarget})),t&&!b.some((function(e){var n,r=e.options;return(null==r?void 0:r.container)===(null===(n=t.options)||void 0===n?void 0:n.container)}))){var r=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body,o=r.className;_.test(o)&&(p(w.get(r),{element:r}),w.delete(r),r.className=r.className.replace(_,"").trim())}},this.lockTarget=v++,this.options=t})),O=0,x=Object(f.a)();var j={},k=function(e){if(!x)return null;if(e){if("string"==typeof e)return document.querySelectorAll(e)[0];if("function"==typeof e)return e();if("object"===Object(c.a)(e)&&e instanceof window.HTMLElement)return e}return document.body},S=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).container=void 0,o.componentRef=u.createRef(),o.rafId=void 0,o.scrollLocker=void 0,o.renderComponent=void 0,o.updateScrollLocker=function(e){var t=(e||{}).visible,n=o.props,r=n.getContainer,a=n.visible;a&&a!==t&&x&&k(r)!==o.scrollLocker.getContainer()&&o.scrollLocker.reLock({container:k(r)})},o.updateOpenCount=function(e){var t=e||{},n=t.visible,r=t.getContainer,a=o.props,i=a.visible,c=a.getContainer;i!==n&&x&&k(c)===document.body&&(i&&!n?O+=1:e&&(O-=1)),("function"==typeof c&&"function"==typeof r?c.toString()!==r.toString():c!==r)&&o.removeCurrentContainer()},o.attachToParent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||o.container&&!o.container.parentNode){var t=k(o.props.getContainer);return!!t&&(t.appendChild(o.container),!0)}return!0},o.getContainer=function(){return x?(o.container||(o.container=document.createElement("div"),o.attachToParent(!0)),o.setWrapperClassName(),o.container):null},o.setWrapperClassName=function(){var e=o.props.wrapperClassName;o.container&&e&&e!==o.container.className&&(o.container.className=e)},o.removeCurrentContainer=function(){var e,t;null===(e=o.container)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(o.container)},o.switchScrollingEffect=function(){1!==O||Object.keys(j).length?O||(p(j),j={},h(!0)):(h(),j=p({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},o.scrollLocker=new E({container:k(e.getContainer)}),o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=Object(l.a)((function(){e.forceUpdate()})))}},{key:"componentDidUpdate",value:function(e){this.updateOpenCount(e),this.updateScrollLocker(e),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visible,n=e.getContainer;x&&k(n)===document.body&&(O=t&&O?O-1:O),this.removeCurrentContainer(),l.a.cancel(this.rafId)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.forceRender,r=e.visible,o=null,a={getOpenCount:function(){return O},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(n||r||this.componentRef.current)&&(o=u.createElement(s.a,{getContainer:this.getContainer,ref:this.componentRef},t(a))),o}}]),n}(u.Component);t.a=S},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),o=n.n(r),a=n(10),i=n.n(a),c=n(140),u=["#3988E4","#B97940","#2F9547","#235B9D","#59AF9A"];function l(e){if(!e)return u[0];var t=e.charCodeAt(0);return u[t%u.length]||u[0]}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=e.text,n=void 0===t?"U":t,r=e.size,a=void 0===r?32:r,u=e.style,s=e.className,d=i()("placeholder-avatar",s);if(!n)return null;var p=Object(c.getAvatarText)(n);return o.a.createElement("span",{"data-testid":"letter-avatar",className:d,style:f(f({},u),{},{width:"".concat(a,"px"),heigth:"".concat(a,"px"),lineHeight:"".concat(a,"px"),fontSize:"".concat(1*a/2,"px"),backgroundColor:"".concat(l(n))})},p.toUpperCase())}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r,o=n(18),a=n(14),i=n(28),c=n(0),u=n(10),l=n.n(u),s=n(126),f=n(1059),d=n(254),p=n(389),m=n(971),h=n(257),y=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},b={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},g=c.createContext({}),_=(r=0,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r+=1,"".concat(e).concat(r)}),w=c.forwardRef((function(e,t){var n=e.prefixCls,r=e.className,u=e.trigger,w=e.children,E=e.defaultCollapsed,O=void 0!==E&&E,x=e.theme,j=void 0===x?"dark":x,k=e.style,S=void 0===k?{}:k,C=e.collapsible,N=void 0!==C&&C,P=e.reverseArrow,T=void 0!==P&&P,A=e.width,L=void 0===A?200:A,I=e.collapsedWidth,R=void 0===I?80:I,D=e.zeroWidthTriggerStyle,M=e.breakpoint,F=e.onCollapse,B=e.onBreakpoint,U=v(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),z=Object(c.useContext)(m.d).siderHook,G=Object(c.useState)("collapsed"in U?U.collapsed:O),V=Object(i.a)(G,2),Y=V[0],q=V[1],H=Object(c.useState)(!1),W=Object(i.a)(H,2),K=W[0],$=W[1];Object(c.useEffect)((function(){"collapsed"in U&&q(U.collapsed)}),[U.collapsed]);var Q=function(e,t){"collapsed"in U||q(e),null==F||F(e,t)},X=Object(c.useRef)();X.current=function(e){$(e.matches),null==B||B(e.matches),Y!==e.matches&&Q(e.matches,"responsive")},Object(c.useEffect)((function(){function e(e){return X.current(e)}var t;if("undefined"!=typeof window){var n=window.matchMedia;if(n&&M&&M in b){t=n("(max-width: ".concat(b[M],")"));try{t.addEventListener("change",e)}catch(r){t.addListener(e)}e(t)}}return function(){try{null==t||t.removeEventListener("change",e)}catch(r){null==t||t.removeListener(e)}}}),[]),Object(c.useEffect)((function(){var e=_("ant-sider-");return z.addSider(e),function(){return z.removeSider(e)}}),[]);var J,Z,ee,te,ne,re,oe,ae,ie,ce,ue=function(){Q(!Y,"clickTrigger")},le=Object(c.useContext)(h.b).getPrefixCls;return c.createElement(g.Provider,{value:{siderCollapsed:Y}},(Z=le("layout-sider",n),ee=Object(s.a)(U,["collapsed"]),ne=y(te=Y?R:L)?"".concat(te,"px"):String(te),re=0===parseFloat(String(R||0))?c.createElement("span",{onClick:ue,className:l()("".concat(Z,"-zero-width-trigger"),"".concat(Z,"-zero-width-trigger-").concat(T?"right":"left")),style:D},u||c.createElement(f.a,null)):null,oe={expanded:T?c.createElement(d.a,null):c.createElement(p.a,null),collapsed:T?c.createElement(p.a,null):c.createElement(d.a,null)}[Y?"collapsed":"expanded"],ae=null!==u?re||c.createElement("div",{className:"".concat(Z,"-trigger"),onClick:ue,style:{width:ne}},u||oe):null,ie=Object(a.default)(Object(a.default)({},S),{flex:"0 0 ".concat(ne),maxWidth:ne,minWidth:ne,width:ne}),ce=l()(Z,"".concat(Z,"-").concat(j),(J={},Object(o.a)(J,"".concat(Z,"-collapsed"),!!Y),Object(o.a)(J,"".concat(Z,"-has-trigger"),N&&null!==u&&!re),Object(o.a)(J,"".concat(Z,"-below"),!!K),Object(o.a)(J,"".concat(Z,"-zero-width"),0===parseFloat(ne)),J),r),c.createElement("aside",Object(a.default)({className:ce},ee,{style:ie,ref:t}),c.createElement("div",{className:"".concat(Z,"-children")},w),N||K&&re?ae:null)))}));w.displayName="Sider";t.b=w},function(e,t,n){"use strict";n(972);var r=n(653),o=n(0),a=n.n(o),i=n(91),c="HeadNavExplore-module_badge_l0tof";t.a=function(){var e=window.appData,t=e.me,n=e.organization,o=!(n&&n.id)&&t.hasNewEvent,u="explore_".concat(n?n.id:0,"/show_event"),l="/explore";return 1===Number(i.default.get(u))&&(l="/explore/events"),n&&n.id&&(l="/explore"),a.a.createElement("a",{href:l,"data-aspm-click":"c33153.d73391"},a.a.createElement(r.a,{dot:o,className:c},__("广场")))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return y}));var r=n(18),o=n(57),a=n(58),i=n(66),c=n(72),u=n(0),l=n(10),s=n.n(l),f=n(154),d=n(303),p=n(404),m=n(118),h=Object(d.a)("text","input");function y(e){return!!(e.prefix||e.suffix||e.allowClear)}function v(e){return!(!e.addonBefore&&!e.addonAfter)}var b=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).containerRef=u.createRef(),e.onInputMouseUp=function(t){var n;if(null===(n=e.containerRef.current)||void 0===n?void 0:n.contains(t.target)){var r=e.props.triggerFocus;null==r||r()}},e}return Object(a.a)(n,[{key:"renderClearIcon",value:function(e){var t=this.props,n=t.allowClear,o=t.value,a=t.disabled,i=t.readOnly,c=t.handleReset;if(!n)return null;var l=!a&&!i&&o,d="".concat(e,"-clear-icon");return u.createElement(f.a,{onClick:c,className:s()(Object(r.a)({},"".concat(d,"-hidden"),!l),d),role:"button"})}},{key:"renderSuffix",value:function(e){var t=this.props,n=t.suffix,r=t.allowClear;return n||r?u.createElement("span",{className:"".concat(e,"-suffix")},this.renderClearIcon(e),n):null}},{key:"renderLabeledIcon",value:function(e,t){var n,o=this.props,a=o.focused,i=o.value,c=o.prefix,l=o.className,f=o.size,d=o.suffix,h=o.disabled,b=o.allowClear,g=o.direction,_=o.style,w=o.readOnly,E=o.bordered,O=this.renderSuffix(e);if(!y(this.props))return Object(m.a)(t,{value:i});var x=c?u.createElement("span",{className:"".concat(e,"-prefix")},c):null,j=s()("".concat(e,"-affix-wrapper"),(n={},Object(r.a)(n,"".concat(e,"-affix-wrapper-focused"),a),Object(r.a)(n,"".concat(e,"-affix-wrapper-disabled"),h),Object(r.a)(n,"".concat(e,"-affix-wrapper-sm"),"small"===f),Object(r.a)(n,"".concat(e,"-affix-wrapper-lg"),"large"===f),Object(r.a)(n,"".concat(e,"-affix-wrapper-input-with-clear-btn"),d&&b&&i),Object(r.a)(n,"".concat(e,"-affix-wrapper-rtl"),"rtl"===g),Object(r.a)(n,"".concat(e,"-affix-wrapper-readonly"),w),Object(r.a)(n,"".concat(e,"-affix-wrapper-borderless"),!E),Object(r.a)(n,"".concat(l),!v(this.props)&&l),n));return u.createElement("span",{ref:this.containerRef,className:j,style:_,onMouseUp:this.onInputMouseUp},x,Object(m.a)(t,{style:null,value:i,className:Object(p.c)(e,E,f,h)}),O)}},{key:"renderInputWithLabel",value:function(e,t){var n,o=this.props,a=o.addonBefore,i=o.addonAfter,c=o.style,l=o.size,f=o.className,d=o.direction;if(!v(this.props))return t;var p="".concat(e,"-group"),h="".concat(p,"-addon"),y=a?u.createElement("span",{className:h},a):null,b=i?u.createElement("span",{className:h},i):null,g=s()("".concat(e,"-wrapper"),p,Object(r.a)({},"".concat(p,"-rtl"),"rtl"===d)),_=s()("".concat(e,"-group-wrapper"),(n={},Object(r.a)(n,"".concat(e,"-group-wrapper-sm"),"small"===l),Object(r.a)(n,"".concat(e,"-group-wrapper-lg"),"large"===l),Object(r.a)(n,"".concat(e,"-group-wrapper-rtl"),"rtl"===d),n),f);return u.createElement("span",{className:_,style:c},u.createElement("span",{className:g},y,Object(m.a)(t,{style:null}),b))}},{key:"renderTextAreaWithClearIcon",value:function(e,t){var n,o=this.props,a=o.value,i=o.allowClear,c=o.className,l=o.style,f=o.direction,d=o.bordered;if(!i)return Object(m.a)(t,{value:a});var p=s()("".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"),(n={},Object(r.a)(n,"".concat(e,"-affix-wrapper-rtl"),"rtl"===f),Object(r.a)(n,"".concat(e,"-affix-wrapper-borderless"),!d),Object(r.a)(n,"".concat(c),!v(this.props)&&c),n));return u.createElement("span",{className:p,style:l},Object(m.a)(t,{style:null,value:a}),this.renderClearIcon(e))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.inputType,r=e.element;return n===h[0]?this.renderTextAreaWithClearIcon(t,r):this.renderInputWithLabel(t,this.renderLabeledIcon(t,r))}}]),n}(u.Component);t.a=b},function(e,t,n){"use strict";var r=n(2056),o={STATUS:{draft:0,pass:1,blocked:2,trusted:3,suspended:4,overtime:5,cancelled:6,overload:7},AUDIT_TYPE:{Doc:"Doc",Book:"Book",Topic:"Topic",Doclet:"Doclet",Note:"Note",Profile:"Profile",QuickLink:"QuickLink",Label:"Label",Milestone:"Milestone",ArtboardGroup:"ArtboardGroup",Comment:"Comment",Artboard:"Artboard",User:"User",Group:"User",Headline:"Headline",DatasheetView:"DatasheetView",Organization:"Organization"},INDEXES_TYPE:{Book:"Book",Doc:"Doc",Group:"User",User:"User",Note:"Note",Organization:"Organization",Topic:"Topic"},AUDIT_ENTITY_TYPE:{Group:"User",User:"User",Doc:"Doc",Doclet:"Doclet",Topic:"Topic",Note:"Note",DatasheetView:"DatasheetView",Comment:"Comment",Book:"Book",Artboard:"Artboard"},AUDIT_FIELD_TEXT:{Organization:{name:"空间名称",description:"空间简介",logo:"空间图标"},Group:{name:"团队名称",description:"团队简介",avatar:"团队头像"},User:{name:"用户名称",description:"用户简介",avatar:"用户头像"},Profile:{location:"地址信息",job_title:"职业信息",department:"部门信息"},Book:{name:"知识库名称",description:"知识库简介",toc:"知识库目录",announcement:"话题公告",cover:"知识库图标"},Headline:{cover:"头条推荐模块封面图"}},ALLOWED_FIELD_TYPES:["text","pictures","urls"],AUDIT_RESOURCE:{cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*1hRST7TE-RcAAAAAAAAAAABkARQnAQ",common_illegal_text:"该内容涉嫌违规，已被系统屏蔽"},ALLOWED_SMS_AUDIT_TYPE:["User"],REASONS:{porn:{code:"porn",name:"涉黄",desc:"被多人举报发布含有色情、淫秽内容"},politics:{code:"politics",name:"涉政",desc:"被多人举报发布内容违反中国互联网相关法律法规或语雀服务协议相关规定"},gambling:{code:"gambling",name:"赌博",desc:"被多人举报发布内容违反中国互联网相关法律法规或语雀服务协议相关规定"},violence:{code:"violence",name:"暴力",desc:"被多人举报发布内容含有反社会、血腥暴力等内容"},abuse:{code:"abuse",name:"辱骂、不友善",desc:"被多人举报发布含有辱骂等不友善内容"},piracy:{code:"piracy",name:"盗版",desc:"被版权方举报发布侵权内容"},spam:{code:"spam",name:"垃圾广告",desc:"被多人举报发布含有广告等引导性内容"},clearnet:{code:"clearnet",name:"“清朗”系列专项举报",desc:"被多人举报发布内容违反中国互联网相关法律法规或语雀服务协议相关规定"},attack:{code:"attack",name:"网络攻击、VPN 翻墙",desc:"被多人举报发布内容违反中国互联网相关法律法规或语雀服务协议相关规定"},others:{code:"others",name:"其他",desc:"被多人举报发布内容违反中国互联网相关法律法规或语雀服务协议相关规定"}},SOURCE:{yuque:0,infosec:1,punish_center:2}};o.ALLOWED_AUDIT_TYPES=r.uniq(Object.values(o.AUDIT_TYPE)),o.ALLOWED_AUDIT_ENTITY_TYPES=r.uniq(Object.values(o.AUDIT_ENTITY_TYPE)),e.exports=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";n(162),n(526)},,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n.n(o),i=n(10),c=n.n(i),u={noWrap:"index-module_noWrap_yXoV6",center:"index-module_center_8CW3b",inherit:"index-module_inherit_axrOr",justify:"index-module_justify_4EhMs",left:"index-module_left_+IRek",right:"index-module_right_JS6dW",headline1:"index-module_headline1_7Wqsl","headline1-secondary":"index-module_headline1-secondary_SNv61",headline2:"index-module_headline2_cIsD7","headline2-secondary":"index-module_headline2-secondary_bLIDQ",headline3:"index-module_headline3_AAN2Q","headline3-secondary":"index-module_headline3-secondary_z3JQy",headline4:"index-module_headline4_eRlpC","headline4-secondary":"index-module_headline4-secondary_35-Nx",title:"index-module_title_a6FJG","title-secondary":"index-module_title-secondary_Q-EK7","title-strong":"index-module_title-strong_DbJhd",body:"index-module_body_2KfBs","body-secondary":"index-module_body-secondary_G6bEw","body-strong":"index-module_body-strong_QJQJK","body-small":"index-module_body-small_IRhgy","body-small-secondary":"index-module_body-small-secondary_IEkQh",disable:"index-module_disable_y6Vlr",caption:"index-module_caption_zmg1P","caption-secondary":"index-module_caption-secondary_BW276","caption-small":"index-module_caption-small_Kz64L","caption-small-secondary":"index-module_caption-small-secondary_7xc7N","primary-button-default":"index-module_primary-button-default_dCs3d","primary-button-default-secondary":"index-module_primary-button-default-secondary_7aWhp","primary-button-default-strong":"index-module_primary-button-default-strong_YN1mb","primary-button-strong":"index-module_primary-button-strong_FXWKF","primary-button-strong-secondary":"index-module_primary-button-strong-secondary_5XHYH","primary-button-strong-strong":"index-module_primary-button-strong-strong_1VPQA","primary-button-strong-ghost":"index-module_primary-button-strong-ghost_uduPc","secondary-button-default":"index-module_secondary-button-default_DYMu7","secondary-button-default-secondary":"index-module_secondary-button-default-secondary_zxHNd","secondary-button-default-strong":"index-module_secondary-button-default-strong_iq4cP","disable-button-default":"index-module_disable-button-default_7F1Qd","disable-button-default-secondary":"index-module_disable-button-default-secondary_MTpMM","disable-button-default-strong":"index-module_disable-button-default-strong_ov-fg","yuque-green-1":"index-module_yuque-green-1_nRq4v","yuque-green-2":"index-module_yuque-green-2_Gzykh","yuque-green-3":"index-module_yuque-green-3_Tuu5S","yuque-green-4":"index-module_yuque-green-4_7aCYy","yuque-green-5":"index-module_yuque-green-5_SehB8","yuque-green-6":"index-module_yuque-green-6_cAP9f","yuque-green-7":"index-module_yuque-green-7_0+ZWP","yuque-green-8":"index-module_yuque-green-8_jAdl3","yuque-green-9":"index-module_yuque-green-9_kBNeZ","yuque-grey-1":"index-module_yuque-grey-1_p7V5y","yuque-grey-2":"index-module_yuque-grey-2_mReWx","yuque-grey-3":"index-module_yuque-grey-3_L35h9","yuque-grey-4":"index-module_yuque-grey-4_Y7hfg","yuque-grey-5":"index-module_yuque-grey-5_73tdV","yuque-grey-6":"index-module_yuque-grey-6_Qfs1b","yuque-grey-7":"index-module_yuque-grey-7_q8l3J","yuque-grey-8":"index-module_yuque-grey-8_It-1j","yuque-grey-9":"index-module_yuque-grey-9_MwuZo","blue-1":"index-module_blue-1_q+F1k","blue-2":"index-module_blue-2_KYa4I","blue-3":"index-module_blue-3_WF9Wz","blue-4":"index-module_blue-4_lCWch","blue-5":"index-module_blue-5_2oFxQ","blue-6":"index-module_blue-6_uJeLM","blue-7":"index-module_blue-7_YzNJj","blue-8":"index-module_blue-8_JrV4f","blue-9":"index-module_blue-9_uwWzW","organge-1":"index-module_organge-1_s-02X","organge-2":"index-module_organge-2_Qts9K","organge-3":"index-module_organge-3_weDLH","organge-4":"index-module_organge-4_9ybPW","organge-5":"index-module_organge-5_dR9pn","organge-6":"index-module_organge-6_vvgP5","organge-7":"index-module_organge-7_7pVwf","organge-8":"index-module_organge-8_NlSFh","organge-9":"index-module_organge-9_y23v0","yellow-1":"index-module_yellow-1_RudiR","yellow-2":"index-module_yellow-2_Bf5zh","yellow-3":"index-module_yellow-3_BX8Zp","yellow-4":"index-module_yellow-4_W2q5g","yellow-5":"index-module_yellow-5_6D2fL","yellow-6":"index-module_yellow-6_nwOhB","yellow-7":"index-module_yellow-7_RdJi2","yellow-8":"index-module_yellow-8_MAsML","yellow-9":"index-module_yellow-9_FXKhv","red-1":"index-module_red-1_+AG8t","red-2":"index-module_red-2_ZJjdF","red-3":"index-module_red-3_0uGuf","red-4":"index-module_red-4_in9tI","red-5":"index-module_red-5_RhUlN","red-6":"index-module_red-6_DjO9z","red-7":"index-module_red-7_irQBt","red-8":"index-module_red-8_wgsYP","red-9":"index-module_red-9_UARy7","magenta-1":"index-module_magenta-1_bTygP","magenta-2":"index-module_magenta-2_aW7F6","magenta-3":"index-module_magenta-3_OO9SG","magenta-4":"index-module_magenta-4_IUr05","magenta-5":"index-module_magenta-5_Vi9Lo","magenta-6":"index-module_magenta-6_nztNv","magenta-7":"index-module_magenta-7_f+fht","magenta-8":"index-module_magenta-8_t2mtU","magenta-9":"index-module_magenta-9_omQem","purple-1":"index-module_purple-1_vr5C6","purple-2":"index-module_purple-2_6-Geu","purple-3":"index-module_purple-3_iviNN","purple-4":"index-module_purple-4_Xj9wy","purple-5":"index-module_purple-5_85Y3U","purple-6":"index-module_purple-6_ET87f","purple-7":"index-module_purple-7_eQmF3","purple-8":"index-module_purple-8_vmTgU","purple-9":"index-module_purple-9_3GvwY","cyan-1":"index-module_cyan-1_08Fdr","cyan-2":"index-module_cyan-2_3EsDX","cyan-3":"index-module_cyan-3_x5brm","cyan-4":"index-module_cyan-4_NENy7","cyan-5":"index-module_cyan-5_8dQZD","cyan-6":"index-module_cyan-6_X2v6p","cyan-7":"index-module_cyan-7_-hgmR","cyan-8":"index-module_cyan-8_-q41L","cyan-9":"index-module_cyan-9_K0HRC","pea-green-1":"index-module_pea-green-1_ViRuu","pea-green-2":"index-module_pea-green-2_IJFPM","pea-green-3":"index-module_pea-green-3_R1Mjt","pea-green-4":"index-module_pea-green-4_T8RC9","pea-green-5":"index-module_pea-green-5_ph00e","pea-green-6":"index-module_pea-green-6_rSoSB","pea-green-7":"index-module_pea-green-7_y6w46","pea-green-8":"index-module_pea-green-8_kzR7U","pea-green-9":"index-module_pea-green-9_PHwrZ",white:"index-module_white_AI1ch"},l=["component","variant","variantMapping","paragraph","className","style","noWrap","align","mb","ml","mr","mt","type","color","fontSize","componentProps","title"];function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e){var t,n=e.component,o=e.variant,a=e.variantMapping,i=e.paragraph,s=e.className,f=e.style,h=e.noWrap,y=e.align,v=e.mb,b=e.ml,g=e.mr,_=e.mt,w=e.type,E=e.color,O=e.fontSize,x=e.componentProps,j=e.title,k=m(e,l),S=n||(i?"p":a[o])||"span",C=u[y],N=u["".concat(o,"-").concat(w)]||"";return Object(r.createElement)(S,d(d({className:c()(u[o],N,C,s,(t={},p(t,u.noWrap,h),p(t,u[E],E),t)),style:d({marginBottom:v,marginLeft:b,marginRight:g,marginTop:_,fontSize:O},f),title:j},x),k))}var y,v={headline1:"headline1",headline2:"headline2",headline3:"headline3",headline4:"headline4",title:"title",body:"body",bodySmall:"body-small",caption:"caption",captionSmall:"caption-small",primaryButtonDefault:"primary-button-default",primaryButtonStrong:"primary-button-strong",secondaryButtonDefault:"secondary-button-default",disableButtonDefault:"disable-button-default",disable:"disable",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"},b={center:"center",inherit:"inherit",justify:"justify",left:"left",right:"right"};h.propTypes={className:a.a.string,component:a.a.elementType,variant:a.a.oneOf(Object.values(v)),paragraph:a.a.bool,variantMapping:a.a.object,noWrap:a.a.bool,style:a.a.object,align:a.a.oneOf(Object.values(b)),children:a.a.node,mb:a.a.oneOfType([a.a.number,a.a.string]),ml:a.a.oneOfType([a.a.number,a.a.string]),mr:a.a.oneOfType([a.a.number,a.a.string]),mt:a.a.oneOfType([a.a.number,a.a.string]),type:a.a.oneOf([].concat((y=Object.values({secondary:"secondary",strong:"strong"}),function(e){if(Array.isArray(e))return s(e)}(y)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(y)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[""])),onClick:a.a.func,fontSize:a.a.number,color:a.a.string,componentProps:a.a.object,title:a.a.string};h.defaultProps={variantMapping:{h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",headline1:"h1",headline2:"h2",headline3:"h3",headline4:"h4",title:"h5",body:"h6","body-small":"p",caption:"p","caption-small":"p"},mb:0,ml:0,mr:0,mt:0,align:b.inherit,variant:v.body,componentProps:{}};t.a=h},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports={ROLE:{owner:0,member:1},STATUS:{invited:0,joined:1,applying:2}}},,,,,,,,,,function(e,t,n){"use strict";var r=["like_count","comment_count","read_count"],o=["like_count","comment_count","read_count"],a=["like_count","read_count","write_count","write_doc_count"],i=["like_count","comment_count","read_count","watch_count"],c={group:o,member:a,doc:r,book:i};e.exports={BAIKE_SIZE:1054,GROUP_SORT_FIELD:["created_at","member_count","book_count","doc_count","read_count","like_count","comment_count"],MEMBER_SORT_FIELD:["write_doc_count","write_count","read_count","like_count"],BOOK_SORT_FIELD:["content_updated_at_ms","word_count","post_count","read_count","like_count","watch_count","comment_count"],DOC_SORT_FIELD:["content_updated_at","word_count","read_count","like_count","comment_count","created_at"],DOC_RANGE_KEYS:r,GROUP_RANGE_KEYS:o,MEMBER_RANGE_KEYS:a,BOOK_RANGE_KEYS:i,RANGE_VALUES:[0,30,365],resetResultsWithRangeKeys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;e.forEach((function(e){var r=t>0?t:"";c[n].forEach((function(n){e[n]=t>0?e["".concat(n,"_").concat(r)]:e[n]}))}))}}},function(e,t,n){"use strict";e.exports={MAX_COUNT:5,MAX_LENGTH:100,MAX_SHOW_TEXT_LENGTH:10,TAG_RULES_REG:/^[{}、/\\_!@#$%^&*()_+-=.\-0-9a-zA-Z\u4e00-\u9fa5]+$/,TARGET_TYPE:{Doc:"Doc",Note:"Note"},MIGRATE_TODO_TAG_NAME:"「待办」",DEFAULT_TODO_TAG_NAME:"待办"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(2160),o=n(1990),a=n(2146),i=n(269);e.exports=function(e,t){return(i(e)?r:o)(e,a(t))}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return s}));var r=n(0),o=n.n(r),a=n(2),i=n(89),c="index-module_bookTips_cZ25F",u="index-module_groupTips_znta0",l="index-module_commentTips_eS4uK";function s(e){var t=e.targetType,n=o.a.createElement("a",{href:"https://www.yuque.com/yuque/cdgcvd/zsw0w0",className:"wording-comment-link",target:"_blank",style:{marginLeft:"8px"}},__("了解更多"));switch(t){case"Book":return o.a.createElement("span",{className:c,"data-testid":"forbid-tip"},__("注册 7 天后可设置为互联网可见 {learnMoreLink}",{learnMoreLink:n}));case"Group":return o.a.createElement("div",{className:u,"data-testid":"forbid-tip"},__("注册 7 天后，即可创建知识小组 {learnMoreLink}",{learnMoreLink:n}));default:return o.a.createElement("span",{className:l,"data-testid":"forbid-tip"},__("注册 7 天后即可参与{action} {learnMoreLink}",{action:"Topic"===t?__("讨论"):__("评论"),learnMoreLink:n}))}}function f(e,t){var n,r=window.appData,o=r.settings,a=void 0===o?{}:o,c=r.organization,u=r.isPublicCloud,l=t||{},s=l.me,f=void 0===s?window.appData.me||{}:s,d=l.group,p=void 0===d?window.appData.group:d,m=c&&c.id;p&&i.a.isGroupOrPublication(p)&&(n=p.abilities&&p.abilities.read_private);var h=e&&e.abilities&&e.abilities.update;return!!(u&&!m&&a.enable_new_user_public_ability_forbid&&f.isNewbie&&!n&&!h)}s.propTypes={targetType:a.PropTypes.string}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return V})),n.d(t,"b",(function(){return Y})),n.d(t,"c",(function(){return q}));n(175);var r=n(84),o=(n(50),n(19)),a=(n(133),n(31)),i=n(0),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(17),d=n(100),p=n.n(d),m=n(124),h=n(38),y=n(287),v=n(34),b=n(285),g=n(651),_=n(1310),w=n(2072),E=n(1459),O="GlobalDocCreate-module_menuItemContainer_+DgHG",x="GlobalDocCreate-module_popoverContainer_zQaDv",j="GlobalDocCreate-module_iconContainer_eX6jK",k="GlobalDocCreate-module_menuList_s1r7J",S="GlobalDocCreate-module_menuListItem_hC68r",C="GlobalDocCreate-module_templateCenterButton_Rrl2q",N="GlobalDocCreate-module_btnBlock_W3wwE";function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function T(){T=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==P(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function A(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){A(a,r,o,i,c,"next",e)}function c(e){A(a,r,o,i,c,"throw",e)}i(void 0)}))}}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=[M(M({},f.a.DOC.create_doc),{},{aspm:"c83330.d83331"}),M(M({},f.a.DOC.create_sheet),{},{aspm:"c83330.d83332"}),M(M({},f.a.DOC.create_board),{},{aspm:"c83330.d83335"}),M(M({},f.a.DOC.create_table),{},{aspm:"c69553.d143083"}),f.a.DOC.divide,M(M({},f.a.DOC.create_from_template),{},{aspm:"c83330.d83333"}),M(M({},f.a.DOC.import_to_book),{},{aspm:"c73330.d83334"})].filter((function(e){return!!e})),U=[M(M({},f.a.DOC.create_doc),{},{menuTitle:__("文档#short"),aspm:"c66434.d136623"}),M(M({},f.a.DOC.create_sheet),{},{menuTitle:__("表格"),aspm:"c66434.d136624"}),M(M({},f.a.DOC.create_board),{},{menuTitle:__("画板"),aspm:"c66434.d136626"}),M(M({},f.a.DOC.create_table),{},{menuTitle:__("数据表#short"),aspm:"c66434.d143083"})].filter((function(e){return!!e}));function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enableGroupFilter,n=void 0!==t&&t,r=Object(g.a)(),o=r.loadTemplateSelector,a=r.showTemplateSelector,c=r.contextHolder,u=Object(_.a)(),l=u.loadBookSelector,s=u.showBookSelector,d=u.contextHolder,h=i.useRef(null),w=i.useState(!1),E=I(w,2),O=E[0],x=E[1],j=i.useState(!1),k=I(j,2),S=k[0],C=k[1],N=function(){var e=L(T().mark((function e(t){var n,r,o,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.current){e.next=3;break}return e.abrupt("return");case 3:return r={title:y.a.getDefaultTitle(m.a.adapterDocType(n.docType)),type:m.a.adapterDocType(n.docType),format:m.a.getDefaultFormat(n.docType),book_id:t.id,status:p.a.STATUS.draft,insert_to_catalog:!0,action:"prependChild",target_uuid:null},e.next=6,v.a.docs.createDoc(r);case 6:o=e.sent,a="/".concat(t.user.login,"/").concat(t.slug,"/").concat(o.slug,"/edit"),window.location.href=a;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=h.current;return(null==e?void 0:e.title)||""},A=function(){h.current=null},R=function(){var e=L(T().mark((function e(){var t,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({group:null});case 2:if(!(t=e.sent)){e.next=10;break}return e.next=6,s({title:P(),enableGroupFilter:n});case 6:if(!(r=e.sent)){e.next=10;break}return e.next=10,Object(b.e)(r,t);case 10:A();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=L(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==s?void 0:s({title:P(),enableGroupFilter:n});case 2:if(!(t=e.sent)){e.next=6;break}return e.next=6,N(t);case 6:A();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=L(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({title:P(),enableGroupFilter:n});case 2:t=e.sent,window.location.href="/".concat(t.user.login,"/").concat(t.slug,"#import_to_book");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){x(e)},B=function(e){switch(h.current=e,e.cmd){case f.a.DOC.create_from_template.cmd:return R();case f.a.DOC.import_to_book.cmd:return M();case f.a.GROUP.create.cmd:return F(!0);case f.a.BOOK.create.cmd:return C(!0);default:return D()}};return{state:{showCreateGroupModal:O,isNewRepoModalShow:S},execCommand:B,loadTemplateSelector:o,loadBookSelector:l,changeShowCreateGroupModalStatus:F,setIsNewRepoModalShow:C,contextHolder:i.createElement(i.Fragment,null,c,d)}}var G=function(e){var t=e.actions,n=e.onClick,r=e.iconSize,o=void 0===r?20:r,c=e.getTitle,u=void 0===c?function(e){return e.title}:c;return i.createElement(a.a,null,t.map((function(e,t){return e.cmd===f.a.DOC.divide.cmd?i.createElement(a.a.Divider,{key:"divide-".concat(t)}):i.createElement(a.a.Item,{key:e.cmd,className:s()({"list-item-en":"en-us"===window.appData.locale}),onClick:function(){n(e)}},i.createElement("div",{className:O,"data-aspm-click":e.aspm},i.createElement(h.b,{className:j,name:e.icon,width:o}),i.createElement("span",null,u(e))))})))};function V(e){var t=z(M(M({},e),{},{createType:"single"})),n=e.command,r=t.state,o=t.changeShowCreateGroupModalStatus,a=t.setIsNewRepoModalShow;return i.useEffect((function(){n.cmd===f.a.DOC.create_from_template.cmd&&t.loadTemplateSelector(),t.loadBookSelector()}),[n]),i.createElement(i.Fragment,null,i.createElement("span",{onClick:function(){return t.execCommand(n)}},e.children),t.contextHolder,r.showCreateGroupModal&&i.createElement(E.a,{isModalVisible:r.showCreateGroupModal,handleCancel:function(){o(!1)}}),r.isNewRepoModalShow&&i.createElement(w.a,{isModalVisible:r.isNewRepoModalShow,handleCancel:function(){return a(!1)}}))}function Y(e){var t=z(M(M({},e),{},{createType:"all",iconSize:28,enableGroupFilter:!1}));return i.useEffect((function(){t.loadBookSelector(),window.h5||t.loadTemplateSelector()}),[]),i.createElement(i.Fragment,null,i.createElement("div",{className:s()(k,e.className)},U.map((function(e){return i.createElement("div",{className:S,onClick:function(){return t.execCommand(e)},"data-aspm-click":e.aspm},i.createElement(h.b,{name:e.icon,width:28}),i.createElement("div",null,e.menuTitle))}))),!window.h5&&i.createElement(o.a,{block:!0,className:s()(C,N),onClick:function(){return t.execCommand(f.a.DOC.create_from_template)}},i.createElement(h.b,{name:"template-center"}),__("模板中心")),t.contextHolder)}function q(e){var t=z(M(M({},e),{},{createType:"all",iconSize:20}));return i.useEffect((function(){t.loadTemplateSelector(),t.loadBookSelector()}),[]),i.createElement(i.Fragment,null,i.createElement(r.a,{overlayClassName:x,noArrow:!0,trigger:"hover",getPopupContainer:function(e){return e.parentNode},placement:"bottomRight",content:i.createElement(G,{actions:B,onClick:function(e){return t.execCommand(e)}})},e.children),t.contextHolder)}V.propTypes={command:u.a.object,children:u.a.node,enableGroupFilter:u.a.bool},Y.propTypes={enableGroupFilter:u.a.bool},q.propTypes={children:u.a.node,enableGroupFilter:u.a.bool}},,,,,,,,,,,,,function(e,t,n){"use strict";t.a=function(){return window.appData.isDesktopApp?window._electron_bridge?window._electron_bridge:window.require&&window.require("electron")?window.require("electron"):{}:{}}},function(e,t,n){var r=n(2530),o=n(558),a=Object.prototype,i=a.hasOwnProperty,c=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!c.call(e,"callee")};e.exports=u},function(e,t,n){(function(e){var r=n(603),o=n(2531),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,c=i&&i.exports===a?r.Buffer:void 0,u=(c?c.isBuffer:void 0)||o;e.exports=u}).call(this,n(509)(e))},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(2570),o=n(1982),a=n(2571),i=n(2153),c=n(2572),u=n(671),l=n(2147),s="[object Map]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",m="[object DataView]",h=l(r),y=l(o),v=l(a),b=l(i),g=l(c),_=u;(r&&_(new r(new ArrayBuffer(1)))!=m||o&&_(new o)!=s||a&&_(a.resolve())!=f||i&&_(new i)!=d||c&&_(new c)!=p)&&(_=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case h:return m;case y:return s;case v:return f;case b:return d;case g:return p}return t}),e.exports=_},function(e,t,n){var r=n(1007),o=n(1009);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[o(t[n++])];return n&&n==a?e:void 0}},function(e,t,n){var r=n(2143),o=n(2584),a=n(672);e.exports=function(e){return a(e)?r(e,!0):o(e)}},function(e,t,n){var r=n(1287),o=n(1997),a=n(1999),i=n(1288),c=n(2613),u=n(1985);e.exports=function(e,t,n){var l=-1,s=o,f=e.length,d=!0,p=[],m=p;if(n)d=!1,s=a;else if(f>=200){var h=t?null:c(e);if(h)return u(h);d=!1,s=i,m=new r}else m=t?[]:p;e:for(;++l<f;){var y=e[l],v=t?t(y):y;if(y=n||0!==y?y:0,d&&v==v){for(var b=m.length;b--;)if(m[b]===v)continue e;t&&m.push(v),p.push(y)}else s(m,v,n)||(m!==p&&m.push(v),p.push(y))}return p}},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(845).PRIVACY,c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.options=t,this.isPublicCloud=t.isPublicCloud,this.isYuque=t.isYuque,this.target=t.target,this.type=t.type,this.org=t.org,this.group=t.group,this.book=t.book,this.__=t.__,this.PRIVACY=i}var t,n,c;return t=e,(n=[{key:"isInOrg",get:function(){return this.org&&this.org.id}},{key:"isUnrestricted",get:function(){var e=this;return!![this.target,this.book,this.group].find((function(t){return(null==t?void 0:t.is_unrestricted)||(null==t?void 0:t.public)===e.PRIVACY.intranet_all}))}},{key:"subType",get:function(){return this.options.subType?this.options.subType:this.target?this.target.type:null}},{key:"getPrivacyValue",value:function(){return this.PRIVACY.private}},{key:"getBelongTarget",value:function(){return null}},{key:"getBelongPrivacy",value:function(){}},{key:"getBelongPrivacyValue",value:function(){var e=this.getBelongPrivacy();return e?e.getPrivacyValue():this.getRootPrivacyValue()}},{key:"getRootPrivacyValue",value:function(){return this.isPublicCloud&&!this.isInOrg?this.PRIVACY.public:!this.isYuque&&this.isUnrestricted?this.PRIVACY.intranet_all:this.PRIVACY.intranet}},{key:"getAllPrivacies",value:function(){return this.isPublicCloud?this.isInOrg?this.getOrgPrivacies():this.getPublicCloudPrivacies():this.getBucPrivacies()}},{key:"getEnablePrivacies",value:function(){var e,t=this,n=this.getBelongPrivacyValue(),o=[],a=(r(e={},i.private,[this.PRIVACY.private]),r(e,i.intranet,[this.PRIVACY.private,this.PRIVACY.intranet]),r(e,i.public,[this.PRIVACY.private,this.PRIVACY.intranet,this.PRIVACY.public]),r(e,i.intranet_all,[this.PRIVACY.private,this.PRIVACY.intranet,this.PRIVACY.intranet_all]),e);return this.isYuque||this.isUnrestricted||(a[i.intranet_all]=[this.PRIVACY.private,this.PRIVACY.intranet]),(o=!this.isInOrg||this.target||this.getBelongTarget()?this.isYuque||this.target||this.getBelongTarget()?a[n]:[this.PRIVACY.private,this.PRIVACY.intranet,this.PRIVACY.intranet_all]:[this.PRIVACY.private,this.PRIVACY.intranet])&&0!==o.length||(o=[this.PRIVACY.private,this.PRIVACY.intranet]),this.isPublicCloud&&!this.isInOrg&&(o=o.filter((function(e){return e!==t.PRIVACY.intranet&&e!==t.PRIVACY.intranet_all}))),o}},{key:"getOrgPrivacies",value:function(){return[this.PRIVACY.private,this.PRIVACY.intranet]}},{key:"getPublicCloudPrivacies",value:function(){return[this.PRIVACY.private,this.PRIVACY.public]}},{key:"getBucPrivacies",value:function(){return[this.PRIVACY.private,this.PRIVACY.intranet]}},{key:"checkPrivacy",value:function(e){return this.getEnablePrivacies().includes(e)}},{key:"_restrictPrivacy",value:function(e,t){var n,o=(r(n={},i.private,1),r(n,i.intranet,2),r(n,i.intranet_all,3),r(n,i.public,4),n);return this.isYuque||(e===i.public&&(e=i.intranet_all),t===i.public&&(t=i.intranet_all)),o[t]<o[e]?t:e}}])&&a(t.prototype,n),c&&a(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=c},,,,,function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(652),a=n(2197).BaseValidatorClass,i=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19[12356789])\d{8}(\+\d+)?$/,c=/^\+[1-9]\d{0,2}? \d{1,20}$/,u=/^\+86 /,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"chinaMobilePhone",value:function(e){if(!(e=this._stringify(e))||!i.test(e))return this.__("输入正确手机号")}},{key:"globalMobilePhone",value:function(e){return(e=this._stringify(e))&&c.test(e)?u.test(e)?this.__("中国手机号码不需要添加 +86"):void 0:this.__("必须是合法的手机号码")}},{key:"mobilePhone",value:function(e){if(this.globalMobilePhone(e))return u.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)}},{key:"mobilePhoneForNonChinese",value:function(e){if(this.globalMobilePhone(e))return u.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)?this.__("必须是合法的手机号码"):void 0}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.MobileValidatorClass=l,t.chinaMobilePhoneRE=i,t.globalMobilePhoneRE=c,t.MobileValidator=o.apply(void 0,[a].concat([l]))},function(e,t,n){"use strict";e.exports={DOC_ACTIONS:{read:"read",contribute:"contribute"},ALLOW_SPACE_ISOLATION_TYPES:["mark"],ALLOW_ACTION_TYPES:["like","watch","follow","watch-comments","watch-topics","mark","read","reaction","mention","subscribe"],ALLOW_GET_USER_ACTION_TYPES:["like","watch","follow","watch-comments","watch-topics","reaction"],ALLOW_BULK_ACTION_TYPES:["watch-comments","watch-topics"],ALLOW_TARGET_TYPES:["Doc","Book","Artboard","ArtboardGroup","ArtboardComment","Comment","Topic","User","Resource","DocVersion","Note"],ALLOW_MARK_TARGET_TYPES:["Doc","Book","ArtboardGroup","Resource","User","DocVersion"],ALLOW_VERIFICATION_CODE_TYPES:["normal","login","register","resetPassword","updatePassword","updateMobile","updateEmail","verifyUser","completeProfile"],ALLOW_ACTION_OPTIONS:["normal","notify","unwatch","User","Group","Publication"],ALLOW_ACTION_SETTING_TYPES:["default","custom","none"],ALLOW_ACTION_SETTING_ACTION_TYPES:["follow","watch"],ALLOW_ACTION_SETTING_TARGET_TYPES:["Book","User"],ALLOW_ACTION_SETTING_EVENT_TYPES:["watch_book","follow_group","follow_user","like_doc","new_book","update_doc","publish_doc"],REACTION_TYPES:["thumbs_up","thumbs_down","applause","momo","+1","OK"],MAX_ITEMS_COUNT:5e3}},,function(e,t,n){"use strict";n(79);var r=n(44),o=(n(148),n(53)),a=(n(50),n(19)),i=(n(374),n(170)),c=(n(60),n(24)),u=n(0),l=n.n(u),s=n(2),f=n.n(s),d=n(32),p=n.n(d),m=n(49),h=n(34),y=n(1020),v=n(1314),b={tryoutModelContainer:"index-module_tryoutModelContainer_dQ2Mb",name:"index-module_name_LspbL",nameRow:"index-module_nameRow_YIDfN",footer:"index-module_footer_2ZYWm",termsContainer:"index-module_termsContainer_SFx2w",inputNumber:"index-module_inputNumber_ZVv30",tips:"index-module_tips_3G6-z",price:"index-module_price_YGMZ5"};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function _(){_=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==g(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function w(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t=e.visible,n=e.onClose,s=e.organization,f=s.name,d=s.max_member||m.MAX_MEMBER,g=E(Object(u.useState)(!1),2),O=g[0],x=g[1],j=E(Object(u.useState)(!1),2),k=j[0],S=j[1],C=E(Object(u.useState)(d),2),N=C[0],P=C[1],T=E(Object(u.useState)(1),2),A=T[0],L=T[1],I=Object(u.useRef)(null);Object(u.useEffect)((function(){t&&h.a.organizations.membersCount({id:s.id}).then(L)}),[t]);var R=function(){var e,t=(e=_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=3;break}return c.a.info(__("需阅读并同意《语雀空间服务协议》后才能试用")),e.abrupt("return");case 3:return S(!0),e.next=6,h.a.organizations.tryOut({id:s.id,max_member:N});case 6:S(!1),window.location.replace(window.location.origin+window.location.pathname);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),D=p()().endOf("day").add(30,"days").format("YYYY-MM-DD"),M=m.PRICE_STAGES.find((function(e){return e.member===N})),F=M&&M.price;return l.a.createElement(r.a,{title:__("试用付费版空间"),visible:t,onCancel:n,closable:!0,maskClosable:!1,footer:null,centered:!0,width:520},l.a.createElement("div",{className:b.tryoutModelContainer,"data-testid":"org-tryout-modal",ref:I},l.a.createElement("h3",null,__("空间名称"),"："),l.a.createElement("div",{className:"".concat(b.right," ").concat(b.nameRow)},l.a.createElement("span",{className:b.name},f)," ",l.a.createElement(v.a,{organization:s})),l.a.createElement("h3",null,__("试用套餐"),"："),l.a.createElement("div",{className:b.inputNumber,style:{width:240}},l.a.createElement(y.a,{defaultValue:d,onChange:function(e){P(e)},getPopupContainer:function(){return I.current}}),l.a.createElement("div",{className:b.tips},__("当前空间使用人数：{currentMember} 人",{currentMember:A}))),l.a.createElement(i.a,{dashed:!0}),l.a.createElement("div",{className:b.tips},__("免费试用 30 天，有效期至：{expiredAt}；到期后 {price} 元/年",{expiredAt:D,price:l.a.createElement("span",{className:b.price},F)})),l.a.createElement("div",{className:b.footer},l.a.createElement(a.a,{"data-testid":"buy-button",type:"primary",loading:k,onClick:R},__("免费试用")),l.a.createElement("p",{className:b.termsContainer},l.a.createElement(o.a,{onChange:function(){x(!O)},checked:O,"data-testid":"check-terms"},__("我已阅读并同意")),l.a.createElement("a",{target:"_blank",href:"/org-terms"},"《语雀空间服务协议》")))))};x.propTypes={organization:f.a.object.isRequired,visible:f.a.bool.isRequired,onClose:f.a.func.isRequired};t.a=x},,function(e,t,n){"use strict";var r=n(0),o=Object(r.createContext)(void 0);t.a=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e?"function"==typeof e?e():e:null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return s}));var r=n(731),o=n(732),a=n.n(o),i=new r.JSEncrypt;i.setPublicKey("\n-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCfwyOyncSrUTmkaUPsXT6UUdXx\nTQ6a0wgPShvebfwq8XeNj575bUlXxVa/ExIn4nOUwx6iR7vJ2fvz5Ls750D051S7\nq70sevcmc8SsBNoaMQtyF/gETPBSsyWv3ccBJFrzZ5hxFdlVUfg6tXARtEI8rbIH\nsu6TBkVjk+n1Pw/ihQIDAQAB\n-----END PUBLIC KEY-----");var c=Date.now()-(window.appData.timestamp||Date.now());function u(e){if(!e)return e;var t=Date.now()-c;return function(e,t){for(var n=[];e.length>t;)n.push(e.slice(0,t)),e=e.slice(t);return e.length&&n.push(e),n}(e="".concat(t,":").concat(e),100).map((function(e){return i.encrypt(e,"base64")})).join(":")}function l(e){return a()("UXO91eVnUveQn8suOJaYMvBcWs9KptS8N5HoP8ezSeU4vqApZpy1CkPaTpkpQEx2W2mlhxL8zwS8UePwBgksUM0CTtAODbTTTDFD"+e).toString()}function s(e){return"string"!=typeof e?e:"".concat(e,"<!").concat(l(e),">")}},function(e,t,n){"use strict";e.exports={STATUS:{normal:0,disabled:-1},TYPE:{personal:"personal",group:"group",organization:"organization",oauth:"oauth",servicify:"servicify",yuqueApp:"yuque-app"}}},function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(41),i=n(0),c=n(10),u=n.n(c),l=n(1333),s=n(257),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var d=["xs","sm","md","lg","xl","xxl"],p=i.forwardRef((function(e,t){var n,c=i.useContext(s.b),p=c.getPrefixCls,m=c.direction,h=i.useContext(l.a),y=h.gutter,v=h.wrap,b=h.supportFlexGap,g=e.prefixCls,_=e.span,w=e.order,E=e.offset,O=e.push,x=e.pull,j=e.className,k=e.children,S=e.flex,C=e.style,N=f(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),P=p("col",g),T={};d.forEach((function(t){var n,i={},c=e[t];"number"==typeof c?i.span=c:"object"===Object(a.a)(c)&&(i=c||{}),delete N[t],T=Object(o.default)(Object(o.default)({},T),(n={},Object(r.a)(n,"".concat(P,"-").concat(t,"-").concat(i.span),void 0!==i.span),Object(r.a)(n,"".concat(P,"-").concat(t,"-order-").concat(i.order),i.order||0===i.order),Object(r.a)(n,"".concat(P,"-").concat(t,"-offset-").concat(i.offset),i.offset||0===i.offset),Object(r.a)(n,"".concat(P,"-").concat(t,"-push-").concat(i.push),i.push||0===i.push),Object(r.a)(n,"".concat(P,"-").concat(t,"-pull-").concat(i.pull),i.pull||0===i.pull),Object(r.a)(n,"".concat(P,"-rtl"),"rtl"===m),n))}));var A=u()(P,(n={},Object(r.a)(n,"".concat(P,"-").concat(_),void 0!==_),Object(r.a)(n,"".concat(P,"-order-").concat(w),w),Object(r.a)(n,"".concat(P,"-offset-").concat(E),E),Object(r.a)(n,"".concat(P,"-push-").concat(O),O),Object(r.a)(n,"".concat(P,"-pull-").concat(x),x),n),j,T),L={};if(y&&y[0]>0){var I=y[0]/2;L.paddingLeft=I,L.paddingRight=I}if(y&&y[1]>0&&!b){var R=y[1]/2;L.paddingTop=R,L.paddingBottom=R}return S&&(L.flex=function(e){return"number"==typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(S),"auto"!==S||!1!==v||L.minWidth||(L.minWidth=0)),i.createElement("div",Object(o.default)({},N,{style:Object(o.default)(Object(o.default)({},L),C),className:A,ref:t}),k)}));p.displayName="Col",t.a=p},function(e,t,n){"use strict";function r(e){return null!=e&&e===e.window}function o(e,t){var n;if("undefined"==typeof window)return 0;var o=t?"scrollTop":"scrollLeft",a=0;return r(e)?a=e[t?"pageYOffset":"pageXOffset"]:e instanceof Document?a=e.documentElement[o]:e&&(a=e[o]),e&&!r(e)&&"number"!=typeof a&&(a=null===(n=(e.ownerDocument||e).documentElement)||void 0===n?void 0:n[o]),a}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(40),o=n(119);function a(e){var t,n=function(n){return function(){t=null,e.apply(void 0,Object(r.a)(n))}},a=function(){if(null==t){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];t=Object(o.a)(n(r))}};return a.cancel=function(){return o.a.cancel(t)},a}function i(){return function(e,t,n){var r=n.value,o=!1;return{configurable:!0,get:function(){if(o||this===e.prototype||this.hasOwnProperty(t))return r;var n=a(r.bind(this));return o=!0,Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),o=!1,n}}}}},function(e,t,n){"use strict";var r=n(14),o=n(0),a=n(70),i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},c={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},u=o.forwardRef((function(e,t){var n=e.style,u=e.noStyle,l=e.disabled,s=i(e,["style","noStyle","disabled"]),f={};return u||(f=Object(r.default)({},c)),l&&(f.pointerEvents="none"),f=Object(r.default)(Object(r.default)({},f),n),o.createElement("div",Object(r.default)({role:"button",tabIndex:0,ref:t},s,{onKeyDown:function(e){e.keyCode===a.a.ENTER&&e.preventDefault()},onKeyUp:function(t){var n=t.keyCode,r=e.onClick;n===a.a.ENTER&&r&&r()},style:f}))}));t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r={default:__("读取你的个人信息（不包含邮箱和手机）"),group:__("修改和读取你的团队"),"group:read":__("读取你的团队"),topic:__("修改和读取你的主题"),"topic:read":__("读取你的主题"),repo:__("修改和读取你的知识库"),"repo:read":__("读取你的知识库"),doc:__("修改和读取你的文档"),"doc:read":__("读取你的文档"),artboard:__("修改和读取你的图集"),"artboard:read":__("读取你的图集")},o={repo:__("修改和读取团队的知识库"),"repo:read":__("读取团队的知识库"),doc:__("修改和读取团队的文档"),"doc:read":__("读取团队的文档")},a={attach_upload:__("附件上传（仅图片）")};t.c=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(0),o=n.n(r);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,n,r,a=d(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e))._props=e.props,t._ref=o.a.createRef(),t}return t=c,(n=[{key:"getRef",value:function(){return this._ref.current}},{key:"update",value:function(e){this._props=u(u({},this._props),e),this.forceUpdate()}},{key:"render",value:function(){var e=this.props.component;return"function"===e.type?o.a.createElement(e.type,i({},this._props,{ref:this._ref}),e.props.children):o.a.createElement(e,i({},this._props,{ref:this._ref}))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.a.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return x.a}));var r=n(14),o=n(18),a=n(11),i=n(40),c=n(57),u=n(58),l=n(203),s=n(66),f=n(72),d=n(0),p=n(70),m=n(85),h=n(10),y=n.n(h),v=n(1021),b=n(221),g=n(202),_=n(28),w=n(55),E=n(1348),O=n(228),x=n(688),j=function(e,t){var n=e.className,o=e.style,a=e.motion,i=e.motionNodes,c=e.motionType,u=e.onMotionStart,l=e.onMotionEnd,s=e.active,f=e.treeNodeRequiredProps,p=Object(w.a)(e,["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"]),m=d.useState(!0),h=Object(_.a)(m,2),b=h[0],E=h[1],j=d.useContext(v.a).prefixCls,k=d.useRef(!1),S=function(){k.current||l(),k.current=!0};return Object(d.useEffect)((function(){i&&"hide"===c&&b&&E(!1)}),[i]),Object(d.useEffect)((function(){return i&&u(),function(){i&&S()}}),[]),i?d.createElement(O.b,Object(r.default)({ref:t,visible:b},a,{motionAppear:"show"===c,onAppearEnd:S,onLeaveEnd:S}),(function(e,t){var n=e.className,o=e.style;return d.createElement("div",{ref:t,className:y()("".concat(j,"-treenode-motion"),n),style:o},i.map((function(e){var t=e.data,n=t.key,o=Object(w.a)(t,["key"]),a=e.isStart,i=e.isEnd;delete o.children;var c=Object(g.f)(n,f);return d.createElement(x.a,Object(r.default)({},o,c,{active:s,data:e.data,key:n,isStart:a,isEnd:i}))})))})):d.createElement(x.a,Object(r.default)({domRef:t,className:n,style:o},p,{active:s}))};j.displayName="MotionTreeNode";var k=d.forwardRef(j);function S(e,t,n){var r=e.findIndex((function(e){return e.data.key===n})),o=e[r+1],a=t.findIndex((function(e){return e.data.key===n}));if(o){var i=t.findIndex((function(e){return e.data.key===o.data.key}));return t.slice(a+1,i)}return t.slice(a+1)}var C={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},N=function(){},P="RC_TREE_MOTION_".concat(Math.random()),T={key:P},A={key:P,level:0,index:0,pos:"0",node:T},L={parent:null,children:[],pos:A.pos,data:T,isStart:[],isEnd:[]};function I(e,t,n,r){return!1!==t&&n?e.slice(0,Math.ceil(n/r)+1):e}function R(e){var t=e.data.key,n=e.pos;return Object(g.e)(t,n)}var D=function(e,t){var n=e.prefixCls,o=e.data,a=(e.selectable,e.checkable,e.expandedKeys),i=e.selectedKeys,c=e.checkedKeys,u=e.loadedKeys,l=e.loadingKeys,s=e.halfCheckedKeys,f=e.keyEntities,p=e.disabled,m=e.dragging,h=e.dragOverNodeKey,y=e.dropPosition,v=e.motion,b=e.height,O=e.itemHeight,x=e.virtual,j=e.focusable,T=e.activeItem,A=e.focused,D=e.tabIndex,M=e.onKeyDown,F=e.onFocus,B=e.onBlur,U=e.onActiveChange,z=e.onListChangeStart,G=e.onListChangeEnd,V=Object(w.a)(e,["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"]),Y=d.useRef(null),q=d.useRef(null);d.useImperativeHandle(t,(function(){return{scrollTo:function(e){Y.current.scrollTo(e)},getIndentWidth:function(){return q.current.offsetWidth}}}));var H=d.useState(a),W=Object(_.a)(H,2),K=W[0],$=W[1],Q=d.useState(o),X=Object(_.a)(Q,2),J=X[0],Z=X[1],ee=d.useState(o),te=Object(_.a)(ee,2),ne=te[0],re=te[1],oe=d.useState([]),ae=Object(_.a)(oe,2),ie=ae[0],ce=ae[1],ue=d.useState(null),le=Object(_.a)(ue,2),se=le[0],fe=le[1];function de(){Z(o),re(o),ce([]),fe(null),G()}d.useEffect((function(){$(a);var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length,r=t.length;if(1!==Math.abs(n-r))return{add:!1,key:null};function o(e,t){var n=new Map;e.forEach((function(e){n.set(e,!0)}));var r=t.filter((function(e){return!n.has(e)}));return 1===r.length?r[0]:null}return n<r?{add:!0,key:o(e,t)}:{add:!1,key:o(t,e)}}(K,a);if(null!==e.key)if(e.add){var t=J.findIndex((function(t){return t.data.key===e.key})),n=I(S(J,o,e.key),x,b,O),r=J.slice();r.splice(t+1,0,L),re(r),ce(n),fe("show")}else{var i=o.findIndex((function(t){return t.data.key===e.key})),c=I(S(o,J,e.key),x,b,O),u=o.slice();u.splice(i+1,0,L),re(u),ce(c),fe("hide")}else J!==o&&(Z(o),re(o))}),[a,o]),d.useEffect((function(){m||de()}),[m]);var pe=v?ne:o,me={expandedKeys:a,selectedKeys:i,loadedKeys:u,loadingKeys:l,checkedKeys:c,halfCheckedKeys:s,dragOverNodeKey:h,dropPosition:y,keyEntities:f};return d.createElement(d.Fragment,null,A&&T&&d.createElement("span",{style:C,"aria-live":"assertive"},function(e){for(var t=String(e.data.key),n=e;n.parent;)n=n.parent,t="".concat(n.data.key," > ").concat(t);return t}(T)),d.createElement("div",{role:"tree"},d.createElement("input",{style:C,disabled:!1===j||p,tabIndex:!1!==j?D:null,onKeyDown:M,onFocus:F,onBlur:B,value:"",onChange:N})),d.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},d.createElement("div",{className:"".concat(n,"-indent")},d.createElement("div",{ref:q,className:"".concat(n,"-indent-unit")}))),d.createElement(E.a,Object(r.default)({},V,{data:pe,itemKey:R,height:b,fullHeight:!1,virtual:x,itemHeight:O,prefixCls:"".concat(n,"-list"),ref:Y}),(function(e){var t=e.pos,n=e.data,o=n.key,a=Object(w.a)(n,["key"]),i=e.isStart,c=e.isEnd,u=Object(g.e)(o,t);delete a.children;var l=Object(g.f)(u,me);return d.createElement(k,Object(r.default)({},a,l,{active:!!T&&o===T.data.key,pos:t,data:e.data,isStart:i,isEnd:c,motion:v,motionNodes:o===P?ie:null,motionType:se,onMotionStart:z,onMotionEnd:de,treeNodeRequiredProps:me,onMouseMove:function(){U(null)}}))})))},M=d.forwardRef(D);M.displayName="NodeList";var F=M,B=n(426);var U=function(e){Object(s.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments)).destroyed=!1,e.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],dragging:!1,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null},e.dragStartMousePosition=null,e.listRef=d.createRef(),e.onNodeDragStart=function(t,n){var r=e.state,o=r.expandedKeys,a=r.keyEntities,i=e.props.onDragStart,c=n.props.eventKey;e.dragNode=n,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var u=Object(b.b)(o,c);e.setState({dragging:!0,dragChildrenKeys:Object(b.g)(c,a),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(u),window.addEventListener("dragend",e.onWindowDragEnd),i&&i({event:t,node:Object(g.b)(n.props)})},e.onNodeDragEnter=function(t,n){var r=e.state,o=r.expandedKeys,a=r.keyEntities,c=r.dragChildrenKeys,u=r.flattenNodes,s=r.indent,f=e.props,d=f.onDragEnter,p=f.onExpand,m=f.allowDrop,h=f.direction,y=n.props.pos,v=Object(l.a)(e).dragNode,_=Object(b.c)(t,v,n,s,e.dragStartMousePosition,m,u,a,o,h),w=_.dropPosition,E=_.dropLevelOffset,O=_.dropTargetKey,x=_.dropContainerKey,j=_.dropTargetPos,k=_.dropAllowed,S=_.dragOverNodeKey;v&&-1===c.indexOf(O)&&k?(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach((function(t){clearTimeout(e.delayedDragEnterLogic[t])})),v.props.eventKey!==n.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[y]=window.setTimeout((function(){if(e.state.dragging){var r=Object(i.a)(o),c=a[n.props.eventKey];c&&(c.children||[]).length&&(r=Object(b.a)(o,n.props.eventKey)),"expandedKeys"in e.props||e.setExpandedKeys(r),p&&p(r,{node:Object(g.b)(n.props),expanded:!0,nativeEvent:t.nativeEvent})}}),800)),v.props.eventKey!==O||0!==E?(e.setState({dragOverNodeKey:S,dropPosition:w,dropLevelOffset:E,dropTargetKey:O,dropContainerKey:x,dropTargetPos:j,dropAllowed:k}),d&&d({event:t,node:Object(g.b)(n.props),expandedKeys:o})):e.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})):e.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})},e.onNodeDragOver=function(t,n){var r=e.state,o=r.dragChildrenKeys,a=r.flattenNodes,i=r.keyEntities,c=r.expandedKeys,u=r.indent,s=e.props,f=s.onDragOver,d=s.allowDrop,p=s.direction,m=Object(l.a)(e).dragNode,h=Object(b.c)(t,m,n,u,e.dragStartMousePosition,d,a,i,c,p),y=h.dropPosition,v=h.dropLevelOffset,_=h.dropTargetKey,w=h.dropContainerKey,E=h.dropAllowed,O=h.dropTargetPos,x=h.dragOverNodeKey;m&&-1===o.indexOf(_)&&E&&(m.props.eventKey===_&&0===v?null===e.state.dropPosition&&null===e.state.dropLevelOffset&&null===e.state.dropTargetKey&&null===e.state.dropContainerKey&&null===e.state.dropTargetPos&&!1===e.state.dropAllowed&&null===e.state.dragOverNodeKey||e.setState({dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1,dragOverNodeKey:null}):y===e.state.dropPosition&&v===e.state.dropLevelOffset&&_===e.state.dropTargetKey&&w===e.state.dropContainerKey&&O===e.state.dropTargetPos&&E===e.state.dropAllowed&&x===e.state.dragOverNodeKey||e.setState({dropPosition:y,dropLevelOffset:v,dropTargetKey:_,dropContainerKey:w,dropTargetPos:O,dropAllowed:E,dragOverNodeKey:x}),f&&f({event:t,node:Object(g.b)(n.props)}))},e.onNodeDragLeave=function(t,n){var r=e.props.onDragLeave;r&&r({event:t,node:Object(g.b)(n.props)})},e.onWindowDragEnd=function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDragEnd=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),o&&!r&&o({event:t,node:Object(g.b)(n.props)}),e.dragNode=null},e.onNodeDrop=function(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.state,c=i.dragChildrenKeys,u=i.dropPosition,l=i.dropTargetKey,s=i.dropTargetPos,f=i.dropAllowed;if(f){var d=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),null!==l){var p=Object(a.a)(Object(a.a)({},Object(g.f)(l,e.getTreeNodeRequiredProps())),{},{active:(null===(r=e.getActiveItem())||void 0===r?void 0:r.data.key)===l,data:e.state.keyEntities[l].node}),h=-1!==c.indexOf(l);Object(m.a)(!h,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var y=Object(b.k)(s),v={event:t,node:Object(g.b)(p),dragNode:e.dragNode?Object(g.b)(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(c),dropToGap:0!==u,dropPosition:u+Number(y[y.length-1])};d&&!o&&d(v),e.dragNode=null}}},e.cleanDragState=function(){e.state.dragging&&e.setState({dragging:!1,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null},e.onNodeClick=function(t,n){var r=e.props.onClick;r&&r(t,n)},e.onNodeDoubleClick=function(t,n){var r=e.props.onDoubleClick;r&&r(t,n)},e.onNodeSelect=function(t,n){var r=e.state.selectedKeys,o=e.state.keyEntities,a=e.props,i=a.onSelect,c=a.multiple,u=n.selected,l=n.key,s=!u,f=(r=s?c?Object(b.a)(r,l):[l]:Object(b.b)(r,l)).map((function(e){var t=o[e];return t?t.node:null})).filter((function(e){return e}));e.setUncontrolledState({selectedKeys:r}),i&&i(r,{event:"select",selected:s,node:n,selectedNodes:f,nativeEvent:t.nativeEvent})},e.onNodeCheck=function(t,n,r){var o,a=e.state,c=a.keyEntities,u=a.checkedKeys,l=a.halfCheckedKeys,s=e.props,f=s.checkStrictly,d=s.onCheck,p=n.key,m={event:"check",node:n,checked:r,nativeEvent:t.nativeEvent};if(f){var h=r?Object(b.a)(u,p):Object(b.b)(u,p);o={checked:h,halfChecked:Object(b.b)(l,p)},m.checkedNodes=h.map((function(e){return c[e]})).filter((function(e){return e})).map((function(e){return e.node})),e.setUncontrolledState({checkedKeys:h})}else{var y=Object(B.a)([].concat(Object(i.a)(u),[p]),!0,c),v=y.checkedKeys,g=y.halfCheckedKeys;if(!r){var _=new Set(v);_.delete(p);var w=Object(B.a)(Array.from(_),{checked:!1,halfCheckedKeys:g},c);v=w.checkedKeys,g=w.halfCheckedKeys}o=v,m.checkedNodes=[],m.checkedNodesPositions=[],m.halfCheckedKeys=g,v.forEach((function(e){var t=c[e];if(t){var n=t.node,r=t.pos;m.checkedNodes.push(n),m.checkedNodesPositions.push({node:n,pos:r})}})),e.setUncontrolledState({checkedKeys:v},!1,{halfCheckedKeys:g})}d&&d(o,m)},e.onNodeLoad=function(t){return new Promise((function(n){e.setState((function(r){var o=r.loadedKeys,a=void 0===o?[]:o,i=r.loadingKeys,c=void 0===i?[]:i,u=e.props,l=u.loadData,s=u.onLoad,f=t.key;return l&&-1===a.indexOf(f)&&-1===c.indexOf(f)?(l(t).then((function(){var r=e.state,o=r.loadedKeys,a=r.loadingKeys,i=Object(b.a)(o,f),c=Object(b.b)(a,f);s&&s(i,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:i}),e.setState({loadingKeys:c}),n()})),{loadingKeys:Object(b.a)(c,f)}):{}}))}))},e.onNodeMouseEnter=function(t,n){var r=e.props.onMouseEnter;r&&r({event:t,node:n})},e.onNodeMouseLeave=function(t,n){var r=e.props.onMouseLeave;r&&r({event:t,node:n})},e.onNodeContextMenu=function(t,n){var r=e.props.onRightClick;r&&(t.preventDefault(),r({event:t,node:n}))},e.onFocus=function(){var t=e.props.onFocus;e.setState({focused:!0}),t&&t.apply(void 0,arguments)},e.onBlur=function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null),t&&t.apply(void 0,arguments)},e.getTreeNodeRequiredProps=function(){var t=e.state;return{expandedKeys:t.expandedKeys||[],selectedKeys:t.selectedKeys||[],loadedKeys:t.loadedKeys||[],loadingKeys:t.loadingKeys||[],checkedKeys:t.checkedKeys||[],halfCheckedKeys:t.halfCheckedKeys||[],dragOverNodeKey:t.dragOverNodeKey,dropPosition:t.dropPosition,keyEntities:t.keyEntities}},e.setExpandedKeys=function(t){var n=e.state.treeData,r=Object(g.d)(n,t);e.setUncontrolledState({expandedKeys:t,flattenNodes:r},!0)},e.onNodeExpand=function(t,n){var r=e.state.expandedKeys,o=e.state.listChanging,a=e.props,i=a.onExpand,c=a.loadData,u=n.key,l=n.expanded;if(!o){var s=r.indexOf(u),f=!l;if(Object(m.a)(l&&-1!==s||!l&&-1===s,"Expand state not sync with index check"),r=f?Object(b.a)(r,u):Object(b.b)(r,u),e.setExpandedKeys(r),i&&i(r,{node:n,expanded:f,nativeEvent:t.nativeEvent}),f&&c){var d=e.onNodeLoad(n);d&&d.then((function(){var t=Object(g.d)(e.state.treeData,r);e.setUncontrolledState({flattenNodes:t})}))}}},e.onListChangeStart=function(){e.setUncontrolledState({listChanging:!0})},e.onListChangeEnd=function(){setTimeout((function(){e.setUncontrolledState({listChanging:!1})}))},e.onActiveChange=function(t){var n=e.state.activeKey,r=e.props.onActiveChange;n!==t&&(e.setState({activeKey:t}),null!==t&&e.scrollTo({key:t}),r&&r(t))},e.getActiveItem=function(){var t=e.state,n=t.activeKey,r=t.flattenNodes;return null===n?null:r.find((function(e){return e.data.key===n}))||null},e.offsetActiveKey=function(t){var n=e.state,r=n.flattenNodes,o=n.activeKey,a=r.findIndex((function(e){return e.data.key===o}));-1===a&&t<0&&(a=r.length);var i=r[a=(a+t+r.length)%r.length];if(i){var c=i.data.key;e.onActiveChange(c)}else e.onActiveChange(null)},e.onKeyDown=function(t){var n=e.state,r=n.activeKey,o=n.expandedKeys,i=n.checkedKeys,c=e.props,u=c.onKeyDown,l=c.checkable,s=c.selectable;switch(t.which){case p.a.UP:e.offsetActiveKey(-1),t.preventDefault();break;case p.a.DOWN:e.offsetActiveKey(1),t.preventDefault()}var f=e.getActiveItem();if(f&&f.data){var d=e.getTreeNodeRequiredProps(),m=!1===f.data.isLeaf||!!(f.data.children||[]).length,h=Object(g.b)(Object(a.a)(Object(a.a)({},Object(g.f)(r,d)),{},{data:f.data,active:!0}));switch(t.which){case p.a.LEFT:m&&o.includes(r)?e.onNodeExpand({},h):f.parent&&e.onActiveChange(f.parent.data.key),t.preventDefault();break;case p.a.RIGHT:m&&!o.includes(r)?e.onNodeExpand({},h):f.children&&f.children.length&&e.onActiveChange(f.children[0].data.key),t.preventDefault();break;case p.a.ENTER:case p.a.SPACE:!l||h.disabled||!1===h.checkable||h.disableCheckbox?l||!s||h.disabled||!1===h.selectable||e.onNodeSelect({},h):e.onNodeCheck({},h,!i.includes(r))}}u&&u(t)},e.setUncontrolledState=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e.destroyed){var o=!1,i=!0,c={};Object.keys(t).forEach((function(n){n in e.props?i=!1:(o=!0,c[n]=t[n])})),!o||n&&!i||e.setState(Object(a.a)(Object(a.a)({},c),r))}},e.scrollTo=function(t){e.listRef.current.scrollTo(t)},e}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"render",value:function(){var e,t=this.state,n=t.focused,a=t.flattenNodes,i=t.keyEntities,c=t.dragging,u=t.activeKey,l=t.dropLevelOffset,s=t.dropContainerKey,f=t.dropTargetKey,p=t.dropPosition,m=t.dragOverNodeKey,h=t.indent,g=this.props,_=g.prefixCls,w=g.className,E=g.style,O=g.showLine,x=g.focusable,j=g.tabIndex,k=void 0===j?0:j,S=g.selectable,C=g.showIcon,N=g.icon,P=g.switcherIcon,T=g.draggable,A=g.checkable,L=g.checkStrictly,I=g.disabled,R=g.motion,D=g.loadData,M=g.filterTreeNode,B=g.height,U=g.itemHeight,z=g.virtual,G=g.titleRender,V=g.dropIndicatorRender,Y=g.onContextMenu,q=g.direction,H=Object(b.f)(this.props);return d.createElement(v.a.Provider,{value:{prefixCls:_,selectable:S,showIcon:C,icon:N,switcherIcon:P,draggable:T,checkable:A,checkStrictly:L,disabled:I,keyEntities:i,dropLevelOffset:l,dropContainerKey:s,dropTargetKey:f,dropPosition:p,dragOverNodeKey:m,indent:h,direction:q,dropIndicatorRender:V,loadData:D,filterTreeNode:M,titleRender:G,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},d.createElement("div",{className:y()(_,w,(e={},Object(o.a)(e,"".concat(_,"-show-line"),O),Object(o.a)(e,"".concat(_,"-focused"),n),Object(o.a)(e,"".concat(_,"-active-focused"),null!==u),e))},d.createElement(F,Object(r.default)({ref:this.listRef,prefixCls:_,style:E,data:a,disabled:I,selectable:S,checkable:!!A,motion:R,dragging:c,height:B,itemHeight:U,virtual:z,focusable:x,focused:n,tabIndex:k,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:Y},this.getTreeNodeRequiredProps(),H))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,r=t.prevProps,i={prevProps:e};function c(t){return!r&&t in e||r&&r[t]!==e[t]}if(c("treeData")?n=e.treeData:c("children")&&(Object(m.a)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=Object(g.c)(e.children)),n){i.treeData=n;var u=Object(g.a)(n);i.keyEntities=Object(a.a)(Object(o.a)({},P,A),u.keyEntities)}var l,s=i.keyEntities||t.keyEntities;if(c("expandedKeys")||r&&c("autoExpandParent"))i.expandedKeys=e.autoExpandParent||!r&&e.defaultExpandParent?Object(b.e)(e.expandedKeys,s):e.expandedKeys;else if(!r&&e.defaultExpandAll){var f=Object(a.a)({},s);delete f[P],i.expandedKeys=Object.keys(f).map((function(e){return f[e].key}))}else!r&&e.defaultExpandedKeys&&(i.expandedKeys=e.autoExpandParent||e.defaultExpandParent?Object(b.e)(e.defaultExpandedKeys,s):e.defaultExpandedKeys);if(i.expandedKeys||delete i.expandedKeys,n||i.expandedKeys){var d=Object(g.d)(n||t.treeData,i.expandedKeys||t.expandedKeys);i.flattenNodes=d}if((e.selectable&&(c("selectedKeys")?i.selectedKeys=Object(b.d)(e.selectedKeys,e):!r&&e.defaultSelectedKeys&&(i.selectedKeys=Object(b.d)(e.defaultSelectedKeys,e))),e.checkable)&&(c("checkedKeys")?l=Object(b.j)(e.checkedKeys)||{}:!r&&e.defaultCheckedKeys?l=Object(b.j)(e.defaultCheckedKeys)||{}:n&&(l=Object(b.j)(e.checkedKeys)||{checkedKeys:t.checkedKeys,halfCheckedKeys:t.halfCheckedKeys}),l)){var p=l,h=p.checkedKeys,y=void 0===h?[]:h,v=p.halfCheckedKeys,_=void 0===v?[]:v;if(!e.checkStrictly){var w=Object(B.a)(y,!0,s);y=w.checkedKeys,_=w.halfCheckedKeys}i.checkedKeys=y,i.halfCheckedKeys=_}return c("loadedKeys")&&(i.loadedKeys=e.loadedKeys),i}}]),n}(d.Component);U.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:function(e){var t=e.dropPosition,n=e.dropLevelOffset,r=e.indent,o={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(t){case-1:o.top=0,o.left=-n*r;break;case 1:o.bottom=0,o.left=-n*r;break;case 0:o.bottom=0,o.left=r}return d.createElement("div",{style:o})},allowDrop:function(){return!0}},U.TreeNode=x.a;var z=U;t.b=z},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(88),i=n(953);t.a=Object(a.d)((function(e){return{book:e.book}}))((function(e){var t=e.book,n=e.reversed,r=void 0!==n&&n,a={target_id:t&&t.id,target_type:"Book",id:t&&t.mark&&t.mark.id,action_tags:t&&t.mark&&t.mark.action_tags};return o.a.createElement("div",{className:"favor-wrapper"},!r&&o.a.createElement("div",{className:window.h5?"favor-wrapper-mark-h5":"favor-wrapper-mark"},o.a.createElement(i.a,{target:a,targetType:"Book",size:"small"})),r&&o.a.createElement("div",{className:"favor-wrapper-mark-reversed"},o.a.createElement(i.a,{target:a,targetType:"Book"})))}))},function(e,t,n){"use strict";n(166);var r=n(65),o=(n(130),n(35)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(2114),s=n.n(l),f=n(149),d=n.n(f),p=n(34),m=n(357),h=n(1272),y="index-module_repoSelector_2Z0BO",v="index-module_repoSelectorGroup_0chHn",b="index-module_repoSelectorRepo_nq0Ar",g="index-module_repoSelectorItem_-+1uF";function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(){w=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==_(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function E(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,c,"next",e)}function c(e){E(a,r,o,i,c,"throw",e)}i(void 0)}))}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){var t=window.appData,n=t.me,r=t.organization,o=e.defaultBook,i=e.defaultGroup,c=x(Object(a.useState)([o]),2),u=c[0],l=c[1],f=x(Object(a.useState)([i]),2),m=f[0],h=f[1],y=x(Object(a.useState)(i||{}),2),v=y[0],b=y[1],g=x(Object(a.useState)(o||{}),2),_=g[0],E=g[1],j=x(Object(a.useState)(!1),2),k=j[0],S=j[1],C=499;function N(e){return P.apply(this,arguments)}function P(){return(P=O(w().mark((function t(n){var a,i,c,u,l,f,m;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(null===(a=n.abilities)||void 0===a?void 0:a.read)){t.next=2;break}return t.abrupt("return",o.user_id===n.id?[o]:[]);case 2:return i=e.bookLayout,c=e.disableBooks,u=void 0===c?[]:c,l=d.a.MIXING_BOOK_TYPES.join(","),f={organization_id:r?r.id:0,type:l,filterByAbility:"create_doc",offset:0,limit:C,group_id:n.id,sence:"collaborate",enable_group_filter:!0},t.next=7,p.a.mine.books(f);case 7:return m=t.sent,m=i?m.filter((function(e){return i.includes(e.layout)})):d.a.MIXING_BOOK_TYPES.includes(o.type)?m.filter((function(e){return d.a.MIXING_BOOK_TYPES.includes(e.type)})):m.filter((function(e){return e.type===o.type})),m=s()(m,u,"id"),t.abrupt("return",m);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=O(w().mark((function t(n){var r,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!v||n.id!==v.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,N(n);case 4:r=t.sent,o=r?r[0]:{},l(r),b(n),E(o),e.onSelected(n,o);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=O(w().mark((function t(){var r,a,c,u,s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k){t.next=10;break}return a=d.a.MIXING_BOOK_TYPES.join(","),t.next=4,p.a.mine.groupsAll({offset:0,limit:C,filterByAbility:"create_doc",type:a});case 4:(c=t.sent)&&Array.isArray(c)&&c.unshift(n),h(c),S(!0),r=i||c[0],i||b(r);case 10:return t.next=12,N(r);case 12:u=t.sent,l(u),s=o||(u?u[0]:{}),o||E(s),e.onSelected(r,s);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){A.apply(this,arguments)}()}),[]),{state:{currentGroup:v,currentBook:_,groups:m,books:u},onRepoSelect:function(t){var n=u.find((function(e){return e.id===t}))||{};E(n),e.onSelected(v,n)},onGroupSelect:function(e){return T.apply(this,arguments)}}}function S(e){var t=e.disabled,n=k(e),a=n.state,c=a.currentGroup,u=a.currentBook,l=a.groups,s=a.books;return i.a.createElement(r.a,{className:y,type:"flex","data-testid":"repo-selector"},i.a.createElement("div",{className:v},i.a.createElement(h.a,{current:c,disabled:t,groups:l,onChange:n.onGroupSelect})),i.a.createElement("span",{style:{margin:"0 12px",lineHeight:"32px"}},"/"),i.a.createElement(o.a,{showSearch:!0,style:{width:"240px"},className:b,disabled:t,value:u&&u.id,placeholder:__("请选择知识库"),onSelect:n.onRepoSelect,filterOption:function(e,t){if(e&&t.book)return t.book.name.toLowerCase().includes(e.toLowerCase())}},s.map((function(e){return i.a.createElement(o.a.Option,{key:e.id,value:e.id,book:e},i.a.createElement("div",{className:g},i.a.createElement(m.a.Title,{group:e.user,book:e,iconSize:20})))}))))}S.defaultProps={onSelected:function(){},disableBooks:[]},S.propTypes={defaultGroup:u.a.object,defaultBook:u.a.object,bookLayout:u.a.array,disabled:u.a.bool,onSelected:u.a.func,disableBooks:u.a.array};t.a=S},,,,function(e,t,n){"use strict";n(162),n(423),n(305)},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";var r=n(0);t.a=function(e){return r.createElement("a",e)}},,function(e,t,n){"use strict";n(79);var r=n(44),o=(n(50),n(19)),a=(n(209),n(61)),i=(n(75),n(26)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f={content:"index-module_content_rh7s3",form:"index-module_form_q8geJ",tip:"index-module_tip_s8Xrp"};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(s,e);var t,n,c,l=y(s);function s(){var e;p(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(b(e=l.call.apply(l,[this].concat(n))),"handleOnOk",(function(t){t.preventDefault();var n=e.props,r=n.form,o=n.slug,a=r.validateFields,i=r.setFields,c=r.resetFields;a((function(t,n){t||(n.slug===o?(c(),e.props.onOk(n)):i({slug:{value:n.slug,errors:[__("输入的路径名称错误, 请重新输入")]}}))}))})),_(b(e),"handleOnCancel",(function(){var t=e.props.form.resetFields;e.props.onCancel(),t()})),e}return t=s,(n=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.title,c=e.content,l=e.buttonText,s=e.slug,d=this.props.form,p=d.getFieldDecorator,m=d.getFieldError;return u.a.createElement(r.a,{title:n,footer:null,visible:t,onCancel:this.handleOnCancel,destroyOnClose:!0},c&&u.a.createElement("div",{className:f.content},c),u.a.createElement(a.a,{onSubmit:this.handleOnOk,className:f.form},u.a.createElement("div",{className:f.tip},__('请在下方输入框中输入 "{login}" 以确认操作',{login:u.a.createElement("span",{className:f.slug},s)})),u.a.createElement(a.a.Item,{hasFeedback:!0,validateStatus:m("slug")?"error":null,help:m("slug")?(m("slug")||[]).join(", "):""},p("slug",{initialValue:"",rules:[{type:"string",required:!0,message:__("请按提示输入")}]})(u.a.createElement(i.a,{type:"text",autoComplete:"off",maxLength:200,placeholder:s}))),u.a.createElement(a.a.Item,null,u.a.createElement(o.a,{"data-testid":"btn-submit",type:"danger",style:{width:"100%"},htmlType:"submit"},u.a.createElement("span",{style:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},l||__("确定"))))))}}])&&m(t.prototype,n),c&&m(t,c),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.PureComponent);w.propTypes={visible:s.a.bool.isRequired,title:s.a.node.isRequired,content:s.a.node,buttonText:s.a.node,slug:s.a.string.isRequired,onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired};t.a=a.a.create()(w)},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";var r=n(14),o=n(41),a=n(0),i=n(539),c=n(11),u=n(18),l=n(28),s=n(55),f=n(10),d=n.n(f),p=n(618),m=n(163),h=n(1026),y=n(70),v=n(640),b=n(563),g=n(228);function _(e){var t=e.prefixCls,n=e.style,o=e.visible,i=e.maskProps,u=e.motionName;return a.createElement(g.b,{key:"mask",visible:o,motionName:u,leavedClassName:"".concat(t,"-mask-hidden")},(function(e){var o=e.className,u=e.style;return a.createElement("div",Object(r.default)({style:Object(c.a)(Object(c.a)({},u),n),className:d()("".concat(t,"-mask"),o)},i))}))}function w(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}var E=-1;function O(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}var x=a.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate})),j={width:0,height:0,overflow:"hidden",outline:"none"},k=a.forwardRef((function(e,t){var n=e.closable,o=e.prefixCls,i=e.width,u=e.height,s=e.footer,f=e.title,p=e.closeIcon,m=e.style,h=e.className,y=e.visible,v=e.forceRender,b=e.bodyStyle,_=e.bodyProps,w=e.children,E=e.destroyOnClose,k=e.modalRender,S=e.motionName,C=e.ariaId,N=e.onClose,P=e.onVisibleChanged,T=e.onMouseDown,A=e.onMouseUp,L=e.mousePosition,I=Object(a.useRef)(),R=Object(a.useRef)(),D=Object(a.useRef)();a.useImperativeHandle(t,(function(){return{focus:function(){var e;null===(e=I.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===R.current?I.current.focus():e||t!==I.current||R.current.focus()}}}));var M,F,B,U=a.useState(),z=Object(l.a)(U,2),G=z[0],V=z[1],Y={};function q(){var e,t,n,r,o,a=(e=D.current,t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,o=r.defaultView||r.parentWindow,n.left+=O(o),n.top+=O(o,!0),n);V(L?"".concat(L.x-a.left,"px ").concat(L.y-a.top,"px"):"")}void 0!==i&&(Y.width=i),void 0!==u&&(Y.height=u),G&&(Y.transformOrigin=G),s&&(M=a.createElement("div",{className:"".concat(o,"-footer")},s)),f&&(F=a.createElement("div",{className:"".concat(o,"-header")},a.createElement("div",{className:"".concat(o,"-title"),id:C},f))),n&&(B=a.createElement("button",{type:"button",onClick:N,"aria-label":"Close",className:"".concat(o,"-close")},p||a.createElement("span",{className:"".concat(o,"-close-x")})));var H=a.createElement("div",{className:"".concat(o,"-content")},B,F,a.createElement("div",Object(r.default)({className:"".concat(o,"-body"),style:b},_),w),M);return a.createElement(g.b,{visible:y,onVisibleChanged:P,onAppearPrepare:q,onEnterPrepare:q,forceRender:v,motionName:S,removeOnLeave:E,ref:D},(function(e,t){var n=e.className,r=e.style;return a.createElement("div",{key:"dialog-element",role:"document",ref:t,style:Object(c.a)(Object(c.a)(Object(c.a)({},r),m),Y),className:d()(o,h,n),onMouseDown:T,onMouseUp:A},a.createElement("div",{tabIndex:0,ref:I,style:j,"aria-hidden":"true"}),a.createElement(x,{shouldUpdate:y||v},k?k(H):H),a.createElement("div",{tabIndex:0,ref:R,style:j,"aria-hidden":"true"}))}))}));k.displayName="Content";var S=k;function C(e){var t=e.prefixCls,n=void 0===t?"rc-dialog":t,o=e.zIndex,i=e.visible,u=void 0!==i&&i,s=e.keyboard,f=void 0===s||s,p=e.focusTriggerAfterClose,m=void 0===p||p,h=e.scrollLocker,g=e.title,O=e.wrapStyle,x=e.wrapClassName,j=e.wrapProps,k=e.onClose,C=e.afterClose,N=e.transitionName,P=e.animation,T=e.closable,A=void 0===T||T,L=e.mask,I=void 0===L||L,R=e.maskTransitionName,D=e.maskAnimation,M=e.maskClosable,F=void 0===M||M,B=e.maskStyle,U=e.maskProps,z=Object(a.useRef)(),G=Object(a.useRef)(),V=Object(a.useRef)(),Y=a.useState(u),q=Object(l.a)(Y,2),H=q[0],W=q[1],K=Object(a.useRef)();function $(e){null==k||k(e)}K.current||(K.current="rcDialogTitle".concat(E+=1));var Q=Object(a.useRef)(!1),X=Object(a.useRef)(),J=null;return F&&(J=function(e){Q.current?Q.current=!1:G.current===e.target&&$(e)}),Object(a.useEffect)((function(){return u&&W(!0),function(){}}),[u]),Object(a.useEffect)((function(){return function(){clearTimeout(X.current)}}),[]),Object(a.useEffect)((function(){return H?(null==h||h.lock(),null==h?void 0:h.unLock):function(){}}),[H,h]),a.createElement("div",Object(r.default)({className:"".concat(n,"-root")},Object(b.a)(e,{data:!0})),a.createElement(_,{prefixCls:n,visible:I&&u,motionName:w(n,R,D),style:Object(c.a)({zIndex:o},B),maskProps:U}),a.createElement("div",Object(r.default)({tabIndex:-1,onKeyDown:function(e){if(f&&e.keyCode===y.a.ESC)return e.stopPropagation(),void $(e);u&&e.keyCode===y.a.TAB&&V.current.changeActive(!e.shiftKey)},className:d()("".concat(n,"-wrap"),x),ref:G,onClick:J,role:"dialog","aria-labelledby":g?K.current:null,style:Object(c.a)(Object(c.a)({zIndex:o},O),{},{display:H?null:"none"})},j),a.createElement(S,Object(r.default)({},e,{onMouseDown:function(){clearTimeout(X.current),Q.current=!0},onMouseUp:function(){X.current=setTimeout((function(){Q.current=!1}))},ref:V,closable:A,ariaId:K.current,prefixCls:n,visible:u,onClose:$,onVisibleChanged:function(e){if(e){var t;if(!Object(v.a)(G.current,document.activeElement))z.current=document.activeElement,null===(t=V.current)||void 0===t||t.focus()}else{if(W(!1),I&&z.current&&m){try{z.current.focus({preventScroll:!0})}catch(n){}z.current=null}H&&(null==C||C())}},motionName:w(n,N,P)}))))}var N=function(e){var t=e.visible,n=e.getContainer,o=e.forceRender,i=e.destroyOnClose,c=void 0!==i&&i,u=e.afterClose,s=a.useState(t),f=Object(l.a)(s,2),d=f[0],p=f[1];return a.useEffect((function(){t&&p(!0)}),[t]),!1===n?a.createElement(C,Object(r.default)({},e,{getOpenCount:function(){return 2}})):o||!c||d?a.createElement(h.a,{visible:t,forceRender:o,getContainer:n},(function(t){return a.createElement(C,Object(r.default)({},e,{destroyOnClose:c,afterClose:function(){null==u||u(),p(!1)}},t))})):null};N.displayName="Dialog";var P=N,T=n(251),A=n(85),L=n(119);function I(e,t,n,r){var o=t+n,a=(n-r)/2;if(n>r){if(t>0)return Object(u.a)({},e,a);if(t<0&&o<r)return Object(u.a)({},e,-a)}else if(t<0||o>r)return Object(u.a)({},e,t<0?a:-a);return{}}var R=["visible","onVisibleChange","getContainer","current"],D=a.createContext({previewUrls:new Map,setPreviewUrls:function(){return null},current:null,setCurrent:function(){return null},setShowPreview:function(){return null},setMousePosition:function(){return null},registerImage:function(){return function(){return null}}}),M=D.Provider,F=function(e){var t=e.previewPrefixCls,n=void 0===t?"rc-image-preview":t,i=e.children,c=e.icons,u=void 0===c?{}:c,f=e.preview,d="object"===Object(o.a)(f)?f:{},p=d.visible,h=void 0===p?void 0:p,y=d.onVisibleChange,v=void 0===y?void 0:y,b=d.getContainer,g=void 0===b?void 0:b,_=d.current,w=void 0===_?0:_,E=Object(s.a)(d,R),O=Object(a.useState)(new Map),x=Object(l.a)(O,2),j=x[0],k=x[1],S=Object(a.useState)(),C=Object(l.a)(S,2),N=C[0],P=C[1],T=Object(m.a)(!!h,{value:h,onChange:v}),A=Object(l.a)(T,2),L=A[0],I=A[1],D=Object(a.useState)(null),F=Object(l.a)(D,2),B=F[0],U=F[1],z=void 0!==h,G=Array.from(j.keys())[w],Y=new Map(Array.from(j).filter((function(e){return!!Object(l.a)(e,2)[1].canPreview})).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1].url]})));return a.useEffect((function(){P(G)}),[G]),a.useEffect((function(){!L&&z&&P(G)}),[G,z,L]),a.createElement(M,{value:{isPreviewGroup:!0,previewUrls:Y,setPreviewUrls:k,current:N,setCurrent:P,setShowPreview:I,setMousePosition:U,registerImage:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=function(){k((function(t){var n=new Map(t);return n.delete(e)?n:t}))};return k((function(r){return new Map(r).set(e,{url:t,canPreview:n})})),r}}},i,a.createElement(V,Object(r.default)({"aria-hidden":!L,visible:L,prefixCls:n,onClose:function(e){e.stopPropagation(),I(!1),U(null)},mousePosition:B,src:Y.get(N),icons:u,getContainer:g},E)))},B=["prefixCls","src","alt","onClose","afterClose","visible","icons"],U=a.useState,z=a.useEffect,G={x:0,y:0},V=function(e){var t=e.prefixCls,n=e.src,o=e.alt,i=e.onClose,f=(e.afterClose,e.visible),m=e.icons,h=void 0===m?{}:m,y=Object(s.a)(e,B),v=h.rotateLeft,b=h.rotateRight,g=h.zoomIn,_=h.zoomOut,w=h.close,E=h.left,O=h.right,x=U(1),j=Object(l.a)(x,2),k=j[0],S=j[1],C=U(0),N=Object(l.a)(C,2),R=N[0],M=N[1],F=function(e){var t=a.useRef(null),n=a.useState(e),r=Object(l.a)(n,2),o=r[0],i=r[1],u=a.useRef([]);return a.useEffect((function(){return function(){return t.current&&L.a.cancel(t.current)}}),[]),[o,function(e){null===t.current&&(u.current=[],t.current=Object(L.a)((function(){i((function(e){var n=e;return u.current.forEach((function(e){n=Object(c.a)(Object(c.a)({},n),e)})),t.current=null,n}))}))),u.current.push(e)}]}(G),V=Object(l.a)(F,2),Y=V[0],q=V[1],H=a.useRef(),W=a.useRef({originX:0,originY:0,deltaX:0,deltaY:0}),K=a.useState(!1),$=Object(l.a)(K,2),Q=$[0],X=$[1],J=a.useContext(D),Z=J.previewUrls,ee=J.current,te=J.isPreviewGroup,ne=J.setCurrent,re=Z.size,oe=Array.from(Z.keys()),ae=oe.indexOf(ee),ie=te?Z.get(ee):n,ce=te&&re>1,ue=a.useState({wheelDirection:0}),le=Object(l.a)(ue,2),se=le[0],fe=le[1],de=function(){S((function(e){return e+1})),q(G)},pe=function(){k>1&&S((function(e){return e-1})),q(G)},me=d()(Object(u.a)({},"".concat(t,"-moving"),Q)),he="".concat(t,"-operations-operation"),ye="".concat(t,"-operations-icon"),ve=[{icon:w,onClick:i,type:"close"},{icon:g,onClick:de,type:"zoomIn"},{icon:_,onClick:pe,type:"zoomOut",disabled:1===k},{icon:b,onClick:function(){M((function(e){return e+90}))},type:"rotateRight"},{icon:v,onClick:function(){M((function(e){return e-90}))},type:"rotateLeft"}],be=function(){if(f&&Q){var e=H.current.offsetWidth*k,t=H.current.offsetHeight*k,n=H.current.getBoundingClientRect(),r=n.left,o=n.top,a=R%180!=0;X(!1);var i=function(e,t,n,r){var o=Object(p.a)(),a=o.width,i=o.height,u=null;return e<=a&&t<=i?u={x:0,y:0}:(e>a||t>i)&&(u=Object(c.a)(Object(c.a)({},I("x",n,e,a)),I("y",r,t,i))),u}(a?t:e,a?e:t,r,o);i&&q(Object(c.a)({},i))}},ge=function(e){f&&Q&&q({x:e.pageX-W.current.deltaX,y:e.pageY-W.current.deltaY})},_e=function(e){if(f){e.preventDefault();var t=e.deltaY;fe({wheelDirection:t})}};return z((function(){var e=se.wheelDirection;e>0?pe():e<0&&de()}),[se]),z((function(){var e,t,n=Object(T.a)(window,"mouseup",be,!1),r=Object(T.a)(window,"mousemove",ge,!1),o=Object(T.a)(window,"wheel",_e,{passive:!1});try{window.top!==window.self&&(e=Object(T.a)(window.top,"mouseup",be,!1),t=Object(T.a)(window.top,"mousemove",ge,!1))}catch(a){Object(A.c)(!1,"[rc-image] ".concat(a))}return function(){n.remove(),r.remove(),o.remove(),e&&e.remove(),t&&t.remove()}}),[f,Q]),a.createElement(P,Object(r.default)({transitionName:"zoom",maskTransitionName:"fade",closable:!1,keyboard:!0,prefixCls:t,onClose:i,afterClose:function(){S(1),M(0),q(G)},visible:f,wrapClassName:me},y),a.createElement("ul",{className:"".concat(t,"-operations")},ve.map((function(e){var n=e.icon,r=e.onClick,o=e.type,i=e.disabled;return a.createElement("li",{className:d()(he,Object(u.a)({},"".concat(t,"-operations-operation-disabled"),!!i)),onClick:r,key:o},a.isValidElement(n)?a.cloneElement(n,{className:ye}):n)}))),a.createElement("div",{className:"".concat(t,"-img-wrapper"),style:{transform:"translate3d(".concat(Y.x,"px, ").concat(Y.y,"px, 0)")}},a.createElement("img",{onMouseDown:function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),W.current.deltaX=e.pageX-Y.x,W.current.deltaY=e.pageY-Y.y,W.current.originX=Y.x,W.current.originY=Y.y,X(!0))},ref:H,className:"".concat(t,"-img"),src:ie,alt:o,style:{transform:"scale3d(".concat(k,", ").concat(k,", 1) rotate(").concat(R,"deg)")}})),ce&&a.createElement("div",{className:d()("".concat(t,"-switch-left"),Object(u.a)({},"".concat(t,"-switch-left-disabled"),0===ae)),onClick:function(e){e.preventDefault(),e.stopPropagation(),ae>0&&ne(oe[ae-1])}},E),ce&&a.createElement("div",{className:d()("".concat(t,"-switch-right"),Object(u.a)({},"".concat(t,"-switch-right-disabled"),ae===re-1)),onClick:function(e){e.preventDefault(),e.stopPropagation(),ae<re-1&&ne(oe[ae+1])}},O))},Y=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","crossOrigin","decoding","loading","referrerPolicy","sizes","srcSet","useMap"],q=["src","visible","onVisibleChange","getContainer","mask","maskClassName","icons"],H=0,W=function(e){var t=e.src,n=e.alt,i=e.onPreviewClose,f=e.prefixCls,h=void 0===f?"rc-image":f,y=e.previewPrefixCls,v=void 0===y?"".concat(h,"-preview"):y,b=e.placeholder,g=e.fallback,_=e.width,w=e.height,E=e.style,O=e.preview,x=void 0===O||O,j=e.className,k=e.onClick,S=e.onError,C=e.wrapperClassName,N=e.wrapperStyle,P=e.crossOrigin,T=e.decoding,A=e.loading,L=e.referrerPolicy,I=e.sizes,R=e.srcSet,M=e.useMap,F=Object(s.a)(e,Y),B=b&&!0!==b,U="object"===Object(o.a)(x)?x:{},z=U.src,G=U.visible,W=void 0===G?void 0:G,K=U.onVisibleChange,$=void 0===K?i:K,Q=U.getContainer,X=void 0===Q?void 0:Q,J=U.mask,Z=U.maskClassName,ee=U.icons,te=Object(s.a)(U,q),ne=null!=z?z:t,re=void 0!==W,oe=Object(m.a)(!!W,{value:W,onChange:$}),ae=Object(l.a)(oe,2),ie=ae[0],ce=ae[1],ue=Object(a.useState)(B?"loading":"normal"),le=Object(l.a)(ue,2),se=le[0],fe=le[1],de=Object(a.useState)(null),pe=Object(l.a)(de,2),me=pe[0],he=pe[1],ye="error"===se,ve=a.useContext(D),be=ve.isPreviewGroup,ge=ve.setCurrent,_e=ve.setShowPreview,we=ve.setMousePosition,Ee=ve.registerImage,Oe=a.useState((function(){return H+=1})),xe=Object(l.a)(Oe,1)[0],je=x&&!ye,ke=a.useRef(!1),Se=function(){fe("normal")};a.useEffect((function(){return Ee(xe,ne)}),[]),a.useEffect((function(){Ee(xe,ne,je)}),[ne,je]),a.useEffect((function(){ye&&fe("normal"),B&&!ke.current&&fe("loading")}),[t]);var Ce=d()(h,C,Object(u.a)({},"".concat(h,"-error"),ye)),Ne=ye&&g?g:ne,Pe={crossOrigin:P,decoding:T,loading:A,referrerPolicy:L,sizes:I,srcSet:R,useMap:M,alt:n,className:d()("".concat(h,"-img"),Object(u.a)({},"".concat(h,"-img-placeholder"),!0===b),j),style:Object(c.a)({height:w},E)};return a.createElement(a.Fragment,null,a.createElement("div",Object(r.default)({},F,{className:Ce,onClick:je?function(e){if(!re){var t=Object(p.b)(e.target),n=t.left,r=t.top;be?(ge(xe),we({x:n,y:r})):he({x:n,y:r})}be?_e(!0):ce(!0),k&&k(e)}:k,style:Object(c.a)({width:_,height:w},N)}),a.createElement("img",Object(r.default)({},Pe,{ref:function(e){ke.current=!1,"loading"===se&&(null==e?void 0:e.complete)&&(e.naturalWidth||e.naturalHeight)&&(ke.current=!0,Se())}},ye&&g?{src:g}:{onLoad:Se,onError:function(e){S&&S(e),fe("error")},src:t})),"loading"===se&&a.createElement("div",{"aria-hidden":"true",className:"".concat(h,"-placeholder")},b),J&&je&&a.createElement("div",{className:d()("".concat(h,"-mask"),Z)},J)),!be&&je&&a.createElement(V,Object(r.default)({"aria-hidden":!ie,visible:ie,prefixCls:v,onClose:function(e){e.stopPropagation(),ce(!1),re||he(null)},mousePosition:me,src:Ne,alt:n,getContainer:X,icons:ee},te)))};W.PreviewGroup=F,W.displayName="Image";var K=W,$=n(586),Q=n(1448),X=n(1449),J=n(1450),Z=n(1451),ee=n(261),te=n(389),ne=n(254),re=n(257),oe=n(262),ae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ie={rotateLeft:a.createElement(Q.a,null),rotateRight:a.createElement(X.a,null),zoomIn:a.createElement(J.a,null),zoomOut:a.createElement(Z.a,null),close:a.createElement(ee.a,null),left:a.createElement(te.a,null),right:a.createElement(ne.a,null)},ce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ue=function(e){var t=e.prefixCls,n=e.preview,c=ce(e,["prefixCls","preview"]),u=Object(a.useContext)(re.b).getPrefixCls,l=u("image",t),s=u(),f=Object(a.useContext)(re.b).locale,d=(void 0===f?$.a:f).Image||$.a.Image,p=a.useMemo((function(){if(!1===n)return n;var e="object"===Object(o.a)(n)?n:{};return Object(r.default)(Object(r.default)({mask:a.createElement("div",{className:"".concat(l,"-mask-info")},a.createElement(i.a,null),null==d?void 0:d.preview),icons:ie},e),{transitionName:Object(oe.b)(s,"zoom",e.transitionName),maskTransitionName:Object(oe.b)(s,"fade",e.maskTransitionName)})}),[n,d]);return a.createElement(K,Object(r.default)({prefixCls:l,preview:p},c))};ue.PreviewGroup=function(e){var t=e.previewPrefixCls,n=e.preview,i=ae(e,["previewPrefixCls","preview"]),c=a.useContext(re.b).getPrefixCls,u=c("image-preview",t),l=c(),s=a.useMemo((function(){if(!1===n)return n;var e="object"===Object(o.a)(n)?n:{};return Object(r.default)(Object(r.default)({},e),{transitionName:Object(oe.b)(l,"zoom",e.transitionName),maskTransitionName:Object(oe.b)(l,"fade",e.maskTransitionName)})}),[n]);return a.createElement(K.PreviewGroup,Object(r.default)({preview:s,previewPrefixCls:u,icons:ie},i))};t.a=ue},function(e,t,n){"use strict";n(162),n(305),n(2086),n(375)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n(639);function a(e){var t=r.useRef(e),n=Object(o.a)();return[function(){return t.current},function(e){t.current=e,n()}]}},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(350),n(230)),a=(n(60),n(24)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(2247),f=n(294),d=n(127),p=n(38),m=n(1027),h=n(10),y=n.n(h),v=(n(79),n(44)),b=(n(1054),n(1082)),g=n(36);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(l,e);var t,n,i,u=j(l);function l(){var e;E(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return N(S(e=u.call.apply(u,[this].concat(n))),"state",{previewImage:""}),N(S(e),"getPreviewImage",(function(t){var n=new FileReader;n.addEventListener("load",(function(){e.setState({previewImage:n.result})}),!1),t&&n.readAsDataURL(t)})),N(S(e),"getUploadProps",(function(){return{accept:"image/*",beforeUpload:function(t){return t.size/1024/1024>20?(a.a.error(__("图片大小不能超过 {size}M",{size:20})),!1):(e.getPreviewImage(t),!1)}}})),N(S(e),"onOk",(function(){return e.handleUpload().then((function(t){return e.props.onOk(t.url)}),(function(t){return a.a.error(__("头像上传失败")),e.props.onOk()}))})),N(S(e),"handleUpload",(function(){if(e.cropper&&void 0!==e.cropper.getCroppedCanvas())return new Promise((function(t,n){e.cropper.getCroppedCanvas().toBlob((function(r){var o=new FormData;o.append("file",r,"image.png"),Object(g.ajax)({url:e.props.uploadUrl,method:"POST",data:o,dataType:"json",processData:!1,success:function(e){t(e.data)},error:function(){n()}})}))}))})),e}return t=l,(n=[{key:"componentDidMount",value:function(){this.getPreviewImage(this.props.file)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.title,i=t.radius,u=this.state.previewImage;return c.a.createElement(v.a,{visible:n,title:a||__("编辑头像"),onCancel:this.props.onCancel,onOk:this.onOk,maskClosable:!1},c.a.createElement("div",{className:"image-cropper"},c.a.createElement("div",{className:"image-cropper__tool"},c.a.createElement(b.a,{ref:function(t){e.cropper=t},src:u,containerWidth:window.h5?200:320,cropWidth:window.h5?200:320,aspectRatio:1,preview:".image-cropper__thumb"})),u&&c.a.createElement("div",{className:"image-cropper__preview"},c.a.createElement("div",{className:"image-cropper__thumb",style:{borderRadius:i}}),c.a.createElement("p",null,__("预览")))),c.a.createElement("div",{className:"image-cropper__action"},c.a.createElement(o.a,w({showUploadList:!1},this.getUploadProps()),c.a.createElement(r.a,null,c.a.createElement(s.a,null),__("重新选择")))))}}])&&O(t.prototype,n),i&&O(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.Component);P.defaultProps={uploadUrl:"/api/upload/avatar"},P.propTypes={file:l.a.object.isRequired,visible:l.a.bool.isRequired,onCancel:l.a.func.isRequired,onOk:l.a.func.isRequired,uploadUrl:l.a.string};var T=P;function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(l,e);var t,n,i,u=D(l);function l(){var e;L(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return U(F(e=u.call.apply(u,[this].concat(n))),"state",{file:null,visible:!1}),U(F(e),"onCancelModal",(function(){e.setState({visible:!1})})),U(F(e),"handleAvatarUploaded",(function(t){var n,r;e.setState({visible:!1}),null===(n=(r=e.props)[e.props.trigger])||void 0===n||n.call(r,t)})),e}return t=l,(n=[{key:"getUploadProps",value:function(){var e=this;return{name:"file",showUploadList:!1,dataType:"json",accept:"image/*",beforeUpload:function(t){return t.size/1024/1024>20?(a.a.error(__("图片大小不能超过 {size}M",{size:20})),!1):(e.setState({file:t,visible:!0}),!1)}}}},{key:"renderAvatar",value:function(){var e=this.props,t=e.avatarName,n=e.avatarUrl,r=e.avatarIcon,o=e.avatarSize,a=void 0===o?56:o,i=e.avatarRadius,u=e.customIconSize,l=void 0===u?26:u,s=e.defaultAvatarKey;return r?c.a.createElement("div",{className:"group-avatar",style:{width:a,height:a}},c.a.createElement(p.b,{name:r,width:l,height:l})):t&&!n?c.a.createElement(m.a,{size:a,text:t}):c.a.createElement(d.a,{src:n||f.avatar[s],name:t,size:a,radius:i})}},{key:"render",value:function(){var e=this.props,t=e.tip,n=e.modalTitle,a=e.uploadText,i=e.avatarRadius,u=e.disabled,l=e.onlyAvatar,f={};i&&(f.borderRadius=i+2);var d={borderRadius:i+2||"50%"};return c.a.createElement("div",{className:"logo-uploader clearfix ".concat(this.props.className)},c.a.createElement("div",{className:"logo-uploader-area"},c.a.createElement("div",{className:"avatar",style:f},this.renderAvatar(),c.a.createElement("div",{className:y()({avatarUploadMask:!u}),style:d}),!u&&c.a.createElement(p.b,{name:"avatar-upload",className:y()({avatarUploadIcon:!u}),size:"16"}),!u&&c.a.createElement(o.a.Dragger,this.getUploadProps()))),!u&&!l&&c.a.createElement("div",{className:"logo-uploader-btn"},c.a.createElement(o.a,this.getUploadProps(),c.a.createElement(r.a,null,c.a.createElement(s.a,null),c.a.createElement("span",{className:"text"},c.a.createElement("span",null,a||__("上传头像"))))),c.a.createElement("p",{className:"logo-uploader-tip"},t||c.a.createElement("span",null,__("可以拖动图片到左边头像区域完成上传")))),this.state.visible&&c.a.createElement(T,{title:n,file:this.state.file,visible:this.state.visible,onCancel:this.onCancelModal,onOk:this.handleAvatarUploaded,uploadUrl:this.props.uploadUrl}))}}])&&I(t.prototype,n),i&&I(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.Component);z.propTypes={className:l.a.string,trigger:l.a.string,customIconSize:l.a.number,avatarUrl:l.a.string,defaultAvatarKey:l.a.oneOf(Object.keys(f.avatar)),avatarIcon:l.a.string,avatarSize:l.a.number,avatarRadius:l.a.number,avatarName:l.a.string,tip:l.a.string,modalTitle:l.a.string,uploadText:l.a.string,uploadUrl:l.a.string,onlyAvatar:l.a.bool},z.defaultProps={trigger:"handleUploaded",defaultAvatarKey:"user",onlyAvatar:!1};t.a=z},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";var r=n(14),o=n(57),a=n(58),i=n(203),c=n(66),u=n(72),l=n(18),s=n(0),f=n(55),d=n(40),p=n(402),m=n(1003),h=n.n(m),y=n(70),v=n(715),b=n.n(v);var g=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).menuItems={},e.saveMenuItem=function(t){return function(n){e.menuItems[t]=n}},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.scrollActiveItemToView()}},{key:"componentDidUpdate",value:function(e){!e.visible&&this.props.visible&&this.scrollActiveItemToView()}},{key:"getFieldName",value:function(e){var t=this.props,n=t.fieldNames,r=t.defaultFieldNames;return n[e]||r[e]}},{key:"getOption",value:function(e,t){var n=this.props,o=n.prefixCls,a=n.expandTrigger,i=n.expandIcon,c=n.loadingIcon,u=this.props.onSelect.bind(this,e,t),l={onClick:u,onDoubleClick:this.props.onItemDoubleClick.bind(this,e,t)},f="".concat(o,"-menu-item"),d=null,p=e[this.getFieldName("children")]&&e[this.getFieldName("children")].length>0;(p||!1===e.isLeaf)&&(f+=" ".concat(o,"-menu-item-expand"),e.loading||(d=s.createElement("span",{className:"".concat(o,"-menu-item-expand-icon")},i))),"hover"!==a||!p&&!1!==e.isLeaf||(l={onMouseEnter:this.delayOnSelect.bind(this,u),onMouseLeave:this.delayOnSelect.bind(this),onClick:u}),this.isActiveOption(e,t)&&(f+=" ".concat(o,"-menu-item-active"),l.ref=this.saveMenuItem(t)),e.disabled&&(f+=" ".concat(o,"-menu-item-disabled"));var m=null;e.loading&&(f+=" ".concat(o,"-menu-item-loading"),m=c||null);var h="";return"title"in e?h=e.title:"string"==typeof e[this.getFieldName("label")]&&(h=e[this.getFieldName("label")]),s.createElement("li",Object(r.default)({key:e[this.getFieldName("value")],className:f,title:h},l,{role:"menuitem",onMouseDown:function(e){return e.preventDefault()}}),e[this.getFieldName("label")],d,m)}},{key:"getActiveOptions",value:function(e){var t=this,n=this.props.options,r=e||this.props.activeValue;return b()(n,(function(e,n){return e[t.getFieldName("value")]===r[n]}),{childrenKeyName:this.getFieldName("children")})}},{key:"getShowOptions",value:function(){var e=this,t=this.props.options,n=this.getActiveOptions().map((function(t){return t[e.getFieldName("children")]})).filter((function(e){return!!e&&e.length>0}));return n.unshift(t),n}},{key:"delayOnSelect",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),"function"==typeof e&&(this.delayTimer=window.setTimeout((function(){e(r),t.delayTimer=null}),150))}},{key:"scrollActiveItemToView",value:function(){for(var e=this.getShowOptions().length,t=0;t<e;t++){var n=this.menuItems[t];n&&n.parentElement&&(n.parentElement.scrollTop=n.offsetTop)}}},{key:"isActiveOption",value:function(e,t){var n=this.props.activeValue;return(void 0===n?[]:n)[t]===e[this.getFieldName("value")]}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.dropdownMenuColumnStyle;return s.createElement("div",null,this.getShowOptions().map((function(t,o){return s.createElement("ul",{className:"".concat(n,"-menu"),key:o,style:r},t.map((function(t){return e.getOption(t,o)})))})))}}]),n}(s.Component);g.defaultProps={options:[],value:[],activeValue:[],onSelect:function(){},prefixCls:"rc-cascader-menus",visible:!1,expandTrigger:"click"};var _=g,w={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}}},E=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(o.a)(this,n),(r=t.call(this,e)).setPopupVisible=function(e){var t=r.state.value;"popupVisible"in r.props||r.setState({popupVisible:e}),e&&!r.state.popupVisible&&r.setState({activeValue:t}),r.props.onPopupVisibleChange(e)},r.handleChange=function(e,t,n){var o=t.visible;"keydown"===n.type&&n.keyCode!==y.a.ENTER||(r.props.onChange(e.map((function(e){return e[r.getFieldName("value")]})),e),r.setPopupVisible(o))},r.handlePopupVisibleChange=function(e){r.setPopupVisible(e)},r.handleMenuSelect=function(e,t,n){var o=r.trigger.getRootDomNode();o&&o.focus&&o.focus();var a=r.props,i=a.changeOnSelect,c=a.loadData,u=a.expandTrigger;if(e&&!e.disabled){var l=r.state.activeValue;(l=l.slice(0,t+1))[t]=e[r.getFieldName("value")];var s=r.getActiveOptions(l);if(!1===e.isLeaf&&!e[r.getFieldName("children")]&&c)return i&&r.handleChange(s,{visible:!0},n),r.setState({activeValue:l}),void c(s);var f={};e[r.getFieldName("children")]&&e[r.getFieldName("children")].length?!i||"click"!==n.type&&"keydown"!==n.type||("hover"===u?r.handleChange(s,{visible:!1},n):r.handleChange(s,{visible:!0},n),f.value=l):(r.handleChange(s,{visible:!1},n),f.value=l),f.activeValue=l,("value"in r.props||"keydown"===n.type&&n.keyCode!==y.a.ENTER)&&delete f.value,r.setState(f)}},r.handleItemDoubleClick=function(){r.props.changeOnSelect&&r.setPopupVisible(!1)},r.handleKeyDown=function(e){var t=r.props.children;if(t&&t.props.onKeyDown)t.props.onKeyDown(e);else{var n=Object(d.a)(r.state.activeValue),o=n.length-1<0?0:n.length-1,a=r.getCurrentLevelOptions(),i=a.map((function(e){return e[r.getFieldName("value")]})).indexOf(n[o]);if(e.keyCode===y.a.DOWN||e.keyCode===y.a.UP||e.keyCode===y.a.LEFT||e.keyCode===y.a.RIGHT||e.keyCode===y.a.ENTER||e.keyCode===y.a.SPACE||e.keyCode===y.a.BACKSPACE||e.keyCode===y.a.ESC||e.keyCode===y.a.TAB){if(!r.state.popupVisible&&e.keyCode!==y.a.BACKSPACE&&e.keyCode!==y.a.LEFT&&e.keyCode!==y.a.RIGHT&&e.keyCode!==y.a.ESC&&e.keyCode!==y.a.TAB)return r.setPopupVisible(!0),void(r.props.onKeyDown&&r.props.onKeyDown(e));if(e.keyCode===y.a.DOWN||e.keyCode===y.a.UP){e.preventDefault();var c=i;c=-1!==c?e.keyCode===y.a.DOWN?(c+=1)>=a.length?0:c:(c-=1)<0?a.length-1:c:0,n[o]=a[c][r.getFieldName("value")]}else if(e.keyCode===y.a.LEFT||e.keyCode===y.a.BACKSPACE)e.preventDefault(),n.splice(n.length-1,1);else if(e.keyCode===y.a.RIGHT)e.preventDefault(),a[i]&&a[i][r.getFieldName("children")]&&n.push(a[i][r.getFieldName("children")][0][r.getFieldName("value")]);else if(e.keyCode===y.a.ESC||e.keyCode===y.a.TAB)return r.setPopupVisible(!1),void(r.props.onKeyDown&&r.props.onKeyDown(e));n&&0!==n.length||r.setPopupVisible(!1);var u=r.getActiveOptions(n),l=u[u.length-1];r.handleMenuSelect(l,u.length-1,e),r.props.onKeyDown&&r.props.onKeyDown(e)}}},r.saveTrigger=function(e){r.trigger=e};var a=[];return"value"in e?a=e.value||[]:"defaultValue"in e&&(a=e.defaultValue||[]),h()(!("filedNames"in e),"`filedNames` of Cascader is a typo usage and deprecated, please use `fieldNames` instead."),r.state={popupVisible:e.popupVisible,activeValue:a,value:a,prevProps:e},r.defaultFieldNames={label:"label",value:"value",children:"children"},r}return Object(a.a)(n,[{key:"getPopupDOMNode",value:function(){return this.trigger.getPopupDomNode()}},{key:"getFieldName",value:function(e){var t=this.defaultFieldNames,n=this.props,r=n.fieldNames,o=n.filedNames;return"filedNames"in this.props?o[e]||t[e]:r[e]||t[e]}},{key:"getFieldNames",value:function(){var e=this.props,t=e.fieldNames,n=e.filedNames;return"filedNames"in this.props?n:t}},{key:"getCurrentLevelOptions",value:function(){var e=this,t=this.props.options,n=void 0===t?[]:t,r=this.state.activeValue,o=void 0===r?[]:r,a=b()(n,(function(t,n){return t[e.getFieldName("value")]===o[n]}),{childrenKeyName:this.getFieldName("children")});return a[a.length-2]?a[a.length-2][this.getFieldName("children")]:Object(d.a)(n).filter((function(e){return!e.disabled}))}},{key:"getActiveOptions",value:function(e){var t=this;return b()(this.props.options||[],(function(n,r){return n[t.getFieldName("value")]===e[r]}),{childrenKeyName:this.getFieldName("children")})}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.transitionName,o=e.popupClassName,a=e.options,i=void 0===a?[]:a,c=e.disabled,u=e.builtinPlacements,l=e.popupPlacement,d=e.children,m=e.dropdownRender,h=Object(f.a)(e,["prefixCls","transitionName","popupClassName","options","disabled","builtinPlacements","popupPlacement","children","dropdownRender"]),y=s.createElement("div",null),v="";i&&i.length>0?y=s.createElement(_,Object(r.default)({},this.props,{fieldNames:this.getFieldNames(),defaultFieldNames:this.defaultFieldNames,activeValue:this.state.activeValue,onSelect:this.handleMenuSelect,onItemDoubleClick:this.handleItemDoubleClick,visible:this.state.popupVisible})):v=" ".concat(t,"-menus-empty");var b=y;return m&&(b=m(y)),s.createElement(p.a,Object(r.default)({ref:this.saveTrigger},h,{popupPlacement:l,builtinPlacements:u,popupTransitionName:n,action:c?[]:["click"],popupVisible:!c&&this.state.popupVisible,onPopupVisibleChange:this.handlePopupVisibleChange,prefixCls:"".concat(t,"-menus"),popupClassName:o+v,popup:b}),s.cloneElement(d,{onKeyDown:this.handleKeyDown,tabIndex:c?void 0:0}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r={prevProps:e};return"value"in e&&!function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}((void 0===n?{}:n).value,e.value)&&(r.value=e.value||[],"loadData"in e||(r.activeValue=e.value||[])),"popupVisible"in e&&(r.popupVisible=e.popupVisible),r}}]),n}(s.Component);E.defaultProps={onChange:function(){},onPopupVisibleChange:function(){},disabled:!1,transitionName:"",prefixCls:"rc-cascader",popupClassName:"",popupPlacement:"bottomLeft",builtinPlacements:w,expandTrigger:"click",fieldNames:{label:"label",value:"value",children:"children"},expandIcon:">"};var O=E,x=n(10),j=n.n(x),k=n(126),S=n(154),C=n(348),N=n(254),P=n(1457),T=n(389),A=n(86),L=n(257),I=n(158),R=n(95),D=n(132),M=n(118),F=n(262),B=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},U="__KEEP_FILTERED_OPTION_VALUE";function z(e,t,n){return t.some((function(t){return t[n.label].indexOf(e)>-1}))}function G(e,t,n,r){return t.map((function(t,o){var a=t[r.label],i=a.indexOf(e)>-1?function(e,t,n){return e.split(t).map((function(e,r){return 0===r?e:[s.createElement("span",{className:"".concat(n,"-menu-item-keyword"),key:"seperator"},t),e]}))}(a,e,n):a;return 0===o?i:[" / ",i]}))}function V(e,t,n,r){function o(e){return e[r.label].indexOf(n)>-1}return e.findIndex(o)-t.findIndex(o)}function Y(e){var t=e.fieldNames||{};return{children:t.children||"children",label:t.label||"label",value:t.value||"value"}}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Y(t),o=[],a=r.children;return e.forEach((function(e){var r=n.concat(e);!t.changeOnSelect&&e[a]&&e[a].length||o.push(r),e[a]&&(o=o.concat(q(e[a],t,r)))})),o}var H=function(e){return e.join(" / ")};function W(e,t,n){var r;return r={},Object(l.a)(r,t.value,"ANT_CASCADER_NOT_FOUND"),Object(l.a)(r,t.label,n||e("Cascader")),Object(l.a)(r,"disabled",!0),Object(l.a)(r,"isEmptyNode",!0),r}var K=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).cachedOptions=[],a.setValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];"value"in a.props||a.setState({value:e});var n=a.props.onChange;null==n||n(e,t)},a.saveInput=function(e){a.input=e},a.handleChange=function(e,t){if(a.setState({inputValue:""}),t[0].__IS_FILTERED_OPTION){var n=void 0===t[0][U]?e[0]:t[0][U],r=t[0].path;a.setValue(n,r)}else a.setValue(e,t)},a.handlePopupVisibleChange=function(e){"popupVisible"in a.props||a.setState((function(t){return{popupVisible:e,inputFocused:e,inputValue:e?t.inputValue:""}}));var t=a.props.onPopupVisibleChange;null==t||t(e)},a.handleInputBlur=function(){a.setState({inputFocused:!1})},a.handleInputClick=function(e){var t=a.state,n=t.inputFocused,r=t.popupVisible;(n||r)&&e.stopPropagation()},a.handleKeyDown=function(e){e.keyCode!==y.a.BACKSPACE&&e.keyCode!==y.a.SPACE||e.stopPropagation()},a.handleInputChange=function(e){var t=a.state.popupVisible,n=e.target.value;t||a.handlePopupVisibleChange(!0),a.setState({inputValue:n})},a.clearSelection=function(e){var t=a.state.inputValue;e.preventDefault(),e.stopPropagation(),t?a.setState({inputValue:""}):(a.handlePopupVisibleChange(!1),a.clearSelectionTimeout=setTimeout((function(){a.setValue([])}),200))},a.renderCascader=function(e,t){var n=e.getPopupContainer,o=e.getPrefixCls,c=e.renderEmpty,u=e.direction;return s.createElement(D.b.Consumer,null,(function(e){var f,d,p,m,h=Object(i.a)(a),y=h.props,v=h.state,b=y.prefixCls,g=y.inputPrefixCls,_=y.children,w=y.placeholder,E=void 0===w?t.placeholder||"Please select":w,x=y.size,L=y.disabled,I=y.className,R=y.style,D=y.allowClear,U=y.showSearch,z=void 0!==U&&U,G=y.suffixIcon,V=y.expandIcon,q=y.notFoundContent,H=y.popupClassName,K=y.bordered,$=y.dropdownRender,Q=B(y,["prefixCls","inputPrefixCls","children","placeholder","size","disabled","className","style","allowClear","showSearch","suffixIcon","expandIcon","notFoundContent","popupClassName","bordered","dropdownRender"]),X=x||e,J=v.value,Z=v.inputFocused,ee="rtl"===u,te=o("cascader",b),ne=o("input",g),re=j()((f={},Object(l.a)(f,"".concat(ne,"-lg"),"large"===X),Object(l.a)(f,"".concat(ne,"-sm"),"small"===X),f)),oe=D&&!L&&J.length>0||v.inputValue?s.createElement(S.a,{className:"".concat(te,"-picker-clear"),onClick:a.clearSelection}):null,ae=j()((d={},Object(l.a)(d,"".concat(te,"-picker-arrow"),!0),Object(l.a)(d,"".concat(te,"-picker-arrow-expand"),v.popupVisible),d)),ie=j()("".concat(te,"-picker"),(p={},Object(l.a)(p,"".concat(te,"-picker-rtl"),ee),Object(l.a)(p,"".concat(te,"-picker-with-value"),v.inputValue),Object(l.a)(p,"".concat(te,"-picker-disabled"),L),Object(l.a)(p,"".concat(te,"-picker-").concat(X),!!X),Object(l.a)(p,"".concat(te,"-picker-show-search"),!!z),Object(l.a)(p,"".concat(te,"-picker-focused"),Z),Object(l.a)(p,"".concat(te,"-picker-borderless"),!K),p),I),ce=Object(k.a)(Q,["onChange","options","popupPlacement","transitionName","displayRender","onPopupVisibleChange","changeOnSelect","expandTrigger","popupVisible","getPopupContainer","loadData","filterOption","renderFilteredOption","sortFilteredOption","fieldNames"]),ue=y.options,le=Y(a.props);ue&&ue.length>0?v.inputValue&&(ue=a.generateFilteredOptions(te,c)):ue=[W(c,le,q)],v.popupVisible?a.cachedOptions=ue:ue=a.cachedOptions;var se,fe={},de=1===(ue||[]).length&&ue[0].isEmptyNode;de&&(fe.height="auto"),!1!==z.matchInputWidth&&(v.inputValue||de)&&a.input&&(fe.width=a.input.input.offsetWidth),se=G?Object(M.c)(G,s.createElement("span",{className:"".concat(te,"-picker-arrow")},G),(function(){var e;return{className:j()((e={},Object(l.a)(e,G.props.className,G.props.className),Object(l.a)(e,"".concat(te,"-picker-arrow"),!0),e))}})):s.createElement(C.a,{className:ae});var pe,me=_||s.createElement("span",{style:R,className:ie},s.createElement("span",{className:"".concat(te,"-picker-label")},a.getLabel()),s.createElement(A.a,Object(r.default)({},ce,{tabIndex:-1,ref:a.saveInput,prefixCls:ne,placeholder:J&&J.length>0?void 0:E,className:"".concat(te,"-input ").concat(re),value:v.inputValue,disabled:L,readOnly:!z,autoComplete:ce.autoComplete||"off",onClick:z?a.handleInputClick:void 0,onBlur:z?a.handleInputBlur:void 0,onKeyDown:a.handleKeyDown,onChange:z?a.handleInputChange:void 0})),oe,se);pe=V||(ee?s.createElement(T.a,null):s.createElement(N.a,null));var he=s.createElement("span",{className:"".concat(te,"-menu-item-loading-icon")},s.createElement(P.a,{spin:!0})),ye=y.getPopupContainer||n,ve=Object(k.a)(y,["inputIcon","expandIcon","loadingIcon","bordered","className"]),be=j()(H,(m={},Object(l.a)(m,"".concat(te,"-menu-").concat(u),"rtl"===u),Object(l.a)(m,"".concat(te,"-menu-empty"),1===ue.length&&"ANT_CASCADER_NOT_FOUND"===ue[0].value),m)),ge=o();return s.createElement(O,Object(r.default)({},ve,{prefixCls:te,getPopupContainer:ye,options:ue,value:J,popupVisible:v.popupVisible,onPopupVisibleChange:a.handlePopupVisibleChange,onChange:a.handleChange,dropdownMenuColumnStyle:fe,expandIcon:pe,loadingIcon:he,popupClassName:be,popupPlacement:a.getPopupPlacement(u),dropdownRender:$,transitionName:Object(F.b)(ge,"slide-up",y.transitionName)}),me)}))},a.state={value:e.value||e.defaultValue||[],inputValue:"",inputFocused:!1,popupVisible:e.popupVisible,flattenOptions:e.showSearch?q(e.options,e):void 0,prevProps:e},a}return Object(a.a)(n,[{key:"componentWillUnmount",value:function(){this.clearSelectionTimeout&&clearTimeout(this.clearSelectionTimeout)}},{key:"getLabel",value:function(){var e=this.props,t=e.options,n=e.displayRender,r=void 0===n?H:n,o=Y(this.props),a=this.state.value,i=Array.isArray(a[0])?a[0]:a,c=b()(t,(function(e,t){return e[o.value]===i[t]}),{childrenKeyName:o.children});return r(c.length?c.map((function(e){return e[o.label]})):a,c)}},{key:"generateFilteredOptions",value:function(e,t){var n,r=this,o=this.props,a=o.showSearch,i=o.notFoundContent,c=Y(this.props),u=a.filter,s=void 0===u?z:u,f=a.render,d=void 0===f?G:f,p=a.sort,m=void 0===p?V:p,h=a.limit,y=void 0===h?50:h,v=this.state,b=v.flattenOptions,g=void 0===b?[]:b,_=v.inputValue;if(y>0){n=[];var w=0;g.some((function(e){return s(r.state.inputValue,e,c)&&(n.push(e),w+=1),w>=y}))}else Object(R.a)("number"!=typeof y,"Cascader","'limit' of showSearch should be positive number or false."),n=g.filter((function(e){return s(r.state.inputValue,e,c)}));if((n=n.sort((function(e,t){return m(e,t,_,c)}))).length>0){var E=c.value===c.label?U:c.value;return n.map((function(t){var n;return n={__IS_FILTERED_OPTION:!0,path:t},Object(l.a)(n,E,t.map((function(e){return e[c.value]}))),Object(l.a)(n,c.label,d(_,t,e,c)),Object(l.a)(n,"disabled",t.some((function(e){return!!e.disabled}))),Object(l.a)(n,"isEmptyNode",!0),n}))}return[W(t,c,i)]}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"getPopupPlacement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ltr",t=this.props.popupPlacement;return void 0!==t?t:"rtl"===e?"bottomRight":"bottomLeft"}},{key:"render",value:function(){var e=this;return s.createElement(L.a,null,(function(t){return s.createElement(I.a,null,(function(n){return e.renderCascader(t,n)}))}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r={prevProps:e};return"value"in e&&(r.value=e.value||[]),"popupVisible"in e&&(r.popupVisible=e.popupVisible),e.showSearch&&n.options!==e.options&&(r.flattenOptions=q(e.options,e)),r}}]),n}(s.Component);K.defaultProps={options:[],disabled:!1,allowClear:!0,bordered:!0};t.a=K},,function(e,t,n){},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(41),i=n(28),c=n(0),u=n(10),l=n.n(u),s=n(296),f=n(181),d=n(257),p=n(95),m=n(405),h=n(615),y=c.createContext("default"),v=function(e){var t=e.children,n=e.size;return c.createElement(y.Consumer,null,(function(e){return c.createElement(y.Provider,{value:n||e},t)}))},b=y,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e,t){var n,u,y=c.useContext(b),v=c.useState(1),_=Object(i.a)(v,2),w=_[0],E=_[1],O=c.useState(!1),x=Object(i.a)(O,2),j=x[0],k=x[1],S=c.useState(!0),C=Object(i.a)(S,2),N=C[0],P=C[1],T=c.useRef(),A=c.useRef(),L=Object(f.a)(t,T),I=c.useContext(d.b).getPrefixCls,R=function(){if(A.current&&T.current){var t=A.current.offsetWidth,n=T.current.offsetWidth;if(0!==t&&0!==n){var r=e.gap,o=void 0===r?4:r;2*o<n&&E(n-2*o<t?(n-2*o)/t:1)}}};c.useEffect((function(){k(!0)}),[]),c.useEffect((function(){P(!0),E(1)}),[e.src]),c.useEffect((function(){R()}),[e.gap]);var D=e.prefixCls,M=e.shape,F=e.size,B=e.src,U=e.srcSet,z=e.icon,G=e.className,V=e.alt,Y=e.draggable,q=e.children,H=g(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children"]),W="default"===F?y:F,K=Object(h.a)(),$=c.useMemo((function(){if("object"!==Object(a.a)(W))return{};var e=m.b.find((function(e){return K[e]})),t=W[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:z?t/2:18}:{}}),[K,W]);Object(p.a)(!("string"==typeof z&&z.length>2),"Avatar","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(z,"` at https://ant.design/components/icon"));var Q,X=I("avatar",D),J=l()((n={},Object(o.a)(n,"".concat(X,"-lg"),"large"===W),Object(o.a)(n,"".concat(X,"-sm"),"small"===W),n)),Z=c.isValidElement(B),ee=l()(X,J,(u={},Object(o.a)(u,"".concat(X,"-").concat(M),!!M),Object(o.a)(u,"".concat(X,"-image"),Z||B&&N),Object(o.a)(u,"".concat(X,"-icon"),!!z),u),G),te="number"==typeof W?{width:W,height:W,lineHeight:"".concat(W,"px"),fontSize:z?W/2:18}:{};if("string"==typeof B&&N)Q=c.createElement("img",{src:B,draggable:Y,srcSet:U,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&P(!1)},alt:V});else if(Z)Q=B;else if(z)Q=z;else if(j||1!==w){var ne="scale(".concat(w,") translateX(-50%)"),re={msTransform:ne,WebkitTransform:ne,transform:ne},oe="number"==typeof W?{lineHeight:"".concat(W,"px")}:{};Q=c.createElement(s.a,{onResize:R},c.createElement("span",{className:"".concat(X,"-string"),ref:function(e){A.current=e},style:Object(r.default)(Object(r.default)({},oe),re)},q))}else Q=c.createElement("span",{className:"".concat(X,"-string"),style:{opacity:0},ref:function(e){A.current=e}},q);return delete H.onError,delete H.gap,c.createElement("span",Object(r.default)({},H,{style:Object(r.default)(Object(r.default)(Object(r.default)({},te),$),H.style),className:ee,ref:L}),Q)},w=c.forwardRef(_);w.displayName="Avatar",w.defaultProps={shape:"circle",size:"default"};var E=w,O=n(197),x=n(118),j=n(168),k=function(e){var t=c.useContext(d.b),n=t.getPrefixCls,r=t.direction,a=e.prefixCls,i=e.className,u=void 0===i?"":i,s=e.maxCount,f=e.maxStyle,p=e.size,m=n("avatar-group",a),h=l()(m,Object(o.a)({},"".concat(m,"-rtl"),"rtl"===r),u),y=e.children,b=e.maxPopoverPlacement,g=void 0===b?"top":b,_=Object(O.a)(y).map((function(e,t){return Object(x.a)(e,{key:"avatar-key-".concat(t)})})),w=_.length;if(s&&s<w){var k=_.slice(0,s),S=_.slice(s,w);return k.push(c.createElement(j.a,{key:"avatar-popover-key",content:S,trigger:"hover",placement:g,overlayClassName:"".concat(m,"-popover")},c.createElement(E,{style:f},"+".concat(w-s)))),c.createElement(v,{size:p},c.createElement("div",{className:h,style:e.style},k))}return c.createElement(v,{size:p},c.createElement("div",{className:h,style:e.style},_))},S=E;S.Group=k;t.a=S},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(88),u=n(908),l=n(657),s=n(1362),f=u.a.LiteSearchSelector,d=function(e){var t,n,a={type:e.type,me:e.me},i=Object(r.useMemo)((function(){return l.a.create(a)}),[a]);return null!==(t=e.organization)&&void 0!==t&&t.id&&(n=o.a.createElement(s.a,null)),o.a.createElement(f,{type:e.type,userClassType:"normal",isLiteSearchSelector:!0,searchUser:i.searchUser,getDefaultUsers:e.getDefaultUsers||i.searchUsersByIds,checkValid:i.checkValid,onChange:e.onChange,initialValues:e.initialValues,notFoundContent:n})};d.propTypes={type:i.a.string,onChange:i.a.func,initialValues:i.a.array,getDefaultUsers:i.a.func},t.a=Object(c.d)((function(e){return{organization:e.organization,me:e.me}}))(d)},,function(e,t,n){"use strict";var r=n(18),o=n(41),a=n(14),i=n(0),c=n(228),u=n(10),l=n.n(u),s=n(257),f=n(118),d=n(28);function p(e){var t,n=e.prefixCls,r=e.value,o=e.current,a=e.offset,c=void 0===a?0:a;return c&&(t={position:"absolute",top:"".concat(c,"00%"),left:0}),i.createElement("p",{style:t,className:l()("".concat(n,"-only-unit"),{current:o})},r)}function m(e,t,n){for(var r=e,o=0;(r+10)%10!==t;)r+=n,o+=n;return o}function h(e){var t,n,r=e.prefixCls,o=e.count,c=e.value,u=Number(c),l=Math.abs(o),s=i.useState(u),f=Object(d.a)(s,2),h=f[0],y=f[1],v=i.useState(l),b=Object(d.a)(v,2),g=b[0],_=b[1],w=function(){y(u),_(l)};if(i.useEffect((function(){var e=setTimeout((function(){w()}),1e3);return function(){clearTimeout(e)}}),[u]),h===u||Number.isNaN(u)||Number.isNaN(h))t=[i.createElement(p,Object(a.default)({},e,{key:u,current:!0}))],n={transition:"none"};else{t=[];for(var E=u+10,O=[],x=u;x<=E;x+=1)O.push(x);var j=O.findIndex((function(e){return e%10===h}));t=O.map((function(t,n){var r=t%10;return i.createElement(p,Object(a.default)({},e,{key:t,value:r,offset:n-j,current:n===j}))})),n={transform:"translateY(".concat(-m(h,u,g<l?1:-1),"00%)")}}return i.createElement("span",{className:"".concat(r,"-only"),style:n,onTransitionEnd:w},t)}var y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},v=function(e){var t=e.prefixCls,n=e.count,r=e.className,o=e.motionClassName,c=e.style,u=e.title,d=e.show,p=e.component,m=void 0===p?"sup":p,v=e.children,b=y(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),g=(0,i.useContext(s.b).getPrefixCls)("scroll-number",t),_=Object(a.default)(Object(a.default)({},b),{"data-show":d,style:c,className:l()(g,r,o),title:u}),w=n;if(n&&Number(n)%1==0){var E=String(n).split("");w=E.map((function(e,t){return i.createElement(h,{prefixCls:g,count:Number(n),value:e,key:E.length-t})}))}return c&&c.borderColor&&(_.style=Object(a.default)(Object(a.default)({},c),{boxShadow:"0 0 0 1px ".concat(c.borderColor," inset")})),v?Object(f.a)(v,(function(e){return{className:l()("".concat(g,"-custom-component"),null==e?void 0:e.className,o)}})):i.createElement(m,_,w)},b=n(962);function g(e){return-1!==b.a.indexOf(e)}var _=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},w=function(e){var t,n,u=e.prefixCls,d=e.scrollNumberPrefixCls,p=e.children,m=e.status,h=e.text,y=e.color,b=e.count,w=void 0===b?null:b,E=e.overflowCount,O=void 0===E?99:E,x=e.dot,j=void 0!==x&&x,k=e.size,S=void 0===k?"default":k,C=e.title,N=e.offset,P=e.style,T=e.className,A=e.showZero,L=void 0!==A&&A,I=_(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),R=i.useContext(s.b),D=R.getPrefixCls,M=R.direction,F=D("badge",u),B=w>O?"".concat(O,"+"):w,U=null!=m||null!=y,z="0"===B||0===B,G=j&&!z||U,V=G?"":B,Y=Object(i.useMemo)((function(){return(null==V||""===V||z&&!L)&&!G}),[V,z,L,G]),q=Object(i.useRef)(w);Y||(q.current=w);var H=q.current,W=Object(i.useRef)(V);Y||(W.current=V);var K=W.current,$=Object(i.useRef)(G);Y||($.current=G);var Q=Object(i.useMemo)((function(){if(!N)return Object(a.default)({},P);var e={marginTop:N[1]};return"rtl"===M?e.left=parseInt(N[0],10):e.right=-parseInt(N[0],10),Object(a.default)(Object(a.default)({},e),P)}),[M,N,P]),X=null!=C?C:"string"==typeof H||"number"==typeof H?H:void 0,J=Y||!h?null:i.createElement("span",{className:"".concat(F,"-status-text")},h),Z=H&&"object"===Object(o.a)(H)?Object(f.a)(H,(function(e){return{style:Object(a.default)(Object(a.default)({},Q),e.style)}})):void 0,ee=l()((t={},Object(r.a)(t,"".concat(F,"-status-dot"),U),Object(r.a)(t,"".concat(F,"-status-").concat(m),!!m),Object(r.a)(t,"".concat(F,"-status-").concat(y),g(y)),t)),te={};y&&!g(y)&&(te.background=y);var ne=l()(F,(n={},Object(r.a)(n,"".concat(F,"-status"),U),Object(r.a)(n,"".concat(F,"-not-a-wrapper"),!p),Object(r.a)(n,"".concat(F,"-rtl"),"rtl"===M),n),T);if(!p&&U){var re=Q.color;return i.createElement("span",Object(a.default)({},I,{className:ne,style:Q}),i.createElement("span",{className:ee,style:te}),i.createElement("span",{style:{color:re},className:"".concat(F,"-status-text")},h))}return i.createElement("span",Object(a.default)({},I,{className:ne}),p,i.createElement(c.b,{visible:!Y,motionName:"".concat(F,"-zoom"),motionAppear:!1},(function(e){var t,n=e.className,o=D("scroll-number",d),c=$.current,u=l()((t={},Object(r.a)(t,"".concat(F,"-dot"),c),Object(r.a)(t,"".concat(F,"-count"),!c),Object(r.a)(t,"".concat(F,"-count-sm"),"small"===S),Object(r.a)(t,"".concat(F,"-multiple-words"),!c&&K&&K.toString().length>1),Object(r.a)(t,"".concat(F,"-status-").concat(m),!!m),Object(r.a)(t,"".concat(F,"-status-").concat(y),g(y)),t)),s=Object(a.default)({},Q);return y&&!g(y)&&((s=s||{}).background=y),i.createElement(v,{prefixCls:o,show:!Y,motionClassName:n,className:u,count:K,title:X,style:s,key:"scrollNumber"},Z)})),J)};w.Ribbon=function(e){var t,n=e.className,o=e.prefixCls,c=e.style,u=e.color,f=e.children,d=e.text,p=e.placement,m=void 0===p?"end":p,h=i.useContext(s.b),y=h.getPrefixCls,v=h.direction,b=y("ribbon",o),_=g(u),w=l()(b,"".concat(b,"-placement-").concat(m),(t={},Object(r.a)(t,"".concat(b,"-rtl"),"rtl"===v),Object(r.a)(t,"".concat(b,"-color-").concat(u),_),t),n),E={},O={};return u&&!_&&(E.background=u,O.color=u),i.createElement("div",{className:"".concat(b,"-wrapper")},f,i.createElement("div",{className:w,style:Object(a.default)(Object(a.default)({},E),c)},i.createElement("span",{className:"".concat(b,"-text")},d),i.createElement("div",{className:"".concat(b,"-corner"),style:O})))};t.a=w},function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(28),i=n(0),c=n(55),u=n(57),l=n(58),s=n(66),f=n(72),d=n(1026),p=n(11),m=n(203),h=n(10),y=n.n(h),v=n(385),b=n(70),g=n(126);var _={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},w=Object.keys(_).filter((function(e){if("undefined"==typeof document)return!1;var t=document.getElementsByTagName("html")[0];return e in(t?t.style:{})}))[0],E=_[w];function O(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),n)}function x(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.attachEvent&&e.detachEvent("on".concat(t),n)}var j=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},k=!("undefined"!=typeof window&&window.document&&window.document.createElement),S=function e(t,n,r,o){if(!n||n===document||n instanceof Document)return!1;if(n===t.parentNode)return!0;var a=Math.max(Math.abs(r),Math.abs(o))===Math.abs(o),i=Math.max(Math.abs(r),Math.abs(o))===Math.abs(r),c=n.scrollHeight-n.clientHeight,u=n.scrollWidth-n.clientWidth,l=document.defaultView.getComputedStyle(n),s="auto"===l.overflowY||"scroll"===l.overflowY,f="auto"===l.overflowX||"scroll"===l.overflowX,d=c&&s,p=u&&f;return!!(a&&(!d||d&&(n.scrollTop>=c&&o<0||n.scrollTop<=0&&o>0))||i&&(!p||p&&(n.scrollLeft>=u&&r<0||n.scrollLeft<=0&&r>0)))&&e(t,n.parentNode,r,o)},C={},N=function(e){Object(s.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).domFocus=function(){r.dom&&r.dom.focus()},r.removeStartHandler=function(e){e.touches.length>1||(r.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},r.removeMoveHandler=function(e){if(!(e.changedTouches.length>1)){var t=e.currentTarget,n=e.changedTouches[0].clientX-r.startPos.x,o=e.changedTouches[0].clientY-r.startPos.y;(t===r.maskDom||t===r.handlerDom||t===r.contentDom&&S(t,e.target,n,o))&&e.cancelable&&e.preventDefault()}},r.transitionEnd=function(e){var t=e.target;x(t,E,r.transitionEnd),t.style.transition=""},r.onKeyDown=function(e){if(e.keyCode===b.a.ESC){var t=r.props.onClose;e.stopPropagation(),t&&t(e)}},r.onWrapperTransitionEnd=function(e){var t=r.props,n=t.open,o=t.afterVisibleChange;e.target===r.contentWrapper&&e.propertyName.match(/transform$/)&&(r.dom.style.transition="",!n&&r.getCurrentDrawerSome()&&(document.body.style.overflowX="",r.maskDom&&(r.maskDom.style.left="",r.maskDom.style.width="")),o&&o(!!n))},r.openLevelTransition=function(){var e=r.props,t=e.open,n=e.width,o=e.height,a=r.getHorizontalBoolAndPlacementName(),i=a.isHorizontal,c=a.placementName,u=r.contentDom?r.contentDom.getBoundingClientRect()[i?"width":"height"]:0,l=(i?n:o)||u;r.setLevelAndScrolling(t,c,l)},r.setLevelTransform=function(e,t,n,o){var a=r.props,i=a.placement,c=a.levelMove,u=a.duration,l=a.ease,s=a.showMask;r.levelDom.forEach((function(a){a.style.transition="transform ".concat(u," ").concat(l),O(a,E,r.transitionEnd);var f,d,p,m=e?n:0;if(c){var h=(d={target:a,open:e},p="function"==typeof(f=c)?f(d):f,Array.isArray(p)?2===p.length?p:[p[0],p[1]]:[p]);m=e?h[0]:h[1]||0}var y="number"==typeof m?"".concat(m,"px"):m,v="left"===i||"top"===i?y:"-".concat(y);v=s&&"right"===i&&o?"calc(".concat(v," + ").concat(o,"px)"):v,a.style.transform=m?"".concat(t,"(").concat(v,")"):""}))},r.setLevelAndScrolling=function(e,t,n){var o=r.props.onChange;if(!k){var a=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?Object(v.a)(!0):0;r.setLevelTransform(e,t,n,a),r.toggleScrollingToDrawerAndBody(a)}o&&o(e)},r.toggleScrollingToDrawerAndBody=function(e){var t=r.props,n=t.getContainer,o=t.showMask,a=t.open,i=n&&n();if(i&&i.parentNode===document.body&&o){var c=["touchstart"],u=[document.body,r.maskDom,r.handlerDom,r.contentDom];a&&"hidden"!==document.body.style.overflow?(e&&r.addScrollingEffect(e),document.body.style.touchAction="none",u.forEach((function(e,t){e&&O(e,c[t]||"touchmove",t?r.removeMoveHandler:r.removeStartHandler,r.passive)}))):r.getCurrentDrawerSome()&&(document.body.style.touchAction="",e&&r.remScrollingEffect(e),u.forEach((function(e,t){e&&x(e,c[t]||"touchmove",t?r.removeMoveHandler:r.removeStartHandler,r.passive)})))}},r.addScrollingEffect=function(e){var t=r.props,n=t.placement,o=t.duration,a=t.ease,i="width ".concat(o," ").concat(a),c="transform ".concat(o," ").concat(a);switch(r.dom.style.transition="none",n){case"right":r.dom.style.transform="translateX(-".concat(e,"px)");break;case"top":case"bottom":r.dom.style.width="calc(100% - ".concat(e,"px)"),r.dom.style.transform="translateZ(0)"}clearTimeout(r.timeout),r.timeout=setTimeout((function(){r.dom&&(r.dom.style.transition="".concat(c,",").concat(i),r.dom.style.width="",r.dom.style.transform="")}))},r.remScrollingEffect=function(e){var t,n=r.props,o=n.placement,a=n.duration,i=n.ease;w&&(document.body.style.overflowX="hidden"),r.dom.style.transition="none";var c="width ".concat(a," ").concat(i),u="transform ".concat(a," ").concat(i);switch(o){case"left":r.dom.style.width="100%",c="width 0s ".concat(i," ").concat(a);break;case"right":r.dom.style.transform="translateX(".concat(e,"px)"),r.dom.style.width="100%",c="width 0s ".concat(i," ").concat(a),r.maskDom&&(r.maskDom.style.left="-".concat(e,"px"),r.maskDom.style.width="calc(100% + ".concat(e,"px)"));break;case"top":case"bottom":r.dom.style.width="calc(100% + ".concat(e,"px)"),r.dom.style.height="100%",r.dom.style.transform="translateZ(0)",t="height 0s ".concat(i," ").concat(a)}clearTimeout(r.timeout),r.timeout=setTimeout((function(){r.dom&&(r.dom.style.transition="".concat(u,",").concat(t?"".concat(t,","):"").concat(c),r.dom.style.transform="",r.dom.style.width="",r.dom.style.height="")}))},r.getCurrentDrawerSome=function(){return!Object.keys(C).some((function(e){return C[e]}))},r.getLevelDom=function(e){var t=e.level,n=e.getContainer;if(!k){var o,a=n&&n(),i=a?a.parentNode:null;if(r.levelDom=[],"all"===t)(i?Array.prototype.slice.call(i.children):[]).forEach((function(e){"SCRIPT"!==e.nodeName&&"STYLE"!==e.nodeName&&"LINK"!==e.nodeName&&e!==a&&r.levelDom.push(e)}));else t&&(o=t,Array.isArray(o)?o:[o]).forEach((function(e){document.querySelectorAll(e).forEach((function(e){r.levelDom.push(e)}))}))}},r.getHorizontalBoolAndPlacementName=function(){var e=r.props.placement,t="left"===e||"right"===e;return{isHorizontal:t,placementName:"translate".concat(t?"X":"Y")}},r.state={_self:Object(m.a)(r)},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(!k){var t=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return t=!0,null}}))}catch(u){}this.passive=!!t&&{passive:!1}}var n,r=this.props,o=r.open,a=r.getContainer,i=r.showMask,c=a&&a();(this.drawerId="drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",Math.round(9*Math.random()).toString())).toString(16)),this.getLevelDom(this.props),o)&&(c&&c.parentNode===document.body&&(C[this.drawerId]=o),this.openLevelTransition(),this.forceUpdate((function(){e.domFocus()})),i&&(null===(n=this.props.scrollLocker)||void 0===n||n.lock()))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.open,r=t.getContainer,o=t.scrollLocker,a=t.showMask,i=r&&r();n!==e.open&&(i&&i.parentNode===document.body&&(C[this.drawerId]=!!n),this.openLevelTransition(),n?(this.domFocus(),a&&(null==o||o.lock())):null==o||o.unLock())}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.open,n=e.scrollLocker;delete C[this.drawerId],t&&(this.setLevelTransform(!1),document.body.style.touchAction=""),null==n||n.unLock()}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.className,u=n.children,l=n.style,s=n.width,f=n.height,d=(n.defaultOpen,n.open),m=n.prefixCls,h=n.placement,v=(n.level,n.levelMove,n.ease,n.duration,n.getContainer,n.handler),b=(n.onChange,n.afterVisibleChange,n.showMask),_=n.maskClosable,w=n.maskStyle,E=n.onClose,O=n.onHandleClick,x=n.keyboard,k=(n.getOpenCount,n.scrollLocker,n.contentWrapperStyle),S=Object(c.a)(n,["className","children","style","width","height","defaultOpen","open","prefixCls","placement","level","levelMove","ease","duration","getContainer","handler","onChange","afterVisibleChange","showMask","maskClosable","maskStyle","onClose","onHandleClick","keyboard","getOpenCount","scrollLocker","contentWrapperStyle"]),C=!!this.dom&&d,N=y()(m,(e={},Object(r.a)(e,"".concat(m,"-").concat(h),!0),Object(r.a)(e,"".concat(m,"-open"),C),Object(r.a)(e,a||"",!!a),Object(r.a)(e,"no-mask",!b),e)),P=this.getHorizontalBoolAndPlacementName().placementName,T="left"===h||"top"===h?"-100%":"100%",A=C?"":"".concat(P,"(").concat(T,")"),L=v&&i.cloneElement(v,{onClick:function(e){v.props.onClick&&v.props.onClick(),O&&O(e)},ref:function(e){t.handlerDom=e}});return i.createElement("div",Object(o.default)({},Object(g.a)(S,["switchScrollingEffect"]),{tabIndex:-1,className:N,style:l,ref:function(e){t.dom=e},onKeyDown:C&&x?this.onKeyDown:void 0,onTransitionEnd:this.onWrapperTransitionEnd}),b&&i.createElement("div",{className:"".concat(m,"-mask"),onClick:_?E:void 0,style:w,ref:function(e){t.maskDom=e}}),i.createElement("div",{className:"".concat(m,"-content-wrapper"),style:Object(p.a)({transform:A,msTransform:A,width:j(s)?"".concat(s,"px"):s,height:j(f)?"".concat(f,"px"):f},k),ref:function(e){t.contentWrapper=e}},i.createElement("div",{className:"".concat(m,"-content"),ref:function(e){t.contentDom=e},onTouchStart:C&&b?this.removeStartHandler:void 0,onTouchMove:C&&b?this.removeMoveHandler:void 0},u),L))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t._self,o={prevProps:e};if(void 0!==n){var a=e.placement,i=e.level;a!==n.placement&&(r.contentDom=null),i!==n.level&&r.getLevelDom(e)}return o}}]),n}(i.Component),P=function(e){Object(s.a)(n,e);var t=Object(f.a)(n);function n(e){var r;Object(u.a)(this,n),(r=t.call(this,e)).onHandleClick=function(e){var t=r.props,n=t.onHandleClick,o=t.open;if(n&&n(e),void 0===o){var a=r.state.open;r.setState({open:!a})}},r.onClose=function(e){var t=r.props,n=t.onClose,o=t.open;n&&n(e),void 0===o&&r.setState({open:!1})};var o=void 0!==e.open?e.open:!!e.defaultOpen;return r.state={open:o},"onMaskClick"in e&&console.warn("`onMaskClick` are removed, please use `onClose` instead."),r}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.defaultOpen,t.getContainer),r=t.wrapperClassName,a=t.forceRender,u=t.handler,l=Object(c.a)(t,["defaultOpen","getContainer","wrapperClassName","forceRender","handler"]),s=this.state.open;if(!n)return i.createElement("div",{className:r,ref:function(t){e.dom=t}},i.createElement(N,Object(o.default)({},l,{open:s,handler:u,getContainer:function(){return e.dom},onClose:this.onClose,onHandleClick:this.onHandleClick})));var f=!!u||a;return i.createElement(d.a,{visible:s,forceRender:f,getContainer:n,wrapperClassName:r},(function(t){var n=t.visible,r=t.afterClose,a=Object(c.a)(t,["visible","afterClose"]);return i.createElement(N,Object(o.default)({},l,a,{open:void 0!==n?n:s,afterVisibleChange:void 0!==r?r:l.afterVisibleChange,handler:u,onClose:e.onClose,onHandleClick:e.onHandleClick}))}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r={prevProps:e};return void 0!==n&&e.open!==n.open&&(r.open=e.open),r}}]),n}(i.Component);P.defaultProps={prefixCls:"drawer",placement:"left",getContainer:"body",defaultOpen:!1,level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",onChange:function(){},afterVisibleChange:function(){},handler:i.createElement("div",{className:"drawer-handle"},i.createElement("i",{className:"drawer-handle-icon"})),showMask:!0,maskClosable:!0,maskStyle:{},wrapperClassName:"",className:"",keyboard:!0,forceRender:!1};var T=P,A=n(261),L=n(257),I=n(303),R=n(639),D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},M=i.createContext(null),F=(Object(I.a)("top","right","bottom","left"),{distance:180}),B=i.forwardRef((function(e,t){var n=e.width,c=void 0===n?256:n,u=e.height,l=void 0===u?256:u,s=e.closable,f=void 0===s||s,d=e.placement,p=void 0===d?"right":d,m=e.maskClosable,h=void 0===m||m,b=e.mask,g=void 0===b||b,_=e.level,w=void 0===_?null:_,E=e.keyboard,O=void 0===E||E,x=e.push,j=void 0===x?F:x,k=e.closeIcon,S=void 0===k?i.createElement(A.a,null):k,C=e.bodyStyle,N=e.drawerStyle,P=e.prefixCls,L=e.className,I=e.direction,B=e.visible,U=e.children,z=e.zIndex,G=e.destroyOnClose,V=e.style,Y=e.title,q=e.headerStyle,H=e.onClose,W=e.footer,K=e.footerStyle,$=D(e,["width","height","closable","placement","maskClosable","mask","level","keyboard","push","closeIcon","bodyStyle","drawerStyle","prefixCls","className","direction","visible","children","zIndex","destroyOnClose","style","title","headerStyle","onClose","footer","footerStyle"]),Q=Object(R.a)(),X=i.useState(!1),J=Object(a.a)(X,2),Z=J[0],ee=J[1],te=i.useContext(M),ne=i.useRef(!1);i.useEffect((function(){return B&&te&&te.push(),function(){te&&te.pull()}}),[]),i.useEffect((function(){te&&(B?te.push():te.pull())}),[B]);var re=i.useMemo((function(){return{push:function(){j&&ee(!0)},pull:function(){j&&ee(!1)}}}),[j]);i.useImperativeHandle(t,(function(){return re}),[re]);var oe=G&&!B,ae=function(){oe&&(B||(ne.current=!0,Q()))},ie=function(){if(!B&&!g)return{};var e={};return"left"===p||"right"===p?e.width=c:e.height=l,e};function ce(){if(!Y&&!f)return null;var e="".concat(P,Y?"-header":"-header-no-title");return i.createElement("div",{className:e,style:q},Y&&i.createElement("div",{className:"".concat(P,"-title")},Y),f&&f&&i.createElement("button",{type:"button",onClick:H,"aria-label":"Close",className:"".concat(P,"-close"),style:{"--scroll-bar":"".concat(Object(v.a)(),"px")}},S))}var ue=y()(Object(r.a)({"no-mask":!g},"".concat(P,"-rtl"),"rtl"===I),L),le=g?ie():{};return i.createElement(M.Provider,{value:re},i.createElement(T,Object(o.default)({handler:!1},Object(o.default)({placement:p,prefixCls:P,maskClosable:h,level:w,keyboard:O,children:U,onClose:H},$),le,{open:B,showMask:g,style:function(){var e,t,n=g?{}:ie();return Object(o.default)(Object(o.default)({zIndex:z,transform:Z?(e=p,t="boolean"==typeof j?j?F.distance:0:j.distance,t=parseFloat(String(t||0)),"left"===e||"right"===e?"translateX(".concat("left"===e?t:-t,"px)"):"top"===e||"bottom"===e?"translateY(".concat("top"===e?t:-t,"px)"):void 0):void 0},n),V)}(),className:ue}),function(){if(ne.current&&!B)return null;ne.current=!1;var e={};return oe&&(e.opacity=0,e.transition="opacity .3s"),i.createElement("div",{className:"".concat(P,"-wrapper-body"),style:Object(o.default)(Object(o.default)({},e),N),onTransitionEnd:ae},ce(),i.createElement("div",{className:"".concat(P,"-body"),style:C},U),function(){if(!W)return null;var e="".concat(P,"-footer");return i.createElement("div",{className:e,style:K},W)}())}()))}));B.displayName="Drawer";var U=i.forwardRef((function(e,t){var n=e.prefixCls,r=e.getContainer,a=i.useContext(L.b),c=a.getPopupContainer,u=a.getPrefixCls,l=a.direction,s=u("drawer",n),f=void 0===r&&c?function(){return c(document.body)}:r;return i.createElement(B,Object(o.default)({},e,{ref:t,prefixCls:s,getContainer:f,direction:l}))}));U.displayName="DrawerWrapper";t.a=U},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(28),i=n(0),c=n(228),u=n(251),l=n(163),s=n(10),f=n.n(s),d=n(126),p=n(1466),m=n(1217),h=n(257),y=n(1216),v=n(978),b=n(118),g=function(e){var t=Object(l.a)(!1,{value:e.visible}),n=Object(a.a)(t,2),s=n[0],g=n[1],_=i.createRef(),w=i.useRef(),E=function(){return _.current&&_.current.ownerDocument?_.current.ownerDocument:window},O=Object(m.a)((function(t){var n=e.visibilityHeight,r=Object(y.a)(t.target,!0);g(r>n)}));i.useEffect((function(){var t;return t=(e.target||E)(),w.current=Object(u.a)(t,"scroll",(function(e){O(e)})),O({target:t}),function(){w.current&&w.current.remove(),O.cancel()}}),[e.target]);var x=i.useContext(h.b),j=x.getPrefixCls,k=x.direction,S=e.prefixCls,C=e.className,N=void 0===C?"":C,P=j("back-top",S),T=j(),A=f()(P,Object(o.a)({},"".concat(P,"-rtl"),"rtl"===k),N),L=Object(d.a)(e,["prefixCls","className","children","visibilityHeight","target","visible"]);return i.createElement("div",Object(r.default)({},L,{className:A,onClick:function(t){var n=e.onClick,r=e.target,o=e.duration,a=void 0===o?450:o;Object(v.a)(0,{getContainer:r||E,duration:a}),"function"==typeof n&&n(t)},ref:_}),function(t){var n=t.prefixCls,r=t.rootPrefixCls,o=e.children,a=i.createElement("div",{className:"".concat(n,"-content")},i.createElement("div",{className:"".concat(n,"-icon")},i.createElement(p.a,null)));return i.createElement(c.b,{visible:s,motionName:"".concat(r,"-fade"),removeOnLeave:!0},(function(e){var t=e.className,n=o||a;return i.createElement("div",null,Object(b.a)(n,(function(e){var n=e.className;return{className:f()(t,n)}})))}))}({prefixCls:P,rootPrefixCls:T}))};g.defaultProps={visibilityHeight:400},t.a=i.memo(g)},,,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(2771);function i(){}i.prototype=Object.create(r.Component.prototype),i.displayName="DocumentTitle",i.propTypes={title:o.string.isRequired},i.prototype.render=function(){return this.props.children?r.Children.only(this.props.children):null},e.exports=a((function(e){var t=e[e.length-1];if(t)return t.title}),(function(e){var t=e||"";t!==document.title&&(document.title=t)}))(i)},function(e,t,n){"use strict";var r=n(232),o=n.n(r),a=n(508),i=n.n(a),c=n(579),u=n.n(c),l=n(648),s=n.n(l),f=n(894),d=n.n(f),p=n(895),m=n.n(p),h=n(0),y=n.n(h),v=n(2),b=n.n(v),g=n(1331);function _(e){var t=[];return y.a.Children.forEach(e,(function(e){t.push(e)})),t}function w(e,t){var n=null;return e&&e.forEach((function(e){n||e&&e.key===t&&(n=e)})),n}function E(e,t,n){var r=null;return e&&e.forEach((function(e){if(e&&e.key===t&&e.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=e}})),r}var O=n(39),x=n.n(O),j=n(1315),k={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}},S={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},C=function(e){function t(){return u()(this,t),d()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m()(t,e),s()(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){k.isEnterSupported(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){k.isAppearSupported(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){k.isLeaveSupported(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var n=this,r=x.a.findDOMNode(this),o=this.props,a=o.transitionName,i="object"==typeof a;this.stop();var c=function(){n.stopper=null,t()};if((j.b||!o.animation[e])&&a&&o[S[e]]){var u=i?a[e]:a+"-"+e,l=u+"-active";i&&a[e+"Active"]&&(l=a[e+"Active"]),this.stopper=Object(j.a)(r,{name:u,active:l},c)}else this.stopper=o.animation[e](r,c)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(y.a.Component);C.propTypes={children:b.a.any,animation:b.a.any,transitionName:b.a.any};var N=C,P="rc_animate_"+Date.now();function T(e){var t=e.children;return y.a.isValidElement(t)&&!t.key?y.a.cloneElement(t,{key:P}):t}function A(){}var L=function(e){function t(e){u()(this,t);var n=d()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return I.call(n),n.currentlyAnimatingKeys={},n.keysToEnter=[],n.keysToLeave=[],n.state={children:_(T(e))},n.childrenRefs={},n}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter((function(e){return!!e.props[t]}))),n.forEach((function(t){t&&e.performAppear(t.key)}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.nextProps=e;var n=_(T(e)),r=this.props;r.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach((function(e){t.stop(e)}));var o,a,c,u,l=r.showProp,s=this.currentlyAnimatingKeys,f=r.exclusive?_(T(r)):this.state.children,d=[];l?(f.forEach((function(e){var t=e&&w(n,e.key),r=void 0;(r=t&&t.props[l]||!e.props[l]?t:y.a.cloneElement(t||e,i()({},l,!0)))&&d.push(r)})),n.forEach((function(e){e&&w(f,e.key)||d.push(e)}))):(o=n,a=[],c={},u=[],f.forEach((function(e){e&&w(o,e.key)?u.length&&(c[e.key]=u,u=[]):u.push(e)})),o.forEach((function(e){e&&Object.prototype.hasOwnProperty.call(c,e.key)&&(a=a.concat(c[e.key])),a.push(e)})),d=a=a.concat(u)),this.setState({children:d}),n.forEach((function(e){var n=e&&e.key;if(!e||!s[n]){var r=e&&w(f,n);if(l){var o=e.props[l];if(r)!E(f,n,l)&&o&&t.keysToEnter.push(n);else o&&t.keysToEnter.push(n)}else r||t.keysToEnter.push(n)}})),f.forEach((function(e){var r=e&&e.key;if(!e||!s[r]){var o=e&&w(n,r);if(l){var a=e.props[l];if(o)!E(n,r,l)&&a&&t.keysToLeave.push(r);else a&&t.keysToLeave.push(r)}else o||t.keysToLeave.push(r)}}))}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var n=this.props.showProp;return n?E(e,t,n):w(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var e=this,t=this.props;this.nextProps=t;var n=this.state.children,r=null;n&&(r=n.map((function(n){if(null==n)return n;if(!n.key)throw new Error("must set key for <rc-animate> children");return y.a.createElement(N,{key:n.key,ref:function(t){e.childrenRefs[n.key]=t},animation:t.animation,transitionName:t.transitionName,transitionEnter:t.transitionEnter,transitionAppear:t.transitionAppear,transitionLeave:t.transitionLeave},n)})));var a=t.component;if(a){var i=t;return"string"==typeof a&&(i=o()({className:t.className,style:t.style},t.componentProps)),y.a.createElement(a,i,r)}return r[0]||null}}]),t}(y.a.Component);L.isAnimate=!0,L.propTypes={className:b.a.string,style:b.a.object,component:b.a.any,componentProps:b.a.object,animation:b.a.object,transitionName:b.a.oneOfType([b.a.string,b.a.object]),transitionEnter:b.a.bool,transitionAppear:b.a.bool,exclusive:b.a.bool,transitionLeave:b.a.bool,onEnd:b.a.func,onEnter:b.a.func,onLeave:b.a.func,onAppear:b.a.func,showProp:b.a.string,children:b.a.node},L.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:A,onEnter:A,onLeave:A,onAppear:A};var I=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,n){var r=e.props;if(delete e.currentlyAnimatingKeys[t],!r.exclusive||r===e.nextProps){var o=_(T(r));e.isValidChildByKey(o,t)?"appear"===n?k.allowAppearCallback(r)&&(r.onAppear(t),r.onEnd(t,!0)):k.allowEnterCallback(r)&&(r.onEnter(t),r.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var n=e.props;if(delete e.currentlyAnimatingKeys[t],!n.exclusive||n===e.nextProps){var r,o,a,i,c=_(T(n));if(e.isValidChildByKey(c,t))e.performEnter(t);else{var u=function(){k.allowLeaveCallback(n)&&(n.onLeave(t),n.onEnd(t,!1))};r=e.state.children,o=c,a=n.showProp,(i=r.length===o.length)&&r.forEach((function(e,t){var n=o[t];e&&n&&(e&&!n||!e&&n||e.key!==n.key||a&&e.props[a]!==n.props[a])&&(i=!1)})),i?u():e.setState({children:c},u)}}}};t.a=Object(g.a)(L)},,,function(e,t,n){var r=n(2205),o=n(2748),a=n(1006);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},,function(e,t,n){var r=n(1011),o=n(674),a=n(1178),i=n(958),c=o((function(e){return a(r(e,1,i,!0))}));e.exports=c},function(e,t,n){var r=n(671),o=n(558);e.exports=function(e){return!0===e||!1===e||o(e)&&"[object Boolean]"==r(e)}},function(e,t,n){"use strict";var r=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(107)),a=n(675),i=r(n(2057)),c=r(n(2058)),u=r(n(2059)),l=r(n(2060)),s=r(n(2061)),f=r(n(984));o.default.extend(f.default),o.default.extend(s.default),o.default.extend(i.default),o.default.extend(c.default),o.default.extend(u.default),o.default.extend(l.default),o.default.extend((function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=(e||"").replace("Wo","wo");return r.bind(this)(t)}}));var d={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},p=function(e){return d[e]||e.split("_")[0]},m=function(){(0,a.noteOnce)(!1,"Not match any format. Please help to fire a issue about this.")},h={getNow:function(){return(0,o.default)()},getFixedDate:function(e){return(0,o.default)(e,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var t=e.locale("en");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return(0,o.default)().locale(p(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.locale(p(e)).weekday(0)},getWeek:function(e,t){return t.locale(p(e)).week()},getShortWeekDays:function(e){return(0,o.default)().locale(p(e)).localeData().weekdaysMin()},getShortMonths:function(e){return(0,o.default)().locale(p(e)).localeData().monthsShort()},format:function(e,t,n){return t.locale(p(e)).format(n)},parse:function(e,t,n){for(var r=p(e),a=0;a<n.length;a+=1){var i=n[a],c=t;if(i.includes("wo")||i.includes("Wo")){for(var u=c.split("-")[0],l=c.split("-")[1],s=(0,o.default)(u,"YYYY").startOf("year").locale(r),f=0;f<=52;f+=1){var d=s.add(f,"week");if(d.format("Wo")===l)return d}return m(),null}var h=(0,o.default)(c,i).locale(r);if(h.isValid())return h}return t&&m(),null}}};t.default=h},function(e,t,n){"use strict";var r=n(1335),o=n(916),a=n(994),i=n(1901),c="${label}不是一个有效的${type}",u={locale:"zh-cn",Pagination:r.a,DatePicker:o.a,TimePicker:a.a,Calendar:i.a,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:c,method:c,array:c,object:c,number:c,date:c,boolean:c,integer:c,float:c,regexp:c,email:c,url:c,hex:c},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};t.a=u},function(e,t,n){"use strict";t.a={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(1892),u=(n(173),n(94)),l=n(114),s=n.n(l),f=n(198),d=n.n(f),p=n(90),m=n.n(p),h=n(659),y=n(34);function v(e){return[m.a.FORMAT.MARKDOWN,m.a.FORMAT.ASL].includes(e)}var b="EditorBase-module_init_eZbjJ",g="EditorBase-module_editor_zrggr";function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(){w=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==_(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function E(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=s()("editor:lakex_mini");function k(e){var t=e.editor,n=e.onChange,a=e.onSubmit,i=e.onLoad,c=t.getProps(),l=c.format,s=c.autoFocus,f=c.isMiniSize,p=c.defaultValue,_=O(Object(r.useState)(v(l)),2),x=_[0],k=_[1],S=O(Object(r.useState)(p),2),C=S[0],N=S[1],P=O(Object(r.useState)(!1),2),T=P[0],A=P[1],L=Object(r.useMemo)((function(){return o.a.createRef()}),[x]),I=o.a.createRef();Object(r.useEffect)((function(){if(v(l)){if(j("convert: ".concat(l," -> lake")),!p)return k(!1),void N("");y.a.docs.convertContent({from:l,to:m.a.FORMAT.LAKE,content:p}).then((function(e){j("convert done:",e),k(!1),N(e.content),A(!0)})).catch((function(e){j("convert fail:",e.message),k(!1)}))}}),[]),Object(r.useEffect)((function(){var e="⌘+enter, ctrl+enter";return d()(e,(function(e){I.current&&I.current.isFocus&&a&&a(e)})),function(){d.a.unbind(e)}}),[]);var R=function(){var r,o=(r=w().mark((function r(){var o,a,c,u,l,d;return w().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(L.current){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,h.a.getLakexEditor();case 4:if(o=r.sent,L.current){r.next=7;break}return r.abrupt("return");case 7:a=o.createMicroEditor,c=o.createMinorEditor,u=f?a:c,l=t.buildOptions(e),d=u(L.current,l),window.__miniEngine=d,I.current=d,t.setEngine(d),t.setValue(C),d.on("fullscreenStatusChange",(function(e){var t=new CustomEvent("neEditorFullscreenStatusChange",{detail:{isFullscreen:e,engine:d,editorNode:d.editorNode}});window.dispatchEvent(t)})),d.on("change",(function(){n&&n(),t.saveAll()})),i&&i(d),s&&d.focus(!1);case 19:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){E(a,n,o,i,c,"next",e)}function c(e){E(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return o.apply(this,arguments)}}();Object(r.useEffect)((function(){R()}),[x,T]);return x?o.a.createElement("div",{id:"larkx-mini-editor",className:b},o.a.createElement(u.a,null)):l===m.a.FORMAT.LAKE||T?o.a.createElement("div",{id:"lark-mini-editor",className:g,ref:L}):o.a.createElement("div",{id:"lark-mini-editor",className:b},o.a.createElement("h4",null,__("内容格式异常，暂无法编辑")),o.a.createElement("pre",null,e.defaultValue))}k.propTypes={editor:i.a.object,onChange:i.a.func,onLoad:i.a.func,onSubmit:i.a.func};var S=k,C=!1;function N(e){return o.a.createElement(S,{autoFocus:!0,editor:e.editor,autoCompleteLinks:e.autoCompleteLinks,onChange:function(){e.onChange(),C||(C=!0,c.a.epv({type:"MiniEditor"}))},onLoad:e.onLoad,onSubmit:e.onSubmit,isMiniSize:e.isMiniSize})}N.defaultProps={onLoad:function(){},onChange:function(){}},N.propTypes={editor:i.a.object.isRequired,onChange:i.a.func,onSubmit:i.a.func,onLoad:i.a.func,autoCompleteLinks:i.a.bool,isMiniSize:i.a.bool};t.a=N},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(1213),o=function(e,t){if(t)return"/api/filetransfer/images?url=".concat(encodeURIComponent(e),"&sign=").concat(Object(r.c)(e));try{var n=new URL(e);return"cdn.yuque.com"===n.hostname&&(n.hostname="cdn.nlark.com"),n.toString()}catch(o){}return function(e){return e&&window&&window.appData&&window.appData.settings&&window.appData.settings.image_proxy_root?e.replace(/^https:\/\/intranetproxy\.alipay\.com\/skylark/,window.appData.settings.image_proxy_root):e}(e)};function a(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){t(n.result)})),n.readAsDataURL(e)}))}},,function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"show",(function(){return m})),n.d(r,"create",(function(){return y})),n.d(r,"update",(function(){return b})),n.d(r,"remove",(function(){return _})),n.d(r,"restore",(function(){return E})),n.d(r,"clone",(function(){return x}));var o={};n.r(o),n.d(o,"create",(function(){return P})),n.d(o,"update",(function(){return A})),n.d(o,"remove",(function(){return I}));var a={};n.r(a),n.d(a,"create",(function(){return U})),n.d(a,"update",(function(){return G})),n.d(a,"remove",(function(){return Y})),n.d(a,"moveAfter",(function(){return H}));var i={};n.r(i),n.d(i,"show",(function(){return J})),n.d(i,"create",(function(){return ee})),n.d(i,"update",(function(){return ne})),n.d(i,"remove",(function(){return oe})),n.d(i,"restore",(function(){return ie}));var c={};n.r(c),n.d(c,"update",(function(){return de})),n.d(c,"bulkUpdate",(function(){return me}));var u={};n.r(u),n.d(u,"create",(function(){return _e})),n.d(u,"update",(function(){return Ee})),n.d(u,"remove",(function(){return xe})),n.d(u,"restore",(function(){return ke}));var l=n(5);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var d={};function p(){}function m(){}function h(){}var y={};c(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var f=u.arg,d=f.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){f.value=e,i(f)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,c(g,"constructor",h),c(h,"constructor",m),m.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function d(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,c,"next",e)}function c(e){d(a,r,o,i,c,"throw",e)}i(void 0)}))}}function m(e){return h.apply(this,arguments)}function h(){return(h=p(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableController/show",e.abrupt("return",l.c("/api/modules/table/doc/TableController/show",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=p(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableController/create",e.abrupt("return",l.e("/api/modules/table/doc/TableController/create",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return g.apply(this,arguments)}function g(){return(g=p(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableController/update",e.abrupt("return",l.f("/api/modules/table/doc/TableController/update",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return(w=p(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableController/remove",e.abrupt("return",l.b("/api/modules/table/doc/TableController/remove",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return O.apply(this,arguments)}function O(){return(O=p(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableController/restore",e.abrupt("return",l.e("/api/modules/table/doc/TableController/restore",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return j.apply(this,arguments)}function j(){return(j=p(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableController/clone",e.abrupt("return",l.e("/api/modules/table/doc/TableController/clone",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(){S=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==k(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function C(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,c,"next",e)}function c(e){C(a,r,o,i,c,"throw",e)}i(void 0)}))}}function P(e){return T.apply(this,arguments)}function T(){return(T=N(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableFieldController/create",e.abrupt("return",l.e("/api/modules/table/doc/TableFieldController/create",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return L.apply(this,arguments)}function L(){return(L=N(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableFieldController/update",e.abrupt("return",l.f("/api/modules/table/doc/TableFieldController/update",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return R.apply(this,arguments)}function R(){return(R=N(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableFieldController/remove",e.abrupt("return",l.b("/api/modules/table/doc/TableFieldController/remove",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function M(){M=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==D(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function F(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){F(a,r,o,i,c,"next",e)}function c(e){F(a,r,o,i,c,"throw",e)}i(void 0)}))}}function U(e){return z.apply(this,arguments)}function z(){return(z=B(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableFieldOptionController/create",e.abrupt("return",l.e("/api/modules/table/doc/TableFieldOptionController/create",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return V.apply(this,arguments)}function V(){return(V=B(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableFieldOptionController/update",e.abrupt("return",l.f("/api/modules/table/doc/TableFieldOptionController/update",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return q.apply(this,arguments)}function q(){return(q=B(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableFieldOptionController/remove",e.abrupt("return",l.b("/api/modules/table/doc/TableFieldOptionController/remove",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return W.apply(this,arguments)}function W(){return(W=B(M().mark((function e(t){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableFieldOptionController/moveAfter",e.abrupt("return",l.f("/api/modules/table/doc/TableFieldOptionController/moveAfter",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function $(){$=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==K(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Q(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function X(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Q(a,r,o,i,c,"next",e)}function c(e){Q(a,r,o,i,c,"throw",e)}i(void 0)}))}}function J(e){return Z.apply(this,arguments)}function Z(){return(Z=X($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableRecordController/show",e.abrupt("return",l.c("/api/modules/table/doc/TableRecordController/show",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=X($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableRecordController/create",e.abrupt("return",l.e("/api/modules/table/doc/TableRecordController/create",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=X($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableRecordController/update",e.abrupt("return",l.f("/api/modules/table/doc/TableRecordController/update",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return ae.apply(this,arguments)}function ae(){return(ae=X($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableRecordController/remove",e.abrupt("return",l.b("/api/modules/table/doc/TableRecordController/remove",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return ce.apply(this,arguments)}function ce(){return(ce=X($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableRecordController/restore",e.abrupt("return",l.f("/api/modules/table/doc/TableRecordController/restore",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function le(){le=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ue(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function se(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){se(a,r,o,i,c,"next",e)}function c(e){se(a,r,o,i,c,"throw",e)}i(void 0)}))}}function de(e){return pe.apply(this,arguments)}function pe(){return(pe=fe(le().mark((function e(t){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableRecordValueController/update",e.abrupt("return",l.f("/api/modules/table/doc/TableRecordValueController/update",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){return he.apply(this,arguments)}function he(){return(he=fe(le().mark((function e(t){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableRecordValueController/bulkUpdate",e.abrupt("return",l.f("/api/modules/table/doc/TableRecordValueController/bulkUpdate",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function ve(){ve=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ye(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function be(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){be(a,r,o,i,c,"next",e)}function c(e){be(a,r,o,i,c,"throw",e)}i(void 0)}))}}function _e(e){return we.apply(this,arguments)}function we(){return(we=ge(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableViewController/create",e.abrupt("return",l.e("/api/modules/table/doc/TableViewController/create",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=ge(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableViewController/update",e.abrupt("return",l.f("/api/modules/table/doc/TableViewController/update",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return je.apply(this,arguments)}function je(){return(je=ge(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableViewController/remove",e.abrupt("return",l.b("/api/modules/table/doc/TableViewController/remove",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return Se.apply(this,arguments)}function Se(){return(Se=ge(ve().mark((function e(t){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/table/doc/TableViewController/restore",e.abrupt("return",l.e("/api/modules/table/doc/TableViewController/restore",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.a={TableController:r,TableFieldController:o,TableFieldOptionController:a,TableRecordController:i,TableRecordValueController:c,TableViewController:u}},function(e,t,n){"use strict";n.d(t,"d",(function(){return qe})),n.d(t,"c",(function(){return Ye})),n.d(t,"b",(function(){return He})),n.d(t,"g",(function(){return Ke})),n.d(t,"f",(function(){return We})),n.d(t,"e",(function(){return $e})),n.d(t,"a",(function(){return y})),n.d(t,"i",(function(){return ee})),n.d(t,"j",(function(){return ue})),n.d(t,"h",(function(){return Ve}));n(96);var r=n(23),o=(n(374),n(170)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(906),d=n(32),p=n.n(d),m=n(2050),h={bizdate:"index-module_bizdate_TAy78",bizdateNote:"index-module_bizdateNote_n7GRF",digitDisplay:"index-module_digitDisplay_zlqdR",titleIcon:"index-module_titleIcon_nSNG0",extra:"index-module_extra_ptVa9",content:"index-module_content_-yv5+",digitTitle:"index-module_digitTitle_mjs+F",digit:"index-module_digit_mM-Yp",digitNormalSize:"index-module_digitNormalSize_5PLy3",inRankList:"index-module_inRankList_zLwO9",desc:"index-module_desc_UDF8+",breakdown:"index-module_breakdown_sPwVS",largeBreakdown:"index-module_largeBreakdown_Ud4+v",statisticsCard:"index-module_statisticsCard_kq8X3",small:"index-module_small_YnG1K",middle:"index-module_middle_lEsZF",large:"index-module_large_ffEYz",full:"index-module_full_7GdAd",statisticsCardMain:"index-module_statisticsCardMain_KjHqP",icon:"index-module_icon_WIITI",title:"index-module_title_5ZIHi",num:"index-module_num_u8maT",statisticsCardList:"index-module_statisticsCardList_bJxux",cardListBreakDown:"index-module_cardListBreakDown_TUUNf",cardListItem:"index-module_cardListItem_0X3JO",itemTitle:"index-module_itemTitle_Jlyqf",itemNum:"index-module_itemNum_-n5qB",divider:"index-module_divider_i2aKY",board:"index-module_board_2ZXJv",actionBoard:"index-module_actionBoard_wglGz index-module_board_2ZXJv",contentBoard:"index-module_contentBoard_DIIcn index-module_board_2ZXJv",rank:"index-module_rank_JOQGf",domainIcon:"index-module_domainIcon_49eR1",likeBoard:"index-module_likeBoard_x2SR9 index-module_board_2ZXJv",avatar:"index-module_avatar_M0zK6",empty:"index-module_empty_tPbbg",emptyPic:"index-module_emptyPic_1+1vU",emptyNote:"index-module_emptyNote_WdK+6",ringChart:"index-module_ringChart_4RDPw",gTooltipValue:"index-module_gTooltipValue_oHUo8",rankExtra:"index-module_rankExtra_2Sa1+"};function y(e){var t=e.title,n=e.className,r=e.children,o=e.type,a=[];return["content","action","like"].includes(o)?a.push(h["".concat(o,"Board")]):a.push(h.board),n&&a.push(n),i.a.createElement("div",{className:a.join(" ")},t&&i.a.createElement("div",{className:h.title},t),r)}y.propTypes={title:u.a.node,type:u.a.oneOf(["action","content","like"]),className:u.a.string,children:u.a.node};var v=n(1245),b=n.n(v),g=n(38),_=n(621),w=n(373),E=n(592);function O(e){var t=document.querySelector('[src="'.concat(e,'"]'));return t||((t=document.createElement("script")).src=e,t.async=!0,document.head.appendChild(t)),new Promise((function(e,n){t.addEventListener("load",e),t.addEventListener("error",n)}))}var x=function(){return window.BizCharts?Promise.resolve():Promise.all(Array.from(["https://gw.alipayobjects.com/os/antv/assets/bizcharts/3.1.8/umd/BizCharts.min.js"],O))},j=(n(245),n(64)),k=(n(133),n(31)),S=n(370),C="DateMenu-module_filterMenuOverlay_PgIaH",N="DateMenu-module_menu_15yu-",P="DateMenu-module_menuItem_MSfLY",T="DateMenu-module_active_DAVpT";function A(e){var t=e.currentValue,n=e.menus,o=e.handleChange,a=e.placement,c=e.tipType,u=n.find((function(e){return e.value===t})),l=t!==Object.keys(_.a.RANGE_MENU)[0],s=null;return"books"===c?s=__("仅筛选阅读量、点赞量、关注量和评论量"):c&&"members"!==c&&(s=__("仅筛选阅读量、点赞量和评论量")),i.a.createElement(j.a,{trigger:"click",placement:a||"bottomLeft",overlay:i.a.createElement(k.a,{className:N},n.map((function(e){return i.a.createElement(k.a.Item,{className:P,key:e.value,onClick:function(){o(e.value)}},t===e.value&&i.a.createElement(S.a,null),e.name)}))),overlayClassName:C},i.a.createElement(r.a,{placement:"top",title:s},i.a.createElement("span",{className:l&&T},null==u?void 0:u.name," ",i.a.createElement(g.b,{name:"down",width:16}))))}A.propTypes={currentValue:u.a.string.isRequired,menus:u.a.arrayOf(u.a.shape({name:u.a.string,value:u.a.string})),handleChange:u.a.func.isRequired,placement:u.a.string,tipType:u.a.oneOf(["members","groups","books","docs"])};var L="UserChart-module_billboard_OkS2k",I="UserChart-module_title_dbint",R="UserChart-module_icon_CYyyK",D="UserChart-module_header_y9B-U",M="UserChart-module_extra_dUa0m",F="UserChart-module_default_DaqI7",B="UserChart-module_defaultPic_GUDEc",U="UserChart-module_defaultText_VwYzd";function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}var G=["fill"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $(this,n)}}function $(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(a,e);var t,n,r,o=K(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),J(Q(t=o.call(this,e)),"_isMounted",!1),t.state={ready:!!window.BizCharts,data:[],searchRange:_.a.RANGE_MENU[0].value},t}return t=a,(n=[{key:"handleRangeChange",value:function(e){this.state.searchRange!==e&&this.setState({searchRange:e},this.fetchData)}},{key:"fetchData",value:function(){var e=this,t={range:this.state.searchRange,sort_field:"write_count",sort_order:"desc",limit:20};this.props.fetchData(t).then((function(t){e._isMounted&&e.setState({data:t})}))}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.state.ready||x().then((function(){e.setState({ready:!!window.BizCharts})})),this.fetchData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"userTemplate",value:function(e){var t=document.createElement("a"),n=document.createElement("img"),r=JSON.parse(e);return t.className=h.avatar,t.appendChild(n),t.href="/".concat(r.login),t.title=r.name,n.src=r.avatar,t.outerHTML}},{key:"userData",value:function(e){var t,n=window.appData.organization,r=e.user||{},o=r.id,a=r.name,i=r.login,c=r.avatar_url;return{name:a,avatar:JSON.stringify({id:o,name:a,login:i,avatar:Object(E.a)(c,{height:80,width:80})}),count:e.write_count,status:n&&(null===(t=e.organization_user)||void 0===t?void 0:t.status)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.ready,r=t.searchRange,o=t.data,a=!(null!=o&&o.length&&o.some((function(e){return e.write_count>0})));if(!n)return null;var c=o.map(this.userData),u=window.BizCharts,l=u.Chart,s=u.Axis,f=u.Geom,d=u.Tooltip;return u.Shape.registerShape("interval","round-rect",{getPoints:function(e){var t=e.x,n=e.y,r=e.y0;if(r>n){var o=r;r=n,n=o}var a=e.size;return[{x:t-a/2,y:r},{x:t-a/2,y:n},{x:t+a/2,y:n},{x:t+a/2,y:r}]},draw:function(e,t){var n=this.parsePoints(e.points),r=Math.abs(n[2].x-n[1].x),o=Math.abs(n[2].y-n[0].y),a=Math.min(r,o)/2,i=Math.min(a,e.style.radius||9999),c=e.style,u=c.fill,l=q(c,G);return t.addShape("path",{attrs:Y({path:[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y+i],["A",i,i,0,0,1,n[1].x+i,n[1].y],["L",n[2].x-i,n[1].y],["A",i,i,0,0,1,n[2].x,n[2].y+i],["L",n[3].x,n[3].y]],fill:e.color||u},l)})}}),i.a.createElement(y,{className:L},i.a.createElement("div",{className:D},i.a.createElement("div",{className:M},i.a.createElement(A,{currentValue:r,menus:_.a.RANGE_MENU,handleChange:function(t){return e.handleRangeChange(t)},placement:"bottomRight"})),i.a.createElement("div",{className:I},i.a.createElement(g.b,{className:R,name:"statistics-contribution"}),__("成员贡献排行榜"))),a?i.a.createElement("div",{className:F},i.a.createElement("div",{className:B}),i.a.createElement("span",{className:U},__("暂无数据"))):i.a.createElement(l,{height:180,data:c,scale:{count:{tickCount:4}},padding:[10,0,48,48],forceFit:!0},i.a.createElement(s,{name:"avatar",label:{htmlTemplate:this.userTemplate}}),i.a.createElement(s,{name:"count",label:{offset:5,formatter:function(e){return parseInt(e,10)}}}),i.a.createElement(d,{useHtml:!0,itemTpl:"<li>{value}</li>","g2-tooltip":{fontSize:"14px",color:"#262626",background:"#fff",border:"#e6e6e6",boxShadow:"0 0 3px rgba(0, 0, 0, 0.45)"}}),i.a.createElement(f,{type:"interval",shape:"round-rect",position:"avatar*count",size:12,style:{fill:"l(90) 0:#53B9FF 1:#3A5AE1",radius:4},tooltip:["name*count*status",function(e,t,n){var r='<span style="display: inline-block; background: #EEEEEE; border: 0.5px solid #E3E3E3; border-radius: 2px; margin-left: 4px; padding: 2px; color: #7A7A7A; font-size: 12px; line-height: 1;">'.concat(__("已离职"),"</span>");return{title:n===w.STATUS.terminated?b()(e)+r:b()(e),value:__("更新 {count} 次文档",{count:t})}}]})))}}])&&H(t.prototype,n),r&&H(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.Component);Z.propTypes={fetchData:u.a.func};var ee=Z;function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(a,e);var t,n,r,o=oe(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={ready:!!window.BizCharts},t}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this;x().then((function(){e.setState({ready:!!window.BizCharts})}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.data,r=e.height;if(!this.state.ready||!n||n.length<=1||!n.some((function(e){return e.addition>0})))return i.a.createElement("div",{className:h.empty},i.a.createElement("div",{className:h.emptyPic}),i.a.createElement("p",{className:h.emptyNote},__("近7天暂无新增关注者")));var o=window.BizCharts,a=o.Chart,c=o.Geom,u=o.Axis,l=o.Tooltip,s=["date*count*addition*isFirst",function(e,t,n,r){return r?{value:__("{count} 名关注",{count:t}),date:e}:n<=0?{value:__("暂无新增关注"),date:e}:{value:__("{prefix} {addition} 名关注",{prefix:__("新增"),addition:Math.abs(n)}),date:e}}];return i.a.createElement(a,{className:t,data:n,scale:{date:{range:[0,1]}},height:r,padding:[10,20,30,20],forceFit:!0},i.a.createElement(u,{name:"date",line:{stroke:"#e8e8e8"},grid:{type:"polygon",lineStyle:{stroke:"#e8e8e8"}},tickLine:null,label:{autoRotate:!1,offset:10,textStyle:{fontSize:14},formatter:function(e,t,r){return 0===r||r+1===n.length?e:""}}}),i.a.createElement(u,{name:"addition",visible:!1}),i.a.createElement(l,{showTitle:!1,useHtml:!0,itemTpl:"<li>{date}<br>{value}</li>","g2-tooltip":{fontSize:"14px",color:"#262626",background:"#fff",border:"#e6e6e6",boxShadow:"0 0 3px rgba(0, 0, 0, 0.45)"},shared:!1}),i.a.createElement(c,{type:"areaStack",position:"date*addition",color:"l (90) 0:rgba(24, 144, 255, 0.85) 1:rgba(24, 144, 255, 0.05)",shape:"smooth",tooltip:s}),i.a.createElement(c,{type:"lineStack",position:"date*addition",color:"#1890FF",shape:"smooth",tooltip:s}),i.a.createElement(c,{type:"point",position:"date*addition",size:4,shape:"hollowCircle",color:"#ffffff",style:{stroke:"#1890FF",lineWidth:2},tooltip:s}))}}])&&ne(t.prototype,n),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.Component);ce.propTypes={className:u.a.string,data:u.a.arrayOf(u.a.shape({date:u.a.string,count:u.a.number})),height:u.a.number};var ue=ce;function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ve(e);if(t){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(a,e);var t,n,r,o=he(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={ready:!!window.BizCharts},t}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this;x().then((function(){e.setState({ready:!!window.BizCharts})}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.data;if(!this.state.ready||!n||0===n.length)return i.a.createElement(i.a.Fragment,null);var r=n.map((function(e){return e.color})),o=n.reduce((function(e,t){return e+t.count}),0),a=n.map((function(e){return fe(fe({},e),{},{percent:e.count/o})})),c=window.BizCharts,u=c.Chart,l=c.Geom,s=c.Axis,f=c.Coord,d=c.Legend,p=c.Tooltip;return i.a.createElement(u,{height:120,data:a,scale:{},padding:[0,80,0,0],className:[h.ringChart,t].join(" "),forceFit:!0},i.a.createElement(f,{type:"theta",radius:.75,innerRadius:.6}),i.a.createElement(s,{name:"percent"}),i.a.createElement(d,{position:"right",offsetY:n.length/2*24-60,offsetX:-20,textStyle:{fontSize:12}}),i.a.createElement(p,{useHtml:!0,itemTpl:'<li><div>{name}</div><div class="'.concat(h.gTooltipValue,'">{value}</div></li>'),"g2-tooltip":{position:"absolute",fontSize:"14px",color:"#262626",background:"#fff",border:"#e6e6e6",boxShadow:"0 0 3px rgba(0, 0, 0, 0.45)",padding:"10px 16px"}}),i.a.createElement(l,{type:"intervalStack",position:"percent",color:["name",r],tooltip:["name*count",function(e,t){return{name:e,value:t}}],style:{lineWidth:1,stroke:"#fff"}}))}}])&&pe(t.prototype,n),r&&pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.Component);be.propTypes={className:u.a.string,data:u.a.arrayOf(u.a.shape({name:u.a.string,count:u.a.number}))};n(128);var ge=n(78),_e=(n(50),n(19)),we=(n(75),n(26)),Ee=(n(345),n(145)),Oe=(n(60),n(24)),xe="TableBoard-module_mytable_0wqLg",je="TableBoard-module_tableBoard_4BYRY TableBoard-module_board_XDbgl",ke="TableBoard-module_extraContent_02fNO",Se="TableBoard-module_tableInput_6bpH+",Ce="TableBoard-module_tableHeader_jXoBB",Ne="TableBoard-module_exportBtn_jabx1";function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Te(){Te=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Pe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Ae(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Le(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ae(a,r,o,i,c,"next",e)}function c(e){Ae(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ze(e);if(t){var o=ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ue(e)}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ze(e)}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(u,e);var t,n,r,o,a,c=Fe(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=e.tableKeys,r=e.tableConfigMap;Ge(Ue(t=c.call(this,e)),"_isMounted",!1),Ge(Ue(t),"handleChange",(function(e,n,r){t.setState({loading:!0});var o={};e&&(o.page=e.current,t.setState((function(t){return{pagination:Re(Re({},t.pagination),{},{current:e.current})}}))),r.field?t.setState({sortField:r.field,sortOrder:"descend"===r.order?"desc":"asc"},(function(){return t.fetchData(o)})):t.fetchData(o)}));var o=r[n[0]].tableColumns.find((function(e){return e.defaultSortOrder}));return t.state={loading:!1,downloading:!1,data:[],pagination:{pageSize:10,total:0,current:1},curTableKey:n[0],tableConfigMap:r,searchRange:_.a.RANGE_MENU[0].value,searchName:"",lastSearchName:"",sortField:o?o.dataIndex:"",sortOrder:o&&("descend"===o.defaultSortOrder?"desc":"asc"),maxRowCount:0,minRowHeight:75},t}return t=u,n=[{key:"curTableConfig",get:function(){var e=this.state;return e.tableConfigMap[e.curTableKey]}},{key:"fetchData",value:(a=Le(Te().mark((function e(){var t,n,r,o,a=arguments;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=a.length>0&&void 0!==a[0]?a[0]:{}).limit=this.state.pagination.pageSize,t.page=t.page||this.state.pagination.current,t.range=this.state.searchRange,this.state.sortField&&(t.sort_field=this.state.sortField,t.sort_order=this.state.sortOrder),this.state.lastSearchName&&(t.name=this.state.lastSearchName),e.prev=6,e.next=9,this.curTableConfig.fetchData(t);case 9:n=e.sent,r=n.data,o=n.total,this._isMounted&&(this.setState((function(e){return{curTableKey:e.curTableKey,data:r,pagination:Re(Re({},e.pagination),{},{total:o}),loading:!1}})),this.resetTableHeight(r.length)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),Oe.a.error(e.t0.message);case 18:case"end":return e.stop()}}),e,this,[[6,15]])}))),function(){return a.apply(this,arguments)})},{key:"resetTableHeight",value:function(e){var t,n,r=this.state,o=r.maxRowCount,a=r.minRowHeight,i=null===(t=document.querySelector("td.ant-table-cell"))||void 0===t||null===(n=t.getBoundingClientRect())||void 0===n?void 0:n.height;e>o&&this.setState({maxRowCount:e}),i<a&&e>0&&this.setState({minRowHeight:i})}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.fetchData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"placeholder",get:function(){return this.curTableConfig.placeholder}},{key:"handleRangeChange",value:function(e){this.state.searchRange!==e&&this.setState((function(t){return{searchRange:e,pagination:Re(Re({},t.pagination),{},{current:1})}}),this.fetchData)}},{key:"handleSearchNameChange",value:function(e){var t=e.target.value;this.setState({searchName:t}),""===t&&this.setState({lastSearchName:""})}},{key:"handleSearchName",value:function(e){this.setState((function(t){return{lastSearchName:e,pagination:Re(Re({},t.pagination),{},{current:1})}}),this.fetchData)}},{key:"handleTabClick",value:function(e){if(e!==this.state.curTableKey){var t=this.props.tableConfigMap[e].tableColumns.find((function(e){return e.defaultSortOrder}));this.setState({curTableKey:e,searchRange:_.a.RANGE_MENU[0].value,pagination:{pageSize:10,total:0,current:1},searchName:"",lastSearchName:"",sortField:t.dataIndex,sortOrder:"descend"===t.defaultSortOrder?"desc":"asc",data:[]},this.fetchData)}}},{key:"exportCsv",value:(o=Le(Te().mark((function e(){var t;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.downloading){e.next=2;break}return e.abrupt("return");case 2:return this.setState({downloading:!0}),t={range:this.state.searchRange},this.state.searchName&&(t.name=this.state.searchName),this.state.sortField&&(t.sort_field=this.state.sortField,t.sort_order=this.state.sortOrder),e.prev=6,e.next=9,this.curTableConfig.download(t);case 9:return e.prev=9,this.setState({downloading:!1}),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[6,,9,12]])}))),function(){return o.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props.tableKeys,n=this.state,r=n.data,o=n.pagination,a=n.loading,c=n.searchRange,u=n.searchName,l=n.curTableKey,f=n.tableConfigMap,d=n.maxRowCount,p=n.minRowHeight;return i.a.createElement("div",{className:s()(je,xe),style:{minHeight:"".concat(d*p+180,"px")}},i.a.createElement("div",{className:Ce},i.a.createElement(Ee.a,{activeKey:this.state.curTableKey,onChange:function(t,n){return e.handleTabClick(t,n)},size:"large"},t.map((function(e,t){return i.a.createElement(Ee.a.TabPane,{tab:f[e].tabName,key:e})}))),i.a.createElement("div",{className:ke},i.a.createElement(A,{currentValue:c,menus:_.a.RANGE_MENU,handleChange:function(t){return e.handleRangeChange(t)},placement:"bottomRight",tipType:l}),i.a.createElement(we.a.Search,{className:Se,placeholder:this.placeholder,value:u,onChange:function(t){return e.handleSearchNameChange(t)},onSearch:function(t){return e.handleSearchName(t)}}),i.a.createElement(_e.a,{className:Ne,onClick:function(){return e.exportCsv()}},__("导出")))),t.map((function(t){return t===l&&i.a.createElement(ge.a,{rowKey:"id",dataSource:r,columns:f[t].tableColumns,pagination:o,loading:a,onChange:e.handleChange,key:t})})))}}],n&&De(t.prototype,n),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(a.Component);function Ye(e){var t=e.number,n=e.className,r=e.normalSize,o=e.inRankList,a=e.unit,c="string"==typeof t?t:"--",u=0,l=!1;if(a&&"W"===a.toUpperCase()&&t>=1e4&&(t=parseInt(t/1e3,10)/10,l=!0),!Number.isInteger(t)){var s=String(t).split(".");t=Number(s[0]),u=s[1]}if(Number.isFinite(t)){for(var f=[],d=t;d>=1e3;)f.unshift((d%1e3).toString().padStart(3,"0")),d=Math.floor(d/1e3);c=[d].concat(f).join(","),u&&(c+=".".concat(u)),l&&(c+="W")}var p=[h.digit];return r&&p.push(h.digitNormalSize),o&&p.push(h.inRankList),n&&p.push(n),i.a.createElement("span",{className:p.join(" ")},c)}function qe(e){var t=e.icon,n=e.title,r=e.titleIcon,o=e.number,a=e.desc,c=e.extra,u=e.className,l=e.formatNumber;return i.a.createElement("div",{className:s()(h.digitDisplay,u)},t&&i.a.createElement("div",{className:h.icon},t),i.a.createElement("div",{className:h.content},c&&i.a.createElement("div",{className:h.extra},c),n&&i.a.createElement("div",{className:h.digitTitle},r&&i.a.createElement("div",{className:h.titleIcon},r),n),i.a.createElement(Ye,{number:o,unit:l&&o>1e6?"W":null}),a&&i.a.createElement("div",{className:h.desc},a)))}function He(e){var t=e.children,n=e.type,r=[h.breakdown];return"large"===n&&r.push(h.largeBreakdown),i.a.createElement("div",{className:r.join(" ")},t)}function We(e){var t=e.main,n=e.mainSize,r=void 0===n?"middle":n,a=e.list,c=e.listSize,u=e.listItemSize,l=void 0===u?"middle":u,f=e.type,d=void 0===f?"middle":f,p=function(e,t){var n=t>0&&t%(c-1)==0,r=t>=a.length-1,o=c>1&&!n&&!r;return i.a.createElement("div",{className:s()(h.cardListItem,h[l],o&&h.divider),key:t},i.a.createElement("span",{className:h.itemTitle},e.title,__("：")),i.a.createElement(Ye,{className:h.itemNum,number:e.number,unit:c>1?"W":null}))};return i.a.createElement("div",{className:s()(h.statisticsCard,h[d])},i.a.createElement("div",{className:s()(h.statisticsCardMain,h[r])},i.a.createElement("div",{className:h.icon},t.titleIcon),i.a.createElement("div",{className:h.title},t.title),i.a.createElement(Ye,{className:h.num,number:t.number})),a&&i.a.createElement("div",{className:h.statisticsCardList},i.a.createElement(He,{className:h.cardListBreakDown},a.slice(0,c).map((function(e,t){return p(e,t)}))),i.a.createElement(o.a,null),i.a.createElement(He,{className:h.cardListBreakDown},a.slice(c).map((function(e,t){return p(e,t+c)})),i.a.createElement("div",{style:{flex:2*c-a.length}}))))}function Ke(e){var t=e.title,n=e.bizdate,r=n?p()(n,"YYYYMMDD"):p()().subtract(1,"day");return i.a.createElement(m.a,{title:i.a.createElement(i.a.Fragment,null,t,i.a.createElement("span",{className:h.bizdate},r.format("MM-DD,YYYY"),i.a.createElement("span",{className:h.bizdateNote},__("（每日上午更新昨日数据，“--”表示暂无数据）"))))})}function $e(e){var t=e.msg,n=e.tips;return i.a.createElement("div",{className:h.rank},i.a.createElement("span",{className:h.rankExtra},t),n&&i.a.createElement(r.a,{title:n},i.a.createElement(f.a,{className:h.domainIcon})))}Ve.propTypes={tableKeys:u.a.arrayOf(u.a.string),tableConfigMap:u.a.objectOf(u.a.shape({tabName:u.a.string,placeholder:u.a.string,tableColumns:u.a.array,fetchData:u.a.func,download:u.a.func}))},Ye.propTypes={number:u.a.oneOfType([u.a.number,u.a.string]),className:u.a.string,normalSize:u.a.bool,inRankList:u.a.bool,unit:u.a.oneOf(["W","w"])},qe.propTypes={icon:u.a.node,title:u.a.string,titleIcon:u.a.node,number:u.a.oneOfType([u.a.number,u.a.string]),desc:u.a.node,extra:u.a.string,className:u.a.string,formatNumber:u.a.bool},He.propTypes={children:u.a.node,type:u.a.oneOf(["normal","large"])},We.propTypes={main:u.a.object,mainSize:u.a.oneOf(["middle","large"]),list:u.a.array,listSize:u.a.number,listItemSize:u.a.oneOf(["small","middle","large"]),type:u.a.oneOf(["small","middle","large","full"])},Ke.PropTypes={title:u.a.string,bizdate:u.a.any},$e.propTypes={msg:u.a.any,tips:u.a.string}},function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(57),i=n(58),c=n(203),u=n(66),l=n(72),s=n(0),f=n(10),d=n.n(f),p=n(126),m=n(261),h=n(370),y=n(497),v=n(154),b=n(257),g=n(303),_=n(95),w=n(237);function E(e){return!e||e<0?0:e>100?100:e}function O(e){var t=e.success,n=e.successPercent;return t&&"progress"in t&&(Object(_.a)(!1,"Progress","`success.progress` is deprecated. Please use `success.percent` instead."),n=t.progress),t&&"percent"in t&&(n=t.percent),n}var x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},j=function(e,t){var n,r,o=e.from,a=void 0===o?w.presetPrimaryColors.blue:o,i=e.to,c=void 0===i?w.presetPrimaryColors.blue:i,u=e.direction,l=void 0===u?"rtl"===t?"to left":"to right":u,s=x(e,["from","to","direction"]);if(0!==Object.keys(s).length){var f=(n=s,r=[],Object.keys(n).forEach((function(e){var t=parseFloat(e.replace(/%/g,""));isNaN(t)||r.push({key:t,value:n[e]})})),(r=r.sort((function(e,t){return e.key-t.key}))).map((function(e){var t=e.key,n=e.value;return"".concat(n," ").concat(t,"%")})).join(", "));return{backgroundImage:"linear-gradient(".concat(l,", ").concat(f,")")}}return{backgroundImage:"linear-gradient(".concat(l,", ").concat(a,", ").concat(c,")")}},k=function(e){var t=e.prefixCls,n=e.direction,r=e.percent,a=e.strokeWidth,i=e.size,c=e.strokeColor,u=e.strokeLinecap,l=e.children,f=e.trailColor,d=e.success,p=c&&"string"!=typeof c?j(c,n):{background:c},m=f?{backgroundColor:f}:void 0,h=Object(o.default)({width:"".concat(E(r),"%"),height:a||("small"===i?6:8),borderRadius:"square"===u?0:""},p),y=O(e),v={width:"".concat(E(y),"%"),height:a||("small"===i?6:8),borderRadius:"square"===u?0:"",backgroundColor:null==d?void 0:d.strokeColor},b=void 0!==y?s.createElement("div",{className:"".concat(t,"-success-bg"),style:v}):null;return s.createElement(s.Fragment,null,s.createElement("div",{className:"".concat(t,"-outer")},s.createElement("div",{className:"".concat(t,"-inner"),style:m},s.createElement("div",{className:"".concat(t,"-bg"),style:h}),b)),l)},S=n(28),C=n(55),N={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1},P=function(e){var t=e.map((function(){return Object(s.useRef)()})),n=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e=Date.now(),r=!1;Object.keys(t).forEach((function(o){var a=t[o].current;if(a){r=!0;var i=a.style;i.transitionDuration=".3s, .3s, .3s, .06s",n.current&&e-n.current<100&&(i.transitionDuration="0s, 0s")}})),r&&(n.current=Date.now())})),[t]},T=function(e){var t=e.className,n=e.percent,r=e.prefixCls,a=e.strokeColor,i=e.strokeLinecap,c=e.strokeWidth,u=e.style,l=e.trailColor,f=e.trailWidth,p=e.transition,m=Object(C.a)(e,["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"]);delete m.gapPosition;var h=Array.isArray(n)?n:[n],y=Array.isArray(a)?a:[a],v=P(h),b=Object(S.a)(v,1)[0],g=c/2,_=100-c/2,w="M ".concat("round"===i?g:0,",").concat(g,"\n         L ").concat("round"===i?_:100,",").concat(g),E="0 0 100 ".concat(c),O=0;return s.createElement("svg",Object(o.default)({className:d()("".concat(r,"-line"),t),viewBox:E,preserveAspectRatio:"none",style:u},m),s.createElement("path",{className:"".concat(r,"-line-trail"),d:w,strokeLinecap:i,stroke:l,strokeWidth:f||c,fillOpacity:"0"}),h.map((function(e,t){var n=1;switch(i){case"round":n=1-c/100;break;case"square":n=1-c/2/100;break;default:n=1}var o={strokeDasharray:"".concat(e*n,"px, 100px"),strokeDashoffset:"-".concat(O,"px"),transition:p||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},a=y[t]||y[y.length-1];return O+=e,s.createElement("path",{key:t,className:"".concat(r,"-line-path"),d:w,strokeLinecap:i,stroke:a,strokeWidth:c,fillOpacity:"0",ref:b[t],style:o})})))};T.defaultProps=N,T.displayName="Line";var A=0;function L(e){return+e.replace("%","")}function I(e){return Array.isArray(e)?e:[e]}function R(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,i=50-r/2,c=0,u=-i,l=0,s=-2*i;switch(a){case"left":c=-i,u=0,l=2*i,s=0;break;case"right":c=i,u=0,l=-2*i,s=0;break;case"bottom":u=i,s=2*i}var f="M 50,50 m ".concat(c,",").concat(u,"\n   a ").concat(i,",").concat(i," 0 1 1 ").concat(l,",").concat(-s,"\n   a ").concat(i,",").concat(i," 0 1 1 ").concat(-l,",").concat(s),d=2*Math.PI*i,p={stroke:"string"==typeof n?n:void 0,strokeDasharray:"".concat(t/100*(d-o),"px ").concat(d,"px"),strokeDashoffset:"-".concat(o/2+e/100*(d-o),"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s"};return{pathString:f,pathStyle:p}}var D=function(e){var t,n=e.prefixCls,r=e.strokeWidth,a=e.trailWidth,i=e.gapDegree,c=e.gapPosition,u=e.trailColor,l=e.strokeLinecap,f=e.style,p=e.className,m=e.strokeColor,h=e.percent,y=Object(C.a)(e,["prefixCls","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"]),v=s.useMemo((function(){return A+=1}),[]),b=R(0,100,u,r,i,c),g=b.pathString,_=b.pathStyle,w=I(h),E=I(m),O=E.find((function(e){return"[object Object]"===Object.prototype.toString.call(e)})),x=P(w),j=Object(S.a)(x,1)[0];return s.createElement("svg",Object(o.default)({className:d()("".concat(n,"-circle"),p),viewBox:"0 0 100 100",style:f},y),O&&s.createElement("defs",null,s.createElement("linearGradient",{id:"".concat(n,"-gradient-").concat(v),x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(O).sort((function(e,t){return L(e)-L(t)})).map((function(e,t){return s.createElement("stop",{key:t,offset:e,stopColor:O[e]})})))),s.createElement("path",{className:"".concat(n,"-circle-trail"),d:g,stroke:u,strokeLinecap:l,strokeWidth:a||r,fillOpacity:"0",style:_}),(t=0,w.map((function(e,o){var a=E[o]||E[E.length-1],u="[object Object]"===Object.prototype.toString.call(a)?"url(#".concat(n,"-gradient-").concat(v,")"):"",f=R(t,e,a,r,i,c);return t+=e,s.createElement("path",{key:o,className:"".concat(n,"-circle-path"),d:f.pathString,stroke:u,strokeLinecap:l,strokeWidth:r,opacity:0===e?0:1,fillOpacity:"0",style:f.pathStyle,ref:j[o]})}))).reverse())};D.defaultProps=N,D.displayName="Circle";var M=D;function F(e){var t=e.percent,n=e.success,r=e.successPercent,o=E(t),a=O({success:n,successPercent:r});return a?[E(a),E(o-E(a))]:o}var B=function(e){var t,n,o,a=e.prefixCls,i=e.width,c=e.strokeWidth,u=e.trailColor,l=e.strokeLinecap,f=e.gapPosition,p=e.gapDegree,m=e.type,h=e.children,y=i||120,v={width:y,height:y,fontSize:.15*y+6},b=c||6,g=f||"dashboard"===m&&"bottom"||"top",_=(n=(t=e).success,o=t.strokeColor||null,O({success:n,successPercent:t.successPercent})?[w.presetPrimaryColors.green,o]:o),E="[object Object]"===Object.prototype.toString.call(_),x=d()("".concat(a,"-inner"),Object(r.a)({},"".concat(a,"-circle-gradient"),E));return s.createElement("div",{className:x,style:v},s.createElement(M,{percent:F(e),strokeWidth:b,trailWidth:b,strokeColor:_,strokeLinecap:l,trailColor:u,prefixCls:a,gapDegree:p||0===p?p:"dashboard"===m?75:void 0,gapPosition:g}),h)},U=function(e){for(var t=e.size,n=e.steps,o=e.percent,a=void 0===o?0:o,i=e.strokeWidth,c=void 0===i?8:i,u=e.strokeColor,l=e.trailColor,f=e.prefixCls,p=e.children,m=Math.round(n*(a/100)),h="small"===t?2:14,y=[],v=0;v<n;v+=1)y.push(s.createElement("div",{key:v,className:d()("".concat(f,"-steps-item"),Object(r.a)({},"".concat(f,"-steps-item-active"),v<=m-1)),style:{backgroundColor:v<=m-1?u:l,width:h,height:c}}));return s.createElement("div",{className:"".concat(f,"-steps-outer")},y,p)},z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},G=(Object(g.a)("line","circle","dashboard"),Object(g.a)("normal","exception","active","success")),V=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).renderProgress=function(t){var n,a,i=t.getPrefixCls,u=t.direction,l=Object(c.a)(e).props,f=l.prefixCls,m=l.className,h=l.size,y=l.type,v=l.steps,b=l.showInfo,g=l.strokeColor,w=z(l,["prefixCls","className","size","type","steps","showInfo","strokeColor"]),E=i("progress",f),O=e.getProgressStatus(),x=e.renderProcessInfo(E,O);Object(_.a)(!("successPercent"in l),"Progress","`successPercent` is deprecated. Please use `success.percent` instead."),"line"===y?a=v?s.createElement(U,Object(o.default)({},e.props,{strokeColor:"string"==typeof g?g:void 0,prefixCls:E,steps:v}),x):s.createElement(k,Object(o.default)({},e.props,{prefixCls:E,direction:u}),x):"circle"!==y&&"dashboard"!==y||(a=s.createElement(B,Object(o.default)({},e.props,{prefixCls:E,progressStatus:O}),x));var j=d()(E,(n={},Object(r.a)(n,"".concat(E,"-").concat(("dashboard"===y?"circle":v&&"steps")||y),!0),Object(r.a)(n,"".concat(E,"-status-").concat(O),!0),Object(r.a)(n,"".concat(E,"-show-info"),b),Object(r.a)(n,"".concat(E,"-").concat(h),h),Object(r.a)(n,"".concat(E,"-rtl"),"rtl"===u),n),m);return s.createElement("div",Object(o.default)({},Object(p.a)(w,["status","format","trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","percent","success","successPercent"]),{className:j}),a)},e}return Object(i.a)(n,[{key:"getPercentNumber",value:function(){var e=this.props.percent,t=void 0===e?0:e,n=O(this.props);return parseInt(void 0!==n?n.toString():t.toString(),10)}},{key:"getProgressStatus",value:function(){var e=this.props.status;return G.indexOf(e)<0&&this.getPercentNumber()>=100?"success":e||"normal"}},{key:"renderProcessInfo",value:function(e,t){var n,r=this.props,o=r.showInfo,a=r.format,i=r.type,c=r.percent,u=O(this.props);if(!o)return null;var l="line"===i;return a||"exception"!==t&&"success"!==t?n=(a||function(e){return"".concat(e,"%")})(E(c),E(u)):"exception"===t?n=l?s.createElement(v.a,null):s.createElement(m.a,null):"success"===t&&(n=l?s.createElement(y.a,null):s.createElement(h.a,null)),s.createElement("span",{className:"".concat(e,"-text"),title:"string"==typeof n?n:void 0},n)}},{key:"render",value:function(){return s.createElement(b.a,null,this.renderProgress)}}]),n}(s.Component);V.defaultProps={type:"line",percent:0,showInfo:!0,trailColor:null,size:"default",gapDegree:void 0,strokeLinecap:"round"};t.a=V},,function(e,t,n){"use strict";n(130);var r=n(35),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(150),l=n.n(u),s=n(370),f=n(169),d=n(1277),p="index-module_name_2g47z";function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=r.a.Option,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(c,e);var t,n,o,i=b(c);function c(){var e;h(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(_(e=i.call.apply(i,[this].concat(n))),"onChange",(function(t){var n=e.props.groups;if(n&&n.length){var r=n.find((function(e){return e.login===t}));e.props.onChange&&e.props.onChange(r)}})),E(_(e),"onFilterGroup",(function(e,t){if(!t.group)return!1;var n=t.group,r=n.login,o=n.name,a=e.toLowerCase();return r.toLowerCase().indexOf(a)>=0||o.toLowerCase().indexOf(a)>=0})),E(_(e),"renderTeams",(function(e){return e&&e.length?l()(e,"id").map((function(e){return a.a.createElement(O,{"data-testid":"group-selector-".concat(e.login),key:e.login,value:e.login,group:e,title:e.name},a.a.createElement("div",{className:"group-selector-item"},a.a.createElement(d.a,{organization:e.organization,group:e,size:24,showCard:!1,nameStyleCls:p,isLink:!1})),a.a.createElement(s.a,null))})):null})),e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.current,n=e.disabled,o=e.groups,i=e.placeholder,c=Object(f.e)()?__("知识小组"):__("团队");return a.a.createElement("div",{className:"group-selector ".concat(this.props.className||""),"data-testid":"group-selector"},a.a.createElement(r.a,{showSearch:!0,disabled:n,getPopupContainer:function(e){return e.parentNode},placeholder:i,dropdownMatchSelectWidth:!1,notFoundContent:a.a.createElement("div",{className:"blankslate"},a.a.createElement("span",null,Object(f.e)()?__("没有{groupTitle}信息",{create:a.a.createElement("a",{href:"/groups/new",target:"_blank"},__("新建")),groupTitle:c}):__("没有{groupTitle}信息，快去{create}一个吧",{create:a.a.createElement("a",{href:"/groups/new",target:"_blank"},__("新建")),groupTitle:c}))),value:t&&t.login,onChange:this.onChange,filterOption:this.onFilterGroup,placement:"bottomLeft"},this.renderTeams(o)))}}])&&y(t.prototype,n),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.Component);x.defaultProps={placeholder:__("请选择{groupTitle}",{groupTitle:Object(f.e)()?__("知识小组"):__("团队")}),groups:[],current:{},onChange:function(){}},x.propTypes={groups:c.a.arrayOf(c.a.object),current:c.a.shape({login:c.a.string,name:c.a.string}),onChange:c.a.func,className:c.a.string,placeholder:c.a.string,disabled:c.a.bool};t.a=x},function(e,t,n){"use strict";n(173);var r=n(94),o=n(327),a=n.n(o),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(114),f=n.n(s),d=n(10),p=n.n(d),m=n(88),h=n(299),y=n.n(h),v=n(34),b=n(322),g=(n(50),n(19)),_=n(348),w=n(253),E=n.n(w),O=n(38),x=n(91),j=n(1295),k=n(127),S=n(843),C={miniGuide:"Editor-module_miniGuide_71Yr9",areaBtn:"Editor-module_areaBtn_aMxhW",active:"Editor-module_active_Nin9i",icon:"Editor-module_icon_tywji",miniGuideLeft:"Editor-module_miniGuideLeft_6qlDi",miniGuideTip:"Editor-module_miniGuideTip_YJsrk",miniWrapper:"Editor-module_miniWrapper_bgh3f",editorInput:"Editor-module_editorInput_pjxNG",editorInputHeader:"Editor-module_editorInputHeader_rgMbi"};function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(){T=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==N(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function A(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=f()("comment:editor"),D=function(e){var t,n,r=e.targetType,o=e.target,a=e.useMiniGuide,u=e.dispatch,l=e.onCancelCreate,s=e.showReply,f="autosave/".concat(r,"_comments/").concat(o.id,"/replyId"),d=c.a.createRef(),p=Object(i.useState)(function(){if(!s)return null;var e=x.default.get(f);return R("cached reply id: ","".concat(f," -> ").concat(e)),e?Number(e):null}()),m=L(p,2),h=m[0],y=m[1],b=L(Object(i.useState)(!!a),2),g=b[0],_=b[1],w=function(){l&&"function"==typeof l?l():_(!g)},O=function(){y(null),x.default.remove(f),e.onCloseReply()},j=L(Object(i.useState)(!1),2),k=j[0],S=j[1];return{state:{submitting:k,replyId:h,showMiniGuide:g},editorRef:d,handleReplyTo:function(e){y(e),a&&g&&w(),x.default.set(f,e)},cancelReply:O,toggleEditor:w,toggleAreaCommenting:function(e){e.stopPropagation(),u&&u({type:"litecomment/toggleAreaCommenting"})},createReply:(t=T().mark((function t(n,i){var c,u,l,s,f,d,p;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),c=e.litecomment,u=(c=void 0===c?{}:c).page,l=c.rect,s=e.comments,f={commentable_type:r,commentable_id:o.id,parent_id:h,body_asl:n.value,body:n.html,format:n.format,page:u,rect:l},(u||l)&&(f.type=E.a.TYPE.AREA_COMMENT),h&&((null==(d=s.find((function(e){return e.id===h})))?void 0:d.type)===E.a.TYPE.WORDING_COMMENT&&(f.type=E.a.TYPE.WORDING_COMMENT,f.selection=d.selection),d&&(f.root_id=d.parent_id?d.root_id:d.id,f.to_user_id=d.user_id)),"lake"!==f.format&&(f.body=n.html),t.prev=8,t.next=11,v.a.comments.create(f);case 11:p=t.sent,S(!1),R("reply success: ",p),i&&i(),e.onCreate&&e.onCreate(p),O(),a&&_(!0),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(8),S(!1);case 23:case"end":return t.stop()}}),t,null,[[8,20]])})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){A(a,r,o,i,c,"next",e)}function c(e){A(a,r,o,i,c,"throw",e)}i(void 0)}))},function(e,t){return n.apply(this,arguments)})}},M=c.a.forwardRef((function(e,t){var n=D(e),r=n.state,o=r.replyId,a=r.showMiniGuide,u=r.submitting,l=c.a.createRef();Object(i.useImperativeHandle)(t,(function(){return{handleReplyTo:function(e){n.handleReplyTo(e),l&&l.current&&l.current.focusEditor()},cancelReply:n.cancelReply,focusEditor:function(){l&&l.current&&l.current.focusEditor()}}}));var s=e.className,f=e.group,d=e.targetType,m=e.target,h=e.comments,y=e.canComment,v=e.useMiniGuide,b=e.isMiniSize,w=e.editorAffixed,E=e.areaCommenting,x=e.withAreaSelection,N=e.disableYuqueCardEmbedView,T=e.cancelable,A=e.me,L=e.showReply,I=e.placeholder;if(!y)return null;var R=p()(C.areaBtn,P({},C.active,E)),M=b?24:32;return c.a.createElement("div",{className:p()(s,C.wrapper,P({},C.miniWrapper,b))},c.a.createElement(S.a,{me:A,place:"comment"},a?c.a.createElement("div",{className:C.miniGuide,onClick:n.toggleEditor,"data-testid":"comment-mini-guide"},c.a.createElement("div",{className:C.miniGuideLeft},c.a.createElement(k.a,{src:A.avatar_url,size:M,name:A.name,className:C.avatar}),c.a.createElement("span",{className:C.miniGuideTip},__("点击添加评论"))),x&&c.a.createElement(g.a,{onClick:n.toggleAreaCommenting,className:R,"data-testid":"area-selection-button"},c.a.createElement(O.b,{name:"area-comment",size:14,className:C.icon}),__("框选评论"))):c.a.createElement("div",{className:C.editorInput,"data-testid":"comment-editor"},w&&c.a.createElement("div",{className:C.editorInputHeader},c.a.createElement(k.a,{src:A.avatar_url,size:M,name:A.name,className:C.avatar}),c.a.createElement("a",{className:C.btnFoldEditor,onClick:n.toggleEditor},c.a.createElement(_.a,null)," ",__("收起"))),c.a.createElement(j.a,{me:A,group:f,type:d,submitting:u,target:m,replyId:o,cancelReplyTo:n.cancelReply,comments:h,onSubmit:n.createReply,getDefaultSuggestions:e.getDefaultSuggestions,showAvatar:!v,useMiniGuide:v,onCancelCreate:n.toggleEditor,toggleTopicStatus:e.toggleTopicStatus,isMiniSize:b,ref:l,cancelable:T,disableYuqueCardEmbedView:N,showReply:L,placeholder:I}))))}));M.defaultProps={me:window.appData.me,onCloseReply:function(){}},M.propTypes={className:l.a.string,group:l.a.object.isRequired,target:l.a.object.isRequired,targetType:l.a.oneOf(b.a.TARGET_TYPES),comments:l.a.array,useMiniGuide:l.a.bool,canComment:l.a.bool,onCreate:l.a.func,cancelable:l.a.bool,onCancelCreate:l.a.func,getDefaultSuggestions:l.a.func,toggleTopicStatus:l.a.func,type:l.a.oneOf(["default","timeline"]),isMiniSize:l.a.bool,editorAffixed:l.a.bool,litecomment:l.a.object,withAreaSelection:l.a.bool,dispatch:l.a.func,areaCommenting:l.a.bool,disableYuqueCardEmbedView:l.a.bool,me:l.a.object,showReply:l.a.bool,placeholder:l.a.string,onCloseReply:l.a.func},M.displayName="LiteCommentEditor";var F=M,B=n(117),U=n(124),z=n(1918),G=n(1271),V=n(294),Y=n(186),q=n(321),H=n(2130),W=n(1002),K="wordCommentSelection-module_container_LBNIq",$="wordCommentSelection-module_prefixIcon_nL7Bk",Q="wordCommentSelection-module_quotation_qfH3Q",X="wordCommentSelection-module_quotationTip_S-QRh",J="wordCommentSelection-module_quotationContent_atDX4",Z="wordCommentSelection-module_quotationContentMini_5dM90";function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){var t,n=e.comment,r=e.getViewEngine,o=e.isMiniSize,a=Object(i.useCallback)((function(){var e,t=Object(W.b)(),o=null==n||null===(e=n.selection)||void 0===e?void 0:e.paragraph_id,a=r();a&&o&&a.execCommand("tryUnfold",o),t.emit(W.a.SCROLL,te(te({},n.selection),{},{comment_id:n.id}))}),[n,r,W.b]);return n.selection_type===E.a.SELECTION_TYPE.Review?null:c.a.createElement("div",{className:K},c.a.createElement("span",{className:$}),c.a.createElement("div",{className:Q,onClick:a},c.a.createElement("span",{className:p()((t={},ne(t,J,!o),ne(t,Z,o),t))},c.a.createElement("span",{className:X},__("引用原文：")),n.selection.text)))}re.defaultProps={isMiniSize:!1},re.propTypes={comment:l.a.object.isRequired,getViewEngine:l.a.func.isRequired,isMiniSize:l.a.bool};var oe=re,ae=n(380),ie=n(1345),ce=n(589),ue=n(1893);function le(e){var t=e.comment,n=e.group,r=e.target,o=e.commentableType,a=e.onClick,i=e.mode,u=e.onCancelEdit,l=e.onSave,s=e.getDefaultSuggestions,f=e.useMiniGuide,d=e.disableYuqueCardEmbedView,p={read_status:-1===t.status?99:0,id:t.id};if("edit"===i)return c.a.createElement("div",{style:{marginBottom:16}},c.a.createElement(ie.a,{type:o,group:n,comment:t,target:r,onCancel:u,onSave:l,getDefaultSuggestions:s,useMiniGuide:f}));var m=Object(ae.a)()||Object(ae.b)();return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"content-detail",onClick:function(){return a(t)}},m&&c.a.createElement("div",{style:{marginBottom:6}},c.a.createElement(ue.a,{key:"audits",doc:p,type:"Comment"})),c.a.createElement(ce.b,{id:t.id,key:"reply-".concat(t.id),genOutline:!1,genAnchor:!1,content:t.body_asl,disableYuqueCardEmbedView:d,simpleUI:!0,imageLazyLoad:!0})))}function se(){}le.defaultProps={onCancelEdit:se,onSave:se,onClick:se},le.propTypes={comment:l.a.object.isRequired,group:l.a.object.isRequired,target:l.a.object.isRequired,getDefaultSuggestions:l.a.func.isRequired,commentableType:l.a.oneOf(b.a.TARGET_TYPES),mode:l.a.oneOf(["edit","view"]),useMiniGuide:l.a.bool,disableYuqueCardEmbedView:l.a.bool,onCancelEdit:l.a.func,onSave:l.a.func,onClick:l.a.func};var fe=le,de=n(723),pe=n(2268),me=de.a.REACTIONS;function he(e){var t=e.comment,n=e.onReactionUpdate,r=e.reactionMap,o=e.reactions,a=e.myReaction,i=e.reactionViewModel,u=e.reactionUserMap;return o.length>0?c.a.createElement("div",{className:"post-interaction",style:{marginTop:12}},c.a.createElement("div",{className:"post-interaction-reaction-summary"},c.a.createElement("ul",null,me.map((function(e){var o=r[e.id].count;return 0===o?null:c.a.createElement("li",{key:e.id},c.a.createElement(pe.a,{myReaction:a,reaction:e,users:u[e.id]||[],total:o,loadUsers:function(){i.loadReactionUser(e.id)},reset:function(){i.resetReactionUser(e.id)},onReactionClick:function(){(a&&a.action_option.includes(e.id)?i.cancelReaction(e.id):i.reaction(e.id)).then((function(){i.loadReactionUser(e.id),n(e,t)}))}}))}))))):null}he.defaultProps={onReactionUpdate:function(){}},he.propTypes={comment:l.a.object.isRequired,onReactionUpdate:l.a.func,reactionMap:l.a.object.isRequired,reactions:l.a.array.isRequired,myReaction:l.a.object,reactionViewModel:l.a.object.isRequired,reactionUserMap:l.a.object.isRequired};var ye=he,ve=(n(175),n(84)),be=(n(133),n(31)),ge=(n(246),n(110)),_e=n(1004),we=n(2269),Ee={container:"commentActions-module_container_Pd8UE",actionsHiddenArea:"commentActions-module_actionsHiddenArea_rwxN3",actionItem:"commentActions-module_actionItem_IYkZw",actionItemWithoutMargin:"commentActions-module_actionItemWithoutMargin_UTjq4"},Oe="commentFloorListItem-module_commentFloorListItem_hEa7c",xe="commentFloorListItem-module_listItemWrapper_WP5Au",je="commentFloorListItem-module_hashActive_QOVC4",ke="commentFloorListItem-module_isSelected_KRAD2",Se="commentFloorListItem-module_avatar_MHjSF",Ce="commentFloorListItem-module_commentOrder_Iuwe4",Ne="commentFloorListItem-module_main_gfOyp",Pe="commentFloorListItem-module_commentMain_sXNkM",Te="commentFloorListItem-module_actionsHiddenArea_sIy27",Ae="commentFloorListItem-module_head_HFLrS",Le="commentFloorListItem-module_name_pqKOI",Ie="commentFloorListItem-module_toUserName_ODbN0",Re="commentFloorListItem-module_arrowRight_KtPw0",De="commentFloorListItem-module_time_juhkg",Me="commentFloorListItem-module_commentIpRegion_jl233",Fe="commentFloorListItem-module_wordCommentSelectionWrapper_7T0sG",Be="commentFloorListItem-module_content_Zn013",Ue="commentFloorListItem-module_replyEditor_PeaGC",ze="commentFloorListItem-module_deleted_2GyFb",Ge="commentFloorListItem-module_rootCommentFloorListItem_KZW6g";function Ve(e){var t,n,r,o=e.comment,a=e.me,i=e.isMobile,u=e.canComment,l=e.canEdit,s=e.canReport,f=e.canDelete,d=e.onRemove,m=e.onEdit,h=e.onReplyTo,y=e.onCopyCommentLink,v=e.reactionViewModel,b=e.myReaction,g=e.onReactionUpdate;return a&&a.id?c.a.createElement("div",{className:Ee.container},u&&c.a.createElement("span",{className:Ee.actionItem},c.a.createElement(O.b,{name:"comment-reply",color:"#8C8C8C",width:16,height:16,onClick:h})),u&&c.a.createElement(we.a,{placement:i?"topLeft":void 0,reactionIcon:c.a.createElement("span",{className:Ee.actionItemWithoutMargin},c.a.createElement(O.b,{className:Ee.action,name:"comment-reaction",color:"#8C8C8C",width:16,height:16})),active:(null==b?void 0:b.reaction_types)||[],onReaction:v.reaction,onCancelReaction:v.cancelReaction,onReactionUpdate:function(e){return g(e,o)}}),c.a.createElement("div",{className:p()(Ee.actionsHiddenArea,(t={},n=Te,r=!i,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))},l&&c.a.createElement("span",{className:Ee.actionItem},c.a.createElement(O.b,{className:Ee.action,name:"comment-edit",width:16,height:16,color:"#8C8C8C",onClick:m})),f&&c.a.createElement(ge.a,{title:__("确认删除该评论么？"),onConfirm:d},c.a.createElement("span",{className:Ee.actionItem},c.a.createElement(O.b,{className:Ee.action,name:"comment-trash",color:"#8C8C8C",width:16,height:16}))),c.a.createElement(ve.a,{type:"menu",getPopupContainer:function(e){return e.parentNode},placement:"bottomRight",arrowPointAtCenter:!0,trigger:i?"click":"hover",content:c.a.createElement(be.a,null,c.a.createElement(be.a.Item,{key:"copy"},c.a.createElement("span",{onClick:y},__("复制评论链接"))),s&&c.a.createElement(be.a.Item,{key:"report"},c.a.createElement(_e.a,{targetId:o.id,targetType:"Comment"},(function(e){return c.a.createElement("span",{className:"action-link",onClick:e.onShowPanel},__("举报"))})))),hideWhenInactive:!0},c.a.createElement("span",{className:Ee.actionItem},c.a.createElement(O.b,{className:Ee.action,name:"comment-more",color:"#8C8C8C",width:16,height:16}))))):null}Ve.defaultProps={isMobile:!1},Ve.propTypes={comment:l.a.object.isRequired,me:l.a.object,canComment:l.a.bool,canEdit:l.a.bool,canReport:l.a.bool,canDelete:l.a.bool,onRemove:l.a.func.isRequired,onEdit:l.a.func.isRequired,onReplyTo:l.a.func.isRequired,onCopyCommentLink:l.a.func,onReactionUpdate:l.a.func,reactionViewModel:l.a.object,myReaction:l.a.object,isMobile:l.a.bool};var Ye=Ve;function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function He(){He=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==qe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function We(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qe=f()("comment:editor"),Xe=function(e){var t,n=e.commentableType,r=e.target,o=e.dispatch,a=e.rootId,u=e.replyToComment,l=e.litecomment,s=void 0===l?{}:l,f=e.onCancelReply,d=e.onCreate,p=c.a.createRef(),m=Ke(Object(i.useState)(!1),2),h=m[0],y=m[1];t=u.user?u.user.name:__("用户已注销");var b,g;return{state:{submitting:h,replyId:u.id,placeholder:__("回复 {user}",{user:t})},editorRef:p,handleCancelReply:function(){f()},toggleAreaCommenting:function(e){e.stopPropagation(),o&&o({type:"litecomment/toggleAreaCommenting"})},createReply:(b=He().mark((function e(t,o){var i,c,l,p;return He().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),i=s.page,c=s.rect,l={commentable_type:n,commentable_id:r.id,parent_id:u.id,to_user_id:u.user_id,body_asl:t.value,body:t.html,format:t.format,page:i,rect:c},(i||c)&&(l.type=E.a.TYPE.AREA_COMMENT),u&&(u.type===E.a.TYPE.WORDING_COMMENT&&(l.type=E.a.TYPE.WORDING_COMMENT,l.selection=u.selection),l.root_id=a),"lake"!==l.format&&(l.body=t.html),e.prev=6,e.next=9,v.a.comments.create(l);case 9:(p=e.sent).to_user=u.user,y(!1),Qe("reply success: ",p),o&&o(),d&&d(p),f(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),y(!1);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})),g=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=b.apply(e,t);function a(e){We(o,n,r,a,i,"next",e)}function i(e){We(o,n,r,a,i,"throw",e)}a(void 0)}))},function(e,t){return g.apply(this,arguments)})}},Je=c.a.forwardRef((function(e,t){var n=Xe(e),r=n.state,o=r.replyId,a=r.submitting,u=r.placeholder,l=c.a.createRef();Object(i.useImperativeHandle)(t,(function(){return{focusEditor:function(){l&&l.current&&l.current.focusEditor()}}}));var s=e.group,f=e.canComment,d=e.isMiniSize,p=e.disableYuqueCardEmbedView,m=e.cancelable,h=e.me,y=e.comments,v=e.useMiniGuide,b=e.replyToComment,g=e.commentableType,_=e.target;return f?c.a.createElement(S.a,{me:h,place:"comment"},c.a.createElement(j.a,{ref:l,placeholder:u,me:h,group:s,type:g,submitting:a,target:_,replyId:o,replyToComment:b,showReply:!1,cancelReplyTo:n.cancelReply,comments:y,onSubmit:n.createReply,getDefaultSuggestions:e.getDefaultSuggestions,showAvatar:!1,useMiniGuide:v,onCancelCreate:n.handleCancelReply,isMiniSize:d,cancelable:m,disableYuqueCardEmbedView:p})):null}));Je.defaultProps={me:window.appData.me,onCancelReply:function(){}},Je.propTypes={group:l.a.object.isRequired,target:l.a.object.isRequired,commentableType:l.a.oneOf(b.a.TARGET_TYPES),comments:l.a.array,canComment:l.a.bool,cancelable:l.a.bool,getDefaultSuggestions:l.a.func,isMiniSize:l.a.bool,useMiniGuide:l.a.bool,litecomment:l.a.object,dispatch:l.a.func,disableYuqueCardEmbedView:l.a.bool,me:l.a.object,rootId:l.a.number,replyToComment:l.a.object,onCancelReply:l.a.func,onCreate:l.a.func},Je.displayName="CommentReplyEditor";var Ze=Je,et=(n(60),n(24)),tt=n(179),nt=n.n(tt),rt=n(2270);function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function at(){at=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ot(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function it(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ct(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){it(a,r,o,i,c,"next",e)}function c(e){it(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){st(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pt=function(e){var t,n,r,o,a,c=e.isRootComment,u=e.comment,l=e.commentableType,s=e.me,f=e.target,d=e.dispatch,p=e.onRemoveComment,m=e.onUpdateComment,h=e.canComment,y=e.onCreateComment,g=e.isMobile,_=e.onReplyToComment,O=Object(i.useContext)(z.a),x=ft(Object(i.useState)("view"),2),j=x[0],k=x[1],S=Object(i.useRef)(null),C=ft(Object(i.useState)(!1),2),N=C[0],P=C[1],T=!window.h5&&u.meta&&u.meta.ip,A=!c&&u.parent_id&&u.parent_id!==u.root_id,L=b.a.getAnchorId(u.id,l),I=c&&u.type===E.a.TYPE.WORDING_COMMENT,R=!!u.deleted_at,D=Object(rt.a)({me:s,comment:u,onReactionUpdate:function(e,t){var n=lt(lt({},u),{},{reactions:e});d({type:"litecomment/updateOne",payload:n}),null==O||O.updateReaction(null,n,t)}}),M=D.state,F=M.reactions,B=M.reactionUserMap,U=Object(i.useMemo)((function(){var e={reactionMap:de.a.classifyReactions(F),myReaction:D.getMyReaction(),totalReaction:0};return Object.keys(e.reactionMap).forEach((function(t){e.totalReaction+=e.reactionMap[t].count})),e}),[F]),G=U.reactionMap,V=U.myReaction;return{state:{showReplyToUser:A,anchor:L,wordingCommentVisible:I,contentEditorMode:j,isDeleted:R,reactionMap:G,myReaction:V,reactions:F,reactionUserMap:B,replyEditorVisible:N,metaInfoVisible:T},reactionViewModel:D,editorRef:S,handleEdit:function(){k("edit")},handleCancelEdit:function(){k("view")},handleEditorSave:(a=ct(at().mark((function e(t,n,r){var o,a;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={id:t,format:n.format,body_asl:n.value,body:n.html},e.next=3,v.a.comments.update(o);case 3:(a=e.sent).to_user=u.to_user,a.reactions=u.reactions,a.sub_comments=u.sub_comments,r&&r(),m(a),d({type:"litecomment/updateOne",payload:a}),null==O||O.updateComment(a);case 11:case"end":return e.stop()}}),e)}))),function(e,t,n){return a.apply(this,arguments)}),handleCommentContentClick:function(){"Resource"===l&&d({type:"litecomment/updateCurrentCommentId",payload:u.id})},canComment:function(){return!R&&h},canEdit:function(){return!R&&(s&&s.id===u.user_id)},canReport:function(){if(R)return!1;if(!window.appData.isPublicCloud)return!1;var e=Object(ae.a)()||Object(ae.b)();return u.status===w.STATUS.normal&&e&&s&&s.id!==u.user_id},canDelete:function(){var e;return!R&&(!!s&&(s.id===u.user_id||"Doc"===l&&(null===(e=f.abilities)||void 0===e?void 0:e.destroy_comment)))},handleReplyToComment:(o=ct(at().mark((function e(){return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g?_(u):(P(!0),setTimeout((function(){var e;null===(e=S.current)||void 0===e||e.focusEditor()}),200));case 1:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),handleCreateComment:(r=ct(at().mark((function e(t){return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.to_user=u.user,d({type:"litecomment/create",payload:{data:t,showEditorAtBottom:!0,commentListStyle:"floor"}}),null==O||O.createComment(t),y(t);case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),handleCancelReply:(n=ct(at().mark((function e(){return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(!1);case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),handleRemoveComment:(t=ct(at().mark((function e(){var t;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={id:u.id},v.a.comments.destroy(t).then((function(){d({type:"litecomment/remove",payload:t}),et.a.success(__("操作成功"),3),p(t),null==O||O.destroyComment(u)}));case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),handleReactionUpdate:function(){},handleCopyCommentLink:function(){var e=de.a.getPostUrl(u.id);nt()(e),et.a.success(__("评论链接复制成功"))}}};function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e){var t,n=e.comment,r=e.flattenFloorComments,o=e.isRootComment,a=e.commentableType,i=e.getViewEngine,u=e.target,l=e.useMiniGuide,s=e.getDefaultSuggestions,f=e.disableYuqueCardEmbedView,d=e.group,m=e.me,h=e.canComment,y=e.dispatch,v=e.onUpdateComment,b=(e.editorAffixed,e.isMobile),g=e.isMiniSize,_=(e.areaCommenting,e.cancelable,e.onCancelCreate,e.litecomment),w=e.urlHash,E=e.currentCommentId,x=e.onCreateComment,j=e.onEditComment,S=e.onRemoveComment,C=e.onReplyToComment,N=n.user,P=n.to_user,T=pt({isRootComment:o,comment:n,commentableType:a,me:m,target:u,onRemoveComment:S,onEditComment:j,dispatch:y,onUpdateComment:v,canComment:h,onCreateComment:x,onReplyToComment:C,isMobile:b}),A=T.state,L=A.showReplyToUser,I=A.anchor,R=A.wordingCommentVisible,D=A.contentEditorMode,M=A.replyEditorVisible,F=A.isDeleted,U=A.reactionMap,z=A.myReaction,G=A.reactions,W=A.reactionUserMap,K=T.reactionViewModel,$=T.editorRef,Q=o?n.id:n.root_id,X=w==="#".concat(I),J=E===n.id,Z=g?24:32,ee={paddingLeft:Z+12};return c.a.createElement("div",{id:I,className:p()(Oe,mt({},Ge,o)),style:o?null:ee},c.a.createElement("div",{className:p()(xe,(t={},mt(t,je,X),mt(t,ke,J),t))},N?c.a.createElement("div",{className:Se},c.a.createElement("a",{href:"/".concat(N.login)},c.a.createElement(q.a,{user:N},c.a.createElement(k.a,{src:N.avatar_url,size:Z,name:N.name})),n.order&&c.a.createElement("span",{className:Ce},n.order))):c.a.createElement("div",{className:Se},c.a.createElement(k.a,{src:V.avatar.user,size:Z,name:__("用户已注销")}),n.order&&c.a.createElement("span",{className:Ce},n.order)),c.a.createElement("div",{className:Ne},c.a.createElement("div",{className:Pe},c.a.createElement("div",{className:Ae},N?c.a.createElement("a",{href:"/".concat(N.login),className:Le},N.name,(null==m?void 0:m.isAdmin)&&[B.STATUS.banned,B.STATUS.blocked].includes(N.status)&&c.a.createElement("span",{className:"book-name-scope"},c.a.createElement(O.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375,marginLeft:4}}))):c.a.createElement("a",{className:Le},__("用户已注销")),L&&(P?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:Re}),c.a.createElement(q.a,{user:P},c.a.createElement("a",{href:"/".concat(P.login),className:Ie},P.name))):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:Re}),c.a.createElement("a",{className:Ie},__("用户已注销")))),!g&&c.a.createElement("a",{href:"#".concat(I),className:De},c.a.createElement(Y.a,{time:n.created_at})),c.a.createElement("span",{className:Me},c.a.createElement(H.a,{target:n,type:"Comment"}))),g&&c.a.createElement("div",null,c.a.createElement("a",{href:"#".concat(I),className:De},c.a.createElement(Y.a,{time:n.created_at}))),R&&c.a.createElement("div",{className:Fe},c.a.createElement(oe,{isMiniSize:g,comment:n,getViewEngine:i})),F?c.a.createElement("div",{className:Be},c.a.createElement("div",{className:ze},__("该评论已删除"))):c.a.createElement("div",{className:Be},c.a.createElement(fe,{comment:n,group:d,target:u,getDefaultSuggestions:s,commentableType:a,mode:D,useMiniGuide:l,disableYuqueCardEmbedView:f,onCancelEdit:T.handleCancelEdit,onSave:T.handleEditorSave,onClick:T.handleCommentContentClick})),!F&&c.a.createElement(ye,{comment:n,onReactionUpdate:T.handleReactionUpdate,reactionViewModel:K,myReaction:z,reactionMap:U,reactions:G,reactionUserMap:W}),!F&&c.a.createElement(Ye,{isMobile:b,comment:n,me:m,canComment:T.canComment(),canEdit:T.canEdit(),canReport:T.canReport(),canDelete:T.canDelete(),onReplyTo:T.handleReplyToComment,onEdit:T.handleEdit,onRemove:T.handleRemoveComment,onCopyCommentLink:T.handleCopyCommentLink,reactionViewModel:K,reactionMap:U,myReaction:z,reactions:G,reactionUserMap:W,onReactionUpdate:T.handleReactionUpdate}),M&&c.a.createElement("div",{className:Ue},c.a.createElement(Ze,{ref:$,rootId:Q,replyToComment:n,group:d,me:m,target:u,commentableType:a,litecomment:_,comments:r,cancelable:!0,isMiniSize:g,disableYuqueCardEmbedView:f,getDefaultSuggestions:s,dispatch:y,canComment:h,onCancelReply:T.handleCancelReply,onCreate:T.handleCreateComment}))))))}ht.defaultProps={canComment:!0,onEditComment:function(){},onRemoveComment:function(){},onCreateComment:function(){},getViewEngine:function(){}},ht.propTypes={comment:l.a.object.isRequired,flattenFloorComments:l.a.arrayOf(l.a.object),getViewEngine:l.a.func,isRootComment:l.a.bool,commentableType:l.a.oneOf(b.a.TARGET_TYPES),target:l.a.object.isRequired,useMiniGuide:l.a.bool,getDefaultSuggestions:l.a.func,disableYuqueCardEmbedView:l.a.bool,group:l.a.object.isRequired,me:l.a.object.isRequired,canComment:l.a.bool,onEditComment:l.a.func,onCreateComment:l.a.func,onRemoveComment:l.a.func,onUpdateComment:l.a.func,dispatch:l.a.func,editorAffixed:l.a.bool,isMobile:l.a.bool,isMiniSize:l.a.bool,areaCommenting:l.a.bool,cancelable:l.a.bool,onCancelCreate:l.a.func,litecomment:l.a.object,urlHash:l.a.string,currentCommentId:l.a.number,onReplyToComment:l.a.func.isRequired};var yt=ht,vt="index-module_default_FTDOK",bt="index-module_commentEditor_yI7Ow",gt="index-module_mini_6PdDj",_t="index-module_emptyView_t1FqB",wt="index-module_miniEditor_CRXwG",Et="index-module_editorMobile_0VdOM",Ot="index-module_miniFloorList_+ysrM";function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kt(e){var t=e.flattenFloorComments,n=e.commentableType,r=e.getViewEngine,o=e.target,a=e.useMiniGuide,u=e.getDefaultSuggestions,l=e.disableYuqueCardEmbedView,s=e.group,f=e.me,d=e.canComment,m=e.onReplyToComment,h=e.onEditComment,y=e.onCreateComment,v=e.onRemoveComment,b=e.onUpdateComment,g=e.dispatch,_=e.litecomment,w=e.isMiniSize,E=e.currentCommentId,O=e.isMobile,x="";try{x=decodeURIComponent(window.location.hash)}catch(T){}var j,k,S,C=xt(Object(i.useState)(x),2),N=C[0],P=C[1];return Object(i.useEffect)((function(){var e=function(){try{P(decodeURIComponent(window.location.hash))}catch(e){}};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),[]),c.a.createElement("div",{className:p()((j={},k=Ot,S=w,k in j?Object.defineProperty(j,k,{value:S,enumerable:!0,configurable:!0,writable:!0}):j[k]=S,j))},t.map((function(e){return c.a.createElement(yt,{key:e.id,flattenFloorComments:t,isRootComment:!e.parent_id,comment:e,commentableType:n,getViewEngine:r,target:o,useMiniGuide:a,getDefaultSuggestions:u,disableYuqueCardEmbedView:l,group:s,me:f,canComment:d,dispatch:g,onReplyToComment:m,onCreateComment:y,onEditComment:h,onRemoveComment:v,onUpdateComment:b,litecomment:_,isMiniSize:w,urlHash:N,currentCommentId:E,isMobile:O})})))}kt.defaultProps={onReplyToComment:function(){},onEditComment:function(){},onCreateComment:function(){},onRemoveComment:function(){},onUpdateComment:function(){},getViewEngine:function(){}},kt.propTypes={flattenFloorComments:l.a.arrayOf(l.a.object),getViewEngine:l.a.func,commentableType:l.a.oneOf(b.a.TARGET_TYPES),target:l.a.object.isRequired,useMiniGuide:l.a.bool,getDefaultSuggestions:l.a.func,disableYuqueCardEmbedView:l.a.bool,group:l.a.object.isRequired,me:l.a.object,canComment:l.a.bool,dispatch:l.a.func,onReplyToComment:l.a.func,onEditComment:l.a.func,onRemoveComment:l.a.func,onCreateComment:l.a.func,onUpdateComment:l.a.func,litecomment:l.a.object,isMiniSize:l.a.bool,currentCommentId:l.a.number,isMobile:l.a.bool};var St=kt;function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nt.apply(this,arguments)}function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){At(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(){Lt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Ct(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function It(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Rt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){It(a,r,o,i,c,"next",e)}function c(e){It(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ft=f()("commnent_floor");function Bt(e){var t=e.commentableType,n=e.target,r=e.group,o=e.me,c=e.litecomment.comments,u=e.canMentionMembers,l=e.dispatch,s=e.isMobile,f=Dt(Object(i.useState)(!0),2),d=f[0],p=f[1],m=Dt(Object(i.useState)(!1),2),h=m[0],y=m[1],g=Dt(Object(i.useState)(0),2),_=g[0],E=g[1],O=Dt(Object(i.useState)(""),2),x=O[0],j=O[1],k=Dt(Object(i.useState)(null),2),S=k[0],C=k[1],N=Object(i.useRef)([]),P=Object(i.useContext)(z.a),T=function(){var e=document.querySelector("#scroll-to-comment");if(e){e.scrollIntoView();var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,t-40)}},A=function(){var e=Rt(Lt().mark((function e(){var a,i,c,s,f;return Lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){var t;return"Review"===e.selection_type?!(![w.TYPE.REVIEW_APPROVAL,w.TYPE.REVIEW_REJECTION,w.TYPE.REVIEW_OPINION].includes(e.type)||!e.body)&&(e.body_asl=e.body,!0):!!((null==o?void 0:o.id)===e.user_id||null!=o&&o.isAdmin)||![B.STATUS.banned,B.STATUS.blocked].includes(null==e||null===(t=e.user)||void 0===t?void 0:t.status)},a={commentable_type:t,commentable_id:n.id,include_section:!0,include_to_user:!0,include_reactions:!0},h||p(!0),e.next=5,v.a.comments.floorComments(a,{useOriginResp:!0});case 5:i=e.sent,c=(c=i.data.comments).filter((function(e){return e.sub_comments=(e.sub_comments||[]).filter(s),s(e)})),f=c.reduce((function(e,t){var n;return e++,null===(n=t.sub_comments)||void 0===n||n.forEach((function(t){e++})),e}),0),l({type:"litecomment/updateModel",payload:{comments:c,commentCount:f}}),p(!1),y(!0),u&&(r.members.length>0||(Ft("load members"),l({type:"group/getMembers",payload:{data:{group_id:r.id,with_invited:!1}}})));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=Object(i.useMemo)((function(){var e=null==c?void 0:c.filter((function(e){var t;return e.comment_area&&(null===(t=e.comment_area)||void 0===t?void 0:t.rect)}));return e?(e.forEach((function(e,t){e.order=t+1})),c.sort((function(e,t){return new Date(e.created_at)-new Date(t.created_at)}))):c}),[c]),I=Object(i.useMemo)((function(){var e=L.reduce((function(e,t){var n;return e.push(t),null===(n=t.sub_comments)||void 0===n||n.forEach((function(t){e.push(t)})),e}),[]);return N.current=e,e}),[L]),R=function(){var t=a()(I,e.pageSize).length;E(t)};return Object(i.useEffect)((function(){function e(){return(e=Rt(Lt().mark((function e(){return Lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),p(!1);case 8:null==P||P.on("broadcast",(function(e){var t=e.type,n=e.body;if(t===G.a.MESSAGE.REACTION_UPDATE){var r=n.reactionAction,o=r.actionType,a=r.userId,i=r.actionOption,c=n.comment,u=I.find((function(e){return e.id===c.id}));if(u){var s=u.reactions||[],f=s;"create"===o?(f=s.filter((function(e){return e.user_id!==a}))).push({user_id:a,action_type:"reaction",action_option:i}):"delete"===o&&(f=s.filter((function(e){return e.user_id!==a}))),l({type:"litecomment/updateOne",payload:Tt(Tt({},u),{},{reactions:f})})}}else if(t===G.a.MESSAGE.COMMENT_CREATE){if(N.current.find((function(e){return e.id===n.comment.id})))return;l({type:"litecomment/create",payload:{data:n.comment,commentListStyle:"floor",insertToBottom:!0}})}else t===G.a.MESSAGE.COMMENT_UPDATE?l({type:"litecomment/updateOne",payload:n.comment}):t===G.a.MESSAGE.COMMENT_DELETE&&l({type:"litecomment/remove",payload:n.comment})}));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){null==P||P.reset()}}),[]),{state:{loading:d,loaded:h,pageNo:_,flattenFloorComments:I,bottomEditorPlaceholder:x,replyToComment:S,commentCollab:P},setBottomEditorPlaceHolder:j,setReplyToComment:C,setPageNo:E,getDefaultSuggestions:function(){return b.a.getParticipants(n,I,{groupMembers:r.members,targetType:t})},handleCreateRootComment:function(t){l({type:"litecomment/create",payload:{data:t,showEditorAtBottom:!0,commentListStyle:"floor"}}),null==P||P.createComment(t),R(),"mini"===e.size&&T(),e.onCreate&&e.onCreate(t)},handleCreateReplyToComment:function(t){t.to_user=null==S?void 0:S.user,l({type:"litecomment/create",payload:{data:t,showEditorAtBottom:!0,commentListStyle:"floor"}}),null==P||P.createComment(t),R(),e.onCreate&&e.onCreate(t),s&&setTimeout((function(){var e=document.querySelector("#comment-".concat(t.id));null==e||e.scrollIntoView({behavior:"smooth",block:"center"})}),100)},renderAllComments:R,scrollToEditor:T}}function Ut(e){var t,n,o=e.group,u=e.book,l=e.doc,s=e.target,f=e.commentableType,d=e.canComment,m=e.useMiniGuide,h=e.size,v=e.withAreaSelection,b=e.cancelable,g=e.onCancelCreate,_=e.dispatch,w=e.litecomment,E=(w=void 0===w?{}:w).areaCommenting,O=void 0!==E&&E,x=w.currentCommentId,j=e.me,k=e.isMobile,S=e.getViewEngine,C=e.openInfiniteScroll,N=e.pageSize,P=Dt(Object(i.useState)(!1),2),T=P[0],A=P[1],L=Dt(Object(i.useState)(!1),2),I=L[0],R=L[1],D=Object(i.useRef)(null),M=Bt(e),B=M.state,z=B.loading,G=B.pageNo,V=B.flattenFloorComments,Y=B.bottomEditorPlaceholder,q=U.a.isPrivate(l,u,o),H=c.a.createRef(),W=function(e){H&&H.current&&(M.setReplyToComment(e),C&&(M.renderAllComments(),R(!0)),M.setBottomEditorPlaceHolder(__("回复 {user}",{user:e.user.name})),H.current.handleReplyTo(e.id),M.scrollToEditor())},K=function(){var e=document.querySelector("#lark-mini-editor");e&&e.scrollIntoView({block:"center"})};if(Object(i.useEffect)((function(){e.focusToEditor&&H&&H.current&&H.current.focusEditor()}),[e.focusToEditor]),Object(i.useEffect)((function(){T||e.onEditorReady&&H&&H.current&&(A(!0),e.onEditorReady(H.current))}),[H]),Object(i.useEffect)((function(){var e;I&&(K(),null==H||null===(e=H.current)||void 0===e||e.focusEditor())}),[I]),Object(i.useImperativeHandle)(e.forwardedRef,(function(){return{renderAllComments:M.renderAllComments}})),z)return c.a.createElement(r.a,{justify:"block"});var $="mini"===h||k,Q=$&&m,X=a()(V,N).length,J=V.slice(0,N*(G+1));return c.a.createElement("div",{className:p()((t={},At(t,vt,!$),At(t,gt,$),t),"comment-floor-mini"),ref:D},C?c.a.createElement(y.a,{loadMore:function(){M.setPageNo(G+1)},hasMore:G<X,useWindow:"mini"!==h,getScrollParent:function(){return D.current}},c.a.createElement(St,{comments:J,flattenFloorComments:V,me:j,group:o,target:s,commentableType:f,currentCommentId:x,isMiniSize:$,useMiniGuide:m,disableYuqueCardEmbedView:!q,canComment:d,getViewEngine:S,getDefaultSuggestions:M.getDefaultSuggestions,onReplyToComment:W,onEditComment:K,onRemoveComment:e.onRemove,onCreateComment:e.onCreate,dispatch:_,editorAffixed:Q,isMobile:k,areaCommenting:O,cancelable:b,onCancelCreate:g,litecomment:e.litecomment})):c.a.createElement(St,{comments:V,flattenFloorComments:V,me:j,group:o,target:s,commentableType:f,currentCommentId:x,isMiniSize:$,useMiniGuide:m,disableYuqueCardEmbedView:!q,canComment:d,getViewEngine:S,getDefaultSuggestions:M.getDefaultSuggestions,onReplyToComment:W,onEditComment:K,onRemoveComment:e.onRemove,onCreateComment:e.onCreate,dispatch:_,editorAffixed:Q,isMobile:k,areaCommenting:O,cancelable:b,onCancelCreate:g,litecomment:e.litecomment}),Q&&!V.length&&c.a.createElement("div",{className:_t},__("暂无回复")),c.a.createElement("div",{id:"scroll-to-comment"}),c.a.createElement("div",{className:p()(bt,(n={},At(n,wt,Q),At(n,Et,k),n))},c.a.createElement(F,{ref:H,disableYuqueCardEmbedView:!q,group:o,target:s,targetType:f,comments:V,litecomment:e.litecomment,useMiniGuide:m,canComment:d,onCreate:k?M.handleCreateReplyToComment:M.handleCreateRootComment,getDefaultSuggestions:M.getDefaultSuggestions,isMiniSize:$,editorAffixed:Q,withAreaSelection:v,dispatch:_,areaCommenting:O,cancelable:b,onCancelCreate:g,me:j,showReply:k,placeholder:Y,onCloseReply:function(){M.setBottomEditorPlaceHolder("")}})))}Ut.defaultProps={canComment:!0,canMentionMembers:!1,useMiniGuide:!1,size:"default",me:window.appData.me,isMobile:window.h5,openInfiniteScroll:!1,pageSize:15},Ut.propTypes={commentableType:l.a.oneOf(b.a.TARGET_TYPES),group:l.a.object.isRequired,book:l.a.object,doc:l.a.object,target:l.a.object.isRequired,canMentionMembers:l.a.bool,cancelable:l.a.bool,onCancelCreate:l.a.func,useMiniGuide:l.a.bool,onCreate:l.a.func,onRemove:l.a.func,focusToEditor:l.a.bool,canComment:l.a.bool,size:l.a.oneOf(["default","mini"]),withAreaSelection:l.a.bool,litecomment:l.a.object,onEditorReady:l.a.func,me:l.a.object,isMobile:l.a.bool,dispatch:l.a.func,getViewEngine:l.a.func,openInfiniteScroll:l.a.bool,pageSize:l.a.number};Object(m.d)((function(e){return{litecomment:e.litecomment}}))(Ut);var zt=Object(m.d)((function(e){return{litecomment:e.litecomment,group:e.group}}))(Ut);t.a=Object(i.forwardRef)((function(e,t){return c.a.createElement(zt,Nt({},e,{forwardedRef:t}))}))},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(133),n(31)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(114),s=n.n(l),f=n(88),d=n(90),p=n.n(d),m=n(623),h=n(1155),y=n(1154),v=n(665),b=n(927),g=n(907),_=n(34),w=n(17),E=n(124),O=n(38),x=n(109),j=n(349),k=n(1351),S="DocActionMenu-module_wrap_oZQ06",C="DocActionMenu-module_menuItemContainer_pMpjo",N="DocActionMenu-module_iconContainer_QaDi2",P="DocActionMenu-module_menu_6Bn5J",T=n(1344),A=s()("doc:actionMenu"),L=function(e){var t,n,a,c=Object(T.a)(e),u=c.cmd,l=c.sendAlimail,s=c.mailSending,f=c.reset,d=c.doAction,x=c.contextHolder,L=c.setSendAlimail,I=c.setMailSending,R=e.menuId,D=e.book,M=e.className,F=e.doc,B=e.commandParams;return A("render, currect action",u,B),i.a.createElement("div",{className:"".concat(S," ").concat(M)},i.a.createElement(o.a,{className:P,selectable:!1,onClick:function(t){var n=t.key;e.onSelect({key:n}),d(n),Object(j.a)("c34619.d69461",{create_type:n})}},(t=e.commands,n=e.disabledCommands,a={},n.forEach((function(e){a[e.cmd]=!0})),t.slice(0).map((function(e,t){if("divide"===e.cmd)return i.a.createElement(o.a.Divider,{key:"".concat(t,"-divider")});var n=["doc-create-btn","navigation-doc-action"].includes(R)&&e.menuTitle||e.title;return i.a.createElement(o.a.Item,{key:e.cmd,disabled:a[e.cmd]||!1,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd)},i.a.createElement("div",{className:C,"data-aspm-click":e.aspm},e.icon&&i.a.createElement(O.b,{className:N,name:e.icon,width:20,height:20}),e.tip_id?i.a.createElement(m.a,{tip_id:e.tip_id},n):n))})))),x,u===w.a.DOC.export_doc.cmd&&i.a.createElement(v.a,{doc:F,bookId:D.id,onCancel:f,exportParams:B,canExportMultiple:B.can_export_multiple}),u===w.a.BOOK.export_book.cmd&&i.a.createElement(g.a,{visible:!0,book:D,exportParams:B,onCancel:f}),u===w.a.DOC.import_to_doc.cmd&&i.a.createElement(b.a,{book:D,formats:E.a.getImportFormats({multi:!1}),importType:p.a.IMPORT_TYPE.PARSE,onCancel:f,onSuccess:function(t){e.onCommandsExecuted({cmd:u,result:t})}}),u===w.a.DOC.import_to_book.cmd&&i.a.createElement(b.a,{book:D,importParams:B,formats:E.a.getImportFormats({multi:!0}),importType:p.a.IMPORT_TYPE.CREATE,onCancel:f,onSuccess:function(t){e.onCommandsExecuted({cmd:u,result:t})},group:window.appData.group}),u===w.a.DOC.save_as_template.cmd&&i.a.createElement(y.a,{visible:u===w.a.DOC.save_as_template.cmd,onCancel:f,modalTitle:__("另存为模板"),book:D,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return d(w.a.DOC.create_from_template.cmd)},inEdit:e.inEdit}),u===w.a.DOC.save_published_as_version.cmd&&i.a.createElement(h.a,{doc:F,docDomain:"Doc",type:"published",onCancel:f,docVersionProxy:_.a.docVersions}),i.a.createElement(r.a,{width:500,visible:l,footer:null,closable:!s,maskClosable:!1,onCancel:function(){L(!1)}},l&&i.a.createElement(k.a,{onMailSended:function(){I(!1)},onMailSending:function(){I(!0)},doc:F})))};L.defaultProps={className:"",disabledCommands:[],onSelect:function(){},onCommandsExecuted:function(){},commandParams:{}},L.propTypes={className:u.a.string,group:u.a.object.isRequired,book:u.a.object.isRequired,doc:u.a.object,commands:u.a.array.isRequired,commandParams:u.a.object,disabledCommands:u.a.array,onSelect:u.a.func,onCommandsExecuted:u.a.func,dispatch:u.a.func,onSelectTemplate:u.a.func,inEdit:u.a.bool,onCreateDoc:u.a.func,menuId:u.a.string};t.a=Object(f.d)()(Object(x.b)(L))},function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,"a",(function(){return c}));var o=["data","target","reducer"];function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(a,i,c,u){var l=f(e[a],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==r(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,c,u)}),(function(e){o("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return o("throw",e,c,u)}))}u(l.arg)}var a;this._invoke=function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,u,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t){var n={namespace:"proxy.".concat(t),state:{},effects:{},reducers:{}};return Object.keys(e).forEach((function(t){var r=e[t];Object.keys(r).forEach((function(r){n.effects["".concat(t,".").concat(r)]=a().mark((function n(c,u){var l,s,f,d,p,m,h,y,v,b,g,_;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=c.payload,s=void 0===l?{}:l,f=u.put,d=u.call,u.select,p=s.data,m=s.target,h=s.reducer,y=i(s,o),n.next=5,d(e[t][r],p,y);case 5:if(v=n.sent,!m){n.next=13;break}return b=m.split(":"),g="".concat(b[0],"/updateProperty"),(_={})[b[1]]=v,n.next=13,f({type:g,payload:_});case 13:if(!h){n.next=16;break}return n.next=16,f({type:s.reducer,payload:v});case 16:return n.abrupt("return",v);case 17:case"end":return n.stop()}}),n)}))}))})),n}},,function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(38),s=n(905),f=n(167),d="index-module_groupName_DppYx",p="index-module_groupNameText_XYhrt",m="index-module_groupNameScope_qP0XF",h=function(e){var t=e.group,n=e.size,r=e.nameStyleCls,a=e.linkStyleCls,i=e.showName,c=void 0===i||i,h=e.isLink,y=void 0===h||h,v=t&&(t.organization||{id:t.organization_id}),b=Object(f.b)({type:"group",target:t,org:v}).getPrivacyValue(),g=c?o.a.createElement("a",{"data-testid":"group-name-link",href:"/".concat(t.login),title:t.name,className:u()(d,r)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},t.name),0===b&&o.a.createElement("span",{className:"group-name-scope ".concat(m)},o.a.createElement(l.b,{name:"permission-private",width:14}))):null;return!y&&g&&(g=o.a.createElement("span",{title:t.name,className:u()(d,r)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},t.name),0===b&&o.a.createElement(l.b,{name:"permission-private",width:14}))),o.a.createElement(o.a.Fragment,null,y?o.a.createElement("a",{"data-testid":"group-avatar-link",href:"/".concat(t.login),title:t.name,className:a},o.a.createElement(s.a,{group:t,size:n})):o.a.createElement(s.a,{group:t,size:n}),g)};h.propTypes={organization:i.a.object,group:i.a.object.isRequired,size:i.a.number,showName:i.a.bool,isLink:i.a.bool,nameStyleCls:i.a.string};t.a=h},function(e,t,n){"use strict";n.d(t,"b",(function(){return h}));var r=n(0),o=n.n(r),a=n(2),i=n.n(a);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(i,e);var t,n,r,a=f(i);function i(){return u(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return o.a.createElement("div",{className:this.props.className},this.props.children)}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.PureComponent);m.propTypes={className:i.a.string,children:i.a.node};var h=function(e){return function(t){return o.a.createElement(m,null,o.a.createElement(e,t))}};t.a=m},function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return b}));var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(389),u=n(2033),l=n(538),s="header-module_wrapper_Gj1qg",f="header-module_back_9ha8u",d="header-module_title_CkX13",p="header-module_groupHeader_VT66E",m="header-module_bookHeader_QakB2",h=function(e){return o.a.createElement("div",{className:s},e.onBack&&o.a.createElement("div",{className:f,onClick:e.onBack},o.a.createElement(c.a,null)),o.a.createElement("div",{className:d},e.title))};h.propTypes={title:i.a.string,onBack:i.a.func};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.group,n=e.book,r="/search";t&&(r+="?scope=".concat(t.login),n&&(r+="/".concat(n.slug))),l.a.relocate(r,{hash:!1})},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.group;return o.a.createElement("div",{className:p,onClick:function(){y({group:t})}},o.a.createElement(u.a.StaticComponent,null))},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.group,n=e.book;return o.a.createElement("div",{className:m,onClick:function(){y({group:t,book:n})}},o.a.createElement(u.a.StaticComponent,null))};t.c=h},function(e,t,n){var r=n(2532),o=n(955),a=n(1979),i=a&&a.isTypedArray,c=i?o(i):r;e.exports=c},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(1283),o=n(2541),a=n(2542),i=n(2543),c=n(2544),u=n(2545);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=c,l.prototype.set=u,e.exports=l},function(e,t,n){var r=n(2536),o=n(2537),a=n(2538),i=n(2539),c=n(2540);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=i,u.prototype.set=c,e.exports=u},function(e,t,n){var r=n(960);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(956)(Object,"create");e.exports=r},function(e,t,n){var r=n(2558);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(1983),o=n(2563),a=n(2564);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(1282),o=n(2160),a=n(1991),i=n(2582),c=n(2583),u=n(2162),l=n(1992),s=n(2586),f=n(2587),d=n(2150),p=n(1993),m=n(1175),h=n(2588),y=n(2589),v=n(2165),b=n(269),g=n(1173),_=n(2594),w=n(229),E=n(2596),O=n(837),x=n(1177),j="[object Arguments]",k="[object Function]",S="[object Object]",C={};C[j]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[S]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[k]=C["[object WeakMap]"]=!1,e.exports=function e(t,n,N,P,T,A){var L,I=1&n,R=2&n,D=4&n;if(N&&(L=T?N(t,P,T,A):N(t)),void 0!==L)return L;if(!w(t))return t;var M=b(t);if(M){if(L=h(t),!I)return l(t,L)}else{var F=m(t),B=F==k||"[object GeneratorFunction]"==F;if(g(t))return u(t,I);if(F==S||F==j||B&&!T){if(L=R||B?{}:v(t),!I)return R?f(t,c(L,t)):s(t,i(L,t))}else{if(!C[F])return T?t:{};L=y(t,F,I)}}A||(A=new r);var U=A.get(t);if(U)return U;A.set(t,L),E(t)?t.forEach((function(r){L.add(e(r,n,N,r,t,A))})):_(t)&&t.forEach((function(r,o){L.set(o,e(r,n,N,o,t,A))}));var z=M?void 0:(D?R?p:d:R?x:O)(t);return o(z||t,(function(r,o){z&&(r=t[o=r]),a(L,o,e(r,n,N,o,t,A))})),L}},function(e,t,n){var r=n(960),o=n(672),a=n(1174),i=n(229);e.exports=function(e,t,n){if(!i(n))return!1;var c=typeof t;return!!("number"==c?o(n)&&a(t,n.length):"string"==c&&t in n)&&r(n[t],e)}},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},,function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){"use strict";var r=n(889);t.a=r.a},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(96),n(23)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(114),d=n.n(f),p=n(90),m=n.n(p),h=n(1153),y=n(322),v=n(127),b=n(1255),g=n(1263);n(2023);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=d()("comment:editor.ui"),N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(u,e);var t,n,a,c=O(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),S(j(t=c.call(this,e)),"focusEditor",(function(){t.editor.focus(!0)})),S(j(t),"onLoad",(function(){t.onChange()})),S(j(t),"onChange",(function(){t.setState({hasValue:!t.editor.isEmpty()})})),S(j(t),"handleSubmit",(function(){t.editor.contentReady().then((function(){if(!t.editor.isEmpty()){var e={format:m.a.FORMAT.LAKE,value:t.editor.getValue(),html:t.editor.getHtml()};C("submit: ",e),t.props.onSubmit(e,(function(){t.reset()}))}}))})),S(j(t),"handleReplyTopicStatusSwitch",(function(){t.state.hasValue?t.editor.contentReady().then((function(){var e={format:m.a.FORMAT.LAKE,value:t.editor.getValue(),html:t.editor.getHtml()};t.props.onSubmit(e,(function(){t.reset(),t.props.toggleTopicStatus()}))})):t.props.toggleTopicStatus()})),S(j(t),"renderEditor",(function(){return i.a.createElement(g.a,{key:"".concat(t.state.editorInstanceId),editor:t.editor,onLoad:t.onLoad,onChange:t.onChange,onSubmit:t.handleSubmit})})),S(j(t),"renderReplyTo",(function(){var e=t.props,n=e.type,r=e.replyId,a=e.showReply;if(!r||!a)return null;var c,u=(t.props.comments||[]).find((function(e){return e.id===r}));if(!u)return C("comment ".concat(r," not exists")),null;c=u.user?u.user.name:__("用户已注销");var l="Topic"===n?"reply-":"comment-";return i.a.createElement("div",{className:"reply-tip"},__("回复")," ",i.a.createElement("a",{href:"#".concat(l).concat(u.id)},"@",c),i.a.createElement(o.a,{title:__("取消回复")},i.a.createElement("span",{className:"remove-reply",onClick:t.props.cancelReplyTo},i.a.createElement("span",{className:"larkicon larkicon-close"}))))})),S(j(t),"renderTopicAction",(function(){var e=t.props,n=e.type,o=e.target;return"Topic"===n&&o.abilities.update?i.a.createElement(r.a,{className:"btn-status",onClick:t.handleReplyTopicStatusSwitch},o.closed_at?i.a.createElement("span",null,t.state.hasValue?__("回复并重新开启"):__("重新开启")):i.a.createElement("span",null,t.state.hasValue?__("回复并关闭"):__("关闭主题"))):null})),t.editor=new b.b({disableYuqueCardEmbedView:e.disableYuqueCardEmbedView,belong:e.target,targetType:e.type,attachType:e.type,getDefaultSuggestions:e.getDefaultSuggestions,useMiniGuide:e.useMiniGuide,isMiniSize:e.isMiniSize,placeholder:e.placeholder||" ",replyId:e.replyId||""}),t.initialDocument=t.editor.getInitialDocument(),C("init use: ",t.initialDocument),t.state={hasValue:!1,editorInstanceId:"reply_main_".concat(e.replyId||"")},t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props.replyId;t&&e.replyId!==t&&this.focusEditor(),e.replyId!==t&&this.editor._engine.engine.iRenderer.updatePlaceholder(this.props.placeholder)}},{key:"reset",value:function(){var e="reply_main_".concat(this.props.replyId||"","_").concat((new Date).getTime());this.editor.reset(),this.initialDocument=b.b.getEmptyDocument(),this.editor.initialDocument=this.initialDocument,this.setState({hasValue:!1,editorInstanceId:e}),C("reset editor, new instance: ".concat(e,", document: "),this.initialDocument)}},{key:"render",value:function(){var e=this.props,t=e.me,n=e.submitting,o=e.showAvatar,a=e.useMiniGuide,c=e.isMiniSize,u=e.group,l=this.editor.isEditMode,f=s()({"comments-form-wrapper":!0,"edit-mode":l,"no-avatar":!o,"mini-size":c}),d=Object(h.b)(this.props.target,{me:t,group:u}),p=c?24:32;return i.a.createElement("div",{className:"comments-form-editor"},o&&i.a.createElement("div",{className:"avatar"},i.a.createElement(v.a,{src:t.avatar_url,size:p,name:t.name})),i.a.createElement("div",{className:f},i.a.createElement("div",{className:"editor-wrapper"},i.a.createElement("div",{className:"editor"},this.renderReplyTo(),this.renderEditor())),i.a.createElement("div",{className:"action clearfix"},n?i.a.createElement(r.a,{disabled:"disabled"},i.a.createElement("span",null,__("提交中..."))):i.a.createElement(r.a,{type:"primary",disabled:this.state.hasValue&&!d?"":"disabled",onClick:this.handleSubmit},l?__("确定"):__("回复")),(a||this.props.cancelable)&&i.a.createElement("a",{className:"btn-cancel",onClick:this.props.onCancelCreate},__("取消")),this.renderTopicAction(),d&&i.a.createElement(h.a,null))))}}])&&w(t.prototype,n),a&&w(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(a.Component);N.defaultProps={showAvatar:!0,useMiniGuide:!1,cancelable:!1,showReply:!0},N.propTypes={me:u.a.object.isRequired,type:u.a.oneOf(y.a.TARGET_TYPES),group:u.a.object,target:u.a.object.isRequired,targetType:u.a.object,replyId:u.a.number,comments:u.a.array,cancelReplyTo:u.a.func,onSubmit:u.a.func,toggleTopicStatus:u.a.func,getDefaultSuggestions:u.a.func,submitting:u.a.bool,showAvatar:u.a.bool,useMiniGuide:u.a.bool,onCancelCreate:u.a.func,isMiniSize:u.a.bool,cancelable:u.a.bool,disableYuqueCardEmbedView:u.a.bool,placeholder:u.a.string,showReply:u.a.bool},t.a=N},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(723),s=n(610);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t,n=e.name,r=e.size,a=e.className,i="mood-".concat(n);return a=a||"",o.a.createElement("div",{className:"".concat(s.a.mood," ").concat(a)},o.a.createElement("div",{className:u()((t={},f(t,s.a.moodIcon,!0),f(t,s.a[i],!0),f(t,s.a.small,r&&"small"===r),f(t,s.a.mini,r&&"mini"===r),t))}),o.a.createElement("span",{className:s.a.moodTitle},l.a.getMoodTitleById(n)))}d.propTypes={className:i.a.string,size:i.a.string,name:i.a.number.isRequired},t.a=d},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=(n(133),n(31)),i=n(2),c=n.n(i),u=n(88),l=n(561),s=n(1025),f=n(560),d=n(1029),p="HeadBuc-module_container_l0w4-",m=n(1022),h=m.a.getSelectedKeys,y=function(e){var t,n=e.search,r=window.location.pathname,i=h(["/dashboard","/explore","/lark","/feedbacks","/download","/m/ant10","/m/ali10"],r),c=window.appData,u=c.zone,m=c.me,y="/m/ali10",v=__("阿里十派");return 1===(null==u?void 0:u.id)?(y="/m/ant10",v=__("蚂蚁兴趣派")):null!=m&&null!==(t=m.dep)&&void 0!==t&&t.startsWith("高德")&&(y="/amap-library",v=__("高德图书馆")),o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"".concat(p," yuque-header-container")},o.a.createElement("div",{className:"logo"},o.a.createElement(f.a,null)),!window.h5&&o.a.createElement("div",{className:"header-search"},o.a.createElement(l.a,{search:n})),o.a.createElement("div",{className:"header-nav header-nav-menu"},o.a.createElement(a.a,{mode:"horizontal",selectedKeys:i},o.a.createElement(a.a.Item,{className:"header-nav-item",key:"/dashboard"},o.a.createElement("a",{href:"/dashboard"},__("工作台"))),o.a.createElement(a.a.Item,{className:"header-nav-item",key:"/explore"},o.a.createElement(d.a,null)),o.a.createElement(a.a.Item,{className:"header-nav-item",key:"/lark"},o.a.createElement("a",{href:"/lark",target:"_blank"},__("帮助"))),o.a.createElement(a.a.Item,{className:"header-nav-item",key:"/feedbacks"},o.a.createElement("a",{href:"/feedbacks/new",target:"_blank"},__("反馈"))),o.a.createElement(a.a.Item,{className:"header-nav-item",key:"/download"},o.a.createElement("a",{href:"/download",target:"_blank"},__("下载"))),o.a.createElement(a.a.Item,{className:"header-nav-item",key:y,"data-testid":"head-ali10-item"},o.a.createElement("a",{href:y,target:"_blank"},v)))),o.a.createElement("div",{className:"header-nav"},o.a.createElement(s.a,null))))};y.propTypes={search:c.a.object,me:c.a.object};var v=Object(u.d)((function(e){return{search:e.search}}))(y),b=n(2199),g=n(68),_=n(270),w=n.n(_),E=n(10),O=n.n(E),x=n(632),j=m.a.getSelectedKeys,k=function(e){if((w.a.mobile||w.a.tablet)&&"desktop"!==window.appData.me.mobile_view)return o.a.createElement(x.a,null);var t=e.search,n=e.organization,r=e.isDigitalGarden,i=n.abilities&&n.abilities.destroy,c=n.abilities&&n.abilities.read,u=window.appData.corp,p=window.location.pathname,m=j(["/home","/dashboard","/r/organizations/dashboard","/explore"],p),h=O()({header:!0,"header-digital-garden":r}),y=window.appData,v=y.canReadOrg,b=!0;return 403===y.status&&(b=!!n&&v),o.a.createElement("div",{className:h},o.a.createElement("div",{className:"yuque-header-container"},o.a.createElement("div",{className:"logo","data-testid":"yuque-logo"},o.a.createElement(f.a,{theme:"organization",isDigitalGarden:r})),!window.h5&&!r&&o.a.createElement("div",{className:"header-search header-nav-left"},o.a.createElement(l.a,{search:t})),!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"header-nav header-nav-menu"},o.a.createElement(a.a,{mode:"horizontal",selectedKeys:m},c&&o.a.createElement(a.a.Item,{className:"header-nav-item",key:"/dashboard"},o.a.createElement("a",{href:"/dashboard"},__("工作台"))),c&&o.a.createElement(a.a.Item,{className:"header-nav-item",key:"/explore"},o.a.createElement(d.a,null)),i&&o.a.createElement(a.a.Item,{className:"header-nav-item",key:"/r/organizations/dashboard"},o.a.createElement("a",{href:"/r/organizations/dashboard"},__("空间管理"))),u&&"teambition"===u.type&&o.a.createElement(a.a.Item,{className:"header-nav-item",key:u.url},o.a.createElement("a",{href:u.url,target:"_blank"},"Teambition")))),o.a.createElement("div",{className:"header-nav header-nav-right"},o.a.createElement("div",{className:"header-nav header-nav-right"},o.a.createElement(s.a,{showNewBtn:b,showNotification:b}))))))};k.propTypes={search:c.a.object};var S=Object(g.withRouter)(Object(u.d)((function(e){return e}))(k));function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}t.a=function(e){var t=window.appData,n=t.isYuque,r=t.organization,a=t.isDesktopApp,i=t.isDigitalGarden,c=t.homepageEnable;if(a)return null;var u=o.a.createElement(v,e),l=i&&c;return n&&(u=r?o.a.createElement(S,C({},e,{isDigitalGarden:l})):o.a.createElement(b.a,C({},e,{isDigitalGarden:l}))),o.a.createElement("div",{"data-aspm":"c36328"},u)}},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(75),n(26)),a=(n(209),n(61)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(100),f=n.n(s),d=n(1915),p=n(1912),m=n(348),h=n(613),y=n(724),v=n(109),b=n(167),g=n(124),_=n(89),w=n(34),E=(n(166),n(65)),O=(n(178),n(45)),x=(n(130),n(35));function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=function(e){var t=e.value,n=e.contributors,r=e.onChange,a=C(Object(i.useState)(t.showAuthorOption),2),u=a[0],l=a[1],s=C(Object(i.useState)(t.showAuthorId),2),d=s[0],p=s[1],m=C(Object(i.useState)(t.showAuthorCustomText),2),h=m[0],y=m[1],v=function(t){r&&"function"==typeof r&&r(k(k({},e.value),t))};return c.a.createElement(E.a,{gutter:16},c.a.createElement(O.a,{span:10},c.a.createElement(x.a,{"data-testid":"show-author-option-selector",value:u,onChange:function(e){l(Number(e));var t=Number(e);v({showAuthorOption:e,showAuthorId:t!==f.a.SHOW_AUTHOR_OPTION.specific_user?0:d,showAuthorCustomText:t!==f.a.SHOW_AUTHOR_OPTION.custom_text?"":h})},getPopupContainer:function(e){return e.parentNode}},c.a.createElement(x.a.Option,{value:f.a.SHOW_AUTHOR_OPTION.all},__("显示所有编辑者")),c.a.createElement(x.a.Option,{"data-testid":"show-author-option-selector-user",value:f.a.SHOW_AUTHOR_OPTION.specific_user,disabled:n.length<=1},__("显示指定编辑者")),c.a.createElement(x.a.Option,{"data-testid":"show-author-option-selector-hide",value:f.a.SHOW_AUTHOR_OPTION.hide},__("不显示编辑者")),c.a.createElement(x.a.Option,{"data-testid":"show-author-option-selector-text",value:f.a.SHOW_AUTHOR_OPTION.custom_text},__("自定义")))),u===f.a.SHOW_AUTHOR_OPTION.specific_user&&c.a.createElement(O.a,{span:14},c.a.createElement(x.a,{"data-testid":"show-author-option-user-selector",value:d,onChange:function(e){p(Number(e)),v({showAuthorId:e})},placeholder:__("选择编辑者")},n.map((function(e){return c.a.createElement(x.a.Option,{value:e.id,key:String(e.id)},e.name)})))),u===f.a.SHOW_AUTHOR_OPTION.custom_text&&c.a.createElement(O.a,{span:14},c.a.createElement(o.a,{"data-testid":"show-author-option-custom-input",value:h,type:"text",autoComplete:"off",maxLength:20,placeholder:__("请输入（最多 20 个字符）"),onChange:function(e){var t=e.target.value;y(t),v({showAuthorCustomText:t})}})))};P.propTypes={value:l.a.shape({showAuthorCustomText:l.a.string,showAuthorId:l.a.number,showAuthorOption:l.a.number}).isRequired,contributors:l.a.array,onChange:l.a.func.isRequired};var T=P,A={tagWrapper:"DocMetaEdit-module_tagWrapper_H2QK1",tagTip:"DocMetaEdit-module_tagTip_ThFbG",cover:"DocMetaEdit-module_cover_JaV7l",coverPlaceholder:"DocMetaEdit-module_coverPlaceholder_c80Dd",coverActions:"DocMetaEdit-module_coverActions_CZ+Ed",btnRemoveCover:"DocMetaEdit-module_btnRemoveCover_RF2fK",btnRemoveCoverIcon:"DocMetaEdit-module_btnRemoveCoverIcon_ec2SG",moreBtn:"DocMetaEdit-module_moreBtn_c8CgD"};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(){I=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==L(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function R(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){R(a,r,o,i,c,"next",e)}function c(e){R(a,r,o,i,c,"throw",e)}i(void 0)}))}}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=a.a.Item,q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(l,e);var t,n,i,u=B(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),V(z(t=u.call(this,e)),"onSubmit",(function(e){e.preventDefault(),(0,t.props.form.validateFields)((function(e,n){e||t.handleUploadCover((function(){var e=t.state,r=e.showAuthorOptionData,o=e.description,a=e.cover,i={title:n.title,slug:n.slug,show_author_id:r.showAuthorId,public:t.state.public,custom_description:o,cover:a,custom_cover:a,show_author_option:r.showAuthorOption,show_author_custom_text:r.showAuthorCustomText};t.setState({submitting:!0},D(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.save(i);case 2:t.setState({submitting:!1});case 3:case"end":return e.stop()}}),e)}))))}))}))})),V(z(t),"handleUploadCover",(function(e){t.coverUploader.current?t.coverUploader.current.onSubmit().then((function(n){t.setState({cover:n||""},e)})):e()})),V(z(t),"onChangePermission",(function(e){t.setState({public:e})})),V(z(t),"handleChangeDesc",(function(e){t.setState({description:e.target.value})})),V(z(t),"showMore",(function(){var e;t.setState({showMore:!0});var n=t.props,r=n.doc,o=n.group,a=o&&o.abilities&&o.abilities.read_tag,i=null==r||null===(e=r.abilities)||void 0===e?void 0:e.update;(a||i)&&w.a.tags.find({docId:r.id}).then((function(e){t.setState({tags:e})}))})),V(z(t),"onAuthorShowOptionChange",(function(e){t.setState({showAuthorOptionData:e})}));var n=e.doc,r=g.a.getDocShowAuthorId(n),o=g.a.getDocShowAuthorOption(n),a=g.a.getDocShowAuthorCustomText(n);return t.state={public:n.public,cover:n.cover||"",description:null!=n.custom_description?n.custom_description:n.description||"",submitting:!1,showAuthorOptionData:{showAuthorId:r||void 0,showAuthorOption:o,showAuthorCustomText:a},showMore:!1,tags:[]},t.coverUploader=c.a.createRef(),t.tagBiz=new p.a({tagProxy:w.a.tags}),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this;"function"==typeof this.props.getSummary&&this.props.getSummary((function(t){var n=t.summary,r=t.cover;e.props.doc.custom_description||e.setState({description:n}),e.props.doc.cover||""===e.props.doc.cover||e.setState({cover:r})})),this.props.hideMoreInfo||this.showMore()}},{key:"componentWillUnmount",value:function(){this.coverUploader=null}},{key:"shouldSubmitDisabled",value:function(){var e=this.state,t=e.showAuthorOptionData,n=t.showAuthorId,r=t.showAuthorOption,o=t.showAuthorCustomText,a=e.submitting,i=r===f.a.SHOW_AUTHOR_OPTION.specific_user&&!n||r===f.a.SHOW_AUTHOR_OPTION.custom_text&&!o;return a||i}},{key:"renderPermission",value:function(){var e=this.props,t=e.group,n=e.book,r=e.doc,o=Object(b.b)({type:"book",target:n,group:t}).getPrivacyValue();if("User"===t.type&&0===o)return c.a.createElement("span",{className:"access-scope-tip"},__("私密知识库的文档不允许设置为公开，如有需要给其它用户阅读或编辑请使用 {help}",{help:c.a.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/bosazp",target:"_blank"},__("分享功能"))}));if(4===o)return c.a.createElement("span",{className:"access-scope-tip"},__("仅知识库成员可见知识库的文档不允许设置为公开，如有需要给其它用户阅读或编辑请添加为知识库成员或者使用 {help}",{help:c.a.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/bosazp",target:"_blank"},__("分享功能"))}));var a=Object(b.b)({type:"doc",target:r,group:t,book:n});return c.a.createElement(h.a,{type:"doc",isUser:"User"===t.type,isPublication:_.a.isPublication(t),defaultValue:a.getPrivacyValue(),items:Object(b.c)(a.getAllPrivacies()),permissions:Object(b.c)(a.getEnablePrivacies()),onChangePermission:this.onChangePermission})}},{key:"canEditDoc",value:function(){if(window.appData.sharePage)return!1;var e=this.props.doc;return"Thread"!==e.type&&e.abilities&&e.abilities.update}},{key:"renderTags",value:function(){var e=this.props,t=e.doc,n=e.group,r=this.state.tags,o=this.canEditDoc()&&t&&t.abilities&&t.abilities.destroy,a=o||r&&r.length,i=n&&"User"===n.type,u=__("标签用于管理，仅{desc}可见",{desc:i?__("自己"):_.a.memberTitle(n)});if(a)return c.a.createElement(Y,null,c.a.createElement("div",{className:A.tagWrapper},c.a.createElement("p",{className:A.title},__("标签"),c.a.createElement("span",{className:A.tagTip},u)),c.a.createElement(d.a,{tags:r||[],editable:o,group:n,docId:t.id,tagBiz:this.tagBiz})))}},{key:"render",value:function(){var e=this.props,t=e.doc,n=e.book,i=e.hideMoreInfo,u=e.hideTitle,l=this.props.form.getFieldDecorator,s="/".concat(n.namespace,"/"),f={xs:{span:24},sm:{span:14}},d=t.contributors||[],p=this.state.showMore,h=!i||p;return c.a.createElement("div",{className:"doc-meta-edit"},c.a.createElement(a.a,{layout:"vertical"},!u&&c.a.createElement(Y,{label:__("标题"),colon:!1,wrapperCol:f},l("title",{initialValue:t.title,rules:[{type:"string",required:!0,message:__("请输入标题")}]})(c.a.createElement(o.a,{type:"text",autoComplete:"off"}))),c.a.createElement(Y,{label:__("摘要"),colon:!1},c.a.createElement(o.a.TextArea,{value:this.state.description,onChange:this.handleChangeDesc,autoSize:{minRows:3,maxRows:6},maxLength:150})),c.a.createElement(Y,{label:__("封面"),colon:!1},c.a.createElement("div",{className:A.cover},c.a.createElement(y.a,{attachable_type:"Doc",attachable_id:t.id,cover:this.state.cover,ref:this.coverUploader}))),h?c.a.createElement(c.a.Fragment,null,c.a.createElement(Y,{label:__("作者"),colon:!1},c.a.createElement(T,{value:this.state.showAuthorOptionData,onChange:this.onAuthorShowOptionChange,contributors:d})),c.a.createElement(Y,{label:__("路径"),colon:!1,wrapperCol:f},l("slug",{initialValue:t.slug,rules:[{type:"string",required:!0,pattern:/^[a-z0-9\-_\.]{2,190}$/,message:__("访问路径为 2～190 个字符，只能输入小写字母、数字、横线、下划线和点")}]})(c.a.createElement(o.a,{type:"text",addonBefore:s,autoComplete:"off"}))),this.renderTags(),c.a.createElement(Y,{colon:!1,label:__("权限")},this.renderPermission())):c.a.createElement("div",{className:A.moreBtn,onClick:this.showMore},__("高级选项")," ",c.a.createElement(m.a,null)),c.a.createElement(r.a,{className:"doc-meta-edit-submit",type:"primary",onClick:this.onSubmit,disabled:this.shouldSubmitDisabled()},__("确定"))))}}])&&M(t.prototype,n),i&&M(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.Component);q.propTypes={group:l.a.object.isRequired,book:l.a.object.isRequired,doc:l.a.object,save:l.a.func,getSummary:l.a.func,hideMoreInfo:l.a.bool,hideTitle:l.a.bool};t.a=Object(v.b)(a.a.create()(q),!0)},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(50),n(19)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(560),s=n(909),f=n(2213),d="index-module_wrapper_+VH6f",p="index-module_logoWrapper_c37Qn",m="index-module_bucTip_4PwaJ";function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t=window.appData,n=t.organization,c=t.login,u=void 0===c?{}:c,y=t.isYuque,v=u.platform,b=u.corpLanding,g=u.loginType,_=h(Object(a.useState)(!!y&&e.visible),2),w=_[0],E=_[1],O=y?e.from:null;return Object(a.useEffect)((function(){var e,t,n,r;y||(e=null,t=null,n=null,r=function(){t&&window.removeEventListener("message",t),e&&clearTimeout(e),n&&n.parentNode&&n.parentNode.removeChild(n)},window.addEventListener("message",t=function(e){"logined"===e.data&&r()}),e=setTimeout((function(){E(!0),r()}),5e3),(n=document.createElement("iframe")).src="/r/session_expired",n.style.cssText="position: absolute; left: -9999px; top: -9999px; z-index: -1;",document.body.appendChild(n),console.log("re-login iframe created"))}),[]),y?i.a.createElement(r.a,{centered:!0,width:400,visible:e.visible,title:null,footer:null,onCancel:function(){"doc_reader"===O&&Object(s.a)("doc_reader_login_modal"),e.onCancel()}},i.a.createElement("div",{className:d},i.a.createElement("div",{className:p},i.a.createElement(l.a,{theme:"organization",switchMore:!1,logoSize:62})),i.a.createElement(f.a,{platform:v,corpLanding:b,organization:n,loginType:g,mode:"modal",onLogin:e.onCancel}))):i.a.createElement(r.a,{centered:!0,width:448,visible:w,title:__("登录状态失效"),footer:null,onCancel:function(){E(!1),e.onCancel&&e.onCancel()}},i.a.createElement("p",{className:m},__("当前登录状态已失效，请重新登录")),i.a.createElement(o.a,{type:"primary",onClick:function(){E(!1),e.onCancel&&e.onCancel(),window.open("/r/session_expired","_blank")}},__("去登录")))};v.propTypes={visible:u.a.bool,from:u.a.string,onCancel:u.a.func};t.a=v},function(e,t,n){"use strict";n(166);var r=n(65),o=(n(178),n(45)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(1269),s={data:"index-module_data_Daaol",dataTitle:"index-module_dataTitle_yzRAa",dataTitleWrapper:"index-module_dataTitleWrapper_fr-Hz",isLast:"index-module_isLast_qFaIw",dataSubject:"index-module_dataSubject_akxqO",dataNumber:"index-module_dataNumber_WNf1r",icon:"index-module_icon_Pl5Bp"},f=function(e){var t=e.statistics,n=[{icon:"larkicon-group-member",subject:__("成员"),data:t.member_count},{icon:"larkicon-team",subject:__("团队"),data:t.group_count},{icon:"larkicon-book",subject:__("知识库"),data:t.book_count},{icon:"larkicon-file",subject:__("文档"),data:t.doc_count}];return n.length?i.a.createElement("div",{className:s.data},i.a.createElement(r.a,null,n.map((function(e,t){var r=t===n.length-1?s.isLast:"";return i.a.createElement(o.a,{key:e.subject,span:6,className:s.dataItem},i.a.createElement("div",{className:"".concat(s.dataTitleWrapper," ").concat(r)},i.a.createElement("h2",{className:s.dataTitle},i.a.createElement("span",{className:"larkicon ".concat(e.icon," ").concat(s.icon)}),i.a.createElement("span",{className:s.dataSubject},e.subject)),i.a.createElement("p",{className:s.dataNumber},i.a.createElement(l.c,{number:e.data}))))})))):null};f.propTypes={statistics:u.a.object.isRequired};t.a=f},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";n(75);var r=n(26),o=(n(209),n(61)),a=n(0),i=n.n(a),c=n(2),u=n.n(c);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var y=o.a.Item,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(c,e);var t,n,o,a=p(c);function c(){return s(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this,t=document.createElement("script");t.src="https://g.alicdn.com/sd/ncpc/nc.js?t=1514534550478";var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href="https://g.alicdn.com/sd/ncpc/nc.css?t=1514534550478",document.head.appendChild(n),document.head.appendChild(t),this.props.show&&(t.onload=function(){e.componentDidUpdate({show:!1})})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.show,r=t.form,o=t.scene,a=t.onCallback;if(n&&n!==e.show){this.nc=new noCaptcha,window.nc=this.nc;var i="FFFF000000000179A3AD",c=[i,(new Date).getTime(),Math.random()].join(":"),u=o,l={renderTo:"#captcha_render_id",appkey:i,scene:u,token:c,language:"cn",callback:function(e){(0,r.setFieldsValue)({csessionid:e.csessionid,sig:e.sig,token:c,scene:u,captcha:"true"}),null==a||a()}};this.nc.init(l),this.nc.upLang("cn",{_startTEXT:__("按住滑块，拖动到最右边"),_yesTEXT:__("验证通过"),_error300:__('{wrongText}<a href="javascript:__nc.reset()">{refresh}</a>',{wrongText:__("哎呀，出错了，单击"),refresh:__("刷新")}),_errorNetwork:__('{wrongText}<a href="javascript:__nc.reset()">{refresh}</a>',{wrongText:__("网络不给力，单击"),refresh:__("刷新")})})}}},{key:"reset",value:function(){(0,this.props.form.setFieldsValue)({captcha:null}),this.nc&&this.nc.reset(1)}},{key:"getValues",value:function(){return this.props.form.getFieldsValue(["csessionid","sig","token","scene","captcha"])}},{key:"render",value:function(){var e=this.props.show,t=this.props.form.getFieldDecorator;return e?i.a.createElement("div",{className:"captcha","data-aspm-click":"d004","data-testid":"captcha"},i.a.createElement("div",{id:"captcha_render_id"}),t("csessionid",{})(i.a.createElement(r.a,{type:"hidden"})),t("sig",{})(i.a.createElement(r.a,{type:"hidden"})),t("token",{})(i.a.createElement(r.a,{type:"hidden"})),t("scene",{})(i.a.createElement(r.a,{type:"hidden"})),i.a.createElement(y,null,t("captcha",{rules:[{required:!0,message:__("拖动滑块验证")}]})(i.a.createElement(r.a,{type:"hidden"})))):null}}])&&f(t.prototype,n),o&&f(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.Component);v.defaultProps={show:!1},v.propTypes={show:u.a.bool,form:u.a.object,scene:u.a.string,onCallback:u.a.func};t.a=v},function(e,t,n){"use strict";n(584);var r=n(283),o=(n(50),n(19)),a=(n(148),n(53)),i=(n(209),n(61)),c=(n(75),n(26)),u=n(0),l=n.n(u),s=n(2),f=n.n(s),d="CatalogLinkForm-module_formItem_NxeJR",p="CatalogLinkForm-module_actions_Y-0Ny";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t=e.item,n=e.form.getFieldDecorator,s=function(e){var t=e.form,n=e.item,r=!n||0!==n.open_window,o=h(Object(u.useState)(r),2),a=o[0],i=o[1];return{state:{openWindow:a},onSubmit:function(){t.validateFields((function(t,n){t||e.onSubmit({title:n.title,url:n.url,open_window:!1===a?0:1})}))},handleChangeOpenWindow:function(e){i(e.target.checked)}}}(e),f={colon:!1,className:d};return l.a.createElement(r.a,{autoInsertSpaceInButton:!1},l.a.createElement(i.a,null,l.a.createElement(i.a.Item,m({label:__("标题")},f),n("title",{initialValue:t&&t.title,rules:[{required:!0,message:__("请输入标题")}]})(l.a.createElement(c.a,null))),l.a.createElement(i.a.Item,m({label:__("网页链接")},f),n("url",{initialValue:t&&t.url,rules:[{required:!0,message:__("请输入链接")}]})(l.a.createElement(c.a,null))),l.a.createElement(i.a.Item,null,l.a.createElement(a.a,{checked:s.state.openWindow,onChange:s.handleChangeOpenWindow},__("在新标签页打开"))),l.a.createElement("div",{className:p},l.a.createElement(o.a,{onClick:e.onCancel},__("取消")),l.a.createElement(i.a.Item,null,l.a.createElement(o.a,{type:"primary",htmlType:"submit",onClick:s.onSubmit},__("确认"))))))};v.propTypes={item:f.a.object,onCancel:f.a.func.isRequired,onSubmit:f.a.func.isRequired,form:f.a.object.isRequired};t.a=i.a.create()(v)},function(e,t,n){"use strict";var r={};function o(e,t){0}function a(e,t,n){t||r[n]||(e(!1,n),r[n]=!0)}t.a=function(e,t){a(o,e,t)}},,function(e,t,n){"use strict";var r=n(381),o=Object(r.a)({loader:function(){return n.e(0).then(n.bind(null,420))}});t.a=o},,function(e,t,n){"use strict";var r=n(232),o=n.n(r),a=n(39),i=n.n(a),c=n(2239),u=n.n(c),l=n(2240),s=n.n(l),f=n(1910),d=n.n(f),p=n(508),m=n.n(p),h=n(1019),y=n.n(h),v=n(0),b=n.n(v),g=n(2017),_=n.n(g),w=n(1331),E=n(2241),O=n.n(E),x=n(1003),j=n.n(x),k=n(56),S=n.n(k),C=n(544),N=n.n(C),P=n(960),T=n.n(P),A=n(579),L=n.n(A),I=n(648),R=n.n(I),D=n(849),M=n(59),F=n.n(M),B=n(292);function U(e,t){return e.displayName="Form("+function(e){return e.displayName||e.name||"WrappedComponent"}(t)+")",e.WrappedComponent=t,F()(e,t)}function z(e){return e}function G(e){return Array.prototype.concat.apply([],e)}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2],r=arguments[3],o=arguments[4];if(n(e,t))o(e,t);else if(null==t);else if(Array.isArray(t))t.forEach((function(t,a){return V(e+"["+a+"]",t,n,r,o)}));else{if("object"!=typeof t)return void j()(!1,r);Object.keys(t).forEach((function(a){var i=t[a];V(e+(e?".":"")+a,i,n,r,o)}))}}function Y(e,t,n){var r={};return V(void 0,e,t,n,(function(e,t){r[e]=t})),r}function q(e,t,n){var r=e.map((function(e){var t=o()({},e,{trigger:e.trigger||[]});return"string"==typeof t.trigger&&(t.trigger=[t.trigger]),t}));return t&&r.push({trigger:n?[].concat(n):[],rules:t}),r}function H(e){return e.filter((function(e){return!!e.rules&&e.rules.length})).map((function(e){return e.trigger})).reduce((function(e,t){return e.concat(t)}),[])}function W(e){if(!e||!e.target)return e;var t=e.target;return"checkbox"===t.type?t.checked:t.value}function K(e,t,n){var r=e,o=t,a=n;return void 0===n&&("function"==typeof r?(a=r,o={},r=void 0):Array.isArray(r)?"function"==typeof o?(a=o,o={}):o=o||{}:(a=o,o=r||{},r=void 0)),{names:r,options:o,callback:a}}function $(e){return 0===Object.keys(e).length}function Q(e){return!!e&&e.some((function(e){return e.rules&&e.rules.length}))}function X(e){var t=Object(B.isMemo)(e)?e.type.type:e.type;return!!("function"!=typeof t||t.prototype&&t.prototype.render)&&!!("function"!=typeof e||e.prototype&&e.prototype.render)}function J(e,t){return 0===t.indexOf(e)&&-1!==[".","["].indexOf(t[e.length])}function Z(e){return Y(e,(function(e,t){return Object(D.b)(t)}),"You must wrap field data with `createFormField`.")}var ee=function(){function e(t){L()(this,e),te.call(this),this.fields=Z(t),this.fieldsMeta={}}return R()(e,[{key:"updateFields",value:function(e){this.fields=Z(e)}},{key:"flattenRegisteredFields",value:function(e){var t=this.getAllFieldsName();return Y(e,(function(e){return t.indexOf(e)>=0}),"You cannot set a form field before rendering a field associated with the value.")}},{key:"setFields",value:function(e){var t=this,n=this.fieldsMeta,r=o()({},this.fields,e),a={};Object.keys(n).forEach((function(e){a[e]=t.getValueFromFields(e,r)})),Object.keys(a).forEach((function(e){var n=a[e],i=t.getFieldMeta(e);if(i&&i.normalize){var c=i.normalize(n,t.getValueFromFields(e,t.fields),a);c!==n&&(r[e]=o()({},r[e],{value:c}))}})),this.fields=r}},{key:"resetFields",value:function(e){var t=this.fields;return(e?this.getValidFieldsFullName(e):this.getAllFieldsName()).reduce((function(e,n){var r=t[n];return r&&"value"in r&&(e[n]={}),e}),{})}},{key:"setFieldMeta",value:function(e,t){this.fieldsMeta[e]=t}},{key:"setFieldsAsDirty",value:function(){var e=this;Object.keys(this.fields).forEach((function(t){var n=e.fields[t],r=e.fieldsMeta[t];n&&r&&Q(r.validate)&&(e.fields[t]=o()({},n,{dirty:!0}))}))}},{key:"getFieldMeta",value:function(e){return this.fieldsMeta[e]=this.fieldsMeta[e]||{},this.fieldsMeta[e]}},{key:"getValueFromFields",value:function(e,t){var n=t[e];if(n&&"value"in n)return n.value;var r=this.getFieldMeta(e);return r&&r.initialValue}},{key:"getValidFieldsName",value:function(){var e=this,t=this.fieldsMeta;return t?Object.keys(t).filter((function(t){return!e.getFieldMeta(t).hidden})):[]}},{key:"getAllFieldsName",value:function(){var e=this.fieldsMeta;return e?Object.keys(e):[]}},{key:"getValidFieldsFullName",value:function(e){var t=Array.isArray(e)?e:[e];return this.getValidFieldsName().filter((function(e){return t.some((function(t){return e===t||(n=t,0===e.lastIndexOf(n,0)&&[".","["].indexOf(e[t.length])>=0);var n}))}))}},{key:"getFieldValuePropValue",value:function(e){var t=e.name,n=e.getValueProps,r=e.valuePropName,o=this.getField(t),a="value"in o?o.value:e.initialValue;return n?n(a):m()({},r,a)}},{key:"getField",value:function(e){return o()({},this.fields[e],{name:e})}},{key:"getNotCollectedFields",value:function(){var e=this;return this.getValidFieldsName().filter((function(t){return!e.fields[t]})).map((function(t){return{name:t,dirty:!1,value:e.getFieldMeta(t).initialValue}})).reduce((function(e,t){return N()(e,t.name,Object(D.a)(t))}),{})}},{key:"getNestedAllFields",value:function(){var e=this;return Object.keys(this.fields).reduce((function(t,n){return N()(t,n,Object(D.a)(e.fields[n]))}),this.getNotCollectedFields())}},{key:"getFieldMember",value:function(e,t){return this.getField(e)[t]}},{key:"getNestedFields",value:function(e,t){return(e||this.getValidFieldsName()).reduce((function(e,n){return N()(e,n,t(n))}),{})}},{key:"getNestedField",value:function(e,t){var n=this.getValidFieldsFullName(e);if(0===n.length||1===n.length&&n[0]===e)return t(e);var r="["===n[0][e.length],o=r?e.length:e.length+1;return n.reduce((function(e,n){return N()(e,n.slice(o),t(n))}),r?[]:{})}},{key:"isValidNestedFieldName",value:function(e){return this.getAllFieldsName().every((function(t){return!J(t,e)&&!J(e,t)}))}},{key:"clearField",value:function(e){delete this.fields[e],delete this.fieldsMeta[e]}}]),e}(),te=function(){var e=this;this.setFieldsInitialValue=function(t){var n=e.flattenRegisteredFields(t),r=e.fieldsMeta;Object.keys(n).forEach((function(t){r[t]&&e.setFieldMeta(t,o()({},e.getFieldMeta(t),{initialValue:n[t]}))}))},this.getAllValues=function(){var t=e.fieldsMeta,n=e.fields;return Object.keys(t).reduce((function(t,r){return N()(t,r,e.getValueFromFields(r,n))}),{})},this.getFieldsValue=function(t){return e.getNestedFields(t,e.getFieldValue)},this.getFieldValue=function(t){var n=e.fields;return e.getNestedField(t,(function(t){return e.getValueFromFields(t,n)}))},this.getFieldsError=function(t){return e.getNestedFields(t,e.getFieldError)},this.getFieldError=function(t){return e.getNestedField(t,(function(t){return(n=e.getFieldMember(t,"errors"))?n.map((function(e){return e&&e.message?e.message:e})):n;var n}))},this.isFieldValidating=function(t){return e.getFieldMember(t,"validating")},this.isFieldsValidating=function(t){return(t||e.getValidFieldsName()).some((function(t){return e.isFieldValidating(t)}))},this.isFieldTouched=function(t){return e.getFieldMember(t,"touched")},this.isFieldsTouched=function(t){return(t||e.getValidFieldsName()).some((function(t){return e.isFieldTouched(t)}))}};function ne(e){return new ee(e)}var re=n(894),oe=n.n(re),ae=n(895),ie=n.n(ae),ce=n(2),ue=n.n(ce),le=function(e){function t(){return L()(this,t),oe()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ie()(t,e),R()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,n=e.form;n.domFields[t]=!0,n.recoverClearedField(t)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.name,n=e.form,r=n.fieldsStore.getFieldMeta(t);r.preserve||(n.clearedFieldMetaCache[t]={field:n.fieldsStore.getField(t),meta:r},n.clearField(t)),delete n.domFields[t]}},{key:"render",value:function(){return this.props.children}}]),t}(b.a.Component),se=le;le.propTypes={name:ue.a.string,form:ue.a.shape({domFields:ue.a.objectOf(ue.a.bool),recoverClearedField:ue.a.func,fieldsStore:ue.a.shape({getFieldMeta:ue.a.func,getField:ue.a.func}),clearedFieldMetaCache:ue.a.objectOf(ue.a.shape({field:ue.a.object,meta:ue.a.object})),clearField:ue.a.func}),children:ue.a.node};var fe="onChange";var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.validateMessages,r=e.onFieldsChange,a=e.onValuesChange,i=e.mapProps,c=void 0===i?z:i,u=e.mapPropsToFields,l=e.fieldNameProp,s=e.fieldMetaProp,f=e.fieldDataProp,p=e.formPropName,h=void 0===p?"form":p,v=e.name,g=e.withRef;return function(e){var i=_()({displayName:"Form",mixins:t,getInitialState:function(){var e=this,t=u&&u(this.props);return this.fieldsStore=ne(t||{}),this.instances={},this.cachedBind={},this.clearedFieldMetaCache={},this.renderFields={},this.domFields={},["getFieldsValue","getFieldValue","setFieldsInitialValue","getFieldsError","getFieldError","isFieldValidating","isFieldsValidating","isFieldsTouched","isFieldTouched"].forEach((function(t){e[t]=function(){var n;return(n=e.fieldsStore)[t].apply(n,arguments)}})),{submitting:!1}},componentDidMount:function(){this.cleanUpUselessFields()},componentWillReceiveProps:function(e){u&&this.fieldsStore.updateFields(u(e))},componentDidUpdate:function(){this.cleanUpUselessFields()},onCollectCommon:function(e,t,n){var r=this.fieldsStore.getFieldMeta(e);if(r[t])r[t].apply(r,y()(n));else if(r.originalProps&&r.originalProps[t]){var i;(i=r.originalProps)[t].apply(i,y()(n))}var c=r.getValueFromEvent?r.getValueFromEvent.apply(r,y()(n)):W.apply(void 0,y()(n));if(a&&c!==this.fieldsStore.getFieldValue(e)){var u=this.fieldsStore.getAllValues(),l={};u[e]=c,Object.keys(u).forEach((function(e){return N()(l,e,u[e])})),a(o()(m()({},h,this.getForm()),this.props),N()({},e,c),l)}var s=this.fieldsStore.getField(e);return{name:e,field:o()({},s,{value:c,touched:!0}),fieldMeta:r}},onCollect:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=this.onCollectCommon(e,t,r),c=i.name,u=i.field,l=i.fieldMeta,s=l.validate;this.fieldsStore.setFieldsAsDirty();var f=o()({},u,{dirty:Q(s)});this.setFields(m()({},c,f))},onCollectValidate:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=this.onCollectCommon(e,t,r),c=i.field,u=i.fieldMeta,l=o()({},c,{dirty:!0});this.fieldsStore.setFieldsAsDirty(),this.validateFieldsInternal([l],{action:t,options:{firstFields:!!u.validateFirst}})},getCacheBind:function(e,t,n){this.cachedBind[e]||(this.cachedBind[e]={});var r=this.cachedBind[e];return r[t]&&r[t].oriFn===n||(r[t]={fn:n.bind(this,e,t),oriFn:n}),r[t].fn},getFieldDecorator:function(e,t){var n=this,r=this.getFieldProps(e,t);return function(t){n.renderFields[e]=!0;var a=n.fieldsStore.getFieldMeta(e),i=t.props;a.originalProps=i,a.ref=t.ref;var c=b.a.cloneElement(t,o()({},r,n.fieldsStore.getFieldValuePropValue(a)));return X(t)?c:b.a.createElement(se,{name:e,form:n},c)}},getFieldProps:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Must call `getFieldProps` with valid name string!");delete this.clearedFieldMetaCache[e];var r=o()({name:e,trigger:fe,valuePropName:"value",validate:[]},n),a=r.rules,i=r.trigger,c=r.validateTrigger,u=void 0===c?i:c,d=r.validate,p=this.fieldsStore.getFieldMeta(e);"initialValue"in r&&(p.initialValue=r.initialValue);var m=o()({},this.fieldsStore.getFieldValuePropValue(r),{ref:this.getCacheBind(e,e+"__ref",this.saveRef)});l&&(m[l]=v?v+"_"+e:e);var h=q(d,a,u),y=H(h);y.forEach((function(n){m[n]||(m[n]=t.getCacheBind(e,n,t.onCollectValidate))})),i&&-1===y.indexOf(i)&&(m[i]=this.getCacheBind(e,i,this.onCollect));var b=o()({},p,r,{validate:h});return this.fieldsStore.setFieldMeta(e,b),s&&(m[s]=b),f&&(m[f]=this.fieldsStore.getField(e)),this.renderFields[e]=!0,m},getFieldInstance:function(e){return this.instances[e]},getRules:function(e,t){return G(e.validate.filter((function(e){return!t||e.trigger.indexOf(t)>=0})).map((function(e){return e.rules})))},setFields:function(e,t){var n=this,a=this.fieldsStore.flattenRegisteredFields(e);if(this.fieldsStore.setFields(a),r){var i=Object.keys(a).reduce((function(e,t){return N()(e,t,n.fieldsStore.getField(t))}),{});r(o()(m()({},h,this.getForm()),this.props),i,this.fieldsStore.getNestedAllFields())}this.forceUpdate(t)},setFieldsValue:function(e,t){var n=this.fieldsStore.fieldsMeta,r=this.fieldsStore.flattenRegisteredFields(e),i=Object.keys(r).reduce((function(e,t){if(n[t]){var o=r[t];e[t]={value:o}}return e}),{});if(this.setFields(i,t),a){var c=this.fieldsStore.getAllValues();a(o()(m()({},h,this.getForm()),this.props),e,c)}},saveRef:function(e,t,n){if(!n){var r=this.fieldsStore.getFieldMeta(e);return r.preserve||(this.clearedFieldMetaCache[e]={field:this.fieldsStore.getField(e),meta:r},this.clearField(e)),void delete this.domFields[e]}this.domFields[e]=!0,this.recoverClearedField(e);var o=this.fieldsStore.getFieldMeta(e);if(o){var a=o.ref;if(a){if("string"==typeof a)throw new Error("can not set ref string for "+e);"function"==typeof a?a(n):Object.prototype.hasOwnProperty.call(a,"current")&&(a.current=n)}}this.instances[e]=n},cleanUpUselessFields:function(){var e=this,t=this.fieldsStore.getAllFieldsName().filter((function(t){var n=e.fieldsStore.getFieldMeta(t);return!e.renderFields[t]&&!e.domFields[t]&&!n.preserve}));t.length&&t.forEach(this.clearField),this.renderFields={}},clearField:function(e){this.fieldsStore.clearField(e),delete this.instances[e],delete this.cachedBind[e]},resetFields:function(e){var t=this,n=this.fieldsStore.resetFields(e);(Object.keys(n).length>0&&this.setFields(n),e)?(Array.isArray(e)?e:[e]).forEach((function(e){return delete t.clearedFieldMetaCache[e]})):this.clearedFieldMetaCache={}},recoverClearedField:function(e){this.clearedFieldMetaCache[e]&&(this.fieldsStore.setFields(m()({},e,this.clearedFieldMetaCache[e].field)),this.fieldsStore.setFieldMeta(e,this.clearedFieldMetaCache[e].meta),delete this.clearedFieldMetaCache[e])},validateFieldsInternal:function(e,t,r){var a=this,i=t.fieldNames,c=t.action,u=t.options,l=void 0===u?{}:u,s={},f={},d={},p={};if(e.forEach((function(e){var t=e.name;if(!0===l.force||!1!==e.dirty){var n=a.fieldsStore.getFieldMeta(t),r=o()({},e);r.errors=void 0,r.validating=!0,r.dirty=!0,s[t]=a.getRules(n,c),f[t]=r.value,d[t]=r}else e.errors&&N()(p,t,{errors:e.errors})})),this.setFields(d),Object.keys(f).forEach((function(e){f[e]=a.fieldsStore.getFieldValue(e)})),r&&$(d))r($(p)?null:p,this.fieldsStore.getFieldsValue(i));else{var m=new O.a(s);n&&m.messages(n),m.validate(f,l,(function(e){var t=o()({},p);e&&e.length&&e.forEach((function(e){var n=e.field,r=n;Object.keys(s).some((function(e){var t=s[e]||[];if(e===n)return r=e,!0;if(t.every((function(e){return"array"!==e.type}))||0!==n.indexOf(e+"."))return!1;var o=n.slice(e.length+1);return!!/^\d+$/.test(o)&&(r=e,!0)}));var o=S()(t,r);("object"!=typeof o||Array.isArray(o))&&N()(t,r,{errors:[]}),S()(t,r.concat(".errors")).push(e)}));var n=[],c={};Object.keys(s).forEach((function(e){var r=S()(t,e),o=a.fieldsStore.getField(e);T()(o.value,f[e])?(o.errors=r&&r.errors,o.value=f[e],o.validating=!1,o.dirty=!1,c[e]=o):n.push({name:e})})),a.setFields(c),r&&(n.length&&n.forEach((function(e){var n=e.name,r=[{message:n+" need to revalidate",field:n}];N()(t,n,{expired:!0,errors:r})})),r($(t)?null:t,a.fieldsStore.getFieldsValue(i)))}))}},validateFields:function(e,t,n){var r=this,o=new Promise((function(o,a){var i=K(e,t,n),c=i.names,u=i.options,l=K(e,t,n).callback;if(!l||"function"==typeof l){var s=l;l=function(e,t){s&&s(e,t),e?a({errors:e,values:t}):o(t)}}var f=c?r.fieldsStore.getValidFieldsFullName(c):r.fieldsStore.getValidFieldsName(),d=f.filter((function(e){return Q(r.fieldsStore.getFieldMeta(e).validate)})).map((function(e){var t=r.fieldsStore.getField(e);return t.value=r.fieldsStore.getFieldValue(e),t}));d.length?("firstFields"in u||(u.firstFields=f.filter((function(e){return!!r.fieldsStore.getFieldMeta(e).validateFirst}))),r.validateFieldsInternal(d,{fieldNames:f,options:u},l)):l(null,r.fieldsStore.getFieldsValue(f))}));return o.catch((function(e){return console.error,e})),o},isSubmitting:function(){return this.state.submitting},submit:function(e){var t=this;this.setState({submitting:!0}),e((function(){t.setState({submitting:!1})}))},render:function(){var t=this.props,n=t.wrappedComponentRef,r=d()(t,["wrappedComponentRef"]),a=m()({},h,this.getForm());g?a.ref="wrappedComponent":n&&(a.ref=n);var i=c.call(this,o()({},a,r));return b.a.createElement(e,i)}});return U(Object(w.a)(i),e)}},pe={getForm:function(){return{getFieldsValue:this.fieldsStore.getFieldsValue,getFieldValue:this.fieldsStore.getFieldValue,getFieldInstance:this.getFieldInstance,setFieldsValue:this.setFieldsValue,setFields:this.setFields,setFieldsInitialValue:this.fieldsStore.setFieldsInitialValue,getFieldDecorator:this.getFieldDecorator,getFieldProps:this.getFieldProps,getFieldsError:this.fieldsStore.getFieldsError,getFieldError:this.fieldsStore.getFieldError,isFieldValidating:this.fieldsStore.isFieldValidating,isFieldsValidating:this.fieldsStore.isFieldsValidating,isFieldsTouched:this.fieldsStore.isFieldsTouched,isFieldTouched:this.fieldsStore.isFieldTouched,isSubmitting:this.isSubmitting,submit:this.submit,validateFields:this.validateFields,resetFields:this.resetFields}}};function me(e,t){var n=window.getComputedStyle,r=n?n(e):e.currentStyle;if(r)return r[t.replace(/-(\w)/gi,(function(e,t){return t.toUpperCase()}))]}var he={getForm:function(){return o()({},pe.getForm.call(this),{validateFieldsAndScroll:this.validateFieldsAndScroll})},validateFieldsAndScroll:function(e,t,n){var r=this,a=K(e,t,n),c=a.names,l=a.callback,f=a.options;return this.validateFields(c,f,(function(e,t){if(e){var n=r.fieldsStore.getValidFieldsName(),a=void 0,c=void 0;if(n.forEach((function(t){if(s()(e,t)){var n=r.getFieldInstance(t);if(n){var o=i.a.findDOMNode(n),u=o.getBoundingClientRect().top;"hidden"!==o.type&&(void 0===c||c>u)&&(c=u,a=o)}}})),a){var d=f.container||function(e){for(var t=e,n=void 0;"body"!==(n=t.nodeName.toLowerCase());){var r=me(t,"overflowY");if(t!==e&&("auto"===r||"scroll"===r)&&t.scrollHeight>t.clientHeight)return t;t=t.parentNode}return"body"===n?t.ownerDocument:t}(a);u()(a,d,o()({onlyScrollIfNeeded:!0},f.scroll))}}"function"==typeof l&&l(e,t)}))}};t.a=function(e){return de(o()({},e),[he])}},function(e,t,n){"use strict";n(421);var r=n(284),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(68),l=n(10),s=n.n(l),f=n(88),d=n(1073),p=n(254),m=n(210),h=n(34),y=n(91),v=n(89),b=n(109),g=n(357),_=n(1461),w={navWrapper:"GlobalNav-module_navWrapper_Z-gK4",nav:"GlobalNav-module_nav_FMk3U",navLink:"GlobalNav-module_navLink_13bz2",icon:"GlobalNav-module_icon_iPzDU",iconActive:"GlobalNav-module_iconActive_Hqf3j",active:"GlobalNav-module_active_3rB2y",navBlock:"GlobalNav-module_navBlock_oxYmK",navBlockTitle:"GlobalNav-module_navBlockTitle_BgWOw",title:"GlobalNav-module_title_pTED7",commonList:"GlobalNav-module_commonList_3UD38",commonListItem:"GlobalNav-module_commonListItem_+oVjl",bookItem:"GlobalNav-module_bookItem_7K+wJ",bookItemName:"GlobalNav-module_bookItemName_xMDDp",bookItemScope:"GlobalNav-module_bookItemScope_z5NLt",groupItem:"GlobalNav-module_groupItem_dJ6v+"};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(){k=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(j([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==E(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function S(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}var C=r.a.Panel,N=function(e){var t=Object(o.useRef)(),n=window.appData.hideGroupNav,i=e.organization,c=e.me,u=i&&i.id,l="dashboard_".concat(u?i.id:0,"/sidebar_active_keys"),f=e.dispatch,b=e.history,E=c.commonUsedBooks,j=c.commonUsedGroups,N=function(){var e,n=(e=k().mark((function e(){var n,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.mine.commonUsed({},{useOriginResp:!0});case 2:r=e.sent,f({type:"me/update",payload:{commonUsedBooks:r.data.books,commonUsedGroups:r.data.groups}}),null==t||null===(n=t.current)||void 0===n||n.scrollIntoView();case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){S(a,r,o,i,c,"next",e)}function c(e){S(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),P=y.default.get(l)&&JSON.parse(y.default.get(l)),T=x(Object(o.useState)(P||["books","groups"]),2),A=T[0],L=T[1];function I(t){e.isInDashboard?b.push(t):window.location.href=t}Object(o.useEffect)((function(){N()}),[]);return a.a.createElement("div",{className:s()(w.wrapper,O({},w.navWrapper,!e.isInDashboard))},a.a.createElement("ul",{className:w.nav,"data-aspm":"c61496"},a.a.createElement("li",null,a.a.createElement("span",{exact:!0,onClick:function(){return I("/dashboard/recent")},className:s()(w.navLink,O({},w.active,/\/dashboard(\/recent(\/)?|\/)?$/.test(window.location.pathname))),"data-aspm-click":"d135993","data-testid":"dashboard-sidebar-btn-recent"},a.a.createElement(m.IconTime,{width:16,className:w.iconActive}),a.a.createElement(m.IconTimeOutlined,{name:"time-outlined",width:16,className:w.icon}),__("最近#nav"))),a.a.createElement("li",null,a.a.createElement("span",{onClick:function(){return I("/dashboard/notes")},className:s()(w.navLink,O({},w.active,"/dashboard/notes"===window.location.pathname)),"data-aspm-click":"d130155","data-testid":"dashboard-sidebar-btn-note"},a.a.createElement(m.IconFeather,{width:16,className:w.iconActive}),a.a.createElement(m.IconFeatherOutlined,{width:16,className:w.icon}),__("小记#nav"))),a.a.createElement("li",null,a.a.createElement("span",{onClick:function(){return I("/dashboard/collections")},className:s()(w.navLink,O({},w.active,"/dashboard/collections"===window.location.pathname)),"data-aspm-click":"d126716","data-testid":"dashboard-sidebar-btn-collection"},a.a.createElement(m.IconStar,{width:16,className:w.iconActive}),a.a.createElement(m.IconStarOutlined,{width:16,className:w.icon}),__("收藏#nav"))),a.a.createElement("li",null,a.a.createElement(r.a,{ghost:!0,activeKey:A,expandIcon:function(t){var n=t.isActive,r=t.panelKey;return a.a.createElement("span",{onClick:function(){!function(t){if(b&&e.isInDashboard)switch(t){case"books":I("/dashboard/my_books");break;case"groups":I("/dashboard/groups");break;case"publications":I("/dashboard/publications")}}(r)}},a.a.createElement(d.a,{rotate:n?90:0}))},onChange:function(e){L(e),y.default.set(l,JSON.stringify(e))}},a.a.createElement(C,{header:a.a.createElement("span",{className:s()(w.navBlockTitle,O({},w.active,"/dashboard/my_books"===window.location.pathname)),onClick:function(e){e.stopPropagation(),I("/dashboard/my_books")},"data-aspm-click":"c61496_c372.d136049","data-testid":"dashboard-sidebar-btn-personal-book"},a.a.createElement("span",{className:w.title},__("我的知识库#nav")),a.a.createElement("span",{className:w.icon},a.a.createElement(p.a,null))),key:"books",className:w.navBlock},E.length>0&&a.a.createElement("ul",{className:w.commonList},E.map((function(e,t){return a.a.createElement("li",{key:e.id,className:w.commonListItem,"data-aspm-click":"c61496_c372.d136048_".concat(t)},function(e){var t=e.target||e;return t?a.a.createElement("a",{className:w.bookItem,href:e.url,title:t.name},a.a.createElement(g.a.Icon,{book:t,width:20}),a.a.createElement("span",{className:w.bookItemName,title:t.name},t.name),a.a.createElement("span",{className:w.bookItemScope},a.a.createElement(g.a.AccessScope,{public:t.public,size:14}))):null}(e))})))),!n&&a.a.createElement(C,{header:a.a.createElement("span",{className:s()(w.navBlockTitle,O({},w.active,"/dashboard/groups"===window.location.pathname)),onClick:function(e){e.stopPropagation(),I("/dashboard/groups")},"data-aspm-click":"c61496_c374.d136044","data-testid":"dashboard-sidebar-btn-group"},a.a.createElement("span",{className:w.title},v.a.isPublication()?__("知识小组#nav"):__("团队")),a.a.createElement("span",{className:w.icon},a.a.createElement(p.a,null))),key:"groups",className:w.navBlock},j.length>0&&a.a.createElement("ul",{className:w.commonList},j.map((function(n,r){var o,i,c=n.target||n;return c?a.a.createElement("li",{key:n.id,className:s()(w.commonListItem,O({},w.active,(null===(o=e.group)||void 0===o?void 0:o.login)===c.login)),"data-aspm-click":"c61496_c374.d136045_".concat(r),ref:(null===(i=e.group)||void 0===i?void 0:i.login)===c.login?t:null},a.a.createElement(_.a,{group:c,className:w.groupItem,avatarSize:20,linkTarget:e.isInDashboard?"_self":"_blank"})):null})))))),a.a.createElement("li",null,a.a.createElement("span",{className:s()(w.navLink,O({},w.active,"/dashboard/recycles"===window.location.pathname)),onClick:function(){return I("/dashboard/recycles")},"data-aspm-click":"d126718","data-testid":"dashboard-sidebar-btn-recycle"},a.a.createElement(m.IconNewtrash,{width:16,className:w.iconActive}),a.a.createElement(m.IconNewtrashOutlined,{width:16,className:w.icon}),__("回收站")))))};N.propTypes={me:c.a.object.isRequired,organization:c.a.object.isRequired,group:c.a.object,history:c.a.object,dispatch:c.a.func,isInDashboard:c.a.bool};t.a=Object(b.b)(Object(f.d)((function(e){return{me:e.me,organization:e.organization,group:e.group}}))(Object(u.withRouter)(N)))},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(0),o=n(261),a=n(893),i="styles-module_selector_Z3+Wx",c="styles-module_title_Misjv",u=["title","onClose","onSelect"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=function(e){var t=e.title,n=e.onClose,a=e.onSelect,l=p(e,u);return r.createElement("div",{className:i},r.createElement("button",{type:"button","aria-label":"Close",className:"ant-modal-close",onClick:n},r.createElement("span",{className:"ant-modal-close-x"},r.createElement(o.a,null))),r.createElement("h3",{className:c},t),r.createElement(e.selectorSlot,f(f({},l),{},{onBookSelect:function(e){return a(e)}})))},h=function(){return n.e(0).then(n.bind(null,2851)).then((function(e){var t=e.default;return r.memo((function(e){return r.createElement(m,l({},e,{selectorSlot:t}))}))}))};function y(){var e=Object(a.a)({loader:h,name:"BookSelector"}),t=e.loadSelector,n=e.showSelector;return{loadBookSelector:t,showBookSelector:function(e){return n(e,{width:520,maskClosable:!0,centered:!0})},contextHolder:e.contextHolder}}},function(e,t,n){"use strict";n(173);var r=n(94),o=(n(148),n(53)),a=(n(96),n(23)),i=(n(245),n(64)),c=(n(133),n(31)),u=(n(1250),n(920)),l=n(0),s=n.n(l),f=n(2),d=n.n(f),p=n(34),m=n(38),h=n(10),y=n.n(h),v=n(113),b=n(2348),g={loadingContainer:"DepartmentTree-module_loadingContainer_hEykq",container:"DepartmentTree-module_container_dtBGx",disableRoot:"DepartmentTree-module_disableRoot_MgKTa",checkAll:"DepartmentTree-module_checkAll_IcDGl",treeTitleContainer:"DepartmentTree-module_treeTitleContainer_TA36B",action:"DepartmentTree-module_action_hHUPe",title:"DepartmentTree-module_title_CTCkI",actionIcon:"DepartmentTree-module_actionIcon_wXnym",actionAdd:"DepartmentTree-module_actionAdd_R+nKU"};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(){w=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==_(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function E(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,c,"next",e)}function c(e){E(a,r,o,i,c,"throw",e)}i(void 0)}))}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function k(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=u.a.DirectoryTree;function N(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=j(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push(o.key),n=N(o.children,n)}}catch(a){r.e(a)}finally{r.f()}return n}function P(e){var t=e.departments,n=e.loadData,u=e.selectedDeps,f=e.onSelect,d=e.multiple,h=e.treeClassName,_=e.loading,E=e.disableSelectAll,j=e.disableRoot,k=e.department,S=e.onChange,P=e.editable,T=N(t,[]),A=x(Object(l.useState)(["0"]),2),L=A[0],I=A[1],R=x(Object(l.useState)(!1),2),D=R[0],M=R[1],F=x(Object(l.useState)("add"),2),B=F[0],U=F[1],z=v.a.isWeixinAddressBook();function G(e){M(!0),U(e)}function V(e){return Y.apply(this,arguments)}function Y(){return(Y=O(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.departments.destroy({id:t.id});case 2:S([t.parent_id],"delete");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q,H,W;return s.a.createElement("div",{className:y()(g.container,(q={},H=g.disableRoot,W=j,H in q?Object.defineProperty(q,H,{value:W,enumerable:!0,configurable:!0,writable:!0}):q[H]=W,q)),"data-testid":"departments-tree"},d&&!E&&s.a.createElement(o.a,{checked:!!u.length,indeterminate:u.length&&T.length!==u.length,onChange:function(e){var t=e.target.checked;f(t?T:[])},className:g.checkAll,"data-testid":"departments-tree-check"},u.length?__("已选择 {num} 个部门",{num:u.length}):__("全选")),_?s.a.createElement("div",{className:g.loadingContainer},s.a.createElement(r.a,null)):s.a.createElement(C,{"data-testid":"directory-tree",treeData:t,loadData:n,selectable:!d,blockNode:!0,showIcon:!1,showLine:!1,expandAction:"doubleClick",onSelect:function(e,t){var n=t.node;f(e,n)},selectedKeys:u,checkedKeys:u,multiple:d,checkStrictly:!0,checkable:d,onCheck:function(e){var t=e.checked;f(t)},className:h,onExpand:function(e){e.includes("0")||e.push("0"),I(e)},expandedKeys:L,titleRender:function(e){return s.a.createElement("div",{className:g.treeTitleContainer},s.a.createElement("div",{className:g.title},e.title),P&&s.a.createElement(s.a.Fragment,null,e.hasOwnProperty("parent_id")?s.a.createElement("div",{className:g.action},s.a.createElement(i.a,{overlay:function(){return function(e){var t,n=[{value:"EDIT",label:__("编辑部门"),operate:function(){return G("edit")}},{value:"ADD",label:__("添加子部门"),operate:function(){return G("add")}},{value:"DELETE",label:__("删除部门"),operate:(t=O(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}];return z&&(n=n.filter((function(e){return"EDIT"===e.value}))),s.a.createElement(c.a,{className:g.actionMenu},n.map((function(e){return s.a.createElement(c.a.Item,{onClick:e.operate,key:e.value},e.label)})))}(e)},placement:"bottomLeft"},s.a.createElement(m.b,{className:g.actionIcon,name:"catalog-more",size:16}))):!z&&s.a.createElement("div",{className:g.actionAdd,onClick:function(){return G("add")}},s.a.createElement(a.a,{placement:"top",title:__("添加部门")},s.a.createElement(m.b,{className:g.actionIcon,name:"plus",size:16})))))}}),s.a.createElement(b.a,{visible:D,type:B,onCancel:function(){return M(!D)},onSubmit:function(e,t){M(!D),S(e,t)},parent_id:"add"===B?k.id:k.parent_id,name:"add"===B?"":k.name,id:k.id}))}P.defaultProps={department:{},departments:{},selectedDeps:[],onSelect:function(){},onChange:function(){},multiple:!1,disableSelectAll:!1,disableRoot:!1,editable:!0},P.propTypes={department:d.a.object,departments:d.a.object,loadData:d.a.func,selectedDeps:d.a.array,onSelect:d.a.func,onChange:d.a.func,treeClassName:d.a.string,multiple:d.a.bool,loading:d.a.bool,disableSelectAll:d.a.bool,disableRoot:d.a.bool,editable:d.a.bool};t.a=P},function(e,t,n){"use strict";n(96);var r=n(23),o=n(0),a=n.n(o),i=n(34),c=n(113),u={rootTitleContainer:"style-module_rootTitleContainer_1JlbE",link:"style-module_link_DV+Rm"};function l(){l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var d={};function p(){}function m(){}function h(){}var y={};c(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,c(g,"constructor",h),c(h,"constructor",m),m.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,c,"next",e)}function c(e){f(a,r,o,i,c,"throw",e)}i(void 0)}))}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.isLeaf=!e.has_sub_department,e.value=e.id,e.title=e.name,e.key="".concat(e.id),(n.includes(e.id)||n.includes(e.key))&&(e.selectable=!1,e.disableCheckbox=!0,e.disabled=!0),e.departments&&(t.length&&(e.departments=e.departments.filter((function(e){return!t.includes(e.id)}))),e.children=e.departments,e.departments.forEach((function(e){return y(e,t,n)}))),e}function v(e,t){if(e.id===t||e.id===Number(t))return e;if(e.children&&!e.length){var n,r=null,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(e.children);try{for(o.s();!(n=o.n()).done;){if(r=v(n.value,t))return r}}catch(a){o.e(a)}finally{o.f()}return r}return null}function b(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=e.filter((function(e){return!r.includes(e.id)})).map((function(e){return y(e,r,o)})),i=v(t,n);return i&&(i.children=a,i.isLeaf=!a.length),t}function g(){var e=window.appData.organization;if(!c.a.isDingtalk()&&!c.a.isWeixin())return e.name;var t={tip:c.a.isDingtalk()?__("已同步钉钉组织架构，如需要改部门信息，请前往钉钉中进行修改"):__("已同步企业微信架构和部门 ID，部门名称暂不支持同步，请选中部门后进行修改"),link:c.a.isDingtalk()?"//www.yuque.com/yuque/rvzzxz/kt5keg#HAbh9":"//www.yuque.com/yuque/rvzzxz/kfc0pq#hS0Zl"};return a.a.createElement("div",{className:u.rootTitleContainer},a.a.createElement("span",{className:u.title},e.name),a.a.createElement(r.a,{title:t.tip,trigger:"hover"},a.a.createElement("a",{onClick:function(e){window.open(t.link),e&&(e.preventDefault(),e.stopPropagation())},className:u.link},a.a.createElement("span",{className:"larkicon larkicon-help"}))))}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.exceptIds,n=e.disabledIds,r=e.depth,u=e.disableRoot,f=void 0!==u&&u,m=e.showRootTip,h=void 0!==m&&m,y=window.appData.organization,_=h&&!c.a.isYuqueAddressBook(),w={title:_?a.a.createElement(g,null):y.name,key:"".concat(0),id:0,name:y.name,value:0,disabled:f,disableCheckbox:f},E=Object(o.useState)([w]),O=p(E,2),x=O[0],j=O[1],k=Object(o.useState)(!0),S=p(k,2),C=S[0],N=S[1];function P(e,t){return T.apply(this,arguments)}function T(){return(T=d(l().mark((function e(r,o){var c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"object"===s(r)&&(r=r.id),e.next=3,i.a.departments.find({parent_id:r,depth:o});case 3:c=e.sent,u=[b(c,x[0],r,t,n,h)],_&&0===Number(u[0].id)&&(u[0].title=a.a.createElement(g,null)),j(u),C&&N(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return v(x[0],e)||w}return Object(o.useEffect)((function(){P(0,r)}),[]),{departments:x,getDepartments:P,getTargetDept:A,firstLoading:C}}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1222);t.a=function(e){var t=window.appData.sharePage;return o.a.createElement("div",{className:"m-book-actionbar"},o.a.createElement(a.a,{showWatch:!t}))}},function(e,t,n){"use strict";var r,o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(10),l=n.n(u),s=n(49),f=n(38),d=n(113),p={orgVersionLabel:"index-module_orgVersionLabel_01VJl",pro:"index-module_pro_NPiVY",expired:"index-module_expired_ybls0",container:"index-module_container_JVdWw"};function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=(m(r={},s.PAYMENT_TYPE.trial,{labelClass:p.pro,containerClass:p.pro,icon:"diamond-gold",text:""}),m(r,s.PAYMENT_TYPE.paid,{labelClass:p.pro,containerClass:p.pro,icon:"diamond-gold",text:""}),m(r,s.PAYMENT_TYPE.free,{text:"免费版"}),m(r,s.PAYMENT_TYPE.vip,{text:"VIP"}),m(r,s.PAYMENT_TYPE.downgrade_free,{text:"免费版"}),m(r,"".concat(s.PAYMENT_TYPE.paid,"-expired"),{labelClass:p.expired,icon:"diamond-gray",text:""}),m(r,"".concat(s.PAYMENT_TYPE.trial,"-expired"),{labelClass:p.expired,icon:"diamond-gray",text:""}),r),y=function(e){var t=e.organization,n=e.className;if(!t)return null;var r=t.payment_type,o=r;d.a.isExpired(t)&&(o="".concat(r,"-expired"));var i=h[o]||{};return a.a.createElement("div",{className:l()(p.container,i.containerClass,n)},i.icon&&a.a.createElement(f.b,{name:i.icon,className:p.icon,width:20,height:20}),i.text&&a.a.createElement("div",{className:"".concat(p.orgVersionLabel," ").concat(i.labelClass),"data-testid":"org-preview-version"},a.a.createElement("span",null,i.text)))};y.propTypes={className:c.a.any,organization:c.a.object.isRequired};t.a=y},,function(e,t,n){"use strict";var r=n(0),o=n(39),a=n.n(o),i=n(353),c=Object(r.forwardRef)((function(e,t){var n=e.didUpdate,o=e.getContainer,c=e.children,u=Object(r.useRef)(),l=Object(r.useRef)();Object(r.useImperativeHandle)(t,(function(){return{}}));var s=Object(r.useRef)(!1);return!s.current&&Object(i.a)()&&(l.current=o(),u.current=l.current.parentNode,s.current=!0),Object(r.useEffect)((function(){null==n||n(e)})),Object(r.useEffect)((function(){return null===l.current.parentNode&&null!==u.current&&u.current.appendChild(l.current),function(){var e,t;null===(e=l.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(l.current)}}),[]),l.current?a.a.createPortal(c,l.current):null}));t.a=c},function(e,t,n){"use strict";t.a={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}},function(e,t,n){"use strict";var r=n(41),o=n(14),a=n(18),i=n(28),c=n(40),u=n(0),l=n(2244),s=n(126),f=n(10),d=n.n(f),p=n(163),m=n(1030),h=n(257),y=n(404),v=n(132),b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function g(e,t){return Object(c.a)(e||"").slice(0,t).join("")}var _=u.forwardRef((function(e,t){var n,f=e.prefixCls,_=e.bordered,w=void 0===_||_,E=e.showCount,O=void 0!==E&&E,x=e.maxLength,j=e.className,k=e.style,S=e.size,C=e.onCompositionStart,N=e.onCompositionEnd,P=e.onChange,T=b(e,["prefixCls","bordered","showCount","maxLength","className","style","size","onCompositionStart","onCompositionEnd","onChange"]),A=u.useContext(h.b),L=A.getPrefixCls,I=A.direction,R=u.useContext(v.b),D=u.useRef(null),M=u.useRef(null),F=u.useState(!1),B=Object(i.a)(F,2),U=B[0],z=B[1],G=Object(p.a)(T.defaultValue,{value:T.value}),V=Object(i.a)(G,2),Y=V[0],q=V[1],H=function(e,t){void 0===T.value&&(q(e),null==t||t())},W=Number(x)>0,K=L("input",f);u.useImperativeHandle(t,(function(){var e;return{resizableTextArea:null===(e=D.current)||void 0===e?void 0:e.resizableTextArea,focus:function(e){var t,n;Object(y.e)(null===(n=null===(t=D.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:function(){var e;return null===(e=D.current)||void 0===e?void 0:e.blur()}}}));var $=u.createElement(l.a,Object(o.default)({},Object(s.a)(T,["allowClear"]),{className:d()((n={},Object(a.a)(n,"".concat(K,"-borderless"),!w),Object(a.a)(n,j,j&&!O),Object(a.a)(n,"".concat(K,"-sm"),"small"===R||"small"===S),Object(a.a)(n,"".concat(K,"-lg"),"large"===R||"large"===S),n)),style:O?void 0:k,prefixCls:K,onCompositionStart:function(e){z(!0),null==C||C(e)},onChange:function(e){var t=e.target.value;!U&&W&&(t=g(t,x)),H(t),Object(y.d)(e.currentTarget,e,P,t)},onCompositionEnd:function(e){z(!1);var t=e.currentTarget.value;W&&(t=g(t,x)),t!==Y&&(H(t),Object(y.d)(e.currentTarget,e,P,t)),null==N||N(e)},ref:D})),Q=Object(y.b)(Y);U||!W||null!==T.value&&void 0!==T.value||(Q=g(Q,x));var X=u.createElement(m.a,Object(o.default)({},T,{prefixCls:K,direction:I,inputType:"text",value:Q,element:$,handleReset:function(e){var t,n;H("",(function(){var e;null===(e=D.current)||void 0===e||e.focus()})),Object(y.d)(null===(n=null===(t=D.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e,P)},ref:M,bordered:w}));if(O){var J=Object(c.a)(Q).length,Z="";return Z="object"===Object(r.a)(O)?O.formatter({count:J,maxLength:x}):"".concat(J).concat(W?" / ".concat(x):""),u.createElement("div",{className:d()("".concat(K,"-textarea"),Object(a.a)({},"".concat(K,"-textarea-rtl"),"rtl"===I),"".concat(K,"-textarea-show-count"),j),style:k,"data-count":Z},X)}return X}));t.a=_},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(55),i=n(11),c=n(57),u=n(58),l=n(66),s=n(72),f=n(0),d=n.n(f),p=n(10),m=n.n(p),h=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(e){var r;Object(c.a)(this,n),(r=t.call(this,e)).handleChange=function(e){var t=r.props,n=t.disabled,o=t.onChange;n||("checked"in r.props||r.setState({checked:e.target.checked}),o&&o({target:Object(i.a)(Object(i.a)({},r.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},r.saveInput=function(e){r.input=e};var o="checked"in e?e.checked:e.defaultChecked;return r.state={checked:o},r}return Object(u.a)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,i=t.className,c=t.style,u=t.name,l=t.id,s=t.type,f=t.disabled,p=t.readOnly,h=t.tabIndex,y=t.onClick,v=t.onFocus,b=t.onBlur,g=t.onKeyDown,_=t.onKeyPress,w=t.onKeyUp,E=t.autoFocus,O=t.value,x=t.required,j=Object(a.a)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),k=Object.keys(j).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=j[t]),e}),{}),S=this.state.checked,C=m()(n,i,(e={},Object(o.a)(e,"".concat(n,"-checked"),S),Object(o.a)(e,"".concat(n,"-disabled"),f),e));return d.a.createElement("span",{className:C,style:c},d.a.createElement("input",Object(r.default)({name:u,id:l,type:s,required:x,readOnly:p,disabled:f,tabIndex:h,className:"".concat(n,"-input"),checked:!!S,onClick:y,onFocus:v,onBlur:b,onKeyUp:w,onKeyDown:g,onKeyPress:_,onChange:this.handleChange,autoFocus:E,ref:this.saveInput,value:O},k)),d.a.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?Object(i.a)(Object(i.a)({},t),{},{checked:e.checked}):null}}]),n}(f.Component);h.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},t.a=h},function(e,t,n){"use strict";function r(e){return Object.keys(e).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||"data-__"===n.substr(0,7)||(t[n]=e[n]),t}),{})}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="RC_SELECT_INTERNAL_PROPS_MARK"},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),o=n(348),a=n(208),i=n(370),c=n(261),u=n(154),l=n(516);function s(e){var t=e.suffixIcon,n=e.clearIcon,s=e.menuItemSelectedIcon,f=e.removeIcon,d=e.loading,p=e.multiple,m=e.prefixCls,h=n;n||(h=r.createElement(u.a,null));var y=null;if(void 0!==t)y=t;else if(d)y=r.createElement(a.a,{spin:!0});else{var v="".concat(m,"-suffix");y=function(e){var t=e.open,n=e.showSearch;return t&&n?r.createElement(l.a,{className:v}):r.createElement(o.a,{className:v})}}return{clearIcon:h,suffixIcon:y,itemIcon:void 0!==s?s:p?r.createElement(i.a,null):null,removeIcon:void 0!==f?f:r.createElement(c.a,null)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(14),o=n(18),a=n(57),i=n(58),c=n(66),u=n(72),l=n(0),s=n(39),f=n.n(s),d=n(10),p=n.n(d),m=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).closeTimer=null,e.close=function(t){t&&t.stopPropagation(),e.clearCloseTimer();var n=e.props,r=n.onClose,o=n.noticeKey;r&&r(o)},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=window.setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.updateMark!==e.updateMark||this.props.visible!==e.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,a=t.className,i=t.closable,c=t.closeIcon,u=t.style,s=t.onClick,d=t.children,m=t.holder,h="".concat(n,"-notice"),y=Object.keys(this.props).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(t[n]=e.props[n]),t}),{}),v=l.createElement("div",Object(r.default)({className:p()(h,a,Object(o.a)({},"".concat(h,"-closable"),i)),style:u,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:s},y),l.createElement("div",{className:"".concat(h,"-content")},d),i?l.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(h,"-close")},c||l.createElement("span",{className:"".concat(h,"-close-x")})):null);return m?f.a.createPortal(v,m):v}}]),n}(l.Component);m.defaultProps={onClose:function(){},duration:1.5}},function(e,t,n){"use strict";function r(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null==n)return;n=n[t[r]]}return n}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n(60);var r=n(24),o=n(191),a=n(293);t.a=function(e,t){var n;if(e){var i=e.ctx||{};if("organization_expired"!==e.code&&"organization_terms_unsigned"!==e.code||!t)if("organization_will_delete"!==e.code)if("force_redirect_login"!==e.code){if("Unauthorized"===e.message&&t){var c=window.appData,u=c.isYuqueMobileApp,l=c.isYuque;return u&&o.a.isReady&&o.a.isYuque===l?void o.a.postMessage(a.a.startLogin):void t({type:"error/toggleLoginModal",payload:{visible:!0}})}if("function"!=typeof i.onError||!0!==i.onError(e))if(i.ignoreGlobalMessage)console.log("[app]error ignored: ",{error:e});else{var s=window.__member_message_ref&&(null===(n=window.__member_message_ref.current)||void 0===n?void 0:n.getMessage(e.code,{},e))||{},f=s.msg,d=s.alwaysOpen,p=s.level,m=s.callback;f?m(r.a[p||"info"](f,d?0:void 0)):"Unauthorized"!==e.message&&r.a.error(e.message)}}else{var h="".concat(window.location.protocol,"//").concat(window.location.host,"/login?goto=").concat(window.location.href);window.location.replace(h)}else r.a.error(__("空间将被删除"));else t({type:"error/toggleOrgLimitTip",payload:{orgExpiredModalVisible:"organization_expired"===e.code,orgSignTermsModalVisible:"organization_terms_unsigned"===e.code}})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(529),o=(window.appData||{}).isDesktopApp;if(o){var a=window.open;window.open=function(e,t,n){if(!window.YuqueDesktopJSBridge)return window._electron_bridge&&window._electron_bridge.shell?window._electron_bridge.shell.openExternal(e):void a(e,t,n);window.YuqueDesktopJSBridge.postMessage(r.DesktopBridgeEvents.openExternalLink,{targetUrl:e,isNewWindow:!1})}}function i(){var e;o&&(null===(e=window.YuqueDesktopJSBridge)||void 0===e||e.postMessage(r.DesktopBridgeEvents.listen,{eventName:"common/change-color-theme",listener:function(e,t){var n=window.appData.themeManager;null==n||n.switch(t)}}))}},function(e,t,n){"use strict";e.exports={TYPE:{grain:"grain"}}},,,function(e,t,n){"use strict";n(60);var r=n(24),o=n(71),a=n(32),i=n.n(a),c=n(270),u=n.n(c),l=n(2030),s=n.n(l),f=n(73),d=(n(559),n(142)),p=n.n(d),m=n(147),h=n(635),y=n(628),v=window.appData,b=v.isEnterprise,g=v.isYuque,_=v.locale,w="en-us"===_&&Object(y.c)();window.__=function(e,t){return Object(h.a)(e,t,w)},window.h5=(u.a.mobile||u.a.tablet)&&"desktop"!==appData.me.mobile_view,t.a=function(e,t,a){var c;if(c=Object(o.a)({initialState:t,history:a||Object(f.a)(),onError:function(e){var t;(t=e)&&"Unauthorized"!==t.message&&r.a.error(t.message)}}),t&&Object.keys(t).forEach((function(n){var r=e.models[n];if(r)return r.namespace=n,void c.model(r);c.model({namespace:n,state:t[n]})})),c.model(Object(m.a)(n(2003).default)),c.model(Object(m.a)(n(2004).default)),c.model(Object(m.a)(n(1996).default)),c.model(Object(m.a)(n(2e3).default)),c.model(Object(m.a)(n(2007).default)),c.model(Object(m.a)(n(2006).default)),c.model(Object(m.a)(n(2005).default)),c.model(Object(m.a)(n(2001).default)),e.proxy?c.model(Object(m.a)(e.proxy)):c.model(Object(m.a)(n(116).default)),Object.keys(e.models).forEach((function(t){c.model(Object(m.a)(e.models[t]))})),c.use(s()()),e.h5_router&&window.h5?c.router(e.h5_router):c.router(e.router),"zh-cn"===_&&i.a.updateLocale("en",{relativeTime:{future:function(e){return"".concat(e,"内")},past:function(e){return e.indexOf("秒")>=0?"1 分钟内":"".concat(e,"前")},s:function(){return"几秒"},ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"}}),g){var u=document.location.hostname.split(".").slice(-2).join("."),l="dashboard/last_space_id";if(b)p.a.set(l,window.appData.space.id,{domain:u,expires:30});else{var d=window.location.pathname;"/"!==d&&d.length>1&&p.a.remove(l,{domain:u})}}return window.app=c,c}},function(e,t,n){"use strict";var r=n(0),o=n.n(r);t.a=function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");return"function"!=typeof t.componentWillReceiveProps?e:o.a.Profiler?(t.UNSAFE_componentWillReceiveProps=t.componentWillReceiveProps,delete t.componentWillReceiveProps,e):e}},function(e,t,n){"use strict";var r=n(28),o=n(0),a=n(965);t.a=function(){var e=o.useState(!1),t=Object(r.a)(e,2),n=t[0],i=t[1];return o.useEffect((function(){i(Object(a.b)())}),[]),n}},function(e,t,n){"use strict";var r=n(0),o=Object(r.createContext)({});t.a=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(40),o=n(616);function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Object(o.a)(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),a=e.getAttribute("tabindex"),i=Number(a),c=null;return a&&!Number.isNaN(i)?c=i:r&&null===c&&(c=0),r&&e.disabled&&(c=null),null!==c&&(c>=0||t&&c<0)}return!1}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(r.a)(e.querySelectorAll("*")).filter((function(e){return a(e,t)}));return a(e,t)&&n.unshift(e),n}},function(e,t,n){"use strict";t.a={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"}},function(e,t,n){"use strict";n(133);var r=n(31),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=(n(2275),function(e){var t=e.mode,n=void 0===t?"horizontal":t;return a.a.createElement(r.a,{mode:n,selectedKeys:[window.location.pathname]},a.a.createElement(r.a.Item,{key:"/about"},a.a.createElement("a",{href:"/about","data-aspm-click":"d65969"},__("首页"))),a.a.createElement(r.a.Item,{key:"/about/groups"},a.a.createElement("a",{href:"/about/groups","data-aspm-click":"d224825"},__("团队使用"))),a.a.createElement(r.a.Item,{key:"/about/templates"},a.a.createElement("a",{href:"/about/templates","data-aspm-click":"d65970"},__("模板中心"))),a.a.createElement(r.a.Item,{key:"/about/security"},a.a.createElement("a",{href:"/about/security","data-aspm-click":"d65965"},__("数据安全"))),a.a.createElement(r.a.Item,{key:"/about/welfare"},a.a.createElement("a",{href:"/about/welfare","data-aspm-click":""},__("公益计划"))),a.a.createElement(r.a.Item,{key:"/about/careers"},a.a.createElement("a",{href:"/about/careers","data-aspm-click":"d65968"},__("关于我们"))),a.a.createElement(r.a.Item,{key:"/download"},a.a.createElement("a",{href:"/download","data-aspm-click":"d65966"},__("下载"))),a.a.createElement(r.a.Item,{key:"/about/price"},a.a.createElement("a",{href:"/about/price","data-aspm-click":"d65964"},__("定价"))),a.a.createElement(r.a.Item,{key:"/about/help"},a.a.createElement("a",{href:"/about/help","data-aspm-click":"d65963"},__("帮助"))))});u.propTypes={mode:c.a.oneOf(["horizontal","vertical"])},t.a=u},function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(a,i,c,u){var l=f(e[a],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==r(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,c,u)}),(function(e){o("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return o("throw",e,c,u)}))}u(l.arg)}var a;this._invoke=function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,u,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function a(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,u,"next",e)}function u(e){a(i,r,o,c,u,"throw",e)}c(void 0)}))}}function c(){return(c=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://alilang-intranet.alibaba-inc.com/is_white_list.json",{headers:{"need-json":1}}).then((function(e){return e.json()}));case 3:return t=e.sent,e.abrupt("return",t&&!0===t.content&&!1===t.hasError);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t.a=function(){return c.apply(this,arguments)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(41),o=n(0),a=n(10),i=n.n(a),c=n(208),u=n(1264),l=n(2066),s=n(2067),f=n(2068),d=n(118);function p(e,t,n,a){var p,m=a.isLeaf,h=a.expanded;if(a.loading)return o.createElement(c.a,{className:"".concat(e,"-switcher-loading-icon")});if(n&&"object"===Object(r.a)(n)&&(p=n.showLeafIcon),m)return n?"object"!==Object(r.a)(n)||p?o.createElement(u.a,{className:"".concat(e,"-switcher-line-icon")}):o.createElement("span",{className:"".concat(e,"-switcher-leaf-line")}):null;var y="".concat(e,"-switcher-icon");return Object(d.b)(t)?Object(d.a)(t,{className:i()(t.props.className||"",y)}):t||(n?h?o.createElement(l.a,{className:"".concat(e,"-switcher-line-icon")}):o.createElement(s.a,{className:"".concat(e,"-switcher-line-icon")}):o.createElement(f.a,{className:y}))}},function(e,t,n){"use strict";n(60);var r=n(24),o=n(71),a=(n(559),n(2031)),i=n.n(a),c=n(635),u="en-us"===window.appData.locale;window.__=function(e,t){return Object(c.a)(e,t,u)},t.a=function(e){var t;return t=Object(o.a)({history:i()(),onError:function(e){e.globalMessage&&r.a.error(e.globalMessage)}}),Object.keys(e.models).forEach((function(n){t.model(e.models[n])})),t.router(e.router),t}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(589);function u(e){var t=Object(r.useRef)(null),n=e.doc,a=e.doc_id,i=e.content;return o.a.createElement("div",{id:"doc-".concat(a),ref:t},o.a.createElement(c.b,{id:"doc-".concat(a),doc:n,content:i,onReady:e.onReady,onLoaded:e.onLoaded,docUrl:e.docUrl,enableExportParser:e.enableExportParser,exportParserType:e.exportParserType,exportDocMaxWidth:688,fallbackLake:!0}))}u.propTypes={doc:i.a.object,doc_id:i.a.number.isRequired,content:i.a.string.isRequired,docUrl:i.a.string,onReady:i.a.func,onLoaded:i.a.func,enableExportParser:i.a.bool,exportParserType:i.a.string},t.a=u},function(e,t,n){"use strict";n(75);var r=n(26),o=n(0),a=n.n(o),i=n(2),c=n.n(i);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t=u(Object(o.useState)(!1),2),n=t[0],i=t[1],c=u(Object(o.useState)(e.title||__("无标题")),2),l=c[0],s=c[1];Object(o.useEffect)((function(){e.title!==l&&s(e.title||__("无标题"))}),[e.title]);var f=function(){var t=l||__("无标题");e.saveTitle(t),s(t),i(!1)};return n?a.a.createElement(r.a,{className:"lark-editor-header-title-input",autoFocus:!0,type:"text",value:l,onChange:function(e){s(e.target.value)},onFocus:function(e){n&&e.target.select()},onBlur:f,onPressEnter:f}):a.a.createElement("span",{className:"name-title",title:l,onClick:function(){i(!0)}},l)};s.propTypes={title:c.a.string.isRequired,saveTitle:c.a.func.isRequired},t.a=s},function(e,t,n){"use strict";n(175);var r=n(84),o=(n(50),n(19)),a=n(0),i=n.n(a),c=n(10),u=n.n(c),l=n(2273),s=n(349),f=n(1363),d=n(685),p=n(324);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t,n,c,h=e.doc,y=e.book,v=e.group,b=e.organization,g=e.size,_=m(Object(a.useState)(!1),2),w=_[0],E=_[1],O=window.appData.me.id,x=b&&b.abilities&&b.abilities.read_home,j=b&&!x,k=i.a.createElement(l.a,{onChange:function(e){e&&Object(s.b)("c66254")}},i.a.createElement("div",{className:p.a.logoOnboardingBanner},i.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*OwZWQ68zSTMAAAAAAAAAAABkARQnAQ",alt:"语雀",className:p.a.larkLogo}),i.a.createElement("h5",null,__("新一代云端知识库")),i.a.createElement("p",null,__("个人笔记与知识创作，团队知识协同与沉淀")),i.a.createElement("div",{className:p.a.buttonGroup},i.a.createElement(o.a,{onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"register",t=arguments.length>1?arguments[1]:void 0;Object(s.a)("c66252.".concat(t)),window.location.href="/".concat(e,"?goto=").concat(encodeURIComponent(window.location.href),"&source=logoPopover")}("login","d136335")}},__("登录 / 注册")))));return O?i.a.createElement("div",{className:u()(p.a.logoWrapper,(t={},n=p.a.logoWrapperActive,c=w&&!j,n in t?Object.defineProperty(t,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[n]=c,t)),onMouseEnter:function(e){E(!0)},onMouseLeave:function(e){E(!1)}},!j&&i.a.createElement("span",{className:p.a.navigation},i.a.createElement(f.a,{book:y,doc:h,group:v,onVisibleChange:function(e){e||E(!1)},size:g})),i.a.createElement("span",{className:p.a.logo},i.a.createElement(d.a.Logo,{organization:b,allowClick:!j}))):i.a.createElement("div",{className:p.a.logoOnboardingWrapper},i.a.createElement(r.a,{content:k,trigger:"hover",placement:"bottomLeft",getPopupContainer:function(e){return e.parentNode}},i.a.createElement("span",{className:p.a.logo},i.a.createElement(d.a.Logo,{organization:b}))))}},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(60),n(24)),a=n(0),i=n.n(a),c=n(114),u=n.n(c),l=n(1152),s=n.n(l),f=n(90),d=n.n(f),p=n(266),m=n.n(p),h=n(42),y=n.n(h),v=n(1545),b=n(17),g=n(124),_=n(285),w=n(651),E=n(235);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function x(){x=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==O(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,c,"next",e)}function c(e){C(a,r,o,i,c,"throw",e)}i(void 0)}))}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=u()("doc:useDocAction"),L=window.appData.isYuqueMobileApp,I=function(e,t,n){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,n)},R=y()((function(e){I("execCommand","defaultFontsize",e),I("execCommand","clearDefaultFontsize")}),200),D=y()((function(e){I("execCommand","paragraphSpacing",e)}));t.a=function(e){var t=e.book,n=e.doc,c=e.commandParams,u=e.dispatch,l=e.onCommandsExecuted,f=e.onSelectTemplate,p=e.onCreateDoc,h=P(Object(a.useState)(null),2),y=h[0],O=h[1],j=P(Object(a.useState)(!1),2),S=j[0],C=j[1],T=P(Object(a.useState)(!1),2),M=T[0],F=T[1],B=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return I("queryCommandValue","defaultFontsize",e)},U=P(Object(a.useState)(I("queryCommandValue","typography")),2),z=U[0],G=U[1],V=P(Object(a.useState)(B(!1)),2),Y=V[0],q=V[1],H=P(Object(a.useState)(I("queryCommandValue","paragraphSpacing")),2),W=H[0],K=H[1],$=function(){O(null)},Q=function(){var e=N(x().mark((function e(){var n,r,a,i,u,l,s,f=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k(k({},n=f.length>0&&void 0!==f[0]?f[0]:{}),c),r=n.slug||m()(),n.slug=r,n.book_id=t.id,n.format||(n.format=v.a.getDefaultDocumentFormat(n.type)),a=null,window.location.pathname.endsWith("/edit")&&(a=window.open("/creating?book_id=".concat(t.id,"&slug=").concat(r),"_blank")),i=function(){o.a.error(__("创建失败，请稍后再试...")),a&&a.close()},e.next=11,g.a.createDoc(n,i);case 11:if(u=e.sent,A("doc created",{cmd:y,doc:u}),l="/".concat(t.namespace,"/").concat(u.slug,"/edit"),s=new URL(l,window.location.origin),a=a||window,"doc_toc"===n.create_from&&s.searchParams.set("toc_node_uuid",n.toc_node_uuid),$(),!p){e.next=21;break}return p(u),e.abrupt("return");case 21:a.location.href=s.href,a=null;case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=__("确认删除 {title}？",{title:n.title});r.a.confirm({title:e,content:__(""),onOk:function(){u({type:"proxy.web/docs.destroy",payload:{data:{id:n.id}}}).then((function(e){l({cmd:b.a.DOC.delete.cmd,result:e})}))}})},J=Object(w.a)(),Z=J.loadTemplateSelector,ee=J.showTemplateSelector,te=J.contextHolder,ne=function(){var e=N(x().mark((function e(){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee({book:t});case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",$());case 5:return e.abrupt("return",Object(_.e)(t,n,c));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(r,a){var i=c;switch(A("exec",{cmd:r,params:i}),O(r),r){case b.a.DOC.delete.cmd:X();break;case b.a.DOC.print.cmd:window.print();break;case b.a.DOC.fullscreen.cmd:s.a.enabled?s.a.toggle():o.a.error(__("你的浏览器不支持全屏功能"));break;case b.a.DOC.raw.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/html");break;case b.a.DOC.view_markdown.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/markdown");break;case b.a.DOC.presentation.cmd:window.open("".concat(window.location.pathname.replace(/\/+$/,""),"/present"));break;case b.a.DOC.create_doc.cmd:Q({type:"Doc",format:d.a.FORMAT.LAKE,title:i.title,slug:i.slug});break;case b.a.DOC.create_doc_template.cmd:Q({title:__("自定义模板"),type:d.a.TYPE.DOC,format:d.a.FORMAT.LAKE,tag:"YUQUE_TEMPLATE"});break;case b.a.DOC.create_from_template.cmd:f&&f(),ne();break;case b.a.DOC.create_markdown.cmd:Q({type:"Doc",format:d.a.FORMAT.MARKDOWN,title:i.title,slug:i.slug});break;case b.a.DOC.create_sheet.cmd:Q({type:"Sheet",title:i.title,slug:i.slug});break;case b.a.DOC.create_mind.cmd:case b.a.DOC.create_board.cmd:Q({type:"Board",title:i.title,slug:i.slug});break;case b.a.DOC.create_table.cmd:Q({type:"Table",title:i.title,slug:i.slug});break;case b.a.DOC.create_thread.cmd:window.location.href="/".concat(t.namespace,"/new");break;case b.a.DOC.edit.cmd:var p="/".concat(t.namespace,"/").concat(n.slug,"/edit");L?E.a.pushWebWindow({url:"".concat(window.location.origin).concat(p)}):window.location.href=p;break;case b.a.DOC.manage_table.cmd:case b.a.DOC.manage_doc.cmd:window.location.href="/".concat(t.namespace,"/toc?tempStore=1");break;case b.a.DOC.modify_toc.cmd:window.location.href="/".concat(t.namespace,"/toc?from=").concat(n.slug);break;case b.a.DOC.exit.cmd:window.location.href="/dashboard";break;case b.a.DOC.archive.cmd:u({type:"proxy.web/docs.archive",payload:{data:{id:n.id}}}).then((function(e){o.a.success(__("话题已归档")),l({cmd:b.a.DOC.archive.cmd,result:e})}));break;case b.a.DOC.unarchive.cmd:u({type:"proxy.web/docs.unarchive",payload:{data:{id:n.id}}}).then((function(e){o.a.success(__("已取消归档")),l({cmd:b.a.DOC.unarchive.cmd,result:e})}));break;case b.a.DOC.pin.cmd:u({type:"proxy.web/docs.pin",payload:{data:{id:n.id}}}).then((function(e){o.a.success(__("置顶成功")),l({cmd:b.a.DOC.pin.cmd,result:e})}));break;case b.a.DOC.unpin.cmd:u({type:"proxy.web/docs.unpin",payload:{data:{id:n.id}}}).then((function(e){o.a.success(__("已取消置顶")),l({cmd:b.a.DOC.unpin.cmd,result:e})}));break;case b.a.DOC.send_mail.cmd:C(!0);break;case b.a.DOC.document_layout_select.cmd:case b.a.DOC.document_layout.cmd:!function(e){I("execCommand","layout",e)}(a);break;case b.a.DOC.document_typography.cmd:!function(e){G(e),I("execCommand","typography",e),B()||q(B(!1))}(a);break;case b.a.DOC.document_fontsize.cmd:!function(e){q(e),R(e)}(a);break;case b.a.DOC.document_paragraph_spacing.cmd:!function(e){K(e),D(e)}(a);break;default:e.onCommandsExecuted({cmd:r})}};return i.a.useEffect((function(){y&&(null==y?void 0:y.cmd)===b.a.DOC.create_from_template.cmd&&Z()}),[y]),i.a.useEffect((function(){window.__execAction=function(t,n){[b.a.DOC.history.cmd,b.a.DOC.save_published_as_version.cmd,b.a.DOC.save_editing_as_version.cmd].includes(t)&&(re(t,n),e.onSelect({key:t}))}}),[]),{cmd:y,sendAlimail:S,mailSending:M,typography:z,defaultFontSize:Y,paragraphSpacing:W,reset:$,doAction:re,setSendAlimail:C,setMailSending:F,getEditorLayout:function(){return I("queryCommandValue","layout")},getWordCount:function(){return I("queryCommandValue","wordCount")},contextHolder:te}}},function(e,t,n){"use strict";n(50);var r=n(19),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(10),l=n.n(u),s=n(114),f=n.n(s),d=n(90),p=n.n(d),m=n(1255),h=n(1263);n(2023);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=f()("comment:update.editor.ui"),j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(c,e);var t,n,o,i=g(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),O(w(t=i.call(this,e)),"onLoad",(function(){t.onChange()})),O(w(t),"onChange",(function(){t.setState({hasValue:!t.editor.isEmpty()})})),O(w(t),"handleCancel",(function(){t.reset(),t.props.onCancel()})),O(w(t),"handleSubmit",(function(){var e=t.props,n=e.comment,r=e.commentMoodChanged;t.editor.contentReady().then((function(){var e={format:p.a.FORMAT.LAKE,value:t.editor.getValue(),html:t.editor.getHtml()};x("on save: ".concat(n.id,", document: "),e),r||t.editor.isContentChanged()?t.props.onSave(n.id,e,(function(){t.handleCancel()})):t.handleCancel()}))})),O(w(t),"renderEditor",(function(){return a.a.createElement(h.a,{editor:t.editor,onLoad:t.onLoad,onChange:t.onChange,onSubmit:t.handleSubmit,key:"".concat(t.state.editorInstanceId)})}));var n=e.comment;return t.editor=new m.b({target:n,belong:e.target,attachType:e.type,useBelongAttach:!0,from:"reply",useMiniGuide:e.useMiniGuide,getDefaultSuggestions:e.getDefaultSuggestions,autoFocus:!0}),t.initialDocument=t.editor.getInitialDocument(),x("init use: ",t.initialDocument),t.state={hasValue:!0,editorInstanceId:"reply_update_".concat(n.id)},t}return t=c,(n=[{key:"reset",value:function(){this.editor.reset()}},{key:"render",value:function(){var e=l()({"comments-form-wrapper":!0,"edit-mode":!0});return a.a.createElement("div",{className:"comments-form-editor"},a.a.createElement("div",{className:e},a.a.createElement("div",{className:"editor-wrapper"},a.a.createElement("div",{className:"editor"},this.renderEditor())),a.a.createElement("div",{className:"action clearfix"},this.state.submitting?a.a.createElement(r.a,{disabled:"disabled"},a.a.createElement("span",null,__("提交中..."))):a.a.createElement(r.a,{type:"primary",disabled:this.state.hasValue?"":"disabled",onClick:this.handleSubmit},a.a.createElement("span",null,__("提交"))),a.a.createElement("a",{className:"btn-cancel",onClick:this.handleCancel},a.a.createElement("span",null,__("取消"))))))}}])&&v(t.prototype,n),o&&v(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.Component);j.propTypes={type:c.a.oneOf(["Topic","Doc","Resource"]),target:c.a.object.isRequired,comment:c.a.object.isRequired,onSave:c.a.func,onCancel:c.a.func,getDefaultSuggestions:c.a.func,commentMoodChanged:c.a.bool,useMiniGuide:c.a.bool},t.a=j},function(e,t,n){"use strict";n(175);var r=n(84),o=(n(96),n(23)),a=(n(50),n(19)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(10),f=n.n(s),d=n(88),p=n(966),m=n(38),h=n(321),y=n(32),v=n.n(y),b=n(127),g=n(255),_=n(1023),w=n(109),E=n(93);function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=c.a.forwardRef((function(e,t){var n,u,l,s=x(Object(i.useState)(!1),2),d=s[0],y=s[1],w=e.review,j=e.isMiniSize,k=e.isApprover,S=e.isHistoryReview,C=e.doc,N=p.a.formatUser(w.approvers),P=p.a.formatUser(w.ccs),T=w.product_codes,A=window.appData,L=A.me,I=A.defaultSpaceHost,R=(N.find((function(e){return e.id===L.id}))||{}).isCompleted,D=window.appData.isYuque,M=P&&P.length>0,F=!D&&T&&T.length>0,B=!window.h5,U="".concat(I,"/go/doc/").concat(C.id),z="".concat(I,"/").concat(null==w||null===(n=w.meta)||void 0===n?void 0:n.versionUrl),G=encodeURIComponent('<p>评审文档：<a href="'.concat(U,'">').concat(U,'</a></p><p>评审文档快照：<a href="').concat(z,'">').concat(z,"</a></p>")),V="https://baiyan.alipay.com/task/create?type=REQUIREMENT&name=".concat(C.title,"&lakeContent=").concat(G,"&userScope=1"),Y=function(){return c.a.createElement(c.a.Fragment,null,M&&c.a.createElement("div",{className:f()(E.a.reviewerWrapper,E.a.block)},c.a.createElement("h6",{className:E.a.blockTitle},__("抄送")),c.a.createElement("p",null,c.a.createElement("span",{className:E.a.ccList},P&&P.map((function(e,t){return c.a.createElement("span",{className:E.a.ccName,key:e.id,"data-testid":"review-info-user-".concat(e.id)},c.a.createElement(h.a,{user:e},c.a.createElement("span",null,e.name)),c.a.createElement("span",{className:E.a.ccSep},"、"))}))))),c.a.createElement("div",{className:f()(E.a.reviewerWrapper,E.a.block)},c.a.createElement("h6",{className:E.a.blockTitle},__("发起时间")),c.a.createElement("p",{className:E.a.startTime},v()(w.created_at).format("YYYY-MM-DD HH:mm"))))};return c.a.createElement("div",{className:f()((u={},O(u,E.a.wrapper,!j),O(u,E.a.miniWrapper,j),u))},w.body&&c.a.createElement("div",{className:f()(E.a.reviewerWrapper,E.a.block)},c.a.createElement("h6",{className:f()(E.a.blockTitle,E.a.blockTitleInline)},__("描述")),c.a.createElement("div",null,w.body?c.a.createElement("div",{"data-testid":"review-info-desc"},c.a.createElement(_.a,{content:w.body,disableHeaderBr:!0})):c.a.createElement("p",{className:E.a.placeholder},__("无描述信息")))),k&&!S&&!R&&w.status===g.STATUS.active&&c.a.createElement("div",{className:f()(E.a.reviewerWrapper,E.a.block)},c.a.createElement("h6",{className:f()(E.a.blockTitle,E.a.blockTitleInline)},__("请投票")),c.a.createElement("div",null,c.a.createElement("div",{className:E.a.approveBtnWrapper},c.a.createElement(a.a,{onClick:function(){return e.onSubmitApproval(g.REVIEWER_STATUS.accepted)},className:E.a.approveBtn},c.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/8a0ad84c-9110-47bc-8110-871abaeaed04.svg",width:20,style:{marginRight:2}}),__("通过")),c.a.createElement(a.a,{onClick:function(){return e.onSubmitApproval(g.REVIEWER_STATUS.rejected)},className:E.a.approveBtn},c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*EMY3Q7SajTMAAAAAAAAAAAAAARQnAQ",width:24}),__("不通过"))))),N&&!!N.length&&c.a.createElement("div",{className:f()(E.a.reviewerWrapper,E.a.block)},c.a.createElement("h6",{className:E.a.blockTitle},__("评审人")),c.a.createElement("div",{className:E.a.reviewerList},N&&N.map((function(e){return c.a.createElement("p",{className:E.a.reviewerItemLite,key:e.id,"data-testid":"review-info-user-".concat(e.id)},c.a.createElement("span",{className:E.a.reviewerAvatarWrapper},c.a.createElement(h.a,{user:e},c.a.createElement(b.a,{src:e.avatar_url,size:28,className:E.a.reviewerAvatar}),c.a.createElement("span",{className:E.a.reviewerName},e.name))),c.a.createElement("span",{className:E.a.reviewerStatusWrapper},function(e){switch(e.reviewStatus){case g.REVIEWER_STATUS.accepted:return c.a.createElement("span",{className:E.a.acceptedStatus},__("通过"));case g.REVIEWER_STATUS.rejected:return c.a.createElement("span",{className:E.a.rejectStatus},__("不通过"));case g.REVIEWER_STATUS.incomplete:default:return c.a.createElement("span",{className:E.a.incompleteStatus},__("未评审"))}}(e)))})))),F&&c.a.createElement("div",{className:f()(E.a.tasksWrapper,E.a.block)},c.a.createElement("h6",{className:E.a.blockTitle},__("关联产品码")),c.a.createElement("div",{className:E.a.taskList},T.map((function(e){return c.a.createElement("div",{key:e.productCode,className:E.a.taskItem},c.a.createElement(o.a,{title:__("产品名称：{name}",{name:e.productName}),placement:"top"},c.a.createElement("a",{target:"_blank",className:E.a.project,href:"https://pd.alipay.com/#/product/main?productCode=".concat(e.productCode),title:e.productName},e.productName)),c.a.createElement(o.a,{title:__("产品码：{code}",{code:e.productCode}),placement:"top"},c.a.createElement("span",{className:E.a.milestone},e.productCode)),c.a.createElement(o.a,{title:__("产品负责人：{owner}",{owner:e.pdOwner||__("暂无")}),placement:"top"},c.a.createElement("span",{className:E.a.milestoneStatus},e.pdOwner||__("暂无"))))})))),w.status!==g.STATUS.active&&w.meta&&w.meta.versionUrl&&c.a.createElement("div",{className:f()(E.a.reviewerWrapper,E.a.block)},c.a.createElement("h6",{className:E.a.blockTitle},__("结束时间")),c.a.createElement("p",{className:E.a.startTime},c.a.createElement("a",{href:"".concat(window.appData.defaultSpaceHost,"/").concat(w.meta.versionUrl),target:"_blank"},v()(w.updated_at).format("YYYY-MM-DD HH:mm")))),B&&!window.h5&&c.a.createElement(r.a,{placement:"topLeft",arrowPointAtCenter:!0,content:c.a.createElement("div",{className:E.a.popoverWrapper},Y())},c.a.createElement("span",{className:E.a.blockTitle},__("更多#Review"))),window.h5&&c.a.createElement("div",null,c.a.createElement("span",{className:E.a.showMoreBtn,onClick:function(){return y(!d)}},d?c.a.createElement(m.b,{className:E.a.iconDown,name:"review-arrow-down",width:8}):c.a.createElement(m.b,{className:E.a.iconRight,name:"review-arrow-right",width:8}),__("更多")),d&&Y()),!window.h5&&!D&&(null==w?void 0:w.status)===g.STATUS.accepted&&!S&&(null==w||null===(l=w.meta)||void 0===l?void 0:l.versionUrl)&&c.a.createElement("div",{className:E.a.baiyanWrapper},c.a.createElement("a",{href:V,target:"_blank"},c.a.createElement(a.a,{className:E.a.baiyanBtn},__("创建白雁工作项"))),c.a.createElement("p",{className:E.a.baiyanDesc},__("让需求高效执行跟进"))))}));k.propTypes={doc:l.a.object,review:l.a.object,isMiniSize:l.a.bool,isHistoryReview:l.a.bool,isApprover:l.a.bool,onSubmitApproval:l.a.func},t.a=Object(w.b)(Object(d.d)((function(e){return{doc:e.doc}}))(k),!0)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(636),u=n.n(c),l=n(10),s=n.n(l),f=n(255);function d(e){var t,n,r=window.appData.locale;switch(null===(t=e.review)||void 0===t?void 0:t.status){case f.STATUS.accepted:n="accepted".concat(u()(r));break;case f.STATUS.rejected:n="rejected".concat(u()(r));break;case f.STATUS.cancelled:n="cancelled".concat(u()(r))}return n?o.a.createElement("div",{className:s()("reviewStamp",n)}):null}d.propTypes={review:i.a.object},t.a=d},function(e,t,n){"use strict";var r=n(0),o=n(10),a=n.n(o),i=n(296);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=r.forwardRef((function(e,t){var n=e.height,o=e.offset,c=e.children,s=e.prefixCls,f=e.onInnerResize,d={},p={display:"flex",flexDirection:"column"};return void 0!==o&&(d={height:n,position:"relative",overflow:"hidden"},p=u(u({},p),{},{transform:"translateY(".concat(o,"px)"),position:"absolute",left:0,right:0,top:0})),r.createElement("div",{style:d},r.createElement(i.a,{onResize:function(e){e.offsetHeight&&f&&f()}},r.createElement("div",{style:p,className:a()(l({},"".concat(s,"-holder-inner"),s)),ref:t},c)))}));s.displayName="Filler";var f=s,d=n(119);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function w(e){return"touches"in e?e.touches[0].pageY:e.pageY}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(c,e);var t,n,o,i=b(c);function c(){var e;h(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.call.apply(i,[this].concat(n))).moveRaf=null,e.scrollbarRef=r.createRef(),e.thumbRef=r.createRef(),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout((function(){e.setState({visible:!1})}),2e3)},e.onScrollbarTouchStart=function(e){e.preventDefault()},e.onContainerMouseDown=function(e){e.stopPropagation(),e.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){var t;window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),null===(t=e.scrollbarRef.current)||void 0===t||t.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current&&(e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp)),d.a.cancel(e.moveRaf)},e.onMouseDown=function(t){var n=e.props.onStartMove;e.setState({dragging:!0,pageY:w(t),startTop:e.getTop()}),n(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var n=e.state,r=n.dragging,o=n.pageY,a=n.startTop,i=e.props.onScroll;if(d.a.cancel(e.moveRaf),r){var c=a+(w(t)-o),u=e.getEnableScrollRange(),l=e.getEnableHeightRange(),s=l?c/l:0,f=Math.ceil(s*u);e.moveRaf=Object(d.a)((function(){i(f)}))}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,n=t.height,r=n/t.count*10;return r=Math.max(r,20),r=Math.min(r,n/2),Math.floor(r)},e.getEnableScrollRange=function(){var t=e.props;return t.scrollHeight-t.height||0},e.getEnableHeightRange=function(){return e.props.height-e.getSpinHeight()||0},e.getTop=function(){var t=e.props.scrollTop,n=e.getEnableScrollRange(),r=e.getEnableHeightRange();return 0===t||0===n?0:t/n*r},e.showScroll=function(){var t=e.props,n=t.height;return t.scrollHeight>n},e}return t=c,(n=[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(e){e.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var e=this.state,t=e.dragging,n=e.visible,o=this.props.prefixCls,i=this.getSpinHeight(),c=this.getTop(),u=this.showScroll(),l=u&&n;return r.createElement("div",{ref:this.scrollbarRef,className:a()("".concat(o,"-scrollbar"),m({},"".concat(o,"-scrollbar-show"),u)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:l?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},r.createElement("div",{ref:this.thumbRef,className:a()("".concat(o,"-scrollbar-thumb"),m({},"".concat(o,"-scrollbar-thumb-moving"),t)),style:{width:"100%",height:i,top:c,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}])&&y(t.prototype,n),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component);function O(e){var t=e.children,n=e.setRef,o=r.useCallback((function(e){n(e)}),[]);return r.cloneElement(t,{ref:o})}var x=n(689);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maps=void 0,this.maps=Object.create(null)}var t,n,r;return t=e,(n=[{key:"set",value:function(e,t){this.maps[e]=t}},{key:"get",value:function(e){return this.maps[e]}}])&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n){var o=P(r.useState(e),2),a=o[0],i=o[1],c=P(r.useState(null),2),u=c[0],l=c[1];return r.useEffect((function(){var r=function(e,t,n){var r,o,a=e.length,i=t.length;if(0===a&&0===i)return null;a<i?(r=e,o=t):(r=t,o=e);var c={__EMPTY_ITEM__:!0};function u(e){return void 0!==e?n(e):c}for(var l=null,s=1!==Math.abs(a-i),f=0;f<o.length;f+=1){var d=u(r[f]);if(d!==u(o[f])){l=f,s=s||d!==u(o[f+1]);break}}return null===l?null:{index:l,multiple:s}}(a||[],e||[],t);void 0!==(null==r?void 0:r.index)&&(null==n||n(r.index),l(e[r.index])),i(e)}),[e]),[u]}function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}var I="object"===("undefined"==typeof navigator?"undefined":L(navigator))&&/Firefox/i.test(navigator.userAgent),R=function(e,t){var n=Object(r.useRef)(!1),o=Object(r.useRef)(null);function a(){clearTimeout(o.current),n.current=!0,o.current=setTimeout((function(){n.current=!1}),50)}var i=Object(r.useRef)({top:e,bottom:t});return i.current.top=e,i.current.bottom=t,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e<0&&i.current.top||e>0&&i.current.bottom;return t&&r?(clearTimeout(o.current),n.current=!1):r&&!n.current||a(),!n.current&&r}};var D=n(545);var M=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange"];function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var q=[],H={overflowY:"auto",overflowAnchor:"none"};function W(e,t){var n=e.prefixCls,o=void 0===n?"rc-virtual-list":n,i=e.className,c=e.height,u=e.itemHeight,l=e.fullHeight,s=void 0===l||l,p=e.style,m=e.data,h=e.children,y=e.itemKey,v=e.virtual,b=e.component,g=void 0===b?"div":b,_=e.onScroll,w=e.onVisibleChange,j=Y(e,M),C=!(!1===v||!c||!u),P=C&&m&&u*m.length>c,T=G(Object(r.useState)(0),2),L=T[0],B=T[1],V=G(Object(r.useState)(!1),2),W=V[0],K=V[1],$=a()(o,i),Q=m||q,X=Object(r.useRef)(),J=Object(r.useRef)(),Z=Object(r.useRef)(),ee=r.useCallback((function(e){return"function"==typeof y?y(e):null==e?void 0:e[y]}),[y]),te={getKey:ee};function ne(e){B((function(t){var n=function(e){var t=e;Number.isNaN(be.current)||(t=Math.min(t,be.current));return t=Math.max(t,0)}("function"==typeof e?e(t):e);return X.current.scrollTop=n,n}))}var re=Object(r.useRef)({start:0,end:Q.length}),oe=Object(r.useRef)(),ae=G(A(Q,ee),1)[0];oe.current=ae;var ie=function(e,t,n){var o=S(r.useState(0),2),a=o[0],i=o[1],c=Object(r.useRef)(new Map),u=Object(r.useRef)(new k),l=Object(r.useRef)();function s(){d.a.cancel(l.current)}function f(){s(),l.current=Object(d.a)((function(){c.current.forEach((function(e,t){if(e&&e.offsetParent){var n=Object(x.a)(e),r=n.offsetHeight;u.current.get(t)!==r&&u.current.set(t,n.offsetHeight)}})),i((function(e){return e+1}))}))}return Object(r.useEffect)((function(){return s}),[]),[function(r,o){var a=e(r),i=c.current.get(a);o?(c.current.set(a,o),f()):c.current.delete(a),!i!=!o&&(o?null==t||t(r):null==n||n(r))},f,u.current,a]}(ee,null,null),ce=G(ie,4),ue=ce[0],le=ce[1],se=ce[2],fe=ce[3],de=r.useMemo((function(){if(!C)return{scrollHeight:void 0,start:0,end:Q.length-1,offset:void 0};var e;if(!P)return{scrollHeight:(null===(e=J.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:Q.length-1,offset:void 0};for(var t,n,r,o=0,a=Q.length,i=0;i<a;i+=1){var l=Q[i],s=ee(l),f=se.get(s),d=o+(void 0===f?u:f);d>=L&&void 0===t&&(t=i,n=o),d>L+c&&void 0===r&&(r=i),o=d}return void 0===t&&(t=0,n=0),void 0===r&&(r=Q.length-1),{scrollHeight:o,start:t,end:r=Math.min(r+1,Q.length),offset:n}}),[P,C,L,Q,fe,c]),pe=de.scrollHeight,me=de.start,he=de.end,ye=de.offset;re.current.start=me,re.current.end=he;var ve=pe-c,be=Object(r.useRef)(ve);be.current=ve;var ge=L<=0,_e=L>=ve,we=R(ge,_e);var Ee=function(e,t,n,o){var a=Object(r.useRef)(0),i=Object(r.useRef)(null),c=Object(r.useRef)(null),u=Object(r.useRef)(!1),l=R(t,n);return[function(t){if(e){d.a.cancel(i.current);var n=t.deltaY;a.current+=n,c.current=n,l(n)||(I||t.preventDefault(),i.current=Object(d.a)((function(){var e=u.current?10:1;o(a.current*e),a.current=0})))}},function(t){e&&(u.current=t.detail===c.current)}]}(C,ge,_e,(function(e){ne((function(t){return t+e}))})),Oe=G(Ee,2),xe=Oe[0],je=Oe[1];!function(e,t,n){var o,a=Object(r.useRef)(!1),i=Object(r.useRef)(0),c=Object(r.useRef)(null),u=Object(r.useRef)(null),l=function(e){if(a.current){var t=Math.ceil(e.touches[0].pageY),r=i.current-t;i.current=t,n(r)&&e.preventDefault(),clearInterval(u.current),u.current=setInterval((function(){(!n(r*=.9333333333333333,!0)||Math.abs(r)<=.1)&&clearInterval(u.current)}),16)}},s=function(){a.current=!1,o()},f=function(e){o(),1!==e.touches.length||a.current||(a.current=!0,i.current=Math.ceil(e.touches[0].pageY),c.current=e.target,c.current.addEventListener("touchmove",l),c.current.addEventListener("touchend",s))};o=function(){c.current&&(c.current.removeEventListener("touchmove",l),c.current.removeEventListener("touchend",s))},Object(D.a)((function(){return e&&t.current.addEventListener("touchstart",f),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",f),o(),clearInterval(u.current)}}),[e])}(C,X,(function(e,t){return!we(e,t)&&(xe({preventDefault:function(){},deltaY:e}),!0)})),Object(D.a)((function(){function e(e){C&&e.preventDefault()}return X.current.addEventListener("wheel",xe),X.current.addEventListener("DOMMouseScroll",je),X.current.addEventListener("MozMousePixelScroll",e),function(){X.current&&(X.current.removeEventListener("wheel",xe),X.current.removeEventListener("DOMMouseScroll",je),X.current.removeEventListener("MozMousePixelScroll",e))}}),[C]);var ke=function(e,t,n,o,a,i,c,u){var l=r.useRef();return function(r){if(null!=r){if(d.a.cancel(l.current),"number"==typeof r)c(r);else if(r&&"object"===N(r)){var s,f=r.align;s="index"in r?r.index:t.findIndex((function(e){return a(e)===r.key}));var p=r.offset,m=void 0===p?0:p;!function r(u,p){if(!(u<0)&&e.current){var h=e.current.clientHeight,y=!1,v=p;if(h){for(var b=p||f,g=0,_=0,w=0,E=Math.min(t.length,s),O=0;O<=E;O+=1){var x=a(t[O]);_=g;var j=n.get(x);g=w=_+(void 0===j?o:j),O===s&&void 0===j&&(y=!0)}var k=null;switch(b){case"top":k=_-m;break;case"bottom":k=w-h+m;break;default:var S=e.current.scrollTop;_<S?v="top":w>S+h&&(v="bottom")}null!==k&&k!==e.current.scrollTop&&c(k)}l.current=Object(d.a)((function(){y&&i(),r(u-1,v)}))}}(3)}}else u()}}(X,Q,se,u,ee,le,ne,(function(){var e;null===(e=Z.current)||void 0===e||e.delayHidden()}));r.useImperativeHandle(t,(function(){return{scrollTo:ke}})),Object(D.a)((function(){if(w){var e=Q.slice(me,he+1);w(e,Q)}}),[me,he,Q]);var Se=function(e,t,n,o,a,i){var c=i.getKey;return e.slice(t,n+1).map((function(e,n){var i=a(e,t+n,{}),u=c(e);return r.createElement(O,{key:u,setRef:function(t){return o(e,t)}},i)}))}(Q,me,he,ue,h,te),Ce=null;return c&&(Ce=U(z({},s?"height":"maxHeight",c),H),C&&(Ce.overflowY="hidden",W&&(Ce.pointerEvents="none"))),r.createElement("div",F({style:U(U({},p),{},{position:"relative"}),className:$},j),r.createElement(g,{className:"".concat(o,"-holder"),style:Ce,ref:X,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==L&&ne(t),null==_||_(e)}},r.createElement(f,{prefixCls:o,height:pe,offset:ye,onInnerResize:le,ref:J},Se)),C&&r.createElement(E,{ref:Z,prefixCls:o,scrollTop:L,height:c,scrollHeight:pe,count:Q.length,onScroll:function(e){ne(e)},onStartMove:function(){K(!0)},onStopMove:function(){K(!1)}}))}var K=r.forwardRef(W);K.displayName="List";var $=K;t.a=$},function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r=n(14),o=n(18),a=n(11),i=n(40),c=n(28),u=n(55),l=n(0),s=n(70),f=n(847),d=n(181),p=n(10),m=n.n(p),h=n(163),y=n(563),v=n(403),b=n(963),g=function(e,t){var n,r,o=e.prefixCls,i=e.id,c=e.inputElement,u=e.disabled,s=e.tabIndex,f=e.autoFocus,p=e.autoComplete,h=e.editable,y=e.accessibilityIndex,v=e.value,b=e.maxLength,g=e.onKeyDown,_=e.onMouseDown,w=e.onChange,E=e.onPaste,O=e.onCompositionStart,x=e.onCompositionEnd,j=e.open,k=e.attrs,S=c||l.createElement("input",null),C=S,N=C.ref,P=C.props,T=P.onKeyDown,A=P.onChange,L=P.onMouseDown,I=P.onCompositionStart,R=P.onCompositionEnd,D=P.style;return S=l.cloneElement(S,Object(a.a)(Object(a.a)({id:i,ref:Object(d.a)(t,N),disabled:u,tabIndex:s,autoComplete:p||"off",type:"search",autoFocus:f,className:m()("".concat(o,"-selection-search-input"),null===(n=S)||void 0===n||null===(r=n.props)||void 0===r?void 0:r.className),style:Object(a.a)(Object(a.a)({},D),{},{opacity:h?null:0}),role:"combobox","aria-expanded":j,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":"".concat(i,"_list_").concat(y)},k),{},{value:h?v:"",maxLength:b,readOnly:!h,unselectable:h?null:"on",onKeyDown:function(e){g(e),T&&T(e)},onMouseDown:function(e){_(e),L&&L(e)},onChange:function(e){w(e),A&&A(e)},onCompositionStart:function(e){O(e),I&&I(e)},onCompositionEnd:function(e){x(e),R&&R(e)},onPaste:E}))},_=l.forwardRef(g);_.displayName="Input";var w=_,E=n(568);function O(e,t){E.b?l.useLayoutEffect(e,t):l.useEffect(e,t)}var x=function(e){e.preventDefault(),e.stopPropagation()},j=function(e){var t=e.id,n=e.prefixCls,r=e.values,a=e.open,i=e.searchValue,u=e.inputRef,s=e.placeholder,f=e.disabled,d=e.mode,p=e.showSearch,h=e.autoFocus,g=e.autoComplete,_=e.accessibilityIndex,E=e.tabIndex,j=e.removeIcon,k=e.maxTagCount,S=e.maxTagTextLength,C=e.maxTagPlaceholder,N=void 0===C?function(e){return"+ ".concat(e.length," ...")}:C,P=e.tagRender,T=e.onToggleOpen,A=e.onSelect,L=e.onInputChange,I=e.onInputPaste,R=e.onInputKeyDown,D=e.onInputMouseDown,M=e.onInputCompositionStart,F=e.onInputCompositionEnd,B=l.useRef(null),U=Object(l.useState)(0),z=Object(c.a)(U,2),G=z[0],V=z[1],Y=Object(l.useState)(!1),q=Object(c.a)(Y,2),H=q[0],W=q[1],K="".concat(n,"-selection"),$=a||"tags"===d?i:"",Q="tags"===d||p&&(a||H);function X(e,t,n,r){return l.createElement("span",{className:m()("".concat(K,"-item"),Object(o.a)({},"".concat(K,"-item-disabled"),t))},l.createElement("span",{className:"".concat(K,"-item-content")},e),n&&l.createElement(b.a,{className:"".concat(K,"-item-remove"),onMouseDown:x,onClick:r,customizeIcon:j},"×"))}O((function(){V(B.current.scrollWidth)}),[$]);var J=l.createElement("div",{className:"".concat(K,"-search"),style:{width:G},onFocus:function(){W(!0)},onBlur:function(){W(!1)}},l.createElement(w,{ref:u,open:a,prefixCls:n,id:t,inputElement:null,disabled:f,autoFocus:h,autoComplete:g,editable:Q,accessibilityIndex:_,value:$,onKeyDown:R,onMouseDown:D,onChange:L,onPaste:I,onCompositionStart:M,onCompositionEnd:F,tabIndex:E,attrs:Object(y.a)(e,!0)}),l.createElement("span",{ref:B,className:"".concat(K,"-search-mirror"),"aria-hidden":!0},$," ")),Z=l.createElement(v.a,{prefixCls:"".concat(K,"-overflow"),data:r,renderItem:function(e){var t=e.disabled,n=e.label,r=e.value,o=!f&&!t,i=n;if("number"==typeof S&&("string"==typeof n||"number"==typeof n)){var c=String(i);c.length>S&&(i="".concat(c.slice(0,S),"..."))}var u=function(e){e&&e.stopPropagation(),A(r,{selected:!1})};return"function"==typeof P?function(e,t,n,r,o){return l.createElement("span",{onMouseDown:function(e){x(e),T(!a)}},P({label:t,value:e,disabled:n,closable:r,onClose:o}))}(r,i,t,o,u):X(i,t,o,u)},renderRest:function(e){return X("function"==typeof N?N(e):N,!1)},suffix:J,itemKey:"key",maxCount:k});return l.createElement(l.Fragment,null,Z,!r.length&&!$&&l.createElement("span",{className:"".concat(K,"-placeholder")},s))},k=function(e){var t=e.inputElement,n=e.prefixCls,r=e.id,o=e.inputRef,a=e.disabled,i=e.autoFocus,u=e.autoComplete,s=e.accessibilityIndex,f=e.mode,d=e.open,p=e.values,m=e.placeholder,h=e.tabIndex,v=e.showSearch,b=e.searchValue,g=e.activeValue,_=e.maxLength,E=e.onInputKeyDown,O=e.onInputMouseDown,x=e.onInputChange,j=e.onInputPaste,k=e.onInputCompositionStart,S=e.onInputCompositionEnd,C=l.useState(!1),N=Object(c.a)(C,2),P=N[0],T=N[1],A="combobox"===f,L=A||v,I=p[0],R=b||"";A&&g&&!P&&(R=g),l.useEffect((function(){A&&T(!1)}),[A,g]);var D=!("combobox"!==f&&!d)&&!!R,M=!I||"string"!=typeof I.label&&"number"!=typeof I.label?void 0:I.label.toString();return l.createElement(l.Fragment,null,l.createElement("span",{className:"".concat(n,"-selection-search")},l.createElement(w,{ref:o,prefixCls:n,id:r,open:d,inputElement:t,disabled:a,autoFocus:i,autoComplete:u,editable:L,accessibilityIndex:s,value:R,onKeyDown:E,onMouseDown:O,onChange:function(e){T(!0),x(e)},onPaste:j,onCompositionStart:k,onCompositionEnd:S,tabIndex:h,attrs:Object(y.a)(e,!0),maxLength:A?_:void 0})),!A&&I&&!D&&l.createElement("span",{className:"".concat(n,"-selection-item"),title:M},I.label),!I&&!D&&l.createElement("span",{className:"".concat(n,"-selection-placeholder")},m))};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=l.useRef(null),n=l.useRef(null);function r(r){(r||null===t.current)&&(t.current=r),window.clearTimeout(n.current),n.current=window.setTimeout((function(){t.current=null}),e)}return l.useEffect((function(){return function(){window.clearTimeout(n.current)}}),[]),[function(){return t.current},r]}var C=function(e,t){var n=Object(l.useRef)(null),o=Object(l.useRef)(!1),a=e.prefixCls,i=e.multiple,u=e.open,f=e.mode,d=e.showSearch,p=e.tokenWithEnter,m=e.onSearch,h=e.onSearchSubmit,y=e.onToggleOpen,v=e.onInputKeyDown,b=e.domRef;l.useImperativeHandle(t,(function(){return{focus:function(){n.current.focus()},blur:function(){n.current.blur()}}}));var g=S(0),_=Object(c.a)(g,2),w=_[0],E=_[1],O=Object(l.useRef)(null),x=function(e){!1!==m(e,!0,o.current)&&y(!0)},C={inputRef:n,onInputKeyDown:function(e){var t=e.which;t!==s.a.UP&&t!==s.a.DOWN||e.preventDefault(),v&&v(e),t!==s.a.ENTER||"tags"!==f||o.current||u||h(e.target.value),[s.a.SHIFT,s.a.TAB,s.a.BACKSPACE,s.a.ESC].includes(t)||y(!0)},onInputMouseDown:function(){E(!0)},onInputChange:function(e){var t=e.target.value;if(p&&O.current&&/[\r\n]/.test(O.current)){var n=O.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(n,O.current)}O.current=null,x(t)},onInputPaste:function(e){var t=e.clipboardData.getData("text");O.current=t},onInputCompositionStart:function(){o.current=!0},onInputCompositionEnd:function(e){o.current=!1,"combobox"!==f&&x(e.target.value)}},N=i?l.createElement(j,Object(r.default)({},e,C)):l.createElement(k,Object(r.default)({},e,C));return l.createElement("div",{ref:b,className:"".concat(a,"-selector"),onClick:function(e){e.target!==n.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){n.current.focus()})):n.current.focus())},onMouseDown:function(e){var t=w();e.target===n.current||t||e.preventDefault(),("combobox"===f||d&&t)&&u||(u&&m("",!0,!1),y())}},N)},N=l.forwardRef(C);N.displayName="Selector";var P=N,T=n(402),A=function(e,t){var n=e.prefixCls,i=(e.disabled,e.visible),c=e.children,s=e.popupElement,f=e.containerWidth,d=e.animation,p=e.transitionName,h=e.dropdownStyle,y=e.dropdownClassName,v=e.direction,b=void 0===v?"ltr":v,g=e.dropdownMatchSelectWidth,_=void 0===g||g,w=e.dropdownRender,E=e.dropdownAlign,O=e.getPopupContainer,x=e.empty,j=e.getTriggerDOMNode,k=e.onPopupVisibleChange,S=Object(u.a)(e,["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange"]),C="".concat(n,"-dropdown"),N=s;w&&(N=w(s));var P=l.useMemo((function(){return function(e){var t="number"!=typeof e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}}}}(_)}),[_]),A=d?"".concat(C,"-").concat(d):p,L=l.useRef(null);l.useImperativeHandle(t,(function(){return{getPopupElement:function(){return L.current}}}));var I=Object(a.a)({minWidth:f},h);return"number"==typeof _?I.width=_:_&&(I.width=f),l.createElement(T.a,Object(r.default)({},S,{showAction:k?["click"]:[],hideAction:k?["click"]:[],popupPlacement:"rtl"===b?"bottomRight":"bottomLeft",builtinPlacements:P,prefixCls:C,popupTransitionName:A,popup:l.createElement("div",{ref:L},N),popupAlign:E,popupVisible:i,getPopupContainer:O,popupClassName:m()(y,Object(o.a)({},"".concat(C,"-empty"),x)),popupStyle:I,getTriggerDOMNode:j,onPopupVisibleChange:k}),c)},L=l.forwardRef(A);L.displayName="SelectTrigger";var I=L,R=n(1321);var D=n(609);var M=["removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","tabIndex"];function F(e){var t=e.prefixCls,n=e.components.optionList,p=e.convertChildrenToData,y=e.flattenOptions,v=e.getLabeledValue,g=e.filterOptions,_=e.isValueDisabled,w=e.findValueOption,x=(e.warningProps,e.fillOptionsWithMissingValue),j=e.omitDOMProps;function k(e,k){var C,N=e.prefixCls,T=void 0===N?t:N,A=e.className,L=e.id,F=e.open,B=e.defaultOpen,U=e.options,z=e.children,G=e.mode,V=e.value,Y=e.defaultValue,q=e.labelInValue,H=e.showSearch,W=e.inputValue,K=e.searchValue,$=e.filterOption,Q=e.filterSort,X=e.optionFilterProp,J=void 0===X?"value":X,Z=e.autoClearSearchValue,ee=void 0===Z||Z,te=e.onSearch,ne=e.allowClear,re=e.clearIcon,oe=e.showArrow,ae=e.inputIcon,ie=e.menuItemSelectedIcon,ce=e.disabled,ue=e.loading,le=e.defaultActiveFirstOption,se=e.notFoundContent,fe=void 0===se?"Not Found":se,de=e.optionLabelProp,pe=e.backfill,me=(e.tabIndex,e.getInputElement),he=e.getRawInputElement,ye=e.getPopupContainer,ve=e.listHeight,be=void 0===ve?200:ve,ge=e.listItemHeight,_e=void 0===ge?20:ge,we=e.animation,Ee=e.transitionName,Oe=e.virtual,xe=e.dropdownStyle,je=e.dropdownClassName,ke=e.dropdownMatchSelectWidth,Se=e.dropdownRender,Ce=e.dropdownAlign,Ne=e.showAction,Pe=void 0===Ne?[]:Ne,Te=e.direction,Ae=e.tokenSeparators,Le=e.tagRender,Ie=e.onPopupScroll,Re=e.onDropdownVisibleChange,De=e.onFocus,Me=e.onBlur,Fe=e.onKeyUp,Be=e.onKeyDown,Ue=e.onMouseDown,ze=e.onChange,Ge=e.onSelect,Ve=e.onDeselect,Ye=e.onClear,qe=e.internalProps,He=void 0===qe?{}:qe,We=Object(u.a)(e,["prefixCls","className","id","open","defaultOpen","options","children","mode","value","defaultValue","labelInValue","showSearch","inputValue","searchValue","filterOption","filterSort","optionFilterProp","autoClearSearchValue","onSearch","allowClear","clearIcon","showArrow","inputIcon","menuItemSelectedIcon","disabled","loading","defaultActiveFirstOption","notFoundContent","optionLabelProp","backfill","tabIndex","getInputElement","getRawInputElement","getPopupContainer","listHeight","listItemHeight","animation","transitionName","virtual","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","showAction","direction","tokenSeparators","tagRender","onPopupScroll","onDropdownVisibleChange","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown","onChange","onSelect","onDeselect","onClear","internalProps"]),Ke=He.mark===R.a,$e=j?j(We):We;M.forEach((function(e){delete $e[e]}));var Qe=Object(l.useRef)(null),Xe=Object(l.useRef)(null),Je=Object(l.useRef)(null),Ze=Object(l.useRef)(null),et=Object(l.useMemo)((function(){return(Ae||[]).some((function(e){return["\n","\r\n"].includes(e)}))}),[Ae]),tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=l.useState(!1),n=Object(c.a)(t,2),r=n[0],o=n[1],a=l.useRef(null),i=function(){window.clearTimeout(a.current)};l.useEffect((function(){return i}),[]);var u=function(t,n){i(),a.current=window.setTimeout((function(){o(t),n&&n()}),e)};return[r,u,i]}(),nt=Object(c.a)(tt,3),rt=nt[0],ot=nt[1],at=nt[2],it=Object(l.useState)(),ct=Object(c.a)(it,2),ut=ct[0],lt=ct[1];Object(l.useEffect)((function(){lt("rc_select_".concat(Object(E.a)()))}),[]);var st=L||ut,ft=de;void 0===ft&&(ft=U?"label":"children");var dt="combobox"!==G&&q,pt="tags"===G||"multiple"===G,mt=void 0!==H?H:pt||"combobox"===G,ht=Object(l.useState)(!1),yt=Object(c.a)(ht,2),vt=yt[0],bt=yt[1];Object(l.useEffect)((function(){bt(Object(f.a)())}),[]);var gt=Object(l.useRef)(null);l.useImperativeHandle(k,(function(){var e,t,n;return{focus:null===(e=Je.current)||void 0===e?void 0:e.focus,blur:null===(t=Je.current)||void 0===t?void 0:t.blur,scrollTo:null===(n=Ze.current)||void 0===n?void 0:n.scrollTo}}));var _t=Object(h.a)(Y,{value:V}),wt=Object(c.a)(_t,2),Et=wt[0],Ot=wt[1],xt=Object(l.useMemo)((function(){return Object(E.e)(Et,{labelInValue:dt,combobox:"combobox"===G})}),[Et,dt]),jt=Object(c.a)(xt,2),kt=jt[0],St=jt[1],Ct=Object(l.useMemo)((function(){return new Set(kt)}),[kt]),Nt=Object(l.useState)(null),Pt=Object(c.a)(Nt,2),Tt=Pt[0],At=Pt[1],Lt=Object(l.useState)(""),It=Object(c.a)(Lt,2),Rt=It[0],Dt=It[1],Mt=Rt;"combobox"===G&&void 0!==Et?Mt=Et:void 0!==K?Mt=K:W&&(Mt=W);var Ft=Object(l.useMemo)((function(){var e=U;return void 0===e&&(e=p(z)),"tags"===G&&x&&(e=x(e,Et,ft,q)),e||[]}),[U,z,G,Et]),Bt=Object(l.useMemo)((function(){return y(Ft,e)}),[Ft]),Ut=function(e){var t=l.useRef(null),n=l.useMemo((function(){var t=new Map;return e.forEach((function(e){var n=e.data.value;t.set(n,e)})),t}),[e]);return t.current=n,function(e){return e.map((function(e){return t.current.get(e)})).filter(Boolean)}}(Bt),zt=Object(l.useMemo)((function(){if(!Mt||!mt)return Object(i.a)(Ft);var e=g(Mt,Ft,{optionFilterProp:J,filterOption:"combobox"===G&&void 0===$?function(){return!0}:$});return"tags"===G&&e.every((function(e){return e[J]!==Mt}))&&e.unshift({value:Mt,label:Mt,key:"__RC_SELECT_TAG_PLACEHOLDER__"}),Q&&Array.isArray(e)?Object(i.a)(e).sort(Q):e}),[Ft,Mt,G,mt,Q]),Gt=Object(l.useMemo)((function(){return y(zt,e)}),[zt]);Object(l.useEffect)((function(){Ze.current&&Ze.current.scrollTo&&Ze.current.scrollTo(0)}),[Mt]);var Vt,Yt,qt=Object(l.useMemo)((function(){var e=kt.map((function(e){var t=Ut([e]),n=v(e,{options:t,prevValueMap:St,labelInValue:dt,optionLabelProp:ft});return Object(a.a)(Object(a.a)({},n),{},{disabled:_(e,t)})}));return G||1!==e.length||null!==e[0].value||null!==e[0].label?e:[]}),[Et,Ft,G]);Vt=qt,Yt=l.useRef(Vt),qt=l.useMemo((function(){var e=new Map;Yt.current.forEach((function(t){var n=t.value,r=t.label;n!==r&&e.set(n,r)}));var t=Vt.map((function(t){var n=e.get(t.value);return t.isCacheable&&n?Object(a.a)(Object(a.a)({},t),{},{label:n}):t}));return Yt.current=t,t}),[Vt]);var Ht=function(e,t,n){var r=Ut([e]),o=w([e],r)[0];if(!He.skipTriggerSelect){var a=dt?v(e,{options:r,prevValueMap:St,labelInValue:dt,optionLabelProp:ft}):e;t&&Ge?Ge(a,o):!t&&Ve&&Ve(a,o)}Ke&&(t&&He.onRawSelect?He.onRawSelect(e,o,n):!t&&He.onRawDeselect&&He.onRawDeselect(e,o,n))},Wt=Object(l.useState)([]),Kt=Object(c.a)(Wt,2),$t=Kt[0],Qt=Kt[1],Xt=function(e){if(!Ke||!He.skipTriggerChange){var t=Ut(e),n=Object(E.f)(Array.from(e),{labelInValue:dt,options:t,getLabeledValue:v,prevValueMap:St,optionLabelProp:ft}),r=pt?n:n[0];if(ze&&(0!==kt.length||0!==n.length)){var o=w(e,t,{prevValueOptions:$t});Qt(o.map((function(t,n){var r=Object(a.a)({},t);return Object.defineProperty(r,"_INTERNAL_OPTION_VALUE_",{get:function(){return e[n]}}),r}))),ze(r,pt?o:o[0])}Ot(r)}},Jt=function(e,t){var n,r=t.selected,o=t.source;ce||(pt?(n=new Set(kt),r?n.add(e):n.delete(e)):(n=new Set).add(e),(pt||!pt&&Array.from(kt)[0]!==e)&&Xt(Array.from(n)),Ht(e,!pt||r,o),"combobox"===G?(Dt(String(e)),At("")):pt&&!ee||(Dt(""),At("")))},Zt="combobox"===G&&"function"==typeof me&&me()||null,en="function"==typeof he&&he(),tn=Object(h.a)(void 0,{defaultValue:B,value:F}),nn=Object(c.a)(tn,2),rn=nn[0],on=nn[1],an=rn,cn=!fe&&!zt.length;(ce||cn&&an&&"combobox"===G)&&(an=!1);var un,ln=!cn&&an,sn=function(e){var t=void 0!==e?e:!an;rn===t||ce||(on(t),Re&&Re(t))};en&&(un=function(e){sn(e)}),function(e,t,n){var r=l.useRef(null);r.current={open:t,triggerOpen:n},l.useEffect((function(){function t(t){var n=t.target;n.shadowRoot&&t.composed&&(n=t.composedPath()[0]||n),r.current.open&&e().filter((function(e){return e})).every((function(e){return!e.contains(n)&&e!==n}))&&r.current.triggerOpen(!1)}return window.addEventListener("mousedown",t),function(){return window.removeEventListener("mousedown",t)}}),[])}((function(){var e;return[Qe.current,null===(e=Xe.current)||void 0===e?void 0:e.getPopupElement()]}),ln,sn);var fn=function(e,t,n){var r=!0,o=e;At(null);var a=n?null:Object(D.f)(e,Ae),c=a;if("combobox"===G)t&&Xt([o]);else if(a){o="","tags"!==G&&(c=a.map((function(e){var t=Bt.find((function(t){return t.data[ft]===e}));return t?t.data.value:null})).filter((function(e){return null!==e})));var u=Array.from(new Set([].concat(Object(i.a)(kt),Object(i.a)(c))));Xt(u),u.forEach((function(e){Ht(e,!0,"input")})),sn(!1),r=!1}return Dt(o),te&&Mt!==o&&te(o),r};Object(l.useEffect)((function(){rn&&ce&&on(!1)}),[ce]),Object(l.useEffect)((function(){an||pt||"combobox"===G||fn("",!1,!1)}),[an]);var dn=S(),pn=Object(c.a)(dn,2),mn=pn[0],hn=pn[1],yn=Object(l.useRef)(!1),vn=[];Object(l.useEffect)((function(){return function(){vn.forEach((function(e){return clearTimeout(e)})),vn.splice(0,vn.length)}}),[]);var bn=Object(l.useState)(0),gn=Object(c.a)(bn,2),_n=gn[0],wn=gn[1],En=void 0!==le?le:"combobox"!==G,On=Object(l.useState)(null),xn=Object(c.a)(On,2),jn=xn[0],kn=xn[1],Sn=Object(l.useState)({}),Cn=Object(c.a)(Sn,2)[1];O((function(){if(ln){var e,t=Math.ceil(null===(e=Qe.current)||void 0===e?void 0:e.offsetWidth);jn===t||Number.isNaN(t)||kn(t)}}),[ln]);var Nn,Pn=l.createElement(n,{ref:Ze,prefixCls:T,id:st,open:an,childrenAsData:!U,options:zt,flattenOptions:Gt,multiple:pt,values:Ct,height:be,itemHeight:_e,onSelect:function(e,t){Jt(e,Object(a.a)(Object(a.a)({},t),{},{source:"option"}))},onToggleOpen:sn,onActiveValue:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.source,o=void 0===r?"keyboard":r;wn(t),pe&&"combobox"===G&&null!==e&&"keyboard"===o&&At(String(e))},defaultActiveFirstOption:En,notFoundContent:fe,onScroll:Ie,searchValue:Mt,menuItemSelectedIcon:ie,virtual:!1!==Oe&&!1!==ke,onMouseEnter:function(){Cn({})}});!ce&&ne&&(kt.length||Mt)&&(Nn=l.createElement(b.a,{className:"".concat(T,"-clear"),onMouseDown:function(){Ke&&He.onClear&&He.onClear(),Ye&&Ye(),Xt([]),fn("",!1,!1)},customizeIcon:re},"×"));var Tn,An=void 0!==oe?oe:ue||!pt&&"combobox"!==G;An&&(Tn=l.createElement(b.a,{className:m()("".concat(T,"-arrow"),Object(o.a)({},"".concat(T,"-arrow-loading"),ue)),customizeIcon:ae,customizeIconProps:{loading:ue,searchValue:Mt,open:an,focused:rt,showSearch:mt}}));var Ln=m()(T,A,(C={},Object(o.a)(C,"".concat(T,"-focused"),rt),Object(o.a)(C,"".concat(T,"-multiple"),pt),Object(o.a)(C,"".concat(T,"-single"),!pt),Object(o.a)(C,"".concat(T,"-allow-clear"),ne),Object(o.a)(C,"".concat(T,"-show-arrow"),An),Object(o.a)(C,"".concat(T,"-disabled"),ce),Object(o.a)(C,"".concat(T,"-loading"),ue),Object(o.a)(C,"".concat(T,"-open"),an),Object(o.a)(C,"".concat(T,"-customize-input"),Zt),Object(o.a)(C,"".concat(T,"-show-search"),mt),C)),In=l.createElement(I,{ref:Xe,disabled:ce,prefixCls:T,visible:ln,popupElement:Pn,containerWidth:jn,animation:we,transitionName:Ee,dropdownStyle:xe,dropdownClassName:je,direction:Te,dropdownMatchSelectWidth:ke,dropdownRender:Se,dropdownAlign:Ce,getPopupContainer:ye,empty:!Ft.length,getTriggerDOMNode:function(){return gt.current},onPopupVisibleChange:un},en?l.cloneElement(en,{ref:Object(d.a)(gt,en.props.ref)}):l.createElement(P,Object(r.default)({},e,{domRef:gt,prefixCls:T,inputElement:Zt,ref:Je,id:st,showSearch:mt,mode:G,accessibilityIndex:_n,multiple:pt,tagRender:Le,values:qt,open:an,onToggleOpen:sn,searchValue:Mt,activeValue:Tt,onSearch:fn,onSearchSubmit:function(e){if(e&&e.trim()){var t=Array.from(new Set([].concat(Object(i.a)(kt),[e])));Xt(t),t.forEach((function(e){Ht(e,!0,"input")})),Dt("")}},onSelect:function(e,t){Jt(e,Object(a.a)(Object(a.a)({},t),{},{source:"selection"}))},tokenWithEnter:et})));return en?In:l.createElement("div",Object(r.default)({className:Ln},$e,{ref:Qe,onMouseDown:function(e){var t,n=e.target,r=null===(t=Xe.current)||void 0===t?void 0:t.getPopupElement();if(r&&r.contains(n)){var o=setTimeout((function(){var e,t=vn.indexOf(o);(-1!==t&&vn.splice(t,1),at(),vt||r.contains(document.activeElement))||(null===(e=Je.current)||void 0===e||e.focus())}));vn.push(o)}if(Ue){for(var a=arguments.length,i=new Array(a>1?a-1:0),c=1;c<a;c++)i[c-1]=arguments[c];Ue.apply(void 0,[e].concat(i))}},onKeyDown:function(e){var t,n=mn(),r=e.which;if(r===s.a.ENTER&&("combobox"!==G&&e.preventDefault(),an||sn(!0)),hn(!!Mt),r===s.a.BACKSPACE&&!n&&pt&&!Mt&&kt.length){var o=Object(E.c)(qt,kt);null!==o.removedValue&&(Xt(o.values),Ht(o.removedValue,!1,"input"))}for(var a=arguments.length,i=new Array(a>1?a-1:0),c=1;c<a;c++)i[c-1]=arguments[c];an&&Ze.current&&(t=Ze.current).onKeyDown.apply(t,[e].concat(i));Be&&Be.apply(void 0,[e].concat(i))},onKeyUp:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o;an&&Ze.current&&(o=Ze.current).onKeyUp.apply(o,[e].concat(n));Fe&&Fe.apply(void 0,[e].concat(n))},onFocus:function(){ot(!0),ce||(De&&!yn.current&&De.apply(void 0,arguments),Pe.includes("focus")&&sn(!0)),yn.current=!0},onBlur:function(){ot(!1,(function(){yn.current=!1,sn(!1)})),ce||(Mt&&("tags"===G?(fn("",!1,!1),Xt(Array.from(new Set([].concat(Object(i.a)(kt),[Mt]))))):"multiple"===G&&Dt("")),Me&&Me.apply(void 0,arguments))}}),rt&&!an&&l.createElement("span",{style:{width:0,height:0,display:"flex",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(kt.join(", "))),In,Tn,Nn)}return l.forwardRef(k)}},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(11),c=n(28),u=n(55),l=n(402),s=n(10),f=n.n(s),d={adjustX:1,adjustY:1},p=[0,0],m={topLeft:{points:["bl","tl"],overflow:d,offset:[0,-4],targetOffset:p},topCenter:{points:["bc","tc"],overflow:d,offset:[0,-4],targetOffset:p},topRight:{points:["br","tr"],overflow:d,offset:[0,-4],targetOffset:p},bottomLeft:{points:["tl","bl"],overflow:d,offset:[0,4],targetOffset:p},bottomCenter:{points:["tc","bc"],overflow:d,offset:[0,4],targetOffset:p},bottomRight:{points:["tr","br"],overflow:d,offset:[0,4],targetOffset:p}},h=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger"];function y(e,t){var n=e.arrow,r=void 0!==n&&n,s=e.prefixCls,d=void 0===s?"rc-dropdown":s,p=e.transitionName,y=e.animation,v=e.align,b=e.placement,g=void 0===b?"bottomLeft":b,_=e.placements,w=void 0===_?m:_,E=e.getPopupContainer,O=e.showAction,x=e.hideAction,j=e.overlayClassName,k=e.overlayStyle,S=e.visible,C=e.trigger,N=void 0===C?["hover"]:C,P=Object(u.a)(e,h),T=a.useState(),A=Object(c.a)(T,2),L=A[0],I=A[1],R="visible"in e?S:L,D=a.useRef(null);a.useImperativeHandle(t,(function(){return D.current}));var M,F,B,U,z,G,V=function(){var t=e.overlay;return"function"==typeof t?t():t},Y=function(t){var n=e.onOverlayClick,r=V().props;I(!1),n&&n(t),r.onClick&&r.onClick(t)},q=function(){var e=V(),t={prefixCls:"".concat(d,"-menu"),onClick:Y};return"string"==typeof e.type&&delete t.prefixCls,a.createElement(a.Fragment,null,r&&a.createElement("div",{className:"".concat(d,"-arrow")}),a.cloneElement(e,t))},H=x;return H||-1===N.indexOf("contextMenu")||(H=["click"]),a.createElement(l.a,Object(i.a)(Object(i.a)({builtinPlacements:w},P),{},{prefixCls:d,ref:D,popupClassName:f()(j,Object(o.a)({},"".concat(d,"-show-arrow"),r)),popupStyle:k,action:N,showAction:O,hideAction:H||[],popupPlacement:g,popupAlign:v,popupTransitionName:p,popupAnimation:y,popupVisible:R,stretch:(z=e.minOverlayWidthMatchTrigger,G=e.alignPoint,("minOverlayWidthMatchTrigger"in e?z:!G)?"minWidth":""),popup:"function"==typeof e.overlay?q:q(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;I(t),"function"==typeof n&&n(t)},getPopupContainer:E}),(F=e.children,B=F.props?F.props:{},U=f()(B.className,void 0!==(M=e.openClassName)?M:"".concat(d,"-open")),R&&F?a.cloneElement(F,{className:U}):F))}var v=a.forwardRef(y),b=n(254),g=n(928),_=n(105),w=n(257),E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},O=_.a.Group,x=function(e){var t=a.useContext(w.b),n=t.getPopupContainer,o=t.getPrefixCls,i=t.direction,u=e.prefixCls,l=e.type,s=e.disabled,d=e.onClick,p=e.htmlType,m=e.children,h=e.className,y=e.overlay,v=e.trigger,b=e.align,x=e.visible,j=e.onVisibleChange,k=e.placement,S=e.getPopupContainer,C=e.href,N=e.icon,T=void 0===N?a.createElement(g.a,null):N,A=e.title,L=e.buttonsRender,I=e.mouseEnterDelay,R=e.mouseLeaveDelay,D=E(e,["prefixCls","type","disabled","onClick","htmlType","children","className","overlay","trigger","align","visible","onVisibleChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay"]),M=o("dropdown-button",u),F={align:b,overlay:y,disabled:s,trigger:s?[]:v,onVisibleChange:j,getPopupContainer:S||n,mouseEnterDelay:I,mouseLeaveDelay:R};"visible"in e&&(F.visible=x),F.placement="placement"in e?k:"rtl"===i?"bottomLeft":"bottomRight";var B=L([a.createElement(_.a,{type:l,disabled:s,onClick:d,htmlType:p,href:C,title:A},m),a.createElement(_.a,{type:l,icon:T})]),U=Object(c.a)(B,2),z=U[0],G=U[1];return a.createElement(O,Object(r.default)({},D,{className:f()(M,h)}),z,a.createElement(P,F,G))};x.__ANT_BUTTON=!0,x.defaultProps={type:"default",buttonsRender:function(e){return e}};var j=x,k=n(95),S=n(303),C=n(118),N=(Object(S.a)("topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight"),function(e){var t,n,i,c,u,l=a.useContext(w.b),s=l.getPopupContainer,d=l.getPrefixCls,p=l.direction,m=e.arrow,h=e.prefixCls,y=e.children,g=e.trigger,_=e.disabled,E=e.getPopupContainer,O=e.overlayClassName,x=d("dropdown",h),j=a.Children.only(y),S=Object(C.a)(j,{className:f()("".concat(x,"-trigger"),Object(o.a)({},"".concat(x,"-rtl"),"rtl"===p),j.props.className),disabled:_}),N=f()(O,Object(o.a)({},"".concat(x,"-rtl"),"rtl"===p)),P=_?[]:g;return P&&-1!==P.indexOf("contextMenu")&&(t=!0),a.createElement(v,Object(r.default)({arrow:m,alignPoint:t},e,{overlayClassName:N,prefixCls:x,getPopupContainer:E||s,transitionName:(n=d(),i=e.placement,c=void 0===i?"":i,u=e.transitionName,void 0!==u?u:c.indexOf("top")>=0?"".concat(n,"-slide-down"):"".concat(n,"-slide-up")),trigger:P,overlay:function(){return function(t){var n,r=e.overlay;n="function"==typeof r?r():r;var o=(n=a.Children.only("string"==typeof n?a.createElement("span",null,n):n)).props;Object(k.a)(!o.mode||"vertical"===o.mode,"Dropdown",'mode="'.concat(o.mode,"\" is not supported for Dropdown's Menu."));var i=o.selectable,c=void 0!==i&&i,u=o.expandIcon,l=void 0!==u&&a.isValidElement(u)?u:a.createElement("span",{className:"".concat(t,"-menu-submenu-arrow")},a.createElement(b.a,{className:"".concat(t,"-menu-submenu-arrow-icon")}));return"string"==typeof n.type?n:Object(C.a)(n,{mode:"vertical",selectable:c,expandIcon:l})}(x)},placement:function(){var t=e.placement;return void 0!==t?t:"rtl"===p?"bottomRight":"bottomLeft"}()}),S)});N.Button=j,N.defaultProps={mouseEnterDelay:.15,mouseLeaveDelay:.1};var P=t.a=N},function(e,t,n){"use strict";n(173);var r=n(94),o=(n(50),n(19)),a=(n(75),n(26)),i=(n(60),n(24)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f=n(211),d=n.n(f),p=n(34),m=(n(130),n(35)),h=n(42),y=n.n(h),v=n(991),b=n.n(v),g=n(527),_=n(109),w=n(127);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t=E(Object(c.useState)([]),2),n=t[0],r=t[1];return Object(c.useEffect)((function(){p.a.users.mailHistories({}).then((function(e){r(e)}))}),[e]),{mailHistory:n}},j="RecipientSelector-module_recipient_Ds5UW",k="RecipientSelector-module_mention_5r6oN",S="RecipientSelector-module_userForCheck_a4ZZP",C="RecipientSelector-module_mailHistory_-ft0g",N="RecipientSelector-module_title_-yKJG",P="RecipientSelector-module_users_ZwnLM",T="RecipientSelector-module_info_eM40g",A="RecipientSelector-module_avatar_lGHzI",L="RecipientSelector-module_name_HeaN7",I="RecipientSelector-module_dep_B2T89";function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=["alibaba-inc.com","antfin.com","list.alibaba-inc.com","cainiao.com"];function F(e){var t=R(Object(c.useState)(!1),2),n=t[0],r=t[1],o=R(Object(c.useState)(e.defaultValue||[]),2),a=o[0],l=o[1],s=x(window.appData.me).mailHistory,f=R(Object(c.useState)([]),2),d=f[0],h=f[1],v=Object(c.useRef)(),_=null,E=__("最多只能选择100个邮箱地址，建议请使用邮件组"),O=__("收件人有重复，已自动去重"),D=function(t){var n=t.length,o=(t=b()(t,(function(e,t){return e.email&&t.email?e.email===t.email:!(!e.login||!t.login)&&e.login===t.login}))).length;o>100?(i.a.warning(E),t.splice(100)):o!==n&&i.a.warning(O),l(t),e.onChange(t),r(!1),h([]),setTimeout((function(){v&&v.current&&v.current.focus()}),100)};Object(c.useEffect)((function(){return function(){_&&(clearTimeout(_),_=null)}}));var F=y()((function(e){(function(e){e=e.split(";");var t=[];if(e.forEach((function(e){if(g.validator.isEmail(e))t.push({name:e,email:e});else{var n=e.match(/([^<]+)<([^>]+)>/);n&&g.validator.isEmail(n[2])&&t.push({name:n[1],email:n[2]})}})),t.length>0){var n=a.concat(t);return D(n),v.current.blur(),!0}return!1})(e)||function(e){if(-1!==e.indexOf("@")){var t=e.split("@"),n=t[1],r=M.filter((function(e){return e.startsWith(n)})).map((function(e){return{name:"".concat(t[0],"@").concat(e),email:"".concat(t[0],"@").concat(e)}}));return h(r),!0}return!1}(e)||(r(!1),p.a.users.complete({q:e.trim(),include_unconfirmed_corp_account:!0}).then((function(e){h(e),v.current.focus()})))}),300),B=a.map((function(e){return e.name}));return u.a.createElement("div",{className:j},u.a.createElement("span",{className:k,onClick:function(){if(window.__engine&&window.__engine.extractMention){var e=window.__engine.extractMention();if(0===(e=e.filter((function(e){return e.name&&e.name.trim()&&e.login&&e.login.trim()}))).length)return void i.a.warn(__("文档中没有 @ 人"));var t=a.concat(e);D(t)}}},__("添加文档中 @ 的人")),u.a.createElement(m.a,{mode:"multiple",style:{width:"100%"},placeholder:__("请输入花名或邮箱地址"),onChange:function(e){var t=a.filter((function(t){return e.includes(t.name)}));D(t)},onFocus:function(){0===a.length&&r(!0)},onSearch:F,onBlur:function(){_&&clearTimeout(_),_=setTimeout((function(){r(!1),h([])}),500)},allowClear:!0,value:B,notFoundContent:null,ref:v}),d.length>0&&u.a.createElement("div",{className:S},d.map((function(e){return u.a.createElement("p",{key:e.email,onClick:function(){!function(e){if(100!==a.length)if(0===a.filter((function(t){return t.email===e.email})).length){var t=a.concat(e);D(t)}else i.a.warning(O);else i.a.warning(E)}(e)}},e.avatar_url&&u.a.createElement(w.a,{className:A,src:e.avatar_url,size:32}),u.a.createElement("span",{className:L},e.name),e.dep&&u.a.createElement("span",{className:I},e.dep))}))),n&&s&&s.length>0&&u.a.createElement("div",{className:C,"data-testid":"mail-history"},u.a.createElement("div",{className:N},__("历史记录")),u.a.createElement("ul",null,s.map((function(e){return u.a.createElement("li",{onClick:function(){!function(e){D(e.mail_list)}(e)},key:e.id},u.a.createElement("p",{className:P},e.mail_list.map((function(e){return e.name})).join(",")),u.a.createElement("p",null,u.a.createElement("span",{className:T},__("标题："),e.title)))})))))}F.propTypes={onChange:s.a.func.isRequired,defaultValue:s.a.array};var B=Object(_.b)(F,!1),U="DocSendMail-module_sendMail_QBA+O",z="DocSendMail-module_recipient_zqM9E",G="DocSendMail-module_title_Af2FA",V="DocSendMail-module_submitButton_HEsW-",Y="DocSendMail-module_mailResult_AhaV4";function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $(this,n)}}function $(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(s,e);var t,n,c,l=K(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),J(Q(t=l.call(this,e)),"ready",(function(){0!==t.state.receiver.length?"sending"!==t.state.mailStatus&&(t.setState({mailStatus:"sending"},(function(){t.props.onMailSending(),t.startClock(5)})),t.timer=setTimeout(t.sendMail,5e3)):i.a.error(__("请选择收件人"))})),J(Q(t),"startClock",(function(e){t.setState({seconds:e}),0!==e&&"sending"===t.state.mailStatus&&(t.clocker=setTimeout((function(){t.startClock(e-1)}),1e3))})),J(Q(t),"sendMail",(function(){var e=t.state,n=e.receiver,r=e.title,o={id:t.props.doc.id,title:r||t.props.doc.title,content:window.__engine?window.__engine.getDocument("text/html",{mode:"inline"}):""};try{o.mail_list=t.normalizeMail(n)}catch(a){return void i.a.error(a.message)}p.a.docs.sendMail(o,{ignoreGlobalMessage:!0}).then((function(e){t.setState({mailStatus:"success",receiver:[]}),t.props.onMailSended()})).catch((function(e){e.status&&e.status>=400&&e.status<500?t.setState({mailStatus:"block",mailBlockMessage:e.message}):t.setState({mailStatus:"failed"})}))})),J(Q(t),"retry",(function(){t.setState({mailStatus:"normal",mailBlockMessage:""})})),J(Q(t),"normalizeMail",(function(e){return e.map((function(e){return d()(e,["email","login","user_id","name"])}))})),J(Q(t),"onChangeReceiver",(function(e){t.setState({receiver:e})})),J(Q(t),"onChangeTitle",(function(e){t.setState({title:e.target.value})})),J(Q(t),"renderMailSelector",(function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:G},u.a.createElement("h5",null,__("标题")),u.a.createElement(a.a,{onChange:t.onChangeTitle,defaultValue:t.props.doc.title})),u.a.createElement("div",{className:z},u.a.createElement("h5",null,__("收件人")),u.a.createElement(B,{onChange:t.onChangeReceiver,defaultValue:t.state.receiver})),u.a.createElement("div",{className:V},u.a.createElement(o.a,{onClick:t.ready,type:"primary"},__("发送"))))})),J(Q(t),"cancel",(function(){t.timer&&(clearTimeout(t.timer),t.timer=null),t.clocker&&(clearTimeout(t.clocker),t.clocker=null),t.setState({mailStatus:"normal",mailBlockMessage:""}),i.a.warning(__("已取消发送")),t.props.onMailSended()})),J(Q(t),"renderSending",(function(){return u.a.createElement("div",{className:Y},u.a.createElement(r.a,{justify:"block"}),u.a.createElement("p",null,__("邮件即将在 {seconds} 秒后发送，{cancel}",{cancel:u.a.createElement("a",{href:"#",onClick:t.cancel},__("撤销")),seconds:t.state.seconds||0})))})),J(Q(t),"renderSuccess",(function(){return u.a.createElement("div",{className:Y},u.a.createElement("span",{className:"larkicon larkicon-check-o"}),u.a.createElement("p",null,__("发送成功")))})),J(Q(t),"renderFailed",(function(){return u.a.createElement("div",{className:Y},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,__("发送失败, 请{retry}",{retry:u.a.createElement("a",{href:"#",onClick:t.retry},__("重新发送"))})))})),J(Q(t),"renderBlock",(function(){return u.a.createElement("div",{className:Y},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,t.state.mailBlockMessage))})),J(Q(t),"renderCanceled",(function(){return u.a.createElement("div",{className:Y},u.a.createElement("p",null,__("已取消发送")))})),t.state={receiver:[]},t}return t=s,(n=[{key:"componentDidMount",value:function(){this.setState({mailStatus:"normal",mailBlockMessage:""})}},{key:"render",value:function(){var e;switch(this.state.mailStatus){case"sending":e=this.renderSending();break;case"success":e=this.renderSuccess();break;case"failed":e=this.renderFailed();break;case"block":e=this.renderBlock();break;case"canceled":e=this.renderCanceled();break;default:e=this.renderMailSelector()}return u.a.createElement("div",{className:U,"data-testid":"send-mail-modal"},u.a.createElement("h4",null,__("发送到邮箱")),u.a.createElement("p",null,__("将文档内容发送到指定邮箱")),e)}}])&&H(t.prototype,n),c&&H(t,c),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.PureComponent);Z.defaultProps={},Z.propTypes={onMailSended:s.a.func,onMailSending:s.a.func,doc:s.a.object};t.a=Z},function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));n(96);var r=n(23),o=(n(60),n(24)),a=(n(173),n(94)),i=n(2025);window.g_prefetch=window.g_prefetch||{};var c=window.appData.prefetch;try{c&&(window.g_prefetch[c]=i[c]())}catch(V){window.g_prefetch[c]=null,console.error("数据预获取失败",V)}var u=n(32),l=n.n(u),s=n(270),f=n.n(s),d=(n(559),n(142)),p=n.n(d),m=n(659),h=n(1923),y=n(635),v=n(628),b=n(1325),g=n(641),_=n(433);function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=["yuque.alibaba-inc.com","yuque.antfin-inc.com","yuque.antfin.com"];function x(e){var t=e.target.closest("a");if(t){var n,r=t.getAttribute("href"),o=w(O);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(r&&r.startsWith("https://".concat(a))){var i=new URL(r);i.host=window.location.host,t.href=i.toString()}}}catch(c){o.e(c)}finally{o.f()}}}for(var j=0,k=O;j<k.length;j++){var S=k[j];if(window.location.host===S){document.addEventListener("mousedown",x,!1);break}}var C,N,P=n(349);n(2608);h.a.init(null===(C=window.appData)||void 0===C||null===(N=C.me)||void 0===N?void 0:N.id),m.a.smartLoadLakexEditor(),Object(g.a)("start-umijs-render");var T=window.appData,A=T.isEnterprise,L=T.isYuque,I=T.isDingTalkApp,R=T.isDingTalkDesktopApp,D=T.locale,M=T.doc,F="en-us"===D&&Object(v.c)();if(window.__=function(e,t){return Object(y.a)(e,t,F)},window.h5=window.appData.forceMobileView||!(!f.a.mobile&&!f.a.tablet||"desktop"===appData.me.mobile_view),_.a.shouldRender("terms").then((function(e){e&&_.a.executeRender("terms",__("语雀服务协议更新"),__("《语雀服务协议》"))})),I&&document.body.setAttribute("is-dingtalk-app",""),!L&&R&&null!=M&&M.id&&window.open(window.location.href,"_blank"),window.location.href.includes("__pc=1"),a.a.setDefaultIndicator(React.createElement(a.a,null)),o.a.config({maxCount:2}),window.h5&&r.a.config&&r.a.config({disable:!0}),"zh-cn"===D&&l.a.updateLocale("en",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return"".concat(e,"日");case"M":return"".concat(e,"月");case"w":case"W":return"".concat(e,"周");default:return e}},week:{dow:1,doy:4},relativeTime:{future:function(e){return"".concat(e,"内")},past:function(e){return e.indexOf("秒")>=0?"1 分钟内":"".concat(e,"前")},s:function(){return"几秒"},ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"}}),L){var B=document.location.hostname.split(".").slice(-2).join("."),U="dashboard/last_space_id";if(A)p.a.set(U,window.appData.space.id,{domain:B,expires:30});else{var z=window.location.pathname;"/"!==z&&z.length>1&&p.a.remove(U,{domain:B})}Object(P.c)()}var G={};Object.assign(G,{onError:function(e,t){Object(b.a)(e,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(34),o=n(259),a=(n(922),n(427)),i=n(0),c=n.n(i),u=n(39),l=n.n(u),s=n(10),f=n.n(s),d=n(2),p=n.n(d),m="index-module_actionSheetRoot_H2L65",h="index-module_actionSheetWrapper_0zjHi",y="index-module_actionSheetItemWrapper_I0rb+",v="index-module_actionSheetItem_JncH7",b="index-module_actionSheetRedItem_FH2mg";function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.actions,n=e.delay,r=void 0===n?0:n,o=e.zIndex,u=void 0===o?999:o,l=g(Object(i.useState)(0===r),2),s=l[0],d=l[1];return Object(i.useEffect)((function(){0!==r&&d(!0)}),[r]),c.a.createElement(a.a,{popup:!0,visible:s,onClose:function(){null==d||d(!1)},animationType:"slide-up",maskClosable:!0,wrapClassName:m,zIndex:u},c.a.createElement("div",{className:h},c.a.createElement("div",{className:y},t.map((function(e){return e.disabled?null:c.a.createElement("div",{className:f()(v,(t={},n=b,r=e.isRed,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),onClick:function(){var t;null===(t=e.onClick)||void 0===t||t.call(e),d(!1)},key:e.name},e.name);var t,n,r}))),c.a.createElement("div",{className:y,style:{marginTop:10},onClick:function(){null==d||d(!1)}},c.a.createElement("div",{className:v},__("取消")))))};w.propTypes={actions:p.a.array,delay:p.a.number,zIndex:p.a.number};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(){O=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==E(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function x(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){x(a,r,o,i,c,"next",e)}function c(e){x(a,r,o,i,c,"throw",e)}i(void 0)}))}}var k=function(e){var t,n,a,i,u=e.note,s=e.disableArchive,f=e.onRemoveNote,d=e.delay,p=e.zIndex,m=[!s&&{name:null!=u&&u.status?__("取消归档"):__("归档"),disabled:(null==u?void 0:u.type)===o.TYPE.todo,onClick:(n=j(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.notes.archiveMulti({ids:[null==u?void 0:u.id],archive:!(null!=u&&u.status)});case 2:null==f||f(null==u?void 0:u.id,{type:null!=u&&u.status?"unarchive":"archive"});case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{name:__("删除"),isRed:!0,onClick:(t=j(O().mark((function e(){var t,n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.notes.destroy({id:u.id},{useOriginResp:!0});case 2:t=e.sent,n=t.meta,null==f||f(null==u?void 0:u.id,{type:"remove",recycleId:null==n?void 0:n.recycle_id});case 5:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}];a={delay:d,zIndex:p,actions:m.filter((function(e){return!!e}))},i=l.a.createPortal(c.a.createElement(w,a),document.getElementById("ReactApp")),l.a.render(i,document.createDocumentFragment())}},function(e,t,n){"use strict";n(96);var r=n(23),o=(n(75),n(26)),a=(n(60),n(24)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(10),f=n.n(s),d=n(261),p=n(263),m=n(906),h=n(255),y=n(2260),v=n(966),b=n(127),g=n(904),_=n(1023),w=(n(79),n(44)),E=(n(128),n(78)),O=(n(173),n(94)),x=(n(148),n(53)),j=(n(50),n(19)),k=n(34),S=n(42),C=n.n(S),N=n(576),P=n(1073),T={tip:"ProductCodeSelector-module_tip_St4dm",emptyTip:"ProductCodeSelector-module_emptyTip_lW7-X",img:"ProductCodeSelector-module_img_C8Xr5",loading:"ProductCodeSelector-module_loading_0OSLf",modalDesc:"ProductCodeSelector-module_modalDesc_XRZ9X",modal:"ProductCodeSelector-module_modal_d62HS",productCodeWrapper:"ProductCodeSelector-module_productCodeWrapper_vMvvU",productNameHeader:"ProductCodeSelector-module_productNameHeader_PCscR",productCode:"ProductCodeSelector-module_productCode_C2MU2",notExpandableProdName:"ProductCodeSelector-module_notExpandableProdName_FusC7",checkbox:"ProductCodeSelector-module_checkbox_bePsu",expandTrigger:"ProductCodeSelector-module_expandTrigger_x7Aha"};function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(){R=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==A(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function D(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){D(a,r,o,i,c,"next",e)}function c(e){D(a,r,o,i,c,"throw",e)}i(void 0)}))}}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=o.a.Search,G=function(e){var t=F(Object(i.useState)([]),2),n=t[0],r=t[1],o=F(Object(i.useState)(e.selectedCodes),2),a=o[0],c=o[1],u=F(Object(i.useState)(!0),2),l=u[0],s=u[1],f=F(Object(i.useState)(!0),2),d=f[0],p=f[1];Object(i.useEffect)((function(){var e=function(){var e=M(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,k.a.mine.productCode();case 3:t=e.sent,r(t),s(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var m=Object(i.useCallback)(C()(function(){var e=M(R().mark((function e(t){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!1),s(!0),e.next=4,k.a.mine.productCode({query:t||window.appData.me.work_id||""});case 4:n=e.sent,r(n),s(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),800),[]);return{state:{productCodes:n,selectedCodes:a,codeLoading:l,isInitialLoad:d},onAddProductCode:function(){e.onAddProductCode(a)},handleSelectCode:function(e,t){var n,r;!!a.find((function(e){return e.productCode===t.data.productCode}))?(n=t,r=a.filter((function(e){return e.productCode!==n.data.productCode})),c(r)):function(e){if(!a.find((function(t){return t.productCode===e.data.productCode}))){var t=e.data.participantList.find((function(e){return"PRODUCT_PD_OWNER"===e.roleType}))||{},n={productName:e.data.productName,productCode:e.data.productCode,pdOwner:t.userName||""};c([].concat(I(a),[n]))}}(t)},handleChangeQuery:function(e){m(e.target.value)}}},V=function(e){var t=e.visible,n=G(e),o=n.state,a=o.selectedCodes,i=o.codeLoading,u=o.productCodes,l=o.isInitialLoad,s=a.length>0,d=c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,{onClick:e.onCancel},__("取消")),c.a.createElement(j.a,{type:"primary",disabled:!s,onClick:n.onAddProductCode},__("确定"))),p=[{title:c.a.createElement("span",{className:T.productNameHeader},__("产品名称")),dataIndex:["data","productName"],ellipsis:!0,width:272,render:function(e,t){var n=t.data.productCode,r=!!a.find((function(e){return e.productCode===n}));return c.a.createElement("span",{className:f()(L({},T.notExpandableProdName,!(t.children&&t.children.length>0)))},c.a.createElement(x.a,{checked:r,className:T.checkbox}),c.a.createElement("a",{target:"_blank",href:"https://pd.alipay.com/#/product/main?productCode=".concat(t.data.productCode),title:e,onClick:function(e){return e.preventDefault()}},e))}},{title:c.a.createElement("span",{className:T.productCode},__("产品码")),dataIndex:["data","productCode"],width:240,render:function(e){return c.a.createElement("span",{className:T.productCode},e)}},{title:__("产品负责人"),dataIndex:["data","participantList"],render:function(e){var t=e.find((function(e){return"PRODUCT_PD_OWNER"===e.roleType}));return t&&t.userName?c.a.createElement("span",null,t.userName):c.a.createElement("span",null,__("暂无"))}}];return c.a.createElement(w.a,{className:T.modal,title:__("可关联的产品码"),visible:t,footer:d,bodyStyle:{height:445,padding:0,marginBottom:"12px",borderBottom:"1px solid #e8e8e8"},width:666,onCancel:e.onCancel},c.a.createElement("p",{className:f()(T.tip,T.modalDesc)},c.a.createElement("span",null,__("请选择要关联的产品码，或去 {productCode} 申请",{productCode:c.a.createElement("a",{href:"https://pd.alipay.com/#/product/createProductProcess",target:"_blank"},__("产品星球"))})),c.a.createElement(r.a,{title:__("产品码是蚂蚁产品委员会发起的对支付宝产品资产进行盘点和梳理的唯一标识")},c.a.createElement(m.a,null))),c.a.createElement("p",{className:T.tip},c.a.createElement(z,{onChange:n.handleChangeQuery,onSelectNone:n.handleChangeQuery,placeholder:__("搜索产品名称、产品码、产品负责人...")})),c.a.createElement("div",{className:T.productCodeWrapper},i&&c.a.createElement("div",{className:T.loading},c.a.createElement(O.a,null)),!i&&(u&&u.length>0?c.a.createElement(E.a,{className:T.list,columns:p,dataSource:u,defaultExpandAllRows:!0,expandIcon:function(e){if(e.expandable)return e.expanded?c.a.createElement("a",{className:T.expandTrigger,onClick:function(t){t.stopPropagation(),e.onExpand(e.record,t)}},c.a.createElement(N.a,{style:{fontSize:"12px",color:"#595959"}})):c.a.createElement("a",{className:T.expandTrigger,onClick:function(t){t.stopPropagation(),e.onExpand(e.record,t)}},c.a.createElement(P.a,{style:{fontSize:"12px",color:"#595959"}}))},indentSize:12,pagination:!1,rowKey:function(e){return e.data.productCode},onRow:function(e){return{onClick:function(t){return n.handleSelectCode(t,e)}}}}):c.a.createElement("div",{className:T.emptyTip},c.a.createElement("div",{className:T.img}),c.a.createElement("p",null,l?__("未搜索到与你相关的产品码，输入产品名搜索或去 {productCode} 添加",{productCode:c.a.createElement("a",{href:"https://pd.alipay.com/#/product/createProductProcess",target:"_blank"},__("产品星球"))}):__("未搜索到相关产品码, 到 {productCode} 申请",{productCode:c.a.createElement("a",{href:"https://pd.alipay.com/#/product/createProductProcess",target:"_blank"},__("产品星球"))}))))))};V.propTypes={visible:l.a.bool.isRequired,onCancel:l.a.func.isRequired,onAddProductCode:l.a.func.isRequired,selectedCodes:l.a.array};var Y=V,q=n(93);function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.review,n=e.editable,r=window.appData.doc,o=K(Object(i.useState)(t?v.a.formatUser(t.approvers):[]),2),c=o[0],u=o[1],l=K(Object(i.useState)(t?v.a.formatUser(t.ccs):[]),2),s=l[0],f=l[1],d=K(Object(i.useState)((null==t?void 0:t.product_codes)||[]),2),p=d[0],m=d[1],h=K(Object(i.useState)(t?t.name:(null==r?void 0:r.title)||__("文档评审")),2),b=h[0],g=h[1],_=K(Object(i.useState)(t?t.body:""),2),w=_[0],E=_[1],O=K(Object(i.useState)(!1),2),x=O[0],j=O[1],k=K(Object(i.useState)(!1),2),S=k[0],C=k[1],N=K(Object(i.useState)(!1),2),P=N[0],T=N[1],A=K(Object(i.useState)(!1),2),L=A[0],I=A[1],R=K(Object(i.useState)(),2),D=R[0],M=R[1],F=K(Object(i.useState)(),2),B=F[0],U=F[1],z=K(Object(i.useState)(),2),G=z[0],V=z[1],Y=K(Object(i.useState)(),2),q=Y[0],H=Y[1];return Object(i.useEffect)((function(){var t;t={},b||(t.name=__("评审名称不可为空")),(null==b?void 0:b.length)>22&&(t.name=__("评审名称最多不可超过 22 个字")),(null==w?void 0:w.length)>1e3&&(t.desc=__("评审描述最多不可超过 1000 个字")),(null==c?void 0:c.length)>20&&(t.approver=__("评审人数最多不可超过 20 人")),(null==s?void 0:s.length)>20&&(t.cc=__("抄送人数最多不可超过 20 人")),M(t.name),U(t.desc),V(t.approver),H(t.cc),e.onError(t)}),[b,w,c,s,n]),Object(y.a)(n&&L,__("评审尚未保存，确定离开页面？")),{state:{approvers:c,ccs:s,name:b,description:w,productCodes:p,approverModalVisible:x,ccModalVisible:S,productCodeModalVisible:P,nameErr:D,descErr:B,approverErr:G,ccErr:q},toggleApproverModal:function(){j(!x)},toggleCcModal:function(){C(!S)},onAddApprovers:function(t){var n=[].concat(W(c),W(t));u(n),I(!0),e.onChangeApprovers(n),j(!1)},removeApprover:function(t){var n=W(c),r=n.findIndex((function(e){return e.user_id===t}));r<0||(n.splice(r,1),u(n),I(!0),e.onChangeApprovers(n))},onAddCcs:function(t){var n=window.appData,r=n.isYuque,o=n.me,i=r?"id":"work_id";if(t.find((function(e){return e[i]===o[i]})))a.a.error(__("不支持抄送给评审发起人"));else{var c=[].concat(W(s),W(t));f(c),I(!0),e.onChangeCcs(c),C(!1)}},removeCc:function(t){var n=W(s),r=n.findIndex((function(e){return e.user_id===t}));r<0||(n.splice(r,1),f(n),I(!0),e.onChangeCcs(n))},toggleProductCodeModal:function(){T(!P)},onAddProductCode:function(t){m(t),e.onChangeProductCodes(t),T(!1)},removeProductCode:function(t){var n=p.findIndex((function(e){return e.productCode===t}));if(-1!==n){var r=W(p);r.splice(n,1),m(r),e.onChangeProductCodes(r)}},onChangeDesc:function(t){var n=t.target.value;E(n),I(!0),e.onChangeDesc(n)},onChangeName:function(t){var n=t.target.value;g(n),I(!0),e.onChangeName(n)},resetEdit:function(){u(t?v.a.formatUser(t.approvers):[]),f(t?v.a.formatUser(t.ccs):[]),E(t?t.body:""),g(t?t.name:__("文档评审")),I(!1)}}},J=c.a.forwardRef((function(e,t){var n,a=e.editable,u=e.review,l=e.isMiniSize,s=a;u&&u.status!==h.STATUS.active&&(s=!1);var y=X(e),v=y.state,w=v.approvers,E=v.ccs,O=v.description,x=v.productCodes,j=v.name,k=v.approverModalVisible,S=v.ccModalVisible,C=v.productCodeModalVisible,N=v.nameErr,P=v.descErr,T=v.approverErr,A=v.ccErr,L=window.appData,I=L.organization,R=L.isYuque;return Object(i.useImperativeHandle)(t,(function(){return{resetEdit:function(){y.resetEdit()}}})),c.a.createElement("div",{className:f()((n={},H(n,q.a.wrapper,!l),H(n,q.a.miniWrapper,l),H(n,q.a.readonlyWrapper,!s),n))},c.a.createElement("div",{className:f()(q.a.descWrapper,q.a.block)},c.a.createElement("h6",{className:f()(q.a.blockTitle,q.a.required)},__("评审名称")),s?c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{className:q.a.descInput,placeholder:__("请填写评审名称"),onChange:y.onChangeName,value:j}),N&&c.a.createElement("p",{className:q.a.errorText},N)):c.a.createElement("div",{className:q.a.descText},c.a.createElement("div",{"data-testid":"review-info-name"},j))),c.a.createElement("div",{className:f()(q.a.descWrapper,q.a.block)},c.a.createElement("h6",{className:q.a.blockTitle},__("描述")),s?c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a.TextArea,{autoSize:l?{minRows:2,maxRows:4}:{minRows:3,maxRows:6},className:q.a.descInput,placeholder:__("添加评审内容说明，帮助评审人快速了解评审重点"),onChange:y.onChangeDesc,value:O}),P&&c.a.createElement("p",{className:q.a.errorText},P)):c.a.createElement("div",{className:q.a.descText},O?c.a.createElement("div",{"data-testid":"review-info-desc"},c.a.createElement(_.a,{content:O,disableHeaderBr:!0})):c.a.createElement("p",{className:q.a.placeholder},__("无描述信息")))),c.a.createElement("div",{className:f()(q.a.reviewerWrapper,q.a.block)},c.a.createElement("h6",{className:f()(q.a.blockTitle,q.a.required)},__("评审人")),c.a.createElement("div",{className:q.a.reviewerList},w&&w.map((function(e){return c.a.createElement("div",{className:q.a.reviewerItem,key:e.id,"data-testid":"review-info-user-".concat(e.id)},c.a.createElement("a",{title:e.name,className:q.a.reviewerNameAndAvatar},c.a.createElement(b.a,{src:e.avatar_url,size:24}),c.a.createElement("span",null,e.name),s&&c.a.createElement("a",{className:q.a.btnRemove,onClick:function(){y.removeApprover(e.user_id)}},c.a.createElement(d.a,{width:16,height:16}))))})),s&&c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{className:q.a.btnAddReviewer,onClick:y.toggleApproverModal},c.a.createElement(p.a,null)),c.a.createElement(g.a,{type:"simple",visible:k,disableSelectors:I?["addrbook"]:[],enableDepSelect:!1,organization:I,members:w,onCancel:y.toggleApproverModal,onSubmit:y.onAddApprovers})),T&&c.a.createElement("p",{className:q.a.errorText},T))),c.a.createElement("div",{className:f()(q.a.reviewerWrapper,q.a.block)},c.a.createElement("h6",{className:q.a.blockTitle},__("抄送")),c.a.createElement("div",{className:q.a.reviewerList},E&&E.map((function(e){return c.a.createElement("div",{className:q.a.reviewerItem,key:e.id,"data-testid":"review-info-user-".concat(e.id)},c.a.createElement("a",{title:e.name,className:q.a.reviewerNameAndAvatar},c.a.createElement(b.a,{src:e.avatar_url,size:24}),c.a.createElement("span",null,e.name),s&&c.a.createElement("a",{className:q.a.btnRemove,onClick:function(){y.removeCc(e.user_id)}},c.a.createElement(d.a,{width:16,height:16}))))})),s&&c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{className:q.a.btnAddReviewer,onClick:y.toggleCcModal},c.a.createElement(p.a,null)),c.a.createElement(g.a,{type:"simple",visible:S,disableSelectors:I?["addrbook"]:[],enableDepSelect:!1,organization:I,members:E,onCancel:y.toggleCcModal,onSubmit:y.onAddCcs})),A&&c.a.createElement("p",{className:q.a.errorText},A))),!R&&s&&c.a.createElement("div",{className:f()(q.a.tasksWrapper,q.a.block)},c.a.createElement("h6",{className:q.a.blockTitle},__("关联产品码"),c.a.createElement(r.a,{overlayClassName:q.a.tooltip,title:c.a.createElement("span",null,__("产品码是产品资产的唯一标识，详见 {productCode}",{productCode:c.a.createElement("a",{href:"https://pd.alipay.com/#/encyclopedia",target:"_blank",className:q.a.link},__("产品星球"))}))},c.a.createElement(m.a,{style:{marginLeft:8,color:"#8C8C8C"}}))),c.a.createElement("div",{className:q.a.taskList},x.map((function(e){return c.a.createElement("div",{key:e.productCode,className:f()(q.a.taskItem,H({},q.a.taskItemEditable,s))},c.a.createElement(r.a,{title:__("产品名称：{name}",{name:e.productName}),placement:"top"},c.a.createElement("a",{target:"_blank",className:q.a.project,href:"https://pd.alipay.com/#/product/main?productCode=".concat(e.productCode),title:e.productName},e.productName)),c.a.createElement(r.a,{title:__("产品码：{code}",{code:e.productCode}),placement:"top"},c.a.createElement("span",{className:q.a.milestone},e.productCode)),c.a.createElement(r.a,{title:__("产品负责人：{owner}",{owner:e.pdOwner||__("暂无")}),placement:"top"},c.a.createElement("span",{className:q.a.milestoneStatus},e.pdOwner||__("暂无"))),s&&c.a.createElement("a",{className:q.a.btnRemove,onClick:function(){y.removeProductCode(e.productCode)}},c.a.createElement(d.a,{width:16,height:16})))}))),c.a.createElement("a",{onClick:y.toggleProductCodeModal,className:q.a.btnAddReviewer},c.a.createElement(p.a,null)),C&&c.a.createElement(Y,{visible:C,onCancel:y.toggleProductCodeModal,onAddProductCode:y.onAddProductCode,selectedCodes:x||[]})))}));J.defaultProps={onError:function(){}},J.propTypes={review:l.a.object,editable:l.a.bool,onChangeApprovers:l.a.func,onChangeCcs:l.a.func,onChangeProductCodes:l.a.func,onChangeDesc:l.a.func,onChangeName:l.a.func,onError:l.a.func,isMiniSize:l.a.bool};t.a=J},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(131),s=n(38),f=n(89),d="badgelite-module_memberBadgeLiteTextAlibaba_eY+40",p="badgelite-module_memberBadgeLiteContainer_1caED",m="badgelite-module_memberBadgeLiteText_2xxqK",h="badgelite-module_memberBadgeLiteNomeContainer_9AJD2",y="badgelite-module_memberBadgeLiteGroupContainer_6-b6V",v="badgelite-module_memberBadgeLiteH5Container_ituBE";function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(i,e);var t,n,r,a=w(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={user:t.props.user},t}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.useMobile,r=void 0!==n&&n,a=e.className,i=void 0===a?"":a,c=window.appData,b=c.isYuque,g=c.organization,_=this.state.user;if(!b)return r?null:o.a.createElement("a",{href:l.LINKS.INTERNAL_MEMBER_INTRO_LINK,target:"_blank"},o.a.createElement("p",{className:h,"data-testid":"badge-lite"},o.a.createElement(s.b,{name:"member-big-level1-alibaba",width:24,height:28}),o.a.createElement("span",{className:d},__("语雀会员"))));if(!_.isPaid||g)return null;var w=f.a.isGroupOrPublication(_);if(t||r){var E=u()(v,i);return o.a.createElement("span",{className:E,"data-testid":"badge-lite"},o.a.createElement("a",{href:w?l.LINKS.EXTERNAL_GROUP_INTRO_LINK:l.LINKS.EXTERNAL_MEMBER_INTRO_LINK,target:"_blank"},o.a.createElement(s.b,{name:"member-level1",height:22,width:23})))}if(w){var O=u()(y,i);return o.a.createElement("span",{className:O,"data-testid":"badge-lite"},o.a.createElement("a",{href:l.LINKS.EXTERNAL_GROUP_INTRO_LINK,target:"_blank"},o.a.createElement(s.b,{name:"member-big-level1",width:24,height:28}),o.a.createElement("span",{className:m},__("高级版团队"))))}var x=u()(p,i);return o.a.createElement("div",{className:x,"data-testid":"badge-lite"},o.a.createElement("a",{href:l.LINKS.EXTERNAL_MEMBER_INTRO_LINK,target:"_blank"},o.a.createElement(s.b,{name:"member-big-level1",width:24,height:28}),o.a.createElement("span",{className:m},__("语雀会员"))))}}])&&g(t.prototype,n),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);x.propTypes={user:i.a.object,isMobile:i.a.bool,useMobile:i.a.bool,className:i.a.string};t.a=x},function(e,t,n){"use strict";n(175);var r=n(84),o=(n(173),n(94)),a=(n(133),n(31)),i=(n(972),n(653)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f=n(88),d=n(127),p=n(34),m=n(38),h=n(10),y=n.n(h),v="index-module_notifications_hZhLx",b="index-module_bell_KxNIQ",g="index-module_countBell_-bMDE",_="index-module_notificationMenuBell_tUL61",w="index-module_menu_rIOsP",E="index-module_menuName_Qh+-p",O="index-module_menuUnread_zwOuN";function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.dispatch,n=e.notification,l=window.appData.organization,s=window.appData.notification||{},f=s.notifyCount,h=void 0===f?0:f,j=s.showDot,k=void 0!==j&&j,S=s.orgData,C=x(Object(c.useState)(!1),2),N=C[0],P=C[1],T=x(Object(c.useState)(null==S?void 0:S.list),2),A=T[0],L=T[1],I=x(Object(c.useState)(h),2),R=I[0],D=I[1],M=x(Object(c.useState)(!1),2),F=M[0],B=M[1],U=l&&l.id;Object(c.useEffect)((function(){var e;if((null==n||null===(e=n.unreadList)||void 0===e?void 0:e.length)>0){var t=n.unreadList.reduce((function(e,t){return e+=t.count}),0);D(t)}}),[n]);var z=function(){F||N||(P(!0),p.a.notifications.unreadCount().then((function(e){e&&(B(!0),L(e.list),D(e.count),t({type:"notification/update",payload:{unreadCount:e.count,unreadList:e.list}}))})).finally((function(){return P(!1)})))},G=function(){return R?u.a.createElement(i.a,{count:R,overflowCount:99,offset:[4,0],className:y()((e={},t=g,n=R>0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))},u.a.createElement(m.b,{className:b,name:"nav-bell",width:18})):u.a.createElement(i.a,{dot:k},u.a.createElement(m.b,{className:b,name:"nav-bell",width:18}));var e,t,n};if(!n)return null;var V=1===(null==A?void 0:A.length)&&0===A[0].organization_id;return U||V?u.a.createElement("a",{href:"/notifications/unread",title:R||k?__("你有未读消息"):"",className:v},G()):u.a.createElement(r.a,{overlayClassName:"popover-notifications",placement:"bottomRight",arrowPointAtCenter:!0,type:"menu",content:u.a.createElement(o.a,{size:"small",spinning:N},U||!A?null:u.a.createElement("div",{className:w},u.a.createElement(a.a,null,A.map((function(e,t){return u.a.createElement(a.a.Item,{className:"notifications-menu-item",key:e.name},u.a.createElement("a",{href:"".concat(e.host,"/notifications/unread"),target:e.isSelf?"":"_blank","data-aspm-click":"d73388_".concat(t)},u.a.createElement(d.a,{src:e.icon,size:24,radius:e.isSelf?24:2}),u.a.createElement("span",{className:E},u.a.createElement("span",null,e.name)),e.count?u.a.createElement("span",{className:O,title:e.count},e.count>99?"99+":e.count):u.a.createElement("span",{className:_},u.a.createElement(i.a,{dot:!!e.normalCount}))))}))))),trigger:e.trigger||"hover",align:{offset:[20,-16]},getPopupContainer:function(e){return e.parentNode}},u.a.createElement("div",{className:"notifications ".concat(v),onMouseEnter:function(){return!window.h5&&z()},onTouchStart:function(){return window.h5&&z()},title:R>0?__("你有未读消息"):"","data-aspm-click":"d73389"},G()))};k.propTypes={notification:s.a.object,trigger:s.a.string,dispatch:s.a.func};t.a=Object(f.d)((function(e){return{dispatch:e.dispatch,notification:e.notification}}))(k)},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(50),n(19)),a=(n(60),n(24)),i=n(0),c=n.n(i),u=n(2),l=n(127);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(s,e);var t,n,i,u=m(s);function s(){var e;f(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(y(e=u.call.apply(u,[this].concat(n))),"activeUser",(function(){(0,e.props.dispatch)({type:"me/activeUser"}).then((function(e){e.data?a.a.success(__("激活成功!"),2,(function(){window.location.reload()})):a.a.error(__("激活失败，请重试"))}))})),e}return t=s,(n=[{key:"render",value:function(){var e=this.props,t=e.me,n=e.space;return c.a.createElement(r.a,{visible:0===t.status&&0===n.id,closable:!1,footer:null,width:380,bodyStyle:{padding:24}},c.a.createElement("div",{className:"user-active"},c.a.createElement("div",{className:"user-active-avatar"},c.a.createElement(l.a,{src:t.avatar_url,size:60,name:t.name})),c.a.createElement("p",{className:"user-active-tip"},__("你正在访问的是语雀公共空间，<br />第一次进入需要进行激活")),c.a.createElement(o.a,{size:"large",type:"primary",onClick:this.activeUser},__("激活公共空间"))))}}])&&d(t.prototype,n),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(i.PureComponent);g.propTypes={dispatch:u.PropTypes.func.isRequired,me:u.PropTypes.object.isRequired,space:u.PropTypes.object.isRequired};t.a=g},function(e,t,n){"use strict";n(75);var r=n(26),o=n(47),a=n.n(o),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(270),f=n.n(s),d=n(2252),p=n(1073),m=n(1052),h=n(576),y=n(38),v={list:"index-module_list_c9F2W",content:"index-module_content_fgebc",title:"index-module_title_EjsRx",link:"index-module_link_AN9DG",group:"index-module_group_uqS8H",groupName:"index-module_groupName_Ig7hY",titleItem:"index-module_titleItem_nAGB6",groupText:"index-module_groupText_gP4vU",item:"index-module_item_eJhnq",itemKey:"index-module_itemKey_9S182",itemMarkdown:"index-module_itemMarkdown_MfJ0X",hotkeyName:"index-module_hotkeyName_9l1WM",bold:"index-module_bold_YYrtr",italic:"index-module_italic_QVtB8",strikethrough:"index-module_strikethrough_pe3vq",underline:"index-module_underline_ZOyDi",h1:"index-module_h1_qJ2JJ",h2:"index-module_h2_pdhHd",h3:"index-module_h3_Of72+",h4:"index-module_h4_itEIw",blockquotes:"index-module_blockquotes_2eZhV",icon:"index-module_icon_Zvmgx",cmd:"index-module_cmd_zlq9e",cardInfo:"index-module_cardInfo_PehAT",noneOpacity:"index-module_noneOpacity_wj9mj",cardInfoTip:"index-module_cardInfoTip_N8XcC"};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=r.a.Search,x={cmd:f.a.mac?"Cmd":"Ctrl",Command:f.a.mac?"Cmd":"Ctrl",Option:f.a.mac?"Opt":"Alt",opt:f.a.mac?"Opt":"Alt",shift:"Shift",left:c.a.createElement(d.a,null),right:c.a.createElement(p.a,null),up:c.a.createElement(m.a,null),down:c.a.createElement(h.a,null),"@":c.a.createElement(y.b,{className:v.cmd,name:"editor-mention",width:14}),190:".",188:",",49:"1"};y.b.propTypes={icon:l.a.string};var j=function(e){return c.a.createElement("div",{className:v.hotkeyName},e.text)},k={text:l.a.string.isRequired,name:l.a.string};function S(e){return e&&e.length?e.map((function(e,t){return"+"===e?c.a.createElement("span",{key:t},"+"):c.a.createElement("kbd",{key:t},x[e]||e)})):null}function C(e){var t=e.config,n=e.className,r=e.showHelpLink,o=e.enableMarkdown,u=w(Object(i.useState)(""),2),l=u[0],s=u[1],f=a()(t);if(l){var d=l.toLowerCase().trim();f=f.map((function(e){var t;return e.children=null===(t=e.children)||void 0===t?void 0:t.filter((function(e){var t,n,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().contains(d))||(null===(n=e.text)||void 0===n?void 0:n.toLowerCase().contains(d))||(null===(r=e.keywords)||void 0===r?void 0:r.find((function(e){return e.toLowerCase().contains(d)})))})),e})).filter((function(e){return 0!==e.children.length}))}return c.a.createElement("div",{className:"".concat(v.list," ").concat(n)},c.a.createElement("div",{className:"".concat(v.content," hotkey-content"),"data-testid":"hotkey"},c.a.createElement("div",{className:"".concat(v.title," hotkey-title")},__("快捷键"),r&&c.a.createElement("a",{className:v.link,href:"https://www.yuque.com/yuque/gpvawt/shortcut",target:"_blank"},__("查看更多"))),c.a.createElement("div",{className:v.search},c.a.createElement(O,{value:l,onChange:function(e){s(e.target.value)},placeholder:__("输入功能关键字搜索")})),f.map((function(e,t){return c.a.createElement("div",{className:"".concat(v.group," hotkey-group"),key:e.text||t},e.text&&c.a.createElement("div",{className:v.groupName},c.a.createElement("span",{className:v.groupText},e.text),o&&c.a.createElement("span",{className:v.titleItem},__("快捷键")),o&&c.a.createElement("span",{className:v.titleItem},__("Markdown"))),e.children.map((function(e,t){return c.a.createElement("div",{className:"".concat(v.item," hotkey-item"),key:e.name||t},c.a.createElement("div",{className:v.cardInfo},e.icon&&c.a.createElement(y.b,{className:"".concat(e.noneOpacity?" ".concat(v.noneOpacity):""),name:e.icon,width:16}),c.a.createElement(j,e)),c.a.createElement("div",{className:v.itemKey,"data-testid":e.name},S(e.keys)),o&&c.a.createElement("div",{className:v.itemMarkdown,"data-testid":e.markdown},S(e.markdown)))})))}))))}j.propTypes=k,C.KEYS=x,C.defaultProps={showHelpLink:!1},C.propTypes={className:l.a.string,showHelpLink:l.a.bool,enableMarkdown:l.a.bool,config:l.a.arrayOf(l.a.shape({text:l.a.string,children:l.a.arrayOf(l.a.shape(g(g({},k),{},{keys:l.a.array,icon:l.a.string})))}))};t.a=C},function(e,t,n){"use strict";n(96);var r=n(23),o=n(0),a=n(88),i=n(207),c=n(38),u={"skylink-button":"index-module_skylink-button_NjiJa"};t.a=Object(a.d)((function(e){return{skylink:e.skylink,dispatch:e.dispatch,doc:e.doc}}),null,null,{forwardRef:!0})((function(e){var t=e.doc,n=e.dispatch;return o.createElement("div",{className:u["skylink-button"],"data-testid":"skylink-button","data-feature-guide-container":"skylink_guide"},o.createElement(r.a,{placement:"bottom",title:__("知识网络")},o.createElement("button",{type:"button","data-aspm-click":"d223107",className:u.btn,onClick:function(){n({type:"skylink/update",payload:{modalVisible:!0}}),i.a.logSkylink(null==t?void 0:t.type,"list")}},o.createElement(c.b,{name:"skylink-icon",width:20,height:20}))))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(50);var r=n(19),o=n(0),a=n.n(o),i=n(38),c="index-module_playBtn_5wHuG";function u(){return a.a.createElement(r.a,{className:c,onClick:function(){return window.postMessage("show:play")}},a.a.createElement(i.b,{name:"play",width:8,height:12}),__("播放"))}},function(e,t,n){"use strict";var r=n(55),o=n(14),a=n(11),i=n(57),c=n(58),u=n(66),l=n(72),s=n(0),f=n(39),d=n.n(f),p=n(10),m=n.n(p),h=n(228),y=n(1323),v=n(1017),b=0,g=Date.now();function _(){var e=b;return b+=1,"rcNotification_".concat(g,"_").concat(e)}var w=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={notices:[]},e.hookRefs=new Map,e.add=function(t,n){var r=t.key||_(),o=Object(a.a)(Object(a.a)({},t),{},{key:r}),i=e.props.maxCount;e.setState((function(e){var t=e.notices,a=t.map((function(e){return e.notice.key})).indexOf(r),c=t.concat();return-1!==a?c.splice(a,1,{notice:o,holderCallback:n}):(i&&t.length>=i&&(o.key=c[0].notice.key,o.updateMark=_(),o.userPassKey=r,c.shift()),c.push({notice:o,holderCallback:n})),{notices:c}}))},e.remove=function(t){e.setState((function(e){return{notices:e.notices.filter((function(e){var n=e.notice,r=n.key;return(n.userPassKey||r)!==t}))}}))},e.noticePropsMap={},e}return Object(c.a)(n,[{key:"getTransitionName",value:function(){var e=this.props,t=e.prefixCls,n=e.animation,r=this.props.transitionName;return!r&&n&&(r="".concat(t,"-").concat(n)),r}},{key:"render",value:function(){var e=this,t=this.state.notices,n=this.props,r=n.prefixCls,i=n.className,c=n.closeIcon,u=n.style,l=[];return t.forEach((function(n,o){var i=n.notice,u=n.holderCallback,s=o===t.length-1?i.updateMark:void 0,f=i.key,d=i.userPassKey,p=Object(a.a)(Object(a.a)(Object(a.a)({prefixCls:r,closeIcon:c},i),i.props),{},{key:f,noticeKey:d||f,updateMark:s,onClose:function(t){var n;e.remove(t),null===(n=i.onClose)||void 0===n||n.call(i)},onClick:i.onClick,children:i.content});l.push(f),e.noticePropsMap[f]={props:p,holderCallback:u}})),s.createElement("div",{className:m()(r,i),style:u},s.createElement(h.a,{keys:l,motionName:this.getTransitionName(),onVisibleChanged:function(t,n){var r=n.key;t||delete e.noticePropsMap[r]}},(function(t){var n=t.key,i=t.className,c=t.style,u=t.visible,l=e.noticePropsMap[n],f=l.props,d=l.holderCallback;return d?s.createElement("div",{key:n,className:m()(i,"".concat(r,"-hook-holder")),style:Object(a.a)({},c),ref:function(t){void 0!==n&&(t?(e.hookRefs.set(n,t),d(t,f)):e.hookRefs.delete(n))}}):s.createElement(y.a,Object(o.default)({},f,{className:m()(i,null==f?void 0:f.className),style:Object(a.a)(Object(a.a)({},c),null==f?void 0:f.style),visible:u}))})))}}]),n}(s.Component);w.newInstance=void 0,w.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},w.newInstance=function(e,t){var n=e||{},a=n.getContainer,i=Object(r.a)(n,["getContainer"]),c=document.createElement("div");a?a().appendChild(c):document.body.appendChild(c);var u=!1;d.a.render(s.createElement(w,Object(o.default)({},i,{ref:function(e){u||(u=!0,t({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){d.a.unmountComponentAtNode(c),c.parentNode&&c.parentNode.removeChild(c)},useNotification:function(){return Object(v.a)(e)}}))}})),c)};var E=w;t.a=E},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),i="OrgSearchNotFound-module_container_MlZtJ",c="OrgSearchNotFound-module_icon_oJoZx",u="OrgSearchNotFound-module_content_CgmVs",l="OrgSearchNotFound-module_footer_eiC3y";t.a=function(e){return o.a.createElement("div",{className:i},o.a.createElement("div",{className:c},o.a.createElement(a.a,{icon:"meh",size:"40"})),o.a.createElement("p",{className:u},__("空间内无相关搜索结果")),o.a.createElement("p",{className:l},__("仅支持搜索空间成员与外部联系人")))}},function(e,t,n){"use strict";n(175);var r=n(84),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(88),l=n(10),s=n.n(l),f=n(38),d=n(109),p=n(1309),m={navigation:"index-module_navigation_uXN0h",triggerIcon:"index-module_triggerIcon_qjqIF"},h=function(e){var t=e.trigger;return a.a.createElement(r.a,{type:"menu",className:m.navigation,getPopupContainer:function(e){return e.parentNode},trigger:t,placement:"bottomLeft",content:a.a.createElement(p.a,null),arrowPointAtCenter:!0,mouseLeaveDelay:.3},a.a.createElement("a",{className:s()(m.trigger),"data-testid":"dropdown-navigation","data-aspm-click":"nav_navigation.d1"},a.a.createElement(f.b,{name:"nav-menu",className:m.triggerIcon,width:12})))};h.defaultProps={trigger:"hover"},h.propTypes={trigger:c.a.string};t.a=Object(u.d)((function(e){return e}))(Object(d.b)(h))},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(344),n(196)),a=(n(133),n(31)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(114),f=n.n(s),d=n(88),p=n(90),m=n.n(p),h=n(10),y=n.n(h),v=n(623),b=n(1155),g=n(1154),_=n(665),w=n(927),E=n(907),O=n(2343),x=n(2344),j=n(2345),k=n(34),S=n(17),C=n(124),N=n(38),P=n(109),T=n(349),A=n(445),L=n.n(A),I=n(1351),R="DocActionMore-module_wrap_le9aB",D="DocActionMore-module_sceneItem_sDxCm",M="DocActionMore-module_selectItem_Ga0F3",F="DocActionMore-module_submenuSwitchItem_AK8z3",B="DocActionMore-module_slideItem_zrnG8",U="DocActionMore-module_switchItem_vBijY",z="DocActionMore-module_infoItem_pGDVA",G="DocActionMore-module_submenuContainer_mgSTF",V="DocActionMore-module_submenuIcon_BidTJ",Y="DocActionMore-module_sceneAction_KTXPK",q="DocActionMore-module_sceneTitle_GJRbH",H="DocActionMore-module_switchTitle_oFkGc",W="DocActionMore-module_switchDesc_pWX8R",K="DocActionMore-module_switchAction_Yfn-p",$="DocActionMore-module_infoContent_PBXyF",Q="DocActionMore-module_menuItemContainer_sQ4rU",X="DocActionMore-module_menuDescribe_g8JML",J="DocActionMore-module_iconContainer_Jwqih",Z="DocActionMore-module_menu_+zp+S",ee="DocActionMore-module_iconBeta_hbg2z",te=n(1344);function ne(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=f()("doc:actionMenu"),ae=function(e){var t=Object(te.a)(e),n=t.cmd,i=t.sendAlimail,u=t.mailSending,l=t.typography,s=t.defaultFontSize,f=t.paragraphSpacing,d=t.reset,p=t.doAction,h=t.getEditorLayout,P=t.getWordCount,A=t.setSendAlimail,re=t.setMailSending,ae=t.contextHolder,ie=function(t,n){e.onSelect({key:t}),p(t,n),Object(T.a)("c34619.d69461",{create_type:t})},ce=function(e){return c.a.createElement(a.a.Item,{key:e.cmd,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(){ie(e.cmd)}},c.a.createElement("div",{className:Q,"data-aspm-click":e.asp||null},c.a.createElement("div",{className:J},e.icon&&c.a.createElement(N.b,{name:e.icon,width:16})),e.tip_id?c.a.createElement(v.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&c.a.createElement("span",{className:ee},"Beta")))},ue=function(e){var t=ne(e.actions);return c.a.createElement(a.a.Item,{key:"scene",className:D},t.map((function(e){return c.a.createElement("div",{key:e.cmd,scene:e.cmd,className:Y,"data-aspm-click":e.asp||null,onClick:function(){ie(e.cmd)}},c.a.createElement(N.b,{name:e.sceneIcon,width:36,height:36}),c.a.createElement("div",{className:q},e.title))})))},le=function(e){var t=ne(e.options),n="";return e.cmd===S.a.DOC.document_typography.cmd?n=l:e.cmd===S.a.DOC.document_layout_select.cmd&&(n=h()),c.a.createElement(a.a.Item,{key:e.cmd,className:M,onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement(x.a,{title:e.title,options:t,value:n,onChange:function(t){return ie(e.cmd,t)}}))},se=function(e){var t=y()("doc-action-menu-item-".concat(e.cmd),F),n="";return e.cmd===S.a.DOC.document_paragraph_spacing.cmd&&(n=f===m.a.PARAGRAPH_SPACING.relax),c.a.createElement(a.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-submenu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement(j.a,{title:e.title,defaultChecked:n,onChange:function(t){ie(e.cmd,t?m.a.PARAGRAPH_SPACING.relax:m.a.PARAGRAPH_SPACING.default)}}))},fe=function(e){var t=y()("doc-action-menu-item-".concat(e.cmd),U),n="";return e.cmd===S.a.DOC.document_layout.cmd&&(n=h()),c.a.createElement(a.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement("div",{className:H},c.a.createElement("span",null,e.title),c.a.createElement("div",{className:W},e.describe)),c.a.createElement(o.a,{onChange:function(t){ie(e.cmd,t?m.a.VIEWPORT.adapt:m.a.VIEWPORT.fixed)},size:"small",defaultChecked:n===m.a.VIEWPORT.adapt,className:K}))},de=function(e){var t=y()("doc-action-menu-item-".concat(e.cmd),B),n="",r="";return e.cmd===S.a.DOC.document_fontsize.cmd&&(r=l,n=s),c.a.createElement(a.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement(O.a,{className:r,title:e.title,min:e.min,max:e.max,value:n,marks:e.marks,labelMap:e.labelMap,valueMap:e.valueMap,onChange:function(t){return ie(e.cmd,t)}}))},pe=function(){return null},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.map((function(e,n){return"scene"===e.type&&e.actions.length>0?ue(e):"select"===e.type?le(e):"switch"===e.type?t?se(e):fe(e):"slider"===e.type?de(e):"submenu"===e.type?pe(e):"divide"===e.cmd?c.a.createElement(a.a.Divider,{key:n}):ce(e)}));return n};pe=function(e){var t=y()("doc-action-menu-item-".concat(e.cmd));return c.a.createElement(a.a.SubMenu,{key:e.cmd,popupClassName:R,className:t,title:c.a.createElement("div",{className:G,onClick:function(e){return e.stopPropagation()}},c.a.createElement("div",{className:Q,"data-aspm-click":e.asp||null},c.a.createElement("div",{className:J},e.icon&&c.a.createElement(N.b,{name:e.icon,width:16})),e.tip_id?c.a.createElement(v.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&c.a.createElement("span",{className:ee},"Beta"),c.a.createElement(N.b,{className:V,name:"action-submenu",width:16})),c.a.createElement("div",{className:X},e.describe)),onTitleClick:function(e){e.domEvent.stopPropagation()},"data-testid":"doc-action-menu-item-".concat(e.cmd)},me(e.subcmds,!0))};var he=e.book,ye=e.className,ve=e.doc,be=e.commandParams,ge=e.commands;return oe("render, currect action",n,be),c.a.createElement("div",{className:"".concat(R," ").concat(ye)},c.a.createElement(a.a,{className:Z,selectable:!1,multiple:!0,mode:"vertical"},me(ge),c.a.createElement(a.a.Divider,null),function(){var t,n,r=e.doc;return c.a.createElement(a.a.Item,{key:"info",className:z,onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement("div",{className:$},"Doc"===r.type?c.a.createElement("div",null,__("字数统计：{count}",{count:P()||0})):c.a.createElement("div",null,__("阅读数：{count}",{count:r.hits||0})),c.a.createElement("div",null,__(r.user?"{user} 创建于 {timer}":"创建于 {timer}",{user:null===(t=r.user)||void 0===t?void 0:t.name,timer:L.a.format(r.created_at,{onlyDate:!0})})),c.a.createElement("div",null,__(r.last_editor?"{user} 更新于 {time}":"更新于 {time}",{user:null===(n=r.last_editor)||void 0===n?void 0:n.name,time:L.a.format(r.content_updated_at)})),c.a.createElement("div",null,__("编辑者："),r.contributors.map((function(e){return e.name})).join("、"))))}()),ae,n===S.a.DOC.export_doc.cmd&&c.a.createElement(_.a,{doc:ve,bookId:he.id,onCancel:d,exportParams:be,canExportMultiple:be.can_export_multiple}),n===S.a.BOOK.export_book.cmd&&c.a.createElement(E.a,{visible:!0,book:he,exportParams:be,onCancel:d}),n===S.a.DOC.import_to_doc.cmd&&c.a.createElement(w.a,{book:he,formats:C.a.getImportFormats({multi:!1}),importType:m.a.IMPORT_TYPE.PARSE,onCancel:d,onSuccess:function(t){e.onCommandsExecuted({cmd:n,result:t})}}),n===S.a.DOC.import_to_book.cmd&&c.a.createElement(w.a,{book:he,importParams:be,formats:C.a.getImportFormats({multi:!0}),importType:m.a.IMPORT_TYPE.CREATE,onCancel:d,onSuccess:function(t){e.onCommandsExecuted({cmd:n,result:t})},group:window.appData.group}),n===S.a.DOC.save_as_template.cmd&&c.a.createElement(g.a,{visible:n===S.a.DOC.save_as_template.cmd,onCancel:d,modalTitle:__("另存为模板"),book:he,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return p(S.a.DOC.create_from_template.cmd)},templateProxy:k.a.templates.v1,docProxy:k.a.docs,inEdit:e.inEdit}),n===S.a.DOC.save_published_as_version.cmd&&c.a.createElement(b.a,{doc:ve,docDomain:"Doc",type:"published",onCancel:d,docVersionProxy:k.a.docVersions}),c.a.createElement(r.a,{width:500,visible:i,footer:null,closable:!u,maskClosable:!1,onCancel:function(){A(!1)}},i&&c.a.createElement(I.a,{onMailSended:function(){re(!1)},onMailSending:function(){re(!0)},doc:ve})))};ae.defaultProps={className:"",onSelect:function(){},onCommandsExecuted:function(){},commandParams:{}},ae.propTypes={className:l.a.string,group:l.a.object.isRequired,book:l.a.object.isRequired,doc:l.a.object,commands:l.a.array.isRequired,commandParams:l.a.object,onSelect:l.a.func,onCommandsExecuted:l.a.func,dispatch:l.a.func,onSelectTemplate:l.a.func,inEdit:l.a.bool};t.a=Object(d.d)()(Object(P.b)(ae))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(171),o=n(180),a=n(135),i=n(136),c=n(137),u=n(184),l=n(183),s=n(176),f=n(164);e.exports={TYPES:{folder:"folder",file:"file"},ALLOW_TARGET_TYPES:["Attachment","Doc"],ALLOW_RESOURCE_EXTNAMES:r,ALLOW_RESOURCE_EDIT_EXTNAMES:["lake","lakesheet"],RAW_EXTNAMES:["txt"].concat(o.map((function(e){return e.substring(1)}))),IMAGE_EXTNAMES:a.map((function(e){return e.substring(1)})),VIDEO_EXTNAMES:i.map((function(e){return e.substring(1)})),AUDIO_EXTNAMES:c.map((function(e){return e.substring(1)})),PRESENTATION_EXTNAMES:u.map((function(e){return e.substring(1)})),SHEET_EXTNAMES:l.map((function(e){return e.substring(1)})),ZIP_EXTNAMES:s.map((function(e){return e.substring(1)})),MMAP_EXTNAMES:f.map((function(e){return e.substring(1)})),PAGE_SIZE:200,MAX_UPLOAD_FILES:300,MAX_COPY_FILES:300,MAX_FOLDER_DEPTH:50}},function(e,t,n){"use strict";n(162),n(1301)},function(e,t,n){"use strict";n(162),n(1301)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports={TYPE:{headlines:"headlines",custom:"custom",tags:"tags",bookStacks:"bookStacks",banner:"banner",events:"events",bookList:"bookList",docList:"docList",threadList:"threadList",memberList:"memberList",topicList:"topicList",quickLinks:"quickLinks",searchRecommend:"searchRecommend",searchInput:"searchInput",layout:"layout",placement:"placement",publicPageContainer:"publicPageContainer",publicPagePlacement:"publicPagePlacement",publicPageBookStack:"publicPageBookStack",publicPageHotmap:"publicPageHotmap",publicPageFeed:"publicPageFeed"},BELONGED_TYPE:{User:"User",Group:"Group",Organization:"Organization",ViewBlock:"ViewBlock",Public:"Public"},SCENE:{Public:1,Private:0},QUERY_OPTION:{latest:"latest",hottest:"hottest"},DISPLAY_TYPE:{basic:"basic",summary:"summary",list:"list",graphic:"graphic",detail:"detail"},LAYOUT_TYPE:{single:"single",leftOne:"leftOne",rightOne:"rightOne",threeSeparate:"threeSeparate"},PLACEMENT_SIZE:{once:"once",twice:"twice",thrice:"thrice"}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(162)},,,,,,,,,,,,,function(e,t,n){"use strict";n(50);var r=n(19),o=(n(173),n(94)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(328),s=n(312),f=n(1223),d=(n(148),n(53)),p=(n(120),n(63)),m=(n(144),n(33)),h=(n(96),n(23)),y=n(10),v=n.n(y),b=n(1908),g=n(38),_=(n(130),n(35)),w="SearchCatalogTrigger-module_actionItem_rk-NO",E="SearchCatalogTrigger-module_searchContainer_Zv6BH",O="SearchCatalogTrigger-module_searchInput_4Tgor",x="SearchCatalogTrigger-module_prefixIconWrapper_Ub-Vo",j="SearchCatalogTrigger-module_searchIcon_RK482";function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){var t=function(e){var t=e.listData,n=e.onSelectOption,r=e.isLoading,o=k(Object(a.useState)(!1),2),i=o[0],c=o[1];return{state:{inputVisible:i,searchOptions:Object(a.useMemo)((function(){return t.map((function(e){return{label:e.title,value:e.uuid}}))}),[t]),isLoading:r},handleTriggerClick:function(){c(!0)},handleBlur:function(){c(!1)},handleOptionSelect:function(e){e&&("function"==typeof n&&n({tocItemUuid:e}),c(!1))}}}(e),n=t.state,r=n.inputVisible,c=n.searchOptions,u=n.isLoading,l=t.handleTriggerClick,s=t.handleBlur,f=t.handleOptionSelect;return i.a.createElement(i.a.Fragment,null,r?i.a.createElement("div",{className:E},i.a.createElement(_.a,{getPopupContainer:function(e){return e.parentElement},className:O,notFoundContent:u?i.a.createElement(o.a,{size:"small",delay:100}):null,showArrow:!1,autoFocus:!0,allowClear:!0,showSearch:!0,optionFilterProp:"label",options:c,placeholder:__("目录搜索"),onBlur:s,onChange:f}),i.a.createElement("span",{className:x},i.a.createElement(g.b,{name:"nav-search",width:16,height:16,className:j}))):i.a.createElement(h.a,{title:__("目录搜索"),getPopupContainer:function(e){return e}},i.a.createElement("span",{className:w,onClick:l},i.a.createElement(g.b,{name:"nav-search",width:16,height:16,className:j}))))}var N=C;C.defaultProps={listData:[],isLoading:!1},C.propTypes={listData:u.a.arrayOf(u.a.object),isLoading:u.a.object,onSelectOption:u.a.func};var P=n(564),T=n.n(P),A=n(114);function L(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=n.n(A)()("CatalogSelecter:viewModel"),F=["child","sibling"];var B={useViewModel:function(e,t){var n,r,o=e.catalog,i=e.disableItems,c=void 0===i?[]:i,u=e.submitType,l=e.currentSelectedUId,s=e.currentSelectedAction,f=c.map((function(e){return e.uuid})),d=I(Object(a.useState)(null),2),p=d[0],m=d[1],h=I(Object(a.useState)("child"),2),y=h[0],v=h[1],b=I(Object(a.useState)("top"),2),g=b[0],_=b[1],w=I(Object(a.useState)("auto"),2),E=w[0],O=w[1],x=I(Object(a.useState)("copy"!==u),2),j=x[0],k=x[1],S=Object(a.useRef)(),C="all"===(n=e.catalogLevel)||n===1/0?1/0:parseInt(n,10)+1,N=I(Object(a.useState)((r=C)===1/0?o.map((function(e){return e.uuid})):o.filter((function(e){return e.level<r-1})).map((function(e){return e.uuid}))),2),P=N[0],A=N[1],R=function(){var e=L(P),t=[];if(p){!function e(n){if(n){var r=function(e){return o.find((function(t){return t.uuid===e.parent_uuid}))}(n);r&&(t.push(r.uuid),r.level>0&&e(r))}}(o.find((function(e){return e.uuid===p})))}return t.length&&e.push.apply(e,t),e};Object(a.useEffect)((function(){A(R())}),[p]);var D=function(e,t){var n=L(P),r=n.findIndex((function(t){return t===e.uuid}));"sibling"===t?(r>=0&&n.splice(r,1),A(n)):r<0&&A([e.uuid].concat(L(n)))},B=function(e,t,n,r){T()(r)||F.includes(r)?e&&f.includes(e.uuid)||(e?(m(e.uuid),_(null),v(r||"child"),D(e,r||"child")):(m(null),_(n),O("auto"))):M("invalid insert action type",r)},U=function(){if(!e.disable&&!f.includes(p)){var t={action:"prependChild",target_uuid:p,insert_to_catalog:!0,with_children:j};return"top"===g?(t.action="prependChild",t.target_uuid=null):"bottom"===g?(t.action="appendChild",t.target_uuid=null):t.action="sibling"===y?"moveAfter":"prependChild",t}};return Object(a.useEffect)((function(){var e=o.find((function(e){return e.uuid===l}));e&&B(e,0,null,s)}),[l,s]),Object(a.useImperativeHandle)(t,(function(){return{getSubmitParams:U}})),{state:{selectItemUId:p,action:y,position:g,expandedKeys:P,placeholderTop:E,level:C,withChildren:j,catalogTreeRef:S},onSelectItem:B,onChangeAction:function(e,t){if(!f.includes(t.uuid)){e.stopPropagation(),e.preventDefault();var n=e.target.value;v(n),D(t,n),"child"===n&&O("auto")}},onExpand:function(e,t){var n=t.expanded,r=t.node;if(A(e),"sibling"===y&&r.props.uuid===p)if(n){var o=document.querySelector(".ant-tree-treenode-selected");o&&setTimeout((function(){O(o.getBoundingClientRect().height)}),200)}else P.includes(r.props.uuid)||O("auto")},handleChangeWithChildren:function(e,t){k(e.target.checked)},getSubmitParams:U,handleCatalogSearchSelect:function(e){var t=e.tocItemUuid,n=o.find((function(e){return e.uuid===t}));B(n,0,null,"sibling");var r=setTimeout((function(){var e;null===(e=S.current)||void 0===e||e.scrollTo({key:n.uuid,align:"top",offset:100}),clearTimeout(r)}),300)},handleInsertToTop:function(e){return B(null,0,"top")},handleInsertToBottom:function(e){return B(null,0,"bottom")}}}},U={card:"CatalogSelector-module_card_EnAh7",disabled:"CatalogSelector-module_disabled_DdXXq",titleWrapper:"CatalogSelector-module_titleWrapper_mcDOG",title:"CatalogSelector-module_title_ixnVK",docCatalogItem:"CatalogSelector-module_docCatalogItem_yI0aV",emptyViewInner:"CatalogSelector-module_emptyViewInner_FIALf",placeholder:"CatalogSelector-module_placeholder_topjs",caret:"CatalogSelector-module_caret_jxv72",placeholderSibling:"CatalogSelector-module_placeholderSibling_-rdTP",placeholderChild:"CatalogSelector-module_placeholderChild_uP7D6",actions:"CatalogSelector-module_actions_HKHke",topSimulator:"CatalogSelector-module_topSimulator_t0qhG",bottomSimulator:"CatalogSelector-module_bottomSimulator_HSsiS",textTip:"CatalogSelector-module_textTip_LK8n1",selected:"CatalogSelector-module_selected_JDZUv",wrapper:"CatalogSelector-module_wrapper_tsHiF",submitOptions:"CatalogSelector-module_submitOptions_Om8RW",submitOptionItem:"CatalogSelector-module_submitOptionItem_oqA8J",shortcutArea:"CatalogSelector-module_shortcutArea_AgvQv",shortcutTip:"CatalogSelector-module_shortcutTip_BR+Yo",shortcutActionCont:"CatalogSelector-module_shortcutActionCont_l0Ug2",shortcutAction:"CatalogSelector-module_shortcutAction_u+U2K",shortcutActionDisabled:"CatalogSelector-module_shortcutActionDisabled_+nyVB"};function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=i.a.forwardRef((function(e,t){var n=e.catalog,r=e.disableItems,o=e.submitType,c=e.currentSelectedUId,u=e.showChildrenOptions,s=e.extraOptions,f=e.maxHeight,y=e.hideCopyWithChildren,_=void 0!==y&&y,w=B.useViewModel(e,t),E=Object(l.generateTreeByTocItems)(n),O=w.state,x=O.selectItemUId,j=O.action,k=O.position,S=O.expandedKeys,C=O.placeholderTop,P=O.level,T=O.withChildren,A=O.catalogTreeRef,L=__("插入");switch(o){case"move":L=__("移动");break;case"copy":L=__("复制");break;default:L=__("插入")}var I=[{label:__("同级"),value:"sibling"},{label:__("子级"),value:"child"}],R=function(){var e;return i.a.createElement("div",{"data-testid":"catalog-selector-tree-placeholder",className:v()([U.placeholder],(e={},G(e,U.placeholderChild,x&&"child"===j),G(e,U.placeholderSibling,x&&"sibling"===j),e)),style:{top:C}},i.a.createElement(g.b,{name:"catalog-caret",width:13,height:6,className:U.caret}))};Object(a.useEffect)((function(){if(c&&A.current){var e=A.current;setTimeout((function(){e.scrolled||e.scrollTo({key:c,align:"top",offset:100})}),300)}}),[c]);var D={data:E,listData:n,editable:!1,catalogLevel:P,disabledKeys:r.map((function(e){return e.uuid})),selectedKeys:x&&[x],expandedKeys:S,onSelect:w.onSelectItem,onExpand:w.onExpand,size:"normal"};n.length>10&&(D.height=f);var M=!n.length;return i.a.createElement("div",{className:U.wrapper},i.a.createElement("div",{className:U.shortcutArea},i.a.createElement("div",{className:U.shortcutTip},__("请选择要放置的目录位置")),i.a.createElement("div",{className:U.shortcutActionCont},i.a.createElement(N,{listData:n,onSelectOption:w.handleCatalogSearchSelect}),i.a.createElement(h.a,{title:__("置顶")},i.a.createElement("span",{className:v()([U.shortcutAction,G({},U.shortcutActionDisabled,M)]),onClick:function(e){M||w.handleInsertToTop(e)}},i.a.createElement(g.b,{name:"move-top",width:9,height:13,style:{fill:"red"}}))),i.a.createElement(h.a,{title:__("置底")},i.a.createElement("span",{className:v()([U.shortcutAction,G({},U.shortcutActionDisabled,M)]),onClick:function(e){M||w.handleInsertToBottom(e)}},i.a.createElement(g.b,{name:"move-bottom",width:9,height:13}))))),i.a.createElement(p.a,{className:v()([U.card])},i.a.createElement("div",{"data-testid":"catalog-selector-tree-top-simulator",className:U.topSimulator},"top"===k&&R()),n.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,z({},D,{ref:A,renderTitle:function(e){return i.a.createElement("div",{className:U.titleWrapper,"data-testid":"catalog-selector-tree-title-".concat(e.uuid)},i.a.createElement("div",{className:U.title},e.title),x===e.uuid&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:U.actions,"data-testid":"catalog-selector-insert-actions-".concat(e.uuid),onClick:function(e){e.stopPropagation()}},i.a.createElement("span",null,__("{actionType}为",{actionType:L})),i.a.createElement(m.a.Group,{value:w.state.action,onChange:function(t){w.onChangeAction(t,e)},options:I})),R()))}})),i.a.createElement("div",{"data-testid":"catalog-selector-tree-bottom-simulator",className:U.bottomSimulator},"bottom"===k&&R())):i.a.createElement("div",{className:U.emptyView},i.a.createElement("div",{className:U.emptyViewInner},i.a.createElement("p",null,__("插入第一个目录节点"))))),i.a.createElement("div",{className:v()(e.optionClassnames,U.submitOptions)},u&&!_&&i.a.createElement("div",{className:U.submitOptionItem},i.a.createElement(d.a,{checked:T,onChange:w.handleChangeWithChildren},__("包含子文档"))),s))}));V.defaultProps={catalog:[],catalogLevel:1/0,disableItems:[],maxHeight:326,hideCopyWithChildren:!1},V.propTypes={catalog:u.a.array,catalogLevel:u.a.oneOfType([u.a.number,u.a.string]),submitType:u.a.oneOf(["create","move","copy"]),disableItems:u.a.array,showChildrenOptions:u.a.bool,optionClassnames:u.a.string,extraOptions:u.a.node,currentSelectedUId:u.a.string,maxHeight:u.a.number,hideCopyWithChildren:u.a.bool},V.displayName="CatalogSelector";var Y=V,q="CatalogTransfer-module_wrapper_PCdb1",H="CatalogTransfer-module_repoSelector_xEuzZ",W="CatalogTransfer-module_selectBookTip_Ju7F8",K="CatalogTransfer-module_loading_MvRPo",$="CatalogTransfer-module_footer_XgWWv",Q="CatalogTransfer-module_actions_3DruK",X="CatalogTransfer-module_selectorOptions_evk3C";function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(){ne=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==J(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function re(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){re(a,r,o,i,c,"next",e)}function c(e){re(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){var n,r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=Object(l.findAllChildrenByParentNode)(e,a,!0)||[];r.push.apply(r,ie(i))}}catch(c){o.e(c)}finally{o.f()}return r}var se=i.a.forwardRef((function(e,t){var n=e.currentGroup,c=e.currentBook,u=e.disableSelectorBooks,l=e.showRepoSelector,d=e.submitType,p=e.hideCopyWithChildren,m=void 0!==p&&p,h=function(e){var t,n=e.currentGroup,r=e.currentBook,o=e.items,i=e.showRepoSelector,c=e.submitType,u=ae(Object(a.useState)(n),2),l=u[0],f=u[1],d=ae(Object(a.useState)(r),2),p=d[0],m=d[1],h=ae(Object(a.useState)([]),2),y=h[0],v=h[1],b=ae(Object(a.useState)([]),2),g=b[0],_=b[1],w=ae(Object(a.useState)(!0),2),E=w[0],O=w[1],x=ae(Object(a.useState)(!1),2),j=x[0],k=x[1],S=o&&Array.isArray(o)&&1===o.length,C="child";if(p.id===r.id&&S){var N=o[0].uuid,P=o[0].doc_id,T=(A=y.find((function(e){return e.uuid===N||e.doc_id===P})),L=t,I=C,A&&(L=A.prev_uuid,A.prev_uuid&&A.parent_uuid!==A.prev_uuid?(L=A.prev_uuid,I="sibling"):L=A.parent_uuid),{uuid:L,actionType:I});t=T.uuid,C=T.actionType}var A,L,I;var R,D=Object(a.useMemo)((function(){return o.reduce((function(e,t){var n=g.find((function(e){return e.uuid===t.uuid||e.doc_id===t.doc_id}));return n&&e.push(n),e}),[])}),[o,g]),M=Object(a.useMemo)((function(){return Array.isArray(D)&&D.length&&"move"===c&&p.id===r.id?[].concat(D,le(y,D)):[]}),[y,r.id,p.id,D]),F=function(){var e=oe(ne().mark((function e(t){var n,o;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,s.a.getCatalogNodes(t.id);case 3:n=e.sent,o=n?n.toc:[],v(o),t.id===r.id&&_(o),O(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return i||F(r),k(!1)}),[i,r]),{state:{targetGroup:l,targetBook:p,toc:y,items:D,disableItemsInToc:M,loading:E,submitting:j,defaultSelectedCatalogNodeUid:t,defaultSelectedNodeActionType:C},handleSelect:(R=oe(ne().mark((function e(t){var n,r=arguments;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:{},t&&f(t),n&&m(n),!t||!n){e.next=6;break}return e.next=6,F(n);case 6:case"end":return e.stop()}}),e)}))),function(e){return R.apply(this,arguments)}),setSubmitting:k}}(e),y=h.state,v=y.targetGroup,b=y.targetBook,g=y.toc,_=y.disableItemsInToc,w=y.loading,E=y.submitting,O=y.defaultSelectedCatalogNodeUid,x=y.defaultSelectedNodeActionType,j=y.items,k=h.setSubmitting,S=i.a.useRef(),C=Array.isArray(j)&&j.some((function(e){return!!e.child_uuid})),N=function(){var t=oe(ne().mark((function t(){var n,r,o,a;return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!E){t.next=2;break}return t.abrupt("return");case 2:return k(!0),n={targetGroup:v,targetBook:b},Array.isArray(j)&&j.length&&(r=j.map((function(e){return e.uuid})),n.node_uuid=r[0]),o={},S&&S.current&&(o=S.current.getSubmitParams()),t.next=9,e.onSubmit(ee(ee({},o),n));case 9:return a=t.sent,k(!1),t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=(b.toc||[]).length,T=48+(P>10?326:32*P);return i.a.createElement("div",{className:q},l&&i.a.createElement("div",{className:H},i.a.createElement(f.a,{defaultGroup:n,defaultBook:c,disableBooks:u,onSelected:h.handleSelect})),w?i.a.createElement(o.a,{className:K,size:"large",style:{height:T}}):i.a.createElement(i.a.Fragment,null,v&&b&&b.id?i.a.createElement(Y,{currentSelectedUId:O,currentSelectedAction:x,submitType:d,targetBook:b,catalog:g,catalogLevel:b.catalog_display_level,disableItems:_,ref:S,optionClassnames:X,showChildrenOptions:C,hideCopyWithChildren:m}):i.a.createElement("div",{className:W},__("请选择知识库"))),i.a.createElement("div",{className:$},i.a.createElement("div",{className:Q},i.a.createElement(r.a,{onClick:e.onCancel},__("取消")),i.a.createElement(r.a,{type:"primary",onClick:N,loading:E,disabled:!v||!b||!b.id||E,"data-testid":"catalog-transfer-btn-submit"},__("确认")))))}));se.defaultProps={showRepoSelector:!0,items:[]},se.propTypes={currentGroup:u.a.object,currentBook:u.a.object.isRequired,disableSelectorBooks:u.a.array,items:u.a.array,onSubmit:u.a.func.isRequired,onCancel:u.a.func.isRequired,submitType:u.a.oneOf(["create","move","copy"]).isRequired,showRepoSelector:u.a.bool,hideCopyWithChildren:u.a.bool},se.displayName="CatalogTransfer";t.a=se},,,,,,,,,function(e,t,n){"use strict";e.exports={VERSION:1.3,VIEW_TYPE:{GRID:"GRID",FORM:"FORM",CARD:"CARD",KANBAN:"KANBAN"},CELL_TYPE:{INPUT:"input",TEXTAREA:"textarea",NUMBER:"number",SELECT:"select",MULTI_SELECT:"multiSelect",DATE:"date",MENTION:"mention",IMAGE:"image",FILE:"file",CHECKBOX:"checkbox",LINK:"link",EMAIL:"email",PHONE:"phone",CREATED_AT:"createdAt",UPDATED_AT:"updatedAt"},MAX_RECORD_COUNT:5e3,CARD_MAX_RECORD_COUNT:200}},,,,,,,function(e,t,n){var r=n(2663),o=n(837);e.exports=function(e){return null==e?[]:r(e,o(e))}},function(e,t,n){"use strict";e.exports={LAYOUT:{header:{headlines:"headlines",searchInput:"search_input",groupAnnouncement:"group_announcement"},content:{bookStacks:"book_stacks"},aside:{quickLinks:"quick_links",topics:"topics",latestBooks:"latest_books",latestDocs:"latest_docs",events:"events"}},UPGRADE_STARTED_AT:"2021-06-09 00:00:00"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(635),o=(window.navigator.language||"zh-cn").toLowerCase(),a="en-us"===o;window.__=function(e,t){return Object(r.a)(e,t,a)};var i=o},,function(e,t,n){var r=n(2142),o=n(837);e.exports=function(e,t){return e&&r(e,t,o)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){(function(e){var r=n(2141),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,c=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=c}).call(this,n(509)(e))},function(e,t,n){var r=n(671),o=n(229);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(2145)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(956)(n(603),"Map");e.exports=r},function(e,t,n){var r=n(2550),o=n(2557),a=n(2559),i=n(2560),c=n(2561);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=i,u.prototype.set=c,e.exports=u},function(e,t,n){var r=n(2562),o=n(558);e.exports=function e(t,n,a,i,c){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,c))}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(2569),o=n(2152),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return a.call(e,t)})))}:o;e.exports=c},function(e,t,n){var r=n(269),o=n(1008),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(i.test(e)||!a.test(e)||null!=t&&e in Object(t))}},function(e,t,n){var r=n(1005),o=n(604),a=n(269),i=n(1008),c=r?r.prototype:void 0,u=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return o(t,e)+"";if(i(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},function(e,t,n){var r=n(1977),o=n(2581)(r);e.exports=o},function(e,t,n){var r=n(1010),o=n(960),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(2151),o=n(2163),a=n(1177);e.exports=function(e){return r(e,a,o)}},function(e,t,n){var r=n(2149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var r=n(674),o=n(1290);e.exports=function(e){return r((function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,c&&o(n[0],n[1],c)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var u=n[r];u&&e(t,u,r,i)}return t}))}},function(e,t,n){"use strict";n.r(t);var r=n(383),o=n(147);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,c,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,u,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.default=Object(o.a)({namespace:"actions",state:{},effects:{getFavor:c().mark((function e(t,n){var o,a,i,u,l,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,n.select,u=o.data,e.next=5,i(r.c,{target_type:"Book",target_id:u.id,action_type:"like"});case 5:return l=e.sent,e.next=8,i(r.c,{target_type:"Book",target_id:u.id,action_type:"watch"});case 8:return s=e.sent,e.next=11,a({type:"book/update",payload:{like:{data:l.data.actioned,count:l.data.count},subscribe:{data:s.data.actioned,count:s.data.count}}});case 11:case"end":return e.stop()}}),e)})),actionLike:c().mark((function e(t,n){var o,a,u,l,s,f,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,u=n.call,n.select,l=i({},o),s=l.type,f=l.id,e.next=6,u(r.a,{action_type:"like",target_type:s,target_id:f});case 6:if(d=e.sent,"Doc"!==s){e.next=12;break}return e.next=10,a({type:"doc/updateLikes",payload:{active:!0}});case 10:case 15:e.next=20;break;case 12:if("Artboard"!==s){e.next=17;break}return e.next=15,a({type:"artboard/updateLikes",payload:{like:d.data}});case 17:if("Book"!==s){e.next=20;break}return e.next=20,a({type:"book/like",payload:{like:d.data}});case 20:return e.abrupt("return",d.data);case 21:case"end":return e.stop()}}),e)})),cancelLike:c().mark((function e(t,n){var o,a,u,l,s,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,u=n.call,n.select,l=i({},o),s=l.type,f=l.id,e.next=6,u(r.b,{action_type:"like",target_type:s,target_id:f});case 6:if("Doc"!==s){e.next=11;break}return e.next=9,a({type:"doc/updateLikes",payload:{active:!1}});case 9:case 14:e.next=19;break;case 11:if("Artboard"!==s){e.next=16;break}return e.next=14,a({type:"artboard/updateLikes",payload:{}});case 16:if("Book"!==s){e.next=19;break}return e.next=19,a({type:"book/cancelLike",payload:{}});case 19:case"end":return e.stop()}}),e)})),subscribe:c().mark((function(e,t){var n,o,a,u,l;return c().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,o=t.put,a=t.call,t.select,u=i({},n),c.next=5,a(r.a,{action_type:"watch",target_type:"Book",target_id:u.id});case 5:return l=c.sent,c.next=8,o({type:"book/subscribe",payload:{subscribe:l.data}});case 8:return c.abrupt("return",l.data);case 9:case"end":return c.stop()}}),l)})),unsubscribe:c().mark((function e(t,n){var o,a,u,l,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,u=n.call,n.select,l=i({},o),e.next=5,u(r.b,{action_type:"watch",target_type:"Book",target_id:l.id});case 5:return s=e.sent,e.next=8,a({type:"book/unsubscribe",payload:{}});case 8:return e.abrupt("return",s.data);case 9:case"end":return e.stop()}}),e)})),followUser:c().mark((function e(t,n){var o,a,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.call,n.put,n.select,u=i({},o),e.next=5,a(r.a,{action_type:"follow",target_type:"User",target_id:u.user_id});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})),unfollowUser:c().mark((function e(t,n){var o,a,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.call,n.put,n.select,u=i({},o),e.next=5,a(r.b,{action_type:"follow",target_type:"User",target_id:u.user_id});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})),getListFollowStatus:c().mark((function e(t,n){var o,a,i,u,l,s,f,d,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.call,n.put,i=o.user_id,u=o.target_ids,l=o.show_followed_status,e.next=5,a(r.e,{action_type:"follow",target_type:"User",target_ids:u});case 5:if(s=e.sent,f=s.data.map((function(e){return e.target_id})),d=[],!l){e.next=13;break}return e.next=11,a(r.f,{action_type:"follow",target_type:"User",target_id:i,user_ids:u});case 11:p=e.sent,d=p.data.map((function(e){return e.id}));case 13:return e.abrupt("return",{followingIds:f,followedIds:d});case 14:case"end":return e.stop()}}),e)}))}})},function(e,t,n){var r=n(1012);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){"use strict";n.r(t);var r=n(147);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,a,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,a)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,i,c,u){var l=f(e[a],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==o(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,c,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.default=Object(r.a)({namespace:"error",state:{loginModalVisible:!1,orgExpiredModalVisible:!1,orgSignTermsModalVisible:!1},effects:{report:function(e,t){var n=e.payload,r=(t.put,t.call,t.select,n.status||n.code||"");r&&(r>=400&&r<500?window.location.reload():500===r&&(window.location.href="/500"))},toggleLoginModal:u().mark((function e(t,n){var r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.put,n.call,n.select,e.next=4,o({type:"update",payload:{loginModalVisible:r.visible,from:r.from}});case 4:case"end":return e.stop()}}),e)})),toggleOrgLimitTip:u().mark((function e(t,n){var r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.put,n.call,n.select,e.next=4,o({type:"update",payload:{orgExpiredModalVisible:r.orgExpiredModalVisible,orgSignTermsModalVisible:r.orgSignTermsModalVisible}});case 4:case"end":return e.stop()}}),e)}))},reducers:{update:function(e,t){var n=t.payload;return i(i({},e),n)}}})},function(e,t,n){"use strict";n.r(t);var r=n(147);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=Object(r.a)({namespace:"guide",state:{readTip:window.appData.readTip||{}},reducers:{readFeatureGuide:function(e,t){var n=t.payload,r=a({},e.readTip);return r[n.tip_id]=!0,a(a({},e),{},{readTip:r})}}})},function(e,t,n){"use strict";n.r(t);var r=n(690),o=n(147);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var i=["type"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){d=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var f={};function p(){}function m(){}function h(){}var y={};u(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,c,u){var l=s(e[o],e,i);if("throw"!==l.type){var f=l.arg,d=f.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){f.value=e,c(f)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,u(g,"constructor",h),u(h,"constructor",m),m.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),u(g,c,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.default=Object(o.a)({namespace:"litecomment",state:{comments:[],subscribed:!1,page:null,rect:null,areaCommenting:!1,showArea:!0,currentCommentId:null,commentCount:null},effects:{getIncomingComments:d().mark((function e(t,n){var o,a,c,u,l,s,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,c=n.call,u=o.data,l=u.type,s=p(u,i),e.next=6,c(r.b,s);case 6:if(f=e.sent,"create"!==l){e.next=12;break}return e.next=10,a({type:"addIncoming",payload:{comments:f.data}});case 10:case 15:e.next=19;break;case 12:if("destroy"!==l){e.next=17;break}return e.next=15,a({type:"removeIncoming",payload:{comments:f.data}});case 17:return e.next=19,a({type:"update",payload:f.data});case 19:return e.abrupt("return",f.data);case 20:case"end":return e.stop()}}),e)}))},reducers:{create:function(e,t){var n=t.payload,r=n.data,o=n.showEditorAtBottom,a=n.commentListStyle,i=void 0===a?"timeline":a,c=n.insertToBottom,l=void 0!==c&&c;if("floor"===i){var f=null===r.root_id;if(e.comments.some((function(e){return e.id===r.id})))return e;var d=e.comments;return f?(r.sub_comments=r.sub_comments||[],d=[].concat(s(e.comments),[r])):d=l?e.comments.map((function(e){return e.id===r.root_id&&(e.sub_comments=[].concat(s(e.sub_comments||[]),[r])),e})):e.comments.map((function(e){if(e.id===r.root_id)if(r.root_id===r.parent_id){var t=e;r.to_user=t.user,e.sub_comments=[r].concat(s(e.sub_comments||[]))}else{var n=e.sub_comments.findIndex((function(e){return e.id===r.parent_id})),o=e.sub_comments[n];r.to_user=o.user,e.sub_comments.splice(n+1,0,r)}return e})),u(u({},e),{},{commentCount:null===e.commentCount?1:e.commentCount+1,comments:d})}return e.comments.some((function(e){return e.id===r.id}))?e:u(u({},e),{},{commentCount:null===e.commentCount?1:e.commentCount+1,comments:o?[].concat(s(e.comments),[r]):[r].concat(s(e.comments))})},updateOne:function(e,t){var n=t.payload,r=e.comments.map((function(e){return e.id===n.id?(n.sub_comments=e.sub_comments,n.to_user=e.to_user,n):(e.sub_comments&&(e.sub_comments=e.sub_comments.map((function(e){return e.id===n.id?(n.to_user=e.to_user,n):e}))),e)}));return u(u({},e),{},{comments:r})},update:function(e,t){var n=t.payload;return e.page&&(n=n.filter((function(t){return!t.comment_area||t.comment_area.page===e.page}))),u(u({},e),{},{comments:s(n)})},updateModel:function(e,t){var n=t.payload,r=u(u({},e),n);return e.page&&(r.comments=r.comments.filter((function(t){return!t.comment_area||t.comment_area.page===e.page}))),r},addIncoming:function(e,t){var n=t.payload,r=s(e.comments),o=s(n.comments).filter((function(e){return!r.some((function(t){return t.id===e.id}))&&(e.user_id!==window.appData.me.id&&(e.isNewIncoming=!0),!0)}));return u(u({},e),{},{comments:[].concat(s(r),s(o))})},removeIncoming:function(e,t){var n=t.payload,r=s(e.comments),o=s(n.comments);return o.forEach((function(e){var t=r.find((function(t){return t.id===e.id}));t&&t.isNewIncoming&&(e.isNewIncoming=!0)})),u(u({},e),{},{comments:o})},remove:function(e,t){var n=t.payload,r=e.comments.filter((function(e){return e.id===n.id?!!(e.sub_comments&&e.sub_comments.length>0)&&(e.deleted_at=n.deleted_at||new Date,!0):!e.sub_comments||(e.sub_comments=e.sub_comments.filter((function(e){return e.id!==n.id})),!e.deleted_at||0!==e.sub_comments.length)}));return u(u({},e),{},{commentCount:e.commentCount?e.commentCount-1:0,comments:r})},reset:function(e,t){t.payload;return{comments:[],subscribed:!1}},updateSubscribeStatus:function(e,t){var n=t.payload.subscribed;return u(u({},e),{},{subscribed:n})},setPage:function(e,t){var n=t.payload;return u(u({},e),{},{page:n})},setRect:function(e,t){var n=t.payload;return u(u({},e),{},{rect:n})},toggleAreaCommenting:function(e){return u(u({},e),{},{areaCommenting:!e.areaCommenting})},cancleAreaCommenting:function(e){return u(u({},e),{},{areaCommenting:!1})},toggleShowArea:function(e){return u(u({},e),{},{showArea:!e.showArea})},updateCurrentCommentId:function(e,t){var n=t.payload;return u(u({},e),{},{currentCommentId:n})},openSelections:function(e,t){var n=t.payload,r=e.comments.map((function(e){return e.selection&&e.selection.paragraph_id===n.paragraph_id&&(e.selection.closed_at=null),e}));return u(u({},e),{},{comments:r})},closeSelections:function(e,t){var n=t.payload,r=e.comments.map((function(e){return e.selection&&e.selection.paragraph_id===n.paragraph_id&&(e.selection.closed_at=n.closed_at||new Date),e}));return u(u({},e),{},{comments:r})},openSelectionById:function(e,t){var n=t.payload,r=e.comments.map((function(e){return e.selection&&e.selection.id===n.selection_id&&(e.selection.closed_at=null),e}));return u(u({},e),{},{comments:r})},closeSelectionById:function(e,t){var n=t.payload,r=e.comments.map((function(e){return e.selection&&e.selection.id===n.selection_id&&(e.selection.closed_at=n.closed_at||new Date),e}));return u(u({},e),{},{comments:r})}}})},function(e,t,n){"use strict";n.r(t);var r=n(567),o=n(1204),a=n(1205),i=n(147);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var d={};function p(){}function m(){}function h(){}var y={};u(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,u(g,"constructor",h),u(h,"constructor",m),m.displayName=u(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),u(g,i,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=Object(i.a)({namespace:"me",state:d(d({},window.appData.me),{},{groups:window.appData.me.groups||[],books:window.appData.me.books||[],docs:window.appData.me.docs||[],departments:[],commonUsedBooks:[],commonUsedGroups:[]}),effects:{doLogin:s().mark((function e(t,n){var r,o,i,c,u,l,f,p,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.put,i=n.call,c=n.select,e.next=4,i(a.a,r);case 4:if(!(u=e.sent).data||!u.data.ok){e.next=18;break}return e.next=8,c();case 8:if(l=e.sent,!(f=l.me).onLogin){e.next=16;break}return f.onLogin(),e.next=14,o({type:"update",payload:d(d({},(null===(p=u.data)||void 0===p?void 0:p.user)||{}),{},{onLogin:null,session:!0})});case 14:e.next=18;break;case 16:return e.next=18,o({type:"update",payload:(null===(m=u.data)||void 0===m?void 0:m.user)||{}});case 18:return e.abrupt("return",u);case 19:case"end":return e.stop()}}),e)})),loginOut:s().mark((function e(t,n){var o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,n.put,o=n.call,e.next=4,o(r.b,{});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})),activeUser:s().mark((function e(t,n){var o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,n.put,o=n.call,e.next=4,o(r.a,{});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})),updateMe:s().mark((function e(t,n){var r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.put,n.call,e.next=4,o({type:"update",payload:r});case 4:case"end":return e.stop()}}),e)})),ownedBooks:s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,n.put,r=n.call,n.select,e.next=4,r(o.a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})),ownDepartment:s().mark((function e(t,n){var o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,o=n.put,a=n.call,e.next=4,a(r.c,{});case 4:return i=e.sent,e.next=7,o({type:"setDepartment",payload:i.data});case 7:case"end":return e.stop()}}),e)}))},reducers:{updateGroups:function(e,t){var n=t.payload;return d(d({},e),{},{groups:n})},addGroups:function(e,t){var n=t.payload;return d(d({},e),{},{groups:[].concat(u(e.groups),u(n))})},updatePublications:function(e,t){var n=t.payload;return d(d({},e),{},{publications:n})},addPublications:function(e,t){var n=t.payload;return d(d({},e),{},{publications:[].concat(u(e.publication),u(n))})},updateToken:function(e,t){var n=t.payload;return d(d({},e),{},{private_token:n&&n.private_token})},update:function(e,t){var n=t.payload;return d(d({},e),n)},setDepartment:function(e,t){var n=t.payload;return d(d({},e),{},{departments:n})},updateCommonUsedList:function(e,t){var n=t.payload;return d(d({},e),{},p({},n.key,u(n.items)))}},subscriptions:{}})},function(e,t,n){"use strict";n.r(t);var r=n(691),o=n(147);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var d={};function p(){}function m(){}function h(){}var y={};u(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,c,u){var l=s(e[o],e,i);if("throw"!==l.type){var f=l.arg,d=f.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){f.value=e,c(f)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,u(g,"constructor",h),u(h,"constructor",m),m.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),u(g,c,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.default=Object(o.a)({namespace:"notification",state:{loaded:!1,list:[],unreadCount:0,unreadList:[],unreadCountOrganization:{}},effects:{getUnreadCountOrganization:f().mark((function e(t,n){var o,a,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,o=n.put,a=n.call,e.next=4,a(r.d);case 4:return i=e.sent,e.next=7,o({type:"update",payload:{unreadCountOrganization:i.data}});case 7:case"end":return e.stop()}}),e)})),updateUnreadCountOrganization:f().mark((function e(t,n){var r,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.put,e.next=4,o({type:"updateUnread",payload:l({},r)});case 4:case"end":return e.stop()}}),e)})),getUnreadCount:f().mark((function e(t,n){var o,a,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,o=n.put,a=n.call,e.next=4,a(r.c);case 4:return i=e.sent,e.next=7,o({type:"update",payload:{unreadCount:i.data.count,unreadList:i.data.list}});case 7:case"end":return e.stop()}}),e)})),getList:f().mark((function e(t,n){var o,a,i,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=o.data,e.next=5,i(r.b,c);case 5:if(u=e.sent,0!==c.offset){e.next=11;break}return e.next=9,a({type:"update",payload:{list:u.data}});case 9:e.next=13;break;case 11:return e.next=13,a({type:"updateList",payload:{list:u.data}});case 13:return e.abrupt("return",u.data);case 14:case"end":return e.stop()}}),e)})),markReaded:f().mark((function e(t,n){var o,a,i,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=o.data,e.next=5,i(r.e,c);case 5:if(u=e.sent,"all"!==c.ids){e.next=11;break}return e.next=9,a({type:"update",payload:{unreadCount:0,list:[]}});case 9:e.next=13;break;case 11:return e.next=13,a({type:"markAsRead",payload:{id:c.ids}});case 13:return e.abrupt("return",u.data);case 14:case"end":return e.stop()}}),e)})),deleteItems:f().mark((function e(t,n){var o,a,i,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=o.data,e.next=5,i(r.a,c);case 5:if(u=e.sent,"all"!==c.ids){e.next=11;break}return e.next=9,a({type:"update",payload:{list:[],unreadCount:0}});case 9:e.next=13;break;case 11:return e.next=13,a({type:"removeItems",payload:{ids:c.ids}});case 13:return e.abrupt("return",u.data);case 14:case"end":return e.stop()}}),e)}))},reducers:{update:function(e,t){var n=t.payload;return l(l({},e),n)},updateUnread:function(e,t){var n=t.payload,r=l(l({},e.unreadCountOrganization),n);return l(l({},e),{},{unreadCountOrganization:r})},updateList:function(e,t){var n=t.payload;return l(l({},e),{},{list:[].concat(i(e.list),i(n.list))})},markAsRead:function(e,t){var n=t.payload,r=e.list.slice(),o=r.findIndex((function(e){return e.id===Number(n.id)}));if(o>=0){var a=r[o];a.read_at="readed",r.splice(o,1,a)}return l(l({},e),{},{list:r})},removeItems:function(e,t){var n=t.payload,r=e.list.slice();return n.ids.split(",").forEach((function(e){var t=r.findIndex((function(t){return t.id===Number(e)}));t>=0&&r.splice(t,1)})),l(l({},e),{},{list:r})}}})},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),t.default={namespace:"organization",state:i(i({},window.appData.organization),{},{corp:i({},window.appData.corp),options:i({},window.appData.options),enablePlatforms:window.appData.enablePlatforms||[],thirdPartCorps:window.appData.thirdPartCorps||[],members:[],outsourcersMembers:[],owners:[],outsourcers:[],recommends:{groups:[],books:[]},hotRanks:{},counts:{owner:0,member:0,outsourcer:0}}),reducers:{update:function(e,t){var n=t.payload;return i(i({},e),n)},updateMembersAndCount:function(e,t){var n=t.payload,r=n.data,o=n.counts;return i(i({},e),{},{members:r,counts:o})},updateOutsourcersMembersAndCount:function(e,t){var n=t.payload,r=n.data,o=n.counts;return i(i({},e),{},{outsourcersMembers:r,counts:o})},updateMembers:function(e,t){var n=t.payload;return i(i({},e),{},{members:n})},updateOutsourcersMembers:function(e,t){var n=t.payload;return i(i({},e),{},{outsourcersMembers:n})},addMembers:function(e,t){var n=t.payload;return i(i({},e),{},{members:[].concat(r(e.members),r(n))})},addOutsourcersMembers:function(e,t){var n=t.payload;return i(i({},e),{},{outsourcersMembers:[].concat(r(e.outsourcersMembers),r(n))})},addMember:function(e,t){var n=t.payload;return i(i({},e),{},{members:[].concat(r(e.members),[n]),counts:i(i({},e.counts),{},{member:e.counts.member+1})})},addOutsourcersMember:function(e,t){var n=t.payload;return i(i({},e),{},{outsourcersMembers:[].concat(r(e.outsourcersMembers),[n]),counts:i(i({},e.counts),{},{outsourcer:e.counts.outsourcer+1})})},removeMember:function(e,t){var n=t.payload,o=r(e.members),a=o.findIndex((function(e){return e.id===n.id}));return a<0?e:(o.splice(a,1),i(i({},e),{},{members:o,counts:i(i({},e.counts),{},{member:e.counts.member-1})}))},removeOutsourcersMember:function(e,t){var n=t.payload,o=r(e.outsourcersMembers),a=o.findIndex((function(e){return e.id===n.id}));return a<0?e:(o.splice(a,1),i(i({},e),{},{outsourcersMembers:o,counts:i(i({},e.counts),{},{outsourcer:e.counts.outsourcer-1})}))},updateOwners:function(e,t){var n=t.payload;return i(i({},e),{},{owners:n})},addOwners:function(e,t){var n=t.payload;return i(i({},e),{},{owners:[].concat(r(e.owners),r(n))})},addOwner:function(e,t){var n=t.payload;return i(i({},e),{},{owners:[].concat(r(e.owners),[n])})},removeOwner:function(e,t){var n=t.payload,o=r(e.owners),a=o.findIndex((function(e){return e.id===n.id}));return a<0?e:(o.splice(a,1),i(i({},e),{},{owners:o}))},updateToken:function(e,t){var n=t.payload;return i(i({},e),{},{joinToken:n})},updateProfile:function(e,t){var n=t.payload;return i(i({},e),{},{notification:n.notification,recommendGroups:n.recommendGroups,latestPublishedDocs:n.latestPublishedDocs,quickLinks:n.quickLinks})},updateNotification:function(e,t){var n=t.payload;return i(i({},e),{},{notification:n})},addRecommendGroup:function(e,t){var n=t.payload,o=e.recommends;return i(i({},e),{},{recommends:i(i({},o),{},{groups:[].concat(r(o.groups),[n])})})},removeRecommendGroup:function(e,t){var n=t.payload,r=e.recommends,o=r.groups,a=o.findIndex((function(e){return e.recommend_id===n.id}));return o.splice(a,1),i(i({},e),{},{recommends:i(i({},r),{},{groups:o})})},addRecommendBook:function(e,t){var n=t.payload,o=e.recommends;return i(i({},e),{},{recommends:i(i({},o),{},{books:[].concat(r(o.books),[n])})})},removeRecommendBook:function(e,t){var n=t.payload,r=e.recommends,o=r.books,a=o.findIndex((function(e){return e.recommend_id===n.id}));return o.splice(a,1),i(i({},e),{},{recommends:i(i({},r),{},{books:o})})}}}},function(e,t,n){"use strict";n.r(t);var r=n(32),o=n.n(r),a=n(147);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={formatDate:function(e){return o()(new Date(e)).fromNow()},translateBook:function(e){return{name:e.name||"",description:e.description||"",url:e.url||"",id:e.id||-1,type:e.type||"Book",group:e._record&&e._record.user,groupName:e.group_name||"",cretedAt:this.formatDate(e.created_at)||""}},translateDoc:function(e){return{title:e.title||e._record&&e._record.title||"",url:e.url||"",abstract:e.abstract||"",id:e.id||-1,group:e._record&&e._record.book&&e._record.book.user,book:e._record&&e._record.book,groupName:e.group_name||"",bookName:e.book_name||"",createdAt:this.formatDate(e.created_at)||""}},translateTopic:function(e){return{title:e.title||"",url:e.url||"",abstract:e.abstract||"",id:e.id||-1,group:e._record&&e._record.group,groupName:e.group_name||"",createdAt:this.formatDate(e.created_at)||""}},translateArtBoard:function(e){return{name:e.name||"",description:"",url:e.url||"",id:e.id||-1,group:e._record&&e._record.book&&e._record.book.user,book:e._record&&e._record.book,groupName:e.group_name||"",bookName:e.book_name||"",createdAt:this.formatDate(e.created_at)||""}},translateHits:function(e,t){var n=this;return t?t.map((function(t){var r=t;switch(e){case"book":r=n.translateBook(t);break;case"doc":r=n.translateDoc(t);break;case"artboard":r=n.translateArtBoard(t);break;case"topic":r=n.translateTopic(t)}return r})):[]}},s=c({},window.appData.search);s.result&&(s.result.hits=l.translateHits(s.query.type,s.result.hits)),t.default=Object(a.a)({namespace:"search",state:c({},s),reducers:{init:function(e,t){var n=t.payload,r=c({},e);return r.result=r.result||{},r.result.hits=[],r.query.type=n,r.loading=!0,r},updateResult:function(e,t){var n=t.payload,r=c({},e),o=n.query,a=n.response;return r.result=r.result||{},r.result.hits=l.translateHits(o.type,a.hits),r.result.totalHits=a.totalHits,r.result.numHits=a.numHits,r.result.blacklist=a.blacklist,r.query.type=o.type,r.query.p=o.p,r.query.q=o.q,r.loading=!1,r},update:function(e,t){var n=t.payload;return c(c({},e),n)}}})},function(e,t,n){"use strict";n.r(t);var r=n(147);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=Object(r.a)({namespace:"space",state:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},window.appData.space),effects:{},reducers:{}})},function(e,t,n){var r=n(2009);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},function(e,t){e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(o);++r<o;)a[r]=e[r+t];return a}},function(e,t,n){var r=n(2688),o=n(1291),a=n(2689);e.exports=function(e){return o(e)?a(e):r(e)}},,,,,,,,,,,,function(e,t,n){var r=n(1287),o=n(1997),a=n(1999),i=n(604),c=n(955),u=n(1288);e.exports=function(e,t,n,l){var s=-1,f=o,d=!0,p=e.length,m=[],h=t.length;if(!p)return m;n&&(t=i(t,c(n))),l?(f=a,d=!1):t.length>=200&&(f=u,d=!1,t=new r(t));e:for(;++s<p;){var y=e[s],v=null==n?y:n(y);if(y=l||0!==y?y:0,d&&v==v){for(var b=h;b--;)if(t[b]===v)continue e;m.push(y)}else f(t,v,l)||m.push(y)}return m}},function(e,t,n){},,,,function(e,t,n){"use strict";e.exports={SCOPES:["attach_upload"],SCOPES_MAP:{attach_upload:"attach_upload"}}},function(e,t,n){"use strict";e.exports={TYPE:{},STATUS:{init:0,waiting:1,success:2,closed:3}}},function(e,t,n){"use strict";e.exports={ROOT:"1",BUC_ROOT_DEPARTMENTS:{ALIBABA_GROUP_BOARD:"I0001",ALIBABA:"12503",ANTFIN:"8430",MYBANK:"134318"},MEMBER_TYPE:{all:0,member:1},TYPE:{member:1,outsourcer:2},SUBDEPARTMENT_USER_QUERY_LIMIT:200}},,,function(e,t,n){"use strict";t.a={modal:"CatalogMenuEditNode-module_modal_4focI",modalTitle:"CatalogMenuEditNode-module_modalTitle_ZgYhp",modalDescription:"CatalogMenuEditNode-module_modalDescription_-7x6D",btnCloseModal:"CatalogMenuEditNode-module_btnCloseModal_ESRS+",menu:"CatalogMenuEditNode-module_menu_IUmmu",menuItem:"CatalogMenuEditNode-module_menuItem_AuSRR",icon:"CatalogMenuEditNode-module_icon_9R6mY",iconBeta:"CatalogMenuEditNode-module_iconBeta_KHwCd",menuItemContent:"CatalogMenuEditNode-module_menuItemContent_Lf9nF",iconWrapper:"CatalogMenuEditNode-module_iconWrapper_IoV7X"}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(2278),u=n.n(c),l=!0;var s=n(38),f={wrapper:"search-module_wrapper_NTCR0",input:"search-module_input_iXQUb",icon:"search-module_icon_EUv7E"},d=function(){};d.StaticComponent=function(e){var t=e.needPullToRefresh;return o.a.createElement("div",{className:f.wrapper,ref:function(e){e&&t&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};e&&(e._initedPullToRefresh||(e._initedPullToRefresh=!0,u.a.init({instructionsPullToRefresh:__("下拉刷新"),instructionsReleaseToRefresh:__("释放更新"),instructionsRefreshing:__("更新中"),mainElement:e,triggerElement:e,onRefresh:t,shouldPullToRefresh:function(){return!!l&&n()}})))}(e.parentNode,(function(){window.yqWebApp.refreshDashboard()}),(function(){return!e.parentNode.parentNode.scrollTop}))}},o.a.createElement("div",{className:f.input,onClick:e.goSearch},o.a.createElement("span",{className:f.icon},o.a.createElement(s.b,{name:"webapp-search",width:18})),o.a.createElement("span",{className:f.text},__("搜索"))))},d.defaultProps={needPullToRefresh:!1},d.propTypes={goSearch:i.a.func,needPullToRefresh:i.a.bool};t.a=d},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(218),n(51)),a=(n(75),n(26)),i=(n(50),n(19)),c=(n(60),n(24)),u=n(0),l=n.n(u),s=n(2),f=n.n(s),d=n(34),p=n(2083),m=n.n(p),h={title:"index-module_title_INHx3",help:"index-module_help_AVFYJ",tip:"index-module_tip_T1jyO",errMessage:"index-module_errMessage_nSIYH",form:"index-module_form_W9V8N",footer:"index-module_footer_G0PQG",submitBtn:"index-module_submitBtn_+TZ+Q"};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(){v=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(k([])));b&&b!==t&&n.call(b,o)&&(m=b);var g=p.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==y(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function b(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.usage,n=e.appData,r=g(Object(u.useState)(!1),2),o=r[0],a=r[1],i=g(Object(u.useState)(""),2),l=i[0],s=i[1],f=g(Object(u.useState)(""),2),p=f[0],h=f[1],y="",_=function(){var e,r=(e=v().mark((function e(){var r,o,i,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={code:m()(p)},e.t0=t,e.next="member"===e.t0?4:"group"===e.t0?7:"organization"===e.t0?10:13;break;case 4:return r.user_id=n.me.id,y=__("语雀会员"),e.abrupt("break",14);case 7:return r.user_id=n.group.id,y=__("高级版"),e.abrupt("break",14);case 10:return r.organization_id=n.organization.id,y=__("语雀空间"),e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:return e.prev=14,e.next=17,d.a.promo.consume(r,{ignoreGlobalMessage:!0});case 17:if((o=e.sent).success){e.next=20;break}return e.abrupt("return",s(o.message));case 20:i=o.promo.amount,u=i,o.success&&(a(!1),c.a.success(__("兑换成功，您已获得{messageText}{duration}天",{messageText:y,duration:u}),1500),setTimeout((function(){window.location.reload()}),1500)),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(14),s(__("优惠码无效"));case 28:case"end":return e.stop()}}),e,null,[[14,25]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,c,"next",e)}function c(e){b(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{visible:o,errMessage:l,value:p},handleVerify:_,setVisible:a,onChange:function(e){h(e),s("")}}},E=function(e){var t=e.usage,n=window.appData,c=w({usage:t,appData:n}),u=c.state,s=u.visible,f=u.errMessage,d=u.value,p=c.handleVerify,m=c.setVisible,y=c.onChange,v=l.a.createElement("div",null,l.a.createElement("span",{className:h.title},__("兑换码")),l.a.createElement("a",{className:h.help,href:"https://www.yuque.com/yuque/cdgcvd/kpdrnf",target:"_blank"},__("关于兑换码"))),b=function(){m(!1),y("")};return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{"data-aspm-click":"click-promo","data-aspm-param":"scene=show-promo-modal",onClick:function(){return m(!0)},className:h.memberPromoButton,"data-testid":"promo-verify-btn"},__("使用兑换码")),l.a.createElement(r.a,{title:v,visible:s,onCancel:function(){m(!1),y("")},footer:null,onClose:b},l.a.createElement(o.a,{layout:"vertical",className:h.form,"data-testid":"promo-verify-form"},l.a.createElement(o.a.Item,{label:__("输入兑换码"),validateStatus:f?"error":"",help:f},l.a.createElement(a.a,{placeholder:__("输入兑换码"),onChange:function(e){return y(e.target.value)},value:d}))),l.a.createElement("div",{className:h.footer},l.a.createElement(i.a,{type:"primary","data-testid":"submit-btn",onClick:p,className:h.submitBtn},__("确定")),l.a.createElement(i.a,{onClick:b},__("取消")))))};E.propTypes={usage:f.a.string};t.a=E},,,function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(41),i=n(28),c=n(0),u=n(10),l=n.n(u),s=n(257),f=n(1333),d=n(303),p=n(405),m=n(1332),h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},y=(Object(d.a)("top","middle","bottom","stretch"),Object(d.a)("start","end","center","space-around","space-between"),c.forwardRef((function(e,t){var n,u=e.prefixCls,d=e.justify,y=e.align,v=e.className,b=e.style,g=e.children,_=e.gutter,w=void 0===_?0:_,E=e.wrap,O=h(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),x=c.useContext(s.b),j=x.getPrefixCls,k=x.direction,S=c.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),C=Object(i.a)(S,2),N=C[0],P=C[1],T=Object(m.a)(),A=c.useRef(w);c.useEffect((function(){var e=p.a.subscribe((function(e){var t=A.current||0;(!Array.isArray(t)&&"object"===Object(a.a)(t)||Array.isArray(t)&&("object"===Object(a.a)(t[0])||"object"===Object(a.a)(t[1])))&&P(e)}));return function(){return p.a.unsubscribe(e)}}),[]);var L,I=j("row",u),R=(L=[0,0],(Array.isArray(w)?w:[w,0]).forEach((function(e,t){if("object"===Object(a.a)(e))for(var n=0;n<p.b.length;n++){var r=p.b[n];if(N[r]&&void 0!==e[r]){L[t]=e[r];break}}else L[t]=e||0})),L),D=l()(I,(n={},Object(o.a)(n,"".concat(I,"-no-wrap"),!1===E),Object(o.a)(n,"".concat(I,"-").concat(d),d),Object(o.a)(n,"".concat(I,"-").concat(y),y),Object(o.a)(n,"".concat(I,"-rtl"),"rtl"===k),n),v),M={},F=R[0]>0?R[0]/-2:void 0,B=R[1]>0?R[1]/-2:void 0;if(F&&(M.marginLeft=F,M.marginRight=F),T){var U=Object(i.a)(R,2);M.rowGap=U[1]}else B&&(M.marginTop=B,M.marginBottom=B);var z=c.useMemo((function(){return{gutter:R,wrap:E,supportFlexGap:T}}),[R,E,T]);return c.createElement(f.a.Provider,{value:z},c.createElement("div",Object(r.default)({},O,{className:D,style:Object(r.default)(Object(r.default)({},M),b),ref:t}),g))})));y.displayName="Row",t.a=y},,function(e,t,n){"use strict";n(162),n(896),n(1446),n(1447)},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";n(162),n(903),n(583),n(1068),n(1301)},function(e,t,n){"use strict";n(162),n(903),n(326)},function(e,t,n){"use strict";n(162),n(698),n(501)},function(e,t,n){"use strict";n(162),n(423)},function(e,t,n){"use strict";n.r(t);n(50);var r=n(19),o=(n(60),n(24)),a=(n(345),n(145)),i=n(0),c=n.n(i),u=n(261),l=n(296),s=n(555),f=n.n(s),d=n(220),p=n.n(d),m=n(122),h=n(38),y=n(285),v=n(274),b=n(503),g=n(1075),_=(n(1250),n(920)),w=n(10),E=n.n(w),O=n(565),x={templateTree:"TemplateTree-module_templateTree_EaM86",treeIcon:"TemplateTree-module_treeIcon_Iy95n",creation:"TemplateTree-module_creation_SNQOH","creation-btn":"TemplateTree-module_creation-btn_7xPWM"},j=["className"];function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}function N(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var P=function(e){var t=e.className,n=N(e,j);return i.createElement("div",C({className:E()(x.creation,t)},n),i.createElement(r.a,{block:!0,type:"dashed",className:x.creationBtn},i.createElement(h.b,{name:"plus",width:16,style:{marginRight:8,verticalAlign:"middle"}}),i.createElement("span",{style:{verticalAlign:"middle"}},__("新建模板"))))},T=function(e){var t=e.treeData,n=e.onSelect,r=e.onAction,o=e.selectedKey,a=e.height,c=e.hasActions,u=e.titleRender,l=k(i.useState((function(){return t.filter((function(e){return Object(O.b)(e)})).map((function(e){return e.key}))})),2),s=l[0],f=l[1],d=void 0!==o?[o]:[],p=a-(c?38:0);return i.createElement(i.Fragment,null,i.createElement(_.a.DirectoryTree,{className:x.templateTree,blockNode:!0,switcherIcon:i.createElement(h.b,{name:"mini-dropdown",width:16,height:16,className:x.treeIcon}),itemHeight:38,height:p,virtual:!1,showIcon:!1,showLine:!1,autoExpandParent:!1,expandAction:"click",treeData:t,titleRender:u,expandedKeys:s,onExpand:function(e,t){var n=t.node;Object(O.b)(n)&&f(e)},selectedKeys:d,onSelect:function(e,t){var r=e[0],o=t.node;Object(O.a)(o)&&(null==n||n(r,o.id))}}),c&&i.createElement(P,{style:{height:38},onClick:function(){return null==r?void 0:r("create")}}))},A=n(684),L=n(2365),I=n(2357);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=function(e){var t=e.templateId,n=e.view,r=R(c.a.useState(),2),o=r[0],a=r[1];c.a.useEffect((function(){Object(y.l)(t).then((function(e){a(e)}))}),[t]);var i,u,l,s=n===A.a,f=!s;return null!=o&&o.id?c.a.createElement("div",(i={},u=A.b,l=!0,u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i),c.a.createElement(L.a,{templateName:o.name,doclet:o.doclet,isEmbedView:s,showDraftTip:f})):c.a.createElement(I.a,{style:{paddingTop:"50px",marginRight:"auto"}})},F="DocPreviewer-module_previewer_hqGVo",B="DocPreviewer-module_templatePreviewer_ZItob",U="DocPreviewer-module_emptyHolder_ZScSU",z="DocPreviewer-module_emptyTitle_qmAyx",G="DocPreviewer-module_emptyTip_zeYWx",V="DocPreviewer-module_emptyImg_vJAfG",Y=["templateId","className","onCreate","isReady"];function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var W=function(e){return i.createElement("div",{className:U},i.createElement("div",{className:z},__("创建自定义模板，规范创作格式")),i.createElement("div",{className:G},__("方式一：点击 {link}",{link:i.createElement("a",{onClick:e.onCreate},__("新建模板"))})),i.createElement("div",{className:G},__("方式二：打开已有文档，从 {moreIcon} 中选择 “另存为模板”",{moreIcon:i.createElement(h.b,{name:"more-circle",width:24})})),i.createElement("img",{className:V,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*NkVuRIMi5EoAAAAAAAAAAAAAARQnAQ",alt:"empty previewer"}))},K=i.memo((function(e){var t=e.templateId,n=e.className,r=e.onCreate,o=e.isReady,a=H(e,Y);if(!o)return null;var c=A.a;return i.createElement("div",q({className:E()(F,n),"data-template-id":t||0},a),"number"==typeof t?i.createElement("div",{className:B},i.createElement(M,{templateId:t,view:c})):i.createElement(W,{onCreate:r}))})),$=n(2124),Q=[{fieldKey:m.TEMPLATE_TYPE_MAP.OFFICIAL,description:__("推荐")},{fieldKey:m.TEMPLATE_TYPE_MAP.BOOK,description:__("本知识库"),can:function(e){return Object(y.a)(null==e?void 0:e.book)}},{fieldKey:m.TEMPLATE_TYPE_MAP.GROUP,description:__("团队"),can:function(e){return Object(y.b)(null==e?void 0:e.group)}},{fieldKey:m.TEMPLATE_TYPE_MAP.PERSONAL,description:__("我的")}];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne,re,oe,ae,ie="styles-module_templateCenter_nWehM",ce="styles-module_previewer_WyUa2",ue="styles-module_docPreviewer_7A0pQ",le="styles-module_operations_fzS4X",se="styles-module_header_lmrkY",fe="styles-module_title_yvutm",de="styles-module_body_N8IY-",pe="styles-module_tabs_eCZbD",me="styles-module_emptyHolder_gOnln",he="styles-module_emptyDesc_1Hvg9";function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function ve(){ve=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ye(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function be(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){be(a,r,o,i,c,"next",e)}function c(e){be(a,r,o,i,c,"throw",e)}i(void 0)}))}}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=a.a.TabPane,ke="--++--";function Se(e,t,n){return Array.isArray(e)&&e.length?(t!==m.TEMPLATE_TYPE_MAP.OFFICIAL||n?e:p()(e.map((function(e){return e.children||[]}))))[0]:null}var Ce=(xe(ne={},m.TEMPLATE_TYPE_MAP.BOOK,m.TYPE.BOOK),xe(ne,m.TEMPLATE_TYPE_MAP.GROUP,m.TYPE.GROUP),xe(ne,m.TEMPLATE_TYPE_MAP.PERSONAL,m.TYPE.PERSONAL),ne);function Ne(e){var t=e.isDesktop,n=e.locale,r=e.book,a=e.currentUser,c=e.onSelect,u=e.group,l=e.organization,s=e.format,d=i.useMemo((function(){var e;return void 0!==u?u:null===(e=window.appData)||void 0===e?void 0:e.group}),[u]),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ee(i.useState({data:[],meta:{},isReady:!1}),2),r=n[0],o=n[1],a=i.useCallback((function(){var n=J(J({},Object(y.m)(e.book,e.group)),{},{official_channel:m.OFFICIAL_TEMPLATE_CHANNEL.TEMPLATE_CENTER_CONFIG,format:e.format});return Object(y.j)(n,t).then((function(e){o(J(J({},e),{},{isReady:!0}))}))}),[e.book,e.group]);return i.useEffect((function(){a()}),[]),{state:r,load:a}}({book:r,group:d,organization:l,format:s},{isDesktop:t,locale:n}),_=h.state,w=h.load,E=Q.filter((function(e){return!e.can||e.can({book:r,group:d,organization_id:null==l?void 0:l.id})})),x=_e(i.useState(E[0].fieldKey),2),j=x[0],k=x[1],S=i.useMemo((function(){return!!s&&s!==m.TYPE_FORMAT_MAP.Doc}),[s]),C=i.useMemo((function(){return E.reduce((function(e,t){var n=t.fieldKey;return e[n]=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fieldKey,o=void 0===r?"official":r,a=n.listMode,i=e[o];if(!i)return[];var c=t.reduce((function(e,t){return e[t.id]=t,e}),{});if("official"===o){return a?f()(p()(i.map((function(e){return e.template_ids})))).map((function(e){var t=c[e];if(t)return Oe(Oe({},t),{},{title:t.name,key:e})})).filter(Boolean):i.map((function(e){return Oe(Oe({},e),{},{key:e.name,title:e.name,isDirectory:!0,children:e.template_ids.map((function(t){var n=c[t];if(n)return Oe(Oe({},n),{},{title:n.name,key:"".concat(e.name).concat(ke).concat(t)})})).filter(Boolean)})}))}var u=i;return Array.isArray(u.template_ids)?u.template_ids.map((function(e){var t=c[e];if(t)return Oe(Oe({},t),{},{key:e,title:t.name})})).filter(Boolean):[]}(_.meta,_.data,{fieldKey:n,listMode:S}),e}),{})}),[_.meta,_.data,S]),N=_e(i.useState({key:void 0,id:void 0}),2),P=N[0],T=N[1];var A=Object(g.a)(j);i.useEffect((function(){var e=C[A.current];if(!P.id&&e.length>0){var t=Se(e,A.current,S);T({id:null==t?void 0:t.id,key:null==t?void 0:t.key})}else{if(P.id){if(r=e,o=A.current,(a=P.id)?(o===m.TEMPLATE_TYPE_MAP.OFFICIAL?p()(r.map((function(e){return e.children||[]}))):r).find((function(e){return e.id===a})):null)return;var n=Se(e,A.current,S);T({id:null==n?void 0:n.id,key:null==n?void 0:n.key})}var r,o,a}}),[C]);var L=i.useRef(!1);i.useEffect((function(){function e(){"visible"===document.visibilityState&&L.current&&(w(),L.current=!1)}return document.addEventListener("visibilitychange",e,!0),function(){document.removeEventListener("visibilitychange",e,!0)}}),[]);var I=i.useCallback(ge(ve().mark((function e(){var t,n,o,i;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j!==m.TEMPLATE_TYPE_MAP.OFFICIAL){e.next=2;break}return e.abrupt("return");case 2:if(j===m.TEMPLATE_TYPE_MAP.BOOK?(t=null==r?void 0:r.id,n=m.TARGET_TYPE.BOOK):j===m.TEMPLATE_TYPE_MAP.PERSONAL?(t=null==a?void 0:a.id,n=m.TARGET_TYPE.USER):j===m.TEMPLATE_TYPE_MAP.GROUP&&(t=null==r?void 0:r.user_id,n=m.TARGET_TYPE.USER),!t||!n){e.next=11;break}return o=Ce[j],e.next=7,Object(y.f)(t,n,o,"Doc","未命名模板");case 7:i=e.sent,w(),L.current=!0,M(i.id);case 11:case"end":return e.stop()}}),e)}))),[j]);function R(e){if(e.id===(null==P?void 0:P.id)&&j!==m.TEMPLATE_TYPE_MAP.OFFICIAL){var t=C[j],n=t.findIndex((function(t){return t.key===e.key}));if(n>-1&&t.length>1){var r=n+1;r===t.length&&(r=n-1);var o=t[r];if(Object(O.a)(o))return void T({key:o.key,id:o.id})}T({key:void 0,id:void 0})}}function D(){return D=ge(ve().mark((function e(t){var n,r,a;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(O.a)(t)){e.next=9;break}return e.next=3,v.a.templates.v2.destroy({id:t.id});case 3:n=e.sent,R(t),w(),r="delete-template-".concat(t.id),a=function(){var e=ge(ve().mark((function e(){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.templates.v2.restore({id:t.id,recycleId:n.id});case 2:w(),o.a.destroy(r),o.a.success(__("模板已恢复"),5);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.a.success({key:r,content:i.createElement("span",{"data-testid":"template-revert-message"},__("删除模板成功！可在回收站中恢复"),i.createElement("a",{"data-testid":"template-revert-button",style:{marginLeft:8},onClick:a},__("撤销"))),duration:5});case 9:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var M=function(e){b.a.windowOpen("/r/templates/".concat(e,"/edit"))};return{activeTabKey:j,selectedNode:P,templateData:_,tabConfigs:E,templateDataDesc:C,handleTemplateNodeAction:function(e,t){switch(e){case"edit":!function(e){Object(O.a)(e)&&(L.current=!0,M(e.id))}(t);break;case"delete":!function(e){D.apply(this,arguments)}(t);break;case"create":I()}},handleTabActivate:function(e){k(e);var t=Se(C[e],e,S);T({key:null==t?void 0:t.key,id:null==t?void 0:t.id})},handleTemplateNodeSelect:function(e,t){T({key:e,id:t})},gotoEditTemplate:M,useTemplate:function(){if("number"==typeof(null==P?void 0:P.id)){var e=_.data.find((function(e){return(null==e?void 0:e.id)===(null==P?void 0:P.id)}));e&&c(e)}}}}var Pe=function(e){var t=e.treeData,n=e.height,r=e.selectedKey,o=e.onSelect,a=e.hasActions,c=e.onAction;return Array.isArray(t)&&t.length?i.createElement(T,{height:n,treeData:t,titleRender:function(e){return i.createElement($.b,{data:e,hasActions:a,onAction:c})},selectedKey:r,onSelect:o,hasActions:a,onAction:c}):i.createElement("div",{className:me,style:{height:n}},i.createElement("div",{className:he},i.createElement("img",{alt:"no available template",src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*z79cR7f48isAAAAAAAAAAAAAARQnAQ"}),i.createElement("div",null,__("暂无模板"))))},Te=function(e){var t,n,o,c=e.onClose,s=e.closable,f=e.height,d=Ne(e),p=_e(i.useState(0),2),y=p[0],v=p[1],b=y-32-60-32-32-37,g=i.useMemo((function(){var e=d.templateData.data.find((function(e){var t;return e.id===(null===(t=d.selectedNode)||void 0===t?void 0:t.id)}));return(null==e?void 0:e.updated_at)||""}),[d.templateData.data,null===(t=d.selectedNode)||void 0===t?void 0:t.id]),_=i.useMemo((function(){return i.createElement("button",{type:"button","aria-label":"Close",className:"ant-modal-close",onClick:c},i.createElement("span",{className:"ant-modal-close-x"},i.createElement(u.a,{width:14})))}),[c]);return i.createElement(l.a,{onResize:function(e){var t=e.height;t&&v(t)}},i.createElement("div",{className:ie,style:{height:f}},i.createElement("div",{className:ce},i.createElement(K,{key:g,className:ue,isReady:d.templateData.isReady,templateId:null===(n=d.selectedNode)||void 0===n?void 0:n.id,onCreate:function(){return d.handleTemplateNodeAction("create")}})),i.createElement("div",{className:le},i.createElement("div",{className:se},i.createElement("div",{className:fe},i.createElement(h.b,{width:22,name:"template-center"}),__("模板中心")),s&&_),i.createElement("div",{className:de},i.createElement(r.a,{block:!0,type:"primary",onClick:d.useTemplate,disabled:!(null!==(o=d.selectedNode)&&void 0!==o&&o.id),"data-aspm-click":"b4693.c100045.d207094"},__("使用此模板")),i.createElement("div",null,i.createElement(a.a,{className:pe,size:"small",activeKey:d.activeTabKey,onChange:d.handleTabActivate},d.tabConfigs.map((function(e){var t=e.fieldKey,n=d.templateDataDesc[t];return i.createElement(je,{tab:e.description,key:t},i.createElement(Pe,{key:t,treeData:n,height:b,selectedKey:d.selectedNode&&d.selectedNode.key,onSelect:d.handleTemplateNodeSelect,hasActions:d.activeTabKey!==m.TEMPLATE_TYPE_MAP.OFFICIAL,onAction:d.handleTemplateNodeAction}))}))))))))};Te.defaultProps={closable:!0,locale:null===(re=window.appData)||void 0===re?void 0:re.locale,currentUser:null===(oe=window.appData)||void 0===oe?void 0:oe.me,organization:null===(ae=window.appData)||void 0===ae?void 0:ae.organization};t.default=Te},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";n(162)},,function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c="index-module_pageTitle_Mb9jd",u="index-module_title_OhB9Q",l="index-module_extra_iB-Cn",s=function(e){var t=e.title,n=e.extra;return o.a.createElement("div",{className:c},o.a.createElement("h2",{className:u,"aria-level":"1"},t),n&&o.a.createElement("div",{className:l},n))};s.propTypes={title:i.a.node.isRequired,extra:i.a.node};t.a=s},,,,function(e,t,n){"use strict";var r=n(0);t.a=function(e){Object(r.useEffect)((function(){var t=window.appData.siteName||__("语雀");document.title="".concat(e," · ").concat(t)}),[e])}},function(e,t,n){"use strict";n.r(t);var r=n(235),o=n(988),a=n(511);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,c,u;return t=e,c=[{key:"previewImages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&e.length){var i=window.appData,c=i.isAlipayApp,u=i.isDingTalkMiniApp,l=i.isYuqueMobileApp,s=n(36),f=s.getImageBrowser,d=f();if(c)window.AlipayJSBridge.call("imageViewer",{images:e.map((function(e){return{u:e.src,t:e.msrc}})),init:t},(function(n){n.success||d.open(e,t)}));else if(u)window.dd.postMessage({name:"previewImage",params:{urls:e.map((function(e){return e.src})),current:t}});else if(l){var p=a.a.getMobileAppVersion();Object(o.compareVersion)(p,"0.3.2")?r.a.previewImage({images:e.map((function(e){return{url:e.src,thumbnailUrl:e.msrc,width:e.w,height:e.h}})),index:t}):d.open(e,t)}else d.open(e,t)}}}],c&&i(t.prototype,c),u&&i(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u=new c;t.default=u},function(e,t,n){(function(e,r){var o;(function(){var a,i="Expected a function",c="__lodash_hash_undefined__",u="__lodash_placeholder__",l=16,s=32,f=64,d=128,p=256,m=1/0,h=9007199254740991,y=NaN,v=4294967295,b=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",s],["partialRight",f],["rearg",p]],g="[object Arguments]",_="[object Array]",w="[object Boolean]",E="[object Date]",O="[object Error]",x="[object Function]",j="[object GeneratorFunction]",k="[object Map]",S="[object Number]",C="[object Object]",N="[object Promise]",P="[object RegExp]",T="[object Set]",A="[object String]",L="[object Symbol]",I="[object WeakMap]",R="[object ArrayBuffer]",D="[object DataView]",M="[object Float32Array]",F="[object Float64Array]",B="[object Int8Array]",U="[object Int16Array]",z="[object Int32Array]",G="[object Uint8Array]",V="[object Uint8ClampedArray]",Y="[object Uint16Array]",q="[object Uint32Array]",H=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,Q=/[&<>"']/g,X=RegExp($.source),J=RegExp(Q.source),Z=/<%-([\s\S]+?)%>/g,ee=/<%([\s\S]+?)%>/g,te=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/,oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(ae.source),ce=/^\s+/,ue=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,fe=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pe=/[()=,{}\[\]\/\s]/,me=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ye=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,be=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,Ee=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oe=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,je="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",Ne="\\ufe0e\\ufe0f",Pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="['’]",Ae="[\\ud800-\\udfff]",Le="["+Pe+"]",Ie="["+je+"]",Re="\\d+",De="[\\u2700-\\u27bf]",Me="["+Se+"]",Fe="[^\\ud800-\\udfff"+Pe+Re+ke+Se+Ce+"]",Be="\\ud83c[\\udffb-\\udfff]",Ue="[^\\ud800-\\udfff]",ze="(?:\\ud83c[\\udde6-\\uddff]){2}",Ge="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ce+"]",Ye="(?:"+Me+"|"+Fe+")",qe="(?:"+Ve+"|"+Fe+")",He="(?:['’](?:d|ll|m|re|s|t|ve))?",We="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Ie+"|"+Be+")"+"?",$e="[\\ufe0e\\ufe0f]?",Qe=$e+Ke+("(?:\\u200d(?:"+[Ue,ze,Ge].join("|")+")"+$e+Ke+")*"),Xe="(?:"+[De,ze,Ge].join("|")+")"+Qe,Je="(?:"+[Ue+Ie+"?",Ie,ze,Ge,Ae].join("|")+")",Ze=RegExp(Te,"g"),et=RegExp(Ie,"g"),tt=RegExp(Be+"(?="+Be+")|"+Je+Qe,"g"),nt=RegExp([Ve+"?"+Me+"+"+He+"(?="+[Le,Ve,"$"].join("|")+")",qe+"+"+We+"(?="+[Le,Ve+Ye,"$"].join("|")+")",Ve+"?"+Ye+"+"+He,Ve+"+"+We,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Xe].join("|"),"g"),rt=RegExp("[\\u200d\\ud800-\\udfff"+je+Ne+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ct={};ct[M]=ct[F]=ct[B]=ct[U]=ct[z]=ct[G]=ct[V]=ct[Y]=ct[q]=!0,ct[g]=ct[_]=ct[R]=ct[w]=ct[D]=ct[E]=ct[O]=ct[x]=ct[k]=ct[S]=ct[C]=ct[P]=ct[T]=ct[A]=ct[I]=!1;var ut={};ut[g]=ut[_]=ut[R]=ut[D]=ut[w]=ut[E]=ut[M]=ut[F]=ut[B]=ut[U]=ut[z]=ut[k]=ut[S]=ut[C]=ut[P]=ut[T]=ut[A]=ut[L]=ut[G]=ut[V]=ut[Y]=ut[q]=!0,ut[O]=ut[x]=ut[I]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ft=parseInt,dt="object"==typeof e&&e&&e.Object===Object&&e,pt="object"==typeof self&&self&&self.Object===Object&&self,mt=dt||pt||Function("return this")(),ht=t&&!t.nodeType&&t,yt=ht&&"object"==typeof r&&r&&!r.nodeType&&r,vt=yt&&yt.exports===ht,bt=vt&&dt.process,gt=function(){try{var e=yt&&yt.require&&yt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(t){}}(),_t=gt&&gt.isArrayBuffer,wt=gt&&gt.isDate,Et=gt&&gt.isMap,Ot=gt&&gt.isRegExp,xt=gt&&gt.isSet,jt=gt&&gt.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var o=-1,a=null==e?0:e.length;++o<a;){var i=e[o];t(r,i,n(i),e)}return r}function Ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Nt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Tt(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}function At(e,t){return!!(null==e?0:e.length)&&Gt(e,t,0)>-1}function Lt(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function It(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function Rt(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function Dt(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}function Mt(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function Ft(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=Ht("length");function Ut(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}function zt(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function Gt(e,t,n){return t==t?function(e,t,n){var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):zt(e,Yt,n)}function Vt(e,t,n,r){for(var o=n-1,a=e.length;++o<a;)if(r(e[o],t))return o;return-1}function Yt(e){return e!=e}function qt(e,t){var n=null==e?0:e.length;return n?$t(e,t)/n:y}function Ht(e){return function(t){return null==t?a:t[e]}}function Wt(e){return function(t){return null==e?a:e[t]}}function Kt(e,t,n,r,o){return o(e,(function(e,o,a){n=r?(r=!1,e):t(n,e,o,a)})),n}function $t(e,t){for(var n,r=-1,o=e.length;++r<o;){var i=t(e[r]);i!==a&&(n=n===a?i:n+i)}return n}function Qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Xt(e){return e?e.slice(0,yn(e)+1).replace(ce,""):e}function Jt(e){return function(t){return e(t)}}function Zt(e,t){return It(t,(function(t){return e[t]}))}function en(e,t){return e.has(t)}function tn(e,t){for(var n=-1,r=e.length;++n<r&&Gt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length;n--&&Gt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var on=Wt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),an=Wt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cn(e){return"\\"+lt[e]}function un(e){return rt.test(e)}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function sn(e,t){return function(n){return e(t(n))}}function fn(e,t){for(var n=-1,r=e.length,o=0,a=[];++n<r;){var i=e[n];i!==t&&i!==u||(e[n]=u,a[o++]=n)}return a}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function mn(e){return un(e)?function(e){var t=tt.lastIndex=0;for(;tt.test(e);)++t;return t}(e):Bt(e)}function hn(e){return un(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.split("")}(e)}function yn(e){for(var t=e.length;t--&&ue.test(e.charAt(t)););return t}var vn=Wt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var bn=function e(t){var n,r=(t=null==t?mt:bn.defaults(mt.Object(),t,bn.pick(mt,at))).Array,o=t.Date,ue=t.Error,je=t.Function,ke=t.Math,Se=t.Object,Ce=t.RegExp,Ne=t.String,Pe=t.TypeError,Te=r.prototype,Ae=je.prototype,Le=Se.prototype,Ie=t["__core-js_shared__"],Re=Ae.toString,De=Le.hasOwnProperty,Me=0,Fe=(n=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=Le.toString,Ue=Re.call(Se),ze=mt._,Ge=Ce("^"+Re.call(De).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=vt?t.Buffer:a,Ye=t.Symbol,qe=t.Uint8Array,He=Ve?Ve.allocUnsafe:a,We=sn(Se.getPrototypeOf,Se),Ke=Se.create,$e=Le.propertyIsEnumerable,Qe=Te.splice,Xe=Ye?Ye.isConcatSpreadable:a,Je=Ye?Ye.iterator:a,tt=Ye?Ye.toStringTag:a,rt=function(){try{var e=ma(Se,"defineProperty");return e({},"",{}),e}catch(t){}}(),lt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,dt=o&&o.now!==mt.Date.now&&o.now,pt=t.setTimeout!==mt.setTimeout&&t.setTimeout,ht=ke.ceil,yt=ke.floor,bt=Se.getOwnPropertySymbols,gt=Ve?Ve.isBuffer:a,Bt=t.isFinite,Wt=Te.join,gn=sn(Se.keys,Se),_n=ke.max,wn=ke.min,En=o.now,On=t.parseInt,xn=ke.random,jn=Te.reverse,kn=ma(t,"DataView"),Sn=ma(t,"Map"),Cn=ma(t,"Promise"),Nn=ma(t,"Set"),Pn=ma(t,"WeakMap"),Tn=ma(Se,"create"),An=Pn&&new Pn,Ln={},In=za(kn),Rn=za(Sn),Dn=za(Cn),Mn=za(Nn),Fn=za(Pn),Bn=Ye?Ye.prototype:a,Un=Bn?Bn.valueOf:a,zn=Bn?Bn.toString:a;function Gn(e){if(oc(e)&&!Wi(e)&&!(e instanceof Hn)){if(e instanceof qn)return e;if(De.call(e,"__wrapped__"))return Ga(e)}return new qn(e)}var Vn=function(){function e(){}return function(t){if(!rc(t))return{};if(Ke)return Ke(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function Yn(){}function qn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new $n;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new Kn(e);this.size=t.size}function Jn(e,t){var n=Wi(e),r=!n&&Hi(e),o=!n&&!r&&Xi(e),a=!n&&!r&&!o&&dc(e),i=n||r||o||a,c=i?Qt(e.length,Ne):[],u=c.length;for(var l in e)!t&&!De.call(e,l)||i&&("length"==l||o&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||wa(l,u))||c.push(l);return c}function Zn(e){var t=e.length;return t?e[Qr(0,t-1)]:a}function er(e,t){return Fa(Ao(e),lr(t,0,e.length))}function tr(e){return Fa(Ao(e))}function nr(e,t,n){(n!==a&&!Vi(e[t],n)||n===a&&!(t in e))&&cr(e,t,n)}function rr(e,t,n){var r=e[t];De.call(e,t)&&Vi(r,n)&&(n!==a||t in e)||cr(e,t,n)}function or(e,t){for(var n=e.length;n--;)if(Vi(e[n][0],t))return n;return-1}function ar(e,t,n,r){return mr(e,(function(e,o,a){t(r,e,n(e),a)})),r}function ir(e,t){return e&&Lo(t,Ic(t),e)}function cr(e,t,n){"__proto__"==t&&rt?rt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ur(e,t){for(var n=-1,o=t.length,i=r(o),c=null==e;++n<o;)i[n]=c?a:Nc(e,t[n]);return i}function lr(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function sr(e,t,n,r,o,i){var c,u=1&t,l=2&t,s=4&t;if(n&&(c=o?n(e,r,o,i):n(e)),c!==a)return c;if(!rc(e))return e;var f=Wi(e);if(f){if(c=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ao(e,c)}else{var d=va(e),p=d==x||d==j;if(Xi(e))return ko(e,u);if(d==C||d==g||p&&!o){if(c=l||p?{}:ga(e),!u)return l?function(e,t){return Lo(e,ya(e),t)}(e,function(e,t){return e&&Lo(t,Rc(t),e)}(c,e)):function(e,t){return Lo(e,ha(e),t)}(e,ir(c,e))}else{if(!ut[d])return o?e:{};c=function(e,t,n){var r=e.constructor;switch(t){case R:return So(e);case w:case E:return new r(+e);case D:return function(e,t){var n=t?So(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case M:case F:case B:case U:case z:case G:case V:case Y:case q:return Co(e,n);case k:return new r;case S:case A:return new r(e);case P:return function(e){var t=new e.constructor(e.source,ye.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new r;case L:return o=e,Un?Se(Un.call(o)):{}}var o}(e,d,u)}}i||(i=new Xn);var m=i.get(e);if(m)return m;i.set(e,c),lc(e)?e.forEach((function(r){c.add(sr(r,t,n,r,e,i))})):ac(e)&&e.forEach((function(r,o){c.set(o,sr(r,t,n,o,e,i))}));var h=f?a:(s?l?ca:ia:l?Rc:Ic)(e);return Ct(h||e,(function(r,o){h&&(r=e[o=r]),rr(c,o,sr(r,t,n,o,e,i))})),c}function fr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Se(e);r--;){var o=n[r],i=t[o],c=e[o];if(c===a&&!(o in e)||!i(c))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new Pe(i);return Ia((function(){e.apply(a,n)}),t)}function pr(e,t,n,r){var o=-1,a=At,i=!0,c=e.length,u=[],l=t.length;if(!c)return u;n&&(t=It(t,Jt(n))),r?(a=Lt,i=!1):t.length>=200&&(a=en,i=!1,t=new Qn(t));e:for(;++o<c;){var s=e[o],f=null==n?s:n(s);if(s=r||0!==s?s:0,i&&f==f){for(var d=l;d--;)if(t[d]===f)continue e;u.push(s)}else a(t,f,r)||u.push(s)}return u}Gn.templateSettings={escape:Z,evaluate:ee,interpolate:te,variable:"",imports:{_:Gn}},Gn.prototype=Yn.prototype,Gn.prototype.constructor=Gn,qn.prototype=Vn(Yn.prototype),qn.prototype.constructor=qn,Hn.prototype=Vn(Yn.prototype),Hn.prototype.constructor=Hn,Wn.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(Tn){var n=t[e];return n===c?a:n}return De.call(t,e)?t[e]:a},Wn.prototype.has=function(e){var t=this.__data__;return Tn?t[e]!==a:De.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tn&&t===a?c:t,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=or(t,e);return!(n<0)&&(n==t.length-1?t.pop():Qe.call(t,n,1),--this.size,!0)},Kn.prototype.get=function(e){var t=this.__data__,n=or(t,e);return n<0?a:t[n][1]},Kn.prototype.has=function(e){return or(this.__data__,e)>-1},Kn.prototype.set=function(e,t){var n=this.__data__,r=or(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},$n.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Sn||Kn),string:new Wn}},$n.prototype.delete=function(e){var t=da(this,e).delete(e);return this.size-=t?1:0,t},$n.prototype.get=function(e){return da(this,e).get(e)},$n.prototype.has=function(e){return da(this,e).has(e)},$n.prototype.set=function(e,t){var n=da(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Qn.prototype.add=Qn.prototype.push=function(e){return this.__data__.set(e,c),this},Qn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $n(r)}return n.set(e,t),this.size=n.size,this};var mr=Do(Er),hr=Do(Or,!0);function yr(e,t){var n=!0;return mr(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function vr(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],c=t(i);if(null!=c&&(u===a?c==c&&!fc(c):n(c,u)))var u=c,l=i}return l}function br(e,t){var n=[];return mr(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function gr(e,t,n,r,o){var a=-1,i=e.length;for(n||(n=_a),o||(o=[]);++a<i;){var c=e[a];t>0&&n(c)?t>1?gr(c,t-1,n,r,o):Rt(o,c):r||(o[o.length]=c)}return o}var _r=Mo(),wr=Mo(!0);function Er(e,t){return e&&_r(e,t,Ic)}function Or(e,t){return e&&wr(e,t,Ic)}function xr(e,t){return Tt(t,(function(t){return ec(e[t])}))}function jr(e,t){for(var n=0,r=(t=Eo(t,e)).length;null!=e&&n<r;)e=e[Ua(t[n++])];return n&&n==r?e:a}function kr(e,t,n){var r=t(e);return Wi(e)?r:Rt(r,n(e))}function Sr(e){return null==e?e===a?"[object Undefined]":"[object Null]":tt&&tt in Se(e)?function(e){var t=De.call(e,tt),n=e[tt];try{e[tt]=a;var r=!0}catch(i){}var o=Be.call(e);r&&(t?e[tt]=n:delete e[tt]);return o}(e):function(e){return Be.call(e)}(e)}function Cr(e,t){return e>t}function Nr(e,t){return null!=e&&De.call(e,t)}function Pr(e,t){return null!=e&&t in Se(e)}function Tr(e,t,n){for(var o=n?Lt:At,i=e[0].length,c=e.length,u=c,l=r(c),s=1/0,f=[];u--;){var d=e[u];u&&t&&(d=It(d,Jt(t))),s=wn(d.length,s),l[u]=!n&&(t||i>=120&&d.length>=120)?new Qn(u&&d):a}d=e[0];var p=-1,m=l[0];e:for(;++p<i&&f.length<s;){var h=d[p],y=t?t(h):h;if(h=n||0!==h?h:0,!(m?en(m,y):o(f,y,n))){for(u=c;--u;){var v=l[u];if(!(v?en(v,y):o(e[u],y,n)))continue e}m&&m.push(y),f.push(h)}}return f}function Ar(e,t,n){var r=null==(e=Pa(e,t=Eo(t,e)))?e:e[Ua(Za(t))];return null==r?a:kt(r,e,n)}function Lr(e){return oc(e)&&Sr(e)==g}function Ir(e,t,n,r,o){return e===t||(null==e||null==t||!oc(e)&&!oc(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var c=Wi(e),u=Wi(t),l=c?_:va(e),s=u?_:va(t),f=(l=l==g?C:l)==C,d=(s=s==g?C:s)==C,p=l==s;if(p&&Xi(e)){if(!Xi(t))return!1;c=!0,f=!1}if(p&&!f)return i||(i=new Xn),c||dc(e)?oa(e,t,n,r,o,i):function(e,t,n,r,o,a,i){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!a(new qe(e),new qe(t)));case w:case E:case S:return Vi(+e,+t);case O:return e.name==t.name&&e.message==t.message;case P:case A:return e==t+"";case k:var c=ln;case T:var u=1&r;if(c||(c=dn),e.size!=t.size&&!u)return!1;var l=i.get(e);if(l)return l==t;r|=2,i.set(e,t);var s=oa(c(e),c(t),r,o,a,i);return i.delete(e),s;case L:if(Un)return Un.call(e)==Un.call(t)}return!1}(e,t,l,n,r,o,i);if(!(1&n)){var m=f&&De.call(e,"__wrapped__"),h=d&&De.call(t,"__wrapped__");if(m||h){var y=m?e.value():e,v=h?t.value():t;return i||(i=new Xn),o(y,v,n,r,i)}}if(!p)return!1;return i||(i=new Xn),function(e,t,n,r,o,i){var c=1&n,u=ia(e),l=u.length,s=ia(t).length;if(l!=s&&!c)return!1;var f=l;for(;f--;){var d=u[f];if(!(c?d in t:De.call(t,d)))return!1}var p=i.get(e),m=i.get(t);if(p&&m)return p==t&&m==e;var h=!0;i.set(e,t),i.set(t,e);var y=c;for(;++f<l;){var v=e[d=u[f]],b=t[d];if(r)var g=c?r(b,v,d,t,e,i):r(v,b,d,e,t,i);if(!(g===a?v===b||o(v,b,n,r,i):g)){h=!1;break}y||(y="constructor"==d)}if(h&&!y){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,n,r,o,i)}(e,t,n,r,Ir,o))}function Rr(e,t,n,r){var o=n.length,i=o,c=!r;if(null==e)return!i;for(e=Se(e);o--;){var u=n[o];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<i;){var l=(u=n[o])[0],s=e[l],f=u[1];if(c&&u[2]){if(s===a&&!(l in e))return!1}else{var d=new Xn;if(r)var p=r(s,f,l,e,t,d);if(!(p===a?Ir(f,s,3,r,d):p))return!1}}return!0}function Dr(e){return!(!rc(e)||(t=e,Fe&&Fe in t))&&(ec(e)?Ge:ge).test(za(e));var t}function Mr(e){return"function"==typeof e?e:null==e?iu:"object"==typeof e?Wi(e)?Vr(e[0],e[1]):Gr(e):hu(e)}function Fr(e){if(!ka(e))return gn(e);var t=[];for(var n in Se(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Br(e){if(!rc(e))return function(e){var t=[];if(null!=e)for(var n in Se(e))t.push(n);return t}(e);var t=ka(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}function Ur(e,t){return e<t}function zr(e,t){var n=-1,o=$i(e)?r(e.length):[];return mr(e,(function(e,r,a){o[++n]=t(e,r,a)})),o}function Gr(e){var t=pa(e);return 1==t.length&&t[0][2]?Ca(t[0][0],t[0][1]):function(n){return n===e||Rr(n,e,t)}}function Vr(e,t){return Oa(e)&&Sa(t)?Ca(Ua(e),t):function(n){var r=Nc(n,e);return r===a&&r===t?Pc(n,e):Ir(t,r,3)}}function Yr(e,t,n,r,o){e!==t&&_r(t,(function(i,c){if(o||(o=new Xn),rc(i))!function(e,t,n,r,o,i,c){var u=Aa(e,n),l=Aa(t,n),s=c.get(l);if(s)return void nr(e,n,s);var f=i?i(u,l,n+"",e,t,c):a,d=f===a;if(d){var p=Wi(l),m=!p&&Xi(l),h=!p&&!m&&dc(l);f=l,p||m||h?Wi(u)?f=u:Qi(u)?f=Ao(u):m?(d=!1,f=ko(l,!0)):h?(d=!1,f=Co(l,!0)):f=[]:cc(l)||Hi(l)?(f=u,Hi(u)?f=_c(u):rc(u)&&!ec(u)||(f=ga(l))):d=!1}d&&(c.set(l,f),o(f,l,r,i,c),c.delete(l));nr(e,n,f)}(e,t,c,n,Yr,r,o);else{var u=r?r(Aa(e,c),i,c+"",e,t,o):a;u===a&&(u=i),nr(e,c,u)}}),Rc)}function qr(e,t){var n=e.length;if(n)return wa(t+=t<0?n:0,n)?e[t]:a}function Hr(e,t,n){t=t.length?It(t,(function(e){return Wi(e)?function(t){return jr(t,1===e.length?e[0]:e)}:e})):[iu];var r=-1;t=It(t,Jt(fa()));var o=zr(e,(function(e,n,o){var a=It(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(o,(function(e,t){return function(e,t,n){var r=-1,o=e.criteria,a=t.criteria,i=o.length,c=n.length;for(;++r<i;){var u=No(o[r],a[r]);if(u)return r>=c?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,o=t.length,a={};++r<o;){var i=t[r],c=jr(e,i);n(c,i)&&to(a,Eo(i,e),c)}return a}function Kr(e,t,n,r){var o=r?Vt:Gt,a=-1,i=t.length,c=e;for(e===t&&(t=Ao(t)),n&&(c=It(e,Jt(n)));++a<i;)for(var u=0,l=t[a],s=n?n(l):l;(u=o(c,s,u,r))>-1;)c!==e&&Qe.call(c,u,1),Qe.call(e,u,1);return e}function $r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==a){var a=o;wa(o)?Qe.call(e,o,1):mo(e,o)}}return e}function Qr(e,t){return e+yt(xn()*(t-e+1))}function Xr(e,t){var n="";if(!e||t<1||t>h)return n;do{t%2&&(n+=e),(t=yt(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return Ra(Na(e,t,iu),e+"")}function Zr(e){return Zn(Vc(e))}function eo(e,t){var n=Vc(e);return Fa(n,lr(t,0,n.length))}function to(e,t,n,r){if(!rc(e))return e;for(var o=-1,i=(t=Eo(t,e)).length,c=i-1,u=e;null!=u&&++o<i;){var l=Ua(t[o]),s=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=c){var f=u[l];(s=r?r(f,l,u):a)===a&&(s=rc(f)?f:wa(t[o+1])?[]:{})}rr(u,l,s),u=u[l]}return e}var no=An?function(e,t){return An.set(e,t),e}:iu,ro=rt?function(e,t){return rt(e,"toString",{configurable:!0,enumerable:!1,value:ru(t),writable:!0})}:iu;function oo(e){return Fa(Vc(e))}function ao(e,t,n){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=r(a);++o<a;)i[o]=e[o+t];return i}function io(e,t){var n;return mr(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}function co(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var a=r+o>>>1,i=e[a];null!==i&&!fc(i)&&(n?i<=t:i<t)?r=a+1:o=a}return o}return uo(e,t,iu,n)}function uo(e,t,n,r){var o=0,i=null==e?0:e.length;if(0===i)return 0;for(var c=(t=n(t))!=t,u=null===t,l=fc(t),s=t===a;o<i;){var f=yt((o+i)/2),d=n(e[f]),p=d!==a,m=null===d,h=d==d,y=fc(d);if(c)var v=r||h;else v=s?h&&(r||p):u?h&&p&&(r||!m):l?h&&p&&!m&&(r||!y):!m&&!y&&(r?d<=t:d<t);v?o=f+1:i=f}return wn(i,4294967294)}function lo(e,t){for(var n=-1,r=e.length,o=0,a=[];++n<r;){var i=e[n],c=t?t(i):i;if(!n||!Vi(c,u)){var u=c;a[o++]=0===i?0:i}}return a}function so(e){return"number"==typeof e?e:fc(e)?y:+e}function fo(e){if("string"==typeof e)return e;if(Wi(e))return It(e,fo)+"";if(fc(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function po(e,t,n){var r=-1,o=At,a=e.length,i=!0,c=[],u=c;if(n)i=!1,o=Lt;else if(a>=200){var l=t?null:Jo(e);if(l)return dn(l);i=!1,o=en,u=new Qn}else u=t?[]:c;e:for(;++r<a;){var s=e[r],f=t?t(s):s;if(s=n||0!==s?s:0,i&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),c.push(s)}else o(u,f,n)||(u!==c&&u.push(f),c.push(s))}return c}function mo(e,t){return null==(e=Pa(e,t=Eo(t,e)))||delete e[Ua(Za(t))]}function ho(e,t,n,r){return to(e,t,n(jr(e,t)),r)}function yo(e,t,n,r){for(var o=e.length,a=r?o:-1;(r?a--:++a<o)&&t(e[a],a,e););return n?ao(e,r?0:a,r?a+1:o):ao(e,r?a+1:0,r?o:a)}function vo(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Dt(t,(function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))}),n)}function bo(e,t,n){var o=e.length;if(o<2)return o?po(e[0]):[];for(var a=-1,i=r(o);++a<o;)for(var c=e[a],u=-1;++u<o;)u!=a&&(i[a]=pr(i[a]||c,e[u],t,n));return po(gr(i,1),t,n)}function go(e,t,n){for(var r=-1,o=e.length,i=t.length,c={};++r<o;){var u=r<i?t[r]:a;n(c,e[r],u)}return c}function _o(e){return Qi(e)?e:[]}function wo(e){return"function"==typeof e?e:iu}function Eo(e,t){return Wi(e)?e:Oa(e,t)?[e]:Ba(wc(e))}var Oo=Jr;function xo(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:ao(e,t,n)}var jo=lt||function(e){return mt.clearTimeout(e)};function ko(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function So(e){var t=new e.constructor(e.byteLength);return new qe(t).set(new qe(e)),t}function Co(e,t){var n=t?So(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function No(e,t){if(e!==t){var n=e!==a,r=null===e,o=e==e,i=fc(e),c=t!==a,u=null===t,l=t==t,s=fc(t);if(!u&&!s&&!i&&e>t||i&&c&&l&&!u&&!s||r&&c&&l||!n&&l||!o)return 1;if(!r&&!i&&!s&&e<t||s&&n&&o&&!r&&!i||u&&n&&o||!c&&o||!l)return-1}return 0}function Po(e,t,n,o){for(var a=-1,i=e.length,c=n.length,u=-1,l=t.length,s=_n(i-c,0),f=r(l+s),d=!o;++u<l;)f[u]=t[u];for(;++a<c;)(d||a<i)&&(f[n[a]]=e[a]);for(;s--;)f[u++]=e[a++];return f}function To(e,t,n,o){for(var a=-1,i=e.length,c=-1,u=n.length,l=-1,s=t.length,f=_n(i-u,0),d=r(f+s),p=!o;++a<f;)d[a]=e[a];for(var m=a;++l<s;)d[m+l]=t[l];for(;++c<u;)(p||a<i)&&(d[m+n[c]]=e[a++]);return d}function Ao(e,t){var n=-1,o=e.length;for(t||(t=r(o));++n<o;)t[n]=e[n];return t}function Lo(e,t,n,r){var o=!n;n||(n={});for(var i=-1,c=t.length;++i<c;){var u=t[i],l=r?r(n[u],e[u],u,n,e):a;l===a&&(l=e[u]),o?cr(n,u,l):rr(n,u,l)}return n}function Io(e,t){return function(n,r){var o=Wi(n)?St:ar,a=t?t():{};return o(n,e,fa(r,2),a)}}function Ro(e){return Jr((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:a,c=o>2?n[2]:a;for(i=e.length>3&&"function"==typeof i?(o--,i):a,c&&Ea(n[0],n[1],c)&&(i=o<3?a:i,o=1),t=Se(t);++r<o;){var u=n[r];u&&e(t,u,r,i)}return t}))}function Do(e,t){return function(n,r){if(null==n)return n;if(!$i(n))return e(n,r);for(var o=n.length,a=t?o:-1,i=Se(n);(t?a--:++a<o)&&!1!==r(i[a],a,i););return n}}function Mo(e){return function(t,n,r){for(var o=-1,a=Se(t),i=r(t),c=i.length;c--;){var u=i[e?c:++o];if(!1===n(a[u],u,a))break}return t}}function Fo(e){return function(t){var n=un(t=wc(t))?hn(t):a,r=n?n[0]:t.charAt(0),o=n?xo(n,1).join(""):t.slice(1);return r[e]()+o}}function Bo(e){return function(t){return Dt(eu(Hc(t).replace(Ze,"")),e,"")}}function Uo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return rc(r)?r:n}}function zo(e){return function(t,n,r){var o=Se(t);if(!$i(t)){var i=fa(n,3);t=Ic(t),n=function(e){return i(o[e],e,o)}}var c=e(t,n,r);return c>-1?o[i?t[c]:c]:a}}function Go(e){return aa((function(t){var n=t.length,r=n,o=qn.prototype.thru;for(e&&t.reverse();r--;){var c=t[r];if("function"!=typeof c)throw new Pe(i);if(o&&!u&&"wrapper"==la(c))var u=new qn([],!0)}for(r=u?r:n;++r<n;){var l=la(c=t[r]),s="wrapper"==l?ua(c):a;u=s&&xa(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?u[la(s[0])].apply(u,s[3]):1==c.length&&xa(c)?u[l]():u.thru(c)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Wi(r))return u.plant(r).value();for(var o=0,a=n?t[o].apply(this,e):r;++o<n;)a=t[o].call(this,a);return a}}))}function Vo(e,t,n,o,i,c,u,l,s,f){var p=t&d,m=1&t,h=2&t,y=24&t,v=512&t,b=h?a:Uo(e);return function a(){for(var d=arguments.length,g=r(d),_=d;_--;)g[_]=arguments[_];if(y)var w=sa(a),E=rn(g,w);if(o&&(g=Po(g,o,i,y)),c&&(g=To(g,c,u,y)),d-=E,y&&d<f){var O=fn(g,w);return Qo(e,t,Vo,a.placeholder,n,g,O,l,s,f-d)}var x=m?n:this,j=h?x[e]:e;return d=g.length,l?g=Ta(g,l):v&&d>1&&g.reverse(),p&&s<d&&(g.length=s),this&&this!==mt&&this instanceof a&&(j=b||Uo(j)),j.apply(x,g)}}function Yo(e,t){return function(n,r){return function(e,t,n,r){return Er(e,(function(e,o,a){t(r,n(e),o,a)})),r}(n,e,t(r),{})}}function qo(e,t){return function(n,r){var o;if(n===a&&r===a)return t;if(n!==a&&(o=n),r!==a){if(o===a)return r;"string"==typeof n||"string"==typeof r?(n=fo(n),r=fo(r)):(n=so(n),r=so(r)),o=e(n,r)}return o}}function Ho(e){return aa((function(t){return t=It(t,Jt(fa())),Jr((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function Wo(e,t){var n=(t=t===a?" ":fo(t)).length;if(n<2)return n?Xr(t,e):t;var r=Xr(t,ht(e/mn(t)));return un(t)?xo(hn(r),0,e).join(""):r.slice(0,e)}function Ko(e){return function(t,n,o){return o&&"number"!=typeof o&&Ea(t,n,o)&&(n=o=a),t=yc(t),n===a?(n=t,t=0):n=yc(n),function(e,t,n,o){for(var a=-1,i=_n(ht((t-e)/(n||1)),0),c=r(i);i--;)c[o?i:++a]=e,e+=n;return c}(t,n,o=o===a?t<n?1:-1:yc(o),e)}}function $o(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gc(t),n=gc(n)),e(t,n)}}function Qo(e,t,n,r,o,i,c,u,l,d){var p=8&t;t|=p?s:f,4&(t&=~(p?f:s))||(t&=-4);var m=[e,t,o,p?i:a,p?c:a,p?a:i,p?a:c,u,l,d],h=n.apply(a,m);return xa(e)&&La(h,m),h.placeholder=r,Da(h,e,t)}function Xo(e){var t=ke[e];return function(e,n){if(e=gc(e),(n=null==n?0:wn(vc(n),292))&&Bt(e)){var r=(wc(e)+"e").split("e");return+((r=(wc(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Jo=Nn&&1/dn(new Nn([,-0]))[1]==m?function(e){return new Nn(e)}:fu;function Zo(e){return function(t){var n=va(t);return n==k?ln(t):n==T?pn(t):function(e,t){return It(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function ea(e,t,n,o,c,m,h,y){var v=2&t;if(!v&&"function"!=typeof e)throw new Pe(i);var b=o?o.length:0;if(b||(t&=-97,o=c=a),h=h===a?h:_n(vc(h),0),y=y===a?y:vc(y),b-=c?c.length:0,t&f){var g=o,_=c;o=c=a}var w=v?a:ua(e),E=[e,t,n,o,c,g,_,m,h,y];if(w&&function(e,t){var n=e[1],r=t[1],o=n|r,a=o<131,i=r==d&&8==n||r==d&&n==p&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!i)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Po(l,c,t[4]):c,e[4]=l?fn(e[3],u):t[4]}(c=t[5])&&(l=e[5],e[5]=l?To(l,c,t[6]):c,e[6]=l?fn(e[5],u):t[6]);(c=t[7])&&(e[7]=c);r&d&&(e[8]=null==e[8]?t[8]:wn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(E,w),e=E[0],t=E[1],n=E[2],o=E[3],c=E[4],!(y=E[9]=E[9]===a?v?0:e.length:_n(E[9]-b,0))&&24&t&&(t&=-25),t&&1!=t)O=8==t||t==l?function(e,t,n){var o=Uo(e);return function i(){for(var c=arguments.length,u=r(c),l=c,s=sa(i);l--;)u[l]=arguments[l];var f=c<3&&u[0]!==s&&u[c-1]!==s?[]:fn(u,s);return(c-=f.length)<n?Qo(e,t,Vo,i.placeholder,a,u,f,a,a,n-c):kt(this&&this!==mt&&this instanceof i?o:e,this,u)}}(e,t,y):t!=s&&33!=t||c.length?Vo.apply(a,E):function(e,t,n,o){var a=1&t,i=Uo(e);return function t(){for(var c=-1,u=arguments.length,l=-1,s=o.length,f=r(s+u),d=this&&this!==mt&&this instanceof t?i:e;++l<s;)f[l]=o[l];for(;u--;)f[l++]=arguments[++c];return kt(d,a?n:this,f)}}(e,t,n,o);else var O=function(e,t,n){var r=1&t,o=Uo(e);return function t(){return(this&&this!==mt&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return Da((w?no:La)(O,E),e,t)}function ta(e,t,n,r){return e===a||Vi(e,Le[n])&&!De.call(r,n)?t:e}function na(e,t,n,r,o,i){return rc(e)&&rc(t)&&(i.set(t,e),Yr(e,t,a,na,i),i.delete(t)),e}function ra(e){return cc(e)?a:e}function oa(e,t,n,r,o,i){var c=1&n,u=e.length,l=t.length;if(u!=l&&!(c&&l>u))return!1;var s=i.get(e),f=i.get(t);if(s&&f)return s==t&&f==e;var d=-1,p=!0,m=2&n?new Qn:a;for(i.set(e,t),i.set(t,e);++d<u;){var h=e[d],y=t[d];if(r)var v=c?r(y,h,d,t,e,i):r(h,y,d,e,t,i);if(v!==a){if(v)continue;p=!1;break}if(m){if(!Ft(t,(function(e,t){if(!en(m,t)&&(h===e||o(h,e,n,r,i)))return m.push(t)}))){p=!1;break}}else if(h!==y&&!o(h,y,n,r,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function aa(e){return Ra(Na(e,a,Ka),e+"")}function ia(e){return kr(e,Ic,ha)}function ca(e){return kr(e,Rc,ya)}var ua=An?function(e){return An.get(e)}:fu;function la(e){for(var t=e.name+"",n=Ln[t],r=De.call(Ln,t)?n.length:0;r--;){var o=n[r],a=o.func;if(null==a||a==e)return o.name}return t}function sa(e){return(De.call(Gn,"placeholder")?Gn:e).placeholder}function fa(){var e=Gn.iteratee||cu;return e=e===cu?Mr:e,arguments.length?e(arguments[0],arguments[1]):e}function da(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function pa(e){for(var t=Ic(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Sa(o)]}return t}function ma(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return Dr(n)?n:a}var ha=bt?function(e){return null==e?[]:(e=Se(e),Tt(bt(e),(function(t){return $e.call(e,t)})))}:bu,ya=bt?function(e){for(var t=[];e;)Rt(t,ha(e)),e=We(e);return t}:bu,va=Sr;function ba(e,t,n){for(var r=-1,o=(t=Eo(t,e)).length,a=!1;++r<o;){var i=Ua(t[r]);if(!(a=null!=e&&n(e,i)))break;e=e[i]}return a||++r!=o?a:!!(o=null==e?0:e.length)&&nc(o)&&wa(i,o)&&(Wi(e)||Hi(e))}function ga(e){return"function"!=typeof e.constructor||ka(e)?{}:Vn(We(e))}function _a(e){return Wi(e)||Hi(e)||!!(Xe&&e&&e[Xe])}function wa(e,t){var n=typeof e;return!!(t=null==t?h:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function Ea(e,t,n){if(!rc(n))return!1;var r=typeof t;return!!("number"==r?$i(n)&&wa(t,n.length):"string"==r&&t in n)&&Vi(n[t],e)}function Oa(e,t){if(Wi(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!fc(e))||(re.test(e)||!ne.test(e)||null!=t&&e in Se(t))}function xa(e){var t=la(e),n=Gn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=ua(n);return!!r&&e===r[0]}(kn&&va(new kn(new ArrayBuffer(1)))!=D||Sn&&va(new Sn)!=k||Cn&&va(Cn.resolve())!=N||Nn&&va(new Nn)!=T||Pn&&va(new Pn)!=I)&&(va=function(e){var t=Sr(e),n=t==C?e.constructor:a,r=n?za(n):"";if(r)switch(r){case In:return D;case Rn:return k;case Dn:return N;case Mn:return T;case Fn:return I}return t});var ja=Ie?ec:gu;function ka(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Sa(e){return e==e&&!rc(e)}function Ca(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==a||e in Se(n)))}}function Na(e,t,n){return t=_n(t===a?e.length-1:t,0),function(){for(var o=arguments,a=-1,i=_n(o.length-t,0),c=r(i);++a<i;)c[a]=o[t+a];a=-1;for(var u=r(t+1);++a<t;)u[a]=o[a];return u[t]=n(c),kt(e,this,u)}}function Pa(e,t){return t.length<2?e:jr(e,ao(t,0,-1))}function Ta(e,t){for(var n=e.length,r=wn(t.length,n),o=Ao(e);r--;){var i=t[r];e[r]=wa(i,n)?o[i]:a}return e}function Aa(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var La=Ma(no),Ia=pt||function(e,t){return mt.setTimeout(e,t)},Ra=Ma(ro);function Da(e,t,n){var r=t+"";return Ra(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ct(b,(function(n){var r="_."+n[0];t&n[1]&&!At(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(se);return t?t[1].split(fe):[]}(r),n)))}function Ma(e){var t=0,n=0;return function(){var r=En(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Fa(e,t){var n=-1,r=e.length,o=r-1;for(t=t===a?r:t;++n<t;){var i=Qr(n,o),c=e[i];e[i]=e[n],e[n]=c}return e.length=t,e}var Ba=function(e){var t=Mi(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(oe,(function(e,n,r,o){t.push(r?o.replace(me,"$1"):n||e)})),t}));function Ua(e){if("string"==typeof e||fc(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function za(e){if(null!=e){try{return Re.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ga(e){if(e instanceof Hn)return e.clone();var t=new qn(e.__wrapped__,e.__chain__);return t.__actions__=Ao(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Va=Jr((function(e,t){return Qi(e)?pr(e,gr(t,1,Qi,!0)):[]})),Ya=Jr((function(e,t){var n=Za(t);return Qi(n)&&(n=a),Qi(e)?pr(e,gr(t,1,Qi,!0),fa(n,2)):[]})),qa=Jr((function(e,t){var n=Za(t);return Qi(n)&&(n=a),Qi(e)?pr(e,gr(t,1,Qi,!0),a,n):[]}));function Ha(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:vc(n);return o<0&&(o=_n(r+o,0)),zt(e,fa(t,3),o)}function Wa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==a&&(o=vc(n),o=n<0?_n(r+o,0):wn(o,r-1)),zt(e,fa(t,3),o,!0)}function Ka(e){return(null==e?0:e.length)?gr(e,1):[]}function $a(e){return e&&e.length?e[0]:a}var Qa=Jr((function(e){var t=It(e,_o);return t.length&&t[0]===e[0]?Tr(t):[]})),Xa=Jr((function(e){var t=Za(e),n=It(e,_o);return t===Za(n)?t=a:n.pop(),n.length&&n[0]===e[0]?Tr(n,fa(t,2)):[]})),Ja=Jr((function(e){var t=Za(e),n=It(e,_o);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?Tr(n,a,t):[]}));function Za(e){var t=null==e?0:e.length;return t?e[t-1]:a}var ei=Jr(ti);function ti(e,t){return e&&e.length&&t&&t.length?Kr(e,t):e}var ni=aa((function(e,t){var n=null==e?0:e.length,r=ur(e,t);return $r(e,It(t,(function(e){return wa(e,n)?+e:e})).sort(No)),r}));function ri(e){return null==e?e:jn.call(e)}var oi=Jr((function(e){return po(gr(e,1,Qi,!0))})),ai=Jr((function(e){var t=Za(e);return Qi(t)&&(t=a),po(gr(e,1,Qi,!0),fa(t,2))})),ii=Jr((function(e){var t=Za(e);return t="function"==typeof t?t:a,po(gr(e,1,Qi,!0),a,t)}));function ci(e){if(!e||!e.length)return[];var t=0;return e=Tt(e,(function(e){if(Qi(e))return t=_n(e.length,t),!0})),Qt(t,(function(t){return It(e,Ht(t))}))}function ui(e,t){if(!e||!e.length)return[];var n=ci(e);return null==t?n:It(n,(function(e){return kt(t,a,e)}))}var li=Jr((function(e,t){return Qi(e)?pr(e,t):[]})),si=Jr((function(e){return bo(Tt(e,Qi))})),fi=Jr((function(e){var t=Za(e);return Qi(t)&&(t=a),bo(Tt(e,Qi),fa(t,2))})),di=Jr((function(e){var t=Za(e);return t="function"==typeof t?t:a,bo(Tt(e,Qi),a,t)})),pi=Jr(ci);var mi=Jr((function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,ui(e,n)}));function hi(e){var t=Gn(e);return t.__chain__=!0,t}function yi(e,t){return t(e)}var vi=aa((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return ur(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Hn&&wa(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:yi,args:[o],thisArg:a}),new qn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(o)}));var bi=Io((function(e,t,n){De.call(e,n)?++e[n]:cr(e,n,1)}));var gi=zo(Ha),_i=zo(Wa);function wi(e,t){return(Wi(e)?Ct:mr)(e,fa(t,3))}function Ei(e,t){return(Wi(e)?Nt:hr)(e,fa(t,3))}var Oi=Io((function(e,t,n){De.call(e,n)?e[n].push(t):cr(e,n,[t])}));var xi=Jr((function(e,t,n){var o=-1,a="function"==typeof t,i=$i(e)?r(e.length):[];return mr(e,(function(e){i[++o]=a?kt(t,e,n):Ar(e,t,n)})),i})),ji=Io((function(e,t,n){cr(e,n,t)}));function ki(e,t){return(Wi(e)?It:zr)(e,fa(t,3))}var Si=Io((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ci=Jr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ea(e,t[0],t[1])?t=[]:n>2&&Ea(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,gr(t,1),[])})),Ni=dt||function(){return mt.Date.now()};function Pi(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,ea(e,d,a,a,a,a,t)}function Ti(e,t){var n;if("function"!=typeof t)throw new Pe(i);return e=vc(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var Ai=Jr((function(e,t,n){var r=1;if(n.length){var o=fn(n,sa(Ai));r|=s}return ea(e,r,t,n,o)})),Li=Jr((function(e,t,n){var r=3;if(n.length){var o=fn(n,sa(Li));r|=s}return ea(t,r,e,n,o)}));function Ii(e,t,n){var r,o,c,u,l,s,f=0,d=!1,p=!1,m=!0;if("function"!=typeof e)throw new Pe(i);function h(t){var n=r,i=o;return r=o=a,f=t,u=e.apply(i,n)}function y(e){return f=e,l=Ia(b,t),d?h(e):u}function v(e){var n=e-s;return s===a||n>=t||n<0||p&&e-f>=c}function b(){var e=Ni();if(v(e))return g(e);l=Ia(b,function(e){var n=t-(e-s);return p?wn(n,c-(e-f)):n}(e))}function g(e){return l=a,m&&r?h(e):(r=o=a,u)}function _(){var e=Ni(),n=v(e);if(r=arguments,o=this,s=e,n){if(l===a)return y(s);if(p)return jo(l),l=Ia(b,t),h(s)}return l===a&&(l=Ia(b,t)),u}return t=gc(t)||0,rc(n)&&(d=!!n.leading,c=(p="maxWait"in n)?_n(gc(n.maxWait)||0,t):c,m="trailing"in n?!!n.trailing:m),_.cancel=function(){l!==a&&jo(l),f=0,r=s=o=l=a},_.flush=function(){return l===a?u:g(Ni())},_}var Ri=Jr((function(e,t){return dr(e,1,t)})),Di=Jr((function(e,t,n){return dr(e,gc(t)||0,n)}));function Mi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=e.apply(this,r);return n.cache=a.set(o,i)||a,i};return n.cache=new(Mi.Cache||$n),n}function Fi(e){if("function"!=typeof e)throw new Pe(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Mi.Cache=$n;var Bi=Oo((function(e,t){var n=(t=1==t.length&&Wi(t[0])?It(t[0],Jt(fa())):It(gr(t,1),Jt(fa()))).length;return Jr((function(r){for(var o=-1,a=wn(r.length,n);++o<a;)r[o]=t[o].call(this,r[o]);return kt(e,this,r)}))})),Ui=Jr((function(e,t){var n=fn(t,sa(Ui));return ea(e,s,a,t,n)})),zi=Jr((function(e,t){var n=fn(t,sa(zi));return ea(e,f,a,t,n)})),Gi=aa((function(e,t){return ea(e,p,a,a,a,t)}));function Vi(e,t){return e===t||e!=e&&t!=t}var Yi=$o(Cr),qi=$o((function(e,t){return e>=t})),Hi=Lr(function(){return arguments}())?Lr:function(e){return oc(e)&&De.call(e,"callee")&&!$e.call(e,"callee")},Wi=r.isArray,Ki=_t?Jt(_t):function(e){return oc(e)&&Sr(e)==R};function $i(e){return null!=e&&nc(e.length)&&!ec(e)}function Qi(e){return oc(e)&&$i(e)}var Xi=gt||gu,Ji=wt?Jt(wt):function(e){return oc(e)&&Sr(e)==E};function Zi(e){if(!oc(e))return!1;var t=Sr(e);return t==O||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!cc(e)}function ec(e){if(!rc(e))return!1;var t=Sr(e);return t==x||t==j||"[object AsyncFunction]"==t||"[object Proxy]"==t}function tc(e){return"number"==typeof e&&e==vc(e)}function nc(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function rc(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function oc(e){return null!=e&&"object"==typeof e}var ac=Et?Jt(Et):function(e){return oc(e)&&va(e)==k};function ic(e){return"number"==typeof e||oc(e)&&Sr(e)==S}function cc(e){if(!oc(e)||Sr(e)!=C)return!1;var t=We(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Ue}var uc=Ot?Jt(Ot):function(e){return oc(e)&&Sr(e)==P};var lc=xt?Jt(xt):function(e){return oc(e)&&va(e)==T};function sc(e){return"string"==typeof e||!Wi(e)&&oc(e)&&Sr(e)==A}function fc(e){return"symbol"==typeof e||oc(e)&&Sr(e)==L}var dc=jt?Jt(jt):function(e){return oc(e)&&nc(e.length)&&!!ct[Sr(e)]};var pc=$o(Ur),mc=$o((function(e,t){return e<=t}));function hc(e){if(!e)return[];if($i(e))return sc(e)?hn(e):Ao(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=va(e);return(t==k?ln:t==T?dn:Vc)(e)}function yc(e){return e?(e=gc(e))===m||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vc(e){var t=yc(e),n=t%1;return t==t?n?t-n:t:0}function bc(e){return e?lr(vc(e),0,v):0}function gc(e){if("number"==typeof e)return e;if(fc(e))return y;if(rc(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=rc(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=be.test(e);return n||_e.test(e)?ft(e.slice(2),n?2:8):ve.test(e)?y:+e}function _c(e){return Lo(e,Rc(e))}function wc(e){return null==e?"":fo(e)}var Ec=Ro((function(e,t){if(ka(t)||$i(t))Lo(t,Ic(t),e);else for(var n in t)De.call(t,n)&&rr(e,n,t[n])})),Oc=Ro((function(e,t){Lo(t,Rc(t),e)})),xc=Ro((function(e,t,n,r){Lo(t,Rc(t),e,r)})),jc=Ro((function(e,t,n,r){Lo(t,Ic(t),e,r)})),kc=aa(ur);var Sc=Jr((function(e,t){e=Se(e);var n=-1,r=t.length,o=r>2?t[2]:a;for(o&&Ea(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],c=Rc(i),u=-1,l=c.length;++u<l;){var s=c[u],f=e[s];(f===a||Vi(f,Le[s])&&!De.call(e,s))&&(e[s]=i[s])}return e})),Cc=Jr((function(e){return e.push(a,na),kt(Mc,a,e)}));function Nc(e,t,n){var r=null==e?a:jr(e,t);return r===a?n:r}function Pc(e,t){return null!=e&&ba(e,t,Pr)}var Tc=Yo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),ru(iu)),Ac=Yo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),fa),Lc=Jr(Ar);function Ic(e){return $i(e)?Jn(e):Fr(e)}function Rc(e){return $i(e)?Jn(e,!0):Br(e)}var Dc=Ro((function(e,t,n){Yr(e,t,n)})),Mc=Ro((function(e,t,n,r){Yr(e,t,n,r)})),Fc=aa((function(e,t){var n={};if(null==e)return n;var r=!1;t=It(t,(function(t){return t=Eo(t,e),r||(r=t.length>1),t})),Lo(e,ca(e),n),r&&(n=sr(n,7,ra));for(var o=t.length;o--;)mo(n,t[o]);return n}));var Bc=aa((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return Pc(e,n)}))}(e,t)}));function Uc(e,t){if(null==e)return{};var n=It(ca(e),(function(e){return[e]}));return t=fa(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var zc=Zo(Ic),Gc=Zo(Rc);function Vc(e){return null==e?[]:Zt(e,Ic(e))}var Yc=Bo((function(e,t,n){return t=t.toLowerCase(),e+(n?qc(t):t)}));function qc(e){return Zc(wc(e).toLowerCase())}function Hc(e){return(e=wc(e))&&e.replace(Ee,on).replace(et,"")}var Wc=Bo((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Kc=Bo((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),$c=Fo("toLowerCase");var Qc=Bo((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xc=Bo((function(e,t,n){return e+(n?" ":"")+Zc(t)}));var Jc=Bo((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zc=Fo("toUpperCase");function eu(e,t,n){return e=wc(e),(t=n?a:t)===a?function(e){return ot.test(e)}(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var tu=Jr((function(e,t){try{return kt(e,a,t)}catch(n){return Zi(n)?n:new ue(n)}})),nu=aa((function(e,t){return Ct(t,(function(t){t=Ua(t),cr(e,t,Ai(e[t],e))})),e}));function ru(e){return function(){return e}}var ou=Go(),au=Go(!0);function iu(e){return e}function cu(e){return Mr("function"==typeof e?e:sr(e,1))}var uu=Jr((function(e,t){return function(n){return Ar(n,e,t)}})),lu=Jr((function(e,t){return function(n){return Ar(e,n,t)}}));function su(e,t,n){var r=Ic(t),o=xr(t,r);null!=n||rc(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=xr(t,Ic(t)));var a=!(rc(n)&&"chain"in n&&!n.chain),i=ec(e);return Ct(o,(function(n){var r=t[n];e[n]=r,i&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),o=n.__actions__=Ao(this.__actions__);return o.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})})),e}function fu(){}var du=Ho(It),pu=Ho(Pt),mu=Ho(Ft);function hu(e){return Oa(e)?Ht(Ua(e)):function(e){return function(t){return jr(t,e)}}(e)}var yu=Ko(),vu=Ko(!0);function bu(){return[]}function gu(){return!1}var _u=qo((function(e,t){return e+t}),0),wu=Xo("ceil"),Eu=qo((function(e,t){return e/t}),1),Ou=Xo("floor");var xu,ju=qo((function(e,t){return e*t}),1),ku=Xo("round"),Su=qo((function(e,t){return e-t}),0);return Gn.after=function(e,t){if("function"!=typeof t)throw new Pe(i);return e=vc(e),function(){if(--e<1)return t.apply(this,arguments)}},Gn.ary=Pi,Gn.assign=Ec,Gn.assignIn=Oc,Gn.assignInWith=xc,Gn.assignWith=jc,Gn.at=kc,Gn.before=Ti,Gn.bind=Ai,Gn.bindAll=nu,Gn.bindKey=Li,Gn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wi(e)?e:[e]},Gn.chain=hi,Gn.chunk=function(e,t,n){t=(n?Ea(e,t,n):t===a)?1:_n(vc(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,c=0,u=r(ht(o/t));i<o;)u[c++]=ao(e,i,i+=t);return u},Gn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var a=e[t];a&&(o[r++]=a)}return o},Gn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Rt(Wi(n)?Ao(n):[n],gr(t,1))},Gn.cond=function(e){var t=null==e?0:e.length,n=fa();return e=t?It(e,(function(e){if("function"!=typeof e[1])throw new Pe(i);return[n(e[0]),e[1]]})):[],Jr((function(n){for(var r=-1;++r<t;){var o=e[r];if(kt(o[0],this,n))return kt(o[1],this,n)}}))},Gn.conforms=function(e){return function(e){var t=Ic(e);return function(n){return fr(n,e,t)}}(sr(e,1))},Gn.constant=ru,Gn.countBy=bi,Gn.create=function(e,t){var n=Vn(e);return null==t?n:ir(n,t)},Gn.curry=function e(t,n,r){var o=ea(t,8,a,a,a,a,a,n=r?a:n);return o.placeholder=e.placeholder,o},Gn.curryRight=function e(t,n,r){var o=ea(t,l,a,a,a,a,a,n=r?a:n);return o.placeholder=e.placeholder,o},Gn.debounce=Ii,Gn.defaults=Sc,Gn.defaultsDeep=Cc,Gn.defer=Ri,Gn.delay=Di,Gn.difference=Va,Gn.differenceBy=Ya,Gn.differenceWith=qa,Gn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ao(e,(t=n||t===a?1:vc(t))<0?0:t,r):[]},Gn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ao(e,0,(t=r-(t=n||t===a?1:vc(t)))<0?0:t):[]},Gn.dropRightWhile=function(e,t){return e&&e.length?yo(e,fa(t,3),!0,!0):[]},Gn.dropWhile=function(e,t){return e&&e.length?yo(e,fa(t,3),!0):[]},Gn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&Ea(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=vc(n))<0&&(n=-n>o?0:o+n),(r=r===a||r>o?o:vc(r))<0&&(r+=o),r=n>r?0:bc(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Gn.filter=function(e,t){return(Wi(e)?Tt:br)(e,fa(t,3))},Gn.flatMap=function(e,t){return gr(ki(e,t),1)},Gn.flatMapDeep=function(e,t){return gr(ki(e,t),m)},Gn.flatMapDepth=function(e,t,n){return n=n===a?1:vc(n),gr(ki(e,t),n)},Gn.flatten=Ka,Gn.flattenDeep=function(e){return(null==e?0:e.length)?gr(e,m):[]},Gn.flattenDepth=function(e,t){return(null==e?0:e.length)?gr(e,t=t===a?1:vc(t)):[]},Gn.flip=function(e){return ea(e,512)},Gn.flow=ou,Gn.flowRight=au,Gn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},Gn.functions=function(e){return null==e?[]:xr(e,Ic(e))},Gn.functionsIn=function(e){return null==e?[]:xr(e,Rc(e))},Gn.groupBy=Oi,Gn.initial=function(e){return(null==e?0:e.length)?ao(e,0,-1):[]},Gn.intersection=Qa,Gn.intersectionBy=Xa,Gn.intersectionWith=Ja,Gn.invert=Tc,Gn.invertBy=Ac,Gn.invokeMap=xi,Gn.iteratee=cu,Gn.keyBy=ji,Gn.keys=Ic,Gn.keysIn=Rc,Gn.map=ki,Gn.mapKeys=function(e,t){var n={};return t=fa(t,3),Er(e,(function(e,r,o){cr(n,t(e,r,o),e)})),n},Gn.mapValues=function(e,t){var n={};return t=fa(t,3),Er(e,(function(e,r,o){cr(n,r,t(e,r,o))})),n},Gn.matches=function(e){return Gr(sr(e,1))},Gn.matchesProperty=function(e,t){return Vr(e,sr(t,1))},Gn.memoize=Mi,Gn.merge=Dc,Gn.mergeWith=Mc,Gn.method=uu,Gn.methodOf=lu,Gn.mixin=su,Gn.negate=Fi,Gn.nthArg=function(e){return e=vc(e),Jr((function(t){return qr(t,e)}))},Gn.omit=Fc,Gn.omitBy=function(e,t){return Uc(e,Fi(fa(t)))},Gn.once=function(e){return Ti(2,e)},Gn.orderBy=function(e,t,n,r){return null==e?[]:(Wi(t)||(t=null==t?[]:[t]),Wi(n=r?a:n)||(n=null==n?[]:[n]),Hr(e,t,n))},Gn.over=du,Gn.overArgs=Bi,Gn.overEvery=pu,Gn.overSome=mu,Gn.partial=Ui,Gn.partialRight=zi,Gn.partition=Si,Gn.pick=Bc,Gn.pickBy=Uc,Gn.property=hu,Gn.propertyOf=function(e){return function(t){return null==e?a:jr(e,t)}},Gn.pull=ei,Gn.pullAll=ti,Gn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,fa(n,2)):e},Gn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,a,n):e},Gn.pullAt=ni,Gn.range=yu,Gn.rangeRight=vu,Gn.rearg=Gi,Gn.reject=function(e,t){return(Wi(e)?Tt:br)(e,Fi(fa(t,3)))},Gn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],a=e.length;for(t=fa(t,3);++r<a;){var i=e[r];t(i,r,e)&&(n.push(i),o.push(r))}return $r(e,o),n},Gn.rest=function(e,t){if("function"!=typeof e)throw new Pe(i);return Jr(e,t=t===a?t:vc(t))},Gn.reverse=ri,Gn.sampleSize=function(e,t,n){return t=(n?Ea(e,t,n):t===a)?1:vc(t),(Wi(e)?er:eo)(e,t)},Gn.set=function(e,t,n){return null==e?e:to(e,t,n)},Gn.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:to(e,t,n,r)},Gn.shuffle=function(e){return(Wi(e)?tr:oo)(e)},Gn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Ea(e,t,n)?(t=0,n=r):(t=null==t?0:vc(t),n=n===a?r:vc(n)),ao(e,t,n)):[]},Gn.sortBy=Ci,Gn.sortedUniq=function(e){return e&&e.length?lo(e):[]},Gn.sortedUniqBy=function(e,t){return e&&e.length?lo(e,fa(t,2)):[]},Gn.split=function(e,t,n){return n&&"number"!=typeof n&&Ea(e,t,n)&&(t=n=a),(n=n===a?v:n>>>0)?(e=wc(e))&&("string"==typeof t||null!=t&&!uc(t))&&!(t=fo(t))&&un(e)?xo(hn(e),0,n):e.split(t,n):[]},Gn.spread=function(e,t){if("function"!=typeof e)throw new Pe(i);return t=null==t?0:_n(vc(t),0),Jr((function(n){var r=n[t],o=xo(n,0,t);return r&&Rt(o,r),kt(e,this,o)}))},Gn.tail=function(e){var t=null==e?0:e.length;return t?ao(e,1,t):[]},Gn.take=function(e,t,n){return e&&e.length?ao(e,0,(t=n||t===a?1:vc(t))<0?0:t):[]},Gn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ao(e,(t=r-(t=n||t===a?1:vc(t)))<0?0:t,r):[]},Gn.takeRightWhile=function(e,t){return e&&e.length?yo(e,fa(t,3),!1,!0):[]},Gn.takeWhile=function(e,t){return e&&e.length?yo(e,fa(t,3)):[]},Gn.tap=function(e,t){return t(e),e},Gn.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new Pe(i);return rc(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Ii(e,t,{leading:r,maxWait:t,trailing:o})},Gn.thru=yi,Gn.toArray=hc,Gn.toPairs=zc,Gn.toPairsIn=Gc,Gn.toPath=function(e){return Wi(e)?It(e,Ua):fc(e)?[e]:Ao(Ba(wc(e)))},Gn.toPlainObject=_c,Gn.transform=function(e,t,n){var r=Wi(e),o=r||Xi(e)||dc(e);if(t=fa(t,4),null==n){var a=e&&e.constructor;n=o?r?new a:[]:rc(e)&&ec(a)?Vn(We(e)):{}}return(o?Ct:Er)(e,(function(e,r,o){return t(n,e,r,o)})),n},Gn.unary=function(e){return Pi(e,1)},Gn.union=oi,Gn.unionBy=ai,Gn.unionWith=ii,Gn.uniq=function(e){return e&&e.length?po(e):[]},Gn.uniqBy=function(e,t){return e&&e.length?po(e,fa(t,2)):[]},Gn.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?po(e,a,t):[]},Gn.unset=function(e,t){return null==e||mo(e,t)},Gn.unzip=ci,Gn.unzipWith=ui,Gn.update=function(e,t,n){return null==e?e:ho(e,t,wo(n))},Gn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ho(e,t,wo(n),r)},Gn.values=Vc,Gn.valuesIn=function(e){return null==e?[]:Zt(e,Rc(e))},Gn.without=li,Gn.words=eu,Gn.wrap=function(e,t){return Ui(wo(t),e)},Gn.xor=si,Gn.xorBy=fi,Gn.xorWith=di,Gn.zip=pi,Gn.zipObject=function(e,t){return go(e||[],t||[],rr)},Gn.zipObjectDeep=function(e,t){return go(e||[],t||[],to)},Gn.zipWith=mi,Gn.entries=zc,Gn.entriesIn=Gc,Gn.extend=Oc,Gn.extendWith=xc,su(Gn,Gn),Gn.add=_u,Gn.attempt=tu,Gn.camelCase=Yc,Gn.capitalize=qc,Gn.ceil=wu,Gn.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=gc(n))==n?n:0),t!==a&&(t=(t=gc(t))==t?t:0),lr(gc(e),t,n)},Gn.clone=function(e){return sr(e,4)},Gn.cloneDeep=function(e){return sr(e,5)},Gn.cloneDeepWith=function(e,t){return sr(e,5,t="function"==typeof t?t:a)},Gn.cloneWith=function(e,t){return sr(e,4,t="function"==typeof t?t:a)},Gn.conformsTo=function(e,t){return null==t||fr(e,t,Ic(t))},Gn.deburr=Hc,Gn.defaultTo=function(e,t){return null==e||e!=e?t:e},Gn.divide=Eu,Gn.endsWith=function(e,t,n){e=wc(e),t=fo(t);var r=e.length,o=n=n===a?r:lr(vc(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Gn.eq=Vi,Gn.escape=function(e){return(e=wc(e))&&J.test(e)?e.replace(Q,an):e},Gn.escapeRegExp=function(e){return(e=wc(e))&&ie.test(e)?e.replace(ae,"\\$&"):e},Gn.every=function(e,t,n){var r=Wi(e)?Pt:yr;return n&&Ea(e,t,n)&&(t=a),r(e,fa(t,3))},Gn.find=gi,Gn.findIndex=Ha,Gn.findKey=function(e,t){return Ut(e,fa(t,3),Er)},Gn.findLast=_i,Gn.findLastIndex=Wa,Gn.findLastKey=function(e,t){return Ut(e,fa(t,3),Or)},Gn.floor=Ou,Gn.forEach=wi,Gn.forEachRight=Ei,Gn.forIn=function(e,t){return null==e?e:_r(e,fa(t,3),Rc)},Gn.forInRight=function(e,t){return null==e?e:wr(e,fa(t,3),Rc)},Gn.forOwn=function(e,t){return e&&Er(e,fa(t,3))},Gn.forOwnRight=function(e,t){return e&&Or(e,fa(t,3))},Gn.get=Nc,Gn.gt=Yi,Gn.gte=qi,Gn.has=function(e,t){return null!=e&&ba(e,t,Nr)},Gn.hasIn=Pc,Gn.head=$a,Gn.identity=iu,Gn.includes=function(e,t,n,r){e=$i(e)?e:Vc(e),n=n&&!r?vc(n):0;var o=e.length;return n<0&&(n=_n(o+n,0)),sc(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Gt(e,t,n)>-1},Gn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:vc(n);return o<0&&(o=_n(r+o,0)),Gt(e,t,o)},Gn.inRange=function(e,t,n){return t=yc(t),n===a?(n=t,t=0):n=yc(n),function(e,t,n){return e>=wn(t,n)&&e<_n(t,n)}(e=gc(e),t,n)},Gn.invoke=Lc,Gn.isArguments=Hi,Gn.isArray=Wi,Gn.isArrayBuffer=Ki,Gn.isArrayLike=$i,Gn.isArrayLikeObject=Qi,Gn.isBoolean=function(e){return!0===e||!1===e||oc(e)&&Sr(e)==w},Gn.isBuffer=Xi,Gn.isDate=Ji,Gn.isElement=function(e){return oc(e)&&1===e.nodeType&&!cc(e)},Gn.isEmpty=function(e){if(null==e)return!0;if($i(e)&&(Wi(e)||"string"==typeof e||"function"==typeof e.splice||Xi(e)||dc(e)||Hi(e)))return!e.length;var t=va(e);if(t==k||t==T)return!e.size;if(ka(e))return!Fr(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},Gn.isEqual=function(e,t){return Ir(e,t)},Gn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?Ir(e,t,a,n):!!r},Gn.isError=Zi,Gn.isFinite=function(e){return"number"==typeof e&&Bt(e)},Gn.isFunction=ec,Gn.isInteger=tc,Gn.isLength=nc,Gn.isMap=ac,Gn.isMatch=function(e,t){return e===t||Rr(e,t,pa(t))},Gn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,Rr(e,t,pa(t),n)},Gn.isNaN=function(e){return ic(e)&&e!=+e},Gn.isNative=function(e){if(ja(e))throw new ue("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},Gn.isNil=function(e){return null==e},Gn.isNull=function(e){return null===e},Gn.isNumber=ic,Gn.isObject=rc,Gn.isObjectLike=oc,Gn.isPlainObject=cc,Gn.isRegExp=uc,Gn.isSafeInteger=function(e){return tc(e)&&e>=-9007199254740991&&e<=h},Gn.isSet=lc,Gn.isString=sc,Gn.isSymbol=fc,Gn.isTypedArray=dc,Gn.isUndefined=function(e){return e===a},Gn.isWeakMap=function(e){return oc(e)&&va(e)==I},Gn.isWeakSet=function(e){return oc(e)&&"[object WeakSet]"==Sr(e)},Gn.join=function(e,t){return null==e?"":Wt.call(e,t)},Gn.kebabCase=Wc,Gn.last=Za,Gn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==a&&(o=(o=vc(n))<0?_n(r+o,0):wn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):zt(e,Yt,o,!0)},Gn.lowerCase=Kc,Gn.lowerFirst=$c,Gn.lt=pc,Gn.lte=mc,Gn.max=function(e){return e&&e.length?vr(e,iu,Cr):a},Gn.maxBy=function(e,t){return e&&e.length?vr(e,fa(t,2),Cr):a},Gn.mean=function(e){return qt(e,iu)},Gn.meanBy=function(e,t){return qt(e,fa(t,2))},Gn.min=function(e){return e&&e.length?vr(e,iu,Ur):a},Gn.minBy=function(e,t){return e&&e.length?vr(e,fa(t,2),Ur):a},Gn.stubArray=bu,Gn.stubFalse=gu,Gn.stubObject=function(){return{}},Gn.stubString=function(){return""},Gn.stubTrue=function(){return!0},Gn.multiply=ju,Gn.nth=function(e,t){return e&&e.length?qr(e,vc(t)):a},Gn.noConflict=function(){return mt._===this&&(mt._=ze),this},Gn.noop=fu,Gn.now=Ni,Gn.pad=function(e,t,n){e=wc(e);var r=(t=vc(t))?mn(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Wo(yt(o),n)+e+Wo(ht(o),n)},Gn.padEnd=function(e,t,n){e=wc(e);var r=(t=vc(t))?mn(e):0;return t&&r<t?e+Wo(t-r,n):e},Gn.padStart=function(e,t,n){e=wc(e);var r=(t=vc(t))?mn(e):0;return t&&r<t?Wo(t-r,n)+e:e},Gn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),On(wc(e).replace(ce,""),t||0)},Gn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Ea(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=yc(e),t===a?(t=e,e=0):t=yc(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=xn();return wn(e+o*(t-e+st("1e-"+((o+"").length-1))),t)}return Qr(e,t)},Gn.reduce=function(e,t,n){var r=Wi(e)?Dt:Kt,o=arguments.length<3;return r(e,fa(t,4),n,o,mr)},Gn.reduceRight=function(e,t,n){var r=Wi(e)?Mt:Kt,o=arguments.length<3;return r(e,fa(t,4),n,o,hr)},Gn.repeat=function(e,t,n){return t=(n?Ea(e,t,n):t===a)?1:vc(t),Xr(wc(e),t)},Gn.replace=function(){var e=arguments,t=wc(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Gn.result=function(e,t,n){var r=-1,o=(t=Eo(t,e)).length;for(o||(o=1,e=a);++r<o;){var i=null==e?a:e[Ua(t[r])];i===a&&(r=o,i=n),e=ec(i)?i.call(e):i}return e},Gn.round=ku,Gn.runInContext=e,Gn.sample=function(e){return(Wi(e)?Zn:Zr)(e)},Gn.size=function(e){if(null==e)return 0;if($i(e))return sc(e)?mn(e):e.length;var t=va(e);return t==k||t==T?e.size:Fr(e).length},Gn.snakeCase=Qc,Gn.some=function(e,t,n){var r=Wi(e)?Ft:io;return n&&Ea(e,t,n)&&(t=a),r(e,fa(t,3))},Gn.sortedIndex=function(e,t){return co(e,t)},Gn.sortedIndexBy=function(e,t,n){return uo(e,t,fa(n,2))},Gn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=co(e,t);if(r<n&&Vi(e[r],t))return r}return-1},Gn.sortedLastIndex=function(e,t){return co(e,t,!0)},Gn.sortedLastIndexBy=function(e,t,n){return uo(e,t,fa(n,2),!0)},Gn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=co(e,t,!0)-1;if(Vi(e[n],t))return n}return-1},Gn.startCase=Xc,Gn.startsWith=function(e,t,n){return e=wc(e),n=null==n?0:lr(vc(n),0,e.length),t=fo(t),e.slice(n,n+t.length)==t},Gn.subtract=Su,Gn.sum=function(e){return e&&e.length?$t(e,iu):0},Gn.sumBy=function(e,t){return e&&e.length?$t(e,fa(t,2)):0},Gn.template=function(e,t,n){var r=Gn.templateSettings;n&&Ea(e,t,n)&&(t=a),e=wc(e),t=xc({},t,r,ta);var o,i,c=xc({},t.imports,r.imports,ta),u=Ic(c),l=Zt(c,u),s=0,f=t.interpolate||Oe,d="__p += '",p=Ce((t.escape||Oe).source+"|"+f.source+"|"+(f===te?he:Oe).source+"|"+(t.evaluate||Oe).source+"|$","g"),m="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(p,(function(t,n,r,a,c,u){return r||(r=a),d+=e.slice(s,u).replace(xe,cn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),c&&(i=!0,d+="';\n"+c+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=u+t.length,t})),d+="';\n";var h=De.call(t,"variable")&&t.variable;if(h){if(pe.test(h))throw new ue("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(H,""):d).replace(W,"$1").replace(K,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=tu((function(){return je(u,m+"return "+d).apply(a,l)}));if(y.source=d,Zi(y))throw y;return y},Gn.times=function(e,t){if((e=vc(e))<1||e>h)return[];var n=v,r=wn(e,v);t=fa(t),e-=v;for(var o=Qt(r,t);++n<e;)t(n);return o},Gn.toFinite=yc,Gn.toInteger=vc,Gn.toLength=bc,Gn.toLower=function(e){return wc(e).toLowerCase()},Gn.toNumber=gc,Gn.toSafeInteger=function(e){return e?lr(vc(e),-9007199254740991,h):0===e?e:0},Gn.toString=wc,Gn.toUpper=function(e){return wc(e).toUpperCase()},Gn.trim=function(e,t,n){if((e=wc(e))&&(n||t===a))return Xt(e);if(!e||!(t=fo(t)))return e;var r=hn(e),o=hn(t);return xo(r,tn(r,o),nn(r,o)+1).join("")},Gn.trimEnd=function(e,t,n){if((e=wc(e))&&(n||t===a))return e.slice(0,yn(e)+1);if(!e||!(t=fo(t)))return e;var r=hn(e);return xo(r,0,nn(r,hn(t))+1).join("")},Gn.trimStart=function(e,t,n){if((e=wc(e))&&(n||t===a))return e.replace(ce,"");if(!e||!(t=fo(t)))return e;var r=hn(e);return xo(r,tn(r,hn(t))).join("")},Gn.truncate=function(e,t){var n=30,r="...";if(rc(t)){var o="separator"in t?t.separator:o;n="length"in t?vc(t.length):n,r="omission"in t?fo(t.omission):r}var i=(e=wc(e)).length;if(un(e)){var c=hn(e);i=c.length}if(n>=i)return e;var u=n-mn(r);if(u<1)return r;var l=c?xo(c,0,u).join(""):e.slice(0,u);if(o===a)return l+r;if(c&&(u+=l.length-u),uc(o)){if(e.slice(u).search(o)){var s,f=l;for(o.global||(o=Ce(o.source,wc(ye.exec(o))+"g")),o.lastIndex=0;s=o.exec(f);)var d=s.index;l=l.slice(0,d===a?u:d)}}else if(e.indexOf(fo(o),u)!=u){var p=l.lastIndexOf(o);p>-1&&(l=l.slice(0,p))}return l+r},Gn.unescape=function(e){return(e=wc(e))&&X.test(e)?e.replace($,vn):e},Gn.uniqueId=function(e){var t=++Me;return wc(e)+t},Gn.upperCase=Jc,Gn.upperFirst=Zc,Gn.each=wi,Gn.eachRight=Ei,Gn.first=$a,su(Gn,(xu={},Er(Gn,(function(e,t){De.call(Gn.prototype,t)||(xu[t]=e)})),xu),{chain:!1}),Gn.VERSION="4.17.21",Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Gn[e].placeholder=Gn})),Ct(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===a?1:_n(vc(n),0);var r=this.__filtered__&&!t?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=wn(n,r.__takeCount__):r.__views__.push({size:wn(n,v),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ct(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:fa(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ct(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Ct(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(iu)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Jr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Ar(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(Fi(fa(e)))},Hn.prototype.slice=function(e,t){e=vc(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=vc(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(v)},Er(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Gn[r?"take"+("last"==t?"Right":""):t],i=r||/^find/.test(t);o&&(Gn.prototype[t]=function(){var t=this.__wrapped__,c=r?[1]:arguments,u=t instanceof Hn,l=c[0],s=u||Wi(t),f=function(e){var t=o.apply(Gn,Rt([e],c));return r&&d?t[0]:t};s&&n&&"function"==typeof l&&1!=l.length&&(u=s=!1);var d=this.__chain__,p=!!this.__actions__.length,m=i&&!d,h=u&&!p;if(!i&&s){t=h?t:new Hn(this);var y=e.apply(t,c);return y.__actions__.push({func:yi,args:[f],thisArg:a}),new qn(y,d)}return m&&h?e.apply(this,c):(y=this.thru(f),m?r?y.value()[0]:y.value():y)})})),Ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Gn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Wi(o)?o:[],e)}return this[n]((function(n){return t.apply(Wi(n)?n:[],e)}))}})),Er(Hn.prototype,(function(e,t){var n=Gn[t];if(n){var r=n.name+"";De.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[Vo(a,2).name]=[{name:"wrapper",func:a}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Ao(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ao(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ao(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Wi(e),r=t<0,o=n?e.length:0,a=function(e,t,n){var r=-1,o=n.length;for(;++r<o;){var a=n[r],i=a.size;switch(a.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=wn(t,e+i);break;case"takeRight":e=_n(e,t-i)}}return{start:e,end:t}}(0,o,this.__views__),i=a.start,c=a.end,u=c-i,l=r?c:i-1,s=this.__iteratees__,f=s.length,d=0,p=wn(u,this.__takeCount__);if(!n||!r&&o==u&&p==u)return vo(e,this.__actions__);var m=[];e:for(;u--&&d<p;){for(var h=-1,y=e[l+=t];++h<f;){var v=s[h],b=v.iteratee,g=v.type,_=b(y);if(2==g)y=_;else if(!_){if(1==g)continue e;break e}}m[d++]=y}return m},Gn.prototype.at=vi,Gn.prototype.chain=function(){return hi(this)},Gn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},Gn.prototype.next=function(){this.__values__===a&&(this.__values__=hc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Gn.prototype.plant=function(e){for(var t,n=this;n instanceof Yn;){var r=Ga(n);r.__index__=0,r.__values__=a,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Gn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:yi,args:[ri],thisArg:a}),new qn(t,this.__chain__)}return this.thru(ri)},Gn.prototype.toJSON=Gn.prototype.valueOf=Gn.prototype.value=function(){return vo(this.__wrapped__,this.__actions__)},Gn.prototype.first=Gn.prototype.head,Je&&(Gn.prototype[Je]=function(){return this}),Gn}();mt._=bn,(o=function(){return bn}.call(t,n,t,r))===a||(r.exports=o)}).call(this)}).call(this,n(121),n(509)(e))},,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(720);t.default=function(e){return o.a.createElement(a.a,e)}},function(e,t,n){"use strict";n(922);var r=n(427),o=n(0),a=n.n(o),i=n(10),c=n.n(i),u=n(2),l="index-module_popMenu_aOUBY",s="index-module_menu_0W97j",f="index-module_item_-0ClC",d="index-module_cancel_i36-H";function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=e.menuItems;return a.a.createElement("div",{className:c()(s,"pop-menu")},t.map((function(t,n){return a.a.createElement("div",{className:c()(f,t.className),key:n,onClick:function(n){t.onClick&&(e.toggleModal(),t.onClick())}},t.name)})),a.a.createElement("div",{className:d,onClick:function(){e.toggleModal()}},__("取消")))},v=function(e){var t=function(){var e=m(Object(o.useState)(!1),2),t=e[0],n=e[1];return{state:{showModal:t},onShowModal:function(){n(!0)},toggleModal:function(){setTimeout((function(){n(!1)}),16)}}}(),n=t.state.showModal,i=t.onShowModal,c=t.toggleModal;return a.a.createElement("div",{onClick:i},e.children,a.a.createElement(r.a,{popup:!0,visible:n,onClose:c,animationType:"slide-up",className:l,maskClosable:!0},a.a.createElement(y,p({},e,{toggleModal:c}))))};v.propsType={menuItems:n.n(u).a.array};t.a=v},function(e,t,n){"use strict";n(245);var r=n(64),o=(n(133),n(31)),a=(n(96),n(23)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(370),f=n(1135),d=n(290),p=n.n(d),m=n(38),h=n(510),y={Icon:function(e){var t=e.item,n=e.size;return c.a.createElement(m.b,{name:"folder"===t.type?"file-folder":Object(h.getFileIcon)(t),width:n||24,style:{flexShrink:0}})}};y.Icon.propTypes={item:l.a.object.isRequired,size:l.a.number},y.Name=function(e){var t=e.item,n=e.className,r=Object(f.getResourceName)(t);return c.a.createElement("span",{className:n,title:r},r)},y.Name.propTypes={item:l.a.object.isRequired,className:l.a.string},y.AccessScope=function(e){var t=e.book;return t&&0===t.public?c.a.createElement(a.a,{title:__("该资源访问需要权限")},c.a.createElement("span",{className:"doc-access-scope"},c.a.createElement(m.b,{name:"permission-private",width:12}))):null},y.AccessScope.propTypes={book:l.a.object.isRequired},y.FileSize=function(e){var t=e.item,n=e.className;return c.a.createElement("span",{className:n,"data-testid":"larkresource-filesize"},"folder"!==t.type&&t.filesize&&p()(t.filesize))},y.FileSize.propTypes={item:l.a.object.isRequired,className:l.a.string},y.TypeMenu=function(e){var t=e.current,n=e.onChange,a=e.overlayClassName,i=e.overlayPlacement,u=[{name:__("所有"),value:""},{name:__("图片"),value:"image"},{name:"PDF",value:"pdf"},{name:__("视频"),value:"video"},{name:__("音频"),value:"audio"},{name:__("办公文件"),value:"office"},{name:__("其他"),value:"else"}];t||(t="");var l=u.find((function(e){return e.value===t}));return c.a.createElement(r.a,{trigger:"click",placement:i||"bottomLeft",overlay:c.a.createElement(o.a,null,u.map((function(e){return c.a.createElement(o.a.Item,{key:e.value,onClick:function(){n(e.value)}},t===e.value&&c.a.createElement(s.a,null),e.name)}))),overlayClassName:a},c.a.createElement("span",null,l.value?l.name:__("类型")," ",c.a.createElement(m.b,{name:"down",width:16})))},y.TypeMenu.propTypes={current:l.a.string.isRequired,onChange:l.a.func.isRequired,overlayClassName:l.a.string,overlayPlacement:l.a.string},t.a=y},function(e,t,n){"use strict";var r,o=n(18),a=n(14),i=n(0),c=n.n(i),u=n(1221),l=n(10),s=n.n(l),f=n(40),d=n(28),p=n(42),m=n.n(p),h=n(221),y=n(202),v=n(1264),b=n(2069),g=n(2070),_=n(257);function w(e,t){e.forEach((function(e){var n=e.key,r=e.children;!1!==t(n,e)&&w(r||[],t)}))}function E(e){var t=e.treeData,n=e.expandedKeys,o=e.startKey,a=e.endKey,i=[],c=r.None;if(o&&o===a)return[o];if(!o||!a)return[];return w(t,(function(e){if(c===r.End)return!1;if(function(e){return e===o||e===a}(e)){if(i.push(e),c===r.None)c=r.Start;else if(c===r.Start)return c=r.End,!1}else c===r.Start&&i.push(e);return-1!==n.indexOf(e)})),i}function O(e,t){var n=Object(f.a)(t),r=[];return w(e,(function(e,t){var o=n.indexOf(e);return-1!==o&&(r.push(t),n.splice(o,1)),!!n.length})),r}!function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"}(r||(r={}));var x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function j(e){var t=e.isLeaf,n=e.expanded;return t?i.createElement(v.a,null):n?i.createElement(b.a,null):i.createElement(g.a,null)}function k(e){var t=e.treeData,n=e.children;return t||Object(y.c)(n)}var S=function(e,t){var n=e.defaultExpandAll,r=e.defaultExpandParent,c=e.defaultExpandedKeys,u=x(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),l=i.useRef(),p=i.useRef(),v=i.createRef();i.useImperativeHandle(t,(function(){return v.current}));var b,g=i.useState(u.selectedKeys||u.defaultSelectedKeys||[]),w=Object(d.a)(g,2),S=w[0],C=w[1],N=i.useState((b=Object(y.a)(k(u)).keyEntities,n?Object.keys(b):r?Object(h.e)(u.expandedKeys||c,b):u.expandedKeys||c)),P=Object(d.a)(N,2),T=P[0],A=P[1];i.useEffect((function(){"selectedKeys"in u&&C(u.selectedKeys)}),[u.selectedKeys]),i.useEffect((function(){"expandedKeys"in u&&A(u.expandedKeys)}),[u.expandedKeys]);var L=m()((function(e,t){t.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey||v.current.onNodeExpand(e,t)}),200,{leading:!0}),R=i.useContext(_.b),D=R.getPrefixCls,M=R.direction,F=u.prefixCls,B=u.className,U=x(u,["prefixCls","className"]),z=D("tree",F),G=s()("".concat(z,"-directory"),Object(o.a)({},"".concat(z,"-directory-rtl"),"rtl"===M),B);return i.createElement(I,Object(a.default)({icon:j,ref:v,blockNode:!0},U,{prefixCls:z,className:G,expandedKeys:T,selectedKeys:S,onSelect:function(e,t){var n,r,o=u.multiple,i=t.node,c=t.nativeEvent,s=i.key,d=void 0===s?"":s,m=k(u),h=Object(a.default)(Object(a.default)({},t),{selected:!0}),y=c.ctrlKey||c.metaKey,v=c.shiftKey;o&&y?(r=e,l.current=d,p.current=r,h.selectedNodes=O(m,r)):o&&v?(r=Array.from(new Set([].concat(Object(f.a)(p.current||[]),Object(f.a)(E({treeData:m,expandedKeys:T,startKey:d,endKey:l.current}))))),h.selectedNodes=O(m,r)):(r=[d],l.current=d,p.current=r,h.selectedNodes=O(m,r)),null===(n=u.onSelect)||void 0===n||n.call(u,r,h),"selectedKeys"in u||C(r)},onClick:function(e,t){var n;"click"===u.expandAction&&L(e,t),null===(n=u.onClick)||void 0===n||n.call(u,e,t)},onDoubleClick:function(e,t){var n;"doubleClick"===u.expandAction&&L(e,t),null===(n=u.onDoubleClick)||void 0===n||n.call(u,e,t)},onExpand:function(e,t){var n;return"expandedKeys"in u||A(e),null===(n=u.onExpand)||void 0===n?void 0:n.call(u,e,t)}}))},C=i.forwardRef(S);C.displayName="DirectoryTree",C.defaultProps={showIcon:!0,expandAction:"click"};var N=C,P=n(262),T=n(1339);function A(e){var t,n=e.dropPosition,r=e.dropLevelOffset,a=e.prefixCls,i=e.indent,u=e.direction,l=void 0===u?"ltr":u,s="ltr"===l?"left":"right",f="ltr"===l?"right":"left",d=(t={},Object(o.a)(t,s,-r*i+4),Object(o.a)(t,f,0),t);switch(n){case-1:d.top=-3;break;case 1:d.bottom=-3;break;default:d.bottom=-3,d[s]=i+4}return c.a.createElement("div",{style:d,className:"".concat(a,"-drop-indicator")})}var L=i.forwardRef((function(e,t){var n,r=i.useContext(_.b),c=r.getPrefixCls,l=r.direction,f=r.virtual,d=e.prefixCls,p=e.className,m=e.showIcon,h=e.showLine,y=e.switcherIcon,v=e.blockNode,b=e.children,g=e.checkable,w=e.selectable,E=c("tree",d),O=Object(a.default)(Object(a.default)({},e),{showLine:Boolean(h),dropIndicatorRender:A});return i.createElement(u.b,Object(a.default)({itemHeight:20,ref:t,virtual:f},O,{prefixCls:E,className:s()((n={},Object(o.a)(n,"".concat(E,"-icon-hide"),!m),Object(o.a)(n,"".concat(E,"-block-node"),v),Object(o.a)(n,"".concat(E,"-unselectable"),!w),Object(o.a)(n,"".concat(E,"-rtl"),"rtl"===l),n),p),direction:l,checkable:g?i.createElement("span",{className:"".concat(E,"-checkbox-inner")}):g,selectable:w,switcherIcon:function(e){return Object(T.a)(E,y,h,e)}}),b)}));L.TreeNode=u.a,L.DirectoryTree=N,L.defaultProps={checkable:!1,selectable:!0,showIcon:!1,motion:Object(a.default)(Object(a.default)({},P.a),{motionAppear:!1}),blockNode:!1};var I=L;t.a=I},,,,,,function(e,t,n){"use strict";n(173);var r=n(94),o=(n(75),n(26)),a=n(0),i=n.n(a),c=n(516),u=n(10),l=n.n(u);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(s,e);var t,n,a,u=p(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),v(h(n=u.call(this,e,t)),"handleHighlightByArrowKeys",(function(e){var t=n.state.highlightItemID,r=n.props.list,o=r.findIndex((function(e){return e.id===t}));38===e?(o-=1)<0&&(o=0):40===e&&(o+=1)>=r.length&&(o=r.length-1),n.setState({highlightItemID:r[o].id},(function(){n.setState({shouldChangeHighlightOnMouseMove:!1});var e=n.menus.querySelector(".meta-box-list"),t=n.menus.querySelector(".highlight");if(t){var r=t.offsetTop-77,o=r+t.getBoundingClientRect().height;r<e.scrollTop?e.scrollTop-=e.scrollTop-r:o-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=o-e.getBoundingClientRect().height)}}))})),v(h(n),"selectOnEnter",(function(e){n.menus.querySelector(".highlight .meta-list-item").click()})),v(h(n),"handleMouseMove",(function(){n.setState({shouldChangeHighlightOnMouseMove:!0})})),v(h(n),"changeHighlight",(function(e){n.props.list.find((function(t){return t.id===e}))&&n.state.shouldChangeHighlightOnMouseMove&&n.setState({highlightItemID:e})})),v(h(n),"handleKeyDown",(function(e){var t=e.keyCode||e.which;13===t?(e.preventDefault(),n.selectOnEnter()):38!==t&&40!==t||(e.preventDefault(),n.handleHighlightByArrowKeys(t))})),n.state={highlightItemID:"",shouldChangeHighlightOnMouseMove:!1},n}return t=s,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.list.length!==this.props.list.length&&this.setState({highlightItemID:e.list[0]?e.list[0].id:""})}},{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.originData,u=t.list,s=t.noSearch,f=t.searchPlaceholder,d=t.renderItem,p=t.emptyView;return u?i.a.createElement("div",{className:"meta-box-menus",onMouseMove:this.handleMouseMove,onKeyDown:this.handleKeyDown,tabIndex:"1",ref:function(t){e.menus=t}},!s&&i.a.createElement("div",{className:"meta-box-search"},i.a.createElement("div",{className:"meta-box-search-input"},i.a.createElement(c.a,null),i.a.createElement(o.a,{type:"text",placeholder:f,onChange:this.props.handleSearch,autoFocus:!0}))),n?i.a.createElement("div",{className:"blankslate"},i.a.createElement(r.a,null)):i.a.createElement("div",{className:"meta-box-body"},a.length?i.a.createElement("div",null,u&&u.length>0?i.a.createElement("ul",{className:"meta-box-list"},u.map((function(t,n){if(!t)return null;var r=l()({highlight:e.state.highlightItemID===t.id});return i.a.createElement("li",{key:t.id,onMouseEnter:function(){e.changeHighlight(t.id)},className:r},d(t,n))}))):i.a.createElement("div",{className:"meta-box-empty"},i.a.createElement("span",null,__("未搜索到结果")))):i.a.createElement("div",{className:"meta-box-empty"},p))):null}}])&&f(t.prototype,n),a&&f(t,a),Object.defineProperty(t,"prototype",{writable:!1}),s}(a.Component);t.a=b},function(e,t,n){"use strict";n(79);var r=n(44),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(2139),l="index-module_newRepoModal_Z6mze",s="index-module_title_ECR9O",f=function(e){var t=e.isModalVisible,n=e.handleCancel,o=e.stackId,i=e.onBookCreated,c=e.belongTo,f=e.bookNameDefault;return a.a.createElement(a.a.Fragment,null,a.a.createElement(r.a,{className:l,title:a.a.createElement("div",{className:s},__("新建知识库")),width:424,visible:t,onCancel:n,footer:null},a.a.createElement(u.a,{stackId:o,onBookCreated:i,belongTo:c,bookNameDefault:f})))};f.propTypes={isModalVisible:c.a.bool,handleCancel:c.a.func,stackId:c.a.string,onBookCreated:c.a.func,belongTo:c.a.array,bookNameDefault:c.a.string};t.a=f},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l={wrap:"index-module_wrap_4GDfH",close:"index-module_close_27uFj",icon:"index-module_icon_RfM4L",closeIcon:"index-module_closeIcon_6sSTs"};function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.icon,n=e.content,a=e.style,i=e.showClose,c=s(Object(r.useState)(!0),2),f=c[0],d=c[1];return f?o.a.createElement("div",{className:l.wrap,style:a},t&&o.a.createElement("div",{className:l.icon},t),o.a.createElement("div",{className:l.content},n),i&&o.a.createElement("div",{className:l.close,onClick:function(){d(!1)}},o.a.createElement("span",{className:u()("lake-icon","lake-icon-close",l.closeIcon)}))):null};d.propTypes={icon:i.a.node,content:i.a.node.isRequired,style:i.a.object,showClose:i.a.bool};t.a=d},,,,,,,,,,function(e,t,n){var r=n(1989),o=n(2172),a=n(2008),i=n(2734),c=n(2735),u=n(2010),l=n(673);e.exports=function(e,t,n){if((e=l(e))&&(n||void 0===t))return o(e);if(!e||!(t=r(t)))return e;var s=u(e),f=u(t),d=c(s,f),p=i(s,f)+1;return a(s,d,p).join("")}},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(96),n(23)),a=(n(173),n(94)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(88),f=n(10),d=n.n(f),p=n(299),m=n.n(p),h=n(117),y=n(928),v=n(38),b=n(127),g=n(321),_=n(109),w=n(1e3),E=n(56),O=n.n(E),x=n(34);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e,t){var n,r=t.type,o=t.payload,a={};switch(["clickButton","resetButton"].includes(r)&&(e.active?(a.count=Math.max(e.count-1,0),a.users=e.users.filter((function(e){var t;return e.id!==(null===(t=o.me)||void 0===t?void 0:t.id)}))):e.users.some((function(e){var t;return e.id===(null===(t=o.me)||void 0===t?void 0:t.id)}))||(a.count=e.count+1,a.users=N(e.users),o.me&&a.users.unshift(o.me))),r){case"fetchLikeList":return S(S({},e),{},{loading:!0});case"updateLikeList":return n=0===o.page?o.data:[].concat(N(e.users),N(o.data)),S(S({},e),{},{users:n,loading:!1,hasMore:o.meta&&o.meta.hasMore,count:Math.max(e.count,n.length)});case"hoverButton":return S(S({},e),{},{hover:!0});case"unhoverButton":return S(S({},e),{},{hover:!1});case"clickButton":return S(S(S({},e),a),{},{active:!e.active,noAnimate:!1,submitting:!0,hover:!1});case"resetButton":return S(S(S({},e),a),{},{active:!e.active,noAnimate:!0,submitting:!1});case"clickSuccess":return S(S({},e),{},{submitting:!1});case"updateActive":return S(S({},e),{},{active:o.active});default:throw Error()}},L=function(e){var t=e.likeStatus,n=e.doc,r=e.dispatch,o=e.me,a=e.type,c=e.targetId,u=e.likeCount,l=e.scene,s=j(Object(i.useReducer)(A,{hover:!1,submitting:!1,noAnimate:!0,users:[],loading:!1,hasMore:!1,active:!!t,count:u}),2),f=s[0],d=s[1],p=f.hover,m=f.submitting,h=f.noAnimate,y=f.users,v=f.loading,b=f.hasMore,g=f.active,_=f.count,w=0,E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;d({type:"fetchLikeList"}),x.a.actions.users({action_type:"like",target_type:a,target_id:c,limit:e,offset:w*e},{useOriginResp:!0}).then((function(e){d({type:"updateLikeList",payload:{page:w,data:e.data,meta:e.meta}})}))},k=function(e){"single"!==l&&(w=0,E(e))};return Object(i.useEffect)((function(){"single"!==l&&E(13)}),[]),Object(i.useEffect)((function(){d({type:"updateActive",payload:{active:O()(n,"like.actioned")}})}),[O()(n,"like.actioned")]),Object(i.useEffect)((function(){d({type:"updateActive",payload:{active:!!t}})}),[t]),{hover:p,active:g,noAnimate:h,loading:v,users:y,hasMore:b,count:_,toggleLike:function(){if(!m){d({type:"clickButton",payload:{me:o}});var e={action_type:"like",target_type:a,target_id:c};x.a.actions[g?"destroy":"create"](e).then((function(e){k(13),d({type:"clickSuccess"}),"single"!==l&&(window.yqWebApp?window.yqWebApp.updateDocLikes():r({type:"doc/updateLikes",payload:{active:e}}))})).catch((function(){d({type:"resetButton",payload:{me:o}})}))}},hoverBtn:function(){d({type:"hoverButton"})},unHoverBtn:function(){d({type:"unhoverButton"})},reload:k,loadMore:function(){w++,E()}}},I="like-module_larkLike_zeNuZ",R="like-module_larkLikeIcon_5ZWgd",D="like-module_larkLikeBtnActive_5GFT6",M="like-module_larkLikeBtn_uHsxq",F="like-module_larkLikeBtnNoAnimate_ugzKL",B="like-module_larkLikeBtnShake_0G6vd",U="like-module_larkLikeCount_eLa4m",z="like-module_larkLikeDocTip_+Obkt",G="like-module_userListWrapper_Y79Yc",V="like-module_userList_SKTTT",Y="like-module_showLikeList_TUchs",q="like-module_readerUserList_hfxMS",H="like-module_modal_kOEJe",W="like-module_simplifyLike_GZF9s",K="like-module_isMini_LHe3B",$="like-module_text_mdOB6",Q="like-module_modalContentIcon_K+o1v",X="like-module_modalContentCount_6ku9X",J="like-module_likePopover_yBbcz",Z="like-module_popoverUserContainer_FwwqR",ee="like-module_popoverUserList_ZjVm8",te="like-module_popoverUserItem_Hf89G",ne="like-module_popoverUserItemAvatar_Xvk9i",re="like-module_popoverUserItemName_aIDSI";function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe.apply(this,arguments)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var se=function(e){var t,n=e.type,u=e.targetId,l=e.simplify,s=e.size,f=e.bubblePopover,p=e.likeStatus,_=e.doc,E=e.dispatch,O=e.me,x=e.likeCount,j=e.scene,k=L({likeStatus:p,doc:_,dispatch:E,me:O,type:n,targetId:u,likeCount:x,scene:j}),S=k.hover,C=k.noAnimate,N=k.active,P=k.loading,T=k.hasMore,A=k.count,ae=k.users,le=k.toggleLike,se=k.hoverBtn,fe=k.unHoverBtn,de=k.reload,pe=k.loadMore,me=ue(Object(i.useState)(!1),2),he=me[0],ye=me[1],ve="bubble"===s,be="mini"===s,ge="defaultWithBubble"===s,_e=be?24:32,we=ae.filter((function(e){return e.id===(null==O?void 0:O.id)||![h.STATUS.banned,h.STATUS.blocked].includes(e.status)})),Ee=we&&we.slice(0,13),Oe=we.length>13||T,xe=d()(M,(ce(t={},D,N),ce(t,B,S&&!N),ce(t,F,C),t)),je=function(){var t={};return f&&ae&&ae.length>0&&(t.countPopoverClassName=J,t.countPopoverContent=c.a.createElement("div",{className:Z},c.a.createElement(m.a,{pageStart:0,loadMore:pe,hasMore:!P&&T,threshold:100,useWindow:!1},c.a.createElement("div",{className:ee},ae.map((function(e){return c.a.createElement("a",{className:te,key:e.id,href:"/".concat(e.login),target:"_blank"},c.a.createElement(b.a,{className:ne,src:e.avatar_url,size:24,name:e.name}),c.a.createElement("div",{className:re},e.name))}))),P&&T&&c.a.createElement(a.a,{justify:"block"})))),c.a.createElement(w.a,oe({iconName:N?"like-bubble-active":"like-bubble",style:ie({bottom:"140px"},e.bubbleStyle),count:A,onClick:le},t))};return ve?je():l||be?c.a.createElement("div",{className:d()(W,ce({},K,be)),onClick:le},N?c.a.createElement(v.b,{name:"like-small-after",width:_e,height:_e}):c.a.createElement(v.b,{name:"like-small-before",width:_e,height:_e}),be&&c.a.createElement("span",{className:$},A)):c.a.createElement("div",{className:I},c.a.createElement("div",{className:xe,onMouseEnter:function(){se()},onMouseLeave:function(){fe()},onClick:le,"data-testid":"like-btn"},c.a.createElement("span",{className:R})),A?c.a.createElement("p",{className:U,"data-testid":"like-count-desc"},__("{count} 人点赞",{count:A})):c.a.createElement("p",{className:z},c.a.createElement("span",null,__("若有收获，就点个赞吧"))),!!Ee.length&&c.a.createElement("ul",{className:d()(V,q)},Ee.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(g.a,{user:e},c.a.createElement(b.a,{src:e.avatar_url,size:"sm",name:e.name})))})),Oe&&c.a.createElement(o.a,{placement:"bottom",title:__("查看所有点赞用户")},c.a.createElement("li",{className:Y,onClick:function(){ye(!0),de()}},c.a.createElement(y.a,null)))),he&&c.a.createElement(r.a,{className:H,footer:null,visible:he,onCancel:function(){ye((function(e){return!e}))}},c.a.createElement("img",{className:Q,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*1mmiSK6R5QAAAAAAAAAAAAAAARQnAQ"}),c.a.createElement("p",{className:X},__("{count} 人点赞",{count:A})),c.a.createElement("div",{className:G},we.length>0&&c.a.createElement(m.a,{pageStart:0,loadMore:pe,hasMore:!P&&T,threshold:100,useWindow:!1},c.a.createElement("ul",{className:V},we.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(g.a,{user:e},c.a.createElement(b.a,{src:e.avatar_url,size:"sm",name:e.name})))}))),P&&T&&c.a.createElement(a.a,{justify:"block"})))),ge&&je())};se.defaultProps={size:"default",bubbleStyle:{}},se.propTypes={dispatch:l.a.func,type:l.a.oneOf(["Book","Doc"]),targetId:l.a.number.isRequired,doc:l.a.object,me:l.a.object,simplify:l.a.bool,likeStatus:l.a.object,likeCount:l.a.number,size:l.a.oneOf(["default","mini","bubble","defaultWithBubble"]),withCornerBubble:l.a.bool,bubblePopover:l.a.bool,bubbleStyle:l.a.object,scene:l.a.oneOf(["single"])};t.a=Object(_.b)(Object(s.d)((function(e){return{doc:e.doc,me:e.me}}))(se))},function(e,t,n){"use strict";var r=n(1456);n.d(t,"a",(function(){return r.a}))},function(e,t,n){"use strict";n(162)},,,,,,,,,,,function(e,t,n){"use strict";n(50);var r=n(19),o=(n(245),n(64)),a=(n(75),n(26)),i=(n(133),n(31)),c=(n(166),n(65)),u=(n(178),n(45)),l=(n(209),n(61)),s=n(0),f=n.n(s),d=n(2),p=n.n(d),m=n(88),h=n(127),y=n(357),v=n(38),b=n(39),g=n.n(b),_=n(69),w=n.n(_);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,n,r,o=j(a);function a(e){var t,n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=o.call(this,e),n=S(t),r="handleScroll",i=w()((function(){var e=g.a.findDOMNode(S(t)).childNodes[0];e.scrollHeight-e.offsetHeight-e.scrollTop<Number(t.props.threshold)&&(t.removeEventListener(),t.props.onLoadMore())}),300),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,t.handleScroll=t.handleScroll.bind(S(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){this.addEventListener()}},{key:"componentDidUpdate",value:function(){this.addEventListener()}},{key:"componentWillUnmount",value:function(){this.removeEventListener()}},{key:"addEventListener",value:function(){if(this.props.hasMore){var e=g.a.findDOMNode(this).childNodes[0];e.addEventListener("scroll",this.handleScroll),e.addEventListener("resize",this.handleScroll),this.handleScroll()}}},{key:"removeEventListener",value:function(){var e=g.a.findDOMNode(this).childNodes[0];e.removeEventListener("scroll",this.handleScroll),e.removeEventListener("resize",this.handleScroll)}},{key:"render",value:function(){return f.a.createElement("div",null,this.props.children)}}])&&O(t.prototype,n),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(f.a.Component);N.defaultProps={threshold:10},N.propTypes={children:p.a.node,threshold:p.a.number,hasMore:p.a.bool.isRequired,onLoadMore:p.a.func.isRequired};var P=N,T=n(295),A=n(89),L=n(513),I=n(2119),R="QuickLinkForm-module_dropdown_cR9iu",D="QuickLinkForm-module_btn_Chn+w",M="QuickLinkForm-module_recommend_AS7gl",F="QuickLinkForm-module_icon_lI42q",B="QuickLinkForm-module_titleWrap_JVfk2",U="QuickLinkForm-module_title_+8iCl",z="QuickLinkForm-module_meta_H955L",G="QuickLinkForm-module_belong_WIp6G",V="QuickLinkForm-module_action_M8yXe",Y="QuickLinkForm-module_form_iEUab",q="QuickLinkForm-module_input_RO4bf",H="QuickLinkForm-module_larkIcon_Uufm3";function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=l.a.Item,oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(p,e);var t,n,s,d=J(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),ne(ee(t=d.call(this,e)),"onKeyDown",(function(e){"Escape"!==e.key&&"Esc"!==e.key||t.hiddenSearch()})),ne(ee(t),"onBlur",(function(e){t.state.lock||t.hiddenSearch()})),ne(ee(t),"onClickOutside",(function(e){!e.target.closest(".form-title")&&t.hiddenSearch()})),ne(ee(t),"lockSearch",(function(e){t.setState({lock:e})})),ne(ee(t),"hiddenSearch",(function(){t.setState({visible:!1})})),ne(ee(t),"handleSubmit",(function(e){e.preventDefault();var n=t.props,r=n.form,o=n.dispatch,a=n.onSubmit,i=n.group,c=n.refId,u=n.data,l=void 0===u?{}:u;r.validateFields((function(e,t){if(!e){/^\//.test(t.url)||t.url&&t.url.startsWith("http")||(t.url="http://".concat(t.url.replace(/^\/*/g,""))),t.url&&(t.url=t.url.replace(/\s+/g,""));var n=$($({},t),{},{group_id:i&&i.id,ref_id:c}),u="proxy.web/quickLinks.create";l&&l.id&&(u="proxy.web/quickLinks.update",n.order_num=l.order_num,n.id=l.id),o({type:u,payload:{data:n}}).then((function(e){a(e),r.resetFields()}))}}))})),ne(ee(t),"loadMore",(function(){var e=t.props,n=e.group,r=e.refId,o=t.state,a=o.q,i=o.p,c=o.hasMore,u=o.loading,l=o.links;a&&c&&!u&&5!==i&&(t.setState({loading:!0}),t.props.dispatch({type:"proxy.web/quickLinks.search",payload:{data:{q:a,p:i+1,scope:n&&n.login,related:!(n&&n.id),ref_id:r}}}).then((function(e){var n=l.concat(e);t.setState({links:n,p:i+1,hasMore:!!e.length,visible:!!n.length,loading:!1})})).catch((function(e){t.setState({loading:!1})})))})),ne(ee(t),"handleChange",(function(e){if(!t.composition){var n=e.target.value;t.timer&&(clearTimeout(t.timer),t.timer=null),t.timer=setTimeout((function(){t.setState({links:[],p:0,q:n,hasMore:!0,loading:!1,visible:!1,menuIndex:0},(function(){t.loadMore()}))}),300)}})),ne(ee(t),"onChangeUrl",(function(e){t.setState({url:e.target.value})})),ne(ee(t),"handleAction",(function(e,n,r){var o=t.state.links;"add"===e?o[r].canAddQuickLink=!1:"remove"===e&&(o[r].canAddQuickLink=!0),t.setState({links:o})})),ne(ee(t),"handleKeyDown",(function(e){var n=document.querySelector(".quicklink-form-links");if(n){var r=t.state.links,o=e.keyCode||e.which,a=t.state.menuIndex;if(13===o){e.preventDefault();var i=n.querySelector(".ant-menu-item:nth-child(".concat(a+1,") .menu-row"));i&&i.click()}else 38===o?(e.preventDefault(),(a-=1)<0&&(a=0),t.setState({menuIndex:a})):40===o&&(e.preventDefault(),(a+=1)>=r.length&&(a=r.length-1),t.setState({menuIndex:a}));var c=n.querySelector(".ant-menu-item:nth-child(".concat(a,")"));c&&c.scrollIntoView&&c.scrollIntoView(!0)}})),ne(ee(t),"handleCompositionStart",(function(){t.composition=!0})),ne(ee(t),"handleCompositionEnd",(function(e){t.composition=!1,t.handleChange(e)})),ne(ee(t),"renderIcon",(function(e){if("User"===e.target_type)return f.a.createElement(h.a,{className:H,src:e.avatar||e.target&&e.target.avatar_url,icon:T.b.getName("User",e.target),name:e.title,size:24,useLetterAvatar:!0});var t="";return e.target_type&&(t=T.b.getName(e.target_type,e.target)),f.a.createElement(v.b,{name:t,style:T.b.getStyle(e.target,{size:24}),className:"".concat(H)})})),ne(ee(t),"renderBelong",(function(e){var t;return(t="Book"===e.target_type?f.a.createElement(y.a.Belong,{book:e.target,clickable:!1}):e.target&&e.target.description)?f.a.createElement("span",{className:G},t):null})),ne(ee(t),"renderRecommendLinks",(function(){var e=t.state,n=e.links,r=e.menuIndex,o=t.props,a=o.group,l=o.refId,s=o.onSubmit,d=o.data;return n&&n.length&&(t.selectedKeys=["".concat(n[r].url,"_").concat(r)]),f.a.createElement("div",{className:"quicklink-form-links",onMouseEnter:function(){return t.lockSearch(!0)},onMouseLeave:function(){return t.lockSearch(!1)}},f.a.createElement(P,{hasMore:t.state.hasMore,onLoadMore:t.loadMore},f.a.createElement(i.a,{selectable:!window.h5,selectedKeys:t.selectedKeys},n.map((function(e,n){var r=f.a.createRef(),o=n;return f.a.createElement(i.a.Item,{key:"".concat(e.url,"_").concat(o)},f.a.createElement(c.a,{className:"menu-row ".concat(M),type:"flex",justify:"space-between",align:"middle",onClick:function(){return r.current.handleQuickLink()}},f.a.createElement(u.a,null,f.a.createElement("div",{className:F},t.renderIcon(e)),f.a.createElement("div",{className:B},f.a.createElement("h3",{className:U,title:e.title},e.title),f.a.createElement("span",{className:z},t.renderBelong(e)))),f.a.createElement(u.a,{className:V},f.a.createElement(I.a,{ref:r,group:a,type:e.canAddQuickLink?"add":"remove",url:e.url,title:e.title,target_id:e.target_id,target_type:e.target_type,onAction:function(r){return t.handleAction(r,e,n)},refId:l,onSubmit:s,data:d}))))})))))}));var n=e.data||{};return t.state={q:n.title,p:0,links:[],hasMore:!0,loading:!1,visible:!1,lock:!1,menuIndex:0,url:n.url},t}return t=p,(n=[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.onKeyDown),document.addEventListener("click",this.onClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.onKeyDown),document.removeEventListener("click",this.onClickOutside)}},{key:"render",value:function(){var e=this.props,t=e.form,n=e.onCancel,i=e.titlePlaceholder,c=e.urlPlaceholder,u=e.nameLabel,s=e.urlLabel,d=t.getFieldDecorator,p=this.state,m=p.visible,h=p.q,y=p.url,v=!h||!y;return f.a.createElement(l.a,{className:Y,onSubmit:this.handleSubmit,layout:"vertical"},f.a.createElement(re,{label:u||__("标题"),className:"form-title"},f.a.createElement(o.a,{overlayClassName:R,overlay:this.renderRecommendLinks(),getPopupContainer:function(e){return e.parentNode},visible:m},d("title",{initialValue:h})(f.a.createElement(a.a,{"data-testid":"title",autoFocus:!0,className:q,maxLength:20,placeholder:i||__("输入标题，或关键词搜索我的知识库、{title}、文档",{title:A.a.title()}),onChange:this.handleChange,onBlur:this.onBlur,onKeyDown:this.handleKeyDown,onCompositionStart:this.handleCompositionStart,onCompositionEnd:this.handleCompositionEnd,autoComplete:"off"})))),f.a.createElement(re,{label:s||__("URL 地址")},d("url",{initialValue:y})(f.a.createElement(a.a,{"data-testid":"url",onChange:this.onChangeUrl,placeholder:c||__("输入团队、知识库、文档等地址")}))),f.a.createElement(re,{className:D},f.a.createElement(r.a,{"data-testid":"cancel-btn",onClick:n},__("取消")),f.a.createElement(r.a,{"data-testid":"submit-btn",type:"primary",htmlType:"submit",disabled:v},__("确认"))))}}])&&Q(t.prototype,n),s&&Q(t,s),Object.defineProperty(t,"prototype",{writable:!1}),p}(s.Component);oe.defaultProps={onSubmit:function(){},onCancel:function(){},refId:L.BLOCK_TYPE.quickLink},oe.propTypes={data:p.a.object,form:p.a.object,group:p.a.object,dispatch:p.a.func,onSubmit:p.a.func,onCancel:p.a.func,titlePlaceholder:p.a.string,urlPlaceholder:p.a.string,nameLabel:p.a.string,urlLabel:p.a.string,refId:p.a.string};t.a=Object(m.d)((function(e){return e}))(l.a.create()(oe))},,function(e,t,n){"use strict";n(175);var r=n(84),o=(n(50),n(19)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(88),s=n(100),f=n.n(s),d=n(90),p=n.n(d),m=n(927),h=n(1545),y=n(124),v=n(1274),b=n(285),g=n(651),_=n(995),w="index-module_docCreate_K4cWX",E="index-module_button_PeRuI";function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=function(e){var t=e.book,n=e.dispatch,c=e.title,u=e.slug,l=e.canImport,s=e.onCreated,d=e.urlHash,O=e.commandParams,j=k(Object(a.useState)(!1),2),S=j[0],C=j[1],N=k(Object(a.useState)(!1),2),P=N[0],T=N[1],A=Object(g.a)(),L=A.showTemplateSelector,I=A.contextHolder,R=__("新建"),D=Object(_.a)(t);return Object(a.useEffect)((function(){"#import_to_book"===d&&(T(!0),window.location.hash=""),"#create_from_template"===d&&(window.location.hash="",L({book:D.current}).then((function(e){e&&Object(b.e)(D.current,e)})))}),[d]),window.h5?i.a.createElement("div",{className:"doc-create-entry ".concat(w)},i.a.createElement(o.a,{title:R,type:"primary",className:"doc-create-entry-btn",onClick:function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.type||y.a.getDocTypeToCreate(t);if(r){var o=x({book_id:t.id,type:r,format:h.a.getDefaultDocumentFormat(r),title:c||y.a.getDefaultTitle(r),slug:u,status:f.a.STATUS.draft},e);n({type:"proxy.web/docs.createDoc",payload:{data:o}}).then((function(e){window.location.href="/".concat(t.namespace,"/").concat(e.slug,"/edit")}))}}()}},R)):i.a.createElement("div",{className:"doc-create-entry ".concat(w)},i.a.createElement(r.a,{noArrow:!0,trigger:"hover",getPopupContainer:function(e){return e.parentNode},visible:S,onVisibleChange:function(e){C(e)},placement:"bottomRight",content:i.a.createElement(v.a,{menuId:"doc-create-btn",book:t,commands:y.a.additionalActionsForNewDoc({canImport:l}),commandParams:O,onCommandsExecuted:function(e){e.cmd;var t=e.result;s&&s(t)},onSelect:function(e){C(!1)},onCreateDoc:s})},i.a.createElement(o.a,{className:E,"data-testid":"doc-create-entry",type:"primary"},R)),I,i.a.createElement(m.a,{book:t,visible:P,formats:y.a.getImportFormats({multi:!0}),importType:p.a.IMPORT_TYPE.CREATE,onCancel:function(){T(!1)},onSuccess:function(e){s(e)},group:window.appData.group}))};C.defaultProps={canImport:!0,title:null,slug:null,urlHash:window.location.hash,commandParams:{}},C.propTypes={book:u.a.object.isRequired,title:u.a.string,slug:u.a.string,onCreated:u.a.func,dispatch:u.a.func,canImport:u.a.bool,urlHash:u.a.string,commandParams:u.a.object};t.a=Object(l.d)((function(e){return{book:e.book}}))(C)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(109);t.a=Object(a.b)((function(){return Object(r.useEffect)((function(){n.e(30).then(n.bind(null,2920)),n.e(30).then(n.bind(null,2921)),n.e(30).then(n.bind(null,2922)),n.e(30).then(n.bind(null,2923)),n.e(30).then(n.bind(null,2924)),n.e(30).then(n.bind(null,2925)),n.e(30).then(n.bind(null,2926)),n.e(30).then(n.bind(null,2927)),n.e(30).then(n.bind(null,2928)),n.e(30).then(n.bind(null,2929)),n.e(30).then(n.bind(null,2930)),n.e(30).then(n.bind(null,2931)),n.e(30).then(n.bind(null,2932)),n.e(30).then(n.bind(null,2933)),n.e(30).then(n.bind(null,2934)),n.e(30).then(n.bind(null,2935)),n.e(30).then(n.bind(null,2936)),n.e(30).then(n.bind(null,2937)),n.e(30).then(n.bind(null,2938)),n.e(30).then(n.bind(null,2939)),n.e(30).then(n.bind(null,2940)),n.e(30).then(n.bind(null,2941)),n.e(30).then(n.bind(null,2942)),n.e(30).then(n.bind(null,2943)),n.e(30).then(n.bind(null,2944)),n.e(30).then(n.bind(null,2945))})),o.a.createElement("span",null)}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(211),o=n.n(r),a=n(235);function i(e){var t=window.appData.settings,n=void 0===t?{}:t,r=e.title,i=e.url,c=e.group,u=void 0===c?window.appData.group||{}:c,l=e.book,s=e.doc,f=null;n.disable_app_doc_skeleton||"Doc"!==(null==s?void 0:s.type)||(f={type:"doc",title:r||s.title,bookName:null==l?void 0:l.name,time:s.content_updated_at}),a.a.pushWebWindow({url:"".concat(window.location.origin).concat(i),skeletonParams:f,preCreateParams:{scene:"reader",group:o()(u,["id","type","login"]),book:o()(l,["id","slug","name"]),doc:o()(s,["id","slug","title"])}})}},function(e,t,n){"use strict";n(75);var r=n(26),o=(n(60),n(24)),a=(n(209),n(61)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(88),f=n(10),d=n.n(f),p=n(2224),m=n(1302);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=a.a.Item,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(u,e);var t,n,a,i=w(u);function u(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),j(O(n=i.call(this,e,t)),"onSendClick",(function(e){var t=n.props,r=t.form,o=(0,t.getTarget)();if(o)n.sendMessage(o,e);else{var a=n.props.fieldTypeName;if(a){var i={mobile:__("输入手机号码"),email:__("输入邮箱"),mobile_or_email:__("输入手机号码或邮箱"),login:__("输入正确手机号")};r.setFields(j({},a,{errors:[new Error(i[a])]}))}}}));var r=window.appData,o=r.me,a=r.settings;return n.state={sendType:e.sendType||null,channel:"sms",sending:e.counting,needCaptcha:a.validation_code_need_captcha&&!o.id||e.needCaptcha},e.counting&&n.countAndDisplaySwith(),n}return t=u,a=[{key:"getDerivedStateFromProps",value:function(e,t){var n=window.appData,r=n.me;return{needCaptcha:n.settings.validation_code_need_captcha&&!r.id||e.needCaptcha}}}],(n=[{key:"componentWillUnmount",value:function(){this.switchTimeout&&clearTimeout(this.switchTimeout)}},{key:"fieldType",get:function(){return this.props.fieldTypeName||this.props.sendType}},{key:"countAndDisplaySwith",value:function(){var e=this;this.setState({sending:!0}),this.switchTimeout=setTimeout((function(){e.setState({sending:!1}),(0,e.props.form.getFieldValue)("code")||e.setState({inputTimeout:!0})}),6e4)}},{key:"sendMessage",value:function(e,t){var n=this;this.countAndDisplaySwith(),t&&t();var r=this.props,a=r.dispatch,i=r.action,c=r.type,u=r.form,l=this.captcha?this.captcha.getValues():{};if(this.captcha&&!l.captcha)return this.countDown&&this.countDown.reset(),void o.a.error(__("先完成滑块验证"));a({type:"checkcode/sendCode",payload:b({target:e,action:i,type:c,channel:this.state.channel},l)}).then((function(t){if(t.data)return n.input.focus(),n.setState({sendType:e.indexOf("@")<=-1?"mobile":"email"}),void o.a.success(__("验证码已发送"));if(n.captcha&&n.captcha.reset(),n.countDown&&n.countDown.reset(),n.setState({sendType:null}),"notfound"!==t.code){if("not-support-register"!==t.code)return"wrong"===t.code&&"captcha"===t.key?n.captcha?void o.a.error(__("验证失败，请重新拖动滑块")):(n.setState({needCaptcha:!0}),void o.a.error(__("先完成滑块验证"))):void(429===t.status?o.a.error(__("验证码获取太频繁，请稍后再试")):o.a.error(__("获取验证码错误，请联系管理员排查。 [{subCode}]",{subCode:t.sub_code||"unknown"})));o.a.warn(__("仅限中国大陆（不含港澳台）手机号注册"))}else n.fieldType&&u.setFields(j({},n.fieldType,{errors:[new Error(__("帐号不存在，请重新输入"))]}))}))}},{key:"renderHint",value:function(){return"email"===this.fieldType&&"email"===this.state.sendType&&this.state.sending?c.a.createElement("div",{className:"mobile-code-hint"},c.a.createElement("span",null,__("已发送验证码到绑定邮箱"))):"register"!==this.props.action&&"resetPassword"!==this.props.action&&"login"!==this.props.action&&"mobile"===this.fieldType&&"mobile"===this.state.sendType&&this.state.sending?c.a.createElement("div",{className:"mobile-code-hint"},c.a.createElement("span",null,__("已发送短信验证码到绑定手机"))):void 0}},{key:"getPlaceholder",value:function(){return"email"===this.fieldType?__("6 位邮箱验证码"):"sms"===this.state.channel?__("6 位短信验证码"):void 0}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,o=t.large,a=t.wrapperCol,i=t.counting,u=n.getFieldError,l=n.getFieldDecorator,s=o?{size:"large"}:{},f=__("获取验证码"),h=this.getPlaceholder();return c.a.createElement("div",{className:d()("mobile-code",{"captcha-check-code":this.state.needCaptcha}),"data-testid":"checkCode"},this.state.needCaptcha&&c.a.createElement(m.a,{form:this.props.form,show:!0,ref:function(t){e.captcha=t},scene:window.h5?"nc_register_h5":"register"}),c.a.createElement(k,{wrapperCol:a,className:"mobile-code-showtip",help:u("code")?u("code"):this.renderHint()},c.a.createElement("div",{className:"mobile-code-main"},c.a.createElement("div",{className:"mobile-code-field"},l("code",{rules:[{required:!0,message:__("验证码不能为空")}]})(c.a.createElement(r.a,y({"data-testid":"checkCodeInput","data-aspm-click":"d005",type:"tel",autoComplete:"off",ref:function(t){e.input=t},placeholder:h,maxLength:6},s,{id:"".concat(this.state.sendType,"_code")})))),c.a.createElement("div",{className:"mobile-code-getBtn"},c.a.createElement(p.a,{counting:i,fieldType:this.fieldType,onSendClick:this.onSendClick,ref:function(t){e.countDown=t},buttonProps:b({ghost:!0,htmlType:"button"},s),sendText:f})))),this.state.inputTimeout&&c.a.createElement("div",{className:"mobile-code-pwd-link"},c.a.createElement("a",{href:"https://www.yuque.com/yuque/qa/sms-issue",target:"_blank"},__("没有收到验证码？"))),this.props.linkTest&&c.a.createElement("div",{className:"mobile-code-pwd-link",onClick:this.props.clickLink},this.props.linkTest))}}])&&g(t.prototype,n),a&&g(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.Component);S.propTypes={counting:l.a.bool,large:l.a.bool,fieldTypeName:l.a.string,sendType:l.a.string,countDownsendText:l.a.string,needCaptcha:l.a.bool},S.defaultProps={counting:!1,large:!0,needCaptcha:!1};t.a=Object(s.d)((function(e){return e}))(S)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(235),u=n(287),l="EmbedHeader-module_docEmbedHeader_lYs+e",s="EmbedHeader-module_embedHeaderReference_SWdkM",f="EmbedHeader-module_embedHeaderTitle_SPNfw",d="EmbedHeader-module_embedHeaderLink_Q9Vhk";function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){var t=e.title,n=e.link,r=e.height,a=e.style,i=void 0===a?{}:a,p=e.doc,h=e.book,y=e.group,v=window.appData,b=v.isYuqueMobileApp,g=v.isDesktopApp;return o.a.createElement("div",{className:l,style:m({height:"".concat(r,"px")},i)},o.a.createElement("span",{className:s},__("引用自"),"："),o.a.createElement("span",{className:f},t,o.a.createElement(u.a.AccessScope,{group:y,book:h,doc:p})),o.a.createElement("a",{className:d,href:n,target:"_blank",onClick:function(){!function(e){if(b){var t,n,r=(null===(t=window.nebulaMobileApp)||void 0===t||null===(n=t.envInfo)||void 0===n?void 0:n.origin)||window.location.origin;return c.a.pushWebWindow({url:"".concat(r).concat(e)}),!1}if(g)window.parent.postMessage({name:"openExternalLink",args:["".concat(window.location.origin).concat(e)]},"*")}(n)}},__("查看原文")))};y.propTypes={title:i.a.string,link:i.a.string,height:i.a.number,style:i.a.object,doc:i.a.object,book:i.a.object,group:i.a.object};t.a=y},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(381),u=n(109),l=n(683),s=n(36);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(){d=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function p(){}function m(){}function h(){}var y={};c(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==f(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,c(g,"constructor",h),c(h,"constructor",m),m.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function p(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}var m,h,y=Object(c.a)({loader:function(){return Promise.all([n.e(0),n.e(23)]).then(n.bind(null,2363))},loading:l.a}),v=Object(c.a)({loader:(m=d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.loadModule)("larksheet");case 2:return e.abrupt("return",Promise.all([n.e(0),n.e(22)]).then(n.bind(null,2946)));case 3:case"end":return e.stop()}}),e)})),h=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=m.apply(e,t);function a(e){p(o,n,r,a,i,"next",e)}function i(e){p(o,n,r,a,i,"throw",e)}a(void 0)}))},function(){return h.apply(this,arguments)}),loading:l.a});function b(e){var t=e.format,n=e.content;return"spreadjs"===t?"export"===new URLSearchParams(window.location.search).get("mode")?o.a.createElement(y,{content:n,onLoad:e.onLoad}):o.a.createElement(v,{body:n,className:e.className||"",showToolbar:e.showToolbar,sheetStyle:e.geSheetStyle}):"lakesheet"===t?o.a.createElement(y,{versionMode:!!e.versionMode,abilities:e.abilities,docId:e.docId,docType:e.docType,type:e.type,content:n,onLoad:e.onLoad}):null}b.propTypes={className:i.a.string,format:i.a.string.isRequired,abilities:i.a.object,docId:i.a.number.isRequired,content:i.a.string.isRequired,versionMode:i.a.bool,showToolbar:i.a.bool,geSheetStyle:i.a.object,onLoad:i.a.func},t.a=Object(u.b)(b,!0,__("数据出错，请通过历史恢复到最近的正确版本，重新编辑"))},function(e,t,n){"use strict";var r=n(2258);t.a=r.a},,function(e,t,n){"use strict";var r=n(80),o=n.n(r);t.a=new o.a},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(50),n(19)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(34),s=n(1300),f=n(1013),d=n(113),p=n(546);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){h=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var y={};c(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=p.prototype=f.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==m(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function y(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.visible,n=e.onClose,c=e.tip,u=e.organization,d=u.name,m=u.abilities,b=v(Object(a.useState)(),2),g=b[0],_=b[1];Object(a.useEffect)((function(){if(t){var e=function(){var e,t=(e=h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.organizationStatistics.expired({id:u.id});case 2:t=e.sent,_(t);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,c,"next",e)}function c(e){y(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();m&&m.destroy&&e()}}),[t]);var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showPayModel;n(t),c&&l.a.mine.readUserTip({id:c.id,type:c.type})};return i.a.createElement(r.a,{className:p.a.modal,visible:t,onCancel:w,header:null,footer:null,width:654,maskClosable:!1,centered:!0,zIndex:1001},i.a.createElement("img",{src:"//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*00obTaEO8VcAAAAAAAAAAABkARQnAQ",width:"100%"}),i.a.createElement("div",{className:p.a.content,"data-testid":"tip-content"},i.a.createElement("h1",null,__('"{name}" 空间使用到期',{name:d})),i.a.createElement("p",null,__('你的空间 "{name}" 付费权益已到期，到期后只可查看，不可编辑。请及时续费，或降为免费版继续使用。',{name:d})),g&&i.a.createElement(s.a,{statistics:g}),i.a.createElement("div",{className:p.a.footer},i.a.createElement("div",{className:p.a.footerAction},m&&m.destroy?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{"data-testid":"buy-button",onClick:function(){w({showPayModel:!0})},type:"primary"},__("立即续费")),i.a.createElement(f.a,{organization:u,onClick:w})):null),(null==m?void 0:m.destroy)&&i.a.createElement("div",{className:p.a.footerOther},i.a.createElement("a",{href:"//www.yuque.com/yuque/rvzzxz/bnshaa"},__("查看帮助文档"))))))};g.propTypes={organization:u.a.object.isRequired,tip:u.a.object.isRequired,visible:u.a.bool.isRequired,onClose:u.a.func.isRequired},g.isExpiredAndShow=function(e,t){var n=d.a.isExpired(e);return n&&t({type:"error/toggleOrgLimitTip",payload:{orgExpiredModalVisible:!0}}),n},t.a=g},function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var r=n(0),o=n.n(r),a=n(1220);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_root",null),c(this,"rerender",(function(){n._root.forceUpdate(),n._renderHandler&&n._renderHandler()})),c(this,"createRef",(function(){return o.a.createRef()})),this._root=t,this._renderHandler=null,this._bindEvent()}var t,n,r;return t=e,n=[{key:"_bindEvent",value:function(){var e=this;this._root.UNSAFE_componentWillReceiveProps=function(t){e.onRootUpdate(t)},this._root.componentDidMount=function(){e.onRootDidMount()},this._root.componentWillUnmount=function(){e.onRootWillUnMount()}}},{key:"proxyElement",value:function(e,t){return o.a.createElement(a.a,{ref:e},t)}},{key:"createElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1?arguments[1]:void 0;return o.a.createElement(e,t)}},{key:"cloneElement",value:function(e,t){return o.a.cloneElement(e,t)}},{key:"registerRerenderHandler",value:function(e){this._renderHandler=e}}],n&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),l=n(124),s=n(114),f=n.n(s),d=n(80),p=n.n(d);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,r,o=v(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),w(g(t=o.call(this)),"_extendMethodMap",{}),w(g(t),"_extendCommandMap",{}),w(g(t),"onDidChange",(function(){})),w(g(t),"execCommand",(function(e){var n,r=t._extendCommandMap[e];if(!r)throw new Error("ctx.execCommand ".concat(e," not register."));for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(n=t).emit.apply(n,["activePlugin",r].concat(a))})),w(g(t),"activePlugin",(function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(n=t).emit.apply(n,["activePlugin",e].concat(o))})),t.initData(e),t.debug=f()("doc:plugin"),t._pluginEvent=new p.a,t._optionEvent=new p.a,t}return t=a,n=[{key:"initData",value:function(e){this._options=e,this._group=e.group,this._book=e.book,this._doc=e.doc,this._me=e.me,this._version=e.version,this._note=e.note,this._organization=e.organization,this._history=e.history,this._location=e.location,this._match=e.match,this._dispatch=e.dispatch}},{key:"update",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],o=t._options[n];r!==o&&(t._optionEvent.emit("".concat(n,"Changed"),r,o),t.debug("option key change, new %j, old %j",r,o))})),this.initData(e),this._optionEvent.emit("changed")}},{key:"getOption",value:function(e){return this._options[e]}},{key:"doc",get:function(){return this._doc}},{key:"me",get:function(){return this._me}},{key:"book",get:function(){return this._book}},{key:"group",get:function(){return this._group}},{key:"organization",get:function(){return this._organization}},{key:"version",get:function(){return this._version}},{key:"note",get:function(){return this._note}},{key:"abilities",get:function(){return this._doc.abilities}},{key:"editable",get:function(){return!(this.doc.abilities&&!this.doc.abilities.update)&&(window.appData.matchCondition.editType||this.isRunAtRaw)}},{key:"isPublicCloud",get:function(){return window.appData.isPublicCloud}},{key:"isSharePage",get:function(){return window.appData.sharePage}},{key:"share",get:function(){return window.appData.share}},{key:"isAnonymous",get:function(){var e;return!(null!==(e=this.me)&&void 0!==e&&e.id)}},{key:"isRunAtRaw",get:function(){return l.a.isRunAtRaw(this.doc)}},{key:"history",get:function(){return this._history}},{key:"location",get:function(){return this._location}},{key:"match",get:function(){return this._match}},{key:"dispatch",get:function(){return this._dispatch}},{key:"registerCommand",value:function(e,t){if(this._extendCommandMap[t])throw new Error("command ".concat(t," has init before."));this._extendCommandMap[t]=e}},{key:"getCommand",value:function(e){for(var t=0,n=Object.values(this._extendCommandMap);t<n.length;t++){var r=n[t];if(this._extendCommandMap[r]===e)return r}return null}},{key:"extend",value:function(e,t){this[e]=t,this._extendMethodMap[e]=t}},{key:"onPluginEvent",value:function(e,t){this._pluginEvent.on(e,t)}},{key:"emitPluginEvent",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this._pluginEvent).emit.apply(t,[e].concat(r))}},{key:"onOptionEvent",value:function(e,t){this._optionEvent.on(e,t)}}],n&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(p.a),O=n(47),x=n.n(O);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=["setState","getState","reset","on","emit","_event","defaultState","_event"],P=function(){function e(t){var n=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"setState",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=x()(n._state);n._state=k(k({},t),e),Object.keys(e).forEach((function(r){t[r]!==e[r]&&n.emit("".concat(r,"Changed"))})),n.emit("changed")})),C(this,"getState",(function(e){return Array.isArray(e)?e.reduce((function(e,t){return e[t]=n._state[t],e}),{}):n._state[e]})),C(this,"reset",(function(){n._state=x()(n.defaultState)})),this.defaultState=x()(t.state),this._state=t.state||{},this._event=new p.a,new Proxy(this,{get:function(e,t,n){return e[t]&&N.includes(t)?Reflect.get(e,t,n):e._state[t]},set:function(e,t,n){return!N.includes(t)&&(e.setState(C({},t,n)),!0)}})}var t,n,r;return t=e,n=[{key:"on",value:function(){var e;(e=this._event).on.apply(e,arguments)}},{key:"emit",value:function(e){this._event.emit(e)}}],r=[{key:"init",value:function(t){return new e(t)}}],n&&S(t.prototype,n),r&&S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),T=P,A=n(629);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=f()("doc:PluginLoader"),q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(a,e);var t,n,r,o=B(a);function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),V(z(r=o.call(this)),"_instance",new Map),V(z(r),"init",(function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=R(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(r._instance.values());try{for(t.s();!(e=t.n()).done;){e.value.init(),Y("".concat(Plugin.name," has been inited."))}}catch(n){t.e(n)}finally{t.f()}})),r.ctx=e,r.renderCtx=t,r._extendContext(e),r.load(n),r.on("didMount",(function(){r.getAllPlugins().forEach((function(t){t.didMount(e)}))})),r.on("willUnMount",(function(){r.getAllPlugins().forEach((function(t){var n;null===(n=t.state)||void 0===n||n.reset(),t.willUnMount(e)}))})),r.ctx.on("activePlugin",(function(e){for(var t,n=r.getPlugin(e),o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(t=r).activePlugin.apply(t,[n].concat(a))})),r}return t=a,n=[{key:"load",value:function(e){var t=this;e.filter((function(e){return!!e})).forEach((function(e){if(!e.pluginName)throw new Error("Plugin not valid ".concat(e));if("function"!=typeof e)throw new Error("Plugin is not a function ".concat(e));t.loadPlugin(e)}))}},{key:"loadPlugin",value:function(e){var t=new e(this.ctx,this.renderCtx);if(!(t=this._proxyInstance(t,this.ctx)).enable())return!1;this._extendPlugin(t),Y("".concat(e.name," has been loaded.")),this._instance.set(e.pluginName,t)}},{key:"_extendPlugin",value:function(e){var t=this;if(e.state){var n=T.init(e);e.state=n,e.setState=n.setState.bind(n),e.getState=n.getState.bind(n),n.on("changed",(function(){t.renderCtx.rerender()}))}}},{key:"_extendContext",value:function(e){e.extend("render",(function(e,t){return function(n){return n._props=t,Object(A.a)(e,t,(function(e){n._proxy=e}))}}))}},{key:"getPlugin",value:function(e){return this._instance.get(e)}},{key:"getAllPlugins",value:function(){return I(this._instance.values())}},{key:"activePlugin",value:function(e){if("string"==typeof e&&(e=this.getPlugin(e)),!e)return console.warn("Plugin not found");if(e.active){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=e).active.apply(t,r)}}},{key:"_proxyInstance",value:function(e,t){return new Proxy(e,{get:function(n,r,o){return["init","mount","render","enable","active"].includes(r)?function(){if(!e[r])return null;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=e[r].apply(e,[t].concat(o));return"render"===r&&i&&"function"==typeof i?i(e):i}:Reflect.get(n,r,o)}})}}],n&&M(t.prototype,n),r&&M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(p.a);function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,!t.entry)throw new Error("render ".concat(t.entry," argument missing."));this.renderCtx=new u(t.entry),this.renderCtx.onRootUpdate=function(e){n.update(e)},this.renderCtx.onRootDidMount=function(){n.didMount()},this.renderCtx.onRootWillUnMount=function(){n.willUnMount()},this.pluginCtx=new E(t),this.pluginLoader=new q(this.pluginCtx,this.renderCtx,t.plugins)}var t,n,r;return t=e,(n=[{key:"render",value:function(){}},{key:"didMount",value:function(){this.pluginLoader.emit("didMount")}},{key:"willUnMount",value:function(){this.pluginLoader.emit("willUnMount")}},{key:"update",value:function(e){this.pluginCtx.update(e),this.options=e,this.renderCtx.rerender()}}])&&H(t.prototype,n),r&&H(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},,function(e,t,n){"use strict";var r=n(0),o=n(198),a=n.n(o),i=n(1083),c=n(554);t.a=function(e,t){Object(r.useEffect)((function(){var n=new URLSearchParams(window.location.search);if("doc_embed"!==n.get("view")&&!n.get("inner")&&"Thread"!==t.type)return t.abilities&&t.abilities.update&&a()(c.e.edit.key,(function(n){var r=n.target;"INPUT"!==r.tagName&&(r.isContentEditable&&!r.classList.contains("textarea-cell")||("Sheet"===t.type||"Table"===t.type?i.a.saveSheetPosition(t.id):i.a.saveReadPosition(t.id),window.location.href="/".concat(e.namespace,"/").concat(t.slug,"/edit")))})),function(){a.a.unbind(c.e.edit.key)}}),[])}},function(e,t,n){"use strict";n(2773);var r=n(2261),o=(n(96),n(23)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(513),d=n(1546),p=n(1236),m=n.n(p),h=n(510),y=n(38);function v(e){var t=window.appData,n=t.me,r=t.group,o=e.target.closest("a");if(o){var a=o.href;if(!(a.startsWith("/")||a.startsWith("./")||null!=n&&n.id&&null!=r&&r.id&&n.id===r.id)){var i={},c=window.location,u=c.hostname,l=c.protocol,s=c.host,f=c.href;try{i=new URL(a,f)}catch(p){return}if(!/^https?:/i.test(i.protocol)||!i.hostname||i.hostname!==u&&!i.hostname.endsWith(".".concat(u))){e.preventDefault();var d="".concat(l,"//").concat(s,"/r/goto?url=").concat(encodeURIComponent(a));if("_blank"===o.getAttribute("target")){window.open(d);null}else window.location.href=d}}}}var b=n(127),g=n(1027),_=n(295),w=n(89),E={list:"LinkList-module_list_q4p5R",listHorizontal:"LinkList-module_listHorizontal_TGfqL",once:"LinkList-module_once_vrtQo",twice:"LinkList-module_twice_uL6O2",thrice:"LinkList-module_thrice_PDbm-",itemContainer:"LinkList-module_itemContainer_zFewJ",listItem:"LinkList-module_listItem_bFqea",optIconContainer:"LinkList-module_optIconContainer_rupId",itemTailOpt:"LinkList-module_itemTailOpt_b3-4n",optIcon:"LinkList-module_optIcon_wqQG6",icon:"LinkList-module_icon_EyLyT",text:"LinkList-module_text_tnY8+",actions:"LinkList-module_actions_DncGu",operations:"LinkList-module_operations_E05AY",optBtn:"LinkList-module_optBtn_qzErW"};function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){var t,n=e.item,r=e.displayType,c=e.size,u=e.manage,l=e.index,s=e.onUpdateLink,p=e.onRemove,h=e.aspmB,b=j(Object(a.useState)(!1),2),g=b[0],_=b[1];return i.a.createElement("div",{className:r!==f.LIST_DISPLAY_TYPE.horizontal?E.itemContainer:"".concat(E[window.h5?d.PLACEMENT_SIZE.once:c]),key:n.id,draggable:!window.h5&&u,"data-testid":"link-item",onMouseOver:function(){return _(!0)},onMouseLeave:function(){return _(!1)}},i.a.createElement("a",{id:"linklist-".concat(n.id),className:E.listItem,onClick:v,href:m.a.sanitizeUrl(n.url),target:"_blank","data-aspm-click":"".concat(h,"_").concat(l),draggable:!1},i.a.createElement(o.a,{title:__("拖动调整位置")},i.a.createElement("div",{className:E.optIconContainer},u&&i.a.createElement(y.b,{name:"drag",className:E.optIcon,width:10}))),i.a.createElement("span",{className:E.icon},n.icon),i.a.createElement("span",{className:E.text},n.title),u&&g&&i.a.createElement("div",{className:E.itemTailOpt},i.a.createElement(o.a,{title:__("修改"),placement:"top"},i.a.createElement("div",{className:E.optIconContainer,onClick:(t=n,function(e){s(t,l),e&&(e.stopPropagation(),e.preventDefault())}),"data-testid":"custom_edit"},i.a.createElement(y.b,{name:"edit-no-border",className:E.optIcon,width:16,height:16}))),i.a.createElement(o.a,{title:__("删除")},i.a.createElement("div",{className:E.optIconContainer,onClick:function(e){return function(e,t,n){p(e,t,n),e&&e.stopPropagation()}(e,n,l)},"data-aspm-click":"d73382_".concat(l),draggable:!1,"data-testid":"delete-btn"},i.a.createElement("span",{className:"larkicon larkicon-delete ".concat(E.optIcon)}))))))}function N(e){var t,n,o,a=e.links,c=e.onSort,u=e.onDragStart,l=e.displayType,d=N.setIcon(a);return i.a.createElement(r.a,{className:s()(E.list,(t={},n=E.listHorizontal,o=l===f.LIST_DISPLAY_TYPE.horizontal,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t)),onSort:c,onDragStart:u,style:{flexDirection:l===f.LIST_DISPLAY_TYPE.vertical?"column":"row"},"data-empty":__("暂无内容")},d.map((function(t,n){return i.a.createElement(C,x({},e,{key:t.id,index:n,item:t}))})))}C.propTypes={manage:u.a.bool,displayType:u.a.string,onUpdateLink:u.a.func,onRemove:u.a.func,size:u.a.string,index:u.a.number,item:u.a.object,aspmB:u.a.string},N.defaultProps={links:[],onSort:function(){},manage:!1,onRemove:function(){},displayType:f.LIST_DISPLAY_TYPE.vertical,onUpdateLink:function(){}},N.propTypes={onDragStart:u.a.func,onSort:u.a.func,onRemove:u.a.func,links:u.a.array,manage:u.a.bool,displayType:u.a.string,onUpdateLink:u.a.func,size:u.a.string,aspmB:u.a.string},N.setIcon=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,r=O(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.originIcon?o.icon=o.originIcon:o.originIcon=o.icon,o.target&&"Book"===o.target_type)o.icon=i.a.createElement(y.b,{name:_.b.getName("Book",o.target),style:_.b.getStyle(o.target,{size:n})});else if(o.icon){if("string"==typeof o.icon)if(o.icon.startsWith("#"))o.icon=i.a.createElement(g.a,{text:o.icon.substr(1),size:n});else if(o.icon.startsWith("scene:")){var a=o.icon.replace("scene:",""),c=null;"Book"===o.target_type?(c=_.b.getName("Book",{type:o.target_type,scene:a}),o.icon=i.a.createElement(y.b,{name:c,size:n})):w.a.isGroupOrPublication(o)&&(c=_.b.getName("User",{scene:a})),c&&(o.icon=i.a.createElement(y.b,{name:c,size:n}))}else if(o.icon.startsWith("icon:")){var u=JSON.parse(o.icon.replace(/^icon:/,""));o.icon=i.a.createElement(y.b,{name:_.b.getSymbolName(u)||u.symbol,style:{color:_.b.getColor(u)},size:n})}else"Resource"===o.target_type?o.icon=i.a.createElement(y.b,{name:o.icon,width:n}):o.icon=i.a.createElement(b.a,{src:o.icon,size:n})}else if(o.type===f.TYPE.NORMAL||o.type===f.TYPE.GROUP)o.icon=i.a.createElement(y.b,{name:"link",width:n});else if("Resource"===o.target_type){var l=Object(h.getExtname)({name:o.title});o.icon=i.a.createElement(y.b,{name:Object(h.getFileIcon)({ext:l}),width:n})}else o.icon=i.a.createElement(y.b,{name:_.b.getName(o.target_type,{type:o.type}),width:n})}}catch(s){r.e(s)}finally{r.f()}return e};t.a=N},,function(e,t,n){var r=n(2022),o=n(1011),a=n(454),i=n(674),c=n(958),u=n(1293),l=i((function(e,t){var n=u(t);return c(n)&&(n=void 0),c(e)?r(e,o(t,1,c,!0),a(n,2)):[]}));e.exports=l},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(381),u=n(109),l=n(683),s=Object(c.a)({loader:function(){return n.e(0).then(n.bind(null,2360))},loading:l.a});function f(e){var t=e.format,n=e.content;return"laketable"===t?o.a.createElement(s,{versionMode:!!e.versionMode,abilities:e.abilities,docId:e.docId,docType:e.docType,type:e.type,content:n,onLoad:e.onLoad}):null}f.propTypes={format:i.a.string.isRequired,abilities:i.a.object,docId:i.a.number.isRequired,content:i.a.string.isRequired,versionMode:i.a.bool,onLoad:i.a.func},t.a=Object(u.b)(f,!0,__("数据出错，请通过历史恢复到最近的正确版本，重新编辑"))},function(e,t,n){"use strict";n(130);var r=n(35),o=(n(75),n(26)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(140),s=n.n(l),f=n(91),d=(n(611),n(422)),p=n(2198),m="CountryList-module_countrylistItem_tN8fQ",h="CountryList-module_countrylist_JmmcS",y="CountryList-module_countryborder_7uYvw";function v(e){var t=e.onItemClick,n="en-us"===window.appData.locale;return i.a.createElement("div",{className:h},i.a.createElement("div",{className:y},i.a.createElement("div",{className:h},i.a.createElement(d.a,{"data-testid":"selector-list",dataSource:Object(p.b)(n),split:!1,justify:"block",renderItem:function(e){return i.a.createElement("div",{onMouseDown:function(){return t(e.code)}},i.a.createElement("div",null,e.first&&i.a.createElement("div",{"data-en":e.char}),i.a.createElement("div",{"data-testid":"selector-list-item",className:m},n&&i.a.createElement("div",null,e.us," ",e.code),!n&&i.a.createElement("div",null,e.zh," ",e.code))))}}))))}v.propTypes={onItemClick:u.a.func};var b=v,g="PrefixSelectorInput-module_selectorInput_FDEG3";function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(u,e);var t,n,a,c=O(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),S(j(t=c.call(this,e)),"getDefaultPhoneCode",(function(){var e=f.default.get("phoneCode");e&&t.setState({prefix:e})})),S(j(t),"handleNumberChange",(function(e){var n=s.a.trimAllSpace(e.target.value);f.default.set("phoneNumber",n),t.setState({number:n},(function(){t.triggerChange()}))})),S(j(t),"triggerChange",(function(){t.setState({dropdownOpen:!1});var e,n=t.props.onChange;"+86"===t.state.prefix&&(e=t.state.number),"+86"!==t.state.prefix&&(e="".concat(t.state.prefix," ").concat(t.state.number)),n&&n(e)})),S(j(t),"onItemClick",(function(e){f.default.set("phoneCode",e),t.setState({prefix:e},(function(){t.triggerChange()}))})),S(j(t),"toggleDropdownOpen",(function(e){t.setState({dropdownOpen:e})})),t.state={prefix:"+86",number:f.default.get("phoneNumber")||"",dropdownOpen:!1,isSelectCountryEnabled:!0},t}return t=u,(n=[{key:"componentDidMount",value:function(){this.getDefaultPhoneCode(),this.checkMainSiteRegistryPage()}},{key:"checkMainSiteRegistryPage",value:function(){var e=window.appData,t=e.organization,n=e.referOrganization,r=e.settings,o=(null==t?void 0:t.id)||(null==n?void 0:n.id),a=((null==r?void 0:r.foreign_phone_registry_enabled_organization_whitelist)||[]).includes(String(o));"/register"===window.location.pathname&&(!o||!a)&&(f.default.set("phoneCode","+86"),this.setState({isSelectCountryEnabled:!1,prefix:"+86"}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isSelectCountryEnabled,a=t.number,c=t.prefix,u=t.dropdownOpen,l=o.a.Group,s=this.props.inputWidth||"242px",f=this.props.placeholder||__("请输入手机号"),d=function(){return e.props.noDefNumber?e.props.bindMobile?e.props.value:"":a};return i.a.createElement("div",{className:g,"data-testid":"prefixSelectorInput"},n?i.a.createElement(l,{compact:!0,"data-testid":"prefix-selector-input"},i.a.createElement(r.a,{"data-aspm-click":"d001","data-testid":"prefix-selector",dropdownMatchSelectWidth:!1,dropdownStyle:{width:"100%"},getPopupContainer:function(e){return e.parentNode.parentNode},style:{width:"78px",height:"40px"},defaultValue:c,value:c,open:u,onDropdownVisibleChange:this.toggleDropdownOpen,dropdownRender:function(t){return i.a.createElement("div",null,i.a.createElement(b,{onItemClick:e.onItemClick}))}}),i.a.createElement(o.a,{"data-aspm-click":"d002","data-testid":"prefix-phone-input",style:{width:s,height:"40px"},autoComplete:"off",defaultValue:d(),onChange:this.handleNumberChange,type:"tel",ref:function(t){e.input=t},placeholder:f,maxLength:100,size:"large"})):i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{"data-aspm-click":"d002","data-testid":"prefix-phone-input",autoComplete:"off",defaultValue:d(),onChange:this.handleNumberChange,type:"tel",ref:function(t){e.input=t},placeholder:f,maxLength:100,size:"large"})))}}])&&w(t.prototype,n),a&&w(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(a.Component);C.propTypes={inputWidth:u.a.string,onChange:u.a.func,placeholder:u.a.string,noDefNumber:u.a.bool,bindMobile:u.a.bool};t.a=C},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(88),i=n(10),c=n.n(i);t.a=Object(a.d)((function(e){return{loading:e.loading}}))((function(e){var t=e.loading,n=c()({"loading-bar":!0,"loading-bar-show":t.global});return o.a.createElement("div",{className:"loading",id:"lark-loading"},o.a.createElement("div",{className:n}))}))},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(96),n(23)),a=(n(60),n(24)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(10),f=n.n(s),d=n(88),p=n(3177),m=n(3180),h=n(1207),y=n.n(h),v=n(116),b="index-module_btn_ITTNO",g="index-module_icon_6NC01",_="index-module_marked_s1M3m",w="index-module_mobileBtn_5Ez1V",E="index-module_miniIcon_Zj5cR",O="index-module_h5IconCon_c+heW";function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=c.a.forwardRef((function(e,t){var n=e.target,u=e.isMiniType,l=e.isMobile,s=e.me,d=void 0===s?{}:s,h=x(Object(i.useState)(!1),2),y=h[0],j=h[1],k=x(Object(i.useState)(),2),S=k[0],C=k[1];Object(i.useEffect)((function(){j(!!n.marked)}),[n.marked]);var N,P,T,A=function(){var t,r,o;y?(r=e.targetType,o=e.dispatch,v.webProxy.mine.marks.destroy({action_id:S||(null==n||null===(t=n.mark)||void 0===t?void 0:t.id)}).then((function(){j(!1),"User"===r&&o({type:"group/update",payload:{marked:!1}}),e.onStatusChange&&e.onStatusChange(!1)}))):function(){var t,r=e.targetType,o=e.dispatch,i=window.appData,c=i.sharePage,l=i.share;i.isCollaborationPage&&(t=r),d.id?v.webProxy.mine.marks.create({target_type:r,target_id:n.id,share_target_type:c&&l&&l.target_type,collaboration_target_type:t}).then((function(t){j(!0),C(null==t?void 0:t.id),e.onStatusChange&&e.onStatusChange(!0),u||a.a.success(__("收藏成功，可在工作台找到所有收藏")),"User"===r&&o({type:"group/update",payload:{marked:!0}})})).catch((function(e){a.a.error(e.message)})):o({type:"error/toggleLoginModal",payload:{visible:!0}})}()};if(c.a.useImperativeHandle(t,(function(){return{toggleMark:A}})),u){var L=y?__("已收藏"):__("收藏"),I=l?null:L;return c.a.createElement(o.a,{title:I,placement:"bottom"},c.a.createElement("span",{id:"doc-mark",className:f()(E,(N={},P=O,T=l,P in N?Object.defineProperty(N,P,{value:T,enumerable:!0,configurable:!0,writable:!0}):N[P]=T,N)),onClick:A,"data-testid":"mark-entry"},y?c.a.createElement(p.a,{className:g,style:{color:l?"#595959":"#F9A100"}}):c.a.createElement(m.a,{className:g})))}return c.a.createElement(r.a,{id:"doc-mark",className:f()(l?w:b,[y?_:""]),style:e.style,size:l?"default":"small",onClick:A,"data-testid":"mark-entry"},y?c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{className:g,style:{color:"#F9A100"}}),c.a.createElement("span",null,__("已收藏"))):c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,{className:g}),c.a.createElement("span",null,__("收藏"))))}));k.defaultProps={me:window.appData.me,isMobile:window.h5},k.propTypes={isMiniType:l.a.bool,target:l.a.object,targetType:l.a.oneOf(y.a.ALLOW_MARK_TARGET_TYPES).isRequired,style:l.a.object,onStatusChange:l.a.func,me:l.a.object,isMobile:l.a.bool};t.a=Object(d.d)(null,null,null,{forwardRef:!0})(k)},function(e,t,n){"use strict";n(96);var r=n(23),o=(n(60),n(24)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(34),d=n(38),p=n(513),m={quickLinkIcon:"QuickLinkAction-module_quickLinkIcon_Ri9-R",iconActive:"QuickLinkAction-module_iconActive_YXfCw",quickLinkActive:"QuickLinkAction-module_quickLinkActive_8vJkU",icon:"QuickLinkAction-module_icon_baoTe",restore:"QuickLinkAction-module_restore_Vuntp"};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(){y=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(m=b);var g=p.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){g(a,r,o,i,c,"next",e)}function c(e){g(a,r,o,i,c,"throw",e)}i(void 0)}))}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,e);var t,n,a,c=x(u);function u(){var e;w(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return C(k(e=c.call.apply(c,[this].concat(n))),"handleAdd",function(){var t=_(y().mark((function t(n){var r,o,a,i,c,u,l,s,d,p,m,h,v;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.url,o=n.title,a=n.group_id,i=e.props,c=i.onAction,u=i.target_id,l=i.target_type,s=i.refId,d=i.onSubmit,p=i.data,m={url:r,title:o.substr(0,20),target_id:u,target_type:l,group_id:a,ref_id:s},h=f.a.quickLinks.create,p&&p.id&&(h=f.a.quickLinks.update,m.order_num=p.order_num,m.id=p.id),t.next=7,h(b({},m));case 7:v=t.sent,p&&p.id||c("add",v),d(v);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),C(k(e),"handleRemove",function(){var t=_(y().mark((function t(n){var r,a,c,u,l,s,d,p;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.url,a=n.title,c=n.group_id,u=n.target_id,l=n.target_type,s=e.props.onAction,t.next=4,f.a.quickLinks.destroyByTarget({target_id:u,target_type:l,group_id:c});case 4:d=t.sent,p=i.a.createElement("span",null,__("快捷入口删除成功"),i.a.createElement("a",{className:m.restore,onClick:function(t){e.handleAdd({group_id:c,url:r,title:a}),o.a.destroy()}},__("撤销"))),o.a.success(p,1.5),s("remove",d);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),C(k(e),"handleQuickLink",(function(t){t&&t.preventDefault();var n=e.props,r=n.group,o=n.type,a=n.url,i=n.title,c=n.target_id,u=n.target_type;"add"===o?e.handleAdd({group_id:r&&r.id,url:a,title:i}):e.handleRemove({group_id:r&&r.id,url:a,title:i,target_id:c,target_type:u})})),e}return t=u,(n=[{key:"render",value:function(){var e,t=this.props,n=t.type,o=t.dataAspmClick,a=t.className,c=t.showTooltip,u=s()(a,(C(e={},m.quickLink,"add"===n),C(e,m.quickLinkActive,"remove"===n),e)),l="add"===n?__("设为快捷入口"):__("取消快捷入口"),f=i.a.createElement("a",{className:u,"data-aspm-click":o,onClick:this.handleQuickLink,href:"#"},i.a.createElement("span",{className:m.quickLinkIcon},i.a.createElement(d.b,{name:"light-outlined",width:16,className:m.icon}),i.a.createElement(d.b,{name:"light",width:16,className:m.iconActive})),i.a.createElement("span",null,!c&&l));return c?i.a.createElement(r.a,{title:l},f):f}}])&&E(t.prototype,n),a&&E(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(a.Component);N.defaultProps={onAction:function(){},refId:p.BLOCK_TYPE.quickLink,onSubmit:function(){},data:{},showTooltip:!0},N.propTypes={className:u.a.string,onAction:u.a.func,url:u.a.string.isRequired,title:u.a.string.isRequired,dataAspmClick:u.a.string,type:u.a.string,group:u.a.object,target_id:u.a.number,target_type:u.a.string,refId:u.a.string,onSubmit:u.a.func,data:u.a.object,showTooltip:u.a.bool};t.a=N},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(14),o=n(18),a=n(28),i=n(0),c=n(10),u=n.n(c),l=n(197),s=n(257);function f(e){var t=e.className,n=e.direction,a=e.index,c=e.marginDirection,u=e.children,l=e.split,s=e.wrap,f=i.useContext(m),d=f.horizontalSize,p=f.verticalSize,h=f.latestIndex,y={};return f.supportFlexGap||("vertical"===n?a<h&&(y={marginBottom:d/(l?2:1)}):y=Object(r.default)(Object(r.default)({},a<h&&Object(o.a)({},c,d/(l?2:1))),s&&{paddingBottom:p})),null==u?null:i.createElement(i.Fragment,null,i.createElement("div",{className:t,style:y},u),a<h&&l&&i.createElement("span",{className:"".concat(t,"-split"),style:y},l))}var d=n(1332),p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},m=i.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),h={small:8,middle:16,large:24};t.b=function(e){var t,n=i.useContext(s.b),c=n.getPrefixCls,y=n.space,v=n.direction,b=e.size,g=void 0===b?(null==y?void 0:y.size)||"small":b,_=e.align,w=e.className,E=e.children,O=e.direction,x=void 0===O?"horizontal":O,j=e.prefixCls,k=e.split,S=e.style,C=e.wrap,N=void 0!==C&&C,P=p(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),T=Object(d.a)(),A=i.useMemo((function(){return(Array.isArray(g)?g:[g,g]).map((function(e){return function(e){return"string"==typeof e?h[e]:e||0}(e)}))}),[g]),L=Object(a.a)(A,2),I=L[0],R=L[1],D=Object(l.a)(E,{keepEmpty:!0}),M=void 0===_&&"horizontal"===x?"center":_,F=c("space",j),B=u()(F,"".concat(F,"-").concat(x),(t={},Object(o.a)(t,"".concat(F,"-rtl"),"rtl"===v),Object(o.a)(t,"".concat(F,"-align-").concat(M),M),t),w),U="".concat(F,"-item"),z="rtl"===v?"marginLeft":"marginRight",G=0,V=D.map((function(e,t){return null!=e&&(G=t),i.createElement(f,{className:U,key:"".concat(U,"-").concat(t),direction:x,index:t,marginDirection:z,split:k,wrap:N},e)})),Y=i.useMemo((function(){return{horizontalSize:I,verticalSize:R,latestIndex:G,supportFlexGap:T}}),[I,R,G,T]);if(0===D.length)return null;var q={};return T&&(q.columnGap=I,q.rowGap=R),i.createElement("div",Object(r.default)({className:B,style:Object(r.default)(Object(r.default)(Object(r.default)({},q),N&&{flexWrap:"wrap",marginBottom:-R}),S)},P),i.createElement(m.Provider,{value:Y},V))}},function(e,t,n){"use strict";e.exports={PLATFORMS:["alipay","dingtalk","wechat","weixin","teambition","aone_teambition","apple"],PLATFORM_NAMES:{alipay:"支付宝 Alipay",dingtalk:"钉钉 DingTalk",wechat:"微信 WeChat",weixin:"企业微信 WeWork",teambition:"Teambition",aone_teambition:"Aone Teambition",apple:"Apple"},PLATFORM_ADDRESS_NAMES:{alipay:"支付宝通讯录",dingtalk:"钉钉通讯录",wechat:"微信通讯录",weixin:"企业微信通讯录",teambition:"Teambition通讯录",aone_teambition:"Aone Teambition通讯录",apple:"Apple通讯录"},CUSTOM_PASSPORT:"custom_passport"}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b}));n(175);var r=n(84),o=(n(133),n(31)),a=n(0),i=n(122),c=n(38),u=n(2352),l=n(565),s="TemplateTreeItem-module_item_rGFbi",f="TemplateTreeItem-module_title_15bPv",d="TemplateTreeItem-module_docIcon_494bD",p="TemplateTreeItem-module_name_kpLbs",m="TemplateTreeItem-module_menuItem_FWIgC",h="TemplateTreeItem-module_more_ikuvF",y="TemplateTreeItem-module_actionIcon_haD5C",v=a.memo((function(e){var t=e.node,n=e.className,r=e.size,o=void 0===r?"small":r;if(!Object(l.a)(t))return null;var c,s=Object(l.a)(t)&&i.FORMAT_TYPE_MAP[t.format];return t.type===i.TYPE.OFFICIAL?a.createElement("span",{className:n,style:{fontSize:"large"===o?26:18}},((null===(c=t.meta)||void 0===c?void 0:c.character)||"📃").trim()):a.createElement(u.a,{width:"large"===o?26:22,className:n,type:s})})),b=a.memo((function(e){var t=e.data,n=e.hasActions,i=e.onAction,u=t;return a.createElement("div",{className:s},a.createElement("div",{className:f},Object(l.a)(u)&&a.createElement(v,{className:d,node:u}),a.createElement("span",{className:p,title:u.name},u.name),n&&a.createElement("span",{onClick:function(e){return e.stopPropagation()}},a.createElement(r.a,{type:"menu",hideWhenInactive:!0,placement:"bottomRight",arrowPointAtCenter:!0,trigger:["click"],content:a.createElement(o.a,{selectable:!1},a.createElement(o.a.Item,{key:"edit",className:m,onClick:function(){return null==i?void 0:i("edit",u)}},a.createElement(c.b,{name:"pencil-underscore",width:16,className:y}),__("编辑")),a.createElement(o.a.Item,{key:"delete",className:m,onClick:function(){return null==i?void 0:i("delete",u)}},a.createElement(c.b,{name:"newtrash-outlined",width:16,className:y}),__("删除")))},a.createElement("span",{className:h,onClick:function(e){return e.stopPropagation()}},a.createElement(c.b,{name:"more-vertical",width:16}))))))}))},function(e,t){t.isUp=function(e,t){var n=e[0],r=e[1],o=e[0]+e[2],a=e[1]+e[3],i=t[0],c=t[1],u=t[0]+t[2],l=t[1]+t[3];return!(n<i)&&(n>i||!(r<c)&&(r>c||!(o>u)&&(o<u||!(a>l))))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return i}));var r=n(91),o="register/source";function a(e){return e&&e.split(".")[1]}function i(){var e=new URLSearchParams(window.location.search).get("source");if(e)return e;var t=r.default.get(o);if(t)return t;var n=a((window.Tracert||{})._refSpm);return n||null}function c(){var e=a((window.Tracert||{})._refSpm);e&&"new_session"!==e&&"register"!==e&&r.default.set(o,e)}function u(){"complete"===document.readyState?setTimeout(c,2e3):window.addEventListener("load",(function(){setTimeout(c,2e3)}))}},,function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(10),i=n.n(a),c=n(109);t.a=Object(c.b)((function(e){var t=e.children,n=e.mode,r=e.isMain,a=e.className,c=i()(a,"clearfix","layout-container",{"layout-container-wider":"wider"===n,"layout-container-middle":"middle"===n,"layout-container-full":"full"===n,"layout-container-main":r});return o.a.createElement("div",{className:c},t)}),!0)},,function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(380),i=n(2),c=n.n(i),u=function(e){var t,n=e.type,r=void 0===n?"Doc":n,i=e.target,c=e.style;return r&&i&&window.appData.isYuque?((null===(t=window.appData)||void 0===t?void 0:t.settings)||{}).disable_ip_region_model?null:(Object(a.a)()||Object(a.b)())&&("Doc"!==r||i.first_published_at)&&i.region?o.a.createElement("span",{style:c},__("IP 属地"),i.region||__("未知")):null:null};u.propTypes={target:c.a.object.isRequired,type:c.a.string},t.a=u},function(e,t,n){"use strict";n(175);var r=n(84),o=(n(133),n(31)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(38),s=n(665),f=n(312),d=n(684),p=n(17),m=n(358),h=n(2032),y=n(850);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e.book,n=e.item,r=e.setEditItem,o=e.hideCopyWithChildren,i=_(Object(a.useState)(!1),2),c=i[0],u=i[1],l=function(){u(!c)},s=y.a.useViewModel(b(b({},e),{},{showRepoSelector:!0,hideCopyWithChildren:o}));return{state:{exportModalVisible:c},handleMenuClick:function(o,a){switch(o.domEvent.stopPropagation(),a){case p.a.DOC.copyLink.cmd:s.copyLink();break;case p.a.CATALOG.copy.cmd:s.showCopyToModal();break;case p.a.CATALOG.move.cmd:s.showMoveToModal();break;case p.a.CATALOG.edit_link.cmd:s.showLinkNodeModal();break;case p.a.CATALOG.remove.cmd:s.showRemoveConfirmModal();break;case p.a.CATALOG.destroy.cmd:s.showDestroyConfirmModal();break;case p.a.DOC.unshare.cmd:s.showUnshareConfirmModal();break;case p.a.CATALOG.rename.cmd:r(n.uuid);break;case p.a.CATALOG.export.cmd:l();break;case p.a.CATALOG.view_doc.cmd:Object(m.b)("/".concat(t.namespace,"/").concat(n.url));break;case p.a.DOC.edit.cmd:Object(m.b)("/".concat(t.namespace,"/").concat(n.url,"/edit"))}e.onMenuItemClick(o,a)},toggleExportModalVisible:l}},O=function(e){var t=e.item,n=e.mode,c=e.book,u=e.placement,p=e.align,m=e.visible,y=e.onVisibleChange,v=e.children,b=E(e),g=Object(a.useRef)(),_=f.a.actionsForEdit(t,n,c.abilities);return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["click"],arrowPointAtCenter:!0,hideWhenInactive:!0,visible:m,onVisibleChange:y,align:p,placement:u,getPopupContainer:function(){var e;return(null===(e=g.current)||void 0===e?void 0:e.closest("[".concat(d.c,"]")))||document.body},content:i.a.createElement(o.a,null,_.map((function(e){return"divide"===e.cmd?i.a.createElement(o.a.Divider,{key:e.cmd}):i.a.createElement(o.a.Item,{key:e.cmd,onClick:function(t){b.handleMenuClick(t,e.cmd)}},i.a.createElement("div",{className:h.a.menuItemContent},i.a.createElement("span",{className:h.a.iconWrapper},i.a.createElement(l.b,{name:e.icon,width:16,height:16})),i.a.createElement("span",null,e.title)))})))},i.a.cloneElement(v,{ref:g})),b.state.exportModalVisible&&i.a.createElement(s.a,{visible:!0,bookId:c.id,exportParams:{doc_id:t.doc_id,toc_node_uuid:t.uuid,toc_node_url:t.url,toc_node_title:t.title,create_from:"doc_toc"},onCancel:b.toggleExportModalVisible,canExportMultiple:!0}))};O.defaultProps={mode:"lite",onMenuItemClick:function(){},hideCopyWithChildren:!1},O.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,catalog:u.a.array,item:u.a.object.isRequired,mode:u.a.oneOf(["full","lite","desktop"]),placement:u.a.string,align:u.a.object,children:u.a.node.isRequired,visible:u.a.bool,onVisibleChange:u.a.func,onAction:u.a.func,setEditItem:u.a.func,onMove:u.a.func,onCopy:u.a.func,isActive:u.a.bool,onMenuItemClick:u.a.func,onUnshare:u.a.func,hideCopyWithChildren:u.a.bool},t.a=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"d",(function(){return b}));var r=n(287),o=n(17),a=n(124),i=n(34);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,i,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,c,"next",e)}function c(e){d(a,r,o,i,c,"throw",e)}i(void 0)}))}}function m(e){return h.apply(this,arguments)}function h(){return h=p(u().mark((function e(t){var n,c,l,f=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},c=o.a.DOC.create_doc,l=s({title:r.a.getDefaultTitle(a.a.adapterDocType(c.docType)),type:a.a.adapterDocType(c.docType),format:a.a.getDefaultFormat(c.docType),book_id:t.id,status:0},n),e.next=5,i.a.docs.createDoc(l);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function y(e){var t=new URLSearchParams(e).get("group_id");return t?{id:parseInt(t,10),type:"Group"}:null}function v(e){var t=new URLSearchParams(e).get("book_id");return t?parseInt(t,10):null}function b(e){var t=new URLSearchParams(e).get("note_id");return t?parseInt(t,10):null}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(1296),s=n(610);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=e.onChange,n=e.visiable,r=function(e){var t=e.onChange,n=(e.visiable,e.value);return{state:{selecedtIndex:n},select:function(e){var r=e;n===e&&(r=0),t(r)}}}({onChange:t,visiable:n,value:e.value}),a=r.state.selecedtIndex;return n?o.a.createElement("div",{className:s.a.container},[1,2,3,4,5].map((function(e,t){return o.a.createElement("div",{key:e,className:u()(s.a.moodSelectorItem,f({},s.a.moodSelectorItemSelected,a===t+1)),onClick:function(){r.select(t+1)}},o.a.createElement(l.a,{size:"mini",name:e}))}))):null}d.propTypes={value:i.a.number,visiable:i.a.bool,onChange:i.a.func.isRequired},t.a=d},function(e,t,n){"use strict";n(1225);var r=n(1463),o=(n(245),n(64)),a=(n(96),n(23)),i=(n(133),n(31)),c=(n(60),n(24)),u=n(0),l=n.n(u),s=n(114),f=n.n(s),d=n(88),p=n(2),m=n.n(p),h=n(22),y=n(270),v=n.n(y),b=n(32),g=n.n(b),_=n(289),w=n.n(_),E=n(10),O=n.n(E),x=n(38),j=n(1358),k=(n(79),n(44)),S="AboutYuqueVideo-module_video_BXzun";function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=function(e){var t=C(Object(u.useState)(!1),2),n=t[0],r=t[1];return l.a.createElement(l.a.Fragment,null,l.a.cloneElement(e.children,{onClick:function(){r(!0)}}),l.a.createElement(k.a,{zIndex:1509,visible:n,onCancel:function(){r(!1)},wrapClassName:S,width:1056,destroyOnClose:!0},l.a.createElement("video",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/file/A*oIndSLbrp0kAAAAAAAAAAABjARQnAQ",controls:"controls","data-type":"video/mp4",autoPlay:"autoPlay"})))};P.propTypes={children:m.a.node.isRequired};var T=P,A=n(109),L=n(2225),I=n(261),R="TipModal-module_modal_dSvZc",D="TipModal-module_content_1m7WF",M="TipModal-module_close_fE+6v",F=/Macaca UI Robot/,B=function(e){var t=e.visible,n=e.tip;if(F.test(window.navigator.userAgent)||!t||!n)return null;return l.a.createElement(k.a,{zIndex:1509,width:424,visible:t,header:null,footer:null,closable:!1,centered:!0,className:R},l.a.createElement("div",{className:D,onClick:function(t){"close"===t.target.getAttribute("data-action")&&e.read()},"data-testid":"tip-modal"},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:n.content}})),l.a.createElement("a",{className:M,onClick:e.read,"data-aspm-click":"d188273","data-testid":"tip-modal-close"},l.a.createElement(I.a,null)))};B.propTypes={tip:m.a.object.isRequired,visible:m.a.bool.isRequired,read:m.a.func.isRequired};var U=B,z="index-module_entry_2-+WM",G="index-module_dropdown_FCtk3",V="index-module_icon_kTK9L",Y="index-module_dropdownTrigger_bAACL",q="index-module_wrapper_NMasE",H="index-module_hotkeysPanel_2mTMq";function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function K(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return te(this,n)}}function te(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=new f.a("sys:sitetip"),ie={whiteSpace:"nowrap"},ce={siteTip:window.appData.siteTip||null,readTip:window.appData.readTip||null},ue=v.a.safari,le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(f,e);var t,n,u,s=ee(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),oe(ne(t=s.call(this,e)),"showHotkeys",(function(e){191===e.keyCode&&(h.ua.macos?e.metaKey:e.ctrlKey)&&e.altKey&&t.showView("hotkeys"),27===e.keyCode&&t.hideView("hotkeys")})),oe(ne(t),"initModalVisible",(function(){var e=t.hasUnreadTip();ae("init, has read tip: ",e);var n=w.a.parse(window.location.search).toast;if(n)switch(n){case"group_migrate":c.a.success(__("团队已成功迁入空间"));break;case"group_upgrade":c.a.success(__("团队已升级为空间"))}t.setState((function(n){return{views:X(X({},n.views),{},{tip:e&&t.props.defaultOpen})}}))})),oe(ne(t),"hasUnreadTip",(function(){var e=t.state,n=e.readTip,r=e.siteTip;if(!r)return!1;var o=window.appData,a=o.locale,i=o.me,c=o.organization;if("zh-cn"!==a)return!1;if("0"===w.a.parse(window.location.search).site_tip)return!1;if(i&&g()(i.created_at).isSameOrAfter(r.created_at))return!1;if(c&&g()(c.created_at).isSameOrAfter(r.created_at))return!1;if(!n)return!0;var u=n[r.type]||0,l=Array.isArray(u)?Math.max.apply(Math,K(u)):u;return r.id>l})),oe(ne(t),"markSiteTipAsRead",(function(){var e=t.props.dispatch,n=t.state.siteTip,r=n.type;t.hasUnreadTip()?e({type:"proxy.web/mine.readTip",payload:{data:{id:n.id,type:r}}}).then((function(){t.hideView("tip"),t.setState((function(e){var t=e.readTip||{};return t[r]=n.id,X(X({},e),{},{readTip:X({},t)})}))})):t.hideView("tip")})),oe(ne(t),"handleVisibleChange",(function(e){t.setState({dropdownVisible:e})})),oe(ne(t),"getHelpMenu",(function(){var e=window.appData.isYuque;return l.a.createElement(i.a,{subMenuOpenDelay:.2,openAnimation:null},t.state.siteTip&&l.a.createElement(i.a.Item,{key:"new_feature",onClick:t.showModal},__("新功能")),l.a.createElement(i.a.Item,{key:"about"},l.a.createElement(T,null,l.a.createElement("a",null,__("语雀视频介绍")))),l.a.createElement(i.a.Item,{key:"org"},l.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/rfwopm",target:"_blank"},__("语雀空间介绍"))),l.a.createElement(i.a.Item,{key:"help"},l.a.createElement("a",{href:"/help",target:"_blank"},__("使用帮助"))),l.a.createElement(i.a.Item,{key:"changelog"},l.a.createElement("a",{href:"https://www.yuque.com/yuque/changelog",target:"_blank"},__("更新日志"))),l.a.createElement(i.a.Item,{key:"feedback"},l.a.createElement("a",{href:"/feedbacks/new",target:"_blank"},__("反馈给语雀"))),l.a.createElement(i.a.Item,{key:"homepage"},l.a.createElement("a",{href:"https://www.yuque.com/about",target:"_blank"},__("语雀官网"))),l.a.createElement(i.a.Item,{key:"contact"},l.a.createElement("a",{href:e?"https://www.yuque.com/yuque/cdgcvd/ca1gxp":"https://yuque.antfin.com/lark/help/join",target:"_blank"},__("联系我们"))))})),oe(ne(t),"showModal",(function(){t.hasUnreadTip()||t.showView("tip")})),oe(ne(t),"enableMarkdown",(function(e){return e.find((function(e){return e.children.find((function(e){return e.markdown}))}))})),oe(ne(t),"adapterWidth",(function(e){var n=t.enableMarkdown(e);return ue?n?524:384:n?484:344})),t.rootRef=l.a.createRef(),t.pageName=t.getPageName(),ae("init use",{pageName:t.pageName,tipData:ce}),t.state={siteTip:ce.siteTip,readTip:ce.readTip,views:{hotkeys:!1,tip:!1},dropdownVisible:!1,formGuideActive:!1},t}return t=f,(n=[{key:"componentDidMount",value:function(){this.initModalVisible(),document.addEventListener("keydown",this.showHotkeys)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.showHotkeys)}},{key:"showView",value:function(e){this.setState((function(t){var n=X({},t.views);return n[e]=!0,{views:n}}))}},{key:"hideView",value:function(e){this.setState((function(t){var n=X({},t.views);return n[e]=!1,{views:n}}))}},{key:"getPageName",value:function(){var e=this.props.page;return e&&(e.ctx||{}).pageName||null}},{key:"render",value:function(){var e=this,t=this.state.siteTip,n=this.props,i=n.hotKeys,c=n.disableHelpMenus,u=n.hidable;if(window.appData.isDesktopApp)return null;var s=l.a.createElement(l.a.Fragment,null,i&&l.a.createElement("div",{className:Y,onClick:function(){e.showView("hotkeys")}},l.a.createElement(a.a,{overlayInnerStyle:ie,title:l.a.createElement("span",{style:ie},__("快捷键")+(h.ua.macos?"⌥ ⌘ ?":"Alt Ctrl ?"))},l.a.createElement("span",{className:V},l.a.createElement(x.b,{name:"editor-shortcut"})))),!c&&l.a.createElement(o.a,{overlayClassName:G,placement:"topRight",overlay:this.getHelpMenu(),visible:this.state.dropdownVisible,onVisibleChange:this.handleVisibleChange,getPopupContainer:function(e){return e.parentNode}},l.a.createElement("div",{className:Y},l.a.createElement("span",{className:V},l.a.createElement(x.b,{name:"site-tip",width:16,height:16})))),t&&l.a.createElement(U,{visible:this.state.views.tip,tip:t,read:this.markSiteTipAsRead}),i&&l.a.createElement(r.a,{closable:!0,width:this.adapterWidth(i),className:H,placement:"right",mask:!1,onClose:function(){e.hideView("hotkeys")},visible:this.state.views.hotkeys},l.a.createElement(j.a,{config:i,enableMarkdown:this.enableMarkdown(i)})));return u?l.a.createElement(L.a,{className:O()(q,z),ref:this.rootRef,testId:"site-tip",id:"siteTipGuide"},s):l.a.createElement("div",{className:q,ref:this.rootRef,"data-testid":"site-tip",id:"siteTipGuide"},l.a.createElement("div",{className:z,style:{position:"fixed"}},s))}}])&&J(t.prototype,n),u&&J(t,u),Object.defineProperty(t,"prototype",{writable:!1}),f}(l.a.Component);le.defaultProps={defaultOpen:!0},le.propTypes={page:m.a.object,hotKeys:m.a.array,disableHelpMenus:m.a.bool,dispatch:m.a.func,hidable:m.a.bool,defaultOpen:m.a.bool};t.a=Object(A.b)(Object(d.d)((function(e){return{page:e.page}}))(le),!1)},,,function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(322),s=(n(166),n(65)),f=(n(50),n(19)),d=(n(178),n(45)),p=(n(75),n(26)),m=n(2364);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(){y=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(m=b);var g=p.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function v(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=e.parentComment,n=e.replyingTo,a=e.rootId,i=e.onSubmit,c=e.commentForbidden,u=Object(r.useRef)(new m.a(t)),l=u.current.retrieveFromCache(),h=b(Object(r.useState)(l),2),g=h[0],_=h[1],w=b(Object(r.useState)(!1),2),E=w[0],O=w[1],x=function(){var e,r=(e=y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,i({root_id:a,parent_id:t.id,to_user_id:n?n.user_id:null,value:g});case 4:u.current.clearCache(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Create reply failed.",e.t0),O(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,c,"next",e)}function c(e){v(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return o.a.createElement("div",{"data-testid":"subcomment-input"},o.a.createElement(s.a,{type:"flex",style:{flexWrap:"nowrap"},gutter:[8,0]},o.a.createElement(d.a,{style:{flex:"auto"}},o.a.createElement(p.a.TextArea,{defaultValue:l,"data-testid":"thread-reply-input",autoFocus:!0,placeholder:n?"".concat(__("回复")," ").concat(n.user&&n.user.name):__("请输入评论"),onChange:function(e){var t=e.target.value;u.current.saveToCache(t),_(t)},onKeyDown:function(e){13===e.keyCode&&e.metaKey&&x()},rows:1,autoSize:!0,style:{resize:"none"}})),o.a.createElement(d.a,{style:{flex:"none"}},o.a.createElement(f.a,{"data-testid":"thread-reply-submit",disabled:c||!g||E,onClick:x,type:"primary"},__("提交")))))};_.propTypes={parentComment:i.a.object.isRequired,replyingTo:i.a.object,rootId:i.a.number,onSubmit:i.a.func.isRequired,commentForbidden:i.a.bool};var w=_,E=(n(246),n(110)),O=(n(96),n(23)),x=n(38),j=n(380),k=n(1004),S=n(253),C=n(1023),N="index-module_container_JwbaQ",P="index-module_itemContainer_RcIRE",T="index-module_last_xa5I1",A="index-module_user_hWCSV",L="index-module_action_buLnC",I="index-module_content_t0isf",R="index-module_actionItem_ixVx1",D="index-module_showAll_rJWWz",M="index-module_post_YNHrc",F="index-module_empty_ZXE0G",B="index-module_riskIcon_InjtZ";function U(e){var t,n,r,a=e.user,i=e.id,c=e.status,l=e.is_last,s=e.to_user,f=e.me,d=e.content,p=e.beginToReply,m=e.deleteComment,h=!!f;return o.a.createElement("div",{id:"comment-".concat(i),className:u()(P,(t={},n=T,r=l,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))},o.a.createElement("a",{className:A,href:"/go/user/".concat(a.id),target:"_blank"},a&&a.name),s&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:L},__("回复")),o.a.createElement("a",{href:"/go/user/".concat(s.id),className:A,target:"_blank"},s&&s.name)),o.a.createElement("span",null,"："),o.a.createElement("span",{className:I,"data-comment-type":"reply"},o.a.createElement(C.a,{content:d})),-1===c&&o.a.createElement(O.a,{title:__("当前内容违规无法展示")},o.a.createElement("div",{className:B},o.a.createElement(x.b,{name:"doc-has-content-risk",height:16,width:15}))),h&&f.id!==(a&&a.id)&&o.a.createElement("span",{onClick:function(){p(i)},className:R},__("回复")),function(){if(!window.appData.isPublicCloud)return!1;var e=Object(j.a)()||Object(j.b)();return c===S.STATUS.normal&&e&&f&&f.id!==a.id}()&&o.a.createElement(k.a,{targetId:i,targetType:"Comment"},(function(e){return o.a.createElement("span",{className:R,onClick:e.onShowPanel},__("举报"))})),h&&f.id===(a&&a.id)&&o.a.createElement(E.a,{title:__("确认删除该评论么？"),onConfirm:function(){m(i)},okText:"确认",cancelText:"取消",getPopupContainer:function(e){return e.parentNode}},o.a.createElement("span",{className:R},__("删除"))))}U.propTypes={id:i.a.number,status:i.a.number,is_last:i.a.bool,user:i.a.object,to_user:i.a.object,me:i.a.object,content:i.a.string,beginToReply:i.a.func,deleteComment:i.a.func};var z=U;function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function V(){V=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==G(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Y(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e){var t,n=e.parentComment,o=e.subComments,a=void 0===o?[]:o,i=e.me,c=e.replyingToPost,u=e.onSubmit,s=e.onDelete,f=e.cancelReplyingToPost,d=e.auto_expand,p=e.comment_forbidden,m=e.getRootCommentByParentComment,h=Object(r.useMemo)((function(){return l.a.includesHashAnchoredComment(a,window.location.hash)}),[a]),y=Object(r.useRef)(null),v=q(Object(r.useState)(h),2),b=v[0],g=v[1],_=q(Object(r.useState)(!1),2),w=_[0],E=_[1],O=q(Object(r.useState)(null),2),x=O[0],j=O[1],k=function(){g(!0)},S=function(e){if(e.target.innerText!==__("回复")){var t=document.getElementById("comment-".concat(n.id));t&&t.contains(e.target)||(E(!1),f())}},C=function(){var e,t=(e=V().mark((function e(t){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:j(null),E(!1),k(),f();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Y(a,r,o,i,c,"next",e)}function c(e){Y(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{state:{showAllFlag:d||b,subComments:a,me:i,isReplyIng:c||w,replyingToSubCommentId:x,actionContainerRef:y,commentForbidden:p,rootId:null===(t=m(n))||void 0===t?void 0:t.id},init:function(){document.addEventListener("click",S,!0)},destroy:function(){document.removeEventListener("click",S)},showAll:k,replyToSubComment:function(e){E(!0),f(),j(e)},submit:C,deleteComment:function(e){s(e)},getReplyTo:function(){return x?a.find((function(e){return e.id===x})):null}}}var K=function(e){var t=W(e),n=t.state;if(Object(r.useEffect)((function(){return t.init(),t.destroy}),[]),0===n.subComments.length&&!n.isReplyIng)return null;var a,i,c,l=n.subComments.length>10&&!n.showAllFlag;return o.a.createElement("div",{className:N},n.subComments.map((function(e,r){var a=e.user,i=e.to_user,c=e.body,u=e.id,s=e.status;return r+1>10&&l?null:o.a.createElement(z,{key:u,id:u,status:s,is_last:r===n.subComments.length-1,user:a,to_user:i,content:c,me:n.me,beginToReply:t.replyToSubComment,deleteComment:t.deleteComment})})),l&&o.a.createElement("div",{onClick:t.showAll,className:D},__("查看全部")),n.isReplyIng&&o.a.createElement("div",{ref:n.actionContainerRef,className:u()(M,(a={},i=F,c=0===n.subComments.length,i in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,a))},o.a.createElement(w,{parentComment:e.parentComment,replyingTo:t.getReplyTo(),rootId:t.state.rootId,onSubmit:t.submit,commentForbidden:n.commentForbidden})))};K.propTypes={replyingToPost:i.a.bool,me:i.a.object,parentComment:i.a.object,subComments:i.a.array,onSubmit:i.a.func,onDelete:i.a.func,cancelReplyingToPost:i.a.func,auto_expand:i.a.bool,comment_forbidden:i.a.bool,getRootCommentByParentComment:i.a.func.isRequired};t.a=K},function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return N}));n(120);var r=n(63),o=(n(50),n(19)),a=(n(60),n(24)),i=n(0),c=n.n(i),u=n(10),l=n.n(u),s=n(2),f=n.n(s),d=n(2249),p=n(260),m=n(1071),h=n(127),y=n(34),v=n(364),b=n(995),g=n(2085),_=n(358),w={wrapper:"index-module_wrapper_o2mZ7",card:"index-module_card_A8KAK",header:"index-module_header_vgUrp",actions:"index-module_actions_vhjom",btn:"index-module_btn_UpeOY",defaultBtn:"index-module_defaultBtn_FOF2w",orgWrapper:"index-module_orgWrapper_cOEf3",floatLeftBtn:"index-module_floatLeftBtn_l09Ag",orgLogo:"index-module_orgLogo_tORp1",orgInfo:"index-module_orgInfo_6J3Y3",orgName:"index-module_orgName_hdqkQ",placeholer:"index-module_placeholer_f-CLv"};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(){O=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==E(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function x(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){x(a,r,o,i,c,"next",e)}function c(e){x(a,r,o,i,c,"throw",e)}i(void 0)}))}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C="orgSwitch",N=function(e,t){var n=e.organization,r=Object(b.a)(n),o=k(Object(i.useState)(r.current.leaving_info_enable),2),c=o[0],u=o[1],l=Object(v.a)(y.a.organizations.update),s=l.request,f=l.loading,d=Object(g.a)(c),p=Object(i.useCallback)(function(){var e=j(O().mark((function e(o){var i,c;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=o?1:0,e.next=3,s({id:null===(i=r.current)||void 0===i?void 0:i.id,leaving_info_enable:c});case 3:u(c);try{n.leaving_info_enable=c}finally{(null==t?void 0:t.showSuccessMsg)&&a.a.success(__("更新成功"))}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r.current]),m=function(){var e=j(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{loading:f,state:c,preLeavingState:d,onChange:p,close:m}},P=function(e){var t,n=e.organization,a=e.originalOrg,u=e.currentUser,s=e.defaultSpaceHost,f=e.onCancel,y=u.publicName||u.name,v=u.publicAvatar||u.avatar_url,b=n?n.host:s,g=a.host,E=N({organization:a}),x=function(){return Object(_.b)(b)},k=function(){var e=j(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(_.b)("".concat(g,"/r/organizations/dashboard/settings?type=advanced&mark=").concat(C)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){E.state||setTimeout(x,150)}),[]),E.state||E.preLeavingState?c.a.createElement("div",{className:w.wrapper},c.a.createElement(r.a,{className:w.card},c.a.createElement("h2",{className:w.header},n?__("确定切换空间吗？"):__("确定切换到个人吗？")),c.a.createElement("div",{className:w.body},n&&c.a.createElement("p",null,__("你正在切换空间。空间彼此数据隔离，请注意确认信息安全。点击确认进入 {location} 工作台。",{location:n.name})),!n&&c.a.createElement("p",null,__("你正在从空间切换到个人，请注意确认信息安全。点击确认进入 {location} 的个人工作台。",{location:y})),c.a.createElement("div",{className:w.orgWrapper},n?c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a.Logo,{src:n.logo,size:40,className:w.orgLogo}),c.a.createElement("div",{className:w.orgInfo},c.a.createElement(p.a.Name,{organization:n,className:w.orgName}),c.a.createElement("p",null,n.member.name||y))):c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{className:w.orgLogo,src:v,size:40,name:y}),c.a.createElement("div",{className:w.orgInfo},c.a.createElement("h6",{className:w.orgName},y))))),c.a.createElement("div",{className:w.actions},(null==a||null===(t=a.abilities)||void 0===t?void 0:t.update)&&c.a.createElement("button",{onClick:k,disabled:E.loading,className:w.floatLeftBtn,type:"button","data-testid":"leving_info_close"},c.a.createElement(d.a,null),c.a.createElement(m.a,{variant:"body",type:"secondary",ml:5},__("不再提示"))),c.a.createElement("span",{className:w.placeholer}),c.a.createElement(o.a,{onClick:f,className:l()(w.btn,w.defaultBtn)},__("取消")),c.a.createElement(o.a,{type:"primary",href:b,className:w.btn},__("确定"))))):null};P.propTypes={organization:f.a.object.isRequired,originalOrg:f.a.object.isRequired,currentUser:f.a.object.isRequired,defaultSpaceHost:f.a.string.isRequired,onCancel:f.a.func.isRequired};t.a=P},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(130),n(35)),a=(n(75),n(26)),i=(n(60),n(24)),c=(n(218),n(51)),u=n(0),l=n.n(u),s=n(2),f=n.n(s),d=n(131),p=n(373),m=n.n(p),h=n(117),y=n(88),v=n(1241),b=n(590),g=n(613),_=n(1272),w=n(89),E=n(313),O=n(167),x=n(34),j=n(1455),k="index-module_newRepoWrap_dEIFH",S="index-module_content_Paldp",C="index-module_basicInfoNormal_0J70G",N="index-module_submitBtnWrapper_D+zDy",P="index-module_submitBtn_ANP9f";function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(){L=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==T(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){M(a,r,o,i,c,"next",e)}function c(e){M(a,r,o,i,c,"throw",e)}i(void 0)}))}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=c.a.Item,V=v.a.SCENES;function Y(e){var t,n,s=e.group,f=e.me,p=e.organization,y=e.isPublicCloud,T=e.disabled,I=e.book,D=e.scene,M=e.isYuque,U=e.belongTo,z=e.bookNameDefault,Y=B(c.a.useForm(),1)[0],q=window.appData.settings.publication_enable_whitelist,H=!window.appData.isYuque&&((null==q?void 0:q.includes(null==f?void 0:f.id))||(null==q?void 0:q.includes("all"))),W=B(Object(u.useState)(null),2),K=W[0],$=W[1],Q=B(Object(u.useState)(V.default),2),X=Q[0],J=Q[1],Z=B(Object(u.useState)(null==X||null===(t=X[0])||void 0===t?void 0:t.type),2),ee=Z[0],te=Z[1],ne=B(Object(u.useState)(null),2),re=ne[0],oe=ne[1],ae=B(Object(u.useState)((null==D?void 0:D.bookPublic)||0),2),ie=ae[0],ce=ae[1],ue=B(Object(u.useState)(!0),2),le=ue[0],se=ue[1],fe=B(Object(u.useState)([]),2),de=fe[0],pe=fe[1],me=B(Object(u.useState)(!1),2),he=me[0],ye=me[1],ve=Object(u.useRef)(),be=Object(O.b)({type:"book",target:I||{},org:p,group:K,subType:null==I?void 0:I.type});Object(u.useEffect)((function(){ve.current.focus(),z&&se(!1)}),[]),Object(u.useEffect)((function(){["Resource","Design","Thread"].includes(ee)?ye(!0):ye(!1)}),[ee]),Object(u.useEffect)((function(){te(e.scene||(null==X?void 0:X[0].type))}),[JSON.stringify(X)]),Object(u.useEffect)((function(){if(M||e.isH5||(null==K?void 0:K.type)!==h.TYPES_MAP.user)if(!M&&e.isH5&&(null==K?void 0:K.type)===h.TYPES_MAP.user){var t=["book","resource","thread"],n=V.default.filter((function(e){return t.includes(e.id)}));J(n)}else{var r=V.default.filter((function(e){return"book"===e.id}));J(r)}else J(V.default)}),[K]);var ge=function(){var e=F(L().mark((function e(t){var n,r,o,a,c,u,l,s;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.a.destroy(),!y||p||t.isPaid){e.next=6;break}return e.next=4,x.a.books.getCount({user_id:t.id});case 4:(n=e.sent)&&(r="max_book_number",n.count>=d.MEMBER_RULE[t.type].normal[r]&&(o=b.a.Message.getMessage(r,{isOwner:n.isOwner,user:t})||{},a=o.msg,c=o.alwaysOpen,u=o.level,l=o.callback,a&&l(i.a[u||"error"](a,c?0:void 0))));case 6:if(t.id!==f.id){e.next=9;break}return $(t),e.abrupt("return");case 9:return e.next=11,x.a.bookStacks.find({user_id:t.id});case 11:(s=e.sent)&&$(R(R({},t),{},{book_stacks:s}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(e){var t;return null!=s&&s.id&&null!=s&&null!==(t=s.abilities)&&void 0!==t&&t.create_book?s.name?s:e.find((function(e){return e.id===s.id})):f},we=function(){var e=F(L().mark((function e(){var t,n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={filterByAbility:"create_book"},!(!p||!p.id)&&(t.organization_id=p.id),n=H?x.a.mine.publications:function(){return[]},e.next=6,Promise.all([x.a.mine.groups(t),n(t)]).then((function(e){var t=B(e,2),n=t[0],r=t[1],o=n.concat(r);return o=o.filter((function(e){return e.group_user_role!==m.a.ROLE.readonly}))}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){var e=function(){var e=F(L().mark((function e(){var t,n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],U.includes("mine")&&t.push(f),!U.includes("group")){e.next=7;break}return e.next=5,we();case 5:n=e.sent,t.push.apply(t,A(n));case 7:pe(t),ge(_e(n));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return l.a.createElement("div",{className:k},l.a.createElement("div",{className:S},l.a.createElement(c.a,{form:Y,layout:"vertical",initialValues:{name:z}},l.a.createElement(G,{colon:!1,label:__("基本信息"),name:"name",rules:[{max:50,message:__("名称过长，最多输入50个字")}]},l.a.createElement("div",{className:C},l.a.createElement(j.a,{disabled:T,updateIcon:function(e){oe(e)}}),l.a.createElement(a.a,{"data-testid":"input-name",type:"text",disabled:T,placeholder:__("知识库名称"),autoComplete:"off",ref:ve,maxLength:50,onChange:function(e){e.target.value.trim()?se(!1):se(!0)},defaultValue:z}))),l.a.createElement(G,{colon:!1,name:"description",rules:[{max:255,message:__("简介过长，最多输入255个字")}]},l.a.createElement(a.a.TextArea,{"data-testid":"input-desc",name:"description",autoComplete:"off",className:"book-form-desc",disabled:T,autoSize:{minRows:4},placeholder:__("知识库简介（选填）")})),de.length>1&&l.a.createElement(G,{colon:!1,label:__("新建至")},l.a.createElement(_.a,{groups:de,onChange:ge,current:K,disabled:he})),(null==K||null===(n=K.book_stacks)||void 0===n?void 0:n.length)>1&&l.a.createElement(G,{colon:!1,label:__("分组"),name:"stack_id"},l.a.createElement(o.a,{getPopupContainer:function(e){return e.parentNode},disabled:T,defaultValue:e.stackId||(null==I?void 0:I.stack_id)||K.book_stacks.find((function(e){return e.is_default})).id},null==K?void 0:K.book_stacks.map((function(e){return l.a.createElement(o.a.Option,{key:e.id,value:e.id},e.name)})))),l.a.createElement(G,{colon:!1,label:__("可见范围")},l.a.createElement(g.a,{type:"book",isUser:(null==K?void 0:K.id)===(null==f?void 0:f.id),defaultValue:ie,isPublication:w.a.isPublication(K,p),items:Object(E.c)(be.getAllPrivacies(),be,{isYuque:M,isPublicCloud:y}),permissions:Object(O.c)(be.getEnablePrivacies(),{isYuque:M,isPublicCloud:y}),onChangePermission:function(e){ce(e)},withAliSecurityTip:!M,isYuque:M,isPublicCloud:y}))),M&&1===ie&&__("设置为互联网可见后，互联网所有获得链接的人皆可访问。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:l.a.createElement("a",{href:"https://www.yuque.com/terms",target:"_blank"},__("服务协议"))})),l.a.createElement("div",{className:N},l.a.createElement(r.a,{className:P,disabled:le,type:"primary",onClick:function(t){t.preventDefault(),Y.validateFields().then(function(){var t=F(L().mark((function t(n){var r,o,a,c;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return se(!0),r={user_id:K.id,name:n.name.trim(),public:ie,type:ee},re&&re.symbol&&(r.book_icon=re),K.book_stacks&&K.book_stacks.length>1&&(r.stack_id=n.stack_id||e.stackId),D&&(r.type=D.type,v.a.isTemplate(D)&&(n.scene=D.id)),o=Object.assign(n,r),t.next=8,x.a.books.createBook(o);case 8:if(a=t.sent,c="/".concat(K.login,"/").concat(a.slug),!e.onBookCreated){t.next=14;break}e.onBookCreated({book:a,user:K}),t.next=18;break;case 14:if(i.a.success(__("新建成功")),!window.appData.isYuqueMobileApp){t.next=17;break}return t.abrupt("return",window.location.replace(c));case 17:window.location.href=c;case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},__("新建"))))}Y.defaultProps={organization:window.appData.organization,isYuque:window.appData.isYuque,isPublicCloud:window.appData.isPublicCloud,belongTo:["mine","group"]},Y.propTypes={me:f.a.object.isRequired,group:f.a.object,organization:f.a.object,scene:f.a.object,isH5:f.a.bool,onBookCreated:f.a.func,isYuque:f.a.bool,isPublicCloud:f.a.bool,disabled:f.a.bool,book:f.a.object,stackId:f.a.string,belongTo:f.a.array,bookNameDefault:f.a.string};t.a=Object(y.d)((function(e){return{group:e.group,me:e.me,organization:e.organization}}))(Y)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(i,e);var t,n,r,a=d(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={overflow:!1},t.menus=o.a.createRef(),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.menus.current.querySelectorAll(".ant-menu .ant-menu-item");if(e&&e.length){var t=0;e.forEach((function(e){t+=e.offsetWidth})),t>window.innerWidth&&this.setState({overflow:!0})}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.menus,r=e.borderBottom,a=e.rightItem,i=u()("m-header-nav",t,{"m-overflow-nav":this.state.overflow,"nav-border-bottom":r});return o.a.createElement("div",{className:i,ref:this.menus,"data-testid":"sub-header-nav"},n,o.a.createElement("div",{className:"right-item"},a))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);t.a=h;h.defaultProps={className:""},h.propTypes={className:i.a.string,menus:i.a.element,rightItem:i.a.element}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(121))},function(e,t,n){var r=n(2528)();e.exports=r},function(e,t,n){var r=n(2529),o=n(1172),a=n(269),i=n(1173),c=n(1174),u=n(1280),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),s=!n&&o(e),f=!n&&!s&&i(e),d=!n&&!s&&!f&&u(e),p=n||s||f||d,m=p?r(e.length,String):[],h=m.length;for(var y in e)!t&&!l.call(e,y)||p&&("length"==y||f&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||c(y,h))||m.push(y);return m}},function(e,t,n){var r=n(1281),o=n(2533),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(1006);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},function(e,t,n){var r=n(1287),o=n(2565),a=n(1288);e.exports=function(e,t,n,i,c,u){var l=1&n,s=e.length,f=t.length;if(s!=f&&!(l&&f>s))return!1;var d=u.get(e),p=u.get(t);if(d&&p)return d==t&&p==e;var m=-1,h=!0,y=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++m<s;){var v=e[m],b=t[m];if(i)var g=l?i(b,v,m,t,e,u):i(v,b,m,e,t,u);if(void 0!==g){if(g)continue;h=!1;break}if(y){if(!o(t,(function(e,t){if(!a(y,t)&&(v===e||c(v,e,n,i,u)))return y.push(t)}))){h=!1;break}}else if(v!==b&&!c(v,b,n,i,u)){h=!1;break}}return u.delete(e),u.delete(t),h}},function(e,t,n){var r=n(603).Uint8Array;e.exports=r},function(e,t,n){var r=n(2151),o=n(1987),a=n(837);e.exports=function(e){return r(e,a,o)}},function(e,t,n){var r=n(1986),o=n(269);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(956)(n(603),"Set");e.exports=r},function(e,t,n){var r=n(229);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},function(e,t,n){var r=n(2578),o=n(2157);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e,t,n){var r=n(1007),o=n(1172),a=n(269),i=n(1174),c=n(1978),u=n(1009);e.exports=function(e,t,n){for(var l=-1,s=(t=r(t,e)).length,f=!1;++l<s;){var d=u(t[l]);if(!(f=null!=e&&n(e,d)))break;e=e[d]}return f||++l!=s?f:!!(s=null==e?0:e.length)&&c(s)&&i(d,s)&&(a(e)||o(e))}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(1990),o=n(672);e.exports=function(e,t){var n=-1,a=o(e)?Array(e.length):[];return r(e,(function(e,r,o){a[++n]=t(e,r,o)})),a}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(956),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=o},function(e,t,n){(function(e){var r=n(603),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,c=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(509)(e))},function(e,t,n){var r=n(1986),o=n(1981),a=n(1987),i=n(2152),c=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:i;e.exports=c},function(e,t,n){var r=n(1994);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(2593),o=n(1981),a=n(1281);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},function(e,t,n){var r=n(1282),o=n(2167),a=n(2142),i=n(2598),c=n(229),u=n(1177),l=n(2168);e.exports=function e(t,n,s,f,d){t!==n&&a(n,(function(a,u){if(d||(d=new r),c(a))i(t,n,u,s,e,f,d);else{var p=f?f(l(t,u),a,u+"",t,n,d):void 0;void 0===p&&(p=a),o(t,u,p)}}),u)}},function(e,t,n){var r=n(1010),o=n(960);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,n){var r=n(2599),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,c=o(a.length-t,0),u=Array(c);++i<c;)u[i]=a[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=a[i];return l[t]=n(u),r(e,this,l)}}},function(e,t,n){var r=n(2600),o=n(2602)(r);e.exports=o},function(e,t,n){var r=n(2172),o=n(229),a=n(1008),i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):i.test(e)?NaN:+e}},function(e,t,n){var r=n(2604),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},function(e,t,n){var r=n(2605),o=n(2606),a=n(454),i=n(269);e.exports=function(e,t){return function(n,c){var u=i(n)?r:o,l=t?t():{};return u(n,e,a(c,2),l)}}},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(608),o=n(383),a=n(2026),i=n(854),c=n(2125),u=n(147);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){d=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var f={};function p(){}function m(){}function h(){}var y={};c(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=s(e[o],e,a);if("throw"!==u.type){var f=u.arg,d=f.value;return d&&"object"==l(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){f.value=e,i(f)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,c(g,"constructor",h),c(h,"constructor",m),m.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=Object(u.a)({namespace:"artboard",state:m(m({},window.appData.artboard),{},{comments:[]}),effects:{updateLayers:d().mark((function e(t,n){var o,a,i,c,u,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,o=n.put,a=n.call,i=n.select,e.next=4,i();case 4:if(c=e.sent,(u=c.artboard).label_map_url){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,a(r.i,{id:u.id});case 10:return l=e.sent,e.next=13,o({type:"update",payload:{layers:l&&l.layers&&l.layers.length>0?l.layers:null,slices:l&&l.slices&&l.slices.length>0?l.slices:null}});case 13:case"end":return e.stop()}}),e)})),updateComments:d().mark((function e(t,n){var o,a,i,c,u,l,s,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,o=n.put,a=n.call,i=n.select,e.next=4,i();case 4:return c=e.sent,u=c.artboard,e.next=8,a(r.e,{artboard_id:u.id});case 8:return l=e.sent,s=l.data,f=1,(s=s.reverse()).forEach((function(e,t){e.rect=e.rect?JSON.parse(e.rect):null,e.order=e.rect?f++:null})),s=s.reverse(),e.next=16,o({type:"update",payload:{comments:s}});case 16:case"end":return e.stop()}}),e)})),updateMaps:d().mark((function e(t,n){var o,a,i,u,l,s,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,o=n.put,a=n.call,i=n.select,e.next=4,i();case 4:return u=e.sent,l=u.artboard,e.next=8,a(r.h,{artboard_id:l.id});case 8:return s=e.sent,(f=s.data).sort((function(e,t){return Object(c.isUp)(e.rect,t.rect)?1:-1})),e.next=13,o({type:"update",payload:{maps:f}});case 13:case"end":return e.stop()}}),e)})),updateLikes:d().mark((function e(t,n){var r,a,i,c,u,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,r=n.put,a=n.call,i=n.select,e.next=4,i();case 4:return c=e.sent,u=c.artboard,e.next=8,a(o.c,{target_type:"Artboard",target_id:u.id,action_type:"like"});case 8:return l=e.sent,e.next=11,r({type:"update",payload:{likes_count:l.data.count,likes_active:l.data.actioned}});case 11:case"end":return e.stop()}}),e)})),getVersions:d().mark((function e(t,n){var o,a,i,c,u,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,o=n.put,a=n.call,i=n.select,e.next=4,i();case 4:return c=e.sent,u=c.artboard,e.next=8,a(r.j,{id:u.id});case 8:return l=e.sent,e.next=11,o({type:"update",payload:{versions:l.data}});case 11:case"end":return e.stop()}}),e)})),getAssets:d().mark((function e(t,n){var r,o,c,u,l,s,f,p,m,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,r=n.put,o=n.call,c=n.select,e.next=4,c();case 4:if(u=e.sent,l=u.artboard,s=l.asset_version_id,f=l.asset_id,!s){e.next=21;break}return e.prev=8,e.next=11,o(a.a,{id:s});case 11:m=e.sent,p=(p=m&&m.data&&m.data.item)&&p.file,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),console.log("get version failed:",e.t0);case 19:e.next=26;break;case 21:if(!f){e.next=26;break}return e.next=24,o(i.b,{id:f});case 24:h=e.sent,p=h&&h.data&&h.data.file;case 26:if(p){e.next=28;break}return e.abrupt("return");case 28:return/:\/\//.test(p)||(p="/attachments/".concat(p)),e.next=31,r({type:"update",payload:{sourceFile:p}});case 31:case"end":return e.stop()}}),e,null,[[8,16]])})),createArtboardComments:d().mark((function e(t,n){var o,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,n.put,a=n.call,e.next=4,a(r.b,o);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})),closeArtboardComments:d().mark((function e(t,n){var o,a,i,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,e.next=4,i(r.a,o);case 4:return c=e.sent,e.next=7,a({type:"closeComments",payload:c});case 7:return e.abrupt("return",c.data);case 8:case"end":return e.stop()}}),e)})),createArtboardMaps:d().mark((function e(t,n){var o,a,i,c,u,l,s,f,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,n.select,c=o.artboard,u=o.rect,l=o.url,s=o.target_artboard_id,f=o.uuid,e.next=5,i(r.d,{artboard_id:c.id,rect:[u.left,u.top,u.width,u.height],uuid:f,url:l||null,target_artboard_id:s||null});case 5:return p=e.sent,e.next=8,a({type:"updateMaps"});case 8:return e.next=10,a({type:"update",payload:{rect:null,mapCreated:!0}});case 10:return e.abrupt("return",p.data);case 11:case"end":return e.stop()}}),e)})),updateArtboardMaps:d().mark((function e(t,n){var o,a,i,c,u,l,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,n.select,c=o.artboard_map_id,u=o.url,l=o.target_artboard_id,e.next=5,i(r.q,{id:c,target_url:u||null,target_artboard_id:l||null});case 5:return s=e.sent,e.next=8,a({type:"updateMaps"});case 8:return e.next=10,a({type:"update",payload:{rect:null,mapCreated:!0}});case 10:return e.abrupt("return",s.data);case 11:case"end":return e.stop()}}),e)})),removeArtboardMaps:d().mark((function e(t,n){var o,a,i,c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=o.mapId,e.next=5,i(r.m,{id:c});case 5:return u=e.sent,e.next=8,a({type:"updateMaps"});case 8:return e.abrupt("return",u.data);case 9:case"end":return e.stop()}}),e)}))},reducers:{update:function(e,t){var n=t.payload;return m(m({},e),n)},change:function(e,t){return t.payload.artboard},removeComments:function(e,t){var n=t.payload,r=e.comments,o=n.data,a=r.findIndex((function(e){return e.id===o.commentable_id}));return r.splice(a,1),m(m({},e),{},{comments:s(r)})},closeComments:function(e,t){var n=t.payload,r=e.comments;r=r||[];var o=n.data;return r.forEach((function(e){e.id===o.id&&(e.closed_at=o.closed_at)})),m(m({},e),{},{comments:s(r)})}}})},function(e,t,n){"use strict";n.r(t);var r=n(854),o=n(147);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var d={};function p(){}function m(){}function h(){}var y={};u(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,c,u){var l=s(e[o],e,i);if("throw"!==l.type){var f=l.arg,d=f.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){f.value=e,c(f)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,u(g,"constructor",h),u(h,"constructor",m),m.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),u(g,c,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var d=function(e,t){var n=t.data||{},r={asset:e,progress:{percent:100},result:{parseTaskId:n.parseTaskId||null,parsed:n.parsed||!1,data:null,code:t.code||0,message:t.message}};return"demo"===e.file_type&&(r.result.data={demoId:n.demoId}),console.log(r),r};t.default=Object(o.a)({namespace:"assets",state:{notices:{},data:[]},effects:{getList:f().mark((function e(t,n){var o,a,i,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,n.select,e.next=4,i(r.a,o);case 4:return c=e.sent,e.next=7,a({type:"update",payload:{data:c.data}});case 7:case"end":return e.stop()}}),e)})),getVersions:f().mark((function e(t,n){var o,a,i,c,u,s,d,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=n.select,u=o.id,e.next=5,i(r.c,o);case 5:return s=e.sent,e.next=8,c();case 8:return d=e.sent,(p=d.assets).data.forEach((function(e){e.id===u&&(e.versions=s.data)})),e.next=13,a({type:"update",payload:{data:l(p.data)}});case 13:case"end":return e.stop()}}),e)})),removeVersions:f().mark((function e(t,n){var o,a,i,c,u,s,d,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=n.select,e.next=4,i(r.e,o);case 4:return u=e.sent,e.next=7,c();case 7:return s=e.sent,d=s.assets,p=o.assetId,d.data.forEach((function(e){e.id===p&&(e.versions=e.versions.filter((function(e){return e.id!==u.data.id})))})),e.next=13,a({type:"update",payload:{data:l(d.data)}});case 13:return e.abrupt("return",u.data);case 14:case"end":return e.stop()}}),e)})),remove:f().mark((function e(t,n){var o,a,i,c,u,l,s,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=n.select,e.next=4,i(r.d,o);case 4:return u=e.sent,e.next=7,c();case 7:return l=e.sent,s=l.assets,d=s.data.filter((function(e){return e.id!==u.data.id})),e.next=12,a({type:"update",payload:{data:d}});case 12:return e.abrupt("return",u.data);case 13:case"end":return e.stop()}}),e)}))},reducers:{update:function(e,t){var n=t.payload;return c(c({},e),{},{data:n.data})},uploaded:function(e,t){var n=t.payload,r=n.bookId,o=n.fileId,a=n.asset,i=n.response,u=[],l=e.notices[r]||[],s=d(a,i);l.forEach((function(e){o===e.asset.uid?u.push(s):u.push(e)}));var f=c(c({},e),{},{notices:c({},e.notices)});return f.notices[r]=u,f},removeNotice:function(e,t){var n=t.payload.bookId,r=c(c({},e),{},{notices:c({},e.notices)});return r.notices[n]=[],r},updateUploadProgress:function(e,t){var n=t.payload,r=n.bookId,o=n.fileUid,a=e.notices[r];a.forEach((function(e){e.asset.uid===o&&(e.progress.percent=parseInt(n.percent,10))}));var i=Object.assign({},e.notices);return i[r]=a,c(c({},e),{},{notices:i})},addNotice:function(e,t){var n=t.payload,r=n.bookId,o=[n.notice];(e.notices[r]||[]).forEach((function(e){o.push(e)}));var a=Object.assign({},e.notices);return a[r]=o,c(c({},e),{},{notices:a})}}})},function(e,t,n){"use strict";n.r(t);var r,o=n(211),a=n.n(o),i=n(328),c=n(846),u=n(34),l=n(147);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(){h=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var y={};c(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=m.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var f=u.arg,d=f.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){f.value=e,i(f)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=m,c(g,"constructor",m),c(m,"constructor",p),p.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=Object(l.a)({namespace:"book",state:v(v({docs:[],catalog:[]},window.appData.book),{},{description:(r=window.appData.book,r?Object(i.unescapeHTML)(r.description):""),namespace:function(){var e=window.appData,t=e.group,n=e.book;if(!n)return null;var r=n.namespace;return!r&&t&&(r="".concat(t.login,"/").concat(n.slug)),r}(),trash:[],editing:{},collaborators:[],customIndexPage:window.appData.customIndexPage,permission:null}),effects:{getCollaborators:h().mark((function e(t,n){var r,o,a,i,c,l,s,f,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,a=n.put,i=n.select,e.next=4,i();case 4:return c=e.sent,l=c.book,s=r.data,e.next=9,o(u.a.collaborations.find,s,{useOriginResp:!0});case 9:if(f=e.sent,d=f.data,p=f.meta.permission,!(s.offset&&s.offset>0)){e.next=16;break}return e.next=14,a({type:"updateCollaborators",payload:l.collaborators.concat(d)});case 14:e.next=18;break;case 16:return e.next=18,a({type:"updateCollaborators",payload:d});case 18:return e.next=20,a({type:"updatePermission",payload:p});case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e)})),addCollaborator:h().mark((function e(t,n){var r,o,a,i,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,a=n.put,i=r.data,e.next=5,o(u.a.collaborations.create,i);case 5:return c=e.sent,e.next=8,a({type:"addCollaborators",payload:c});case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})),updateCollaborator:h().mark((function e(t,n){var r,o,a,i,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,a=n.put,n.select,i=r.data,e.next=5,o(u.a.collaborations.update,{id:i.id,type:i.type,role:i.role});case 5:return c=e.sent,e.next=8,a({type:"updateCollaborators",payload:c});case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})),batchAddCollaborators:h().mark((function e(t,n){var r,o,a,i,c,l,s,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,a=n.put,n.select,i={users:r.data.users,target_id:r.data.target_id,target_type:r.data.target_type},e.next=5,o(u.a.collaborations.batchAdd,i);case 5:c=e.sent,l=d(c),e.prev=7,l.s();case 9:if((s=l.n()).done){e.next=15;break}return f=s.value,e.next=13,a({type:"addCollaborators",payload:f});case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),l.e(e.t0);case 20:return e.prev=20,l.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[7,17,20,23]])})),batchUpdateCollaborators:h().mark((function e(t,n){var r,o,a,i,c,l,s,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,a=n.put,n.select,i={list:r.rows.map((function(e){return{id:e.id,type:e.type,role:e.role}})),target_id:r.target_id,target_type:r.target_type,role:r.role},e.next=5,o(u.a.collaborations.batchUpdate,i);case 5:c=e.sent,l=d(c),e.prev=7,l.s();case 9:if((s=l.n()).done){e.next=15;break}return f=s.value,e.next=13,a({type:"updateCollaborators",payload:f});case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),l.e(e.t0);case 20:return e.prev=20,l.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[7,17,20,23]])})),removeCollaborator:h().mark((function e(t,n){var r,o,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,a=n.put,n.select,e.next=4,o(u.a.collaborations.destroy,{id:r.data.id,type:r.data.type});case 4:return i=e.sent,e.next=7,a({type:"removeCollaborators",payload:i});case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})),batchRemoveCollaborators:h().mark((function e(t,n){var r,o,a,i,c,l,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,a=n.put,n.select,i={list:r.rows.map((function(e){return{id:e.id,type:e.type}})),target_id:r.target_id,target_type:r.target_type},e.next=5,o(u.a.collaborations.batchDestroy,i);case 5:c=d(r.rows),e.prev=6,c.s();case 8:if((l=c.n()).done){e.next=14;break}return s=l.value,e.next=12,a({type:"removeCollaborators",payload:s});case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),c.e(e.t0);case 19:return e.prev=19,c.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[6,16,19,22]])})),approveCollaborator:h().mark((function e(t,n){var r,o,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,n.put,e.next=4,o(u.a.collaborations.approve,r.data);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})),saveAsTemplate:h().mark((function e(t,n){var r,o,a,i,u,l,s,f,d,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.put,n.call,a=n.select,i=r.doc,e.next=5,a();case 5:return u=e.sent,l=u.book,e.next=9,c.c({slug:i.slug,book_id:l.id,mode:"edit"});case 9:return s=e.sent,f=s.data,d={book_id:l.id,format:f.format,title:f.title,type:f.type,tag:"YUQUE_TEMPLATE",status:1},"asl"===i.format||"lake"===i.format?(d.body_asl=f.body_asl,d.body_draft_asl=f.body_asl):d.body=f.body,e.next=15,c.a(d);case 15:return s=e.sent,p=s.data,e.next=19,o({type:"addNewDocs",payload:[p]});case 19:case"end":return e.stop()}}),e)})),refreshDocsAndToc:h().mark((function e(t,n){var r,o,a,i,c,l,s,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.put,o=n.call,a=n.select,e.next=3,a();case 3:return i=e.sent,c=i.book,e.next=7,o(u.a.books.toc,{id:c.id,include_docs:!0});case 7:return l=e.sent,s=l.docs,f=l.toc,e.next=12,r({type:"updateDocs",payload:s});case 12:return e.next=14,r({type:"updateToc",payload:f});case 14:case"end":return e.stop()}}),e)}))},reducers:{update:function(e,t){var n=t.payload;return v(v({},e),n)},updateSettingProps:function(e,t){var n=t.payload,r=a()(n,["name","slug","description","public","book_icon"]);return v(v({},e),r)},updateDocs:function(e,t){var n=t.payload;return v(v({},e),{},{docs:[].concat(n)})},addDocs:function(e,t){var n=t.payload;return v(v({},e),{},{docs:e.docs.concat(n)})},removeDeletedDocs:function(e,t){var n=t.payload.ids,r=e.docs.filter((function(e){return-1===n.indexOf(e.id)}));return v(v({},e),{},{docs:r,items_count:e.items_count-n.length})},addNewDocs:function(e,t){var n=t.payload||[];return v(v({},e),{},{docs:n.concat(e.docs),items_count:e.items_count+n.length})},like:function(e,t){var n=t.payload;return v(v({},e),{},{like:{data:n.like,count:e.like.count+1}})},cancelLike:function(e,t){t.payload;return v(v({},e),{},{like:{data:null,count:e.like.count-1}})},subscribe:function(e,t){var n=t.payload;return v(v({},e),{},{subscribe:{data:n.subscribe,count:e.subscribe.count+1}})},unsubscribe:function(e,t){t.payload;return v(v({},e),{},{subscribe:{data:null,count:e.subscribe.count-1}})},updateCollaborators:function(e,t){var n,r=t.payload;return n=Array.isArray(r)?r:e.collaborators.map((function(e){if(e.id===r.id){var t=v({},e);return Object.assign(t,r)}return e})),v(v({},e),{},{collaborators:n})},addCollaborators:function(e,t){var n=t.payload;Array.isArray(n)||(n=[n]);var r=[].concat(f(n),f(e.collaborators)).filter((function(e,t,n){return n.findIndex((function(t){return t.id===e.id}))===t}));return v(v({},e),{},{collaboration_count:e.collaboration_count+1,collaborators:r})},removeCollaborators:function(e,t){var n=t.payload,r=e.collaborators.filter((function(e){return e.id!==n.id}));return v(v({},e),{},{collaboration_count:e.collaboration_count-1,collaborators:r})},updatePermission:function(e,t){var n=t.payload;return v(v({},e),{},{permission:n})},updateToken:function(e,t){var n=t.payload;return v(v({},e),{},{joinToken:n})},updateToc:function(e,t){var n=t.payload;return v(v({},e),{},{toc:f(n)})}}})},function(e,t,n){var r=n(1176),o=n(2179),a=n(1007);e.exports=function(e,t,n){for(var i=-1,c=t.length,u={};++i<c;){var l=t[i],s=r(e,l);n(s,l)&&o(u,a(l,e),s)}return u}},function(e,t,n){var r=n(1991),o=n(1007),a=n(1174),i=n(229),c=n(1009);e.exports=function(e,t,n,u){if(!i(e))return e;for(var l=-1,s=(t=o(t,e)).length,f=s-1,d=e;null!=d&&++l<s;){var p=c(t[l]),m=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(l!=f){var h=d[p];void 0===(m=u?u(h,p,d):void 0)&&(m=i(h)?h:a(t[l+1])?[]:{})}r(d,p,m),d=d[p]}return e}},function(e,t,n){var r=n(220),o=n(2169),a=n(2170);e.exports=function(e){return a(o(e,void 0,r),e+"")}},function(e,t,n){"use strict";for(var r in t.MESSAGES={testSleep:"testSleep",testCycle:"testCycle",updateDoc:"updateDoc",createDoc:"createDoc",updateDocMeta:"updateDocMeta",saveDocFromEditor:"saveDocFromEditor",publishDoc:"publishDoc",deleteDoc:"deleteDoc",moveDocs:"moveDocs",revertDoc:"revertDoc",publishDoclet:"publishDoclet",auditDoclet:"auditDoclet",publishSheet:"publishSheet",updateTable:"updateTable",updateBook:"updateBook",createBook:"createBook",renameBook:"renameBook",moveBook:"moveBook",deleteBook:"deleteBook",privateBook:"privateBook",publicBook:"publicBook",revertBook:"revertBook",createUser:"createUser",deleteUser:"deleteUser",updateUser:"updateUser",accountActive:"accountActive",accountDeactive:"accountDeactive",createGroup:"createGroup",joinGroup:"joinGroup",ownGroup:"ownGroup",upgradeToOrg:"upgradeToOrg",migrateToOrg:"migrateToOrg",deleteGroup:"deleteGroup",deleteGroupUser:"deleteGroupUser",joinGroupUser:"joinGroupUser",applyGroupUser:"applyGroupUser",inviteGroupUser:"inviteGroupUser",reInviteGroupUser:"reInviteGroupUser",newGroupUser:"newGroupUser",newGroupUserFromDepartment:"newGroupUserFromDepartment",updateGroupUserName:"updateGroupUserName",createArtboardGroup:"createArtboardGroup",deleteArtboardGroup:"deleteArtboardGroup",updateArtboardGroup:"updateArtboardGroup",createArtboard:"createArtboard",updateArtboard:"updateArtboard",deleteArtboard:"deleteArtboard",uploadArtboards:"uploadArtboards",replaceArtboard:"replaceArtboard",uploadAsset:"uploadAsset",deleteAsset:"deleteAsset",inviteOrganizationUser:"inviteOrganizationUser",joinOrganizationUser:"joinOrganizationUser",applyOrganizationUser:"applyOrganizationUser",terminateOrganizationUser:"terminateOrganizationUser",updateOrganizationUser:"updateOrganizationUser",createOrganization:"createOrganization",updateOrganization:"updateOrganization",checkOrganizationUserAvailable:"checkOrganizationUserAvailable",followUser:"followUser",watchBook:"watchBook",likeDoc:"likeDoc",likeArtboard:"likeArtboard",likeNote:"likeNote",createAction:"createAction",deleteAction:"deleteAction",newCollaboration:"newCollaboration",inviteCollaboration:"inviteCollaboration",joinCollaboration:"joinCollaboration",applyCollaboration:"applyCollaboration",createTopic:"createTopic",updateTopic:"updateTopic",deleteTopic:"deleteTopic",closeTopic:"closeTopic",reopenTopic:"reopenTopic",assignTopic:"assignTopic",newComment:"newComment",updateComment:"updateComment",submitOpinion:"submitOpinion",newReviewComment:"newReviewComment",deleteComment:"deleteComment",newResource:"newResource",uploadResources:"uploadResources",updateResource:"updateResource",updateResources:"updateResources",deleteResource:"deleteResource",moveResources:"moveResources",replaceResource:"replaceResource",createShare:"createShare",updateShare:"updateShare",destroyShare:"destroyShare",createUnconfirmedCorpAccount:"createUnconfirmedCorpAccount",updateUnconfirmedCorpAccount:"updateUnconfirmedCorpAccount",deleteUnconfirmedCorpAccount:"deleteUnconfirmedCorpAccount",createAuditLog:"createAuditLog",newReview:"newReview",completeReview:"completeReview",cancelReview:"cancelReview",createNote:"createNote",updateNote:"updateNote",destroyNote:"destroyNote",revertNote:"revertNote",archiveNote:"archiveNote",inviteListUser:"inviteListUser",applyListUser:"applyListUser",approveListUser:"approveListUser",joinListUser:"joinListUser",createDatasheetView:"createDatasheetView",updateDatasheetView:"updateDatasheetView",createTagMap:"createTagMap",destroyTagMap:"destroyTagMap",joinWechatFollowBindActivity:"joinWechatFollowBindActivity",issueAssignee:"issueAssignee",issueMentions:"issueMentions",issueUpdate:"issueUpdate",issueComment:"issueComment"},t.MESSAGE_VALUES={},t.MESSAGES)t.MESSAGE_VALUES[t.MESSAGES[r]]=!0;t.STATUS={init:0,executing:1,error:2,terminated:3},t.TIMEOUT=6e5,t.EXPIRED_TIMEOUT=2592e6,t.MAX_RETRY_TIMES=5},function(e,t,n){"use strict";n.r(t);var r=n(1328),o=n(147);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,c,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,u,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.default=Object(o.a)({namespace:"checkcode",state:{},effects:{sendCode:i().mark((function e(t,n){var o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,n.put,a=n.call,e.next=4,a(r.a,o);case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})),verifyCode:i().mark((function e(t,n){var o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,n.put,a=n.call,e.next=4,a(r.b,o);case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)}))}})},function(e,t,n){"use strict";n.r(t);var r=n(1329),o=n(147);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(){u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,c,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.default=Object(o.a)({namespace:"cityselect",state:{options:[]},effects:{selectProvince:u().mark((function e(t,n){var o,a,i,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,e.next=4,i(r.b,o);case 4:return c=e.sent,e.next=7,a({type:"saveProvince",payload:c});case 7:return e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})),selectCity:u().mark((function e(t,n){var o,a,i,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,e.next=4,i(r.a,o);case 4:return c=e.sent,e.next=7,a({type:"saveCity",payload:{province:o,cities:c.data}});case 7:case"end":return e.stop()}}),e)}))},reducers:{saveProvince:function(e,t){return{options:t.payload.data.map((function(e){return{value:e.name,label:e.name,id:e.id,isLeaf:e.isLeaf||!1}}))}},saveCity:function(e,t){var n=t.payload,r=n.cities.map((function(e){return{value:e.name,label:e.name,id:e.id}})),o=n.province,a=i(e.options);return a.forEach((function(e){e.id===o.id&&(e.loading=!1,e.children=r)})),{options:a}}}})},function(e,t,n){"use strict";n.r(t);var r=n(690),o=n(383),a=n(147);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var d={};function p(){}function m(){}function h(){}var y={};u(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,c,u){var l=f(e[o],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==i(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,u(g,"constructor",h),u(h,"constructor",m),m.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),u(g,c,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.default=Object(a.a)({namespace:"comment",state:{comments:{},count:0,subscribed:!1},effects:{getComments:s().mark((function e(t,n){var o,a,i,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=o.data,e.next=5,i(r.b,c);case 5:return u=e.sent,e.next=8,a({type:"update",payload:u});case 8:return e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})),createComments:s().mark((function e(t,n){var o,a,i,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=o.data,e.next=5,i(r.a,c);case 5:return u=e.sent,e.next=8,a({type:"create",payload:u});case 8:return e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})),removeComments:s().mark((function e(t,n){var o,a,i,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=o.data,e.next=5,i(r.c,c);case 5:return u=e.sent,e.next=8,a({type:"remove",payload:u});case 8:return e.abrupt("return",u.data);case 9:case"end":return e.stop()}}),e)})),updateComment:s().mark((function e(t,n){var o,a,i,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.put,i=n.call,c=o.data,e.next=5,i(r.d,c);case 5:return u=e.sent,e.next=8,a({type:"updateOne",payload:u});case 8:return e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})),resetComment:s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,r=n.put,n.call,e.next=4,r({type:"reset"});case 4:case"end":return e.stop()}}),e)})),getSubscribeStatus:s().mark((function e(t,n){var r,a,i,c,u,l,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,a=n.put,i=n.call,c=r.data,e.next=5,i(o.c,c);case 5:return u=e.sent,l=u.data.actioned,f=!!l&&"unwatch"!==l.action_option,e.next=10,a({type:"updateSubscribeStatus",payload:{subscribed:f}});case 10:return e.abrupt("return",u.data);case 11:case"end":return e.stop()}}),e)})),unwatch:s().mark((function e(t,n){var r,a,i,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,a=n.put,i=n.call,c=r.data,e.next=5,i(o.a,c);case 5:return u=e.sent,e.next=8,a({type:"updateSubscribeStatus",payload:{subscribed:!1}});case 8:return e.abrupt("return",u.data);case 9:case"end":return e.stop()}}),e)}))},reducers:{create:function(e,t){var n=t.payload,r=e.comments,o=e.originComments?e.originComments:[];o.push(n.data);var a=n.data.parent_id,i=e.count;return a&&r[a]?r[a]=Object.assign({},r[a],{comments:r[a].comments.concat(n.data)}):(n.data.comments=[].concat(n.data),r[n.data.id]=n.data,i++),u(u({},e),{},{originComments:o,comments:r,count:i})},updateOne:function(e,t){var n=t.payload,r=e.originComments.map((function(e){return e.id===n.data.id?n.data:e}));return u(u({},e),{},{originComments:r})},update:function(e,t){var n=t.payload,r={},o=0;return n.data.forEach((function(e){e.comments=[].concat(e),r[e.id]=e,o++})),n.data.forEach((function(e){e.parent_id&&(r[e.parent_id]&&r[e.parent_id].comments.push(e),delete r[e.id],o--)})),u(u({},e),{},{originComments:n.data,comments:r,count:o})},remove:function(e,t){var n=t.payload,r=e.comments,o=e.originComments;o=o.filter((function(e){return e.id!==n.data.id}));var a=e.count,i=n.data.parent_id;return i&&r[i]?r[i]=Object.assign({},r[i],{comments:r[i].comments.filter((function(e){return e.id!==n.data.id}))}):(delete r[n.data.id],a--),u(u({},e),{},{originComments:o,comments:r,count:a})},reset:function(e,t){t.payload;return{comments:{},count:0,subscribed:!1}},updateSubscribeStatus:function(e,t){var n=t.payload.subscribed;return u(u({},e),{},{subscribed:n})}}})},function(e,t,n){"use strict";n.r(t);var r=n(1920),o=n.n(r),a=n(2234),i=n.n(a),c=n(921),u=n.n(c),l=n(114),s=n.n(l),f=n(846),d=n(34),p=n(147),m=n(641),h=n(124);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function g(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(){w=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&n.call(v,o)&&(m=v);var b=p.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==y(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(b,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(_.prototype),c(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new _(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),c(b,i,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=new s.a("doc:model"),k=window.appData.doc,S={};S=O(O({},k),{},k?{like:{actioned:!!k.like&&k.like.actioned,count:k.like?k.like.count:0},contributors:k.contributors||[],hits:k.hits||null}:{like:{actioned:!1,count:0},contributors:[],hits:null}),t.default=Object(p.a)({namespace:"doc",state:O(O({},S),{},{collaborations:[],editing:{},loaded:!1,error:null}),effects:{getDetail:w().mark((function e(t,n){var r,o,a,i,c,u,l,s,d,p,y,v,b;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.put,a=n.call,Object(m.a)("start-loadDoc"),i=r.book_id,c=r.slug,u=r.mode,l=r.withData,s=void 0===l?{}:l,e.next=6,o({type:"update",payload:{loaded:!1,error:null,audits:null}});case 6:if(c||i){e.next=10;break}return e.next=9,o({type:"update",payload:{loaded:!0}});case 9:return e.abrupt("return");case 10:if(j("load doc detail","".concat(i,"/").concat(c,"?mode=").concat(u)),d=null,e.prev=12,!(p=window.g_prefetch&&window.g_prefetch.fetchReadDocData)||p.used){e.next=21;break}return p.used=!0,e.next=18,p;case 18:d=e.sent,e.next=24;break;case 21:return e.next=23,a(f.c,{book_id:i,slug:c,mode:u,include_contributors:s.contributors,include_like:s.like,include_hits:s.hits,include_pager:s.pager,include_share:s.share,merge_dynamic_data:!1});case 23:d=e.sent;case 24:e.next=36;break;case 26:if(e.prev=26,e.t0=e.catch(12),"Unauthorized"!==e.t0.message){e.next=32;break}return e.next=31,o({type:"error/toggleLoginModal",payload:{visible:!0}});case 31:return e.abrupt("return");case 32:return j("load doc failed"),e.next=35,o({type:"update",payload:{loaded:!0,error:e.t0}});case 35:return e.abrupt("return");case 36:if(Object(m.a)("finish-loadDoc"),y=d&&d.data&&d.data.content&&d.data.content.length,Object(m.a)("doc-size",y),d){e.next=42;break}return j("load doc failed"),e.abrupt("return");case 42:if(j("doc detail loaded"),v=d.data,h.a.normalizeDoc(v),b=O(O({},v),{},{loaded:!0}),d.meta&&(b=O(O({},b),d.meta)),!v.like){e.next=52;break}return e.next=50,o({type:"update",payload:O(O({},b),{},{like:{actioned:v.like.actioned,count:v.like.count}})});case 50:e.next=54;break;case 52:return e.next=54,o({type:"update",payload:b});case 54:return e.abrupt("return",v);case 55:case"end":return e.stop()}}),e,null,[[12,26]])})),getContributors:w().mark((function e(t,n){var r,o,a,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.put,a=n.call,e.next=4,a(f.b,r);case 4:return i=e.sent,e.next=7,o({type:"update",payload:{contributors:i.data}});case 7:case"end":return e.stop()}}),e)})),exitEditor:w().mark((function e(t,n){var r,o,a,i,c,u;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.put,a=n.call,n.select,i=r.id,c=r.uuid,e.next=5,a(f.h,{id:i,uuid:c});case 5:return u=e.sent,e.next=8,o({type:"updateEditStatus",payload:{data:u.data,cover:!1}});case 8:case"end":return e.stop()}}),e)})),addCollaborator:w().mark((function e(t,n){var r,o,a,i,c;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,a=n.put,i=r.data,e.next=5,o(d.a.collaborations.create,i);case 5:return c=e.sent,e.next=8,a({type:"addCollaboration",payload:c});case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})),batchAddCollaborators:w().mark((function e(t,n){var r,o,a,i,c,u,l,s;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,o=n.call,a=n.put,n.select,i={users:r.data.users,target_id:r.data.target_id,target_type:r.data.target_type},e.next=5,o(d.a.collaborations.batchAdd,i);case 5:c=e.sent,u=b(c),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=15;break}return s=l.value,e.next=13,a({type:"addCollaboration",payload:s});case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),u.e(e.t0);case 20:return e.prev=20,u.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[7,17,20,23]])}))},reducers:{initialize:function(e,t){var n=t.payload;if(j("reducer/initialize",n),n){n.meta=n.meta||{};var r=n.data,o=n.meta;return O(O(O(O({},e),r),o),{},{loaded:!0})}},update:function(e,t){var n=t.payload;return O(O({},e),n)},updateLikes:function(e,t){var n=t.payload;return O(O({},e),{},{like:{actioned:n.active,count:n.active?parseInt(e.like.count,10)+1:parseInt(e.like.count,10)-1}})},updateEditStatus:function(e,t){var n=t.payload,r=e.editStatus,a=n.data,c=n.cover,l=void 0!==c&&c,s=n.action;if(!a)return O({},e);if("lock"===s){var f=o()(a)[0];f.code||(r=i()(r,(function(e){return e.locker&&e.locker.uuid===f.locker.uuid&&(e.locker=null),e})))}var d=u()(r,a,(function(e,t){var n=e?e.draft_version:0,r=Math.max(t.draft_version,n),o=!e||e.draft_version<t.draft_version,a=u()(e,t,(function(e,t){return t}));return delete a.body_draft_asl,a.draft_version=n,l?(a.draft_version=r,delete a.isModified,a):(o&&(a.isModified=!0),a)}));return O(O({},e),{},{editStatus:O({},d)})},updateEditing:function(e,t){var n=t.payload;return O(O({},e),{},{editing:n})},updateShare:function(e,t){var n=t.payload;return O(O({},e),{},{share:n?O({},n):null})},updateCollaborations:function(e,t){var n=t.payload;return O(O({},e),{},{collaborations:v(n)})},addOneCollaboration:function(e,t){var n=t.payload;return O(O({},e),{},{collaborations:[].concat(v(e.collaborations),[n])})},updateOneCollaboration:function(e,t){var n=t.payload,r=v(e.collaborations),o=r.findIndex((function(e){return e.id===n.id}));return o>=0&&r.splice(o,1,n),O(O({},e),{},{collaborations:r})},addCollaboration:function(e,t){var n=t.payload;Array.isArray(n)||(n=[n]);var r=[].concat(v(n),v(e.collaborations)).filter((function(e,t,n){return n.findIndex((function(t){return t.id===e.id}))===t}));return O(O({},e),{},{collaborations:r})},removeCollaboration:function(e,t){var n=t.payload,r=v(e.collaborations),o=r.findIndex((function(e){return e.id===n.id}));return o>=0&&r.splice(o,1),O(O({},e),{},{collaborations:r})},updateToken:function(e,t){var n=t.payload;return O(O({},e),{},{joinToken:n})},addCommentCount:function(e,t){t.payload;return O(O({},e),{},{comments_count:e.comments_count+1})},reduceCommentCount:function(e,t){t.payload;return O(O({},e),{},{comments_count:e.comments_count>0?e.comments_count-1:0})},updateEditorMetas:function(e,t){var n=t.payload;return O(O({},e),{},{editor_meta:n.meta||e.editor_meta,editor_meta_draft:n.meta_draft||e.editor_meta_draft})}}})},function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(l,e);var t,n,r,u=c(l);function l(){return o(this,l),u.apply(this,arguments)}return t=l,(n=[{key:"getPrivacyValue",value:function(){var e=this.target;if(!e)return this.PRIVACY.private;if(e.public===this.PRIVACY.private)return e.public;if(!this.isInOrg)return this.isPublicCloud?e.public===this.PRIVACY.public?e.public:this.PRIVACY.private:e.public===this.PRIVACY.public?this.PRIVACY.intranet_all:e.public;var t=this.org?this.org.public:this.PRIVACY.intranet_all;return t===this.PRIVACY.public||e.public===this.PRIVACY.intranet_all?e.public:this._restrictPrivacy(e.public,t)}},{key:"getBelongTarget",value:function(){return this.org}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(n(1201));e.exports=s},function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=c(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},i.apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var d=n(1201),p=n(149).PUBLIC,m=n(2186),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(s,e);var t,n,r,c=l(s);function s(){return o(this,s),c.apply(this,arguments)}return t=s,(n=[{key:"getPrivacyValue",value:function(){var e=this.target;if(!e)return this.PRIVACY.private;if(e.public===p.importing)return e.public;var t=this.getBelongPrivacy();return this._restrictPrivacy(e.public,t.getPrivacyValue())}},{key:"getBelongPrivacy",value:function(){return this.groupPrivacy||(this.groupPrivacy=new m(Object.assign(this.options,{type:"group",target:this.group}))),this.groupPrivacy}},{key:"getBelongTarget",value:function(){return this.group}},{key:"getAllPrivacies",value:function(){return i(f(s.prototype),"getAllPrivacies",this).call(this)}},{key:"getPublicCloudPrivacies",value:function(){return"Resource"===this.subType?[this.PRIVACY.private]:[this.PRIVACY.private,this.PRIVACY.public]}},{key:"getEnablePrivacies",value:function(){return"Resource"===this.subType&&this.isYuque&&!this.isInOrg?[this.PRIVACY.private]:i(f(s.prototype),"getEnablePrivacies",this).call(this)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(d);e.exports=h},function(e,t,n){"use strict";n.r(t);var r,o,a,i,c=n(1974),u=n(147),l=n(34);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(){p=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var f={};function d(){}function m(){}function h(){}var y={};c(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var f=u.arg,d=f.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){f.value=e,i(f)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,c(g,"constructor",h),c(h,"constructor",m),m.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={books:[],members:[],owners:[],labels:[],abilities:{},settings:{},permissions:{}};t.default=Object(u.a)({namespace:"group",state:h(h(h({},window.appData.group),v),{},{abilities:h({},null===(r=window.appData.group)||void 0===r?void 0:r.abilities),settings:h({},null===(o=window.appData.group)||void 0===o?void 0:o.settings),permissions:h({},null===(a=window.appData.group)||void 0===a?void 0:a.permissions),groupMemberInfo:h(h({},window.appData.groupMemberInfo),null===(i=window.appData.group)||void 0===i?void 0:i.groupMemberInfo)}),effects:{getMembers:p().mark((function e(t,n){var r,o,a,i,u,l,s,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,o=n.call,a=n.put,i=n.select,!window.appData.sharePage){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,i();case 6:return u=e.sent,l=u.group,s=r.data,s=h({with_invited:l.abilities&&l.abilities.create_member},s),e.next=12,o(c.e,s);case 12:if(f=e.sent,!(s.offset&&s.offset>0)){e.next=18;break}return e.next=16,a({type:"updateMembers",payload:l.members.concat(f.data)});case 16:e.next=20;break;case 18:return e.next=20,a({type:"updateMembers",payload:f.data});case 20:return e.abrupt("return",f.data);case 21:case"end":return e.stop()}}),e)})),getOwners:p().mark((function e(t,n){var r,o,a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,o=n.call,a=n.put,n.select,!window.appData.sharePage){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,o(l.a.groups.owners,r.data);case 6:return i=e.sent,e.next=9,a({type:"addOwners",payload:i});case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)}))},reducers:{update:function(e,t){var n=t.payload;return h(h({},e),n)},resetAndUpdate:function(e,t){var n=t.payload;return h(h({},v),n)},updateMembers:function(e,t){var n=t.payload;return h(h({},e),{},{members:[].concat(n)})},updateMembersCount:function(e,t){var n=t.payload;return h(h({},e),{},{membersCount:n})},addMembers:function(e,t){var n=t.payload;return h(h({},e),{},{members:e.members.concat(n),membersCount:e.membersCount+1})},addOwners:function(e,t){var n=t.payload;return h(h({},e),{},{owners:n})},removeMembers:function(e,t){var n=t.payload;return h(h({},e),{},{members:e.members.filter((function(e){return!(e.id===n.id&&e.type===n.type)})),membersCount:e.membersCount-1})},leave:function(e,t){var n=t.payload;return h(h({},e),{},{members:e.members.filter((function(e){return e.user.id!==n.id})),abilities:{create_book:!1,destroy:!1,read:!1,update:!1}})},updateGroupSettings:function(e,t){var n=t.payload.settings;return h(h({},e),{},{settings:n})},updateLabels:function(e,t){var n=t.payload.labels;return h(h({},e),{},{labels:n})},updateTopicsCount:function(e,t){var n=t.payload.topics_count;return h(h({},e),{},{topics_count:n})},updateToken:function(e,t){var n=t.payload;return h(h({},e),{},{joinToken:n})},updateMemberRole:function(e,t){var n=t.payload,r=f(e.members);return r.find((function(e){return e.id===n.id})).role=n.role,h(h({},e),{},{members:r})},updateMembersRole:function(e,t){var n=t.payload;return h(h({},e),{},{members:f(e.members).map((function(e){var t=n.find((function(t){return t.id===e.id}));return t&&(e.role=t.role),e}))})},removeMultiMembers:function(e,t){var n=t.payload;return h(h({},e),{},{members:f(e.members).filter((function(e){return!n.find((function(t){return t.id===e.id&&t.type===e.type}))})),membersCount:e.membersCount-n.length})},showGuideBooks:function(e,t){t.payload;return h(h({},e),{},{showGuideBooks:!0})}},subscriptions:{}})},function(e,t,n){"use strict";n.r(t);var r=n(147);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=a({},window.appData.resource);t.default=Object(r.a)({namespace:"resource",state:a(a({},c),{},{breadcrumbItems:[]}),reducers:{updateLikes:function(e,t){var n=t.payload;return a(a({},e),{},{likes_count:n.active?parseInt(e.likes_count,10)+1:parseInt(e.likes_count,10)-1,likes_status:!!n.active})}}})},function(e,t,n){"use strict";n.r(t);var r=n(147);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=Object(r.a)({namespace:"review",state:{},reducers:{update:function(e,t){var n=t.payload;return a(a({},e),n)}}})},function(e,t,n){"use strict";n.r(t);var r=n(147),o=n(34);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var d={};function p(){}function m(){}function h(){}var y={};u(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,c,u){var l=s(e[o],e,i);if("throw"!==l.type){var f=l.arg,d=f.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){f.value=e,c(f)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,u(g,"constructor",h),u(h,"constructor",m),m.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),u(g,c,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.default=Object(r.a)({namespace:"skylink",state:{modalVisible:!1,listLoading:!1,graphLoading:!1,instanceLoading:!1,currentInstance:null,refers:[],referred:[]},effects:{fetchGraphData:f().mark((function e(t,n){var r,a,i,c,u,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,i=n.put,c=r.data||{},u=c.instanceId,e.next=5,i({type:"update",payload:{graphLoading:!0}});case 5:return e.next=7,a(o.a.knowledgeGraph.listNeighbors,{id:u,types:"instance,link",distanceLimit:2});case 7:return l=e.sent,e.next=10,i({type:"update",payload:{graphLoading:!1,graphData:l}});case 10:case"end":return e.stop()}}),e)})),refreshAllFromInstance:f().mark((function e(t,n){var r,o,a,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n.call,o=n.put,a=r.data||{},i=a.instance){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,o({type:"update",payload:{currentInstance:i}});case 7:return e.next=9,o({type:"fetchRelation",payload:{data:{instanceId:i.id}}});case 9:return e.next=11,o({type:"fetchGraphData",payload:{data:{instanceId:i.id}}});case 11:case"end":return e.stop()}}),e)})),fetchRelation:f().mark((function e(t,n){var r,a,i,c,u,s,d,p,m;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,a=n.call,i=n.put,c=r.data||{},u=c.instanceId){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,i({type:"update",payload:{listLoading:!0}});case 7:return e.next=9,a((function(){return Promise.all([o.a.knowledgeGraph.listNeighbors({id:u,directions:"outgoing"}),o.a.knowledgeGraph.listNeighbors({id:u,directions:"incoming"})])}));case 9:return s=e.sent,d=l(s,2),p=d[0],m=d[1],e.next=15,i({type:"update",payload:{refers:(null==p?void 0:p.instances)||[],referred:(null==m?void 0:m.instances)||[],listLoading:!1}});case 15:return e.abrupt("return",[p,m]);case 16:case"end":return e.stop()}}),e)})),setCurInstanceFromDoc:f().mark((function e(t,n){var r,a,i,c,u,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,a=n.call,i=n.put,n.select,e.next=4,i({type:"update",payload:{instanceLoading:!0}});case 4:return c=r.data||{},u=c.docId,e.next=7,a(o.a.knowledgeGraph.getInstanceOfDoc,{id:u});case 7:return l=e.sent,e.next=10,i({type:"update",payload:{instanceLoading:!1}});case 10:if(l){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,i({type:"update",payload:{currentInstance:l}});case 14:return e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)}))},reducers:{update:function(e,t){var n=t.payload;return c(c({},e),n)},clear:function(){return{modalVisible:!1,listLoading:!1,graphLoading:!1,instanceLoading:!1,currentInstance:null,refers:[],referred:[]}}}})},function(e,t,n){"use strict";n.r(t);var r=n(147);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=Object(r.a)({namespace:"template",state:a({},window.appData.template),effects:{},reducers:{update:function(e,t){var n=t.payload;return a(a({},e),n)}}})},function(e,t,n){"use strict";n.r(t);var r=n(567),o=n(147);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,c,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,u,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=Object(o.a)({namespace:"user",state:s(s({},window.appData.user),{},{books:[],stars:[]}),reducers:{updateBooks:function(e,t){var n=t.payload;return s(s({},e),{},{books:[].concat(n)})},addBooks:function(e,t){var n=t.payload;return s(s({},e),{},{books:e.books.concat(n)})},updateStars:function(e,t){var n=t.payload;return s(s({},e),{},{stars:[].concat(n)})},addStars:function(e,t){var n=t.payload;return s(s({},e),{},{stars:e.stars.concat(n)})},updateFollowing:function(e,t){var n=t.payload.users;return s(s({},e),{},{following:n})},addFollowing:function(e,t){var n=t.payload.users;return s(s({},e),{},{following:[].concat(c(e.following),c(n))})},updateFollowers:function(e,t){var n=t.payload.users;return s(s({},e),{},{followers:n})},addFollowers:function(e,t){var n=t.payload.users;return s(s({},e),{},{followers:[].concat(c(e.followers),c(n))})},updateFollowStatus:function(e,t){var n=t.payload.status;return s(s({},e),{},{follow_status:n})},updateFollowingStatus:function(e,t){var n=t.payload.user_id,r=e.following,o=r.find((function(e){return e.id===n}));return o.follow_status=!o.follow_status,s(s({},e),{},{following:r})},updateFollowerStatus:function(e,t){var n=t.payload.user_id,r=e.followers,o=r.find((function(e){return e.id===n}));return o.follow_status=!o.follow_status,s(s({},e),{},{followers:r})}},effects:{queryUsers:i().mark((function e(t,n){var o,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.call,n.put,c=o.data,e.next=5,a(r.f,c);case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})),getDepUsersByDepId:i().mark((function e(t,n){var o,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.call,n.put,c=o.id,e.next=5,a(r.e,{id:c});case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})),getAllSubDepartments:i().mark((function e(t,n){var o,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.call,n.put,c=o.id,e.next=5,a(r.d,{id:c});case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})),getDepListByDepIds:i().mark((function e(t,n){var o,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.payload,a=n.call,n.put,c=o.ids,e.next=5,c.map(i().mark((function e(t){var n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(r.e,{id:t});case 2:return n=e.sent,o=n.data.parents.length,e.abrupt("return",n.data.parents[o-1].manageDepartment);case 5:case"end":return e.stop()}}),e)})));case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)}))}})},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(367));t.default=function(e,t,n,o,a,i){!e.required||n.hasOwnProperty(e.field)&&!r.isEmptyValue(t,i||e.type)||o.push(r.format(a.messages.required,e.fullField))}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__=t}var t,n,o;return t=e,(n=[{key:"_stringify",value:function(e){return null==e||"number"==typeof e&&isNaN(e)?e="":"string"!=typeof e&&(e=String(e)),e}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.BaseValidatorClass=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=[{char:"常",us:"China",zh:"中国",code:"+86"},{char:"常",us:"Hongkong",zh:"中国香港",code:"+852"},{char:"常",us:"India",zh:"印度",code:"+91"},{char:"常",us:"Indonesia",zh:"印度尼西亚",code:"+62"},{char:"常",us:"Malaysia",zh:"马来西亚",code:"+60"},{char:"常",us:"Philippines",zh:"菲律宾",code:"+63"},{char:"常",us:"Taiwan",zh:"中国台湾",code:"+886"},{char:"常",us:"Thailand",zh:"泰国",code:"+66"},{char:"常",us:"America",zh:"美国",code:"+1"},{char:"A",us:"Albania",zh:"阿尔巴尼亚",code:"+355"},{char:"A",us:"Algeria",zh:"阿尔及利亚",code:"+213"},{char:"A",us:"Afghanistan",zh:"阿富汗",code:"+93"},{char:"A",us:"Argentina",zh:"阿根廷",code:"+54"},{char:"I",us:"Ireland",zh:"爱尔兰",code:"+353"},{char:"E",us:"Egypt",zh:"埃及",code:"+20"},{char:"E",us:"Ethiopia",zh:"埃塞俄比亚",code:"+251"},{char:"E",us:"Estonia",zh:"爱沙尼亚",code:"+372"},{char:"U",us:"United Arab Emirates",zh:"阿拉伯联合酋长国",code:"+971"},{char:"U",us:"Aruba",zh:"阿鲁巴",code:"+297"},{char:"O",us:"Oman",zh:"阿曼",code:"+968"},{char:"A",us:"Andorra",zh:"安道尔",code:"+376"},{char:"A",us:"Angola",zh:"安哥拉",code:"+244"},{char:"A",us:"Anguilla",zh:"安圭拉岛",code:"+1264"},{char:"A",us:"Antigua and Barbuda",zh:"安提瓜和巴布达",code:"+1268"},{char:"A",us:"Australia",zh:"澳大利亚",code:"+61"},{char:"A",us:"Austria",zh:"奥地利",code:"+43"},{char:"A",us:"Azerbaijan",zh:"阿塞拜疆",code:"+994"},{char:"B",us:"Barbados",zh:"巴巴多斯岛",code:"+1246"},{char:"P",us:"Papua New Cuinea",zh:"巴布亚新几内亚",code:"+675"},{char:"B",us:"Bahamas",zh:"巴哈马",code:"+1242"},{char:"B",us:"Belarus",zh:"白俄罗斯",code:"+375"},{char:"B",us:"Bermuda Is.",zh:"百慕大群岛",code:"+1441"},{char:"P",us:"Pakistan",zh:"巴基斯坦",code:"+92"},{char:"P",us:"Paraguay",zh:"巴拉圭",code:"+595"},{char:"B",us:"Bahrain",zh:"巴林",code:"+973"},{char:"P",us:"Panama",zh:"巴拿马",code:"+507"},{char:"B",us:"Bulgaria",zh:"保加利亚",code:"+359"},{char:"B",us:"Brazil",zh:"巴西",code:"+55"},{char:"B",us:"Benin",zh:"贝宁",code:"+229"},{char:"B",us:"Belgium",zh:"比利时",code:"+32"},{char:"I",us:"Iceland",zh:"冰岛",code:"+354"},{char:"B",us:"Botswana",zh:"博茨瓦纳",code:"+267"},{char:"P",us:"Puerto Rico",zh:"波多黎各",code:"+1"},{char:"P",us:"Poland",zh:"波兰",code:"+48"},{char:"B",us:"Bolivia",zh:"玻利维亚",code:"+591"},{char:"B",us:"Belize",zh:"伯利兹",code:"+501"},{char:"B",us:"Bosnia and Herzegovina",zh:"波斯尼亚和黑塞哥维那",code:"+387"},{char:"B",us:"Bhutan",zh:"不丹",code:"+975"},{char:"B",us:"Burkina faso",zh:"布基纳法索",code:"+226"},{char:"B",us:"Burundi",zh:"布隆迪",code:"+257"},{char:"N",us:"North Korea",zh:"朝鲜",code:"+850"},{char:"N",us:"Equatorial Guinea",zh:"赤道几内亚",code:"+240"},{char:"D",us:"Denmark",zh:"丹麦",code:"+45"},{char:"G",us:"Germany",zh:"德国",code:"+49"},{char:"T",us:"Timor-Leste",zh:"帝汶岛",code:"+670"},{char:"T",us:"Togo",zh:"多哥",code:"+228"},{char:"D",us:"Dominica",zh:"多米尼加",code:"+1767"},{char:"D",us:"Dominica Rep.",zh:"多米尼加共和国",code:"+1809"},{char:"E",us:"Ecuador",zh:"厄瓜多尔",code:"+593"},{char:"E",us:"Eritrea",zh:"厄立特里亚",code:"+291"},{char:"R",us:"Russia",zh:"俄罗斯",code:"+7"},{char:"F",us:"France",zh:"法国",code:"+33"},{char:"F",us:"Faroe Islands",zh:"法罗群岛",code:"+298"},{char:"F",us:"French Polynesia",zh:"法属玻利尼西亚",code:"+689"},{char:"F",us:"French Guiana",zh:"法属圭亚那",code:"+594"},{char:"F",us:"Fiji",zh:"斐济",code:"+679"},{char:"P",us:"Philippines",zh:"菲律宾",code:"+63"},{char:"F",us:"Finland",zh:"芬兰",code:"+358"},{char:"G",us:"Gambia",zh:"冈比亚",code:"+220"},{char:"C",us:"Congo",zh:"刚果共和国",code:"+243"},{char:"D",us:"Democratic Republic of the Congo",zh:"刚果民主共和国",code:"+242"},{char:"G",us:"Greenland",zh:"格陵兰",code:"+299"},{char:"G",us:"Grenada",zh:"格林纳达",code:"+1473"},{char:"C",us:"Colombia",zh:"哥伦比亚",code:"+57"},{char:"C",us:"Costa Rica",zh:"哥斯达黎加",code:"+506"},{char:"G",us:"Guam",zh:"关岛",code:"+1671"},{char:"C",us:"Cuba",zh:"古巴",code:"+53"},{char:"G",us:"Guyana",zh:"圭亚那",code:"+592"},{char:"K",us:"Korea",zh:"韩国",code:"+82"},{char:"K",us:"Kazakstan",zh:"哈萨克斯坦",code:"+7"},{char:"M",us:"Montenegro",zh:"黑山共和国",code:"+382"},{char:"N",us:"Netherlands",zh:"荷兰",code:"+31"},{char:"H",us:"Honduras",zh:"洪都拉斯",code:"+504"},{char:"H",us:"Haiti",zh:"海地",code:"+509"},{char:"G",us:"Ghana",zh:"加纳",code:"+233"},{char:"C",us:"Canada",zh:"加拿大",code:"+1"},{char:"K",us:"Kampuchea (Cambodia)",zh:"柬埔寨",code:"+855"},{char:"G",us:"Gabon",zh:"加蓬",code:"+241"},{char:"D",us:"Djibouti",zh:"吉布提",code:"+253"},{char:"C",us:"Czech Republic",zh:"捷克",code:"+420"},{char:"K",us:"Kyrgyzstan",zh:"吉尔吉斯斯坦",code:"+996"},{char:"Z",us:"Zimbabwe",zh:"津巴布韦",code:"+263"},{char:"G",us:"Guinea",zh:"几内亚",code:"+224"},{char:"C",us:"Cayman Is.",zh:"开曼群岛",code:"+1345"},{char:"C",us:"Cameroon",zh:"喀麦隆",code:"+237"},{char:"Q",us:"Qatar",zh:"卡塔尔",code:"+974"},{char:"C",us:"Croatia",zh:"克罗地亚",code:"+385"},{char:"C",us:"Comorin",zh:"科摩罗",code:"+269"},{char:"K",us:"Kenya",zh:"肯尼亚",code:"+254"},{char:"I",us:"Ivory Coast",zh:"科特迪瓦",code:"+225"},{char:"K",us:"Kuwait",zh:"科威特",code:"+965"},{char:"L",us:"Laos",zh:"老挝",code:"+856"},{char:"L",us:"Latvia",zh:"拉脱维亚",code:"+371"},{char:"L",us:"Lebanon",zh:"黎巴嫩",code:"+961"},{char:"L",us:"Liberia",zh:"利比里亚",code:"+231"},{char:"L",us:"Libya",zh:"利比亚",code:"+218"},{char:"L",us:"Liechtenstein",zh:"列支敦士登",code:"+423"},{char:"L",us:"Lithuania",zh:"立陶宛",code:"+370"},{char:"R",us:"Romania",zh:"罗马尼亚",code:"+40"},{char:"L",us:"Luxembourg",zh:"卢森堡",code:"+352"},{char:"M",us:"Madagascar",zh:"马达加斯加",code:"+261"},{char:"M",us:"Maldives",zh:"马尔代夫",code:"+960"},{char:"M",us:"Malta",zh:"马耳他",code:"+356"},{char:"M",us:"Malaysia",zh:"马来西亚",code:"+60"},{char:"M",us:"Malawi",zh:"马拉维",code:"+265"},{char:"M",us:"Mali",zh:"马里",code:"+223"},{char:"U",us:"United States",zh:"美国",code:"+1"},{char:"M",us:"Mongolia",zh:"蒙古",code:"+976"},{char:"B",us:"Bangladesh",zh:"孟加拉国",code:"+880"},{char:"B",us:"Burma",zh:"缅甸",code:"+95"},{char:"P",us:"Peru",zh:"秘鲁",code:"+51"},{char:"M",us:"Monaco",zh:"摩纳哥",code:"+373"},{char:"M",us:"Morocco",zh:"摩洛哥",code:"+212"},{char:"M",us:"Mozambique",zh:"莫桑比克",code:"+258"},{char:"M",us:"Mexico",zh:"墨西哥",code:"+52"},{char:"N",us:"Namibia",zh:"纳米比亚",code:"+264"},{char:"S",us:"South Africa",zh:"南非",code:"+27"},{char:"N",us:"Nepal",zh:"尼泊尔",code:"+977"},{char:"N",us:"Nicaragua",zh:"尼加拉瓜",code:"+505"},{char:"N",us:"Niger",zh:"尼日尔",code:"+227"},{char:"N",us:"Nigeria",zh:"尼日利亚",code:"+234"},{char:"N",us:"Norway",zh:"挪威",code:"+47"},{char:"P",us:"Portugal",zh:"葡萄牙",code:"+351"},{char:"G",us:"Georgia",zh:"格鲁吉亚",code:"+995"},{char:"J",us:"Japan",zh:"日本",code:"+81"},{char:"S",us:"Sweden",zh:"瑞典",code:"+46"},{char:"S",us:"Switzerland",zh:"瑞士",code:"+41"},{char:"E",us:"EI Salvador",zh:"萨尔瓦多",code:"+503"},{char:"S",us:"Serbia",zh:"塞尔维亚",code:"+381"},{char:"S",us:"Sierra Leone",zh:"塞拉利昂",code:"+232"},{char:"S",us:"Senegal",zh:"塞内加尔",code:"+221"},{char:"C",us:"Cyprus",zh:"塞浦路斯",code:"+357"},{char:"S",us:"Seychelles",zh:"塞舌尔",code:"+248"},{char:"S",us:"Samoa Western",zh:"西萨摩亚",code:"+685"},{char:"S",us:"Saudi Arabia",zh:"沙特阿拉伯",code:"+966"},{char:"S",us:"Sao Tome and Principe",zh:"圣多美和普林西比",code:"+239"},{char:"S",us:"Saint Lueia",zh:"圣卢西亚",code:"+1758"},{char:"S",us:"San Marino",zh:"圣马力诺",code:"+378"},{char:"S",us:"Saint Vincent",zh:"圣文森特岛",code:"+1784"},{char:"S",us:"Sri Lanka",zh:"斯里兰卡",code:"+94"},{char:"S",us:"Slovakia",zh:"斯洛伐克",code:"+421"},{char:"S",us:"Slovenia",zh:"斯洛文尼亚",code:"+386"},{char:"S",us:"Swaziland",zh:"斯威士兰",code:"+268"},{char:"S",us:"Sudan",zh:"苏丹",code:"+249"},{char:"S",us:"Suriname",zh:"苏里南",code:"+597"},{char:"S",us:"Somali",zh:"索马里",code:"+252"},{char:"T",us:"Thailand",zh:"泰国",code:"+66"},{char:"T",us:"Tajikstan",zh:"塔吉克斯坦",code:"+992"},{char:"T",us:"Tonga",zh:"汤加",code:"+676"},{char:"U",us:"Uganda",zh:"乌干达",code:"+256"},{char:"T",us:"Turks and Caicos Islands",zh:"特克斯和凯科斯群岛",code:"+1649"},{char:"T",us:"Trinidad and Tobago",zh:"特立尼达和多巴哥",code:"+1868"},{char:"T",us:"Turkey",zh:"土耳其",code:"+90"},{char:"T",us:"Turkmenistan",zh:"土库曼斯坦",code:"+993"},{char:"T",us:"Tunisia",zh:"突尼斯",code:"+216"},{char:"V",us:"Vanuatu",zh:"瓦努阿图",code:"+678"},{char:"G",us:"Guatemala",zh:"危地马拉",code:"+502"},{char:"V",us:"Venezuela",zh:"委内瑞拉",code:"+58"},{char:"U",us:"Ukraine",zh:"乌克兰",code:"+380"},{char:"U",us:"Uruguay",zh:"乌拉圭",code:"+598"},{char:"U",us:"Uzbekistan",zh:"乌兹别克斯坦",code:"+998"},{char:"S",us:"Spain",zh:"西班牙",code:"+34"},{char:"G",us:"Greece",zh:"希腊",code:"+30"},{char:"S",us:"Singapore",zh:"新加坡",code:"+65"},{char:"N",us:"New Zealand",zh:"新西兰",code:"+64"},{char:"H",us:"Hungary",zh:"匈牙利",code:"+36"},{char:"S",us:"Syria",zh:"叙利亚",code:"+963"},{char:"J",us:"Jamaica",zh:"牙买加",code:"+1876"},{char:"A",us:"Armenia",zh:"亚美尼亚",code:"+374"},{char:"Y",us:"Yemen",zh:"也门",code:"+967"},{char:"I",us:"Italy",zh:"意大利",code:"+39"},{char:"I",us:"Iraq",zh:"伊拉克",code:"+964"},{char:"I",us:"Iran",zh:"伊朗",code:"+98"},{char:"I",us:"India",zh:"印度",code:"+91"},{char:"I",us:"Indonesia",zh:"印度尼西亚",code:"+62"},{char:"U",us:"United Kiongdom",zh:"英国",code:"+44"},{char:"I",us:"Israel",zh:"以色列",code:"+972"},{char:"J",us:"Jordan",zh:"约旦",code:"+962"},{char:"V",us:"Vietnam",zh:"越南",code:"+84"},{char:"Z",us:"Zambia",zh:"赞比亚",code:"+260"},{char:"U",us:"Jersey",zh:"泽西岛",code:"+44"},{char:"C",us:"Chad",zh:"乍得",code:"+235"},{char:"G",us:"Gibraltar",zh:"直布罗陀",code:"+350"},{char:"C",us:"Chile",zh:"智利",code:"+56"},{char:"C",us:"Central African RepubliC",zh:"中非共和国",code:"+236"},{char:"常",us:"China",zh:"中国",code:"+86"},{char:"M",us:"Macao(China)",zh:"中国澳门",code:"+853"},{char:"T",us:"Taiwan(China)",zh:"中国台湾",code:"+886"},{char:"H",us:"Hongkong(China)",zh:"中国香港",code:"+852"}];function o(e){var t={},n=[].concat(r);return e&&n.sort((function(e,t){return"常"===e.char&&"常"!==t.char?-1:"常"!==e.char&&"常"===t.char?1:"常"===e.char&&"常"===t.char?0:e.us>t.us?1:e.us<t.us?-1:0})),n.map((function(e,n){var r=!1;return t[e.char]?r=!1:(r=!0,t[e.char]=!0),e.first=r,e}))}},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(133),n(31)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(88),s=n(68),f=n(10),d=n.n(f),p=n(270),m=n.n(p),h=n(843),y=n(561),v=n(632),b=n(1025),g=n(1336),_=n(1029),w=n(560);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var C=n(1022).a.getSelectedKeys,N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(u,e);var t,n,a,c=j(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).state={},t}return t=u,(n=[{key:"componentDidMount",value:function(){}},{key:"shouldShowOrgEntry",value:function(){var e=window.appData,t=e.organization;return e.isPublicCloud&&!t}},{key:"render",value:function(){if((m.a.mobile||m.a.tablet)&&"desktop"!==window.appData.me.mobile_view)return i.a.createElement(v.a,null);var e=this.props,t=e.me,n=e.search,a=e.showExtraLink,c=e.isDigitalGarden,u=window.location.pathname,l=u.split("/")&&u.split("/")[1],s=["about","install","download"].includes(l),f="/"===u&&!t.id,p=s||f,E="/about/security"===u,O=window.appData.defaultSpaceHost,x=d()({header:!0,"header-theme-security":E,"header-digital-garden":c}),j=d()("header-search",{"header-nav-left":t.id,"header-nav-right":!t||!t.id}),k=C(["/dashboard","/feedbacks","/explore"],u);return i.a.createElement("div",{className:x,"data-aspm":"c33153"},i.a.createElement("div",{className:"yuque-header-container"},i.a.createElement("div",{className:"logo","data-testid":"yuque-logo"},i.a.createElement(w.a,{isDigitalGarden:c})),!c&&i.a.createElement(i.a.Fragment,null,(a||!t.account)&&i.a.createElement("div",{className:"header-nav header-nav-menu","data-testid":"nav-enterprise"},i.a.createElement(g.a,null)),!p&&i.a.createElement("div",{className:j,"data-aspm-click":"d73394","data-testid":"search-input"},i.a.createElement(y.a,{search:n,placement:t&&t.id?"bottomLeft":"bottomRight"})),!p&&t.id&&i.a.createElement("div",{className:"header-nav header-nav-menu","data-testid":"nav-menu"},i.a.createElement(o.a,{mode:"horizontal",selectedKeys:k},i.a.createElement(o.a.Item,{className:"header-nav-item",key:"/dashboard"},i.a.createElement("a",{href:"".concat(O,"/dashboard"),"data-aspm-click":"d73393"},__("工作台"))),i.a.createElement(o.a.Item,{className:"header-nav-item",key:"/explore"},i.a.createElement(_.a,null)),this.shouldShowOrgEntry()&&i.a.createElement(o.a.Item,null,i.a.createElement("a",{className:"header-nav-item header-nav-orgs",href:"/about/groups",target:"_blank","data-aspm-click":"d73392"},__("空间"))),i.a.createElement(o.a.Item,{className:"header-nav-item",key:"/yuque/help"},i.a.createElement("a",{href:"/about/help",target:"_blank","data-aspm-click":"d73390"},__("帮助"))),i.a.createElement(o.a.Item,{className:"header-nav-item",key:"/feedbacks"},i.a.createElement("a",{href:"https://www.yuque.com/feedbacks/new",target:"_blank"},__("反馈"))),i.a.createElement(o.a.Item,{className:"header-nav-item",key:"/download"},i.a.createElement("a",{href:"/download",target:"_blank"},__("下载"))))),i.a.createElement("div",{className:"header-nav"},p?i.a.createElement(h.a,{me:t},i.a.createElement("a",{href:"/",className:"header-nav-enter","data-testid":"login-action"},i.a.createElement(r.a,{type:"primary"},__("进入语雀")))):i.a.createElement("div",{className:"header-nav","data-testid":"user-header-actions",style:{minWidth:161}},i.a.createElement(b.a,null))))))}}])&&O(t.prototype,n),a&&O(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(a.Component);N.propTypes={search:u.a.object,showExtraLink:u.a.bool,me:u.a.object,isDigitalGarden:u.a.bool},N.defaultProps={showExtraLink:!1},t.a=Object(s.withRouter)(Object(l.d)((function(e){return e}))(N))},,function(e,t,n){var r=n(2171),o=1/0;e.exports=function(e){return e?(e=r(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(604),o=n(1176),a=n(454),i=n(2159),c=n(2742),u=n(955),l=n(2743),s=n(1006),f=n(269);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return f(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[s];var d=-1;t=r(t,u(a));var p=i(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return c(p,(function(e,t){return l(e,t,n)}))}},function(e,t,n){var r=n(1007),o=n(1293),a=n(2745),i=n(1009);e.exports=function(e,t){return t=r(t,e),null==(e=a(e,t))||delete e[i(o(t))]}},function(e,t,n){var r=n(454),o=n(672),a=n(837);e.exports=function(e){return function(t,n,i){var c=Object(t);if(!o(t)){var u=r(n,3);t=a(t),n=function(e){return u(c[e],e,c)}}var l=e(t,n,i);return l>-1?c[u?t[l]:l]:void 0}}},function(e,t,n){var r=n(1008);e.exports=function(e,t,n){for(var o=-1,a=e.length;++o<a;){var i=e[o],c=t(i);if(null!=c&&(void 0===u?c==c&&!r(c):n(c,u)))var u=c,l=i}return l}},function(e,t,n){var r=n(1287),o=n(1997),a=n(1999),i=n(604),c=n(955),u=n(1288),l=Math.min;e.exports=function(e,t,n){for(var s=n?a:o,f=e[0].length,d=e.length,p=d,m=Array(d),h=1/0,y=[];p--;){var v=e[p];p&&t&&(v=i(v,c(t))),h=l(v.length,h),m[p]=!n&&(t||f>=120&&v.length>=120)?new r(p&&v):void 0}v=e[0];var b=-1,g=m[0];e:for(;++b<f&&y.length<h;){var _=v[b],w=t?t(_):_;if(_=n||0!==_?_:0,!(g?u(g,w):s(y,w,n))){for(p=d;--p;){var E=m[p];if(!(E?u(E,w):s(e[p],w,n)))continue e}g&&g.push(w),y.push(_)}}return y}},function(e,t,n){var r=n(958);e.exports=function(e){return r(e)?e:[]}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),o=function(e){var t=e.dispatch,n=e.docId,o=e.launched;r.useEffect((function(){n&&o&&t({type:"skylink/setCurInstanceFromDoc",payload:{data:{docId:n}}}).then((function(e){e&&(t({type:"skylink/fetchRelation",payload:{data:{instanceId:null==e?void 0:e.id}}}),t({type:"skylink/fetchGraphData",payload:{data:{instanceId:null==e?void 0:e.id}}}))}))}),[n,o])}},function(e,t,n){},function(e,t,n){"use strict";n(148);var r=n(53),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(10),l=n.n(u),s=n(88),f=n(254),d=n(317);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=e.tabs,n=e.className,i=e.initTab,c=e.type,u=e.page,s=e.dispatch,h=e.withAreaSelection,y=e.litecomment.showArea,v=m(Object(o.useState)({}),2),b=v[0],g=v[1],_=function(e){g(e),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),150)},w=function(e){if(e)if(e===b.key)_({}),"comment"===e&&"Resource"===c&&s({type:"litecomment/cancleAreaCommenting"});else{var n=t.find((function(t){return t.key===e}));_(n)}else _({})};return Object(o.useEffect)((function(){if(window.location.hash.startsWith("#comment-")){var e=t.find((function(e){return"comment"===e.key}));e&&_(e)}if(i){var n=t.find((function(e){return e.key===i}));_(n)}}),[i]),a.a.createElement("div",{className:l()([d.a.wrapper],n,p({},d.a.wrapperActive,b&&b.key))},a.a.createElement("div",{className:d.a.bar,"data-testid":"reader-infobar-actions"},t&&t.map((function(e){return a.a.createElement("a",{key:e.key,"data-testid":"reader-infobar-btn-".concat(e.key),className:l()([d.a.btn],p({},d.a.btnActive,b.key===e.key)),onClick:function(){w(e.key)}},e.icon)}))),a.a.createElement("div",{className:d.a.contentWrapper},b&&b.key&&a.a.createElement("div",{className:d.a.content,"data-testid":"reader-infobar-content"},a.a.createElement("div",{className:d.a.header},a.a.createElement("span",{className:d.a.title},b.title),a.a.createElement("div",null,h&&"comment"===b.key&&a.a.createElement("span",{className:d.a.btnToggle,"data-testid":"area-selection-checkbox"},a.a.createElement(r.a,{checked:y,onChange:function(){s({type:"litecomment/toggleShowArea"})}},__("显示框选区域"))),a.a.createElement("a",{className:d.a.btnClose,onClick:function(){w("")}},a.a.createElement(f.a,null)))),a.a.createElement("div",{key:u,className:d.a.body},b.content))))};y.propTypes={tabs:c.a.array.isRequired,className:c.a.string,initTab:c.a.string,type:c.a.string,page:c.a.number,dispatch:c.a.func,withAreaSelection:c.a.bool,litecomment:c.a.object},t.a=Object(s.d)((function(e){return{litecomment:e.litecomment}}))(y)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r={recent:"recent",groups:"groups"},o={SUB_TAB:"dashboard/subtab"}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(88),u=n(381),l=n(683),s=(n(50),n(19)),f=(n(209),n(61)),d=(n(75),n(26)),p=(n(96),n(23)),m=(n(79),n(44)),h=(n(60),n(24)),y=n(10),v=n.n(y),b=n(289),g=n.n(b),_=n(527),w=n(1206),E=n(140),O=n.n(E),x=n(1462),j=n(210),k=n(358),S=n(113),C=n(1302),N=n(2102),P=n(2226),T=n(91),A=n(1171),L=n(2126),I=n(116);n(148);var R=n(53),D=n(32),M=n.n(D),F="LoginTipsFromDesktopInside-module_wrapper_82NOX",B="LoginTipsFromDesktopInside-module_content_3W38j",U="LoginTipsFromDesktopInside-module_title_b1nVG",z="LoginTipsFromDesktopInside-module_tips_OgJyZ",G="LoginTipsFromDesktopInside-module_safeLink_r1LzR",V="LoginTipsFromDesktopInside-module_footer_d61br",Y="LoginTipsFromDesktopInside-module_checkBox_P4hp+",q="LoginTipsFromDesktopInside-module_checkBoxTips_Z-jyl",H="LoginTipsFromDesktopInside-module_loginLark_LFG-K";function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $="desktop-to-lark-safe-tips",Q="nomore";function X(){var e=W(Object(r.useState)(!1),2),t=e[0],n=e[1],o=W(Object(r.useState)(!0),2),a=o[0],i=o[1],c=M()().format("YYYY-MM-DD");return Object(r.useEffect)((function(){var e;((e=localStorage.getItem($))===Q||e===c)&&i(!1)}),[]),{state:{visible:a,showTips:t},handleChange:function(e){n(e.target.checked)},goToLark:function(){t?localStorage.setItem($,Q):localStorage.setItem($,c),i(!1)},goToSafeLink:function(){window.openExternalLink("https://yuque.antfin.com/docs/share/4a3f85ef-8668-42f4-a88b-4dda23ed378a?#",!0)}}}var J=function(e){var t=X(),n=t.state,r=n.visible,a=n.showTips,i=t.handleChange,c=t.goToLark,u=t.goToSafeLink;return r?o.a.createElement("div",{className:v()(F),"data-testid":"safe-tips"},o.a.createElement("div",{className:B},o.a.createElement(f.a,null,o.a.createElement(f.a.Item,null,o.a.createElement("h3",{className:U},__("正在登录公网语雀")),o.a.createElement("h3",{className:U},__("请注意信息安全")),o.a.createElement("p",{className:z},__("公网语雀服务于互联网上的个人或组织，内容可以设定为互联网可见，请注意数据外泄风险，对外发布内容需先经过"),o.a.createElement("span",{className:G,onClick:u},__("数据安全评估")))),o.a.createElement("div",{className:V},o.a.createElement("div",{className:Y},o.a.createElement(R.a,{defaultChecked:a,onChange:function(e){return i(e)}},o.a.createElement("span",{className:q},__("不再提示")))),o.a.createElement(f.a.Item,null,o.a.createElement(s.a,{size:"large",type:"primary",className:H,onClick:c},__("继续登录公网"))))))):null};J.useViewModel=X;var Z=J,ee=n(2227),te=n(2116),ne=n(562),re=window.appData.isDesktopApp;var oe=function(e){var t=e.onBack;return re?o.a.createElement("div",{className:"back-to-login",onClick:t},o.a.createElement(j.IconIconLeft,null),__("返回登录页")):null};function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(){ie=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ae(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function ce(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ce(a,r,o,i,c,"next",e)}function c(e){ce(a,r,o,i,c,"throw",e)}i(void 0)}))}}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return he(e)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=window.appData,ge=be.locale,_e=be.isDesktopApp,we=be.isDesktopInValidVersion,Ee="en-us"===ge,Oe=new URLSearchParams(window.location.search),xe="from_desktop_inside_login_page"===Oe.get("scene"),je="true"===Oe.get("show_download_ali_yuque_tips"),ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(i,e);var t,n,r,a=pe(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ve(he(t=a.call(this,e)),"getTarget",(function(){var e;return(0,t.props.form.validateFields)(["login"],(function(n,r){n||(e=t.state.currentMobile)})),e})),ve(he(t),"handleSubmit",(function(e){if(null==e||e.preventDefault(),!t.state.submitting){t.setState({errorMsg:"",submitting:!0});var n=t.props,r=n.form,a=n.dispatch,i=n.mode;r.validateFields((function(n,c){if("mobile"===t.state.loginWay&&(c.login=t.state.currentMobile),n)t.setState({submitting:!1});else{if(t.protocolRef&&!t.protocolRef.checkProtocolAgreed({onConfirm:t.handleSubmit.bind(he(t),e)}))return void t.setState({submitting:!1});a({type:"me/doLogin",payload:se(se({},c),{},{loginType:t.state.loginType})}).then((function(e){if(t.setState({submitting:!1,currentMobile:c.login}),e.data)return"modal"===i&&t.props.onLogin?(r.resetFields(),void t.props.onLogin()):(T.default.get("terms")||(T.default.set("terms",1),I.webProxy.mine.updateUserSettings({key:"terms",value:1})),void Object(k.b)(e.data.goto));e.captcha&&t.setState({showCaptcha:!0},(function(){t.captcha.reset()}));var n=t.state.currentMobile,a=Ee?_.validator.mobilePhoneForNonChinese(n):_.validator.mobilePhone(n);if("not-support-register"!==e.code)if("not-register"!==e.code)if("login_or_password"!==e.key){if("location-invalid"===e.code)return h.a.warn(__("账号登录异常，请使用短信登录")),void t.setState({loginType:"sms",loginWay:"mobile",forceSmsLogin:!0,submitting:!1,showCaptcha:!1,errorMsg:""});var u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={login:{notfound:0!==n.id?__("帐号不存在，请重新输入"):r.mobile?__("该手机号未注册语雀 {loginLink}",{loginLink:o.a.createElement("a",{href:"/login"},__("快速注册"))}):__("邮箱未绑定语雀帐号，无法登录 {loginLink}",{loginLink:o.a.createElement("a",{href:"/login"},__("快速注册"))}),notjoin:__("没有权限登录此企业空间"),locked:__("密码错误次数过多，帐号登录已被暂时锁定，10 分钟后将自动解锁，或者你也可以通过{findPasswordLink}来解锁",{findPasswordLink:o.a.createElement("a",{href:"/password_reset"},__("找回密码"))}),"rate-limit":__("反复登录次数过多，请一分钟以后再试"),"invalid-checkcode":__("验证码失效"),banned:__("当前帐号已封禁，如有问题请联系 support@yuque.com"),"gray-intercept":__("仅允许管理员登录"),"invalid-role":__("该账户非空间外部联系人")},password:{wrong:o.a.createElement("span",null,__("密码不正确，请重新输入")),disable_password_login:o.a.createElement("span",null,__("当前企业空间已关闭密码登录")),invalid:o.a.createElement("span",null,__("输入正确密码格式，至少 6 位"))},code:{invalid:__("输入正确的验证码"),"invalid-checkcode":__("验证码已失效，请重新获取")}};return a[e]&&a[e][t]?a[e][t]:null}(e.key,e.code,t.props.space,{mobile:a?null:n});u?(t.setState({errorMsg:e.key}),r.setFields(ve({},e.key,{value:c[e.key],errors:[u]}))):h.a.error(__("登录失败，请稍后再试"))}else h.a.warn(__("帐号或密码输入错误"));else window.location.href="/register";else h.a.warn(__("仅限中国大陆（不含港澳台）手机号注册"))})).catch((function(){t.setState({submitting:!1})}))}}))}})),ve(he(t),"onClickSwitch",(function(){var e=t.state.currentMobile;t.props.form.setFieldsValue({login:e});var n="password"===t.state.loginType?"sms":"password",r="sms"===n&&w.globalMobilePhoneRE.test(e);t.setState({loginType:n,loginWay:"mobile",submitting:!1,showCaptcha:!1,errorMsg:"",smsNeedCaptcha:r})})),ve(he(t),"onChange",function(){var e=ue(ie().mark((function e(n){var r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.props.form.setFields([{name:"login",errors:[]}]),!t.state.errorMsg){e.next=4;break}return e.next=4,t.props.form.validateFields();case 4:r=t.state.loginType,t.setState({smsNeedCaptcha:"sms"===r&&w.globalMobilePhoneRE.test(n),currentMobile:n,errorMsg:""});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ve(he(t),"toggleLoginWay",(function(){var e=t.state.loginWay;t.props.form.resetFields(),t.setState({loginWay:"mobile"===e?"email":"mobile",loginType:"password",submitting:!1,showCaptcha:!1,errorMsg:""})})),ve(he(t),"toggleLoginEmail",(function(){t.props.form.resetFields(),t.setState({loginWay:"email",loginType:"password",submitting:!1,showCaptcha:!1,errorMsg:""})})),ve(he(t),"openProxySettings",(function(){t.setState({showProxySetting:!0})})),ve(he(t),"closeProxySettings",(function(){t.setState({showProxySetting:!1})}));var n="+86"===T.default.get("phoneCode")||null===T.default.get("phoneCode")?T.default.get("phoneNumber"):"".concat(T.default.get("phoneCode")," ").concat(T.default.get("phoneNumber")),r=Oe.get("loginType")||"sms";return t.state={submitting:!1,showCaptcha:!1,errorMsg:"",loginType:r,forceSmsLogin:!1,loginWay:"mobile",currentMobile:n,showProxySetting:!1,smsNeedCaptcha:"sms"===r&&w.globalMobilePhoneRE.test(n)},t}return t=i,n=[{key:"componentDidMount",value:function(){Object(L.b)(),we&&window.openExternalLink&&this.showDesktopUpdateModal()}},{key:"showDesktopUpdateModal",value:function(){m.a.warning({title:__("更新提醒"),content:__("你的语雀版本过旧，请尽快下载最新版使用"),onOk:function(){window.openExternalLink("/download",!0)},okText:__("去下载"),cancelText:null})}},{key:"renderRegisterButton",value:function(){var e=window.appData.organization;if(S.a.disableRegistry(e))return null;var t=Object(b.parse)(decodeURIComponent(window.location.search)).goto,n={};t&&(n.goto=t),_e&&(n.source="desktop");var r=Object.keys(n).length?"?".concat(Object(b.stringify)(n)):"";return o.a.createElement("a",{href:"/login".concat(r)},__("快速注册"))}},{key:"getBtnDisabled",value:function(){var e=this.props.form.getFieldValue;return"password"===this.state.loginType?!e("password")||!e("login"):!this.state.currentMobile||!e("code")}},{key:"renderOtherLoginChannel",value:function(){var e=this;if(this.state.forceSmsLogin)return null;var t=Object(b.parse)(window.location.search).showProxy,n=_e&&t&&Object(A.a)().ipcRenderer,r=t&&_e&&n,a=this.renderRegisterButton();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"login-more-tips-warp"},o.a.createElement("span",{className:"login-more-tips-warp-left"}),o.a.createElement("span",null,__("其他登录方式")),o.a.createElement("span",{className:"login-more-tips-warp-right"})),o.a.createElement("div",{className:"login-more-warp"},o.a.createElement("div",{className:"login-more-warp-box"},o.a.createElement(ne.a,{loginType:"sms"===this.state.loginType?"password":"sms",onClickSwitch:this.onClickSwitch}),o.a.createElement(ee.a,{"data-aspm":"email"===this.state.loginWay?"c38513":"c38516",switchPlatform:this.props.switchPlatform,checkBeforeLogin:function(t){var n;return null===(n=e.protocolRef)||void 0===n?void 0:n.checkProtocolAgreed({onConfirm:t})},extra:a,loginType:this.state.loginType,mode:this.props.mode}),o.a.createElement(p.a,{title:__("邮箱登录")},o.a.createElement("a",{"data-aspm-click":"d015","data-testid":"changeLoginWay",onClick:this.toggleLoginEmail},o.a.createElement("span",{className:"login-email-icon"},o.a.createElement(j.IconIconEmail,null)))),r&&o.a.createElement("div",{className:"proxy-setting",onClick:this.openProxySettings},__("代理设置")))))}},{key:"render",value:function(){var e=this,t=this.props.form,n=t.getFieldDecorator,r=(0,t.getFieldError)(this.state.errorMsg),a=Object(b.parse)(window.location.search).showProxy,i=_e&&a&&Object(A.a)().ipcRenderer,c="password"===this.state.loginType,u=this.renderRegisterButton();return o.a.createElement("div",{className:v()("account-login form-pro",{"login-from-desktop":_e}),"data-aspm":"email"===this.state.loginWay?"c38514":"c38497"},o.a.createElement(f.a,{onSubmit:this.handleSubmit},o.a.createElement(f.a.Item,{className:v()({"ant-legacy-form-item-custom":"login"===this.state.errorMsg,"login-from-desktop-inside":xe&&!je})},("mobile"===this.state.loginWay||!c)&&n("login",{validateTrigger:"onSubmit",initialValue:this.state.currentMobile||"",getValueFromEvent:this.getDecoratorValue,rules:[{required:!0,validator:function(e,t,n){var r=Ee?_.validator.mobilePhoneForNonChinese(t):_.validator.mobilePhone(t);n(c&&r?__("输入正确手机号"):r)}}]})(o.a.createElement(te.a,{passwordType:c,onChange:this.onChange})),"email"===this.state.loginWay&&c&&n("login",{validateTrigger:"onSubmit",initialValue:"",rules:[{validator:function(e,t,n){var r=O.a.trimAllSpace(t);_.validator.isEmail(r)?n():n(__("输入正确的邮箱"))}}]})(o.a.createElement("div",{className:"email-login-input"},o.a.createElement(d.a,{"data-testid":"email-login-input","data-aspm-click":"d017",autocomplete:"new-password",readonly:!0,onfocus:"this.removeAttribute('readonly');",type:"text",ref:function(t){e.input=t},placeholder:__("请输入邮箱"),maxLength:100,size:"large"}))),"login"===this.state.errorMsg&&o.a.createElement("div",{className:"ant-legacy-form-explain ant-legacy-form-explain-custom"},r)),this.state.showCaptcha&&o.a.createElement("div",{className:"password-login-captcha"},o.a.createElement(C.a,{form:this.props.form,show:this.state.showCaptcha,ref:function(t){e.captcha=t},scene:window.h5?"nc_login_h5":"login"})),c?o.a.createElement("div",{className:"login-password-formitem"},o.a.createElement(f.a.Item,null,n("password",{validateTrigger:"onSubmit",initialValue:"",rules:[{validator:function(e,t,n){t.length?t.length<6?n(__("输入正确密码格式，至少 6 位")):n():n(__("输入密码"))}}]})(o.a.createElement(d.a.Password,{"data-testid":"loginPasswordInput","data-aspm-click":"email"===this.state.loginWay?"d018":"d003",className:"login-password-input",autoComplete:"off",placeholder:__("请输入密码"),type:"password",maxLength:200,size:"large"})))):o.a.createElement("div",{className:"login-check-code"},o.a.createElement(N.a,{disabled:!this.state.currentMobile,fieldTypeName:"login",form:this.props.form,action:"login",getTarget:this.getTarget,clickLink:this.onClickSwitch,linkTest:__(""),needCaptcha:this.state.smsNeedCaptcha}),"checkcode"===this.state.errorMsg&&o.a.createElement("div",{className:"ant-legacy-form-explain ant-legacy-form-explain-custom"},r)),"password"===this.state.loginType&&o.a.createElement("a",{"data-aspm-click":"d014",className:"password-reset",href:"/password_reset?loginWay=".concat(this.state.loginWay)},__("忘记密码？")),o.a.createElement(f.a.Item,null,o.a.createElement(s.a,{"data-testid":"btnLogin","data-aspm-click":"email"===this.state.loginWay?"d020":"d009",type:"primary",htmlType:"submit",size:"large",disabled:this.getBtnDisabled(),block:!0,className:"btn-login",loading:this.state.submitting},o.a.createElement("span",null,"password"===this.state.loginType?__("登录"):__("登录 / 注册"))))),o.a.createElement("div",{className:"lark-login-protocol"},o.a.createElement(P.a.ManualProtocol,{ref:function(t){e.protocolRef=t}})),this.renderOtherLoginChannel(),o.a.createElement("div",{"data-testid":"loginFoot",style:{display:"none"},className:"login-foot","data-aspm":"email"===this.state.loginWay?"c38512":"c38515"},o.a.createElement("a",{"data-aspm-click":"d014",href:"/password_reset"},__("找回密码")),o.a.createElement("span",{className:"login-foot-span"}),u&&o.a.createElement("div",{className:"login-foot-register"},o.a.createElement("span",{className:"login-foot-span"}),o.a.createElement("a",{"data-aspm-click":"d016"},u)),o.a.createElement("span",{className:"login-foot-span"}),o.a.createElement("a",{href:"https://www.yuque.com/yuque/cdgcvd/xt7yg8"},__("遇到问题"))),this.state.showProxySetting&&o.a.createElement("div",{className:"proxy-board-warp"},o.a.createElement("h2",null,__("设置代理")),o.a.createElement(x.a,{scene:"mini",getProxySettings:ue(ie().mark((function e(){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.invoke("get-proxy-settings");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),updateProxySettings:function(){var e=ue(ie().mark((function e(t){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.invoke("update-proxy-settings",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onOk:this.closeProxySettings}),o.a.createElement(oe,{onBack:this.closeProxySettings})),xe&&o.a.createElement(Z,null))}}],n&&fe(t.prototype,n),r&&fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);ke.propTypes={switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]).isRequired,onLogin:i.a.func};var Se=f.a.create()(Object(c.d)((function(e){return e}))(ke)),Ce=n(5);function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ae(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var o=De(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Re(e)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=new URLSearchParams(window.location.search),Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(i,e);var t,n,r,a=Le(i);function i(){var e;Pe(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Me(Re(e=a.call.apply(a,[this].concat(n))),"state",{oauthParams:window.appData.login.oauthParams,loginType:Fe.get("loginType")}),Me(Re(e),"getOauthURL",(function(){return e.props.dispatch({type:"proxy.web/accounts.getOauthURL",payload:{data:{platform:window.appData.login.platform||"dingtalk"}}}).then((function(t){e.setState({oauthParams:t.oauthParams})}))})),Me(Re(e),"initData",(function(){var t=e.state.oauthParams;if(t)if(window.appData.login.isDingTalkDesktopApp){Object(Ce.d)("https://g.alicdn.com/dingding/dingtalk-pc-api/2.7.0/index.js",(function(){return e.initWithDesktop()}))}else{Object(Ce.d)("https://g.alicdn.com/dingding/dinglogin/0.0.5/ddLogin.js",(function(){window.DDLogin({id:"qr_login_container",goto:encodeURIComponent(t.DDLoginGoto),style:"border:none;background-color:#FFFFFF;",width:"240",height:"310"})})),window.addEventListener("message",e.handleMessage,!1)}})),Me(Re(e),"handleMessage",(function(t){var n=t.origin,r=t.data;if("https://login.dingtalk.com"===n){var o=r,a="".concat(e.state.oauthParams.DDLoginGoto,"&loginTmpCode=").concat(encodeURIComponent(o));window.location=a}})),Me(Re(e),"switchPlatform",(function(t){if("modal"===e.props.mode)return t.preventDefault(),void e.props.switchPlatform("normal");window.appData.isDesktopApp?window.history.back():window.location.href="/login?loginType=".concat(e.state.loginType)})),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;this.state.oauthParams?this.initData():this.getOauthURL().then((function(){e.initData()}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage,!1)}},{key:"initWithDesktop",value:function(){var e=window.DingTalkPC,t=window.appData.dingtalkCorpId;e.runtime.permission.requestAuthCode({corpId:t,onSuccess:function(n){if(console.log("requestAuthCode success",n),n&&n.code){var r=g.a.parse(window.location.search),o={codeType:"authcode",code:n.code,goto:r.goto||"/",corpId:t},a="".concat(window.location.protocol,"//").concat(window.location.host),i="".concat(a,"/login/callback/dingtalk?").concat(g.a.stringify(o));console.log("openLink ".concat(i)),e.biz.util.openLink({url:i,onSuccess:function(t){console.log("openLink success",t),e.biz.navigation.quit({message:"quit message",onSuccess:function(e){console.log("navigation.quit success",e)},onFail:function(e){console.log(e)}})},onFail:function(e){console.log(e)}})}else e.device.notification.toast({type:"error",text:"requestAuthCode result format error: ".concat(JSON.stringify(n)),duration:5,delay:0})},onFail:function(t){console.log("requestAuthCode fail",t),e.device.notification.toast({type:"error",text:"requestAuthCode error: ".concat(t.errorMessage),duration:5,delay:0})}})}},{key:"render",value:function(){var e=this.props.space;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"thirdpart-login","data-aspm":"c38511"},o.a.createElement("div",{id:"qr_login_container",className:"thirdpart-login-qr","data-aspm-click":"d028"})),o.a.createElement("div",null,e.enable_password&&o.a.createElement("p",{"data-aspm":"c38510"},o.a.createElement(ne.a,{loginType:this.state.loginType,onClickSwitch:this.switchPlatform}))))}}])&&Te(t.prototype,n),r&&Te(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);Be.defaultProps={switchPlatform:function(){}},Be.propTypes={switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]).isRequired};var Ue=Object(c.d)((function(e){return e}))(Be),ze=n(628);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qe(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$e(e);if(t){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return We(this,n)}}function We(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ke(e)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe="zh-cn"===Object(ze.b)()?"zh_CN":"en",Je=new URLSearchParams(window.location.search),Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(i,e);var t,n,r,a=He(i);function i(){var e;Ve(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qe(Ke(e=a.call.apply(a,[this].concat(n))),"state",{oauthParams:window.appData.login.oauthParams,oauthURL:window.appData.login.oauthURL,loginType:Je.get("loginType")}),Qe(Ke(e),"getOauthURL",(function(){return e.props.dispatch({type:"proxy.web/accounts.getOauthURL",payload:{data:{platform:"wechat"}}}).then((function(t){e.setState({oauthParams:t.oauthParams,oauthURL:t.oauthURL})}))})),Qe(Ke(e),"switchPlatform",(function(t){if("modal"===e.props.mode)return t.preventDefault(),void e.props.switchPlatform("normal");window.appData.isDesktopApp?window.history.back():window.location.href="/login?loginType=".concat(e.state.loginType)})),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;this.state.oauthParams?this.initData():this.getOauthURL().then((function(){e.initData()}))}},{key:"initData",value:function(){var e=this.state.oauthParams;e&&Object(Ce.d)("https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js",(function(){return new window.WxLogin({self_redirect:!1,id:"qr_login_container",appid:encodeURIComponent(e.appid),scope:"snsapi_login&lang=".concat(Xe),redirect_uri:encodeURIComponent(e.redirect_uri),state:encodeURIComponent(e.state)})}))}},{key:"render",value:function(){var e=this.props.space;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"thirdpart-login"},o.a.createElement("div",{id:"qr_login_container",className:"thirdpart-login-qr"}),o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("a",{href:"".concat(this.state.oauthURL,"&lang=").concat(Xe)},__("无法显示二维码？"))),o.a.createElement("p",null,o.a.createElement("br",null)),e.enable_password&&o.a.createElement(ne.a,{loginType:this.state.loginType,onClickSwitch:this.switchPlatform}))))}}])&&Ye(t.prototype,n),r&&Ye(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);Ze.defaultProps={switchPlatform:function(){}},Ze.propTypes={switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]).isRequired};var et=Object(c.d)((function(e){return e}))(Ze),tt=n(376),nt=n.n(tt);function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var at=function(e){var t=null,n=e.organization,a=window.appData.settings,i=(void 0===a?{}:a).is_via_custom_domain,c=rt(Object(r.useState)(window.appData.login.oauthURL),2),u=c[0],l=c[1],s=function(){e.dispatch({type:"proxy.web/accounts.getOauthURL",payload:{data:{platform:"weixin",organization_id:n.id}}}).then((function(e){l(e.oauthURL)}))},f=function(t){if("modal"===e.mode)return t.preventDefault(),void e.switchPlatform("normal");window.location.href="/login"};return Object(r.useEffect)((function(){return u?function(){var n="zh-cn"===Object(ze.b)()?"zh_CN":"en";nt.a.toCanvas(document.getElementById("qr_login_container"),"".concat(u,"&lang=").concat(n));var r=!1;t=setInterval((function(){r||e.dispatch({type:"proxy.web/accounts.corpLoginCheck"}).then((function(n){if("success"===n.code)return clearInterval(t),void h.a.success(__("登录成功"),2,(function(){"modal"===e.mode&&e.onLogin?e.onLogin():Object(k.b)(n.goto)}));if(n.message){clearInterval(t);var o=document.getElementById("qr_login_container");return o.getContext("2d").clearRect(0,0,o.width,o.height),void m.a.error({centered:!0,title:__("登录失败"),content:n.message,okText:__("重新登录"),onOk:function(){"modal"===e.mode?s():window.location.reload()}})}r=!1})).catch((function(){r=!1}))}),i?2e3:1e3)}():s(),function(){clearInterval(t)}}),[u]),o.a.createElement("div",{className:"thirdpart-login corp-login"},o.a.createElement("canvas",{id:"qr_login_container",className:"thirdpart-login-qr-weixin"}),o.a.createElement("p",null,__("请使用企业微信扫描二维码登录")),o.a.createElement("p",null,o.a.createElement("br",null)),!!n.password_enable&&!window.appData.me.id&&o.a.createElement("p",null,o.a.createElement(ne.a,{text:__("使用帐号密码登录"),onClickSwitch:f})),!n.password_enable&&!window.appData.me.id&&o.a.createElement("p",null,o.a.createElement(ne.a,{text:__("外部联系人请使用帐号密码登录"),onClickSwitch:f})))};at.defaultProps={switchPlatform:function(){}},at.propTypes={organization:i.a.object.isRequired,dispatch:i.a.func.isRequired,switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]).isRequired,onLogin:i.a.func};var it=Object(c.d)((function(e){return e}))(at);function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(e){var t=null,n=e.organization,a=window.appData.login,i=a.forceCorpLogin,c=a.customPassport,u=a.platform,l=window.appData.settings,s=void 0===l?{}:l,f=ct(Object(r.useState)(window.appData.login.oauthURL),2),d=f[0],p=f[1],y=s.is_via_custom_domain,v=function(){e.dispatch({type:"proxy.web/accounts.getOauthURL",payload:{data:{platform:u,organization_id:n.id}}}).then((function(e){p(e.oauthURL)}))},b=function(t){if("modal"===e.mode)return t.preventDefault(),void e.switchPlatform("normal");window.location.href="/login"};Object(r.useEffect)((function(){return d?function(){var n="zh-cn"===Object(ze.b)()?"zh_CN":"en";nt.a.toCanvas(document.getElementById("qr_login_container"),"".concat(d,"&lang=").concat(n));var r=!1;t=setInterval((function(){r||e.dispatch({type:"proxy.web/accounts.corpLoginCheck"}).then((function(n){if("success"===n.code)return clearInterval(t),void h.a.success(__("登录成功"),2,(function(){"modal"===e.mode&&e.onLogin?e.onLogin():Object(k.b)(n.goto)}));if(n.message){clearInterval(t);var o=document.getElementById("qr_login_container");return o.getContext("2d").clearRect(0,0,o.width,o.height),void m.a.error({centered:!0,title:__("登录失败"),content:n.message,okText:__("重新登录"),onOk:function(){if("modal"===e.mode)v();else if(window.appData.me.id||"app_login_fail"!==n.code||i)window.location.reload();else{var t=new URLSearchParams(window.location.search);t.append("force_password",!0),t.delete("force_corp_id"),t.delete("org"),window.location.href="/login?".concat(t.toString())}}})}r=!1})).catch((function(){r=!1}))}),y?2e3:1e3)}():v(),function(){clearInterval(t)}}),[d]);var g="local"===window.appData.env;return o.a.createElement("div",{className:"thirdpart-login corp-login"},o.a.createElement("canvas",{id:"qr_login_container",className:"thirdpart-login-qr"}),o.a.createElement("p",null,__("请使用钉钉扫描二维码登录")),g&&o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"/login/corp_user/dingtalk/mock?code=zhangsan&org=".concat(n.login)},__("模拟 张三 钉钉登录"))),o.a.createElement("li",null,o.a.createElement("a",{href:"/login/corp_user/dingtalk/mock?code=lisi&org=".concat(n.login)},__("模拟 李四 钉钉登录"))),o.a.createElement("li",null,o.a.createElement("a",{href:"/login/corp_user/dingtalk/mock?code=caicai&org=".concat(n.login)},__("模拟 Caicai 钉钉登录"))),o.a.createElement("li",null,o.a.createElement("a",{href:"/login/corp_user/dingtalk/mock?code=0571abc&org=".concat(n.login)},__("模拟 小明管理员 钉钉登录")))),o.a.createElement("p",null,o.a.createElement("br",null)),c&&o.a.createElement("a",{title:c.name,href:c.url},c.name),!!n.password_enable&&!window.appData.me.id&&!i&&o.a.createElement("p",null,o.a.createElement(ne.a,{text:__("使用帐号密码登录"),onClickSwitch:b})),!n.password_enable&&!window.appData.me.id&&o.a.createElement("p",null,o.a.createElement(ne.a,{text:__("外部联系人请使用帐号密码登录"),onClickSwitch:b})))};lt.defaultProps={switchPlatform:function(){}},lt.propTypes={organization:i.a.object,dispatch:i.a.func.isRequired,switchPlatform:i.a.func,mode:i.a.oneOf(["default","modal"]),onLogin:i.a.func};var st=Object(c.d)((function(e){return e}))(lt);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mt(e,t)}function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bt(e);if(t){var o=bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yt(this,n)}}function yt(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e){return bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bt(e)}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(i,e);var t,n,r,a=ht(i);function i(){var e;dt(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return gt(vt(e=a.call.apply(a,[this].concat(n))),"state",{time:15}),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;this.countTimer=setInterval((function(){var t=e.state.time;0===t?(clearInterval(e.countTimer),window.location.href="/login?platform=normal"):e.setState({time:t-1})}),1e3)}},{key:"componentWillUnmount",value:function(){this.countTimer&&(clearInterval(this.countTimer),this.countTimer=null)}},{key:"render",value:function(){return o.a.createElement("div",{className:"login-result"},o.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/PPLeHLWJNhAhDyNsMzyD.svg",alt:"无权登录"}),o.a.createElement("p",{className:"login-result-failed"},this.props.platform," 登录失败，",this.props.reason),o.a.createElement("p",{className:"login-result-countdown"},"反馈码：",window.appData.traceId),o.a.createElement("p",{className:"login-result-countdown"},this.state.time,"s 后自动跳转登录"))}}])&&pt(t.prototype,n),r&&pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component),wt=_t;function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xt=Object(u.a)({loader:function(){return n.e(25).then(n.bind(null,4052))},loading:l.a}),jt=function(e){var t=e.organization,n=e.reason,a=e.corpLanding,i=e.loginType,c=e.mode,u=Et(Object(r.useState)(e.platform),2),l=u[0],s=u[1];if(n)return o.a.createElement(wt,{reason:n});if(a)return o.a.createElement(xt,null);var f={switchPlatform:function(e){var t=window.appData.login.isWechatMobileApp&&"wechat"===e,n=window.appData.isDingTalkApp&&"dingtalk"===e;t||n?window.location.href="/login?platform=".concat(e):s(e)},mode:c,onLogin:e.onLogin};return"dingtalk"===l||"dingtalk_selfcorp"===l?t.id&&"corp"===i?o.a.createElement(st,f):o.a.createElement(Ue,f):"wechat"===l?o.a.createElement(et,f):"weixin"===l?o.a.createElement(it,f):o.a.createElement(Se,f)};jt.defaultProps={mode:"default"},jt.propTypes={organization:i.a.object,reason:i.a.string,corpLanding:i.a.bool,loginType:i.a.oneOf(["normal","corp"]),platform:i.a.oneOf(["dingtalk","wechat","weixin","teambition","dingtalk_selfcorp"]),mode:i.a.oneOf(["default","modal"]),onLogin:i.a.func};t.a=Object(c.d)((function(e){return e}))(jt)},function(e,t,n){"use strict";var r=n(0),o=n(692),a=n.n(o),i=n(88),c=n(620),u=n.n(c),l=n(213);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"dotId","dot"),f(this,"defaultOpacity","0.4"),f(this,"afterDraw",(function(e,n){t.drawDot(n),t.changeStyle(e,n)})),f(this,"setState",(function(e,n,r){t.changeColor(r),"selected"===e&&(t.toggleOpacity(r,n),t.animateDot(r.getContainer(),n)),"active"===e&&(t.toggleOpacity(r,n),t.animateDot(r.getContainer(),!1))})),f(this,"drawDot",(function(e){var n=e.get("children")[0].getPoint(0);return e.addShape("circle",{attrs:{x:n.x||0,y:n.y||0,r:1.5},name:"dot",id:t.dotId})})),f(this,"animateDot",(function(e,n){var r=e.findById(t.dotId);if(r){var o=e.get("children")[0];n?(r.show(),r.animate((function(e){var t=o.getPoint(e);return{x:t.x,y:t.y}}),{repeat:!0,duration:1e3})):(r.stopAnimate(),r.hide())}})),f(this,"toggleOpacity",(function(e,n){e.getKeyShape().attr("opacity",n?1:t.defaultOpacity)})),f(this,"changeColor",(function(e){var n=e.getContainer(),r=e.getSource(),o=e.getTarget(),a=l.b.default,i=l.b.default,c=n.findById(t.dotId);r.getStates().includes("selected")?(a=l.b.out,i=l.b.out_dot):o.getStates().includes("selected")?(a=l.b.in,i=l.b.in_dot):a=l.b.default,e.getKeyShape().attr("stroke",a),null==c||c.attr("fill",i)})),f(this,"changeStyle",(function(e,n){var r=e.sourceNode,o=e.targetNode,a=null==r?void 0:r.getModel(),i=null==o?void 0:o.getModel(),c=n.get("children")[0];c.attr("opacity",t.defaultOpacity),a&&i&&("yuque"===a.instance.app.name&&"yuque"===i.instance.app.name||c.attr("lineDash",[2,2]))}))}var t,n,r;return t=e,r=[{key:"register",value:function(){a.a.registerEdge(e.edgeName,new e,"quadratic"),a.a.registerEdge(e.loopName,new e,"loop")}}],(n=null)&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();f(d,"edgeName","dotEdge"),f(d,"loopName","loopEdge");function p(e,t,n){var r={id:"",nodes:[],edges:e.links.map((function(e){return function(e){var t=e.sourceId,n=e.targetId,r=e.id;return{source:t.toString(),target:n.toString(),type:t===n?d.loopName:d.edgeName,id:r.toString()}}(e)})),combos:[]};return e.instances.forEach((function(e){r.nodes.push(function(e,t,n){var r="";return r="yuque"===e.app.name?e.concept.name:e.app.name,{id:e.id.toString(),type:"hola-node",color:l.d[r.toLowerCase()]||l.d._default,size:2*l.f,img:l.e[r.toLowerCase()]||l.e.__default,instance:e,comboId:"yuque"!==e.app.name?e.app.name:void 0,x:t,y:n}}(e,t,n))})),r}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"holaGroup",void 0),h(this,"opacity",.8),h(this,"labelId","label"),h(this,"getText",(function(e){var t=[e.substring(0,11),e.substring(11,22),e.substring(22)],n=t[0],r=t[1];return t[2]?"".concat(n,"\n").concat(r.substring(0,10),"..."):r?"".concat(n,"\n").concat(r):n})),h(this,"draw",(function(e,n){var r=e.size,o=e.img,a=e.instance,i=r/2,c=n.addShape("image",{attrs:{x:-i,y:-i,width:2*i,height:2*i,img:o,opacity:t.opacity}});if(a.name)n.addShape("text",{id:t.labelId,attrs:{x:0,y:2*i,text:t.getText(a.name),fill:"#000",textAlign:"center",textBaseline:"middle",opacity:t.opacity}});return c})),h(this,"drawHola",(function(e,t){var n=l.g,r=t.addGroup(),o=l.c,a=r.addShape("circle",{zIndex:-3,attrs:{x:0,y:0,r:n,fill:o,opacity:.8},name:"back0-hola"}),i=r.addShape("circle",{zIndex:-3,attrs:{x:0,y:0,r:n,fill:o,opacity:.8},name:"back1-shape"}),c=r.addShape("circle",{zIndex:-2,attrs:{x:0,y:0,r:n,fill:o,opacity:.8},name:"back2-shape"}),u=r.addShape("circle",{zIndex:-1,attrs:{x:0,y:0,r:n,fill:o,opacity:.8},name:"back3-shape"});return r.sort(),r.toBack(),a.animate({r:n+10,opacity:0},{duration:1e3,easing:"easeCubic",delay:0,repeat:!1}),i.animate({r:n+10,opacity:.1},{duration:3e3,easing:"easeCubic",delay:0,repeat:!0}),c.animate({r:n+10,opacity:.1},{duration:3e3,easing:"easeCubic",delay:1e3,repeat:!0}),u.animate({r:n+10,opacity:.1},{duration:3e3,easing:"easeCubic",delay:2e3,repeat:!0}),r})),h(this,"setState",(function(e,n,r){r&&e&&("selected"===e&&(t.toggleConnected(r,n),t.toggleConnectedEdge(r,n),t.toggleNodeSize(r,n),t.toggleHola(r,n)),"active"===e&&t.handleOpacity(r,n))})),h(this,"toggleHola",(function(e,n){var r;n?t.holaGroup=t.drawHola(e.getShapeCfg(e.getModel()),e.getContainer()):(null===(r=t.holaGroup)||void 0===r||r.remove(),t.holaGroup=void 0)})),h(this,"toggleConnected",(function(e,n){t.handleOpacity(e,n),e.getNeighbors().forEach((function(e){t.handleOpacity(e,n)}))})),h(this,"handleOpacity",(function(e,n){var r=e.getContainer(),o=e.getKeyShape(),a=r.findById(t.labelId),i=n?1:1-t.opacity;Number.isNaN(i)||(o.attr("opacity",i),null==a||a.attr("opacity",n?1:1-t.opacity))})),h(this,"toggleConnectedEdge",(function(e,t){e.getEdges().forEach((function(e){e.setState("selected",t)}))}))}var t,n,r;return t=e,r=[{key:"register",value:function(){a.a.registerNode(e.nodeName,new e)}}],(n=[{key:"toggleNodeSize",value:function(e,t){var n=e.getContainer(),r=e.getKeyShape();r&&r.attr(t?{width:2*l.g,height:2*l.g,x:-l.g,y:-l.g}:{width:2*l.f,height:2*l.f,x:-l.f,y:-l.f});var o=n.findById(this.labelId);o&&o.attr(t?{y:2*l.g}:{y:2*l.f})}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){if(!e||!t)return e||t||[];var n,r={},o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}([].concat(v(e),v(t)));try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a&&("string"==typeof a.id||"number"==typeof a.id)){var i,c,u=null===(i=r[a.id])||void 0===i?void 0:i.x,l=null===(c=r[a.id])||void 0===c?void 0:c.y;r[a.id]=Object.assign(r[a.id]||{},a),"number"==typeof u&&"number"==typeof l&&(r[a.id].x=u,r[a.id].y=l)}}}catch(s){o.e(s)}finally{o.f()}return Object.values(r)}function w(e){e.findAllByState("node","selected").forEach((function(t){e.setItemState(t,"selected",!1)}))}function E(e,t){e.getNodes().forEach((function(n){e.setItemState(n,"active",t)}))}function O(e,t){e.getEdges().forEach((function(n){e.setItemState(n,"active",t)}))}function x(e){var t=e.findAllByState("node","selected")[0];if(t){var n=(e.getWidth()-l.a)/2,r=e.getHeight()/2,o=e.getPointByCanvas(n,r),a=o.x,i=o.y,c=t.getModel(),u=c.x,s=void 0===u?a:u,f=c.y,d=void 0===f?i:f;e.translate(a-s,i-d,!0,{duration:500})}}function j(e,t,n){var r;if(t){var o=p(t,null==n?void 0:n.getModel().x,null==n?void 0:n.getModel().y),a=e.get("data");null===(r=a.nodes)||void 0===r||r.forEach((function(t){var n=e.findById(t.id);n&&(t.x=n.getModel().x,t.y=n.getModel().y)}));var i=function(e,t){return e&&t?{id:e.id,nodes:_(e.nodes,t.nodes),edges:_(e.edges,t.edges),combos:_(e.combos,t.combos)}:e||t}(a,o);return i}}function k(e,t){w(t),O(t,!1),E(t,!1),t.setItemState(e,"selected",!0)}h(y,"nodeName","hola-node");var S="G6Canvas-module_Canvas_T6B47";y.register(),d.register();var C=a.a.Layout.gForce;t.a=Object(i.d)((function(e){return{skylink:e.skylink,dispatch:e.dispatch,doc:e.doc}}))((function(e){var t=e.skylink,n=e.dispatch,o=e.doc,i=t.currentInstance,c=t.graphData,s=r.useRef(null),f=r.useRef(),d=r.useRef({}),m=r.useRef({timer:null,nodeId:null});function h(){var e=s.current;return e?{width:e.clientWidth,height:e.clientHeight}:{width:0,height:0}}return r.useEffect((function(){!function(){var e=h(),t=e.width,r=e.height;if(!t||!r)return;f.current=new a.a.Graph({container:s.current,modes:{default:["drag-canvas","zoom-canvas",{type:"drag-node",onlyChangeComboSize:!0},{type:"drag-combo",onlyChangeComboSize:!0},{type:"tooltip",shouldBegin:function(e){var t,n,r=null===(t=e.item)||void 0===t||null===(n=t.getModel())||void 0===n?void 0:n.instance;return!!(r&&r.name.length&&r.name.length>22)},formatText:function(e){return e.instance&&e.instance.name?u()(e.instance.name):""}}]},layout:{type:"comboCombined",center:[(t-l.a)/2,r/2],preventOverlap:!0,preventNodeOverlap:!0,outerLayout:new C({preventOverlap:!0,preventNodeOverlap:!0,maxIteration:2e3,factor:2,linkDistance:function(e,t,n){var r,o,a=(((null===(r=t.size)||void 0===r?void 0:r[0])||30)+((null===(o=n.size)||void 0===o?void 0:o[0])||30))/2;return Math.min(1.5*a,700)}})},width:t,height:r,linkCenter:!0}),function(e){if(!e)return;e.once("afterlayout",(function(){x(e),e.set("animate",!0)})),e.on("afteranimate",(function(t){x(e)})),e.on("node:click",(function(t){if(t.item){var r=m.current;if(r.timer&&r.nodeId===t.item.getID())return clearTimeout(r.timer),m.current={timer:null,nodeId:null},function(e){if(e.item){var t,n=null===(t=e.item.getModel())||void 0===t?void 0:t.instance;if(null!=n&&n.url){window.open(n.url,"__blank");null}}}(t);r.timer&&clearTimeout(r.timer),m.current={timer:setTimeout((function(){m.current={timer:null,nodeId:null},function(e,t){if(e.item){var r;k(e.item,t),x(t),function(e){if(!e||!e.id)return;if(d.current[e.id])return n({type:"skylink/update",payload:{currentInstance:e}}),void n({type:"skylink/fetchRelation",payload:{data:{instance:e}}});n({type:"skylink/refreshAllFromInstance",payload:{data:{instance:e}}})}(null===(r=e.item.getModel())||void 0===r?void 0:r.instance)}}(t,e)}),300),nodeId:t.item.getID()}}})),e.on("canvas:click",(function(){w(e),O(e,!0),E(e,!0)}))}(f.current),f.current.data(function(e,t,n){var r,o=null==e?void 0:e.type;return"string"==typeof o&&(r={id:"$$fake",type:"hola-node",color:l.d[o.toLowerCase()]||l.d._default,size:2*l.f,img:l.e[null==o?void 0:o.toLowerCase()]||l.e.__default,instance:{name:(null==e?void 0:e.title)||""},x:t,y:n}),{id:"",nodes:r?[r]:[],edges:[],combos:[]}}(o,(t-l.a)/2,r/2)),f.current.render();var i=f.current.findById("$$fake");i&&f.current.setItemState(i,"selected",!0);"undefined"!=typeof window&&(window.onresize=function(){var e,t,n,r;f.current&&!f.current.get("destroyed")&&null!==(e=s.current)&&void 0!==e&&e.scrollWidth&&null!==(t=s.current)&&void 0!==t&&t.scrollHeight&&f.current.changeSize(null===(n=s.current)||void 0===n?void 0:n.scrollWidth,null===(r=s.current)||void 0===r?void 0:r.scrollHeight)})}()}),[]),r.useEffect((function(){c&&i&&function(e,t){var n=f.current;if(!n||!t||d.current[t.id])return;var r=n.findById(t.id.toString());r?function(e,t,n){var r=j(n,e,t);r&&(n.set("data",r),n.changeData(r),k(t,n))}(e,r,n):function(e,t,n){var r=h(),o=r.width,a=r.height,i=t.id.toString();e.instances.push(t);var c=p(e,(o-l.a)/2,a/2);n.data(c),n.render();var u=n.findById(i);u&&n.setItemState(u,"selected",!0)}(e,t,n);d.current[t.id]=t.id}(c,i)}),[i,c]),r.createElement(r.Fragment,null,r.createElement("div",{className:S,ref:s}))}))},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(10),c=n.n(i),u=n(181),l=n(257),s=n(95),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},d=function(e,t){var n=e.prefixCls,i=e.component,d=void 0===i?"article":i,p=e.className,m=e["aria-label"],h=e.setContentRef,y=e.children,v=f(e,["prefixCls","component","className","aria-label","setContentRef","children"]),b=t;return h&&(Object(s.a)(!1,"Typography","`setContentRef` is deprecated. Please use `ref` instead."),b=Object(u.a)(t,h)),a.createElement(l.a,null,(function(e){var t=e.getPrefixCls,i=e.direction,u=d,l=t("typography",n),s=c()(l,Object(o.a)({},"".concat(l,"-rtl"),"rtl"===i),p);return a.createElement(u,Object(r.default)({className:s,"aria-label":m,ref:b},v),y)}))},p=a.forwardRef(d);p.displayName="Typography";var m,h=p,y=n(41),v=n(126),b=n(40),g=n(57),_=n(58),w=n(66),E=n(72),O=n(197),x=n(179),j=n.n(x),k=n(1894),S=n(370),C=n(2228),N=n(296),P=n(82),T=n(158),A=n(1218),L=n(968),I=n(965),R=n(151),D=n(28),M=n(70),F=n(2229),B=n(1318),U=function(e){var t=e.prefixCls,n=e["aria-label"],r=e.className,i=e.style,u=e.direction,l=e.maxLength,s=e.autoSize,f=void 0===s||s,d=e.value,p=e.onSave,m=e.onCancel,h=e.onEnd,y=a.useRef(),v=a.useRef(!1),b=a.useRef(),g=a.useState(d),_=Object(D.a)(g,2),w=_[0],E=_[1];a.useEffect((function(){E(d)}),[d]),a.useEffect((function(){if(y.current&&y.current.resizableTextArea){var e=y.current.resizableTextArea.textArea;e.focus();var t=e.value.length;e.setSelectionRange(t,t)}}),[]);var O=function(){p(w.trim())},x=c()(t,"".concat(t,"-edit-content"),Object(o.a)({},"".concat(t,"-rtl"),"rtl"===u),r);return a.createElement("div",{className:x,style:i},a.createElement(B.a,{ref:y,maxLength:l,value:w,onChange:function(e){var t=e.target;E(t.value.replace(/[\n\r]/g,""))},onKeyDown:function(e){var t=e.keyCode;v.current||(b.current=t)},onKeyUp:function(e){var t=e.keyCode,n=e.ctrlKey,r=e.altKey,o=e.metaKey,a=e.shiftKey;b.current!==t||v.current||n||r||o||a||(t===M.a.ENTER?(O(),null==h||h()):t===M.a.ESC&&m())},onCompositionStart:function(){v.current=!0},onCompositionEnd:function(){v.current=!1},onBlur:function(){O()},"aria-label":n,autoSize:f}),a.createElement(F.a,{className:"".concat(t,"-edit-content-confirm")}))},z=n(39),G={padding:0,margin:0,display:"inline",lineHeight:"inherit"};function V(e){if(!e)return 0;var t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var Y=function(e,t,n,r,o){m||((m=document.createElement("div")).setAttribute("aria-hidden","true"),document.body.appendChild(m));var i,c=t.rows,u=t.suffix,l=void 0===u?"":u,s=window.getComputedStyle(e),f=(i=s,Array.prototype.slice.apply(i).map((function(e){return"".concat(e,": ").concat(i.getPropertyValue(e),";")})).join("")),d=V(s.lineHeight),p=Math.round(d*(c+1)+V(s.paddingTop)+V(s.paddingBottom));m.setAttribute("style",f),m.style.position="fixed",m.style.left="0",m.style.height="auto",m.style.minHeight="auto",m.style.maxHeight="auto",m.style.top="-999999px",m.style.zIndex="-1000",m.style.textOverflow="clip",m.style.whiteSpace="normal",m.style.webkitLineClamp="none";var h,y,v=(h=Object(O.a)(n),y=[],h.forEach((function(e){var t=y[y.length-1];"string"==typeof e&&"string"==typeof t?y[y.length-1]+=e:y.push(e)})),y);function b(){return m.offsetHeight<p}if(Object(z.render)(a.createElement("div",{style:G},a.createElement("span",{style:G},v,l),a.createElement("span",{style:G},r)),m),b())return Object(z.unmountComponentAtNode)(m),{content:n,text:m.innerHTML,ellipsis:!1};var g=Array.prototype.slice.apply(m.childNodes[0].childNodes[0].cloneNode(!0).childNodes).filter((function(e){return 8!==e.nodeType})),_=Array.prototype.slice.apply(m.childNodes[0].childNodes[1].cloneNode(!0).childNodes);Object(z.unmountComponentAtNode)(m);var w=[];m.innerHTML="";var E=document.createElement("span");m.appendChild(E);var x=document.createTextNode(o+l);function j(e){E.insertBefore(e,x)}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=Math.floor((n+r)/2),i=t.slice(0,a);if(e.textContent=i,n>=r-1)for(var c=r;c>=n;c-=1){var u=t.slice(0,c);if(e.textContent=u,b()||!u)return c===t.length?{finished:!1,reactNode:t}:{finished:!0,reactNode:u}}return b()?k(e,t,a,r,a):k(e,t,n,a,o)}function S(e,t){var n=e.nodeType;if(1===n)return j(e),b()?{finished:!1,reactNode:v[t]}:(E.removeChild(e),{finished:!0,reactNode:null});if(3===n){var r=e.textContent||"",o=document.createTextNode(r);return j(o),k(o,r)}return{finished:!1,reactNode:null}}return E.appendChild(x),_.forEach((function(e){m.appendChild(e)})),g.some((function(e,t){var n=S(e,t),r=n.finished,o=n.reactNode;return o&&w.push(o),r})),{content:w,text:m.innerHTML,ellipsis:!0}},q=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},H=Object(I.c)("webkitLineClamp"),W=Object(I.c)("textOverflow");var K=function(e){Object(w.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.apply(this,arguments)).contentRef=a.createRef(),e.state={edit:!1,copied:!1,ellipsisText:"",ellipsisContent:null,isEllipsis:!1,expanded:!1,clientRendered:!1},e.getPrefixCls=function(){var t=e.props.prefixCls;return(0,e.context.getPrefixCls)("typography",t)},e.onExpandClick=function(t){var n,r=e.getEllipsis().onExpand;e.setState({expanded:!0}),null===(n=r)||void 0===n||n(t)},e.onEditClick=function(t){t.preventDefault(),e.triggerEdit(!0)},e.onEditChange=function(t){var n=e.getEditable().onChange;null==n||n(t),e.triggerEdit(!1)},e.onEditCancel=function(){var t,n;null===(n=(t=e.getEditable()).onCancel)||void 0===n||n.call(t),e.triggerEdit(!1)},e.onCopyClick=function(t){t.preventDefault();var n=e.props,o=n.children,a=n.copyable,i=Object(r.default)({},"object"===Object(y.a)(a)?a:null);void 0===i.text&&(i.text=String(o)),j()(i.text||""),e.setState({copied:!0},(function(){i.onCopy&&i.onCopy(),e.copyId=window.setTimeout((function(){e.setState({copied:!1})}),3e3)}))},e.setEditRef=function(t){e.editIcon=t},e.triggerEdit=function(t){var n=e.getEditable().onStart;t&&n&&n(),e.setState({edit:t},(function(){!t&&e.editIcon&&e.editIcon.focus()}))},e.resizeOnNextFrame=function(){L.a.cancel(e.rafId),e.rafId=Object(L.a)((function(){e.syncEllipsis()}))},e}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.setState({clientRendered:!0}),this.resizeOnNextFrame()}},{key:"componentDidUpdate",value:function(e){var t=this.props.children,n=this.getEllipsis(),r=this.getEllipsis(e);t===e.children&&n.rows===r.rows||this.resizeOnNextFrame()}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.copyId),L.a.cancel(this.rafId)}},{key:"getEditable",value:function(e){var t=this.state.edit,n=(e||this.props).editable;return n?Object(r.default)({editing:t},"object"===Object(y.a)(n)?n:null):{editing:t}}},{key:"getEllipsis",value:function(e){var t=(e||this.props).ellipsis;return t?Object(r.default)({rows:1,expandable:!1},"object"===Object(y.a)(t)?t:null):{}}},{key:"canUseCSSEllipsis",value:function(){var e=this.state.clientRendered,t=this.props,n=t.editable,r=t.copyable,o=this.getEllipsis(),a=o.rows,i=o.expandable,c=o.suffix,u=o.onEllipsis,l=o.tooltip;return!c&&!l&&(!(n||r||i||!e||u)&&(1===a?W:H))}},{key:"syncEllipsis",value:function(){var e=this.state,t=e.ellipsisText,n=e.isEllipsis,r=e.expanded,o=this.getEllipsis(),a=o.rows,i=o.suffix,c=o.onEllipsis,u=this.props.children;if(a&&!(a<0)&&this.contentRef.current&&!r&&!this.canUseCSSEllipsis()){Object(s.a)(Object(O.a)(u).every((function(e){return"string"==typeof e})),"Typography","`ellipsis` should use string as children only.");var l=Y(this.contentRef.current,{rows:a,suffix:i},u,this.renderOperations(!0),"..."),f=l.content,d=l.text,p=l.ellipsis;t===d&&n===p||(this.setState({ellipsisText:d,ellipsisContent:f,isEllipsis:p}),n!==p&&c&&c(p))}}},{key:"renderExpand",value:function(e){var t,n=this.getEllipsis(),r=n.expandable,o=n.symbol,i=this.state,c=i.expanded,u=i.isEllipsis;return r&&(e||!c&&u)?(t=o||this.expandStr,a.createElement("a",{key:"expand",className:"".concat(this.getPrefixCls(),"-expand"),onClick:this.onExpandClick,"aria-label":this.expandStr},t)):null}},{key:"renderEdit",value:function(){var e=this.props.editable;if(e){var t=e.icon,n=e.tooltip,r=Object(O.a)(n)[0]||this.editStr,o="string"==typeof r?r:"";return a.createElement(R.a,{key:"edit",title:!1===n?"":r},a.createElement(A.a,{ref:this.setEditRef,className:"".concat(this.getPrefixCls(),"-edit"),onClick:this.onEditClick,"aria-label":o},t||a.createElement(k.a,{role:"button"})))}}},{key:"renderCopy",value:function(){var e=this.state.copied,t=this.props.copyable;if(t){var n=this.getPrefixCls(),r=t.tooltips,o=Object(O.a)(r);0===o.length&&(o=[this.copyStr,this.copiedStr]);var i=e?o[1]:o[0],u="string"==typeof i?i:"",l=Object(O.a)(t.icon);return a.createElement(R.a,{key:"copy",title:!1===r?"":i},a.createElement(A.a,{className:c()("".concat(n,"-copy"),e&&"".concat(n,"-copy-success")),onClick:this.onCopyClick,"aria-label":u},e?l[1]||a.createElement(S.a,null):l[0]||a.createElement(C.a,null)))}}},{key:"renderEditInput",value:function(){var e=this.props,t=e.children,n=e.className,r=e.style,o=this.context.direction,i=this.getEditable(),c=i.maxLength,u=i.autoSize,l=i.onEnd;return a.createElement(U,{value:"string"==typeof t?t:"",onSave:this.onEditChange,onCancel:this.onEditCancel,onEnd:l,prefixCls:this.getPrefixCls(),className:n,style:r,direction:o,maxLength:c,autoSize:u})}},{key:"renderOperations",value:function(e){return[this.renderExpand(e),this.renderEdit(),this.renderCopy()].filter((function(e){return e}))}},{key:"renderContent",value:function(){var e=this,t=this.state,n=t.ellipsisContent,i=t.isEllipsis,u=t.expanded,l=this.props,s=l.component,f=l.children,d=l.className,p=l.type,m=l.disabled,y=l.style,g=q(l,["component","children","className","type","disabled","style"]),_=this.context.direction,w=this.getEllipsis(),E=w.rows,O=w.suffix,x=w.tooltip,j=this.getPrefixCls(),k=Object(v.a)(g,["prefixCls","editable","copyable","ellipsis","mark","code","delete","underline","strong","keyboard"].concat(Object(b.a)(P.a))),S=this.canUseCSSEllipsis(),C=1===E&&S,A=E&&E>1&&S,L=f;if(E&&i&&!u&&!S){var I=g.title,D=I||"";I||"string"!=typeof f&&"number"!=typeof f||(D=String(f)),D=D.slice(String(n||"").length),L=a.createElement(a.Fragment,null,n,a.createElement("span",{title:D,"aria-hidden":"true"},"..."),O),x&&(L=a.createElement(R.a,{title:!0===x?f:x},a.createElement("span",null,L)))}else L=a.createElement(a.Fragment,null,f,O);return L=function(e,t){var n=e.mark,r=e.code,o=e.underline,i=e.delete,c=e.strong,u=e.keyboard,l=e.italic,s=t;function f(e,t){e&&(s=a.createElement(t,{},s))}return f(c,"strong"),f(o,"u"),f(i,"del"),f(r,"code"),f(n,"mark"),f(u,"kbd"),f(l,"i"),s}(this.props,L),a.createElement(T.a,{componentName:"Text"},(function(t){var n,i=t.edit,u=t.copy,l=t.copied,f=t.expand;return e.editStr=i,e.copyStr=u,e.copiedStr=l,e.expandStr=f,a.createElement(N.a,{onResize:e.resizeOnNextFrame,disabled:!E},a.createElement(h,Object(r.default)({className:c()((n={},Object(o.a)(n,"".concat(j,"-").concat(p),p),Object(o.a)(n,"".concat(j,"-disabled"),m),Object(o.a)(n,"".concat(j,"-ellipsis"),E),Object(o.a)(n,"".concat(j,"-single-line"),1===E),Object(o.a)(n,"".concat(j,"-ellipsis-single-line"),C),Object(o.a)(n,"".concat(j,"-ellipsis-multiple-line"),A),n),d),style:Object(r.default)(Object(r.default)({},y),{WebkitLineClamp:A?E:void 0}),component:s,ref:e.contentRef,direction:_},k),L,e.renderOperations()))}))}},{key:"render",value:function(){return this.getEditable().editing?this.renderEditInput():this.renderContent()}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.children,n=e.editable;return Object(s.a)(!n||"string"==typeof t,"Typography","When `editable` is enabled, the `children` should use string."),{}}}]),n}(a.Component);K.contextType=l.b,K.defaultProps={children:""};var $=K,Q=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},X=function(e){var t=e.ellipsis,n=Q(e,["ellipsis"]),o=a.useMemo((function(){return t&&"object"===Object(y.a)(t)?Object(v.a)(t,["expandable","rows"]):t}),[t]);return Object(s.a)("object"!==Object(y.a)(t)||!t||!("expandable"in t)&&!("rows"in t),"Typography.Text","`ellipsis` do not support `expandable` or `rows` props."),a.createElement($,Object(r.default)({},n,{ellipsis:o,component:"span"}))},J=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Z=function(e,t){var n=e.ellipsis,o=e.rel,i=J(e,["ellipsis","rel"]);Object(s.a)("object"!==Object(y.a)(n),"Typography.Link","`ellipsis` only supports boolean value.");var c=a.useRef(null);a.useImperativeHandle(t,(function(){var e;return null===(e=c.current)||void 0===e?void 0:e.contentRef.current}));var u=Object(r.default)(Object(r.default)({},i),{rel:void 0===o&&"_blank"===i.target?"noopener noreferrer":o});return delete u.navigate,a.createElement($,Object(r.default)({},u,{ref:c,ellipsis:!!n,component:"a"}))},ee=a.forwardRef(Z),te=n(303),ne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},re=Object(te.b)(1,2,3,4,5),oe=function(e){var t,n=e.level,o=void 0===n?1:n,i=ne(e,["level"]);return-1!==re.indexOf(o)?t="h".concat(o):(Object(s.a)(!1,"Typography.Title","Title only accept `1 | 2 | 3 | 4 | 5` as `level` value. And `5` need 4.6.0+ version."),t="h1"),a.createElement($,Object(r.default)({},i,{component:t}))},ae=function(e){return a.createElement($,Object(r.default)({},e,{component:"div"}))},ie=h;ie.Text=X,ie.Link=ee,ie.Title=oe,ie.Paragraph=ae;t.a=ie},function(e,t,n){"use strict";var r=n(0),o=(n(96),n(23)),a=(n(173),n(94)),i=n(88),c=n(32),u=n.n(c),l=n(116),s=n(213),f="index-module_Item_CHpa7",d="index-module_Logo_SDptT",p="index-module_BlankLogo_4IN+w",m="index-module_Name_RzOBK";function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){var t=e.instance,n=e.className,a=e.style,i=e.docTitle,c=e.docType,u=r.useCallback((function(){var e;if(!t){if(!c)return;return s.h[null==c?void 0:c.toLowerCase()]}return"string"==typeof(null===(e=t.app)||void 0===e?void 0:e.logo)?t.app.logo:t.app&&"yuque"===t.app.name&&t.concept&&"string"==typeof t.concept.name?s.h[t.concept.name.toLowerCase()]:void 0}),[t]),l=r.useCallback((function(){null!=t&&t.url&&window.open(t.url,"_blank")}),[t]);return r.createElement(o.a,{title:(t||{}).name||i||"",mouseEnterDelay:.5},r.createElement("div",{className:"".concat(f," ").concat(n||""),style:y({cursor:t?"pointer":"default"},a||{}),onClick:l},u()?r.createElement("img",{className:d,src:u(),alt:""}):r.createElement("div",{className:p}),r.createElement("div",{className:m},(t||{}).name||i||"")))},g="index-module_Card_1b5FW",_="index-module_InfoLine_-Lews",w="index-module_Label_stC1B",E="index-module_Value_aTSE7";function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=Object(i.d)((function(e){return{skylink:e.skylink,doc:e.doc}}))((function(e){var t=e.skylink,n=e.className,i=e.style,c=e.doc,s=O(r.useState(),2),f=s[0],d=s[1],p=t.currentInstance,m=t.instanceLoading;r.useEffect((function(){d(void 0),null!=p&&p.url?l.webProxy.knowledgeGraph.tryParseUrl({url:p.url}).then((function(e){if(!e)return d(null);d(e)})):c?l.webProxy.docs.docWithAuthorText({id:c.id}).then((function(e){if(!e)return d(null);d({updatedAt:e.updated_at,author:e.authorText})})):d(null)}),[p,c]);var h=r.useCallback((function(){return void 0===f?r.createElement(a.a,null):null!=f&&f.updatedAt?u()(f.updatedAt).format("MM-DD HH:mm"):"--"}),[f]),y=r.useCallback((function(){return void 0===f?r.createElement(a.a,null):null!=f&&f.author?r.createElement(o.a,{title:f.author,mouseEnterDelay:.5},f.author):"--"}),[f]);return m?r.createElement("div",{className:"".concat(g," ").concat(n||""),style:i},r.createElement(a.a,null)):r.createElement("div",{className:"".concat(g," ").concat(n||""),style:i},r.createElement(b,{instance:p,docTitle:null==c?void 0:c.title,docType:null==c?void 0:c.type}),r.createElement("div",{className:_},r.createElement("span",{className:w},__("作者：")),r.createElement("span",{className:E},y())),r.createElement("div",{className:_},r.createElement("span",{className:w},__("更新时间：")),r.createElement("span",{className:E},h())))})),k=(n(345),n(145)),S="index-module_RefersList_f6lxf",C="index-module_List_NRj62",N="index-module_EmptyList_IkxWI",P="index-module_Empty_id8dx",T="index-module_ListItem_mGhEd";function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=Object(i.d)((function(e){return{dispatch:e.dispatch,skylink:e.skylink}}),null,null,{forwardRef:!0})((function(e){var t=e.skylink,n=e.className,o=e.style,i=t.referred,c=t.refers,u=t.listLoading,l=A(r.useState(),2),s=l[0],f=l[1];r.useEffect((function(){i.length||!i.length&&!c.length?f("1"):c.length&&f("2")}),[i,c]);var d=r.useCallback((function(e,t){return r.createElement("div",{className:"".concat(C," ").concat(e.length?"":N),"data-testid":"skylink-list-".concat(t)},r.createElement(a.a,{spinning:u},null==e?void 0:e.map((function(e,t){return r.createElement(b,{instance:e,key:"".concat(e.name,"-").concat(t),className:T})})),!e.length&&!u&&r.createElement("div",{className:P},r.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*wPMVTriBo40AAAAAAAAAAAAAARQnAQ",alt:""}),"1"===s?r.createElement("div",null,__("本文档暂未被其他文档引用")):r.createElement("div",null,__("本文档暂未引用其他内容")))))}),[u,s]);return r.createElement("div",{className:"".concat(S," ").concat(n||""),style:o},r.createElement(k.a,{onChange:function(e){f(e)},activeKey:s},r.createElement(k.a.TabPane,{tab:r.createElement(r.Fragment,null,r.createElement("span",null,__("被引用"),"(",i.length||0,")")),key:"1"},d(i,"1")),r.createElement(k.a.TabPane,{tab:r.createElement(r.Fragment,null,r.createElement("span",null,__("引用了"),"(",c.length||0,")")),key:"2"},d(c,"2"))))})),R="index-module_ListCard_zCYLJ",D="index-module_InstanceCard_gxJJz",M="index-module_RefersList_1DlJQ";t.a=function(e){return r.createElement("div",{className:"".concat(R," ").concat(e.className||""),style:e.style},r.createElement(j,{className:D}),r.createElement(I,{className:M}))}},function(e,t,n){"use strict";n(96);var r=n(23),o=(n(173),n(94)),a=(n(50),n(19)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(198),f=n.n(s),d=n(208),p=n(554),m=n(287),h=n(109),y=n(38),v=(n(79),n(44)),b=(n(75),n(26)),g=(n(60),n(24)),_=(n(209),n(61)),w=n(88),E=n(724),O="DocSummaryInfo-module_modal_WEf3n",x="DocSummaryInfo-module_btnSubmit_-ZmDs";function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=_.a.create,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(i,e);var t,n,r,o=C(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),A(P(t=o.call(this,e)),"updateDocInfo",(function(){var e=t.props,n=e.doc;return(0,e.dispatch)({type:"proxy.web/docs.updateMeta",payload:{data:{id:n.id,custom_cover:t.state.cover,custom_description:t.state.description},reducer:"doc/update"}})})),A(P(t),"onSubmit",(function(e){e.preventDefault(),t.coverUploader&&(t.setState({submitting:!0}),t.coverUploader.current.onSubmit().then((function(e){t.setState({cover:e||""},(function(){t.updateDocInfo().then((function(){t.setState({submitting:!1}),t.props.onOk()}))}))})).catch((function(e){g.a.error(e.message),t.setState({submitting:!1})})))})),A(P(t),"handleChangeSummary",(function(e){t.setState({description:e.target.value})})),t.state={submitting:!1,error:"",cover:e.doc.cover||"",description:e.doc.custom_description||""},t.coverUploader=c.a.createRef(),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;"function"==typeof this.props.getSummary&&this.props.getSummary((function(t){var n=t.summary,r=t.cover;e.props.doc.custom_description||e.setState({description:n}),e.props.doc.cover||e.setState({cover:r})}))}},{key:"componentWillUnmount",value:function(){this.coverUploader=null}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.children,r=e.doc;return c.a.createElement(v.a,{className:O,visible:t,title:__("发布"),footer:null,onCancel:this.props.onCancel,maskClosable:!1,width:608},c.a.createElement(_.a,null,this.state.error&&c.a.createElement("div",{className:"has-error"},c.a.createElement("p",{className:"ant-legacy-form-explain"},__("出错了"))),c.a.createElement(_.a.Item,{label:__("封面"),colon:!1},c.a.createElement(E.a,{attachable_type:"Doc",attachable_id:r.id,cover:this.state.cover,ref:this.coverUploader})),c.a.createElement(_.a.Item,{colon:!1,label:c.a.createElement("span",null,__("摘要"),c.a.createElement("span",{className:"tip"},__("（150字内）")))},c.a.createElement(b.a.TextArea,{autoSize:{minRows:3},maxLength:"150",value:this.state.description,onChange:this.handleChangeSummary})),c.a.createElement(_.a.Item,null,c.a.createElement(a.a,{type:"primary",className:x,disabled:this.state.submitting,onClick:this.onSubmit},__("发布")),n)))}}])&&k(t.prototype,n),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(i.PureComponent);I.propTypes={visible:l.a.bool.isRequired,doc:l.a.object.isRequired,getSummary:l.a.func.isRequired,onCancel:l.a.func.isRequired,onOk:l.a.func.isRequired,dispatch:l.a.func.isRequired,children:l.a.node};var R=Object(w.d)((function(e){return e}))(L()(I));function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function M(){M=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==D(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function F(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){F(a,r,o,i,c,"next",e)}function c(e){F(a,r,o,i,c,"throw",e)}i(void 0)}))}}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var o=H(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=p.e.publish.key.join(),$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(l,e);var t,n,i,u=V(l);function l(){var e;U(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return W(q(e=u.call.apply(u,[this].concat(n))),"state",{modalVisible:!1}),W(q(e),"bindHotkeys",(function(){f()(K,e.readyToPublish)})),W(q(e),"readyToPublish",B(M().mark((function t(){var n,r,o,a;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.doc,o=n.book,a=n.onsubmit,!o||!o.enable_auto_publish){t.next=4;break}return a(),t.abrupt("return");case 4:if(!r.published_at){t.next=7;break}return e.onPublish(),t.abrupt("return");case 7:if(!window.appData.isDocCollaborator){t.next=10;break}return e.onPublish(),t.abrupt("return");case 10:if(!e.shouldInitDocInfo()){t.next=13;break}return e.setState({modalVisible:!0}),t.abrupt("return");case 13:e.onPublish();case 14:case"end":return t.stop()}}),t)})))),W(q(e),"onPublish",(function(t){e.props.onsubmit()})),W(q(e),"onCancelModal",(function(){e.setState({modalVisible:!1})})),W(q(e),"getVisibilityTip",(function(){var t=e.props,n=t.group,r=t.book,o=t.doc,a=__("公开知识库发布后，所有人可见；私密知识库发布后，团队成员及协作者可见。"),i=m.a.getTypeText(o.type),c=o.published_at?__("更新#action_tip"):__("发布#action_tip");return"User"===n.type?0===o.public?a=__("该{type}是私密状态，{action}后仅自己、协作者可见。",{type:i,action:c}):1===r.public?a=__("该{type}属于公开知识库，{action}后所有人可见。",{type:i,action:c}):0===r.public&&(a=__("该{type}属于私密知识库，{action}后仅自己、协作者可见。",{type:i,action:c})):0===o.public?a=__("该{type}是私密状态，{action}后仅团队成员、协作者可见。",{type:i,action:c}):1===r.public?a=__("该{type}属于公开知识库，{action}后所有人可见。",{type:i,action:c}):0===r.public&&(a=__("该{type}属于私密知识库，{action}后团队成员及协作者可见。",{type:i,action:c})),a})),W(q(e),"shouldInitDocInfo",(function(){var t=e.props,n=t.book,r=t.doc;return!(!n||"Column"!==n.layout||"Doc"!==r.type||r.published_at)})),W(q(e),"renderPublishButton",(function(){var t=e.props,n=t.loading,r=t.publishing,o=t.disabled;return c.a.createElement(a.a,{"data-testid":"doc-publish-button",id:"lake-doc-publish-button",type:"primary",onClick:e.readyToPublish,onTouchEnd:e.readyToPublish,disabled:n||r||o},r&&c.a.createElement("span",{className:"larkicon"},c.a.createElement(d.a,null)),c.a.createElement("span",{className:"text"},e.getActionText()))})),W(q(e),"renderAutoPublishButton",(function(){var t=e.props,n=t.loading,i=t.publishing,u=t.disabled,l=t.saving,s=l?__("正在更新中"):__("已开启自动发布，内容将自动更新至阅读页面，亦可手动点击更新"),f=c.a.createElement(y.b,{className:"publish-loading-icon",name:"publish-loading-icon",width:16,height:16});return c.a.createElement(r.a,{title:s,placement:"bottom",arrowPointAtCenter:!0,overlayStyle:l?void 0:{width:148}},c.a.createElement(a.a,{"data-testid":"doc-exit-edit-button",id:"lake-doc-publish-button",onClick:e.readyToPublish,onTouchEnd:e.readyToPublish,disabled:n||i||u},l||i?c.a.createElement(o.a,{indicator:f}):c.a.createElement("span",{className:"text"},__("更新"))))})),e}return t=l,(n=[{key:"componentDidMount",value:function(){this.bindHotkeys()}},{key:"componentDidUpdate",value:function(e){this.props.errorStatus&&this.props.errorStatus!==e.errorStatus&&this.onCancelModal()}},{key:"componentWillUnmount",value:function(){f.a.unbind(K)}},{key:"getTipTitle",value:function(){var e=this.props.doc,t="";return t="Sheet"===e.type?e.published_at?__("更新这个表格"):__("发布这个表格"):e.published_at?__("更新这篇文档"):__("发布这篇文档"),"".concat(t," (").concat(p.e.publish.title,")")}},{key:"getActionText",value:function(){return this.props.doc.published_at?__("更新"):__("发布")}},{key:"render",value:function(){return this.props.book&&this.props.book.enable_auto_publish?this.renderAutoPublishButton():this.shouldInitDocInfo()?c.a.createElement("span",null,this.renderPublishButton(),this.state.modalVisible&&c.a.createElement(R,{"data-testid":"doc-summary-info",visible:this.state.modalVisible,onCancel:this.onCancelModal,onOk:this.onPublish,getSummary:this.props.getSummary})):this.renderPublishButton()}}])&&z(t.prototype,n),i&&z(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.PureComponent);$.propTypes={group:l.a.object.isRequired,book:l.a.object.isRequired,me:l.a.object.isRequired,doc:l.a.object.isRequired,loading:l.a.bool.isRequired,disabled:l.a.bool,publishing:l.a.bool.isRequired,saving:l.a.bool,onsubmit:l.a.func.isRequired,getSummary:l.a.func};t.a=Object(h.b)($)},function(e,t,n){"use strict";n(75);var r=n(26),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(516),l=n(555),s=n.n(l),f=n(10),d=n.n(f),p=n(1311),m=n(1312),h=n(42),y=n.n(h),v=n(34),b=n(113),g="SearchDepartmentSelectList-module_container_gUHoK",_="SearchDepartmentSelectList-module_treeClassName_HrS1o",w="SearchDepartmentSelectList-module_emptyContainer_XKZvf",E="SearchDepartmentSelectList-module_emptyTipImg_wSzci";function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function x(){x=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==O(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function j(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){j(a,r,o,i,c,"next",e)}function c(e){j(a,r,o,i,c,"throw",e)}i(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.dept_full_path;if(o&&o.length){var a=o.map((function(e){return e.name})).join("/");r.title=a}else r.title=r.name;r.value=r.id,r.key="".concat(r.id)}}catch(i){n.e(i)}finally{n.f()}return e}function T(e){var t=e.query,n=e.onSelect,r=e.selectedDeps,i=S(Object(o.useState)([]),2),c=i[0],u=i[1],l=b.a.isYuqueAddressBook();function s(){return(s=k(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.departments.search({q:t});case 2:n=e.sent,u(P(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=Object(o.useCallback)(y()((function(e){return s.apply(this,arguments)}),200),[]);return Object(o.useEffect)((function(){return t&&f(t),function(){return f.cancel()}}),[t]),a.a.createElement("div",{className:g,"data-testid":"search-department-select"},c.length?a.a.createElement(p.a,{multiple:!0,departments:c,onSelect:n,selectedDeps:r,treeClassName:_,loading:!1,editable:l}):a.a.createElement("div",{className:w},a.a.createElement("img",{"data-testid":"search-department-select-empty",className:E,src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*ZZJkQ49zgGIAAAAAAAAAAAAAARQnAQ",alt:""})))}T.defaultProps={onSelect:function(){}},T.propTypes={query:c.a.string,onSelect:c.a.func};var A=T,L="DepartmentListSelector-module_container_6TSrB",I="DepartmentListSelector-module_search_F4IY1",R="DepartmentListSelector-module_treeClassName_r9Q+S";function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function M(){M=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==D(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function F(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){F(a,r,o,i,c,"next",e)}function c(e){F(a,r,o,i,c,"throw",e)}i(void 0)}))}}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e){var t=e.onSelect,n=e.defaultSelected,i=e.containerClassName,c=e.treeClassName,l=e.disabledKeys,f=e.depth,h=e.disableLoading,y=e.disableRoot,v=e.disableSelectAll,b=e.editable,g=Object(m.a)({exceptIds:[],disabledIds:l,depth:f,disableRoot:y}),_=g.departments,w=g.getDepartments,E=g.firstLoading,O=U(Object(o.useState)(n||[]),2),x=O[0],j=O[1],k=U(Object(o.useState)(!1),2),S=k[0],C=k[1],N=U(Object(o.useState)(""),2),P=N[0],T=N[1],D=U(Object(o.useState)(!0),2),F=D[0],z=D[1];function G(e){j(e),t(e)}function V(){return(V=B(M().mark((function e(t){var n;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,T(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.useEffect)((function(){j([]),t([])}),[S]),Object(o.useEffect)((function(){n&&n.length&&F&&(j(s()(x.concat(n))),z(!1))}),[n,F]),Object(o.useEffect)((function(){C(!!P.length)}),[P]),a.a.createElement("div",{className:d()(L,i),"data-testid":"department-list-selector"},a.a.createElement(r.a,{className:I,placeholder:__("搜索部门名"),onChange:function(e){return V.apply(this,arguments)},allowClear:!0,prefix:a.a.createElement(u.a,null),"data-testid":"department-list-selector-search"}),S?a.a.createElement(A,{onSelect:G,selectedDeps:x,query:P}):a.a.createElement(p.a,{multiple:!0,departments:_,loadData:w,onSelect:G,selectedDeps:x,treeClassName:d()(R,c),loading:!h&&E,disableSelectAll:v,disableRoot:y,editable:b}))}G.defaultProps={onSelect:function(){},disableLoading:!1,editable:!0,disableRoot:!1,disableSelectAll:!1},G.propTypes={onSelect:c.a.func,defaultSelected:c.a.arrayOf(c.a.oneOfType([c.a.number,c.a.string])),containerClassName:c.a.string,treeClassName:c.a.string,disabledKeys:c.a.arrayOf(c.a.oneOfType([c.a.number,c.a.string])),depth:c.a.number,disableLoading:c.a.bool,editable:c.a.bool,disableRoot:c.a.bool,disableSelectAll:c.a.bool};t.a=G},function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));n(922);var r=n(427),o=n(0),a=n.n(o),i=n(39),c=n.n(i),u=n(10),l=n.n(u),s=n(2),f=n.n(s),d=n(2024),p=n(210),m=n(2484),h=n(34);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(){v=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(k([])));b&&b!==t&&n.call(b,o)&&(m=b);var g=p.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==y(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function b(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,c,"next",e)}function c(e){b(a,r,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e.enableAutoSave,n=void 0!==t&&t,r=e.note,a=e.onRemoveNote,i=_(Object(o.useState)(null),2),c=i[0],u=i[1],l=_(Object(o.useState)(!1),2),s=l[0],f=l[1],d=_(Object(o.useState)(!1),2),p=d[0],m=d[1],y=_(Object(o.useState)(!1),2),b=y[0],w=y[1],E=_(Object(o.useState)(!0),2),O=E[0],x=E[1],j=Object(o.useRef)(),k=function(){var e=g(v().mark((function e(){var t,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,null===(t=j.current)||void 0===t?void 0:t.autosave();case 3:e.next=8;break;case 5:if(!s&&!p){e.next=8;break}return e.next=8,null===(r=j.current)||void 0===r?void 0:r.publish();case 8:x(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=g(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.webapp.bootstrap();case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=document.getElementById("add-note-btn");O?(S(),setTimeout((function(){e&&(e.style.visibility="hidden")}),100)):setTimeout((function(){e&&(e.style.visibility="visible")}),300)}),[O]),Object(o.useEffect)((function(){var e,t,n=function(e){e.preventDefault(),k()};O&&(null===(e=window.AlipayJSBridge)||void 0===e||e.call("setGestureBack",{val:!1}),document.addEventListener("back",n,!1),null===(t=window.yqWebApp)||void 0===t||t.preventEditorPageScroll(!0),document.body.style="touch-action: none; position: fixed; width: 100%");return function(){var e,t;document.removeEventListener("back",n),null===(e=window.AlipayJSBridge)||void 0===e||e.call("setGestureBack",{val:!0}),null===(t=window.yqWebApp)||void 0===t||t.preventEditorPageScroll(!1),document.body.style=""}}),[O]),Object(o.useEffect)((function(){var e,t=function(){w(window.visualViewport.height<window.screen.height)};return null===(e=window.visualViewport)||void 0===e||e.addEventListener("resize",t,!1),function(){var e;null===(e=window.visualViewport)||void 0===e||e.removeEventListener("resize",t,!1)}}),[O]),{state:{globalData:c,note:r,visible:O,editorRef:j,canUndo:s,canRedo:p,isActive:b},setVisible:x,onUndo:function(){var e;s&&(null===(e=j.current)||void 0===e||e.undo())},onRedo:function(){var e;p&&(null===(e=j.current)||void 0===e||e.redo())},onRemoveNote:a,onAfterEditorActive:function(){},onAfterPublishSuccess:function(t){var n=t.note;x(!1),null==e||e.onPublishSuccess(n)},onChangeEditorState:function(){var e,t;f(null===(e=j.current)||void 0===e?void 0:e.getCanUndo()),m(null===(t=j.current)||void 0===t?void 0:t.getCanRedo())},onCloseEditor:k}},O=n(1353),x="index-module_editorModal_7L5au",j="index-module_isAndroid_o1AN8",k="index-module_editorMask_5s1ca",S="index-module_editorWrapper_T5aPc",C="index-module_isActive_uGyeO",N="index-module_isHidden_7EmFL",P="index-module_editorHeader_NJsJ8",T="index-module_closeIcon_XI-gj",A="index-module_rightIcons_e2JWS",L="index-module_moreIcons_A4zqV",I="index-module_iconDisabled_IucDV",R="index-module_editorCon_DGe4i",D="index-module_editorPointPlaceholder_gbXCB";function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){var t,n,o,i,c=E(e),u=c.state,s=u.note,f=u.globalData,h=u.visible,y=u.editorRef,v=u.canUndo,b=u.canRedo,g=u.isActive,_=c.setVisible,w=c.onRemoveNote,M=c.onAfterEditorActive,z=c.onAfterPublishSuccess,G=c.onChangeEditorState,V=c.onCloseEditor,Y=c.onUndo,q=c.onRedo;if(!s.id||!f)return null;var H={state:{note:s,isMobile:!0},mode:"single",me:f.me,isAlipayWebApp:!0,onChangeNote:function(){},onChangeNoteState:function(){},onAfterEditorActive:M,onAfterPublishSuccess:z,onChangeEditorState:G,disableAutoFocus:!!e.disableAutoFocus},W=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:D}),a.a.createElement("div",{className:P},a.a.createElement("div",{className:T,onClick:V},a.a.createElement(p.IconIconDeleteMini,{width:20,height:20,color:"#BEC0BF"})),a.a.createElement("div",{className:A},a.a.createElement("span",{className:l()(U({},I,!v)),onClick:function(){Y()}},a.a.createElement(p.IconIconCancelMini,{width:20,height:20})),a.a.createElement("span",{className:l()(U({},I,!b)),onClick:function(){q()}},a.a.createElement(p.IconIconRecoverMini,{width:20,height:20})),a.a.createElement("span",{className:l()(L,U({},I,!w)),onClick:function(){var e,t;if(w){var n=0;null!=y&&null!==(e=y.current)&&void 0!==e&&e.isFocus()&&null!==(t=window.yqWebApp)&&void 0!==t&&t.isAndroid&&(n=500),Object(O.a)({note:s,disableArchive:!0,onRemoveNote:function(){w.apply(void 0,arguments),_(!1)},delay:n,zIndex:9999})}}},a.a.createElement(p.IconIconMorenavMini,{width:20,height:20})))),a.a.createElement("div",{className:R},a.a.createElement(m.a,B({},H,{ref:y}))))},K=window.yqWebApp?null===(t=window.yqWebApp)||void 0===t?void 0:t.getSafeAreaTop():35;return null!==(n=window.yqWebApp)&&void 0!==n&&n.isAndroid&&(K=window.yqWebApp?90:35),null!==(o=window.yqWebApp)&&void 0!==o&&o.isAndroid?h?a.a.createElement("div",{className:l()(x,j)},a.a.createElement("div",{className:k,onClick:V}),a.a.createElement(d.Spring,{from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"},after:{transform:""},config:{duration:300}},(function(e){return a.a.createElement("div",{className:l()(S,U({},C,g)),style:F(F({},e),{},{top:"".concat(K,"px")})},W())}))):null:a.a.createElement(r.a,{popup:!0,visible:h,onClose:V,animationType:"slide-up",maskClosable:!0,wrapClassName:x},a.a.createElement("div",{className:l()(S,(i={},U(i,C,g),U(i,N,!h),i)),style:{top:"".concat(K,"px")}},W()))};z.propTypes={disableAutoFocus:f.a.bool,enableAutoSave:f.a.bool,note:f.a.object,onRemoveNote:f.a.func,onPublishSuccess:f.a.func};function G(e){var t=c.a.createPortal(a.a.createElement(z,e),document.getElementById("ReactApp"));c.a.render(t,document.createDocumentFragment())}},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(60),n(24)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(34),s=n(349),f=n(1454),d="index-module_count_pDHQn";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(){m=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function h(){}var y={};c(y,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(y=b);var g=h.prototype=f.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=h,c(g,"constructor",h),c(h,"constructor",d),d.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function h(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=y(Object(a.useState)(!1),2),n=t[0],c=t[1],u=y(Object(a.useState)(!1),2),p=u[0],v=u[1],b=e.me,g=e.user,_=e.onStatusChange,w=e.isPrimary,E=e.size,O=e.showCount,x=g.meta&&g.meta.is_followed,j=y(Object(a.useState)(null==g?void 0:g.followers_count),1)[0],k=function(){var e,t=(e=m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,l.a.actions.findOne({target_type:"User",target_id:t,action_type:"follow"},{ignoreGlobalMessage:!0});case 3:return n=e.sent,v(!1),e.abrupt("return",Boolean(n.actioned));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,c,"next",e)}function c(e){h(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(Object(a.useEffect)((function(){void 0===e.isFollowing?k(g.id).then(c):c(e.isFollowing)}),[e.isFollowing,g.id]),b.id===g.id)return null;var S=__("关注");return n&&(S=x?__("互相关注"):__("已关注")),i.a.createElement(r.a,{className:"btn-follow",type:!n&&w?"primary":"",disabled:p,onClick:function(){var e=n?"destroy":"create";v(!0),Object(s.a)("c62147",{action:e}),l.a.actions[e]({target_type:"User",target_id:g.id,action_type:"follow"}).then((function(){v(!1),o.a.success(n?__("已取消关注"):__("关注成功")),c(!n),_&&_(g.id,!n)})).catch((function(e){v(!1)}))},size:window.h5||"small"===E?"small":"default",style:e.style},i.a.createElement("span",null,S),O&&j>0&&i.a.createElement("span",{className:d},f.a.number(j)))};b.defaultProps={me:window.appData.me,showCount:!1},b.propTypes={me:u.a.object,size:u.a.string,user:u.a.object,onStatusChange:u.a.func,isFollowing:u.a.bool,showCount:u.a.bool};t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),o=n(38),a="index-module_Legend_nk3uX",i="index-module_Item_KsKXt";function c(e){var t=e.className,n=e.style;return r.createElement("div",{className:"".concat(a," ").concat(t||""),style:n},r.createElement("div",{className:i},r.createElement(o.b,{name:"DoubleClick",width:14,height:14,style:{marginRight:"8px"}}),__("双击打开")),r.createElement("a",{onClick:function(){var e=window.appData.isYuque?"https://www.yuque.com/yuque/gpvawt/gh3mdb":"https://yuque.antfin.com/lark/astquw/za8r7c";window.open(e)},target:"_blank"},r.createElement("div",{className:i},r.createElement(o.b,{name:"question",width:14,height:14,style:{marginRight:"8px"}}),__("帮助文档"))))}},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(360),n(239)),a=(n(75),n(26)),i=(n(60),n(24)),c=(n(218),n(51)),u=n(0),l=n.n(u),s=n(2),f=n.n(s),d=n(34),p="index-module_tip_O6oGD",m="index-module_itemTail_wv236";function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function v(){v=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(k([])));b&&b!==t&&n.call(b,o)&&(m=b);var g=p.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x={labelCol:{span:5},wrapperCol:{span:15}},j=function(e){var t=e.visible,n=e.onClose,u=window.appData.organization,s=E(c.a.useForm(),1)[0],f=function(){var e,t=(e=v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.validateFields();case 3:return t=e.sent,e.next=6,d.a.organizations.contact(g({id:u&&u.id},t));case 6:i.a.success(__("需求已成功提交")),n(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return l.a.createElement(r.a,{key:t,visible:t,title:__("需求提交"),okText:__("提交"),cancelText:__("取消"),onCancel:n,onOk:f},l.a.createElement(c.a,y({},x,{form:s}),l.a.createElement(c.a.Item,{name:"company",label:__("公司名称"),rules:[{required:!0,message:__("请输入公司名称")}],placeholder:__("如：阿里巴巴")},l.a.createElement(a.a,null)),l.a.createElement("div",{style:{position:"relative"}},l.a.createElement(c.a.Item,{name:"member_size",label:__("人数规模"),rules:[{required:!0,message:__("请输入人数规模")}],placeholder:__("填写数值")},l.a.createElement(o.a,{min:1})),l.a.createElement("div",{className:m},__("人"))),l.a.createElement(c.a.Item,{name:"contactor",label:__("联系人"),rules:[{required:!0,message:__("请输入联系人姓名")}],placeholder:__("请输入联系人姓名")},l.a.createElement(a.a,null)),l.a.createElement(c.a.Item,{name:"phone",label:__("联系电话"),rules:[{required:!0,message:__("请输入联系电话")}]},l.a.createElement(a.a,null)),l.a.createElement(c.a.Item,{name:"email",label:__("联系邮箱")},l.a.createElement(a.a,null)),l.a.createElement(c.a.Item,{name:"industry",label:__("行业类型")},l.a.createElement(a.a,null))),l.a.createElement("div",{className:p},__("其他疑问或咨询请直接联系 support@yuque.com")))};j.propTypes={visible:f.a.bool,onClose:f.a.func};t.a=j},function(e,t,n){"use strict";n(96);var r=n(23),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(10),l=n.n(u),s=n(131),f=n(38),d="badgeIcon-module_container_xawzG",p="badgeIcon-module_icon_qa6QH",m=function(e){var t=e.isYuque,n=e.organization,o=e.user,i=e.className;return t&&!o.isPaid||n?null:a.a.createElement("div",{className:l()(d,i),"data-testid":"badge-lite"},a.a.createElement(r.a,{title:__("语雀会员")},a.a.createElement("a",{className:p,href:t?s.LINKS.EXTERNAL_MEMBER_INTRO_LINK:s.LINKS.INTERNAL_MEMBER_INTRO_LINK,target:"_blank"},!window.h5&&a.a.createElement(f.b,{name:"avatarvip",width:32,height:32}))))};m.defaultProps={isYuque:window.appData.isYuque,organization:window.appData.organization},m.propTypes={isYuque:c.a.bool,organization:c.a.object,user:c.a.object.isRequired,className:c.a.string};t.a=m},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n(50);var r=n(19),o=n(0),a=n.n(o),i=n(2),c=n.n(i);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,n,o,i=d(c);function c(e,t){var n,r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),n=i.call(this,e,t),r=m(n),a=function(){n.props.onSendClick&&n.props.onSendClick((function(){n.doCounting()})),n.setState({hasSend:!0})},(o="onSendClick")in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n.state={counting:!!e.counting,countingTime:60,hasSend:!1},n}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.counting&&this.doCounting()}},{key:"componentWillUnmount",value:function(){this.countTimer&&(window.clearInterval(this.countTimer),this.countTimer=null)}},{key:"reset",value:function(){var e=this;this.setState({counting:!1,countingTime:60},(function(){clearInterval(e.countTimer)}))}},{key:"doCounting",value:function(){var e=this;this.setState({countingTime:60,counting:!0},(function(){e.countTimer=setInterval((function(){var t=e.state.countingTime;1===t?e.reset():e.setState({countingTime:t-1})}),1e3)}))}},{key:"renderSendCodeTxt",value:function(){return this.state.counting?a.a.createElement("span",{className:"code-count-text"},__("重新获取({time})",{time:this.state.countingTime})):this.state.hasSend?__("重新获取"):this.props.sendText}},{key:"render",value:function(){var e=this.props.buttonProps;return a.a.createElement("span",{className:"countdown-btn","data-aspm-click":"d006"},a.a.createElement(r.a,l({onClick:this.onSendClick,className:"code-send-button",disabled:this.state.counting},e),a.a.createElement("span",{className:"code-send-text"},this.renderSendCodeTxt())))}}])&&s(t.prototype,n),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.Component);y.propTypes={counting:c.a.bool,large:c.a.bool,sendText:c.a.string},y.defaultProps={counting:!1,large:!0,sendText:__("获取验证码")}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l="index-module_SideTipContainer_GOO1q",s="index-module_hovered_0kEK0",f="index-module_hidden_D4-zu",d="index-module_hideIcon_H0k4M",p="index-module_hideIconHovered_qClFl",m="index-module_minus_Q1aw+",h="index-module_domIcon_V0vda";function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(){},k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(i,e);var t,n,r,a=_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),x(E(t=a.call(this,e)),"isMounted",!1),x(E(t),"leaveTimer",void 0),x(E(t),"nodeList",void 0),x(E(t),"resetNode",(function(){if(t.props.domQuery){var e,n=document.querySelectorAll(t.props.domQuery);n.length!==(null===(e=t.nodeList)||void 0===e?void 0:e.length)&&n.length&&(t.nodeList=n,t.nodeList.forEach((function(e){e.removeEventListener("mouseenter",t.domMouseEnterCb),e.removeEventListener("mouseleave",t.domMouseLeaveCb),e.removeEventListener("click",t.domClickCaptureCb,!0),e.addEventListener("mouseenter",t.domMouseEnterCb),e.addEventListener("mouseleave",t.domMouseLeaveCb),e.addEventListener("click",t.domClickCaptureCb,!0)})))}})),x(E(t),"domMouseEnterCb",(function(e){t.onMouseEnterToHovered()})),x(E(t),"domClickCaptureCb",(function(e){t.isMounted&&!t.state.visible&&t.onClickToShow(e)})),x(E(t),"domMouseLeaveCb",(function(e){t.state.visible?(t.leaveTimer&&clearTimeout(t.leaveTimer),t.leaveTimer=setTimeout((function(){t.isMounted&&t.setState({hovered:!1})}),500)):t.isMounted&&t.setState({hovered:!1})})),x(E(t),"onClickToShow",(function(e){e.stopPropagation(),t.setState({visible:!0})})),x(E(t),"onMouseEnterToHovered",(function(){t.leaveTimer&&clearTimeout(t.leaveTimer),t.isMounted&&t.setState({hovered:!0})})),x(E(t),"icon",(function(){var e;return o.a.createElement("div",{className:u()(d,(e={},x(e,p,t.state.hovered&&t.state.visible),x(e,h,!!t.props.domQuery),e)),onClick:function(){return t.setState({visible:!1})},onMouseEnter:t.onMouseEnterToHovered,onMouseLeave:function(){return t.setState({hovered:!1})},style:t.props.iconStyle},o.a.createElement("div",{className:m}))})),x(E(t),"renderWithChildren",(function(){var e,n=t.state,r=n.visible,a=n.hovered,i=t.props,c=i.children,d=i.className,p=i.forwardedRef,m=i.id,h=i.testId;return o.a.createElement("div",{onClickCapture:r?j:t.onClickToShow,onMouseEnter:function(){return t.setState({hovered:!0})},onMouseLeave:function(){return t.setState({hovered:!1})},className:u()(l,d,(e={},x(e,s,!r&&a),x(e,f,!r&&!a),e)),ref:p,"data-testid":h,id:m},t.icon(),c)})),x(E(t),"renderWithDom",(function(){var e=t.state,n=e.visible,r=e.hovered;return t.nodeList&&t.nodeList.length?(!n&&r?t.nodeList.forEach((function(e){e.classList.add(s),e.classList.remove(f)})):n||r?t.nodeList.forEach((function(e){e.classList.remove(s),e.classList.remove(f)})):t.nodeList.forEach((function(e){e.classList.remove(s),e.classList.add(f)})),t.icon()):null})),t.state={visible:!0,hovered:!1},t}return t=i,(n=[{key:"componentDidMount",value:function(){this.isMounted=!0,this.resetNode()}},{key:"componentDidUpdate",value:function(){this.resetNode()}},{key:"componentWillUnmount",value:function(){var e=this;this.isMounted=!1,this.nodeList.length&&this.nodeList.forEach((function(t){t.removeEventListener("mouseenter",e.domMouseEnterCb),t.removeEventListener("mouseleave",e.domMouseLeaveCb),t.removeEventListener("click",e.domClickCaptureCb,!0)}))}},{key:"render",value:function(){return this.props.children?this.renderWithChildren():this.renderWithDom()}}])&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component);k.defaultProps={},k.propTypes={children:i.a.node,className:i.a.string,forwardedRef:i.a.object,id:i.a.string,testId:i.a.string,domQuery:i.a.string,iconStyle:i.a.object};t.a=o.a.forwardRef((function(e,t){return o.a.createElement(k,v({forwardedRef:t},e))}))},function(e,t,n){"use strict";n(148);var r=n(53),o=(n(79),n(44)),a=n(0),i=n.n(a),c="index-module_protocol_Nv6Yh";function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s={},f=null;window._protocolAgreed=!1,s.Protocol=function(e){var t=e.isEnterprise,n=e.descText;return i.a.createElement("p",{className:c,"data-testid":"protocol"},t?__("{descText}即表明同意{yuqueProtocol}",{yuqueProtocol:i.a.createElement("a",{href:"#"},"《",__("语雀隐私条款"),"》"),descText:n}):__("{descText}即表明同意{yuqueProtocol}",{yuqueProtocol:i.a.createElement("a",{"data-aspm-click":"d037",href:"".concat(window.appData.defaultSpaceHost,"/terms"),target:"_blank"},"《",__("语雀服务协议"),"》"),descText:n}))},s.ManualProtocol=i.a.forwardRef((function(e,t){var n=u(Object(a.useState)(!1),2),c=n[0],l=n[1],s=i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{href:"".concat(window.appData.defaultSpaceHost,"/terms"),target:"_blank"},"《",__("语雀服务协议"),"》"),__("和"),i.a.createElement("a",{href:"https://app.nlark.com/mobile-app/pages/privacy-policy.html",target:"_blank"},"《",__("语雀隐私权政策"),"》")),d=function(e){l(e),window._protocolAgreed=e};return i.a.useImperativeHandle(t,(function(){return{checkProtocolAgreed:function(e){return!(!c&&!window._protocolAgreed)||(f=o.a.confirm({title:__("服务协议及隐私保护"),icon:null,content:i.a.createElement(i.a.Fragment,null,__("为更好地保护你的合法权益，请阅读并同意"),s),okText:__("同意"),onOk:function(t){var n;return d(!0),e.onConfirm&&e.onConfirm(),null===(n=f)||void 0===n||n.destroy(),f=null,!0},onCancel:function(){var e;null===(e=f)||void 0===e||e.destroy(),f=null},cancelText:__("不同意")}),!1)}}})),i.a.createElement(r.a,{className:e.className,style:e.style,"data-testid":"protocolCheckBox",checked:c,onChange:function(e){return d(e.target.checked)}},__("我已阅读并同意"),s)}));t.a=s},function(e,t,n){"use strict";n(96);var r=n(23),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(270),l=n.n(u),s=function(e){var t=window.appData.login.enablePlatforms,n=window.appData.login.loginType,o=window.appData,i=o.organization,c=o.isDesktopApp,u=o.isDingTalkApp,s=!!l.a.mobile,f=/micromessenger/.test(navigator.userAgent.toLowerCase());t=t||[];var d={},p="/login?";if(i&&"corp"===n){for(var m=0,h=["weixin","dingtalk","teambition"];m<h.length;m++){var y=h[m];d[y]=t.indexOf(y)>=0}p+="org=".concat(i.login,"&")}else{var v=[];e.isInvite?(v=c?["dingtalk","wechat"]:s&&!f?["dingtalk","alipay"]:["dingtalk","alipay","wechat"],v=c?["dingtalk","wechat"]:["dingtalk","alipay","wechat"]):v=c?["dingtalk","wechat"]:s&&!f?["dingtalk","alipay","teambition"]:["dingtalk","alipay","wechat","teambition"];for(var b=0,g=v;b<g.length;b++){var _=g[b];d[_]=t.indexOf(_)>=0}d.alipay=d.alipay&&!s}for(var w=function(t,n){if("modal"===e.mode)return t.preventDefault(),void e.switchPlatform(n);var r=e.loginType;window.location.href="".concat(p,"platform=").concat(n,"&loginType=").concat(r)},E=[{type:"dingtalk",text:__("钉钉"),title:__("钉钉登录"),spm:"d010"},{type:"alipay",href:"".concat(p,"platform=alipay"),text:__("支付宝"),title:__("支付宝登录"),spm:"d011"},{type:"wechat",text:__("微信"),title:__("微信登录"),spm:"d012"},{type:"weixin",text:__("企业微信"),title:__("企业微信登录"),spm:"d012"},{type:"teambition",text:"Teambition",title:__("Teambition 登录"),spm:"d013"}],O=function(){var t=j[x];if(!u&&window.h5&&"dingtalk"===t.type){var n=window.location,r=new URLSearchParams;r.set("url",n.href),t.href="https://qr.dingtalk.com/page/link?".concat(r.toString())}t.onClick=function(n){if(e.checkBeforeLogin&&!e.checkBeforeLogin(w.bind(undefined,n,t.type)))return n.preventDefault(),void n.stopPropagation();t.href||w(n,t.type)}},x=0,j=E;x<j.length;x++)O();return a.a.createElement("div",{className:"third-login"},a.a.createElement("div",{className:"third-login-link","data-testid":"third-login-link"},E.filter((function(e){return d[e.type]})).map((function(e){return a.a.createElement(r.a,{title:e.title},a.a.createElement("a",{className:"third-login-a","data-aspm-click":e.spm,href:e.href,onClick:e.onClick},a.a.createElement("span",{className:e.type,"data-testid":e.type})))}))))};s.defaultProps={switchPlatform:function(){}},s.propTypes={switchPlatform:c.a.func,checkBeforeLogin:c.a.func,mode:c.a.oneOf(["default","modal"]).isRequired,isInvite:c.a.bool};t.a=s},,,function(e,t,n){"use strict";n(79);var r=n(44),o=n(0),a=n(88),i=n(2214),c=n(2216),u=n(2221),l="index-module_KnowledgeGraphModal_gH5kp",s="index-module_KnowledgeGraph_iV5BC",f="index-module_Legend_Mrk1u",d=n(2209);t.a=Object(a.d)((function(e){return{dispatch:e.dispatch,skylink:e.skylink,doc:e.doc}}))((function(e){var t=e.skylink,n=e.doc,a=e.dispatch,p=(t||{}).modalVisible;return Object(d.a)({dispatch:a,docId:n.id,launched:!!p}),o.createElement(r.a,{className:l,closable:!0,footer:null,centered:!0,visible:p,onCancel:function(){a({type:"skylink/clear"})},width:1140,destroyOnClose:!0},o.createElement("div",{className:s},o.createElement(i.a,null),o.createElement(c.a,{style:{position:"absolute",right:"24px",bottom:"68px",top:"68px"}}),o.createElement(u.a,{className:f})))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),o=n(40),a=n(278),i=n(1324);function c(e,t,n,i){if(!t.length)return n;var u,l=Object(a.a)(t),s=l[0],f=l.slice(1);return u=e||"number"!=typeof s?Array.isArray(e)?Object(o.a)(e):Object(r.a)({},e):[],i&&void 0===n&&1===f.length?delete u[s][f[0]]:u[s]=c(u[s],f,n,i),u}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!Object(i.a)(e,t.slice(0,-1))?e:c(e,t,n,r)}},function(e,t,n){"use strict";(function(e){function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function i(e,t,n){return i=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&o(a,n.prototype),a},i.apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return i(e,arguments,r(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o(a,e)},c(e)}var u=/%[sdj%]/g,l=function(){};function s(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,o=t[0],a=t.length;if("function"==typeof o)return o.apply(null,t.slice(1));if("string"==typeof o){var i=String(o).replace(u,(function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(n){return"[Circular]"}break;default:return e}}));return i}return o}function d(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function p(e,t,n){var r=0,o=e.length;!function a(i){if(i&&i.length)n(i);else{var c=r;r+=1,c<o?t(e[c],a):n([])}}([])}void 0!==e&&e.env;var m=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(c(Error));function h(e,t,n,r){if(t.first){var o=new Promise((function(t,o){var a=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e);p(a,n,(function(e){return r(e),e.length?o(new m(e,s(e))):t()}))}));return o.catch((function(e){return e})),o}var a=t.firstFields||[];!0===a&&(a=Object.keys(e));var i=Object.keys(e),c=i.length,u=0,l=[],f=new Promise((function(t,o){var f=function(e){if(l.push.apply(l,e),++u===c)return r(l),l.length?o(new m(l,s(l))):t()};i.length||(r(l),t()),i.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?p(r,n,f):function(e,t,n){var r=[],o=0,a=e.length;function i(e){r.push.apply(r,e),++o===a&&n(r)}e.forEach((function(e){t(e,i)}))}(r,n,f)}))}));return f.catch((function(e){return e})),f}function y(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}}function v(e,t){if(t)for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];"object"==typeof o&&"object"==typeof e[r]?e[r]=n({},e[r],o):e[r]=o}return e}function b(e,t,n,r,o,a){!e.required||n.hasOwnProperty(e.field)&&!d(t,a||e.type)||r.push(f(o.messages.required,e.fullField))}var g={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},_={integer:function(e){return _.number(e)&&parseInt(e,10)===e},float:function(e){return _.number(e)&&!_.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"==typeof e&&!_.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(g.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(g.url)},hex:function(e){return"string"==typeof e&&!!e.match(g.hex)}};var w={required:b,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(f(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)b(e,t,n,r,o);else{var a=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(a)>-1?_[a](t)||r.push(f(o.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&r.push(f(o.messages.types[a],e.fullField,e.type))}},range:function(e,t,n,r,o){var a="number"==typeof e.len,i="number"==typeof e.min,c="number"==typeof e.max,u=t,l=null,s="number"==typeof t,d="string"==typeof t,p=Array.isArray(t);if(s?l="number":d?l="string":p&&(l="array"),!l)return!1;p&&(u=t.length),d&&(u=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),a?u!==e.len&&r.push(f(o.messages[l].len,e.fullField,e.len)):i&&!c&&u<e.min?r.push(f(o.messages[l].min,e.fullField,e.min)):c&&!i&&u>e.max?r.push(f(o.messages[l].max,e.fullField,e.max)):i&&c&&(u<e.min||u>e.max)&&r.push(f(o.messages[l].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&r.push(f(o.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,n,r,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(f(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(f(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function E(e,t,n,r,o){var a=e.type,i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t,a)&&!e.required)return n();w.required(e,t,r,i,o,a),d(t,a)||w.type(e,t,r,i,o)}n(i)}var O={string:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t,"string")&&!e.required)return n();w.required(e,t,r,a,o,"string"),d(t,"string")||(w.type(e,t,r,a,o),w.range(e,t,r,a,o),w.pattern(e,t,r,a,o),!0===e.whitespace&&w.whitespace(e,t,r,a,o))}n(a)},method:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();w.required(e,t,r,a,o),void 0!==t&&w.type(e,t,r,a,o)}n(a)},number:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),d(t)&&!e.required)return n();w.required(e,t,r,a,o),void 0!==t&&(w.type(e,t,r,a,o),w.range(e,t,r,a,o))}n(a)},boolean:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();w.required(e,t,r,a,o),void 0!==t&&w.type(e,t,r,a,o)}n(a)},regexp:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();w.required(e,t,r,a,o),d(t)||w.type(e,t,r,a,o)}n(a)},integer:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();w.required(e,t,r,a,o),void 0!==t&&(w.type(e,t,r,a,o),w.range(e,t,r,a,o))}n(a)},float:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();w.required(e,t,r,a,o),void 0!==t&&(w.type(e,t,r,a,o),w.range(e,t,r,a,o))}n(a)},array:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();w.required(e,t,r,a,o,"array"),null!=t&&(w.type(e,t,r,a,o),w.range(e,t,r,a,o))}n(a)},object:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();w.required(e,t,r,a,o),void 0!==t&&w.type(e,t,r,a,o)}n(a)},enum:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();w.required(e,t,r,a,o),void 0!==t&&w.enum(e,t,r,a,o)}n(a)},pattern:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t,"string")&&!e.required)return n();w.required(e,t,r,a,o),d(t,"string")||w.pattern(e,t,r,a,o)}n(a)},date:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t,"date")&&!e.required)return n();var i;if(w.required(e,t,r,a,o),!d(t,"date"))i=t instanceof Date?t:new Date(t),w.type(e,i,r,a,o),i&&w.range(e,i.getTime(),r,a,o)}n(a)},url:E,hex:E,email:E,required:function(e,t,n,r,o){var a=[],i=Array.isArray(t)?"array":typeof t;w.required(e,t,r,a,o,i),n(a)},any:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(d(t)&&!e.required)return n();w.required(e,t,r,a,o)}n(a)}};function x(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var j=x();function k(e){this.rules=null,this._messages=j,this.define(e)}k.prototype={messages:function(e){return e&&(this._messages=v(x(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof e||Array.isArray(e))throw new Error("Rules must be an object");var t,n;for(t in this.rules={},e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e,t,r){var o=this;void 0===t&&(t={}),void 0===r&&(r=function(){});var a,i,c=e,u=t,l=r;if("function"==typeof u&&(l=u,u={}),!this.rules||0===Object.keys(this.rules).length)return l&&l(),Promise.resolve();if(u.messages){var d=this.messages();d===j&&(d=x()),v(d,u.messages),u.messages=d}else u.messages=this.messages();var p={};(u.keys||Object.keys(this.rules)).forEach((function(t){a=o.rules[t],i=c[t],a.forEach((function(r){var a=r;"function"==typeof a.transform&&(c===e&&(c=n({},c)),i=c[t]=a.transform(i)),(a="function"==typeof a?{validator:a}:n({},a)).validator=o.getValidationMethod(a),a.field=t,a.fullField=a.fullField||t,a.type=o.getType(a),a.validator&&(p[t]=p[t]||[],p[t].push({rule:a,value:i,source:c,field:t}))}))}));var m={};return h(p,u,(function(e,t){var r,o=e.rule,a=!("object"!==o.type&&"array"!==o.type||"object"!=typeof o.fields&&"object"!=typeof o.defaultField);function i(e,t){return n({},t,{fullField:o.fullField+"."+e})}function c(r){void 0===r&&(r=[]);var c=r;if(Array.isArray(c)||(c=[c]),!u.suppressWarning&&c.length&&k.warning("async-validator:",c),c.length&&void 0!==o.message&&(c=[].concat(o.message)),c=c.map(y(o)),u.first&&c.length)return m[o.field]=1,t(c);if(a){if(o.required&&!e.value)return void 0!==o.message?c=[].concat(o.message).map(y(o)):u.error&&(c=[u.error(o,f(u.messages.required,o.field))]),t(c);var l={};if(o.defaultField)for(var s in e.value)e.value.hasOwnProperty(s)&&(l[s]=o.defaultField);for(var d in l=n({},l,e.rule.fields))if(l.hasOwnProperty(d)){var p=Array.isArray(l[d])?l[d]:[l[d]];l[d]=p.map(i.bind(null,d))}var h=new k(l);h.messages(u.messages),e.rule.options&&(e.rule.options.messages=u.messages,e.rule.options.error=u.error),h.validate(e.value,e.rule.options||u,(function(e){var n=[];c&&c.length&&n.push.apply(n,c),e&&e.length&&n.push.apply(n,e),t(n.length?n:null)}))}else t(c)}a=a&&(o.required||!o.required&&e.value),o.field=e.field,o.asyncValidator?r=o.asyncValidator(o,e.value,c,e.source,u):o.validator&&(!0===(r=o.validator(o,e.value,c,e.source,u))?c():!1===r?c(o.message||o.field+" fails"):r instanceof Array?c(r):r instanceof Error&&c(r.message)),r&&r.then&&r.then((function(){return c()}),(function(e){return c(e)}))}),(function(e){!function(e){var t,n,r,o=[],a={};for(t=0;t<e.length;t++)n=e[t],r=void 0,Array.isArray(n)?o=(r=o).concat.apply(r,n):o.push(n);o.length?a=s(o):(o=null,a=null),l(o,a)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!O.hasOwnProperty(e.type))throw new Error(f("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?O.required:O[this.getType(e)]||!1}},k.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");O[e]=t},k.warning=l,k.messages=j,k.validators=O,t.a=k}).call(this,n(247))},function(e,t,n){"use strict";e.exports=[{taskName:"阅读页加载性能监控",pagename:"doc_read",code:16,msg:"doc_read customized performance log",keyMap:{m1:"start-js-render",m2:"start-umijs-render",m3:"start-loadDoc",m4:"finish-loadDoc",m5:"finish-doc-render",d1:"doc-size"}},{taskName:"h5 阅读页加载性能监控",pagename:"doc_h5_read",code:19,msg:"h5 阅读页加载性能监控",keyMap:{m1:"start-js-render",m2:"start-umijs-render",m3:"start-loadDoc",m4:"finish-loadDoc",m5:"finish-h5-doc-render",d1:"doc-size"}}]},function(e,t,n){var r=n(1010),o=n(1977),a=n(454);e.exports=function(e,t){var n={};return t=a(t,3),o(e,(function(e,o,a){r(n,o,t(e,o,a))})),n}},,,,,function(e,t,n){"use strict";e.exports=n(2710)},function(e,t,n){var r=n(2712),o=n(2157);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(367),c=n(2713),u=(r=c)&&r.__esModule?r:{default:r},l=n(2733);function s(e){this.rules=null,this._messages=l.messages,this.define(e)}s.prototype={messages:function(e){return e&&(this._messages=(0,i.deepMerge)((0,l.newMessages)(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===e?"undefined":a(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,n=void 0;for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=e,u=n,f=r;if("function"==typeof u&&(f=u,u={}),!this.rules||0===Object.keys(this.rules).length)return f&&f(),Promise.resolve();function d(e){var t,n,r=void 0,o=[],a={};for(r=0;r<e.length;r++)t=e[r],n=void 0,Array.isArray(t)?o=(n=o).concat.apply(n,t):o.push(t);o.length?a=(0,i.convertFieldsError)(o):(o=null,a=null),f(o,a)}if(u.messages){var p=this.messages();p===l.messages&&(p=(0,l.newMessages)()),(0,i.deepMerge)(p,u.messages),u.messages=p}else u.messages=this.messages();var m=void 0,h=void 0,y={},v=u.keys||Object.keys(this.rules);v.forEach((function(n){m=t.rules[n],h=c[n],m.forEach((function(r){var a=r;"function"==typeof a.transform&&(c===e&&(c=o({},c)),h=c[n]=a.transform(h)),(a="function"==typeof a?{validator:a}:o({},a)).validator=t.getValidationMethod(a),a.field=n,a.fullField=a.fullField||n,a.type=t.getType(a),a.validator&&(y[n]=y[n]||[],y[n].push({rule:a,value:h,source:c,field:n}))}))}));var b={};return(0,i.asyncMap)(y,u,(function(e,t){var n=e.rule,r=!("object"!==n.type&&"array"!==n.type||"object"!==a(n.fields)&&"object"!==a(n.defaultField));function c(e,t){return o({},t,{fullField:n.fullField+"."+e})}function l(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=a;if(Array.isArray(l)||(l=[l]),!u.suppressWarning&&l.length&&s.warning("async-validator:",l),l.length&&n.message&&(l=[].concat(n.message)),l=l.map((0,i.complementError)(n)),u.first&&l.length)return b[n.field]=1,t(l);if(r){if(n.required&&!e.value)return l=n.message?[].concat(n.message).map((0,i.complementError)(n)):u.error?[u.error(n,(0,i.format)(u.messages.required,n.field))]:[],t(l);var f={};if(n.defaultField)for(var d in e.value)e.value.hasOwnProperty(d)&&(f[d]=n.defaultField);for(var p in f=o({},f,e.rule.fields))if(f.hasOwnProperty(p)){var m=Array.isArray(f[p])?f[p]:[f[p]];f[p]=m.map(c.bind(null,p))}var h=new s(f);h.messages(u.messages),e.rule.options&&(e.rule.options.messages=u.messages,e.rule.options.error=u.error),h.validate(e.value,e.rule.options||u,(function(e){var n=[];l&&l.length&&n.push.apply(n,l),e&&e.length&&n.push.apply(n,e),t(n.length?n:null)}))}else t(l)}r=r&&(n.required||!n.required&&e.value),n.field=e.field;var f=void 0;n.asyncValidator?f=n.asyncValidator(n,e.value,l,e.source,u):n.validator&&(!0===(f=n.validator(n,e.value,l,e.source,u))?l():!1===f?l(n.message||n.field+" fails"):f instanceof Array?l(f):f instanceof Error&&l(f.message)),f&&f.then&&f.then((function(){return l()}),(function(e){return l(e)}))}),(function(e){d(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!u.default.hasOwnProperty(e.type))throw new Error((0,i.format)("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?u.default.required:u.default[this.getType(e)]||!1}},s.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");u.default[e]=t},s.warning=i.warning,s.messages=l.messages,t.default=s},,,function(e,t,n){"use strict";var r,o=n(14),a=n(57),i=n(58),c=n(66),u=n(72),l=n(0),s=n(11),f=n(18),d=n(296),p=n(126),m=n(10),h=n.n(m),y="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",v=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],b={};function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&b[n])return b[n];var r=window.getComputedStyle(e),o=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),a=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),i=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),c=v.map((function(e){return"".concat(e,":").concat(r.getPropertyValue(e))})).join(";"),u={sizingStyle:c,paddingSize:a,borderSize:i,boxSizing:o};return t&&n&&(b[n]=u),u}var _,w=n(297),E=n.n(w);!function(e){e[e.NONE=0]="NONE",e[e.RESIZING=1]="RESIZING",e[e.RESIZED=2]="RESIZED"}(_||(_={}));var O=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).nextFrameActionId=void 0,i.resizeFrameId=void 0,i.textArea=void 0,i.saveTextArea=function(e){i.textArea=e},i.handleResize=function(e){var t=i.state.resizeStatus,n=i.props,r=n.autoSize,o=n.onResize;t===_.NONE&&("function"==typeof o&&o(e),r&&i.resizeOnNextFrame())},i.resizeOnNextFrame=function(){cancelAnimationFrame(i.nextFrameActionId),i.nextFrameActionId=requestAnimationFrame(i.resizeTextarea)},i.resizeTextarea=function(){var e=i.props.autoSize;if(e&&i.textArea){var t=e.minRows,n=e.maxRows,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r||((r=document.createElement("textarea")).setAttribute("tab-index","-1"),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),e.getAttribute("wrap")?r.setAttribute("wrap",e.getAttribute("wrap")):r.removeAttribute("wrap");var a=g(e,t),i=a.paddingSize,c=a.borderSize,u=a.boxSizing,l=a.sizingStyle;r.setAttribute("style","".concat(l,";").concat(y)),r.value=e.value||e.placeholder||"";var s,f=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,p=r.scrollHeight;if("border-box"===u?p+=c:"content-box"===u&&(p-=i),null!==n||null!==o){r.value=" ";var m=r.scrollHeight-i;null!==n&&(f=m*n,"border-box"===u&&(f=f+i+c),p=Math.max(f,p)),null!==o&&(d=m*o,"border-box"===u&&(d=d+i+c),s=p>d?"":"hidden",p=Math.min(d,p))}return{height:p,minHeight:f,maxHeight:d,overflowY:s,resize:"none"}}(i.textArea,!1,t,n);i.setState({textareaStyles:o,resizeStatus:_.RESIZING},(function(){cancelAnimationFrame(i.resizeFrameId),i.resizeFrameId=requestAnimationFrame((function(){i.setState({resizeStatus:_.RESIZED},(function(){i.resizeFrameId=requestAnimationFrame((function(){i.setState({resizeStatus:_.NONE}),i.fixFirefoxAutoScroll()}))}))}))}))}},i.renderTextArea=function(){var e=i.props,t=e.prefixCls,n=void 0===t?"rc-textarea":t,r=e.autoSize,a=e.onResize,c=e.className,u=e.disabled,m=i.state,y=m.textareaStyles,v=m.resizeStatus,b=Object(p.a)(i.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),g=h()(n,c,Object(f.a)({},"".concat(n,"-disabled"),u));"value"in b&&(b.value=b.value||"");var w=Object(s.a)(Object(s.a)(Object(s.a)({},i.props.style),y),v===_.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return l.createElement(d.a,{onResize:i.handleResize,disabled:!(r||a)},l.createElement("textarea",Object(o.default)({},b,{className:g,style:w,ref:i.saveTextArea})))},i.state={textareaStyles:{},resizeStatus:_.NONE},i}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e){e.value===this.props.value&&E()(e.autoSize,this.props.autoSize)||this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,t)}}catch(n){}}},{key:"render",value:function(){return this.renderTextArea()}}]),n}(l.Component),x=O,j=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e)).resizableTextArea=void 0,r.focus=function(){r.resizableTextArea.textArea.focus()},r.saveTextArea=function(e){r.resizableTextArea=e},r.handleChange=function(e){var t=r.props.onChange;r.setValue(e.target.value,(function(){r.resizableTextArea.resizeTextarea()})),t&&t(e)},r.handleKeyDown=function(e){var t=r.props,n=t.onPressEnter,o=t.onKeyDown;13===e.keyCode&&n&&n(e),o&&o(e)};var o=void 0===e.value||null===e.value?e.defaultValue:e.value;return r.state={value:o},r}return Object(i.a)(n,[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return l.createElement(x,Object(o.default)({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),n}(l.Component);t.a=j},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";e.exports={IDENTITY:{ANONYMOUS:0,PUBLIC:1},ALLOW_CONTRIBUTOR_TARGET_TYPE:["Book","Doc","Doclet"]}},,function(e,t,n){"use strict";e.exports={ORIGIN:{manual:1,cache:2},SAVE_FROM:{initUser:"init-user",system:"system"}}},,,,,function(e,t,n){"use strict";e.exports={DISPLAY_TYPE:{card:0,summary:1,list:2,cover:3},REJECTED_ID:0}},,,function(e,t,n){},,,,,function(e,t,n){"use strict";e.exports={READ_STATUS:{ok:1,suspect:98,illegal:99,banned:100}}},function(e,t,n){var r=n(2687)("toUpperCase");e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c,u={NOTIFICATION_ONLY:"notification_only",NOTIFICATION_PLUS_DINGTALK:"notification_plus_dingtalk",ALL:"all",ALL_PLUS_SMS:"all_plus_sms",ALL_PLUS_DINGTALK:"all_plus_dingtalk",NONE:"none"},l={ENABLE:"enable",DISABLE:"disable"},s={NOTIFY_GROUP:{follow:["follow_user"],like:["like_doc","like_artboard","like_note"],mention:["comment","mention","submit_comment","submit_opinion","comment_reaction","thing_comment","feedback_remark","issue_comment","issue_mention"],action:["apply_collaborator","apply_join_group","apply_organization_user","area_assign","invite_collaborator","group_invitation","invite_organization_user","joined_collaboration","new_review","issue_assignee","issue_update","user_job_transfer","user_job_leave","user_job_leave_auto_assigned"],system:["system","auto_new_group_owner","doc_audit","member_paid","trans_org_property_all","trans_org_property_book","trans_org_property_group","use_gift_promo","user_member_expired","user_member_will_expire","app_acquisition","wechat_follow_bind","approve_welfare","reject_welfare","feedback_comment"],normal:["cancel_review","close_topic","complete_review","join_collaborator","joined_a_group","joined_a_group_from_department","joined_a_organization","remove_from_a_organization","new_topic","reopen_topic","topic_assign","update_asset","publish_doc","update_doc","update_review_status","upload_artboard","upload_artboards","upload_asset","upload_resources","feedback_assign"]},MOBILE_APP_NOTIFY_CONFIG:l,MOBILE_APP_NOTIFY_DEFAULT_CONFIG:{mention:l.DISABLE,like:l.DISABLE,follow:l.DISABLE,action:l.ENABLE,system:l.ENABLE},EVENT_TYPES:["publish_doc","update_doc","upload_artboard","upload_artboards","upload_asset","update_asset","like_doc","like_artboard","follow_user","follow_group","new_book","watch_book","new_resource","upload_resources"],WORK_MESSAGE_TYPES:["delete_book","move_book","rename_book","private_book","public_book","topic_assign","joined_a_group","group_invitation","new_group_member","new_group_user_from_department","joined_a_group_from_department","issue_assignee","issue_comment","issue_mention","issue_update","join_group_user","apply_join_group","mention","comment","comment_reaction","joined_collaboration","invite_collaborator","apply_collaborator","join_collaborator","doc_audit","auto_new_group_owner","invite_organization_user","join_organization_user","apply_organization_user","joined_a_organization","remove_from_a_organization","system","organization_owner_own_group","new_review","submit_opinion","complete_review","cancel_review","submit_comment","apply_list_user","approve_list_user","feedback_assign","thing_comment","feedback_comment","feedback_remark"],SETTING_VALUES:u,SETTING_TYPES:function(){var e,t=function(e){return e},n=!1;"undefined"!=typeof window&&"function"==typeof window.__&&(t=window.__,null!==(e=window.appData)&&void 0!==e&&e.isYuque&&(n=!0));var r=t(n?"团队或知识小组":"团队");return[{key:"follow",title:t("关注"),desc:t("当他人关注我时"),defaultValue:u.ALL_PLUS_DINGTALK},{key:"like",title:t("点赞"),desc:t("当他人给我的文档点赞时"),defaultValue:u.ALL_PLUS_DINGTALK},{key:"mention",title:t("@ 和评论"),desc:t("当他人@我，或者评论我的主题和文档时"),defaultValue:u.ALL_PLUS_DINGTALK},{key:"action",title:t("待处理"),desc:t("需要我审批的申请"),defaultValue:u.ALL_PLUS_DINGTALK},{key:"system",title:t("系统通知"),desc:t("风险提示，功能变更，运营活动"),defaultValue:u.ALL_PLUS_DINGTALK},{key:"normal",title:t("其他消息"),desc:t("加入{entity}，加入协作，创建话题等",{entity:r}),defaultValue:u.NOTIFICATION_ONLY}]}(),SETTING_TYPES_MAP:{follow_user:"follow",like_doc:"like",like_artboard:"like",like_note:"like",comment:"mention",issue_comment:"mention",issue_mention:"mention",mention:"mention",submit_comment:"mention",submit_opinion:"mention",comment_reaction:"mention",thing_comment:"mention",feedback_remark:"mention",apply_collaborator:"action",apply_join_group:"action",apply_organization_user:"action",area_assign:"action",invite_collaborator:"action",group_invitation:"action",invite_organization_user:"action",joined_collaboration:"action",new_review:"action",issue_assignee:"action",issue_update:"action",user_job_transfer:"action",user_job_leave:"action",user_job_leave_auto_assigned:"action",system:"system",auto_new_group_owner:"system",doc_audit:"system",member_paid:"system",trans_org_property_all:"system",trans_org_property_book:"system",trans_org_property_group:"system",use_gift_promo:"system",user_member_expired:"system",user_member_will_expire:"system",wechat_follow_bind:"system",feedback_comment:"system",cancel_review:"normal",close_topic:"normal",complete_review:"normal",join_collaborator:"normal",joined_a_group:"normal",joined_a_group_from_department:"normal",joined_a_organization:"normal",remove_from_a_organization:"normal",new_topic:"normal",reopen_topic:"normal",topic_assign:"normal",update_asset:"normal",update_doc:"normal",update_review_status:"normal",upload_artboard:"normal",upload_artboards:"normal",upload_asset:"normal",upload_resources:"normal",publish_doc:"normal",new_resource:"normal",delete_book:"normal",move_book:"normal",rename_book:"normal",private_book:"normal",public_book:"normal",new_book:"normal",new_group_member:"normal",new_group_user_from_department:"normal",remove_from_a_group:"normal",join_group_user:"normal",join_organization_user:"normal",group_member_will_expire:"normal",group_member_expired:"normal",book_premium:"normal",premium_doc:"normal",organization_owner_own_group:"normal",deactivate_share:"normal",apply_list_user:"normal",approve_list_user:"normal",group_upgrade_to_organization:"normal",group_migrate_to_organization:"normal",delete_group:"normal",access_token_created:"normal",approve_welfare:"normal",reject_welfare:"normal",feedback_assign:"normal"}};s.NOTIFY_TYPES=[].concat(o(s.NOTIFY_GROUP.follow),o(s.NOTIFY_GROUP.like),o(s.NOTIFY_GROUP.mention),o(s.NOTIFY_GROUP.action),o(s.NOTIFY_GROUP.system),o(s.NOTIFY_GROUP.normal)),s.NOTIFY_NOT_NORMAL_TYPES=[].concat(o(s.NOTIFY_GROUP.follow),o(s.NOTIFY_GROUP.like),o(s.NOTIFY_GROUP.mention),o(s.NOTIFY_GROUP.action),o(s.NOTIFY_GROUP.system)),s.MOBILE_APP_NOTIFY_TYPES=[].concat(o(s.NOTIFY_GROUP.follow),o(s.NOTIFY_GROUP.like),o(s.NOTIFY_GROUP.mention),o(s.NOTIFY_GROUP.action),o(s.NOTIFY_GROUP.system)),s.MOBILE_APP_NOTIFY_GROUP=s.NOTIFY_GROUP,s.MOBILE_APP_NOTIFY_GROUP_MAP=(c={},Object.entries(s.NOTIFY_GROUP).forEach((function(e){var t=r(e,2),n=t[0];t[1].forEach((function(e){c[e]=n}))})),c),e.exports=s},,,,function(e,t,n){"use strict";e.exports={ACTION_TYPE:{ORG_BUY:"org_buy",ORG_TRYOUT:"org_tryout",ORG_DOWNGRADE:"org_downgrade",GROUP_BUY:"group_buy",OWN:"own",CREATE:"create",UPDATE:"update",DELETE:"delete",MOVE:"move",PRIVACY:"privacy",SWITCH:"switch",PUBLIC_SHARE:"public_share",INTERNAL_SHARE:"internal_share",DEACTIVATE_SHARE:"deactivate_share",INVITE:"invite",JOIN:"join",APPLY:"apply",ROLE_SWITCH:"role_switch",EXPORT:"export",IMPORT:"import",BIND:"bind",UNBIND:"unbind",UPLOAD:"upload",DOWNLOAD:"download",REVERT:"revert",LOGIN:"login",LOGOUT:"logout",BIND_DINGTALK:"bind_dingtalk",REGISTER_ALIPAY_MINI_APP:"register_alipay_mini_app",BIND_WECHAT:"bind_wechat",BIND_MOBILE:"bind_mobile",BIND_EMAIL:"bind_email",BIND_ALIPAY:"bind_alipay",UNBIND_DINGTALK:"unbind_dingtalk",UNBIND_WECHAT:"unbind_wechat",UNBIND_ALIPAY:"unbind_alipay",UNBIND_APPLE:"unbind_apple",CHANGE_PASSWORD:"change_password",CHANGE_MOBILE:"change_mobile",CHANGE_EMAIL:"change_email",CHANGE_LOGIN:"change_login",USER_ACTION:["login","logout","bind_dingtalk","bind_wechat","bind_mobile","bind_email","bind_alipay","unbind_dingtalk","unbind_wechat","unbind_alipay","change_password","change_mobile","change_email","change_login"],TRANS_ORG_GROUP:"trans_org_group",TRANS_ORG_BOOK:"trans_org_personal_book"},GROUP_AUDITABLE_SUBJECT_TYPES:["Doc","Artboard","ArtboardGroup","Asset","Resource"],ORGANIZATION_AUDITABLE_SUBJECT_TYPES:["Doc","Book"]}},,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(46),u=n(2276),l=n(525),s=n(212),f=n(34),d=n(1268);function p(e){var t=e.content,n=Object(r.useMemo)((function(){return u.a.contentToLakeTable(t)}),[t]),a=f.a.tables,i=f.a.shares;return o.a.createElement(c.F,{data:n,abilities:e.abilities,lang:s.a.localeToLakeLang(window.appData.locale),onLoad:e.onLoad,docId:e.docId,docType:e.docType||l.DOC,webProxy:{tables:a,shares:i},webSdk:d.a})}p.propTypes={docId:i.a.number,docType:i.a.string,content:i.a.string,abilities:i.a.object,onLoad:i.a.func},t.default=p},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";e.exports={CHANNELS:{NOTE:{UPDATE_LIST:"note/update_note_list"}}}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(114),u=n.n(c),l=n(2106),s=n(930),f=n(212),d=n(2342),p=n(34),m=n(525),h=u()("editor:LakeSheetViewer.ui");function y(e){var t=e.content;h("render LakeSheetViewer, reader version:",l.c);var n=Object(r.useMemo)((function(){return d.a.contentToLakeSheet(t)}),[t]),a=p.a.datasheetSchema,i=p.a.datasheetView,c=p.a.datasheetRecord,u=p.a.shares;return o.a.createElement(l.b,{data:n,lang:f.a.localeToLakeLang(window.appData.locale),onLoad:e.onLoad,docId:e.docId,docType:e.docType||m.DOC,versionMode:e.versionMode,webProxy:{datasheetSchema:a,datasheetView:i,datasheetRecord:c,shares:u},themeManager:window.appData.themeManager||new s.DefaultThemeManager})}y.propTypes={docId:i.a.number,docType:i.a.string,content:i.a.string,versionMode:i.a.bool,onLoad:i.a.func},t.default=y},,,,function(e,t,n){"use strict";e.exports={CONFERENCE_2021:"conference_2021",GARDEN_EXPLORE_TYPES:{share_doc_to_home:"share_doc_to_home",share_note_to_home:"share_note_to_home",like_doc:"like_doc",recommend_doc:"recommend_doc"},GROUP_BY_ACTOR_EVENT_TYPES:["follow_user","new_book","watch_book","upload_artboards","upload_asset","new_resource","upload_resources"],GROUP_BY_SUBJECT_EVENT_TYPES:["follow_user","watch_book","update_doc","like_doc","like_artboard"],GARDEN_EVENT_TYPES:["share_note_to_home","share_doc_to_home"]}},function(e,t,n){"use strict";var r={HOTMAP_VISIBILITY:"hotmap_visibility",TIMELINE_VISIBILITY:"timeline_visibility"},o={SHOW:"show",HIDE:"hide"};e.exports={USER_SETTINGS_KEYS:r,HOTMAP_VISIBILITY_VALUES:o,HOTMAP_DISPLAY_MAX_DAYS:365,USER_SETTING_TYPES:[{key:r.HOTMAP_VISIBILITY,desc:"个人页热力图是否展示",defaultValue:o.SHOW}]}},function(e,t,n){"use strict";e.exports={MODEL:["ThingComment","Thing"],THING_TYPE:{feedback:"反馈"}}},,,,,function(e,t,n){"use strict";e.exports={ORDER_TYPE:{PremiumOrder:"PremiumOrder",MemberPaymentOrder:"MemberPaymentOrder",MemberOperationOrder:"MemberOperationOrder",PaymentOrder:"PaymentOrder",ActivityOrder:"ActivityOrder"},TYPE:{PREMIUM_DOC:"PREMIUM_DOC",GROUP_MEMBER_PAY:"GROUP_MEMBER_PAY",USER_MEMBER_PAY:"USER_MEMBER_PAY",ORGANIZATION_PAY:"ORGANIZATION_PAY",FLOW_GIFT:"FLOW_GIFT",ACTIVITY_GIFT:"ACTIVITY_GIFT"}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(162),n(375),n(326)},,,function(e,t,n){var r=n(1005),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(u){}var o=i.call(e);return r&&(t?e[c]=n:delete e[c]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),c=i.length;c--;){var u=i[e?c:++o];if(!1===n(a[u],u,a))break}return t}}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(671),o=n(558);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(671),o=n(1978),a=n(558),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},function(e,t,n){var r=n(2145)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(2535),o=n(2573),a=n(2155);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(1282),o=n(1984);e.exports=function(e,t,n,a){var i=n.length,c=i,u=!a;if(null==e)return!c;for(e=Object(e);i--;){var l=n[i];if(u&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<c;){var s=(l=n[i])[0],f=e[s],d=l[1];if(u&&l[2]){if(void 0===f&&!(s in e))return!1}else{var p=new r;if(a)var m=a(f,d,s,e,t,p);if(!(void 0===m?o(d,f,3,a,p):m))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(1284),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(1284);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(1284);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(1284);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(1283);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(1283),o=n(1982),a=n(1983);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(1980),o=n(2547),a=n(229),i=n(2147),c=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,s=u.toString,f=l.hasOwnProperty,d=RegExp("^"+s.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?d:c).test(i(e))}},function(e,t,n){var r,o=n(2548),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},function(e,t,n){var r=n(603)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(2551),o=n(1283),a=n(1982);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},function(e,t,n){var r=n(2552),o=n(2553),a=n(2554),i=n(2555),c=n(2556);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=i,u.prototype.set=c,e.exports=u},function(e,t,n){var r=n(1285);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(1285),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(1285),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(1285);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(1286);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(1286);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(1286);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(1286);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t,n){var r=n(1282),o=n(2148),a=n(2566),i=n(2568),c=n(1175),u=n(269),l=n(1173),s=n(1280),f="[object Arguments]",d="[object Array]",p="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,h,y,v){var b=u(e),g=u(t),_=b?d:c(e),w=g?d:c(t),E=(_=_==f?p:_)==p,O=(w=w==f?p:w)==p,x=_==w;if(x&&l(e)){if(!l(t))return!1;b=!0,E=!1}if(x&&!E)return v||(v=new r),b||s(e)?o(e,t,n,h,y,v):a(e,t,_,n,h,y,v);if(!(1&n)){var j=E&&m.call(e,"__wrapped__"),k=O&&m.call(t,"__wrapped__");if(j||k){var S=j?e.value():e,C=k?t.value():t;return v||(v=new r),y(S,C,n,h,v)}}return!!x&&(v||(v=new r),i(e,t,n,h,y,v))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(1005),o=n(2149),a=n(960),i=n(2148),c=n(2567),u=n(1985),l=r?r.prototype:void 0,s=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=c;case"[object Set]":var m=1&r;if(p||(p=u),e.size!=t.size&&!m)return!1;var h=d.get(e);if(h)return h==t;r|=2,d.set(e,t);var y=i(p(e),p(t),r,l,f,d);return d.delete(e),y;case"[object Symbol]":if(s)return s.call(e)==s.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(2150),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,c){var u=1&n,l=r(e),s=l.length;if(s!=r(t).length&&!u)return!1;for(var f=s;f--;){var d=l[f];if(!(u?d in t:o.call(t,d)))return!1}var p=c.get(e),m=c.get(t);if(p&&m)return p==t&&m==e;var h=!0;c.set(e,t),c.set(t,e);for(var y=u;++f<s;){var v=e[d=l[f]],b=t[d];if(a)var g=u?a(b,v,d,t,e,c):a(v,b,d,e,t,c);if(!(void 0===g?v===b||i(v,b,n,a,c):g)){h=!1;break}y||(y="constructor"==d)}if(h&&!y){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(h=!1)}return c.delete(e),c.delete(t),h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},function(e,t,n){var r=n(956)(n(603),"DataView");e.exports=r},function(e,t,n){var r=n(956)(n(603),"Promise");e.exports=r},function(e,t,n){var r=n(956)(n(603),"WeakMap");e.exports=r},function(e,t,n){var r=n(2154),o=n(837);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,r(i)]}return t}},function(e,t,n){var r=n(1984),o=n(56),a=n(2156),i=n(1988),c=n(2154),u=n(2155),l=n(1009);e.exports=function(e,t){return i(e)&&c(t)?u(l(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?a(n,e):r(t,i,3)}}},function(e,t,n){var r=n(2576),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,r,o){t.push(r?o.replace(a,"$1"):n||e)})),t}));e.exports=i},function(e,t,n){var r=n(2577);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(1983);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=e.apply(this,r);return n.cache=a.set(o,i)||a,i};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(2158),o=n(2580),a=n(1988),i=n(1009);e.exports=function(e){return a(e)?r(i(e)):o(e)}},function(e,t,n){var r=n(1176);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(672);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var a=n.length,i=t?a:-1,c=Object(n);(t?i--:++i<a)&&!1!==o(c[i],i,c););return n}}},function(e,t,n){var r=n(957),o=n(837);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(957),o=n(1177);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(229),o=n(1281),a=n(2585),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var c in e)("constructor"!=c||!t&&i.call(e,c))&&n.push(c);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(957),o=n(1987);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(957),o=n(2163);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(1994),o=n(2590),a=n(2591),i=n(2592),c=n(2164);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(e,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return a(e);case"[object Symbol]":return i(e)}}},function(e,t,n){var r=n(1994);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(1005),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},function(e,t,n){var r=n(229),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){var r=n(2595),o=n(955),a=n(1979),i=a&&a.isMap,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(1175),o=n(558);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(2597),o=n(955),a=n(1979),i=a&&a.isSet,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(1175),o=n(558);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},function(e,t,n){var r=n(2167),o=n(2162),a=n(2164),i=n(1992),c=n(2165),u=n(1172),l=n(269),s=n(958),f=n(1173),d=n(1980),p=n(229),m=n(111),h=n(1280),y=n(2168),v=n(923);e.exports=function(e,t,n,b,g,_,w){var E=y(e,n),O=y(t,n),x=w.get(O);if(x)r(e,n,x);else{var j=_?_(E,O,n+"",e,t,w):void 0,k=void 0===j;if(k){var S=l(O),C=!S&&f(O),N=!S&&!C&&h(O);j=O,S||C||N?l(E)?j=E:s(E)?j=i(E):C?(k=!1,j=o(O,!0)):N?(k=!1,j=a(O,!0)):j=[]:m(O)||u(O)?(j=E,u(E)?j=v(E):p(E)&&!d(E)||(j=c(O))):k=!1}k&&(w.set(O,j),g(j,O,b,_,w),w.delete(O)),r(e,n,j)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(2601),o=n(2161),a=n(1006),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var o=n(),a=16-(o-r);if(r=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(603);e.exports=function(){return r.Date.now()}},function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},function(e,t){e.exports=function(e,t,n,r){for(var o=-1,a=null==e?0:e.length;++o<a;){var i=e[o];t(r,i,n(i),e)}return r}},function(e,t,n){var r=n(1990);e.exports=function(e,t,n,o){return r(e,(function(e,r,a){t(o,e,n(e),a)})),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}},function(e,t){var n=!1;"doc_embed"!==new URLSearchParams(window.location.search).get("view")||n||(document.body.classList.add("lark_doc_embed"),n=!0)},function(e,t,n){var r=n(2178),o=n(2156);e.exports=function(e,t){return r(e,t,(function(t,n){return o(e,n)}))}},function(e,t,n){var r=n(1005),o=n(1172),a=n(269),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(2153),o=n(2614),a=n(1985),i=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},function(e,t){e.exports=function(){}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(2121).PLATFORMS.reduce((function(e,t){return e[t]=t,e}),{});e.exports={REGISTER_FROM:o(o({},i),{},{telephone:"telephone",miniapp:"miniapp",unknown:"unknown",servicify:"servicify"}),UIA_ROBOTS:{pre:{org_admin_11:"17681955532+1",org_admin_12:"17681955532+2",org_member_13:"17681955532+3",org_member_14:"17681955532+4",org_member_15:"17681955532+5",org_member_16:"17681955532+6",org_member_17:"17681955532+50",org_member_18:"17681955532+51",org_admin_31:"17681955532+11",org_member_32:"17681955532+12",org_admin_33:"15267129258+50",org_admin_34:"15267129258+51",org_admin_46:"13208013856+6",org_admin_21:"13367184133+1",org_admin_22:"13367184133+2",org_admin_23:"13367184133+3",org_admin_24:"13367184133+4",org_admin_25:"13367184133+5",org_admin_26:"13367184133+6",org_admin_27:"13367184133+7",org_admin_28:"13367184133+9"},test:{org_admin:"17681955532+1",org_member:"17681955532+2"}}}},function(e,t,n){"use strict";e.exports={ACTION:{SHOW_DOC:"show",SHOW_SHARE_DOC:"show_share_doc",DOWNLOAD_ATTACHMENT:"download",PREVIEW_ATTACHMENT:"preview",EXPORT_BOOK_TO_PDF:"export_book_to_pdf",EXPORT_BOOK_TO_LAKEBOOK:"export_book_to_lakeBook",EXPORT_DOC_TO_PDF:"export_doc_to_pdf",EXPORT_DOC_TO_JPG:"export_doc_to_jpg",EXPORT_DOC_TO_DOCX:"export_doc_to_docx",EXPORT_DOC_TO_MARKDOWN:"export_doc_to_markdown",EXPORT_DOC_TO_LAKE:"export_doc_to_lake",EXPORT_SHEET_TO_XLSX:"export_sheet_to_xlsx",EXPORT_SHEET_TO_LAKESHEET:"export_sheet_to_lakesheet",EXPORT_TABLE_TO_XLSX:"export_table_to_xlsx",EXPORT_MIND_TO_LAKEMIND:"export_mind_to_lakemind",EXPORT_MIND_TO_LAKEBOARD:"export_mind_to_lakeboard",EXPORT_SHOW_TO_LAKESHOW:"export_show_to_lakeshow",EXPORT_TABLE_TO_LAKETABLE:"export_table_to_laketable",UPDATE_REPO_TOC:"toc",UPDATE_REPO_INFO:"update_repo_info",PREVIEW_OFFICE_FILE:"preview_office_file",DOWNLOAD_RESOURCE:"download_resource",PREVIEW_RESOURCE:"preview_resource",SHOW_RESOURCE:"show_resource",PREVIEW_VIDEO:"preview_video",UPLOAD_ATTACHMENT_DIRECTLY:"upload_attachment_directly"}}},function(e,t,n){"use strict";e.exports={BEHAVIOR:{upload:"upload",download:"download",view:"view",share:"share",delete:"delete",sendout:"sendout"}}},function(e,t,n){"use strict";e.exports={ALLOW_TYPES:["topic","book","doc","artboard","group","user","resource","note","content"],VP_ALLOW_TYPES:["doc"]}},function(e,t,n){"use strict";e.exports={OBJECT_TYPES:["book","group","space","organization","list","review"],OBJECT_TYPES_MAP:{book:"book",group:"group",space:"space",organization:"organization",list:"list",review:"review"},ACTION_NAMES_MAP:{create:"创建",publish:"发布",update:"更新",delete:"删除",resource_upload:"上传",resource_replace:"替换",resource_delete:"删除"},VAILID_TYPES:["doc_notify","doc_publish","doc_update","doc_delete","comment_create","comment_update","comment_delete","comment_reply_create","comment_reply_update","comment_reply_delete","audit_log_create","resource_upload","resource_replace","resource_delete","new_review","complete_review","cancel_review"]}},function(e,t,n){"use strict";e.exports={PUBLIC:{private:0,public:1,intranet:2},ALLOW_FORMAT:["markdown","lake"],MAX_PIN:20}},function(e,t,n){"use strict";e.exports={ALLOW_ACTION_TYPES:["mark"]}},function(e,t,n){"use strict";e.exports={ALLOW_SUBJECTS:["User","Group"]}},function(e,t,n){"use strict";e.exports={ALLOW_TYPES:["Group"]}},function(e,t,n){"use strict";t.ALLOW_TYPES={publish:"publish"}},function(e,t,n){"use strict";t.TYPES={removeMember:"remove_member"}},function(e,t,n){"use strict";var r={password:"password",sms:"sms",miniApp:"miniApp",alipay:"alipay"},o=Object.values(r),a={password:"password",sms:"sms",alipay:"alipay",apple:"apple",wechat:"wechat",dingtalk:"dingtalk"},i=Object.values(a);e.exports={LOGIN_TYPES_MAP:r,LOGIN_TYPES:o,MOBILE_LOGIN_TYPES_MAP:a,MOBILE_LOGIN_TYPES:i}},function(e,t,n){"use strict";e.exports={STATUS:{enable:0,disable:1}}},function(e,t,n){"use strict";e.exports={ALLOW_TARGET_TYPE:["Book","Doc","ArtboardGroup"]}},function(e,t,n){"use strict";var r=n(180),o=1048576;e.exports={ALLOW_TYPES:["image","attachment","video"],ALLOW_ATTACH_TYPES:["User","Doc","Topic","Artboard","Book","Resource","Doclet","Note","Comment","Issue"],ALLOW_VIDEO_TYPES:["Doc","Topic","Doclet","User","Book"],TYPE_TO_SCOPE:{Doc:"doc",Topic:"topic",Artboard:"artboard"},ALLOW_RAW_EXTNAMES:r,OCR_TOGGLE:["on","off"],LARGE_LIMIT_FILES:[".sketch",".key",".psd"],OFFLINE_PREVIEW_FILES:[".xd",".edx",".eddx",".dwg"],MAX_LARGE_PREVIEW_SIZE:500*o,MAX_PREVIEW_SIZE:200*o,MAX_IMM_PREVIEW_SIZE:200*o}},function(e,t,n){"use strict";e.exports={CARD_NAME:{image:"image",file:"file",math:"math",diagram:"diagram",localdoc:"localdoc",lockedtext:"lockedtext",video:"video",riddle:"riddle",mindmap:"mindmap",yuque:"yuque",calendar:"calendar",dataTable:"dataTable"},CARD_DISPLAY_TYPE:{inline:"inline",block:"block"},SAVE_TYPE:{FORCE:1,AUTO:2,USER_SAVE:3,USER_PUBLISH:4,USER_SAVE_AS_VERSION:5,USER_SAVE_AS_TEMPLATE:6}}},function(e,t,n){"use strict";t.STATUS={inactive:0,active:1,suspect:2}},function(e,t,n){"use strict";e.exports={STATUS:{INITIAL:0,DELETED:1,REVERTED:2},PERSONAL_TARGET_TYPES:["Doc","ArtboardGroup","Book","User","Resource","Note","Template","Artboard"],GROUP_TARGET_TYPES:["Doc","Book","Resource","Template","Artboard"]}},function(e,t,n){"use strict";e.exports={STATUS:{normal:0,illegal:1},TIMEOUT_DURATION:10800,ALI_VIDEO_QUERY_RESULT_CODE:{PASSED:6,REJECTED:5,TRANSCODE_FAILED:3},FORMAT:{video:"video",audio:"audio"}}},function(e,t,n){"use strict";e.exports={ModelTypes:{book:"Book",doc:"Doc",artboard:"Artboard",artboard_group:"ArtboardGroup",group:"User",user:"User",notification:"Notification",event:"Event",asset:"Asset",topic:"Topic",resource:"Resource",doc_version:"DocVersion"}}},function(e,t,n){"use strict";e.exports={COUPON_STATUS:{initialized:0,verificated:1,invalid:-1}}},function(e,t,n){"use strict";t.ACTIONS={create:"Create",edit:"Edit",update:"Update",join:"Join",collab:"Collab",collect:"Collect",follow:"Follow",comment:"Comment",apply:"apply"},t.SUBJECT_TYPES={user:"User",group:"Group",book:"Book",doc:"Doc",design:"Design",column:"Column",sheet:"Sheet",resource:"Resource",thread:"Thread",mind:"Mind",board:"Board",show:"Show",table:"Table",publication:"Publication",docVersion:"DocVersion",artboardGroup:"ArtboardGroup"}},function(e,t,n){"use strict";e.exports={TYPE:{OriginalCertification:"original_certification",Premium:"premium"},STATUS:{init:0,applying:1,settling:101,success:2,fail:3},ERROR_CODE:{AUDIT_ERROR:"AUDIT_ERROR"}}},function(e,t,n){"use strict";e.exports={STATUS:{normal:0,illegal:0}}},function(e,t,n){"use strict";var r=["create","update","delete","create_doc","update_toc","read","read_private","export","export_doc","manage","join","share","modify_setting","create_collaborator","download"],o=["create","delete","update","read","read_origin","export","manage","join","share","force_delete","create_collaborator"],a=["update","create","delete","read"],i=["update","create","delete","read"],c=["read","read_private","create_book","update","delete","join","manage","create_member","restore"],u=["read","create","update","delete"],l=["read","close","delete"],s=["create","read","update","delete"],f=["update","delete"],d=["read","update"],p=["read","update","delete","pin","assign"],m=["read","update","delete"],h=["read","update"],y=["read","create","download"],v=["update"],b=["read","update","create","delete","accept"],g=["read","read_home","update","delete"],_=["read","create","delete","update"],w=["read"],E=["create","update"],O=["create","update","delete"],x=["create","update","delete"],j=["read","create","delete","update"],k=["read"],S=["delete"],C=function(e){return e.reduce((function(e,t){return e[t]=t,"delete"===t&&(e.destroy="destroy"),e}),{})};e.exports={BOOK_ACTIONS:r,DOC_ACTIONS:o,ARTBOARD_ACTIONS:a,ASSET_ACTIONS:i,GROUP_ACTIONS:c,GROUP_USER_ACTIONS:u,ARTBOARD_COMMENT_ACTIONS:l,COMMENT_ACTIONS:s,SITE_ACTIONS:f,LABEL_ACTIONS:d,TOPIC_ACTIONS:p,MILESTONE_ACTIONS:m,VERSION_ACTIONS:h,ATTACHMENT_ACTIONS:y,APPLICATION_ACTIONS:v,COLLABORATION_ACTIONS:b,ORGANIZATION_ACTIONS:g,ORGANIZATION_USER_ACTIONS:_,SHARE_ACTIONS:w,HEADLINE_ACTIONS:E,BOOK_STACK_ACTIONS:O,QUICK_LINK_ACTIONS:x,RESOURCE_ACTIONS:j,RESOURCE_VERSION_ACTIONS:k,RECYCLE_ACTIONS:S,BOOK_ACTION:C(r),DOC_ACTION:C(o),ARTBOARD_ACTION:C(a),ASSET_ACTION:C(i),GROUP_ACTION:C(c),GROUP_USER_ACTION:C(u),ARTBOARD_COMMENT_ACTION:C(l),COMMENT_ACTION:C(s),SITE_ACTION:C(f),LABEL_ACTION:C(d),TOPIC_ACTION:C(p),MILESTONE_ACTION:C(m),VERSION_ACTION:C(h),ATTACHMENT_ACTION:C(y),APPLICATION_ACTION:C(v),COLLABORATION_ACTION:C(b),ORGANIZATION_ACTION:C(g),ORGANIZATION_USER_ACTION:C(_),SHARE_ACTION:C(w),HEADLINE_ACTION:C(E),BOOK_STACK_ACTION:C(O),QUICK_LINK_ACTION:C(x),RESOURCE_ACTION:C(j),RESOURCE_VERSION_ACTION:C(k),RECYCLE_ACTION:C(S),QUAN_ACTIONS:C(["read","delete","modify_setting","update","create_item","create_user","apply_user","approve_user","create_source","apply_source","approve_source"]),QUAN_ITEM_ACTIONS:C(["update","delete"]),QUAN_USER_ACTIONS:C(["update","delete"]),QUAN_SOURCE_ACTIONS:C(["update","delete"])}},function(e,t,n){"use strict";e.exports={SUPPORT_GRAPH_TYPES:["puml","latex","mermaid","flowchart","graphviz"]}},function(e,t,n){"use strict";e.exports={SYNC_STATUS:{antpdm_to_aliyun_success:"antpdm_to_aliyun_success",aliyun_to_antpdm_success:"aliyun_to_antpdm_success"}}},function(e,t,n){"use strict";e.exports={INTERNAL_WORKER_HOST:"yuque.alibaba-inc.com",ENDECRYPT_TYPE:{legacy:void 0,unencrypted:1,encrypted:2}}},function(e,t,n){"use strict";e.exports={STATUS:{enabled:1,disabled:0,deleted:-1},READ_STATUS:{init:0,ok:1,suspect:98,illegal:99,banned:100},TYPE:{grid:"GRID",form:"FORM",card:"CARD",kanban:"KANBAN",taskList:"TASK_LIST",checkIn:"CHECK_IN"},READ_AUTHORIZE_TYPE:["CHECK_IN"],LOAD_TYPE:{async:0,sync:1}}},function(e,t,n){"use strict";var r={TYPES:{doc:"Doc",link:"Link"},STATUS:{normal:0,disabled:1,recommended:9},RANK:{updated:"updated",hot:"hot"},TAB:{created:"created",all:"all",marked:"marked",recommended:"recommended"},MAX_CREATE_COUNT:100,MAX_ITEM_COUNT:1e3,DEFAULT_LOGO:"https://gw.alipayobjects.com/mdn/rms_5b1385/afts/img/A*fIYKRaC3O3EAAAAAAAAAAAAAARQnAQ"};r.ALLOWED_TYPES=Object.values(r.TYPES),r.ALLOWED_TABS=Object.values(r.TAB),r.ALLOWED_RANKS=Object.values(r.RANK),e.exports=r},function(e,t,n){"use strict";e.exports={CONNECTOR_TYPE:{ANTAONE_PROJECT:"antaone_project",AONE_PROJECT:"aone_project",PRODUCT_CODE:"product_code",MY_OKR:"my_okr"},TARGET_TYPE:{User:"User",Review:"Review",Book:"Book"}}},function(e,t,n){"use strict";e.exports={GROUP_PERMISSION:{create_member:!0,create_book:!0,create_book_collaborator:!1,modify_book_setting:!1,share_book:!0,export_book:!0,share_doc:!0,export_doc:!0,force_delete_doc:!1},BOOK_PERMISSION:{create_book_collaborator:!1,modify_book_setting:!1,share_book:!0,export_book:!0,share_doc:!0,export_doc:!0,force_delete_doc:!1,readonly_can_download:!0},ORGANIZATION_PERMISSION:{indirect_add_org_member:!1,create_group:!0}}},function(e,t,n){"use strict";e.exports={SOURCE_TYPE:["JoinToken","User","Corp","CustomPassport"]}},function(e,t,n){"use strict";var r=n(2056),o={TYPES:{Organization:"Organization",Group:"User",Publication:"User",User:"User",Book:"Book",Doc:"Doc"}};o.ALLOWED_TYPES=r.uniq(Object.values(o.TYPES)),e.exports=o},function(e,t,n){"use strict";var r={PUNISH_TYPE:{User:"User",Group:"User",Book:"Book",Doc:"Doc",Comment:"Comment",Organization:"Organization",Profile:"Profile"}};r.ALLOWED_PUNISH_TYPES=Object.keys(r.PUNISH_TYPE),e.exports=r},function(e,t,n){"use strict";e.exports={TASK:{TF:"tf"}}},function(e,t,n){"use strict";e.exports={CONTENT_STYLE:".lake-content[typography='classic']{line-height:1.74;letter-spacing:.008em;color:#262626;font-size:15px}.lake-content[typography='classic'] .ne-table{line-height:1.74}.lake-content[typography='traditional']{line-height:1.74;letter-spacing:.05em;color:#262626;font-size:14px}.lake-content[typography='traditional'] .ne-table{line-height:1.74}.lake-content .ne-code{font-family:monospace;font-size:inherit;background-color:rgba(0,0,0,0.06);padding:0 2px;border:1px solid rgba(0,0,0,0.08);border-radius:2px 2px;line-height:inherit;overflow-wrap:break-word;text-indent:0}.lake-content[typography='classic'] h1{font-size:28px;margin:26px 0 10px 0}.lake-content[typography='classic'] h1:first-child{margin-top:0}.lake-content[typography='classic'] h2{font-size:24px;margin:21px 0 5px 0}.lake-content[typography='classic'] h2:first-child{margin-top:0}.lake-content[typography='classic'] h3{font-size:20px;margin:16px 0 5px 0}.lake-content[typography='classic'] h3:first-child{margin-top:0}.lake-content[typography='classic'] h4{font-size:16px;margin:10px 0 5px 0}.lake-content[typography='classic'] h4:first-child{margin-top:0}.lake-content[typography='classic'] h5{font-size:15px;margin:8px 0 5px 0}.lake-content[typography='classic'] h5:first-child{margin-top:0}.lake-content[typography='classic'] h6{font-size:15px;margin:8px 0 5px 0}.lake-content[typography='classic'] h6:first-child{margin-top:0}.lake-content[typography='traditional'] h1{font-size:28px;margin:7px 0}.lake-content[typography='traditional'] h1:first-child{margin-top:0}.lake-content[typography='traditional'] h2{font-size:24px;margin:7px 0}.lake-content[typography='traditional'] h2:first-child{margin-top:0}.lake-content[typography='traditional'] h3{font-size:20px;margin:7px 0}.lake-content[typography='traditional'] h3:first-child{margin-top:0}.lake-content[typography='traditional'] h4{font-size:16px;margin:7px 0}.lake-content[typography='traditional'] h4:first-child{margin-top:0}.lake-content[typography='traditional'] h5{font-size:14px;margin:7px 0}.lake-content[typography='traditional'] h5:first-child{margin-top:0}.lake-content[typography='traditional'] h6{font-size:14px;margin:7px 0}.lake-content[typography='traditional'] h6:first-child{margin-top:0}.lake-content .ne-quote{margin:5px 0;padding-left:1em;margin-left:0;border-left:3px solid #EFF0F0;opacity:.7}.lake-content .ne-table{table-layout:fixed;border-collapse:collapse;border:1px solid #D8DAD9;margin:18px 0 16px 0}.lake-content .ne-table tr{border:1px solid #D8DAD9;height:33px}.lake-content .ne-table td{border:1px solid #D8DAD9;vertical-align:top;padding:4px 8px}.lake-content .ne-table.no-border{border:none}.lake-content .ne-table.no-border tr,.lake-content .ne-table.no-border td{border:none}.lake-content .ne-p{margin:0;padding:0;min-height:24px}.lake-content .ne-alert{display:block;margin:4px 0;padding:10px;border-radius:4px;color:#262626;border:1px solid #B5E8F2;background-color:#F4F5F5}.lake-content .ne-alert[data-type='info']{border:1px solid #B5E8F2;background-color:#F4F5F5}.lake-content .ne-alert[data-type='warning']{border:1px solid #F9EFCD;background-color:#F9EFCD}.lake-content .ne-alert[data-type='success']{border:1px solid #E8F7CF;background-color:#DAF6EA}.lake-content .ne-alert[data-type='danger']{border:1px solid #F8CED3;background-color:#FBE4E7}.lake-content .ne-alert[data-type='tips']{border:1px solid #BEC0BF;background-color:#F6E5AC}.lake-content .ne-link{color:#1672F3}.lake-content .ne-link .ne-text{color:#1672F3 !important}.lake-content .ne-card-file{word-wrap:break-word;color:#1672F3;touch-action:manipulation;text-decoration:none;outline:none;cursor:pointer}.lake-content .ne-card-file[data-type='info']{border:1px solid #B5E8F2;background-color:#F4F5F5}.lake-content .ne-card-file[data-type='warning']{border:1px solid #F9EFCD;background-color:#F9EFCD}.lake-content .ne-card-file[data-type='success']{border:1px solid #E8F7CF;background-color:#DAF6EA}.lake-content .ne-card-file[data-type='danger']{border:1px solid #F8CED3;background-color:#FBE4E7}.lake-content .ne-card-file[data-type='tips']{border:1px solid #BEC0BF;background-color:#F6E5AC}.lake-content .ne-ul,.lake-content .ne-ol,.lake-content .ne-tl{margin:0;padding-left:23px}.lake-content .ne-ul[ne-level='1'],.lake-content .ne-ol[ne-level='1'],.lake-content .ne-tl[ne-level='1']{margin-left:2em}.lake-content .ne-ul[ne-level='2'],.lake-content .ne-ol[ne-level='2'],.lake-content .ne-tl[ne-level='2']{margin-left:4em}.lake-content .ne-ul[ne-level='3'],.lake-content .ne-ol[ne-level='3'],.lake-content .ne-tl[ne-level='3']{margin-left:6em}.lake-content .ne-ul[ne-level='4'],.lake-content .ne-ol[ne-level='4'],.lake-content .ne-tl[ne-level='4']{margin-left:8em}.lake-content .ne-ul[ne-level='5'],.lake-content .ne-ol[ne-level='5'],.lake-content .ne-tl[ne-level='5']{margin-left:10em}.lake-content .ne-ul[ne-level='6'],.lake-content .ne-ol[ne-level='6'],.lake-content .ne-tl[ne-level='6']{margin-left:12em}.lake-content .ne-ul[ne-level='7'],.lake-content .ne-ol[ne-level='7'],.lake-content .ne-tl[ne-level='7']{margin-left:14em}.lake-content .ne-ul[ne-level='8'],.lake-content .ne-ol[ne-level='8'],.lake-content .ne-tl[ne-level='8']{margin-left:16em}.lake-content .ne-list-wrap{margin:0;padding-left:23px;list-style:none}.lake-content .ne-list-wrap [ne-level='1']{margin-left:0}.lake-content .ne-list-wrap [ne-level='2']{margin-left:0}.lake-content .ne-list-wrap [ne-level='3']{margin-left:0}.lake-content .ne-list-wrap [ne-level='4']{margin-left:0}.lake-content .ne-list-wrap [ne-level='5']{margin-left:0}.lake-content .ne-list-wrap [ne-level='6']{margin-left:0}.lake-content .ne-list-wrap [ne-level='7']{margin-left:0}.lake-content .ne-list-wrap [ne-level='8']{margin-left:0}.lake-content .ne-ol[ne-level='1'],.lake-content .ne-ol[ne-level='4'],.lake-content .ne-ol[ne-level='7']{list-style:lower-alpha}.lake-content .ne-ol[ne-level='2'],.lake-content .ne-ol[ne-level='5'],.lake-content .ne-ol[ne-level='8']{list-style:lower-roman}.lake-content .ne-ul[ne-level='1'],.lake-content .ne-ul[ne-level='4'],.lake-content .ne-ul[ne-level='7']{list-style:circle}.lake-content .ne-ul[ne-level='2'],.lake-content .ne-ul[ne-level='5'],.lake-content .ne-ul[ne-level='8']{list-style:square}.lake-content .ne-tl{list-style:none;padding-left:0}.lake-content .ne-label{margin:0 1px;border-radius:4px;padding:0 3px;border:2px solid #FFFFFF}.lake-content .ne-label[data-color='0']{color:#8F0515;background:#FBE4E7}.lake-content .ne-label[data-color='1']{color:#523F00;background:#F6E5AC}.lake-content .ne-label[data-color='2']{color:#2A4200;background:#E8F7CF}.lake-content .ne-label[data-color='3']{color:#585A5A;background:#E8E9E8}.lake-content .ne-label[data-color='4']{color:#074192;background:#CEF1F7}.lake-content .ne-label[data-color='5']{color:#270070;background:#D9E8FC}.lake-content .ne-codeblock{color:#585A5A;margin:0;padding:15px;border-radius:4px;background:#FAFAFA}.lake-content .ne-hr{margin:18px 0;background-color:#E8E9E8;border:1px solid transparent}.lake-content .ne-text-diagram pre{border:1px solid #E8E9E8;border-radius:2px;background:#FAFAFA;padding:16px;font-size:13px;color:#585A5A}.lake-content .ne-mark{background-color:#F3C52F !important;padding:0;margin:0 1px}.lake-content .ne-mark .ne-text{color:inherit !important;background:none !important}.lake-columns{display:flex}.lake-column-item{margin-right:12px}.lake-column-item:last-child{margin-right:0}@media only screen and (max-width:768px){.lake-columns{display:block !important}.lake-column-item{margin-right:0 !important}}"}},function(e,t,n){"use strict";e.exports={FORBIDDEN_MAP:{User:["name","description","avatar","login"],Group:["name","description","avatar","login"],Profile:["location","job_title","department"],Book:["name","description","announcement","cover","slug"],Organization:["name","description","logo","slug"]}}},function(e,t,n){"use strict";e.exports={USER_TYPE:{CREATOR:1,INTERNAL_ADMINISTRATOR:2,EXTERNAL_ADMINISTRATOR:3,HIERARCHICAL_ADMINISTRATOR:4,MEMBER:5}}},function(e,t,n){"use strict";e.exports={PUSH_TYPE:{notification:"notification"}}},function(e,t,n){"use strict";var r={VISIBLE:1,HIDDEN:0};e.exports={PUBLICATION_BANNER_STYLES:{COMPACT:"compact",LOOSE:"loose"},PUBLICATION_BANNER_BG:{VISIBLE:1,HIDDEN:0},AUTHOR_VISIBILITY:r,AUTHOR_LIST_TYPE:{normal:{name:"normal",authorize:"read",groupUsersWhereArg:{visibility:r.VISIBLE}},manager:{name:"manager",authorize:"update",groupUsersWhereArg:{}}},TOPIC_ENABLE:{disable:0,public:1,private:2},RESOURCE_ENABLE:{disable:0,enable:1},THREAD_ENABLE:{disable:0,enable:1},ROLE_FOR_ADD_MEMBER:{owner:0,member:1}}},function(e,t,n){"use strict";e.exports={ACTIVITIES:{APP_ACQUISITION_TEST:{id:"APP_ACQUISITION_TEST",maxTimes:3,rightsType:"member",memberDays:10,start_at:"2022-01-01",end_at:"2032-01-01"},APP_ACQUISITION:{id:"APP_ACQUISITION",maxTimes:12,rightsType:"member",memberDays:92,start_at:"2022-01-01",end_at:"2032-01-01"},WECHAT_FOLLOW_BIND_TEST:{id:"WECHAT_FOLLOW_BIND_TEST",rightsType:"member",memberDays:10,start_at:"2022-01-01",end_at:"2032-01-01"},WECHAT_FOLLOW_BIND:{id:"WECHAT_FOLLOW_BIND",rightsType:"member",memberDays:92,start_at:"2022-01-01",end_at:"2032-01-01"}}}},function(e,t,n){"use strict";e.exports={MSG_TYPE:{EVENT:"event",TEXT:"text",IMAGE:"image",VOICE:"voice",VIDEO:"video",SHORT_VIDEO:"shortvideo",LOCATION:"location",LINK:"link"},NOTE_MSG_TYPES:["text","image","voice","shortvideo","video","location","link"],EVENT_TYPE:{SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",SCAN:"SCAN"},SCAN_SCENE:{BIND:"bind",LOGIN:"login"}}},function(e,t,n){"use strict";e.exports={APP:{yuque:"yuque",baiyan:"baiyan",antcode:"antcode",yuyan:"yuyan",aone:"aone",linke:"linke",teambition:"teambition"},CONCEPT:{Doc:"Doc",Sheet:"Sheet",Table:"Table",Board:"Board",Issue:"Issue",Project:"Project",SourceCodeRepository:"SourceCodeRepository",SourceCodeCommit:"SourceCodeCommit",SourceCodePullRequest:"SourceCodePullRequest",SoftwareDevelopmentIteration:"SoftwareDevelopmentIteration",Person:"Person",OrganizationUnit:"OrganizationUnit",KnowledgeBase:"KnowledgeBase"}}},function(e,t,n){"use strict";e.exports={TABLE_ID:8585,FIELD_ID:{category:10001,appeal:10002,features:10003,responders:10004,cc:10005,responded:10006,isFollowing:10007,remark:10008,ip:10009,ua:10010,orgs:10011},CATEGORY_OPTION_ID:{suggestion:20001,bug:20002,appeal:20003},APPEAL_OPTION_ID:{blockedDoc:20004,blockedBook:20005,blockedAccount:20006},FEATURES_OPTION_ID:{space:20007,group:20008,book:20009,digitalGarden:20010,editor:20011,note:20012,mobile:20013,desktop:20014,account:20015,platform:20016,microOptimization:20017,others:20018,interest:20019,extranetSkylark:20020,nonYuque:20021}}},function(e,t,n){"use strict";e.exports={PLATFORM:{unknown:0,android:1,ios:2},STATUS:{init:0,activated:1},ATTRIBUTION:{none:0,exists:1}}},function(e,t,n){"use strict";var r={SOURCE_TYPES:{domainEvent:1},EVENT_TYPES:{contentSecurity:1,searchEngine:2,skylink:3,decryptedContent:4},STATUS:{discard:-1,init:0,fetched:1,success:2,failed:3,timeout:10,overexcute:11},RUN_INTERVAL:10,STEP_FETCHED_NUM:500,MAX_FETCHED_NUM:2e3,STOP_FETCHED_NUM:1e4,TASK_RETRY_TIMES:1,TASK_TIMEOUT:1800};r.EVENT_TYPES_MAP=Object.keys(r.EVENT_TYPES).reduce((function(e,t){return e[r.EVENT_TYPES[t]]=t,e}),{}),e.exports=r},function(e,t,n){"use strict";e.exports={BOSS_TYPE:{OLD:"OLD",IF:"IF"},VOUCHER_SCENE_CODE:{ADMIN_OFFER:"ADMIN_OFFER",FIRST_ORDER_OFFER:"FIRST_ORDER_OFFER",ACTIVITY_OFFER:"ACTIVITY_OFFER",FIRST_100_DOCS_OFFER:"FIRST_100_DOCS_OFFER"},VOUCHER_CATEGORY:{member:0,space:1},VOUCHER_TYPE:{pay:0,coupon:1,invoice:2,refund:3,trial:4,exchange:5,gift:6},VOUCHER_SUBTYPE:{none:0,buy:1,upgrade:2,renew:3,buyMember:4,data:5,downgrade:6,cashCoupon:10,discountCoupon:11,dayGiftCoupon:12,dayGiftCoupon90:13,normalInvoice:20,specialInvoice:21},VOUCHER_STATUS:{initialized:0,finished:2},EQUITY_DIRECTION:{set:0,increase:1,decrease:-1},EQUITY_TYPE:{common:0,duration:1,traffic:2,memberSize:3,level:4},INST_ID:{Z69:"Z69",Z97:"Z97"}}},function(e,t,n){var r=n(604);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(l,e);var t,n,r,u=c(l);function l(){return o(this,l),u.apply(this,arguments)}return t=l,(n=[{key:"getPrivacyValue",value:function(){var e=this.target;return e?this.isYuque?e.public:this.PRIVACY.intranet_all:this.PRIVACY.private}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(n(1201));e.exports=s},function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var s=n(1201),f=n(2187),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(l,e);var t,n,r,u=c(l);function l(){return o(this,l),u.apply(this,arguments)}return t=l,(n=[{key:"getPrivacyValue",value:function(){var e=this.target;if(!e)return this.PRIVACY.private;var t=this.getBelongPrivacy();return e.public===this.PRIVACY.public?t.getPrivacyValue():this._restrictPrivacy(e.public,t.getPrivacyValue())}},{key:"getBelongTarget",value:function(){return this.book}},{key:"getBelongPrivacy",value:function(){return this.bookPrivacy||(this.bookPrivacy=new f(Object.assign(this.options,{type:"book",target:this.book}))),this.bookPrivacy}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(s);e.exports=d},function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(l,e);var t,n,r,u=c(l);function l(){return o(this,l),u.apply(this,arguments)}return t=l,(n=[{key:"getPrivacyValue",value:function(){var e=this.isPublicCloud&&!this.isInOrg,t=this.org?this.org.public:this.PRIVACY.intranet_all;return e?this.PRIVACY.public:t}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(n(1201));e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};t.default=r},,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(2008),o=n(1291),a=n(2010),i=n(673);e.exports=function(e){return function(t){t=i(t);var n=o(t)?a(t):void 0,c=n?n[0]:t.charAt(0),u=n?r(n,1).join(""):t.slice(1);return c[e]()+u}}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+o+")"+"?",l="[\\ufe0e\\ufe0f]?",s=l+u+("(?:\\u200d(?:"+[a,i,c].join("|")+")"+l+u+")*"),f="(?:"+[a+r+"?",r,i,c,n].join("|")+")",d=RegExp(o+"(?="+o+")|"+f+s,"g");e.exports=function(e){return e.match(d)||[]}},function(e,t,n){var r=n(2691),o=n(2692),a=n(2695),i=RegExp("['’]","g");e.exports=function(e){return function(t){return r(a(o(t).replace(i,"")),e,"")}}},function(e,t){e.exports=function(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}},function(e,t,n){var r=n(2693),o=n(673),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=o(e))&&e.replace(a,r).replace(i,"")}},function(e,t,n){var r=n(2694)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});e.exports=r},function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},function(e,t,n){var r=n(2696),o=n(2697),a=n(673),i=n(2698);e.exports=function(e,t,n){return e=a(e),void 0===(t=n?void 0:t)?o(e)?i(e):r(e):e.match(t)||[]}},function(e,t){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(n)||[]}},function(e,t){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return n.test(e)}},function(e,t){var n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+a+"]",c="\\d+",u="[\\u2700-\\u27bf]",l="["+r+"]",s="[^\\ud800-\\udfff"+a+c+n+r+o+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+o+"]",m="(?:"+l+"|"+s+")",h="(?:"+p+"|"+s+")",y="(?:['’](?:d|ll|m|re|s|t|ve))?",v="(?:['’](?:D|LL|M|RE|S|T|VE))?",b="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",g="[\\ufe0e\\ufe0f]?",_=g+b+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",f,d].join("|")+")"+g+b+")*"),w="(?:"+[u,f,d].join("|")+")"+_,E=RegExp([p+"?"+l+"+"+y+"(?="+[i,p,"$"].join("|")+")",h+"+"+v+"(?="+[i,p+m,"$"].join("|")+")",p+"?"+m+"+"+y,p+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",c,w].join("|"),"g");e.exports=function(e){return e.match(E)||[]}},,,,,,,,,,,,function(e,t,n){"use strict";var r=n(2711);e.exports=function(e,t,n){n=n||{},9===t.nodeType&&(t=r.getWindow(t));var o=n.allowHorizontalScroll,a=n.onlyScrollIfNeeded,i=n.alignWithTop,c=n.alignWithLeft,u=n.offsetTop||0,l=n.offsetLeft||0,s=n.offsetBottom||0,f=n.offsetRight||0;o=void 0===o||o;var d=r.isWindow(t),p=r.offset(e),m=r.outerHeight(e),h=r.outerWidth(e),y=void 0,v=void 0,b=void 0,g=void 0,_=void 0,w=void 0,E=void 0,O=void 0,x=void 0,j=void 0;d?(E=t,j=r.height(E),x=r.width(E),O={left:r.scrollLeft(E),top:r.scrollTop(E)},_={left:p.left-O.left-l,top:p.top-O.top-u},w={left:p.left+h-(O.left+x)+f,top:p.top+m-(O.top+j)+s},g=O):(y=r.offset(t),v=t.clientHeight,b=t.clientWidth,g={left:t.scrollLeft,top:t.scrollTop},_={left:p.left-(y.left+(parseFloat(r.css(t,"borderLeftWidth"))||0))-l,top:p.top-(y.top+(parseFloat(r.css(t,"borderTopWidth"))||0))-u},w={left:p.left+h-(y.left+b+(parseFloat(r.css(t,"borderRightWidth"))||0))+f,top:p.top+m-(y.top+v+(parseFloat(r.css(t,"borderBottomWidth"))||0))+s}),_.top<0||w.top>0?!0===i?r.scrollTop(t,g.top+_.top):!1===i?r.scrollTop(t,g.top+w.top):_.top<0?r.scrollTop(t,g.top+_.top):r.scrollTop(t,g.top+w.top):a||((i=void 0===i||!!i)?r.scrollTop(t,g.top+_.top):r.scrollTop(t,g.top+w.top)),o&&(_.left<0||w.left>0?!0===c?r.scrollLeft(t,g.left+_.left):!1===c?r.scrollLeft(t,g.left+w.left):_.left<0?r.scrollLeft(t,g.left+_.left):r.scrollLeft(t,g.left+w.left):a||((c=void 0===c||!!c)?r.scrollLeft(t,g.left+_.left):r.scrollLeft(t,g.left+w.left)))}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function a(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],r="scroll"+(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function i(e){return a(e)}function c(e){return a(e,!0)}function u(e){var t=function(e){var t,n=void 0,r=void 0,o=e.ownerDocument,a=o.body,i=o&&o.documentElement;return n=(t=e.getBoundingClientRect()).left,r=t.top,{left:n-=i.clientLeft||a.clientLeft||0,top:r-=i.clientTop||a.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=i(r),t.top+=c(r),t}var l=new RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i"),s=/^(top|right|bottom|left)$/;var f=void 0;function d(e,t){for(var n=0;n<e.length;n++)t(e[n])}function p(e){return"border-box"===f(e,"boxSizing")}"undefined"!=typeof window&&(f=window.getComputedStyle?function(e,t,n){var r="",o=e.ownerDocument,a=n||o.defaultView.getComputedStyle(e,null);return a&&(r=a.getPropertyValue(t)||a[t]),r}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(l.test(n)&&!s.test(t)){var r=e.style,o=r.left,a=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=o,e.runtimeStyle.left=a}return""===n?"auto":n});var m=["margin","border","padding"];function h(e,t,n){var r={},o=e.style,a=void 0;for(a in t)t.hasOwnProperty(a)&&(r[a]=o[a],o[a]=t[a]);for(a in n.call(e),t)t.hasOwnProperty(a)&&(o[a]=r[a])}function y(e,t,n){var r=0,o=void 0,a=void 0,i=void 0;for(a=0;a<t.length;a++)if(o=t[a])for(i=0;i<n.length;i++){var c=void 0;c="border"===o?o+n[i]+"Width":o+n[i],r+=parseFloat(f(e,c))||0}return r}function v(e){return null!=e&&e==e.window}var b={};function g(e,t,n){if(v(e))return"width"===t?b.viewportWidth(e):b.viewportHeight(e);if(9===e.nodeType)return"width"===t?b.docWidth(e):b.docHeight(e);var r="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?e.offsetWidth:e.offsetHeight,a=(f(e),p(e)),i=0;(null==o||o<=0)&&(o=void 0,(null==(i=f(e,t))||Number(i)<0)&&(i=e.style[t]||0),i=parseFloat(i)||0),void 0===n&&(n=a?1:-1);var c=void 0!==o||a,u=o||i;if(-1===n)return c?u-y(e,["border","padding"],r):i;if(c){var l=2===n?-y(e,["border"],r):y(e,["margin"],r);return u+(1===n?0:l)}return i+y(e,m.slice(n),r)}d(["Width","Height"],(function(e){b["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],b["viewport"+e](n))},b["viewport"+e]=function(t){var n="client"+e,r=t.document,o=r.body,a=r.documentElement[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}}));var _={position:"absolute",visibility:"hidden",display:"block"};function w(e){var t=void 0,n=arguments;return 0!==e.offsetWidth?t=g.apply(void 0,n):h(e,_,(function(){t=g.apply(void 0,n)})),t}function E(e,t,n){var r=n;if("object"!==(void 0===t?"undefined":o(t)))return void 0!==r?("number"==typeof r&&(r+="px"),void(e.style[t]=r)):f(e,t);for(var a in t)t.hasOwnProperty(a)&&E(e,a,t[a])}d(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);b["outer"+t]=function(t,n){return t&&w(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];b[e]=function(t,r){if(void 0===r)return t&&w(t,e,-1);if(t){f(t);return p(t)&&(r+=y(t,["padding","border"],n)),E(t,e,r)}}})),e.exports=r({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return u(e);!function(e,t){"static"===E(e,"position")&&(e.style.position="relative");var n=u(e),r={},o=void 0,a=void 0;for(a in t)t.hasOwnProperty(a)&&(o=parseFloat(E(e,a))||0,r[a]=o+t[a]-n[a]);E(e,r)}(e,t)},isWindow:v,each:d,css:E,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(e.overflow)for(var n in e)e.hasOwnProperty(n)&&(t.overflow[n]=e.overflow[n]);return t},scrollLeft:function(e,t){if(v(e)){if(void 0===t)return i(e);window.scrollTo(t,c(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(v(e)){if(void 0===t)return c(e);window.scrollTo(i(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},b)},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(2714)),o=v(n(2720)),a=v(n(2721)),i=v(n(2722)),c=v(n(2723)),u=v(n(2724)),l=v(n(2725)),s=v(n(2726)),f=v(n(2727)),d=v(n(2728)),p=v(n(2729)),m=v(n(2730)),h=v(n(2731)),y=v(n(2732));function v(e){return e&&e.__esModule?e:{default:e}}t.default={string:r.default,method:o.default,number:a.default,boolean:i.default,regexp:c.default,integer:u.default,float:l.default,array:s.default,object:f.default,enum:d.default,pattern:p.default,date:m.default,url:y.default,hex:y.default,email:y.default,required:h.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t,"string")&&!e.required)return n();a.default.required(e,t,r,c,o,"string"),(0,i.isEmptyValue)(t,"string")||(a.default.type(e,t,r,c,o),a.default.range(e,t,r,c,o),a.default.pattern(e,t,r,c,o),!0===e.whitespace&&a.default.whitespace(e,t,r,c,o))}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(367));t.default=function(e,t,n,o,a){(/^\s+$/.test(t)||""===t)&&o.push(r.format(a.messages.whitespace,e.fullField))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(367)),i=n(2196),c=(r=i)&&r.__esModule?r:{default:r};var u={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},l={integer:function(e){return l.number(e)&&parseInt(e,10)===e},float:function(e){return l.number(e)&&!l.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===(void 0===e?"undefined":o(e))&&!l.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(u.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(u.url)},hex:function(e){return"string"==typeof e&&!!e.match(u.hex)}};t.default=function(e,t,n,r,i){if(e.required&&void 0===t)(0,c.default)(e,t,n,r,i);else{var u=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(u)>-1?l[u](t)||r.push(a.format(i.messages.types[u],e.fullField,e.type)):u&&(void 0===t?"undefined":o(t))!==e.type&&r.push(a.format(i.messages.types[u],e.fullField,e.type))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(367));t.default=function(e,t,n,o,a){var i="number"==typeof e.len,c="number"==typeof e.min,u="number"==typeof e.max,l=t,s=null,f="number"==typeof t,d="string"==typeof t,p=Array.isArray(t);if(f?s="number":d?s="string":p&&(s="array"),!s)return!1;p&&(l=t.length),d&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?l!==e.len&&o.push(r.format(a.messages[s].len,e.fullField,e.len)):c&&!u&&l<e.min?o.push(r.format(a.messages[s].min,e.fullField,e.min)):u&&!c&&l>e.max?o.push(r.format(a.messages[s].max,e.fullField,e.max)):c&&u&&(l<e.min||l>e.max)&&o.push(r.format(a.messages[s].range,e.fullField,e.min,e.max))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(367));t.default=function(e,t,n,o,a){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&o.push(r.format(a.messages.enum,e.fullField,e.enum.join(", ")))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(367));t.default=function(e,t,n,o,a){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||o.push(r.format(a.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||o.push(r.format(a.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t)&&!e.required)return n();a.default.required(e,t,r,c,o),void 0!==t&&a.default.type(e,t,r,c,o)}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),(0,i.isEmptyValue)(t)&&!e.required)return n();a.default.required(e,t,r,c,o),void 0!==t&&(a.default.type(e,t,r,c,o),a.default.range(e,t,r,c,o))}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(367),a=n(515),i=(r=a)&&r.__esModule?r:{default:r};t.default=function(e,t,n,r,a){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t)&&!e.required)return n();i.default.required(e,t,r,c,a),void 0!==t&&i.default.type(e,t,r,c,a)}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t)&&!e.required)return n();a.default.required(e,t,r,c,o),(0,i.isEmptyValue)(t)||a.default.type(e,t,r,c,o)}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t)&&!e.required)return n();a.default.required(e,t,r,c,o),void 0!==t&&(a.default.type(e,t,r,c,o),a.default.range(e,t,r,c,o))}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t)&&!e.required)return n();a.default.required(e,t,r,c,o),void 0!==t&&(a.default.type(e,t,r,c,o),a.default.range(e,t,r,c,o))}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t,"array")&&!e.required)return n();a.default.required(e,t,r,c,o,"array"),(0,i.isEmptyValue)(t,"array")||(a.default.type(e,t,r,c,o),a.default.range(e,t,r,c,o))}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t)&&!e.required)return n();a.default.required(e,t,r,c,o),void 0!==t&&a.default.type(e,t,r,c,o)}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t)&&!e.required)return n();a.default.required(e,t,r,c,o),t&&a.default.enum(e,t,r,c,o)}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t,"string")&&!e.required)return n();a.default.required(e,t,r,c,o),(0,i.isEmptyValue)(t,"string")||a.default.pattern(e,t,r,c,o)}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t)&&!e.required)return n();if(a.default.required(e,t,r,c,o),!(0,i.isEmptyValue)(t)){var u=void 0;u="number"==typeof t?new Date(t):t,a.default.type(e,u,r,c,o),u&&a.default.range(e,u.getTime(),r,c,o)}}n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(515),i=(r=a)&&r.__esModule?r:{default:r};t.default=function(e,t,n,r,a){var c=[],u=Array.isArray(t)?"array":void 0===t?"undefined":o(t);i.default.required(e,t,r,c,a,u),n(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(515),a=(r=o)&&r.__esModule?r:{default:r},i=n(367);t.default=function(e,t,n,r,o){var c=e.type,u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,i.isEmptyValue)(t,c)&&!e.required)return n();a.default.required(e,t,r,u,o,c),(0,i.isEmptyValue)(t,c)||a.default.type(e,t,r,u,o)}n(u)}},function(e,t,n){"use strict";function r(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.newMessages=r;t.messages=r()},function(e,t,n){var r=n(1012);e.exports=function(e,t){for(var n=e.length;n--&&r(t,e[n],0)>-1;);return n}},function(e,t,n){var r=n(1012);e.exports=function(e,t){for(var n=-1,o=e.length;++n<o&&r(t,e[n],0)>-1;);return n}},,,,,function(e,t,n){var r=n(2741),o=n(1290),a=n(2201);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&o(t,n,i)&&(n=i=void 0),t=a(t),void 0===n?(n=t,t=0):n=a(n),i=void 0===i?t<n?1:-1:a(i),r(t,n,i,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,o,a){for(var i=-1,c=r(n((t-e)/(o||1)),0),u=Array(c);c--;)u[a?c:++i]=e,e+=o;return u}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(2744);e.exports=function(e,t,n){for(var o=-1,a=e.criteria,i=t.criteria,c=a.length,u=n.length;++o<c;){var l=r(a[o],i[o]);if(l)return o>=u?l:l*("desc"==n[o]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(1008);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,a=e==e,i=r(e),c=void 0!==t,u=null===t,l=t==t,s=r(t);if(!u&&!s&&!i&&e>t||i&&c&&l&&!u&&!s||o&&c&&l||!n&&l||!a)return 1;if(!o&&!i&&!s&&e<t||s&&n&&a&&!o&&!i||u&&n&&a||!c&&a||!l)return-1}return 0}},function(e,t,n){var r=n(1176),o=n(2009);e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},function(e,t,n){var r=n(111);e.exports=function(e){return r(e)?void 0:e}},,function(e,t){e.exports=function(e,t){return e>t}},function(e,t,n){"use strict";var r=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(931)),a=r(n(726)),i=r(n(727)),c=r(n(932)),u="${label} is not a valid ${type}",l={locale:"en",Pagination:o.default,DatePicker:a.default,TimePicker:i.default,Calendar:c.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:u,method:u,array:u,object:u,number:u,date:u,boolean:u,integer:u,float:u,regexp:u,email:u,url:u,hex:u},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};t.default=l},,,,function(e,t,n){var r=n(604),o=n(1012),a=n(2754),i=n(955),c=n(1992),u=Array.prototype.splice;e.exports=function(e,t,n,l){var s=l?a:o,f=-1,d=t.length,p=e;for(e===t&&(t=c(t)),n&&(p=r(e,i(n)));++f<d;)for(var m=0,h=t[f],y=n?n(h):h;(m=s(p,y,m,l))>-1;)p!==e&&u.call(p,m,1),u.call(e,m,1);return e}},function(e,t){e.exports=function(e,t,n,r){for(var o=n-1,a=e.length;++o<a;)if(r(e[o],t))return o;return-1}},function(e,t,n){var r=n(2203),o=n(1174),a=Array.prototype.splice;e.exports=function(e,t){for(var n=e?t.length:0,i=n-1;n--;){var c=t[n];if(n==i||c!==u){var u=c;o(c)?a.call(e,c,1):r(e,c)}}return e}},function(e,t){e.exports=function(e,t){return e<t}},,,,,,,,,,,,function(e,t,n){"use strict";var r,o,a,i,c,u;n.d(t,"g",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return v})),function(e){e.Created="created",e.Updated="updated",e.Deleted="deleted"}(r||(r={})),function(e){e.Low="low",e.Medium="medium",e.High="high",e.Urgent="urgent",e.Null="null"}(o||(o={})),function(e){e.Create="thing.create",e.Archive="thing.archive",e.Unarchive="thing.unarchive",e.Trash="thing.trash",e.Update="thing.update",e.Recover="thing.recover",e.CreateComment="comment.create",e.DelComment="comment.delete",e.UpdateComment="comment.update"}(a||(a={})),function(e){e.UpdateFields="updateFields",e.UpdateAttr="updateAttr",e.Comment="comment"}(i||(i={})),function(e){e.Lake="lake"}(c||(c={})),function(e){e.Grid1="grid1",e.Grid2="grid2",e.Grid3="grid3",e.Grid4="grid4",e.Grid5="grid5",e.Grid6="grid6",e.Grid7="grid7",e.Grid8="grid8",e.Grid9="grid9",e.Grid10="grid10",e.Grid11="grid11",e.Grid12="grid12",e.Grid13="grid13",e.Grid14="grid14",e.Grid15="grid15",e.Grid16="grid16",e.Grid17="grid17",e.Grid18="grid18",e.Grid19="grid19",e.Grid20="grid20"}(u||(u={}));var l,s,f,d,p,m,h,y,v,b="标签",g="状态";!function(e){e.tags="标签",e.state="状态"}(l||(l={})),function(e){e.Pending="未开始",e.Progress="进行中",e.Done="已完成",e.Cancel="已取消"}(s||(s={})),function(e){e.contains="like",e.startsWith="like",e.endsWith="like",e.doesNotContain="not like",e.is="=",e.isNot="!=",e.isEmpty="is null",e.isNotEmpty="is not null"}(f||(f={})),function(e){e.is="="}(d||(d={})),function(e){e["="]="=",e[">"]=">",e["<"]="<",e[">="]=">=",e["<="]="<=",e["!="]="!=",e.isEmpty="is null",e.isNotEmpty="is not null"}(p||(p={})),function(e){e["="]="=",e[">"]=">",e["<"]="<",e[">="]=">=",e["<="]="<=",e["!="]="!=",e.isEmpty="is null",e.isNotEmpty="is not null"}(m||(m={})),function(e){e.Contains="in",e.DoesNotContain="not in",e.IsEmpty="is empty",e.IsNotEmpty="is not empty",e.ContainsAll="in all"}(h||(h={})),function(e){e.ASC="asc",e.DESC="desc"}(y||(y={})),function(e){e.Subscribe="subscribe",e.UnSubscribe="unsubscribe"}(v||(v={}))},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(2128),u=["mode","children"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var f={Container:function(e){var t=e.mode,n=e.children,r=s(e,u);return o.a.createElement(c.a,l({mode:t},r),n)}};f.Container.propTypes={mode:i.a.oneOf(["wider","middle","full"]),children:i.a.node},t.a=f},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n(289),o=n.n(r);function a(e,t){return e||""===e?e:t}var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search;if(t){var n=o.a.parse(t);return n[e]||""}return""},c=function(e){var t={};return e.forEach((function(e){t[e]=i(e)})),t},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return e.forEach((function(e){n[e]=a(t[e],i(e))})),n}},,function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return s})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"j",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return _})),n.d(t,"f",(function(){return E})),n.d(t,"i",(function(){return x})),n.d(t,"h",(function(){return k}));var r=n(5);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,i,c,u){var l=f(e[a],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==o(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,u,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,u,"next",e)}function u(e){i(a,r,o,c,u,"throw",e)}c(void 0)}))}}function u(e){return l.apply(this,arguments)}function l(){return(l=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/index",e.abrupt("return",r.e("/api/modules/issue/group/issues/IssuesController/index",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return(f=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/show",e.abrupt("return",r.c("/api/modules/issue/group/issues/IssuesController/show",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/activities",e.abrupt("return",r.c("/api/modules/issue/group/issues/IssuesController/activities",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/create",e.abrupt("return",r.e("/api/modules/issue/group/issues/IssuesController/create",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/update",e.abrupt("return",r.f("/api/modules/issue/group/issues/IssuesController/update",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return g.apply(this,arguments)}function g(){return(g=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/issueAction",e.abrupt("return",r.f("/api/modules/issue/group/issues/IssuesController/issueAction",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return(w=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/del",e.abrupt("return",r.b("/api/modules/issue/group/issues/IssuesController/del",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return O.apply(this,arguments)}function O(){return(O=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/recycles",e.abrupt("return",r.c("/api/modules/issue/group/issues/IssuesController/recycles",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return j.apply(this,arguments)}function j(){return(j=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/toggleSubscribe",e.abrupt("return",r.f("/api/modules/issue/group/issues/IssuesController/toggleSubscribe",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/IssuesController/subscribers",e.abrupt("return",r.c("/api/modules/issue/group/issues/IssuesController/subscribers",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},,,function(e,t,n){var r=n(2022),o=n(1011),a=n(674),i=n(958),c=a((function(e,t){return i(e)?r(e,o(t,1,i,!0)):[]}));e.exports=c},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i="Search-module_wrapper_l7YB+",c="Search-module_img_vRjCc";function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}var l=function(e){return o.a.createElement("div",u({className:i},e),o.a.createElement("div",{className:c}),o.a.createElement("p",null,e.text||__("搜索结果为空")))};l.propTypes={text:n.n(a).a.string};t.a=l},function(e,t,n){"use strict";var r=n(235),o=n(1018);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=window.appData,s=l.isAlipayWebApp,f=l.isDingTalkApp,d=l.isDingTalkMiniApp,p=l.isYuqueMobileApp,m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isDingTalkMiniApp=d,this.isAlipayWebApp=s,this.isDingTalkApp=f,this.isYuqueMobileApp=p}var t,n,a;return t=e,n=[{key:"alipayConfirm",value:function(e){var t=e.title,n=void 0===t?"":t,r=e.message,o=void 0===r?"":r,a=e.onOk,i=void 0===a?function(){}:a,c=e.onCancel,u=void 0===c?function(){}:c,l=e.okButton,s=void 0===l?__("是"):l,f=e.cancelButton,d=void 0===f?__("否"):f;window.AlipayJSBridge.call("confirm",{title:n,message:o,okButton:s,cancelButton:d},(function(e){e.ok?i():u()}))}},{key:"dingtalkConfirm",value:function(e){var t=e.title,n=void 0===t?"":t,r=e.message,a=void 0===r?"":r,c=e.onOk,u=void 0===c?function(){}:c,l=e.onCancel,s=void 0===l?function(){}:l,f=e.okButton,d=void 0===f?__("是"):f,p=e.cancelButton,m={title:n,content:a,confirmButtonText:d,cancelButtonText:void 0===p?__("否"):p},h=function(e){e.confirm?u():s()};window.dd.confirm?window.dd.confirm(i(i({},m),{},{success:h})):Object(o.a)("confirm",m).then(h).then(s)}},{key:"webNativeConfirm",value:function(e){var t=e.message,n=void 0===t?"":t,r=e.onOk,o=void 0===r?function(){}:r,a=e.onCancel,i=void 0===a?function(){}:a;window.confirm(n)?o():i()}},{key:"mobileAppConfirm",value:function(e){var t=e.title,n=void 0===t?"":t,o=e.message,a=void 0===o?"":o,i=e.onOk,c=void 0===i?function(){}:i,u=e.onCancel,l=void 0===u?function(){}:u,s=e.okButton,f=void 0===s?__("是"):s,d=e.cancelButton,p=void 0===d?__("否"):d;r.a.showConfirm({title:n,message:a,onOk:c,confirmText:f,onConfirm:c,cancelText:p,onCancel:l})}},{key:"confirm",value:function(){this.isAlipayWebApp&&window.AlipayJSBridge?this.alipayConfirm.apply(this,arguments):this.isDingTalkMiniApp&&window.dd?this.dingtalkConfirm.apply(this,arguments):this.isYuqueMobileApp?this.mobileAppConfirm.apply(this,arguments):this.webNativeConfirm.apply(this,arguments)}}],n&&u(t.prototype,n),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),h=new m;t.a=h},function(e,t,n){"use strict";n(175);var r=n(84),o=n(0),a=n.n(o);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,n,o,i=s(f);function f(){var e;c(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(d(e=i.call.apply(i,[this].concat(n))),"state",{visible:!1}),m(d(e),"setInvisible",(function(t){"input"===t.target.tagName.toLowerCase()||t.target.contains(document.createElement("input"))||e.onVisibleChange(!1)})),m(d(e),"onVisibleChange",(function(t){e.setState({visible:t})})),e}return t=f,(n=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.toggleVisibleOnClick,o=e.placement,i=void 0===o?"bottomLeft":o,c=e.menus,u=e.children,l=n?a.a.createElement("div",{onClick:this.setInvisible},c):c;return a.a.createElement("div",{className:"filter-item"},a.a.createElement(r.a,{className:t,getPopupContainer:function(e){return e.parentNode},noArrow:!0,type:"menu",trigger:"click",placement:i,autoAdjustOverflow:!1,visible:this.state.visible,onVisibleChange:this.onVisibleChange,content:this.state.visible?l:null},a.a.createElement("div",{className:"filter-item-keywords"},u,a.a.createElement("span",{className:"larkicon larkicon-arrow-down-sm"}))))}}])&&u(t.prototype,n),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.Component);t.a=h},,function(e,t,n){var r=n(2204)(n(919));e.exports=r},function(e,t,n){"use strict";n(96);var r=n(23),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(100),l=n.n(u),s=n(186),f=n(38),d=n(127),p=n(295),m=window.h5?28:32,h={User:function(e){var t=e.user,n=e.withFace,r=e.size;e.withLink;return a.a.createElement("a",{href:"/".concat(t.login),className:"thread-user"},n&&a.a.createElement(d.a,{src:t.avatar_url,size:r||m}),a.a.createElement("span",{className:"thread-user-name"},t.name))},Participant:function(e){var t=e.user,n=e.size;return a.a.createElement(r.a,{title:t.name},a.a.createElement("span",{className:"thread-participant"},a.a.createElement(d.a,{src:t.avatar_url,size:n||m})))},Icon:function(e){var t=e.thread,n=e.width,o=e.height,i=p.b.getName("Thread",t),c=t.view_status===l.a.VIEW_STATUS.archive?"#FE9120":"";return a.a.createElement(r.a,{title:__("话题")},a.a.createElement(f.b,{name:i,className:"thread-icon",width:n,height:o,fill:c}))},Creator:function(e){var t=e.user,n=e.withFace,r=e.size;return window.h5?a.a.createElement("span",{className:"thread-creator"},t.name):a.a.createElement("a",{href:"/".concat(t.login),className:"thread-creator"},n&&a.a.createElement(d.a,{src:t.avatar_url,size:r||m}),t.name)},LastEditor:function(e){var t=e.thread,n=e.withFace,r=e.size,o=t.last_editor;return a.a.createElement("a",{href:"/".concat(o.login),className:"thread-creator"},n&&a.a.createElement(d.a,{src:o.avatar_url,size:r||m}),o.name)},CreatedAt:function(e){var t=e.thread;return a.a.createElement("span",{className:"thread-created-at"},a.a.createElement(s.a,{time:t.created_at}))},PublishedAt:function(e){var t=e.thread;return a.a.createElement("span",{className:"thread-created-at"},a.a.createElement(s.a,{time:t.published_at}))},UpdatedAt:function(e){var t=e.thread;return a.a.createElement("span",{className:"thread-created-at"},a.a.createElement(s.a,{time:t.updated_at}))},Title:function(e){var t=e.thread,n=e.className,r=void 0===n?"":n;return a.a.createElement("span",{className:"thread-title ".concat(r),title:t.title,"data-testid":"larkthread-title"},t.title)}};h.Title.propTypes={thread:c.a.object,className:c.a.string},h.Link=function(e){var t=e.thread,n=e.className,r=void 0===n?"":n,o=e.titleClassName,i=void 0===o?"":o,c="/go/doc/".concat(t.id);return a.a.createElement("a",{href:c,className:r,"data-testid":"larkthread-link"},a.a.createElement(h.Title,{className:i,thread:t}))},h.Link.propTypes={thread:c.a.object,className:c.a.string,titleClassName:c.a.string};t.a=h},function(e,t,n){"use strict";var r={Message:n(852).a};t.a=r},function(e,t,n){"use strict";function r(){var e=[].slice.call(arguments,0);return 1===e.length?e[0]:function(){for(var t=0;t<e.length;t++)e[t]&&e[t].apply&&e[t].apply(this,arguments)}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n(584);var r=n(283),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(88),l=n(68),s=n(109),f=n(909),d=n(1299),p=n(952),m=n(212),h=n(590),y=n(632);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.__member_message_ref=a.a.createRef();var g=function(e){var t=e.headerTitle,n=e.history,i=e.children,c=e.paddingBottom,u=n.location.query,b=void 0===u?{}:u,g=e.noHeader,_=e.noFooter,w="m-wrapper";("doc_embed"===b.view||"image_mode"===b.view||e.headless)&&(g=!0,_=!0),window.appData.isYuqueMobileApp&&(_=!0),"image_mode"===b.view&&(w="m-wrapper-readonly");var E=v(Object(o.useState)(!1),2),O=E[0],x=E[1],j=v(Object(o.useState)(null),2),k=j[0],S=j[1];Object(o.useEffect)((function(){x(e.error.loginModalVisible),S(e.error.from)}),[e.error.loginModalVisible]);return a.a.createElement(r.a,{locale:m.a.getAntdLocale()},O&&a.a.createElement(d.a,{visible:O,from:k,onCancel:function(){"doc_reader"===e.error.from&&Object(f.a)("doc_reader_login_modal"),e.dispatch({type:"error/toggleLoginModal",payload:{visible:!O}})}}),a.a.createElement(h.a.Message,{dispatch:e.dispatch,ref:window.__member_message_ref}),a.a.createElement(l.Router,{history:n},a.a.createElement("div",{className:w},!g&&a.a.createElement(y.a,{title:t}),a.a.createElement(s.a,{withFallbackUI:!0},a.a.createElement("div",{className:"m-content"},i)),!_&&a.a.createElement(p.a,{full:!0,style:c?{paddingBottom:c}:{}}))))};g.propTypes={noHeader:c.a.bool,headerTitle:c.a.node,noFooter:c.a.bool,headless:c.a.bool,dispatch:c.a.func,error:c.a.object};var _=Object(s.b)(Object(u.d)((function(e){return{error:e.error}}))(g),!0),w=function(e){return a.a.createElement(l.Router,{history:e.history},a.a.createElement("div",{className:"m-wrapper"},a.a.createElement(s.a,{withFallbackUI:!0},e.children)))};w.propTypes={children:c.a.oneOfType([c.a.arrayOf(c.a.node),c.a.node])};var E=w;t.a=function(e){var t=window.appData,n=t.isAlipayWebApp,o=t.isDingTalkMiniApp,i=t.isYuqueMobileApp;return n||o||i?a.a.createElement(r.a,{autoInsertSpaceInButton:!1,locale:m.a.getAntdLocale()},a.a.createElement(E,e)):a.a.createElement(r.a,{autoInsertSpaceInButton:!1,locale:m.a.getAntdLocale()},a.a.createElement(_,e))}},,function(e,t,n){var r=n(1012),o=n(842),a=Math.max;e.exports=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var c=null==n?0:o(n);return c<0&&(c=a(i+c,0)),r(e,t,c)}},function(e,t,n){var r=n(454),o=n(2755);e.exports=function(e,t){var n=[];if(!e||!e.length)return n;var a=-1,i=[],c=e.length;for(t=r(t,3);++a<c;){var u=e[a];t(u,a,e)&&(n.push(u),i.push(a))}return o(e,i),n}},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){Object(r.useEffect)((function(){t&&t({type:"search/update",payload:{scope:e}})}),[])}},function(e,t,n){"use strict";var r=n(14),o=n(41),a=n(28),i=n(0),c=n(197),u=n(10),l=n.n(u),s=n(126),f=n(177),d=n(257),p=n(95),m=n(118),h=f.a.Option;function y(e){return e&&e.type&&(e.type.isSelectOption||e.type.isSelectOptGroup)}var v=function(e,t){var n,u=e.prefixCls,v=e.className,b=e.children,g=e.dataSource,_=Object(c.a)(b);if(1===_.length&&Object(m.b)(_[0])&&!y(_[0])){var w=Object(a.a)(_,1);n=w[0]}var E,O=n?function(){return n}:void 0;return E=_.length&&y(_[0])?b:g?g.map((function(e){if(Object(m.b)(e))return e;switch(Object(o.a)(e)){case"string":return i.createElement(h,{key:e,value:e},e);case"object":var t=e.value;return i.createElement(h,{key:t,value:t},e.text);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}})):[],i.useEffect((function(){Object(p.a)(!("dataSource"in e),"AutoComplete","`dataSource` is deprecated, please use `options` instead."),Object(p.a)(!n||!("size"in e),"AutoComplete","You need to control style self instead of setting `size` when using customize input.")}),[]),i.createElement(d.a,null,(function(n){var o=(0,n.getPrefixCls)("select",u);return i.createElement(f.a,Object(r.default)({ref:t},Object(s.a)(e,["dataSource"]),{prefixCls:o,className:l()("".concat(o,"-auto-complete"),v),mode:f.a.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:O}),E)}))},b=i.forwardRef(v);b.Option=h,t.a=b},function(e,t,n){"use strict";n(96);var r=n(23),o=(n(344),n(196)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f={form:"PermissionForm-module_form_KQRUS",tooltip:"PermissionForm-module_tooltip_73TeO",firstItem:"PermissionForm-module_firstItem_bAn4n",firstTitle:"PermissionForm-module_firstTitle_947G6",firstDesc:"PermissionForm-module_firstDesc_6lQM7",secondTitle:"PermissionForm-module_secondTitle_gA759",text:"PermissionForm-module_text_mdbV4",item:"PermissionForm-module_item_gAi5H"};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,a,c=y(u);function u(){var e;p(this,u);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return _(b(e=c.call.apply(c,[this].concat(n))),"buildCheckboxForm",(function(t){var n=e.props,a=n.classNames,c=void 0===a?{}:a,u=n.tipPlacement;return t.filter((function(e){return!e.hidden})).map((function(t){var n=i.a.createElement(o.a,{checked:t.value,onChange:function(n,r){return e.props.onChange(t,n,r)}});return t.disabled&&(n=i.a.createElement(r.a,{overlayClassName:s()(f.tooltip,c.tooltip),placement:u||"topLeft",title:t.tip},i.a.createElement(o.a,{disabled:t.disabled,checked:t.value}))),i.a.createElement("div",{"data-testid":"permission-form-".concat(t.key),className:s()(f.item,c.item),key:t.key},i.a.createElement("div",{className:f.itemTitle},t.label),i.a.createElement("div",{className:f.itemAction},n))}))})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.classNames,o=void 0===r?{}:r,a=n.map((function(t){return i.a.createElement("div",{key:t.title,className:s()(f.firstItem,o.itemContainer)},i.a.createElement("h1",{className:s()(f.firstTitle,o.title)},t.title),t.desc&&i.a.createElement("div",{className:s()(f.firstDesc,o.desc)},t.desc),t.forms&&e.buildCheckboxForm(t.forms),t.children&&t.children.map((function(t,n){return i.a.createElement("div",{key:t.title||n,className:f.secondItem},t.title&&i.a.createElement("h2",{className:f.secondTitle},t.title),t.forms&&e.buildCheckboxForm(t.forms))})))}));return i.a.createElement("div",null,a)}}])&&m(t.prototype,n),a&&m(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.a.PureComponent);w.propTypes={data:u.a.array.isRequired,form:u.a.object.isRequired,classNames:u.a.object,tipPlacement:u.a.string};t.a=w},function(e,t,n){"use strict";n(162),n(526)},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(128),n(78)),a=(n(120),n(63)),i=(n(144),n(33)),c=(n(246),n(110)),u=(n(96),n(23)),l=(n(60),n(24)),s=(n(218),n(51)),f=n(0),d=n.n(f),p=n(2),m=n.n(p),h=n(34),y=(n(50),n(19)),v=(n(148),n(53)),b=(n(75),n(26)),g=n(527),_=n(555),w=n.n(_);function E(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=[{text:__("发起评审"),key:"new_review"},{text:__("评审完成"),key:"complete_review"},{text:__("取消评审"),key:"cancel_review"}],j={organization:[{text:__("安全操作日志"),key:"audit_log_create"}],group:function(e){var t="Thread"===e?__("话题"):__("文档");return"Resource"===e?[{text:__("上传资源"),key:"resource_upload"},{text:__("替换资源"),key:"resource_replace"},{text:__("新增评论"),key:"comment_create|comment_reply_create"},{text:__("更新评论"),key:"comment_update|comment_reply_update"}].concat(x):[{text:__("发布#typeName")+t,key:"doc_publish"},{text:__("更新#typeName")+t,key:"doc_update"},{text:__("新增评论"),key:"comment_create|comment_reply_create"},{text:__("更新评论"),key:"comment_update|comment_reply_update"}].concat(x)}},k={TYPES:{book:__("知识库"),group:__("团队"),organization:__("空间")},getCheckboxs:function(e,t){return"book"===e&&(e="group"),"function"==typeof j[e]?j[e](t):j[e]},getDefaultConditions:function(e,t){return["book","group"].includes(e)?[this.getCheckboxs(e,t)[0].key,this.getCheckboxs(e,t)[1].key]:[this.getCheckboxs(e,t)[0].key]},getTexts:function(e,t,n){return this.getCheckboxs(e,t).filter((function(e){return n.includes(e.key)})).map((function(e){return e.text}))},getConditions:function(e){var t=[];return e.forEach((function(e){t=[].concat(E(t),E(e.split("|")))})),t},groupConditions:function(e,t,n){var r=this,o=[];return n?(Object.keys(n).forEach((function(a){if(n[a]){var i=r.getCheckboxs(e,t).filter((function(e){return e.key.includes(a)}));if(i[0])return o.push(i[0].key);o.push(a)}})),w()(o)):o}},S={settingWebhook:"index-module_settingWebhook_x61XC",table:"index-module_table_6h6yC",actions:"index-module_actions_Rn9Q3",listItem:"index-module_listItem_wJV8f",url:"index-module_url_YlqGK",addWebhook:"index-module_addWebhook_iqzMt",tips:"index-module_tips_nenCu",orgTips:"index-module_orgTips_cap8C",conditionList:"index-module_conditionList_OPvr4"},C=function(e){var t=e.object_type,n=e.object,r=e.form,o=e.hideButton,a=e.onFinish,i=void 0===a?function(){}:a,c=e.onValuesChange,u=void 0===c?function(){}:c,l=e.btnLoading,f=void 0!==l&&l,p=__("当{objectTypeName}内发生以下动态时推送",{objectTypeName:k.TYPES[t]});return d.a.createElement(s.a,{layout:"vertical",initialValues:{conditions:k.getDefaultConditions(t,n.type)},onFinish:i,form:r,onValuesChange:u},d.a.createElement(s.a.Item,{label:"organization"===t?__("名字"):__("机器人名字"),name:"name",rules:[{required:!0,message:__("请输入名称")}],validateTrigger:"onBlur"},d.a.createElement(b.a,{type:"text","data-testid":"webhook-name",placeholder:"organization"===t?__("名字"):__("名称，如钉钉机器人")})),d.a.createElement(s.a.Item,{label:__("Webhook 地址"),name:"url",validateTrigger:"onBlur",rules:[{required:!0,message:__("请输入 URL")},{validator:function(e,t,n){if(!t)return n();n(g.validator.httpURL(t))}}]},d.a.createElement(b.a,{type:"text","data-testid":"webhook-url",placeholder:"URL"})),d.a.createElement(s.a.Item,{label:p,name:"conditions",className:S.conditionList},d.a.createElement(v.a.Group,null,k.getCheckboxs(t,n.type).map((function(e){var t=e.key,n=e.text;return d.a.createElement(v.a,{value:t,key:t},n)})))),!o&&d.a.createElement(s.a.Item,null,d.a.createElement(y.a,{loading:f,className:"book-admin-action","data-testid":"webhook-add",htmlType:"submit"},d.a.createElement("span",null,__("添加")))))};C.propTypes={object_type:m.a.string.isRequired,object:m.a.object.isRequired};var N=C;function P(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=function(e){var t=e.object_type,n=e.object,r=T(Object(f.useState)([]),2),o=r[0],a=r[1],i=T(Object(f.useState)(!1),2),c=i[0],u=i[1],d=T(Object(f.useState)("dingtalk"),2),p=d[0],m=d[1],y=T(Object(f.useState)(!1),2),v=y[0],b=y[1],g=T(s.a.useForm(),1)[0],_=T(s.a.useForm(),1)[0],w=T(Object(f.useState)({}),2),E=w[0],O=w[1],x=!n.abilities||!n.abilities.modify_setting;n.abilities&&n.abilities.destroy&&(x=!1);return Object(f.useEffect)((function(){h.a.webhooks.find({object_id:n.id,object_type:t}).then((function(e){a(e.map((function(e){return e.conditions=k.groupConditions(t,n.type,e.conditions),e})))}))}),[]),{disableModify:x,state:{type:p,data:E,webhooks:o,modalVisible:c,object_type:t,object:n,addBtnLoading:v},form:g,addForm:_,removeWebhook:function(e){h.a.webhooks.destroy({id:e.id,object_type:t,object_id:n.id}).then((function(){a(o.filter((function(t){return t.id!==e.id}))),l.a.success(__("删除成功"))}))},addWebhook:function(e){var r=k.getConditions(e.conditions);if(!r.length)return l.a.error(__("推送条件不能为空"));b(!0),h.a.webhooks.create({object_type:t,object_id:n.id,url:e.url,name:e.name,conditions:r}).then((function(e){e.conditions=k.groupConditions(t,n.type,e.conditions),a([e].concat(P(o))),_.resetFields(),l.a.success(__("添加成功"))})).finally((function(){b(!1)}))},updateWebhook:function(){g.validateFields().then((function(e){var r=k.getConditions(e.conditions);if(!r.length)return l.a.error(__("推送条件不能为空"));h.a.webhooks.update({id:E.id,object_type:t,object_id:n.id,url:e.url,name:e.name,conditions:r}).then((function(e){e.conditions=k.groupConditions(t,n.type,e.conditions),a(o.map((function(t){return t.id===e.id?e:t}))),u(!1),l.a.success(__("修改成功"))}))}))},testWebhook:function(e){h.a.webhooks.test({id:e.id,object_type:t,object_id:n.id}).then((function(e){l.a.success(__("消息发送成功"))}))},editWebhook:function(e){O(e),g.setFieldsValue(e),u(!0)},onRadioChange:function(e){return m(e.target.value)},onValuesChange:function(e){e.url&&e.url.includes("dingtalk")&&m("dingtalk")},onModalCancel:function(){return u(!1)}}},R=function(e){var t,n,l,s=I(e),f=s.state,p=s.disableModify,m=s.form,h=s.addForm,y=s.addWebhook,v=s.removeWebhook,b=s.updateWebhook,g=s.testWebhook,_=s.editWebhook,w=s.onModalCancel,E=s.onRadioChange,O=s.onValuesChange,x=f.webhooks,j=f.modalVisible,C=f.addBtnLoading,P=f.object_type,T=f.object,A=f.type,L=[{width:80,title:__("名字"),dataIndex:"name"},{title:__("Webhook 地址"),dataIndex:"url",className:S.content,render:function(e,t){return d.a.createElement(u.a,{title:e,placement:"top"},d.a.createElement("p",{className:S.url},e))}},{title:__("推送条件"),width:240,dataIndex:"conditions",className:S.text,render:function(e){return k.getTexts(P,T.type,e).map((function(e){return d.a.createElement("p",null,e)}))}},{title:__("操作"),width:120,key:"actions",render:function(e,t){return d.a.createElement("div",{className:S.actions,"data-testid":"webhook-list-item-".concat(t.id)},d.a.createElement("span",{onClick:function(){g(t)}},__("测试")),!p&&d.a.createElement(d.a.Fragment,null,d.a.createElement("span",{onClick:function(){_(t)}},__("编辑")),d.a.createElement(c.a,{title:__("你确定删除这个消息推送吗？"),onConfirm:function(){return v(t)},okText:__("删除")},d.a.createElement("span",{className:"book-webhook-del"},__("删除")))))}}];return d.a.createElement("div",{className:S.settingWebhook},d.a.createElement(a.a,{className:S.addWebhook,title:d.a.createElement("span",null,__("新增消息推送"))},(t=P,n=k.TYPES[t],l="dingtalk"===A?__("可将{objectTypeName}内动态推送到钉钉群（请注意数据安全）。打开钉钉获取相关信息并填写到下方 {hookLink}",{hookLink:d.a.createElement("a",{href:"https://www.yuque.com/yuque/tygt6i/dlzc9g",target:"_blank"},__("查看获取方式")),objectTypeName:n}):__("可将{objectTypeName}内动态推送到其他渠道，相关信息并填写到下方 {hookLink}",{hookLink:d.a.createElement("a",{href:"https://www.yuque.com/yuque/developer/doc-webhook",target:"_blank"},__("查看获取方式")),objectTypeName:n}),"organization"===t?d.a.createElement("p",{className:S.orgTips},__("为了让空间管理员可以实时关注空间内的安全操作日志，我们提供了基于 Webhook 的实时推送方式，让空间管理员可以接入自身的安全审计系统。{hookLink}",{hookLink:d.a.createElement("a",{href:"https://www.yuque.com/yuque/developer/lunx6h",target:"_blank"},__("查看详情"))})):d.a.createElement("div",null,d.a.createElement("p",null,__("推送到")),d.a.createElement(i.a.Group,{style:{marginTop:16},value:A,onChange:E},d.a.createElement(i.a.Button,{value:"dingtalk"},__("钉钉群")),d.a.createElement(i.a.Button,{value:"webhook"},__("其他渠道"))),d.a.createElement("p",{className:S.tips},l))),!p&&d.a.createElement(N,{object_type:P,object:T,form:h,btnLoading:C,onFinish:y,onValuesChange:O})),d.a.createElement(a.a,{className:S.table,title:d.a.createElement("span",null,__("已添加的推送")),contentType:"list"},d.a.createElement(o.a,{rowKey:"id",className:S.table,columns:L,dataSource:x,pagination:!1})),d.a.createElement(r.a,{visible:j,width:730,title:__("编辑消息推送"),onOk:b,onCancel:w},d.a.createElement(N,{object_type:P,object:T,form:m,hideButton:!0})))};R.propTypes={object_type:m.a.string.isRequired,object:m.a.object.isRequired};t.a=R},function(e,t,n){"use strict";n(245);var r=n(64),o=(n(133),n(31)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(370),s=n(10),f=n.n(s),d=n(38),p="index-module_arrow_nZOfu",m="index-module_menu_sKXrp",h="index-module_menuItem_xt25B",y="index-module_content_ZDUVZ",v="index-module_highlight_+ijll",b="index-module_up_5YsUR";function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E={RoleMenu:function(e){var t=e.roles,n=e.onChange,c=e.selected,u=e.defaultText,s=_(Object(a.useState)(!1),2),w=s[0],E=s[1],O=_(Object(a.useState)(c),2),x=O[0],j=O[1],k=t.find((function(e){return String(e.type)===String(x)}));return i.a.createElement(r.a,{trigger:["click"],onVisibleChange:function(e){E(e)},overlay:i.a.createElement(o.a,{selectedKeys:[String(x)],className:m},t.map((function(e,t){return i.a.createElement(o.a.Item,{key:e.type},i.a.createElement("a",{href:"#",onClick:function(){n(e.type),E(!1),j(e.type)},className:h},e.text,i.a.createElement(l.a,null)))})))},i.a.createElement("span",{className:f()(y,g({},v,null!=x))},k?k.text:u||__("角色"),i.a.createElement(d.b,{name:"arrow-down",width:16,className:f()(p,g({},b,w))})))}};E.RoleMenu.propTypes={roles:u.a.array.isRequired,onChange:u.a.func.isRequired,selected:u.a.number,defaultText:u.a.string};t.a=E},function(e,t,n){"use strict";n(166);var r=n(65),o=(n(178),n(45)),a=(n(148),n(53)),i=n(0),c=n.n(i),u=n(2),l=n(1219);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=a.a.Group;var m=function(e){var t=e.onChange,n=e.excludeHighLevelScope,i=e.useGroupScope?l.a:l.c;n||(i=f(f({},i),l.b));var u=function(e){if("all"===e)return Object.keys(l.c);if(!e)return[];e=e.split(",");var t={};return e.forEach((function(e){e=e.trim(),t[e]||(e.includes(":")||(t["".concat(e,":read")]=!0),t[e]=!0)})),Object.keys(t)}(e.scope),s=Object.keys(i).filter((function(e){return"default"!==e})).map((function(t){return c.a.createElement(o.a,{span:12,key:t},c.a.createElement(a.a,{value:t,style:{margin:"3px"},disabled:e.disableEdit||t.includes(":")&&u.includes(t.split(":")[0])},c.a.createElement("span",{className:"scope-description"},i[t])))}));return c.a.createElement("div",{className:"scope-list"},c.a.createElement(p,{onChange:t,value:u},c.a.createElement(r.a,null,s)))};m.propTypes={onChange:u.PropTypes.func,excludeHighLevelScope:u.PropTypes.bool,useGroupScope:u.PropTypes.bool},t.a=m},function(e,t,n){"use strict";n(2785);var r=n(2350),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(10),l=n.n(u),s=n(1312),f="DepartmentSelect-module_container_AjUu5",d="DepartmentSelect-module_dropdownContainer_EcAkq",p="DepartmentSelect-module_showChecked_CxlLv";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=e.value,n=e.onChange,o=e.className,i=e.exceptIds,c=e.multiple,u=e.treeCheckable,y=e.showChecked,v=e.dropdownClassName,b=e.disabled,g=e.size,_=Object(s.a)({exceptIds:i}),w=_.departments,E=_.getDepartments;return a.a.createElement(r.a,m({},e,{"data-testid":"department-select",className:l()(f,o),blockNode:!0,value:t,onChange:function(e){n(e)},treeData:w,loadData:function(e){var t=e.id;return E(t)},dropdownClassName:l()(d,h({},p,y),v),treeDefaultExpandAll:!0,multiple:c,treeCheckable:u,disabled:b,size:g}))}y.defaultProps={value:0,onChange:function(){},exceptIds:[],multiple:!1,size:"default"},y.propTypes={value:c.a.number,onChange:c.a.func,className:c.a.string,exceptIds:c.a.array,multiple:c.a.bool,treeCheckable:c.a.bool,showChecked:c.a.bool,dropdownClassName:c.a.string,disabled:c.a.bool,size:c.a.string};t.a=y},function(e,t,n){"use strict";var r,o,a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(261),s=n(1e3),f=n(91),d="index-module_qrCodeWrapper_zR07d",p="index-module_qrCode_vSDhD",m="index-module_qrCodeDesc_5xemJ",h="index-module_qrCodeClose_hIUwV",y="index-module_contentWrapper_QuO9a";function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E="yuque/appQrCodeDismiss",O=window.appData.isYuque,x=function e(t){var n=_(Object(a.useState)(!!t.visible),2),r=n[0],o=n[1],c=O?"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*GHNCQrr6kXkAAAAAAAAAAAAAARQnAQ":"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*4QJ4RJzP1koAAAAAAAAAAAAAARQnAQ",u=function(e){o(e),e||f.default.set(E,!0)};return Object(a.useEffect)((function(){o(t.visible)}),[t.visible]),Object(a.useEffect)((function(){f.default.get(E)||o(!0)}),[]),t.showCornerBubble?i.a.createElement("div",{className:y},i.a.createElement(s.a,{iconName:e.icon,style:b({bottom:"32px"},t.bubbleStyle),onClick:function(){u(!r)}}),r&&i.a.createElement("div",{className:d},i.a.createElement("div",{className:p},i.a.createElement("img",{src:c}),i.a.createElement("p",{className:m},__("下载手机客户端"))),i.a.createElement("a",{className:h,onClick:function(){u(!1)}},i.a.createElement(l.a,null)))):null};x.icon="app-bubble",x.defaultProps={showCornerBubble:null===(r=window.appData)||void 0===r||null===(o=r.settings)||void 0===o?void 0:o.enable_mobile_app_qrcode,bubbleStyle:{}},x.propTypes={showCornerBubble:u.a.bool,bubbleStyle:u.a.object};t.a=x},function(e,t,n){var r=n(454),o=n(2753);e.exports=function(e,t,n){return e&&e.length&&t&&t.length?o(e,t,r(n,2)):e}},function(e,t,n){"use strict";n(50);var r=n(19),o=n(0),a=n.n(o),i=n(109),c=n(1171),u=window.appData.isDesktopApp;t.a=Object(i.b)((function(){var e=u&&Object(c.a)().ipcRenderer;return e?a.a.createElement(r.a,{onClick:function(){e.invoke("online-window/exit-window")}},__("完成")):null}))},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(42),u=n.n(c),l=n(721),s=n.n(l),f=n(2103);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["doc","book","group","match","children","className","fragmentId"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(i,e);var t,n,r,a=b(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).headerHeight=e.showHeader?32:0,t.state={contentHeight:"auto"},t}return t=i,n=[{key:"_calcFrameElement",value:function(){var e=window.parent,t=this.props.minResizeHeight;if(e&&this.containerRef){var n=this.containerRef.scrollHeight;if(n>32){n<t&&(n=t);var r=n+this.headerHeight+1;this.cacheOuterFrameHeight!==r&&(e.postMessage({isYuqueEmbed:!0,href:window.location.href,contentHeight:r},"*"),this.cacheOuterFrameHeight=r)}}}},{key:"getContentHeightFromViewer",value:function(){return window.innerHeight-this.headerHeight}},{key:"setContentHeight",value:function(){this.setState({contentHeight:this.getContentHeightFromViewer()})}},{key:"reCalcFrameElement",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=this.props.autoResizeTimeout;if(!(t>10)){this.reCalcTimeout&&(window.clearTimeout(this.reCalcTimeout),this.reCalcTimeout=void 0);var r=window.setTimeout((function(){e._calcFrameElement(),e.reCalcFrameElement(t+1)}),n);this.reCalcTimeout=r}}},{key:"unsafe_componentWillReceiveProps",value:function(){this.reCalcFrameElement(),this.setContentHeight()}},{key:"componentDidMount",value:function(){var e=this;this.reCalcFrameElement(),this.setContentHeight(),window.addEventListener("resize",u()((function(){e.setContentHeight()}),16))}},{key:"render",value:function(){var e=this,t=this.props,n=t.doc,r=t.book,a=t.group,i=t.match,c=t.children,u=t.className,l=t.fragmentId,d=h(t,p),y=s()(d,"autoResizeTimeout","docLoaded","showHeader","minResizeHeight"),v=l?"".concat(i.url,"#").concat(l):i.url,b=this.state.contentHeight;document.body.style["overflow-y"]="hidden";try{return o.a.createElement("div",m({className:"doc-embed-container ".concat(u||"")},y),this.props.showHeader&&o.a.createElement(f.a,{title:n.title,doc:n,book:r,group:a,link:v,height:this.headerHeight}),o.a.createElement("div",{"data-scroll-container":"true",className:"doc-embed-content-container",style:{height:"number"==typeof b?"".concat(b,"px"):"auto"},ref:function(t){e.containerRef=t},onScroll:this.props.onScroll},c))}catch(g){return console.error(g),window.location.href="/404?view=doc_embed",o.a.createElement("span",null)}}}],n&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);w.defaultProps={showHeader:!0,className:"",onScroll:function(){},minResizeHeight:200,autoResizeTimeout:100},w.propTypes={doc:i.a.object.isRequired,book:i.a.object,group:i.a.object,match:i.a.object,minResizeHeight:i.a.number,autoResizeTimeout:i.a.number,showHeader:i.a.bool,className:i.a.string,fragmentId:i.a.string,onScroll:i.a.func,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node]).isRequired};t.a=w},function(e,t,n){"use strict";n(175);var r=n(84),o=(n(50),n(19)),a=n(0),i=n.n(a),c=n(10),u=n.n(c),l=n(2271),s="index-module_container_cvFEw",f="index-module_descImg_yuOS4",d="index-module_title_xRvvb",p="index-module_firstLine_1EISJ",m="index-module_description_DuIJN",h="index-module_footer_W9yDd",y="index-module_detailBtn_GSAtM",v="index-module_shareBtn_vdQ5k";function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t,n=e.onShare,c=e.noButton,_=e.overlayClassName,w=e.type,E=e.onChangeShareStatus,O=e.restProps,x=g(Object(a.useState)(!1),2),j=x[0],k=x[1],S=function(e,t){"function"==typeof E&&t&&E(e,t),k(e)};return t=c?i.a.createElement("span",{onClick:function(){return k(!0)},style:{display:"block"}},__("分享到花园")):i.a.createElement(l.a,b({iconName:"digitalgarden",tooltip:__("分享到花园")},O)),i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{content:i.a.createElement("div",{className:s},i.a.createElement("img",{className:f,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ljInRZpwD6UAAAAAAAAAAAAAARQnAQ",alt:""}),i.a.createElement("p",{className:d},__("分享到花园")),i.a.createElement("p",{className:u()(m,p)},__("推送内容会出现在关注者的「广场-关注」里")),i.a.createElement("p",{className:m},__("并同步到你的"),i.a.createElement("a",{href:"/".concat(window.appData.me.login),target:"_blank"},__("数字花园")),__("的「更新」模块")),i.a.createElement("div",{className:h},i.a.createElement(o.a,{className:y,onClick:function(){window.open(window.appData.isYuque?"https://www.yuque.com/yuque/mgcsc6/wpb6mh":"https://yuque.antfin.com/lark/xwhu77/lhqpnw")}},__("查看介绍")),i.a.createElement(o.a,{className:v,type:"primary",onClick:function(){S(!1,!0),n()}},__("确认")))),trigger:"click",noArrow:!0,visible:j,placement:"bottomRight",overlayClassName:u()(_),onVisibleChange:S,getPopupContainer:function(e){return"note"===w?e.closest(".note-list-item").querySelector(".note-item"):e.parentNode}},t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(96);var r=n(23),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u="index-module_container_6I+xv",l="index-module_truncated_D2TlC";function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t=e.text,n=e.truncateTooltip,i=s(Object(o.useState)(!1),2),c=i[0],f=i[1],d=s(Object(o.useState)(""),2),p=d[0],m=d[1],h=Object(o.useRef)(null),y=Object(o.useRef)(null);Object(o.useEffect)((function(){var e=h.current.offsetWidth,n=y.current.offsetWidth;if(n>e){f(!0);var r=t.length,o=Math.floor(r*e/n/2)-1,a="".concat(t.slice(0,o),"...").concat(t.slice(-o));m(a)}}),[t]);var v=a.a.createElement("div",{ref:h,className:u},a.a.createElement("span",{ref:y,className:c?l:"","data-testid":"truncated-content"},c?p:t));return n&&c?a.a.createElement(r.a,{title:t,placement:"top"},v):v}d.propTypes={text:c.a.string,truncateTooltip:c.a.bool}},function(e,t,n){"use strict";n(96);var r=n(23),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(38),l=n(10),s=n.n(l),f=n(2346),d=n(2347),p="index-module_actionAlink_DG-Vm",m="index-module_agree_hnfeq",h="index-module_refuse_uSvhx";function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=v(Object(o.useState)(!1),2),n=t[0],i=t[1];return a.a.createElement(r.a,y({},e,{trigger:"hover",onClick:function(){e.onClick&&e.onClick(),i(!1)},visible:n,onMouseEnter:function(){i(!0)},onMouseLeave:function(){i(!1)}}))}var _=function(e){var t=e.type,n=e.target,r=e.belong,i=e.canDestroy,c=e.dispatch,l=e.onRefresh,y=e.group,v=e.organization,b=e.onRemove,_=e.onApprove,w=e.onRemoveRevert,E=[],O=Object(o.useMemo)((function(){var e={belong:r,target:n,dispatch:c,onRefresh:l,group:y,organization:v,onRemove:b,onApprove:_,onRemoveRevert:w};return"group"===t?f.a.create(e):"book"===t?d.a.create(e):void 0}),[n,r]);return i?(window.appData.me.id===n.user.id&&"book"!==t?E.push(a.a.createElement("a",{className:p,onClick:function(){return O.leave()}},a.a.createElement(g,{title:__("退出")},a.a.createElement(u.b,{width:18,name:"sign-out"})))):O&&O.isEditable()&&(!O.isManageable()&&O.isOwner()||(O.isApplying()?(E.push(a.a.createElement("a",{className:s()("member-action-agree",m),key:4,onClick:function(){return O.approve()}},__("同意"))),E.push(a.a.createElement("a",{className:s()("member-action-refuse",h),onClick:function(){return O.refuse()}},__("拒绝")))):E.push(a.a.createElement("a",{className:s()("member-action-delete",p),onClick:function(){return O.remove()}},a.a.createElement(g,{title:O.actionText||__("删除")},a.a.createElement(u.b,{width:18,name:"action-delete"})))))),E):E};_.defaultProps={canDestroy:!0,onRefresh:function(){}},_.propTypes={type:c.a.string.isRequired,belong:c.a.object.isRequired,target:c.a.object.isRequired,canDestroy:c.a.bool,onRefresh:c.a.func,group:c.a.object};t.a=_},function(e,t,n){"use strict";var r=n(18),o=n(14),a=n(0),i=n(2351),c=n(10),u=n.n(c),l=n(257),s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},f=a.forwardRef((function(e,t){var n,c=e.dots,f=void 0===c||c,d=e.arrows,p=void 0!==d&&d,m=e.draggable,h=void 0!==m&&m,y=e.dotPosition,v=void 0===y?"bottom":y,b=s(e,["dots","arrows","draggable","dotPosition"]),g=a.useContext(l.b),_=g.getPrefixCls,w=g.direction,E=a.useRef(),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];E.current.slickGoTo(e,t)};a.useImperativeHandle(t,(function(){return{goTo:O,autoPlay:E.current.innerSlider.autoPlay,innerSlider:E.current.innerSlider,prev:E.current.slickPrev,next:E.current.slickNext}}),[E.current]);var x=a.useRef(a.Children.count(b.children));a.useEffect((function(){x.current!==a.Children.count(b.children)&&(O(b.initialSlide||0,!1),x.current=a.Children.count(b.children))}),[b.children]);var j=Object(o.default)({},b);"fade"===j.effect&&(j.fade=!0);var k=_("carousel",j.prefixCls),S="slick-dots";j.vertical="left"===v||"right"===v;var C=!!f,N=u()(S,"".concat(S,"-").concat(v),"boolean"!=typeof f&&(null==f?void 0:f.className)),P=u()(k,(n={},Object(r.a)(n,"".concat(k,"-rtl"),"rtl"===w),Object(r.a)(n,"".concat(k,"-vertical"),j.vertical),n));return a.createElement("div",{className:P},a.createElement(i.a,Object(o.default)({ref:E},j,{dots:C,dotsClass:N,arrows:p,draggable:h})))}));t.a=f},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(42),o=n.n(r),a=n(0),i=n(995);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object(i.a)({fn:e,ms:t});return Object(a.useMemo)((function(){return o()((function(){var e;return(e=r.current).fn.apply(e,arguments)}),r.current.ms)}),n)}},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(57),c=n(58),u=n(66),l=n(72),s=n(40),f=n(41),d=n(28),p=n(11),m=n(1349),h=n(609),y=n(202),v=n(426),b=n(1321),g=n(163),_=n(85),w=n(70),E=n(399),O=n(1221),x=a.createContext(null);function j(e,t){if(!e)return!0;var n=e.data,r=n.disabled,o=n.disableCheckbox;switch(t){case"select":return r;case"checkbox":return r||o}return!1}function k(e,t){var n=a.useCallback((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"select",r=arguments.length>2?arguments[2]:void 0,o=e.get(t);return!r&&j(o,n)?null:o}),[e]),r=a.useCallback((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"select",r=arguments.length>2?arguments[2]:void 0,o=t.get(e);return!r&&j(o,n)?null:o}),[t]);return[n,r]}function S(e){return a.useMemo((function(){var t=new Map,n=new Map;return e.forEach((function(e){t.set(e.key,e),n.set(e.data.value,e)})),[t,n]}),[e])}var C={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},N=function(e,t){var n=e.prefixCls,o=e.height,i=e.itemHeight,c=e.virtual,u=e.options,l=e.flattenOptions,f=e.multiple,p=e.searchValue,m=e.onSelect,h=e.onToggleOpen,y=e.open,v=e.notFoundContent,b=e.onMouseEnter,g=a.useContext(x),_=g.checkable,j=g.checkedKeys,N=g.halfCheckedKeys,P=g.treeExpandedKeys,T=g.treeDefaultExpandAll,A=g.treeDefaultExpandedKeys,L=g.onTreeExpand,I=g.treeIcon,R=g.showTreeIcon,D=g.switcherIcon,M=g.treeLine,F=g.treeNodeFilterProp,B=g.loadData,U=g.treeLoadedKeys,z=g.treeMotion,G=g.onTreeLoad,V=a.useRef(),Y=Object(E.a)((function(){return u}),[y,u],(function(e,t){return t[0]&&e[1]!==t[1]})),q=S(l),H=Object(d.a)(q,2),W=k(H[0],H[1]),K=Object(d.a)(W,2),$=K[0],Q=K[1],X=a.useMemo((function(){return j.map((function(e){var t=Q(e);return t?t.key:null}))}),[j,Q]),J=a.useMemo((function(){return _?{checked:X,halfChecked:N}:null}),[X,N,_]);a.useEffect((function(){var e;y&&!f&&X.length&&(null===(e=V.current)||void 0===e||e.scrollTo({key:X[0]}))}),[y]);var Z=String(p).toLowerCase(),ee=a.useState(A),te=Object(d.a)(ee,2),ne=te[0],re=te[1],oe=a.useState(null),ae=Object(d.a)(oe,2),ie=ae[0],ce=ae[1],ue=a.useMemo((function(){return P?Object(s.a)(P):p?ie:ne}),[ne,ie,Z,P]);a.useEffect((function(){p&&ce(l.map((function(e){return e.key})))}),[p]);var le=function(e){e.preventDefault()},se=function(e,t){var n=t.node.key,r=$(n,_?"checkbox":"select");null!==r&&m(r.data.value,{selected:!j.includes(r.data.value)}),f||h(!1)},fe=a.useState(null),de=Object(d.a)(fe,2),pe=de[0],me=de[1],he=$(pe);if(a.useImperativeHandle(t,(function(){var e;return{scrollTo:null===(e=V.current)||void 0===e?void 0:e.scrollTo,onKeyDown:function(e){var t;switch(e.which){case w.a.UP:case w.a.DOWN:case w.a.LEFT:case w.a.RIGHT:null===(t=V.current)||void 0===t||t.onKeyDown(e);break;case w.a.ENTER:var n=(null==he?void 0:he.data)||{},r=n.selectable,o=n.value;!1!==r&&se(0,{node:{key:pe},selected:!j.includes(o)});break;case w.a.ESC:h(!1)}},onKeyUp:function(){}}})),0===Y.length)return a.createElement("div",{role:"listbox",className:"".concat(n,"-empty"),onMouseDown:le},v);var ye={};return U&&(ye.loadedKeys=U),ue&&(ye.expandedKeys=ue),a.createElement("div",{onMouseDown:le,onMouseEnter:b},he&&y&&a.createElement("span",{style:C,"aria-live":"assertive"},he.data.value),a.createElement(O.b,Object(r.default)({ref:V,focusable:!1,prefixCls:"".concat(n,"-tree"),treeData:Y,height:o,itemHeight:i,virtual:c,multiple:f,icon:I,showIcon:R,switcherIcon:D,showLine:M,loadData:p?null:B,motion:z,checkable:_,checkStrictly:!0,checkedKeys:J,selectedKeys:_?[]:X,defaultExpandAll:T},ye,{onActiveChange:me,onSelect:se,onCheck:se,onExpand:function(e){re(e),ce(e),L&&L(e)},onLoad:G,filterTreeNode:function(e){return!!Z&&String(e[F]).toLowerCase().includes(Z)}})))},P=a.forwardRef(N);P.displayName="OptionList";var T=P,A=function(){return null},L=n(55),I=n(197);function R(e){return Object(I.a)(e).map((function(e){if(!a.isValidElement(e)||!e.type)return null;var t=e.key,n=e.props,r=n.children,o=n.value,i=Object(L.a)(n,["children","value"]),c=Object(p.a)({key:t,value:o},i),u=R(r);return u.length&&(c.children=u),c})).filter((function(e){return e}))}function D(e){if(!e)return e;var t=Object(p.a)({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Object(_.a)(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function M(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}function F(e,t){var n=new Map;return t.forEach((function(e){var t=e.data;n.set(t.value,t)})),e.map((function(e){return D(n.get(e))}))}function B(e){return e.disabled||e.disableCheckbox||!1===e.checkable}function U(e){for(var t=0,n=e.parent;n;)n=n.parent,t+=1;return t}function z(e){var t=Object(y.d)(function e(t){return(t||[]).map((function(t){var n=t.value,r=t.key,o=t.children,a=Object(p.a)(Object(p.a)({},t),{},{key:"key"in t?r:n});return o&&(a.children=e(o)),a}))}(e),!0);return t.map((function(e){return{key:e.data.key,data:e.data,level:U(e)}}))}function G(e,t,n,r){var o=new Map;return M(t).forEach((function(e){e&&"object"===Object(f.a)(e)&&"value"in e&&o.set(e.value,e)})),e.map((function(e){var t={value:e},a=n(e,"select",!0),i=a?r(a.data):e;if(o.has(e)){var c=o.get(e);t.label="label"in c?c.label:i,"halfChecked"in c&&(t.halfChecked=c.halfChecked)}else t.label=i;return t}))}function V(e,t){new Set;return function e(n){return(n||[]).map((function(n){var r=n.key,o=n.value,a=n.children,i=Object(L.a)(n,["key","value","children"]),c="value"in n?o:r,u=Object(p.a)(Object(p.a)({},i),{},{key:null!=r?r:c,value:c,title:t(n)});return"children"in n&&(u.children=e(a)),u}))}(e)}function Y(e,t,n){var r=n.getLabelProp,o=n.simpleMode,i=a.useRef({});return e?(i.current.formatTreeData=i.current.treeData===e?i.current.formatTreeData:V(o?function(e,t){var n=t.id,r=t.pId,o=t.rootPId,a={},i=[];return e.map((function(e){var t=Object(p.a)({},e),r=t[n];return a[r]=t,t.key=t.key||r,t})).forEach((function(e){var t=e[r],n=a[t];n&&(n.children=n.children||[],n.children.push(e)),(t===o||!n&&null===o)&&i.push(e)})),i}(e,Object(p.a)({id:"id",pId:"pId",rootPId:null},!0!==o?o:{})):e,r),i.current.treeData=e):i.current.formatTreeData=i.current.children===t?i.current.formatTreeData:V(R(t),r),i.current.formatTreeData}var q="SHOW_ALL",H="SHOW_PARENT",W="SHOW_CHILD";function K(e,t,n){var r=new Set(e);return t===W?e.filter((function(e){var t=n[e];return!(t&&t.children&&t.children.every((function(e){var t=e.node;return B(t)||r.has(t.key)})))})):t===H?e.filter((function(e){var t=n[e],o=t?t.parent:null;return!(o&&!B(o.node)&&r.has(o.node.key))})):e}var $=["expandedKeys","treeData","treeCheckable","showCheckedStrategy","searchPlaceholder","treeLine","treeIcon","showTreeIcon","switcherIcon","treeNodeFilterProp","filterTreeNode","dropdownPopupAlign","treeDefaultExpandAll","treeCheckStrictly","treeExpandedKeys","treeLoadedKeys","treeMotion","onTreeExpand","onTreeLoad","loadData","treeDataSimpleMode","treeNodeLabelProp","treeDefaultExpandedKeys"],Q=Object(m.a)({prefixCls:"rc-tree-select",components:{optionList:T},convertChildrenToData:function(){return null},flattenOptions:z,getLabeledValue:h.e,filterOptions:function(e,t,n){var r,o=n.optionFilterProp,a=n.filterOption;return!1===a?t:(r="function"==typeof a?a:function(e){return function(t,n){var r=n[e];return String(r).toLowerCase().includes(String(t).toLowerCase())}}(o),function t(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.map((function(n){var a=n.children,i=o||r(e,D(n)),c=t(a||[],i);return i||c.length?Object(p.a)(Object(p.a)({},n),{},{children:c}):null})).filter((function(e){return e}))}(t))},isValueDisabled:function(e,t){var n=F([e],t)[0];return!!n&&n.disabled},findValueOption:F,omitDOMProps:function(e){var t=Object(p.a)({},e);return $.forEach((function(e){delete t[e]})),t}});Q.displayName="Select";var X=a.forwardRef((function(e,t){var n=e.multiple,o=e.treeCheckable,i=e.treeCheckStrictly,c=e.showCheckedStrategy,u=void 0===c?"SHOW_CHILD":c,l=e.labelInValue,p=e.loadData,m=e.treeLoadedKeys,h=e.treeNodeFilterProp,w=void 0===h?"value":h,E=e.treeNodeLabelProp,O=e.treeDataSimpleMode,j=e.treeData,C=e.treeExpandedKeys,N=e.treeDefaultExpandedKeys,P=e.treeDefaultExpandAll,T=e.children,L=e.treeIcon,I=e.showTreeIcon,R=e.switcherIcon,D=e.treeLine,F=e.treeMotion,B=e.filterTreeNode,U=e.dropdownPopupAlign,V=e.onChange,q=e.onTreeExpand,H=e.onTreeLoad,W=e.onDropdownVisibleChange,$=e.onSelect,X=e.onDeselect,J=o||i,Z=n||J,ee=o&&!i,te=i||l,ne=a.useRef(null);a.useImperativeHandle(t,(function(){return{scrollTo:ne.current.scrollTo,focus:ne.current.focus,blur:ne.current.blur}}));var re=function(e){return j&&e.label||e.title},oe=function(e){return E?e[E]:re(e)},ae=Y(j,T,{getLabelProp:re,simpleMode:O}),ie=S(Object(a.useMemo)((function(){return z(ae)}),[ae])),ce=Object(d.a)(ie,2),ue=k(ce[0],ce[1]),le=Object(d.a)(ue,2),se=le[0],fe=le[1],de=Object(a.useMemo)((function(){return ee?Object(y.a)(ae):{keyEntities:null}}),[ae,o,i]).keyEntities,pe=Object(g.a)(e.defaultValue,{value:e.value}),me=Object(d.a)(pe,2),he=me[0],ye=me[1],ve=function(e){var t=[],n=[];return e.forEach((function(e){fe(e)?n.push(e):t.push(e)})),{missingRawValues:t,existRawValues:n}},be=Object(a.useMemo)((function(){var e=[],t=[];if(M(he).forEach((function(n){if(n&&"object"===Object(f.a)(n)&&"value"in n)if(n.halfChecked&&i){var r=fe(n.value);e.push(r?r.key:n.value)}else t.push(n.value);else t.push(n)})),ee){var n=ve(t),r=n.missingRawValues,o=n.existRawValues.map((function(e){return fe(e).key})),a=Object(v.a)(o,!0,de),c=a.checkedKeys,u=a.halfCheckedKeys;return[[].concat(Object(s.a)(r),Object(s.a)(c.map((function(e){return se(e).data.value})))),u]}return[t,e]}),[he,Z,te,o,i]),ge=Object(d.a)(be,2),_e=ge[0],we=ge[1],Ee=function(e,t){var n=t.value,r=t.getEntityByValue,o=t.getEntityByKey,i=t.treeConduction,c=t.showCheckedStrategy,u=t.conductKeyEntities,l=t.getLabelProp;return a.useMemo((function(){var t=e;return i&&(t=K(e.map((function(e){var t=r(e);return t?t.key:e})),c,u).map((function(e){var t=o(e);return t?t.data.value:e}))),G(t,n,r,l)}),[e,n,i,c,r])}(_e,{treeConduction:ee,value:he,showCheckedStrategy:u,conductKeyEntities:de,getEntityByValue:fe,getEntityByKey:se,getLabelProp:oe}),Oe=function(e,t,n){if(ye(Z?e:e[0]),V){var r=e;if(ee&&"SHOW_ALL"!==u){var o=K(e.map((function(e){var t=fe(e);return t?t.key:e})),u,de);r=o.map((function(e){var t=se(e);return t?t.data.value:e}))}var c=t||{triggerValue:void 0,selected:void 0},l=c.triggerValue,f=c.selected,d=te?G(r,he,fe,oe):r;if(i){var p=we.map((function(e){var t=se(e);return t?t.data.value:e})).filter((function(e){return!r.includes(e)}));d=[].concat(Object(s.a)(d),Object(s.a)(G(p,he,fe,oe)))}var m={preValue:Ee,triggerValue:l},h=!0;(i||"selection"===n&&!f)&&(h=!1),function(e,t,n,r,o){var i=null,c=null;function u(){c||(c=[],function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.map((function(r,l){var s="".concat(o,"-").concat(l),f=n.includes(r.value),d=e(r.children||[],s,f),p=a.createElement(A,r,d.map((function(e){return e.node})));if(t===r.value&&(i=p),f){var m={pos:s,node:p,children:d};return u||c.push(m),m}return null})).filter((function(e){return e}))}(r),c.sort((function(e,t){var r=e.node.props.value,o=t.node.props.value;return n.indexOf(r)-n.indexOf(o)})))}Object.defineProperty(e,"triggerNode",{get:function(){return Object(_.a)(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),u(),i}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return Object(_.a)(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),u(),o?c:c.map((function(e){return e.node}))}})}(m,l,e,ae,h),J?m.checked=f:m.selected=f,V(Z?d:d[0],te?null:r.map((function(e){var t=fe(e);return t?oe(t.data):null})),m)}},xe=a.useCallback((function(e){if(W){var t={};Object.defineProperty(t,"documentClickClose",{get:function(){return Object(_.a)(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),W(e,t)}}),[W]);var je={optionLabelProp:null,optionFilterProp:w,dropdownAlign:U,internalProps:{mark:b.a,onClear:function(){Oe([],null,"clear")},skipTriggerChange:!0,skipTriggerSelect:!0,onRawSelect:function(e,t,n){var r=e;if(Z){var o=function(e,t){var n=new Set(e);return n.add(t),Array.from(n)}(_e,e);if(ee){var a=ve(o),i=a.missingRawValues,c=a.existRawValues.map((function(e){return fe(e).key})),u=Object(v.a)(c,!0,de).checkedKeys;o=[].concat(Object(s.a)(i),Object(s.a)(u.map((function(e){return se(e).data.value}))))}Oe(o,{selected:!0,triggerValue:e},n)}else Oe([e],{selected:!0,triggerValue:e},n);$&&$(r,t)},onRawDeselect:function(e,t,n){var r=e,o=function(e,t){var n=new Set(e);return n.delete(t),Array.from(n)}(_e,e);if(ee){var a=ve(o),i=a.missingRawValues,c=a.existRawValues.map((function(e){return fe(e).key})),u=Object(v.a)(c,{checked:!1,halfCheckedKeys:we},de).checkedKeys;o=[].concat(Object(s.a)(i),Object(s.a)(u.map((function(e){return se(e).data.value}))))}Oe(o,{selected:!1,triggerValue:e},n),X&&X(r,t)}}};return"filterTreeNode"in e&&(je.filterOption=B),a.createElement(x.Provider,{value:{checkable:J,loadData:p,treeLoadedKeys:m,onTreeLoad:H,checkedKeys:_e,halfCheckedKeys:we,treeDefaultExpandAll:P,treeExpandedKeys:C,treeDefaultExpandedKeys:N,onTreeExpand:q,treeIcon:L,treeMotion:F,showTreeIcon:I,switcherIcon:R,treeLine:D,treeNodeFilterProp:w}},a.createElement(Q,Object(r.default)({ref:ne,mode:Z?"multiple":null},e,je,{value:Ee,labelInValue:!0,options:ae,onChange:null,onSelect:null,onDeselect:null,onDropdownVisibleChange:xe})))})),J=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).selectRef=a.createRef(),e.focus=function(){e.selectRef.current.focus()},e.blur=function(){e.selectRef.current.blur()},e}return Object(c.a)(n,[{key:"render",value:function(){return a.createElement(X,Object(r.default)({ref:this.selectRef},this.props))}}]),n}(a.Component);J.TreeNode=A,J.SHOW_ALL=q,J.SHOW_PARENT=H,J.SHOW_CHILD=W;var Z=J,ee=n(10),te=n.n(ee),ne=n(126),re=n(257),oe=n(95),ae=n(1322),ie=n(1339),ce=n(132),ue=n(262),le=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},se=function(e,t){var n,i=e.prefixCls,c=e.size,u=e.bordered,l=void 0===u||u,s=e.className,f=e.treeCheckable,d=e.multiple,p=e.listHeight,m=void 0===p?256:p,h=e.listItemHeight,y=void 0===h?26:h,v=e.notFoundContent,b=e.switcherIcon,g=e.treeLine,_=e.getPopupContainer,w=e.dropdownClassName,E=e.treeIcon,O=void 0!==E&&E,x=e.transitionName,j=e.choiceTransitionName,k=void 0===j?"":j,S=le(e,["prefixCls","size","bordered","className","treeCheckable","multiple","listHeight","listItemHeight","notFoundContent","switcherIcon","treeLine","getPopupContainer","dropdownClassName","treeIcon","transitionName","choiceTransitionName"]),C=a.useContext(re.b),N=C.getPopupContainer,P=C.getPrefixCls,T=C.renderEmpty,A=C.direction,L=C.virtual,I=C.dropdownMatchSelectWidth,R=a.useContext(ce.b);Object(oe.a)(!1!==d||!f,"TreeSelect","`multiple` will alway be `true` when `treeCheckable` is true");var D,M=P("select",i),F=P("select-tree",i),B=P("tree-select",i),U=te()(w,"".concat(B,"-dropdown"),Object(o.a)({},"".concat(B,"-dropdown-rtl"),"rtl"===A)),z=!(!f&&!d),G=Object(ae.a)(Object(r.default)(Object(r.default)({},S),{multiple:z,prefixCls:M})),V=G.suffixIcon,Y=G.removeIcon,q=G.clearIcon;D=void 0!==v?v:T("Select");var H=Object(ne.a)(S,["suffixIcon","itemIcon","removeIcon","clearIcon","switcherIcon"]),W=c||R,K=te()(!i&&B,(n={},Object(o.a)(n,"".concat(M,"-lg"),"large"===W),Object(o.a)(n,"".concat(M,"-sm"),"small"===W),Object(o.a)(n,"".concat(M,"-rtl"),"rtl"===A),Object(o.a)(n,"".concat(M,"-borderless"),!l),n),s),$=P();return a.createElement(Z,Object(r.default)({virtual:L,dropdownMatchSelectWidth:I},H,{ref:t,prefixCls:M,className:K,listHeight:m,listItemHeight:y,treeCheckable:f?a.createElement("span",{className:"".concat(M,"-tree-checkbox-inner")}):f,inputIcon:V,multiple:d,removeIcon:Y,clearIcon:q,switcherIcon:function(e){return Object(ie.a)(F,b,g,e)},showTreeIcon:O,notFoundContent:D,getPopupContainer:_||N,treeMotion:null,dropdownClassName:U,choiceTransitionName:Object(ue.b)($,"",k),transitionName:Object(ue.b)($,"slide-up",x)}))},fe=a.forwardRef(se);fe.TreeNode=A,fe.SHOW_ALL=q,fe.SHOW_PARENT=H,fe.SHOW_CHILD=W;t.a=fe},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(2358),s=n(2359),f=n(560),d=n(1297),p=n(952),m={wechat:{desc:__("使用微信扫一扫登录【语雀】"),orgName:__("微信登录"),showLogo:!1},dingtalk:{desc:__("使用钉钉扫一扫登录【语雀】"),orgName:__("钉钉登录"),showLogo:!1}},h=function(e){var t=e.slogonMain,n=e.slogonSub,r=e.className,a=e.showWechatGuide,i=e.showLogo,c=window.appData,h=c.isDesktopApp,y=c.organization,v=c.login,b=void 0===v?{}:v,g=c.settings,_=void 0===g?{}:g,w="pc-web";window.h5?w="h5":h&&(w="desktop");var E=u()("lark","page-account",w,r),O=y&&y.id,x=O?y.name:t,j=!O&&!h&&a&&_.enable_wechat_guide_qrcode,k=n,S=b.platform;if(S&&m[S]){var C=m[S];k=C.desc,i=O,x=O?null:C.orgName}return o.a.createElement("div",{className:E},e.showHead&&o.a.createElement(d.a,e),o.a.createElement("div",{className:"main-wrapper"},o.a.createElement("div",null,o.a.createElement("div",{className:"layout-container"},o.a.createElement("div",{className:u()("lark-form","platform-".concat(S),{"show-logo":i,"in-org":O})},o.a.createElement(l.a,null),o.a.createElement("div",{className:u()("lark-form-main",{"lark-form-main-desktop":h})},o.a.createElement(s.a,null),o.a.createElement("div",{className:"lark-form-warp"},i?o.a.createElement(f.a,{theme:"organization",logoSize:62}):o.a.createElement("div",{className:"account-slogon"},x&&o.a.createElement("h2",{className:"account-slogon-main"},x))),k&&o.a.createElement("p",{className:"account-slogon-subhead"},k),o.a.createElement("div",{className:"lark-form-content form-pro"},e.children)))),j&&o.a.createElement("p",{className:"wechat-guide"},o.a.createElement("a",{href:"/wechat/login_or_register"},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*nZiPRZs4MfYAAAAAAAAAAAAAARQnAQ"}))))),!e.headless&&o.a.createElement(p.a,null))};h.defaultProps={slogonMain:o.a.createElement("span",null,__("语雀")),slogonSub:"",showLogo:!0,logoUrl:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*FsnmRIiTfe0AAAAAAAAAAABkARQnAQ",showWechatGuide:!1},h.propTypes={slogonMain:i.a.node,slogonSub:i.a.node,showLogo:i.a.bool,showHead:i.a.bool,logoUrl:i.a.string,headless:i.a.bool,showWechatGuide:i.a.bool};t.a=h},function(e,t,n){"use strict";n(133);var r=n(31),o=n(0),a=n.n(o),i=n(88),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(149),d=n(1222),p=n(1277),m=n(999),h=n(357),y=n(38),v=n(685),b=n(1919),g=n(91),_="index-module_bookRepoHeader_I61GM",w="index-module_wrapper_riA42",E="index-module_wrapperWithBorder_whBHf",O="index-module_extraPadding_b2SWf",x="index-module_peaceful_XAoMp",j="index-module_colorful_+Qdql",k="index-module_inner_xyW1i",S="index-module_breadcrumb_4Wjn9",C="index-module_breadcrumbGroup_EuleI",N="index-module_tocLink_DjFxO",P="index-module_storageIcon_EXCE6",T="index-module_actions_XG6M7",A="index-module_nav_xD2MM",L="index-module_bookInfo_5i7uX",I="index-module_bookDescription_c+NhX",R="index-module_favActions_zEfeF",D="index-module_floatSubMenu_NFlJD",M="index-module_columnViewHeader_Qa2Sw",F="index-module_treeTocViewHeader_IwFM2",B="index-module_gridViewHeader_p5X5Z";function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V="custom",Y="catalog",q=function(e){var t,n,i,c,u,l,G=e.group,q=e.book,H=e.organization,W=e.globalLink,K=void 0!==W&&W,$=e.btnCreate,Q=e.btnActions,X=e.children,J=e.me,Z=e.showCustomIndex,ee=(e.dispatch,null===(t=window.appData)||void 0===t||null===(n=t.book)||void 0===n||null===(i=n.abilities)||void 0===i?void 0:i.create_doc),te=null===(c=window.appData)||void 0===c||null===(u=c.book)||void 0===u?void 0:u.type,ne="Book"===te||"Column"===te||"Sheet"===te;function re(){return"".concat(q.namespace,"/bookRepo")}var oe,ae=window.appData.sharePage,ie=G.abilities&&G.abilities.read,ce=q.abilities||{},ue=q.enable_custom_index,le=g.default.get(re());oe=le?ue?[le]:["catalog"]:ue?["custom"]:["catalog"];var se,fe=z(Object(o.useState)("custom"===oe[0]),2),de=fe[0],pe=fe[1];function me(){Z(!1),pe(!1),g.default.set(re(),Y)}function he(){Z(!0),pe(!0),g.default.set(re(),V)}return a.a.createElement("div",{className:s()(w,(l={},U(l,E,ne&&(ue||ee)),U(l,O,!ne),U(l,_,ne),U(l,x,q.index_background===f.INDEX_BACKGROUND.peaceful&&ne),U(l,j,q.index_background===f.INDEX_BACKGROUND.colorful&&ne),l)),"data-testid":"book-head"},a.a.createElement("div",{className:"layout-container"},a.a.createElement("div",{className:k},a.a.createElement("div",{className:S},ie&&a.a.createElement("div",{className:C},a.a.createElement(p.a,{organization:H,group:G,showName:!1,size:24})),a.a.createElement(v.a,{group:G,book:q,noGroup:!ie,showBookIcon:!ie,disableClickOnIcon:!0}),!ne&&a.a.createElement(d.a,{globalLink:K,showWatch:!ae})),a.a.createElement("div",{className:T},Q||a.a.createElement(a.a.Fragment,null,ce.share&&a.a.createElement(m.a,{key:"share-book-".concat(q.id),type:"book"}),ce.create_doc&&$),ce.create_doc&&a.a.createElement(h.a.NavMore,{book:q,linkType:K?"a":"dva",group:G,me:J}))),X),ne&&a.a.createElement("div",{className:s()(L,(se={},U(se,B,"Card"===q.layout),U(se,M,"Column"===q.layout),U(se,F,"Book"===q.layout),se))},a.a.createElement("h1",null,q.name),a.a.createElement("p",{className:I},q.description),a.a.createElement("div",{className:I},a.a.createElement(b.a,{users:q.contributors,canEdit:q.abilities.create_doc,bookId:q.id})),a.a.createElement("div",{className:R},a.a.createElement(d.a,{globalLink:K,showWatch:!ae,reversed:!0})),(ue||ee)&&a.a.createElement(r.a,{mode:"horizontal",className:A,defaultSelectedKeys:oe},ue&&a.a.createElement(r.a.Item,{key:"custom",onClick:he},__("首页")),a.a.createElement(r.a.Item,{key:"catalog",onClick:me},__("目录"))),!de&&ee&&a.a.createElement("div",{className:D},a.a.createElement("a",{href:"/".concat(q.namespace,"/toc?tempStore=1"),className:N,"data-testid":"temp-store"},a.a.createElement(y.b,{className:P,name:"book-temporary-storage",width:16,height:16}),__("全部文档")),a.a.createElement("a",{href:"/".concat(q.namespace,"/toc"),className:N,"data-testid":"catalog-manage"},a.a.createElement("span",{className:"lake-icon lake-icon-manage-catalog"}),__("目录管理"))),de&&ee&&a.a.createElement("div",{className:D},a.a.createElement("a",{href:"/r/".concat(q.namespace,"/index/edit")},a.a.createElement("span",{className:"lake-icon lake-icon-edit-new"}),__("编辑自定义首页")))))};q.propTypes={group:u.a.object,book:u.a.object,organization:u.a.object,globalLink:u.a.bool,btnCreate:u.a.node,btnActions:u.a.node,children:u.a.node,me:u.a.object,showCustomIndex:u.a.func};t.a=Object(i.d)((function(e){return{group:e.group,book:e.book,organization:e.organization,me:e.me}}))(q)},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(1e3),s=n(254),f=n(1273),d=n(124),p=n(317),m=function(e){var t=e.doc,n=e.group,r=e.onClose,a=e.isShare,i=e.onCreateComment,c=e.onRemoveComment,u=a?"share":"read";return o.a.createElement("div",{className:p.a.contentWrapper},o.a.createElement("div",{className:p.a.content,"data-testid":"reader-infobar-content"},o.a.createElement("div",{className:p.a.header},o.a.createElement("span",{className:p.a.title},__("评论")),o.a.createElement("div",null,o.a.createElement("a",{className:p.a.btnClose,onClick:function(){r(!1)}},o.a.createElement(s.a,null)))),o.a.createElement("div",{key:u,className:p.a.body},o.a.createElement(f.a,{commentableType:"Doc",target:t,canMentionMembers:d.a.canMentionMembers(u,{group:n}),onCreate:i,onRemove:c,useMiniGuide:!0,size:"mini"}))))};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t,n=e.group,a=e.doc,i=e.isShare,c=e.onCreateComment,s=e.className,f=e.onRemoveComment,d=e.showCornerBubble,h=b(Object(r.useState)(!!e.visible),2),g=h[0],_=h[1],w=b(Object(r.useState)(!1),2),E=w[0],O=w[1],x=Object(r.useRef)(null),j=function(t){_(t),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),150),e.onVisibleChange(t)};Object(r.useEffect)((function(){window.location.hash.startsWith("#comment-")&&j(!0)}),[]),Object(r.useEffect)((function(){j(e.visible)}),[e.visible]);var k=Object(r.useCallback)((function(e){var t=e.detail||{};x.current&&t.editorNode&&x.current.contains(t.editorNode)&&O(t.isFullscreen)}),[]);return Object(r.useEffect)((function(){return window.addEventListener("neEditorFullscreenStatusChange",k),function(){window.removeEventListener("neEditorFullscreenStatusChange",k)}}),[]),o.a.createElement("div",{className:u()(p.a.wrapper,s,p.a.commentBubble,(t={},v(t,p.a.wrapperActive,g),v(t,p.a.fullscreenWrapper,E),t)),ref:x},!g&&d&&o.a.createElement(l.a,{iconName:"comment-bubble",style:y({bottom:"86px"},e.bubbleStyle),onClick:function(){j(!0)},count:a.comments_count>0&&a.comments_count}),g&&o.a.createElement(m,{doc:a,group:n,isShare:i,onCreateComment:c,onRemoveComment:f,onClose:function(){j(!1)}}))};_.defaultProps={onCreateComment:function(){},onRemoveComment:function(){},showCornerBubble:!0,bubbleStyle:{},onVisibleChange:function(){}},_.propTypes={className:i.a.string,group:i.a.object.isRequired,doc:i.a.object.isRequired,isShare:i.a.bool,onCreateComment:i.a.func,onRemoveComment:i.a.func,showCornerBubble:i.a.bool,bubbleStyle:i.a.object,onVisibleChange:i.a.func};t.a=_},function(e,t,n){"use strict";n(162),n(526),n(903)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(2354),u=n(666),l=n(2262),s=n(589),f=n(34);function d(e){var t=function(e){if(!e)return{};var t="";return t=e.abilities&&e.abilities.update?"OWNER":e.is_paid?"PAID":"UNPAID",{premium:{price:e.premium_price,daysCount:e.premium_days_count,role:t,expired:e.premium_expired},skylark:{docID:e.id}}};return o.a.createElement("div",{className:l.a.fullscreenWrap},o.a.createElement(u.a,{doc:e.doc,docDomain:e.docDomain,readonly:e.readonly,renderVersion:function(n){return o.a.createElement(s.b,{key:"version-".concat(n.id),id:"version-".concat(n.id),content:n.content,genOutline:!1,genAnchor:!1,doc:n,meta:t(e.doc),fallbackLake:!0,disableDynamicCardFunction:!0})},renderDiff:function(e,t){return o.a.createElement(c.a,{head:e.content_html,base:t.content_html})},onCancel:e.onCancel,onRevert:e.onRevert,onReverted:e.onReverted,docProxy:f.a.docs,docletProxy:f.a.doclets,docVersionProxy:f.a.docVersions}))}d.propTypes={doc:i.a.object.isRequired,onCancel:i.a.func.isRequired,docDomain:i.a.string,onRevert:i.a.func,onReverted:i.a.func,readonly:i.a.bool},t.a=d},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){Object(r.useEffect)((function(){var n=document.querySelector('meta[name="'.concat(e,'"]'));n?n.content=t:((n=document.createElement("meta")).name=e,n.content=t,document.head.appendChild(n))}),[e,t])}},function(e,t,n){"use strict";n(175);var r=n(84),o=(n(96),n(23)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(38),d=(n(79),n(44)),p=(n(246),n(110)),m=(n(50),n(19)),h=(n(611),n(422)),y=(n(148),n(53)),v=(n(696),n(319)),b=n(2029),g=n(113),_=n(2218),w=(n(245),n(64)),E=(n(133),n(31)),O=n(348),x={selectorRole:"RoleSelector-module_selectorRole_FouP7",btn:"RoleSelector-module_btn_jYixR"};function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=e.roles,n=e.onChange,r=e.defaultRole||t[0],o=j(Object(a.useState)(r),2),c=o[0],u=o[1];if(c){return i.a.createElement(w.a,{trigger:["click"],overlayClassName:x.selectorRole,className:x.dropdown,overlay:i.a.createElement(E.a,{selectedKeys:["".concat(c.key)]},t.map((function(e){return i.a.createElement(E.a.Item,{key:e.key,onClick:function(){!function(e){u(e),n(e)}(e)}},i.a.createElement("span",null,i.a.createElement("span",null,e.label)))})))},i.a.createElement(m.a,{className:x.btn},c.label," ",i.a.createElement(O.a,null)))}}S.propTypes={defaultRole:u.a.object,roles:u.a.array.isRequired,onChange:u.a.func.isRequired};var C=S,N={modal:"index-module_modal_CpUxT",listContainer:"index-module_listContainer_InRcG",deptContainer:"index-module_deptContainer_3YP+h",selectRow:"index-module_selectRow_NP0cR",footer:"index-module_footer_JLJu-",departmentListItem:"index-module_departmentListItem_3zsSS",delete:"index-module_delete_xKR+L",disabled:"index-module_disabled_Uh5JX",nav:"index-module_nav_WHfs5",addListItem:"index-module_addListItem_MFOQm",departmentName:"index-module_departmentName_z1929",name:"index-module_name_C1Fme",roleLabel:"index-module_roleLabel_PNv6b",label:"index-module_label_0YuCD",departmentRole:"index-module_departmentRole_z5sGd",departmentRoleText:"index-module_departmentRoleText_xs61O",children:"index-module_children_qOP+M",deleteTip:"index-module_deleteTip_RBW1+",subtitle:"index-module_subtitle_zyO3D",addBtn:"index-module_addBtn_ARHHb",addBy:"index-module_addBy_SqUrC",optionItem:"index-module_optionItem_syEG2"},P=(n(60),n(24)),T=n(34),A=n(502),L=n(49);function I(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=U(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e){var t=window.appData,n=t.organization,r=void 0===n?{}:n,o=t.isYuque,i=o?r.name:__("阿里巴巴集团"),c=o&&r.address_book_type===L.ADDRESS_BOOK_TYPE.yuque?0:"1",u=B(Object(a.useState)({}),2),l=u[0],s=u[1],f=B(Object(a.useState)(F({},c,{name:i,id:c})),2),d=f[0],p=f[1],m=e.book?"book":"group",h=Object(A.c)(m).filter((function(e){return"owner"!==e.key})),y=B(Object(a.useState)([c]),2),v=y[0],b=y[1],g=B(Object(a.useState)([]),2),_=g[0],w=g[1],E=B(Object(a.useState)({}),2),O=E[0],x=E[1],j=B(Object(a.useState)(h[0].value),2),k=j[0],S=j[1],C=B(Object(a.useState)(!1),2),N=C[0],D=C[1],U=B(Object(a.useState)({}),2),z=U[0],G=U[1],V=B(Object(a.useState)(o?0:1),2),Y=V[0],q=V[1],H=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=function(e){e=e.map((function(e){return e.roleLabel=Object(A.b)(m,e.role).label,e})),w(e),t&&D(!e.length)};if(e.group){if(!e.group.abilities||!e.group.abilities.manage)return;return T.a.groupDepartments.find({target_id:e.group.id,target_type:"User"}).then(n)}if(e.book){if(!e.book.abilities||!e.book.abilities.manage)return;T.a.groupDepartments.find({target_id:e.book.id,target_type:"Book"}).then(n)}};Object(a.useEffect)((function(){var e;e=v[v.length-1],l[e]||T.a.departments.find({parent_id:e}).then((function(t){var n=M({},l);n[e]=t;var r,o=M({},d),a=R(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(o[i.id]=i,i.parents){var c,u=R(i.parents);try{for(u.s();!(c=u.n()).done;){var f=c.value;o[f.id]=f}}catch(m){u.e(m)}finally{u.f()}}i.userDepartment&&G(i)}}catch(m){a.e(m)}finally{a.f()}s(n),p(o)}))}),[v]),Object(a.useEffect)((function(){H(!0)}),[]);return{state:{departmentChildren:l,departments:d,currentDepartments:v,targetDepartments:_,selectedDepartments:O,selectedRole:k,addMode:N,userDepartment:z,memberType:Y},roles:h,setSelectedRole:S,navToDepartment:function(e){b(v.slice(0,e+1))},selectDepartment:function(e){var t=M({},O);t[e.id]?delete t[e.id]:t[e.id]=!0,x(t)},openDepartment:function(e){if(z&&e.id===z.id&&z.parents&&z.parents.length>0)return b([c].concat(I(z.parents.map((function(e){return e.id}))),[e.id]));b([].concat(I(v),[e.id]))},addDepartments:function(){var t=_.map((function(e){return e.department_id})),n=Object.keys(O).filter((function(e){return!t.includes(e)})),r=function(t){x({}),t||P.a.success(__("添加成功")),e.onCancel(),e.onChange()};Promise.all(n.map((function(t){return e.group?T.a.groupDepartments.create({role:k,member_type:Y?1:0,department_id:t,target_id:e.group.id,target_type:"User"}):T.a.groupDepartments.create({role:k,department_id:t,member_type:Y?1:0,target_id:e.book.id,target_type:"Book"})}))).then((function(){return r()})).catch(r)},destroyDepartment:function(t){T.a.groupDepartments.destroy({id:t.id}).then((function(){P.a.success(__("删除成功")),H(),e.onChange()}))},switchAddMode:function(){D(!0)},changeMemberType:function(e){q(e)},setSelectedDepartments:x}}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e){var t=G(e),n=t.state,r=t.navToDepartment,o=t.selectDepartment,a=t.openDepartment,c=t.addDepartments,u=t.destroyDepartment,l=t.switchAddMode,f=t.setSelectedRole,w=t.changeMemberType,E=t.setSelectedDepartments,O=t.roles,x=e.visible,j=e.onCancel,k=n.targetDepartments.map((function(e){return e.department_id}));var S=function(){var e=n.currentDepartments[n.currentDepartments.length-1],t=n.departments[e],r=!!n.targetDepartments.find((function(e){return String(t.id)===String(e.department_id)})),c=n.departmentChildren[e]||[],u=[Y(Y({},t),{},{noChildren:!0})].concat(H(c.filter((function(e){return e.id!==t.id}))));return i.a.createElement("div",null,i.a.createElement(h.a,{justify:"block",dataSource:u,renderItem:function(e){var t=!!n.selectedDepartments[e.id]||r,c=!!n.targetDepartments.find((function(t){return String(e.id)===String(t.department_id)})),u=t||c,l=c||"projects"===e.id||r;return i.a.createElement("div",{className:N.addListItem},i.a.createElement("div",{"data-testid":"department-name"},i.a.createElement(y.a,{className:N.departmentName,value:e.id,checked:u,disabled:l,onChange:function(){return o(e)}},i.a.createElement("span",null,e.name))),!e.noChildren&&i.a.createElement("div",{className:N.children},i.a.createElement("span",{className:s()("icon icon-organization",q({},N.disabled,u||l)),"data-testid":"department-children",onClick:function(){return function(e,t){t||a(e)}(e,u||l)}},i.a.createElement("span",{className:"larkicon larkicon-subordinate"}),i.a.createElement("span",null,__("下级")))))}}))};var P,T=function(){return e.book?i.a.createElement("div",{className:N.subtitle},__("绑定后，部门成员访问该知识库时将自动成为知识库成员")):e.group?i.a.createElement("div",{className:N.subtitle},__("绑定部门后，部门成员访问该团队时将自动成为团队成员，未访问过的成员不生效。")):void 0};function A(){return i.a.createElement("div",{className:N.listContainer,"data-testid":"container"},(e=n.currentDepartments.map((function(e,t){var o=n.departments[e];if(o)return i.a.createElement(v.a.Item,{key:e,onClick:function(){return r(t)}},o.name)})).filter((function(e){return!!e})),i.a.createElement("div",{className:N.nav},i.a.createElement(v.a,null,e))),S());var e}function L(){return g.a.enableContacts()?i.a.createElement(_.a,{containerClassName:N.deptContainer,onSelect:function(e){var t=e.reduce((function(e,t){return e[t]=t,e}),{});E(t)},defaultSelected:n.targetDepartments.map((function(e){return e.department_id})),disabledKeys:n.targetDepartments.map((function(e){return e.department_id})),treeClassName:N.deptTree,disableRoot:!0,disableSelectAll:!0}):A()}return i.a.createElement(d.a,{className:N.modal,width:460,title:__("绑定部门成员"),footer:null,visible:x,onCancel:j},n.addMode?i.a.createElement("div",{className:N.container},T(),i.a.createElement("div",{className:N.listContainer,"data-testid":"container"},L()),i.a.createElement("div",{className:N.selectRow},i.a.createElement("span",{className:N.addBy},__("添加为：")),i.a.createElement(C,{roles:O,onChange:function(e){f(e.value)}}),!window.appData.isYuque&&i.a.createElement(y.a,{className:N.optionItem,checked:n.memberType,onChange:function(e){w(e.target.checked)},"data-testid":"member-type"},i.a.createElement("span",null,__("只添加正式员工")))),(P=0===Object.keys(n.selectedDepartments).filter((function(e){return!k.includes(e)})).length,i.a.createElement("div",{className:N.footer},i.a.createElement(m.a,{type:"primary",className:N.addBtn,onClick:function(){return c()},"data-testid":"add-department",disabled:P},__("确认")),i.a.createElement(m.a,{onClick:j},__("取消"))))):i.a.createElement("div",{className:N.container},T(),i.a.createElement("div",{className:N.listContainer,"data-testid":"container"},i.a.createElement(h.a,{justify:"block",className:N.list,dataSource:n.targetDepartments,renderItem:function(e){var t=__("删除后即解除与{departmentName}的关联；已加入的成员需单独删除，确定删除吗？",{departmentName:e.department_name}),n=i.a.createElement("div",{className:N.deleteTip},t),r=e.meta&&e.meta.member_type===b.MEMBER_TYPE.member?__("正式员工"):__("所有成员");return i.a.createElement("div",{className:N.departmentListItem,"date-testid":"department-item"},i.a.createElement("span",{className:"".concat(N.departmentName," ").concat(N.label),"date-testid":"department-item-name"},i.a.createElement("span",{className:"".concat(N.name," ").concat(e.roleLabel&&N.roleLabel)},e.department_name),e.roleLabel&&i.a.createElement("span",{className:N.departmentRole},__("将{memberType}添加为:",{memberType:r}),i.a.createElement("span",{className:N.departmentRoleText},e.roleLabel))),i.a.createElement(p.a,{className:N.delete,placement:"bottomRight",title:n,onConfirm:function(){return u(e)},okText:__("确定"),cancelText:__("取消")},i.a.createElement("a",{"date-testid":"department-item-action"},__("删除"))))}})),e.canBind&&i.a.createElement(m.a,{onClick:function(){return l()},"data-testid":"bind-department",block:!0},__("选择部门绑定"))))}K.defaultProps={onCancel:function(){},onChange:function(){}},K.propTypes={group:u.a.object,book:u.a.object,visible:u.a.bool,onCancel:u.a.func,onChange:u.a.func};var $=K;function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J={bindMember:"index-module_bindMember_cE1Vk",bindIcon:"index-module_bindIcon_0rFKn",simpleMode:"index-module_simpleMode_brGSs",active:"index-module_active_z9Z2J",tips:"index-module_tips_YjWTe"};function Z(e){var t,n,c,u=function(e){var t=e.hasCustomPassport,n=window.appData.organization,r=Q(Object(a.useState)(!1),2),o=r[0],i=r[1],c=Q(Object(a.useState)(null),2),u=c[0],l=c[1],s=Q(Object(a.useState)(!1),2),f=s[0],d=s[1],p=!!e.book,m=function(){if(e.group){if(!e.group.abilities||!e.group.abilities.manage)return;T.a.groupDepartments.find({target_id:e.group.id,target_type:"User"}).then((function(e){l(e)}))}else if(e.book){if(!e.book.abilities||!e.book.abilities.manage)return;T.a.groupDepartments.find({target_id:e.book.id,target_type:"Book"}).then((function(e){l(e)}))}};Object(a.useEffect)((function(){var t;(window.appData.canBindDepartment||null!==(t=e.group)&&void 0!==t&&t.canBindDepartment)&&m()}),[]),Object(a.useEffect)((function(){var r,o=!1;u&&(u.length>0||g.a.enableAddressbook(n)||t)&&(o=!0),window.appData.canBindDepartment||null!==(r=e.group)&&void 0!==r&&r.canBindDepartment||(o=!1),d(o)}),[u,t]);var h=__("绑定部门成员"),y=g.a.enableAddressbook(n)||t;return u&&u.length>0&&(h=1===u.length?__(p?"已绑定 {department}":"已绑定 {department} 部门成员",{department:u[0].department_name}):__("已绑定多个部门")),{state:{show:o,departments:u,showEndpoint:f,simpleMode:p},toggle:function(){i(!o)},bindText:h,canBind:y,bound:u&&u.length>0,handleAddMemberChange:function(){m()}}}(e),l=u.state,d=u.bindText,p=u.handleAddMemberChange,m=u.canBind,h=u.toggle,y=u.bound;return i.a.createElement(i.a.Fragment,null,l.showEndpoint&&(l.simpleMode?i.a.createElement("a",{href:"#",className:s()(J.bindMember,J.simpleMode),onClick:h,"data-testid":"bind-text"},i.a.createElement(o.a,{title:d||__("绑定部门")},i.a.createElement("span",{className:s()(J.bindIcon,(t={},n=J.active,c=y,n in t?Object.defineProperty(t,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[n]=c,t))},i.a.createElement(f.b,{name:"architecture",width:20})))):i.a.createElement("span",{className:J.content},i.a.createElement("a",{href:"#",className:J.bindMember,onClick:h,"data-testid":"bind-text"},i.a.createElement("span",{className:J.bindIcon},i.a.createElement(f.b,{name:"architecture",width:16})),i.a.createElement(r.a,{content:i.a.createElement("span",{className:J.tips},__("绑定部门后，部门成员访问该团队时将自动成为团队成员，未访问过的成员不生效。")),trigger:"hover"},i.a.createElement("span",null,d))))),l.show&&i.a.createElement($,{visible:l.show,onCancel:h,group:e.group,book:e.book,canBind:m,onChange:p}))}Z.propTypes={group:u.a.object,book:u.a.object};t.a=Z},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(88);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(i,e);var t,n,r,a=d(i);function i(){var e;l(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(m(e=a.call.apply(a,[this].concat(n))),"handleTitleClick",(function(){!0!==e.props.disableGoTo&&("function"!=typeof e.props.goTo?window.history.back():e.props.goTo())})),e}return t=i,(n=[{key:"render",value:function(){var e=window.appData,t=e.isAlipayWebApp,n=e.isDingTalkMiniApp,r=e.isYuqueMobileApp;if(t||n||r)return null;var a=this.props,i=a.title,c=a.titleAlignment,u=a.disableGoTo,l=a.extraActions,s=a.style,f=void 0===s?{}:s;return o.a.createElement("div",{className:"m-header-back",style:f},o.a.createElement("div",{className:"m-header-back-content"},o.a.createElement("div",{className:"btn-back",onClick:this.handleTitleClick},!u&&o.a.createElement("span",{className:"m-larkicon m-larkicon-arrow-left"}),"center"!==c&&o.a.createElement("div",{className:"m-btn-title"},i)),"center"===c&&o.a.createElement("div",{className:"m-header-title center"},i),l&&o.a.createElement("div",{className:"actions"},this.props.extraActions)))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.PureComponent);v.propTypes={title:i.a.node,titleAlignment:i.a.string,disableGoTo:i.a.bool,goTo:i.a.func,extraActions:i.a.node,style:i.a.object};t.a=Object(c.d)((function(e){return e}))(v)},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(191);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return i({},e,{command:function(){return{}},apply:function(t){t(e)}})}var u,l,s=a(a(a(a(a(a(a(a(a(a(a(a(a(a(a(a(a(a({},c("hr")),c("quote")),c("save")),c("bold")),c("italic")),c("strikethrough")),c("underline")),c("undo")),c("redo")),c("indent")),c("outdent")),c("clearColor")),c("clearBgColor")),c("taskList")),c("orderedList")),c("unorderedList")),c("breakLine")),{},{focus:{command:function(e){return{pos:e}},apply:function(e,t){var n=t.pos;n?e("focus",{pos:n}):e("focus")}},heading:{command:function(e){return{level:e}},apply:function(e,t){var n=t.level;e("style","h".concat(n))}},text:{command:function(){return{}},apply:function(e){e("style","p")}},fontsize:{command:function(e){return{size:e}},apply:function(e,t){e("fontsize",t.size)}},color:{command:function(e){return{color:e}},apply:function(e,t){e("color",t.color,"#262626")}},bgColor:{command:function(e){return{color:e}},apply:function(e,t){e("bgColor",t.color,"#ffffff")}},alignment:{command:function(e){return{alignment:e}},apply:function(e,t){e("alignment",t.alignment)}},lineheight:{command:function(e){return{height:e}},apply:function(e,t){e("lineheight",t.height)}},alert:{command:function(e){return{alertType:e}},apply:function(e,t){e("alert",t.alertType)}},insertCard:{command:function(e,t,n){return{name:e,value:t,focus:n}},apply:function(e,t){e("insertCard",t.name,t.value,t.focus)}},setCardValue:{command:function(e,t,n){return{isAutoMode:e,cardNodeId:t,newValue:n}},apply:function(e,t){e("setCardValue",t.isAutoMode,t.cardNodeId,t.newValue)}},getCardValue:{command:function(e){return{cardNodeId:e}},apply:function(e,t){e("queryCommandValue","cardValue",t.cardNodeId)}},setLabelCardValue:{command:function(e,t,n){return{cardNodeId:e,labelText:t,colorIndex:n}},apply:function(e,t){e("setCardValue",!0,t.cardNodeId,{label:t.labelText,colorIndex:t.colorIndex})}},insertBookmark:{command:function(e,t){return{src:e,text:t}},apply:function(e,t){e("insertBookmark",t)}},image:{command:function(e,t,n,r){return{url:e,fileName:t,fileSize:n,ocrLocations:r}},apply:function(e,t){e("insertImage",t)}},video:{command:function(e,t,n,r){return{filename:e,size:t,video_id:n,url:r}},apply:function(e,t){e("insertVideo",t)}},file:{command:function(e){return{src:e.filePath,name:e.fileName,size:e.fileSize}},apply:function(e,t){e("insertFile",t)}},table:{command:function(e,t,n){return{row:e,col:t,width:n}},apply:function(e,t){e("table",t)}},paste:{command:function(e,t){return{dataType:e,data:t}},apply:function(e,t){var n=t.dataType,r=t.data;e("paste",{types:[n],getData:function(e){if(n===e)return r}})}}}),f=(u={},Object.entries(s).forEach((function(e){var t=e[0],n=e[1].command;u[t]=function(){return a({type:t},n.apply(void 0,arguments))}})),l={},Object.entries(s).forEach((function(e){var t=e[0],n=e[1].apply;l[t]=n})),l),d=n(519);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){v=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function m(){}var h={};c(h,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(k([])));b&&b!==t&&n.call(b,o)&&(h=b);var g=m.prototype=f.prototype=Object.create(h);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=m,c(g,"constructor",m),c(m,"constructor",d),d.displayName=c(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function b(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,c,"next",e)}function c(e){b(a,r,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,n=[{key:"initialize",value:function(e,t){this.engine=e,this.options=t,this.firstContentChangeNotified=!1,this.clearContentNotified=!1,this._initToolBar(),this._listenerEditorEvents()}},{key:"_initToolBar",value:function(){var t,n,o,a,i,c=this;e.messageRemover&&(e.messageRemover(),e.messageRemover=void 0),e.messageRemover=r.a.onMessages((y(t={},d.a.getState,(function(e,t){t({success:!0,editorState:c._getEditorState()})})),y(t,d.a.applyChange,(function(e,t){Array.isArray(e)?(e.forEach((function(e){return c._applyCommand(e)})),t({success:!0,editorState:c._getEditorState()})):c._applyCommand(e,t)})),y(t,d.a.publish,(i=g(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.options.publish();case 2:n();case 3:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})),y(t,d.a.keyboardDismiss,(function(){document.activeElement&&document.activeElement.blur()})),y(t,d.a.save,(a=g(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.options.autoSave();case 2:n();case 3:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})),y(t,d.a.revert,(o=g(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.options.revert(t);case 2:n();case 3:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})),y(t,d.a.getContent,(n=g(v().mark((function e(t,n){var r,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.engine.getDocument("text/html"),o=c.engine.getDocument("text/plain"),n({htmlText:r,plainText:o});case 3:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})),t)),r.a.postMessage(d.a.enableTools,{enable:!0,group:this.options.group,attachmentInfo:this.options.attachmentInfo})}},{key:"_notifyFirstContentChange",value:function(){this.firstContentChangeNotified=!0,r.a.postMessage(d.a.firstContentChange)}},{key:"_listenerEditorEvents",value:function(){var e,t=this,n=this.engine._iEditor,o=Date.now(),a=!1;null==n||n.on("contentchange",(function(e){console.log("editor contentchange mode: ",e);var n,i,c=t.engine.isEmpty();if("user"===e){var u=c&&t.clearContentNotified;t.firstContentChangeNotified||u||t._notifyFirstContentChange()}else"init"===e?(a=!0,t.firstContentChangeNotified=!1):"auto"===e&&!t.firstContentChangeNotified&&a&&Date.now()-o>3e3&&t._notifyFirstContentChange();c||(t.clearContentNotified=!1),t.engine.isEmpty()&&(t.firstContentChangeNotified=!1,t.clearContentNotified=!0,r.a.postMessage(d.a.clearContent),null===(n=(i=t.options).autoSave)||void 0===n||n.call(i)),t._notifyEditorState()})),null==n||n.on("selectionchange",(function(){t._notifyEditorState()})),document.addEventListener("click",(function(e){e.target.closest(".ne-engine")&&r.a.postMessage(d.a.editorClicked)}));var i=null==n||null===(e=n.option)||void 0===e?void 0:e.getScrollNode();null==i||i.addEventListener("touchstart",(function(){r.a.postMessage(d.a.editorTouchStart)}))}},{key:"_notifyEditorState",value:function(){r.a.postMessage(d.a.updateEditorState,{editorState:this._getEditorState()})}},{key:"_applyCommand",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e||{},o=r.type,a=function(e){e="[Web] ".concat(e),console.error(e),n&&n({success:!1,errorMessage:e})},i=f[o];if(i)try{i((function(){for(var e=null,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i,c=o[0];if("queryCommandValue"===c)e=(i=t.engine).queryCommandValue.apply(i,m(o.slice(1)));else if("insertImage"===c)e=t._insertImage(o[1]);else if("insertVideo"===c)e=t._insertVideo(o[1]);else if("insertFile"===c)e=t._insertFile(o[1]);else{var u;e=(u=t.engine).execCommand.apply(u,o)}n&&n({success:!0,editorState:t._getEditorState(),commandResult:e})}),e)}catch(c){a("applyChange error: ".concat(c))}else a("cannot find executor for ".concat(o))}},{key:"_insertImage",value:function(e){var t=e.url,n=e.fileName,r=e.fileSize,o=e.ocrLocations;return this.engine.execCommand("insertImage",{originalURL:t,src:t,ratio:1,name:n,size:r,ocr:o},!1)}},{key:"_insertVideo",value:function(e){return this.engine.execCommand("insertVideo",e,!1)}},{key:"_insertFile",value:function(e){return this.engine.execCommand("insertFile",e,!1)}},{key:"_getEditorState",value:function(){var e=this,t={},n=this.engine._iEditor;return t.insertSlash=!n||n.queryCommandEnabled("insertSlash"),["bold","italic","strikethrough","underline","style","indent","outdent","undo","redo","color","table","bgColor","clearColor","clearBgColor","alignment","taskList","orderedList","unorderedList"].forEach((function(n){var r=e.engine.queryCommandValue(n),o=e.engine.queryCommandState(n);"style"===n?(t.style={value:r,state:o},"p"===r?(n="text",r=!0):null!=r&&"h"===r[0]&&(n="heading",r=parseInt(r[1],10))):Array.isArray(r)&&(r=r[0]),t[n]={state:o,value:r}})),t}}],n&&_(t.prototype,n),o&&_(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(57),i=n(58),c=n(66),u=n(72),l=n(41),s=n(0),f=n(10),d=n.n(f),p=n(126),m=n(296),h=n(257),y=n(1217),v=n(251);function b(e){return e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function g(e,t,n){if(void 0!==n&&t.top>e.top-n)return n+t.top}function _(e,t,n){if(void 0!==n&&t.bottom<e.bottom+n)return n+(window.innerHeight-t.bottom)}var w=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],E=[];function O(e,t){if(e){var n=E.find((function(t){return t.target===e}));n?n.affixList.push(t):(n={target:e,affixList:[t],eventHandlers:{}},E.push(n),w.forEach((function(t){n.eventHandlers[t]=Object(v.a)(e,t,(function(){n.affixList.forEach((function(e){e.lazyUpdatePosition()}))}))})))}}function x(e){var t=E.find((function(t){var n=t.affixList.some((function(t){return t===e}));return n&&(t.affixList=t.affixList.filter((function(t){return t!==e}))),n}));t&&0===t.affixList.length&&(E=E.filter((function(e){return e!==t})),w.forEach((function(e){var n=t.eventHandlers[e];n&&n.remove&&n.remove()})))}var j,k=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.a)(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};function S(){return"undefined"!=typeof window?window:null}!function(e){e[e.None=0]="None",e[e.Prepare=1]="Prepare"}(j||(j={}));var C=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).state={status:j.None,lastAffix:!1,prevTarget:null},e.getOffsetTop=function(){var t=e.props.offsetBottom,n=e.props.offsetTop;return void 0===t&&void 0===n&&(n=0),n},e.getOffsetBottom=function(){return e.props.offsetBottom},e.savePlaceholderNode=function(t){e.placeholderNode=t},e.saveFixedNode=function(t){e.fixedNode=t},e.measure=function(){var t=e.state,n=t.status,r=t.lastAffix,o=e.props.onChange,a=e.getTargetFunc();if(n===j.Prepare&&e.fixedNode&&e.placeholderNode&&a){var i=e.getOffsetTop(),c=e.getOffsetBottom(),u=a();if(u){var l={status:j.None},s=b(u),f=b(e.placeholderNode),d=g(f,s,i),p=_(f,s,c);void 0!==d?(l.affixStyle={position:"fixed",top:d,width:f.width,height:f.height},l.placeholderStyle={width:f.width,height:f.height}):void 0!==p&&(l.affixStyle={position:"fixed",bottom:p,width:f.width,height:f.height},l.placeholderStyle={width:f.width,height:f.height}),l.lastAffix=!!l.affixStyle,o&&r!==l.lastAffix&&o(l.lastAffix),e.setState(l)}}},e.prepareMeasure=function(){e.setState({status:j.Prepare,affixStyle:void 0,placeholderStyle:void 0})},e.render=function(){var t=e.context.getPrefixCls,n=e.state,a=n.affixStyle,i=n.placeholderStyle,c=e.props,u=c.prefixCls,l=c.children,f=d()(Object(o.a)({},t("affix",u),!!a)),h=Object(p.a)(e.props,["prefixCls","offsetTop","offsetBottom","target","onChange"]);return s.createElement(m.a,{onResize:function(){e.updatePosition()}},s.createElement("div",Object(r.default)({},h,{ref:e.savePlaceholderNode}),a&&s.createElement("div",{style:i,"aria-hidden":"true"}),s.createElement("div",{className:f,ref:e.saveFixedNode,style:a},s.createElement(m.a,{onResize:function(){e.updatePosition()}},l))))},e}return Object(i.a)(n,[{key:"getTargetFunc",value:function(){var e=this.context.getTargetContainer,t=this.props.target;return void 0!==t?t:e||S}},{key:"componentDidMount",value:function(){var e=this,t=this.getTargetFunc();t&&(this.timeout=setTimeout((function(){O(t(),e),e.updatePosition()})))}},{key:"componentDidUpdate",value:function(e){var t=this.state.prevTarget,n=this.getTargetFunc(),r=null;n&&(r=n()||null),t!==r&&(x(this),r&&(O(r,this),this.updatePosition()),this.setState({prevTarget:r})),e.offsetTop===this.props.offsetTop&&e.offsetBottom===this.props.offsetBottom||this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),x(this),this.updatePosition.cancel(),this.lazyUpdatePosition.cancel()}},{key:"updatePosition",value:function(){this.prepareMeasure()}},{key:"lazyUpdatePosition",value:function(){var e=this.getTargetFunc(),t=this.state.affixStyle;if(e&&t){var n=this.getOffsetTop(),r=this.getOffsetBottom(),o=e();if(o&&this.placeholderNode){var a=b(o),i=b(this.placeholderNode),c=g(i,a,n),u=_(i,a,r);if(void 0!==c&&t.top===c||void 0!==u&&t.bottom===u)return}}this.prepareMeasure()}}]),n}(s.Component);C.contextType=h.b,k([Object(y.b)()],C.prototype,"updatePosition",null),k([Object(y.b)()],C.prototype,"lazyUpdatePosition",null);t.a=C},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){if(!e)return 0;for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>=1&&r<=126||r>=65376&&r<=65439?t++:t+=2}return t}},function(e,t,n){var r=n(2022),o=n(674),a=n(958),i=o((function(e,t){return a(e)?r(e,t):[]}));e.exports=i},function(e,t,n){var r=n(673);e.exports=function(){var e=arguments,t=r(e[0]);return e.length<3?t:t.replace(e[1],e[2])}},function(e,t,n){var r=n(1012),o=n(672),a=n(356),i=n(842),c=n(1920),u=Math.max;e.exports=function(e,t,n,l){e=o(e)?e:c(e),n=n&&!l?i(n):0;var s=e.length;return n<0&&(n=u(s+n,0)),a(e)?n<=s&&e.indexOf(t,n)>-1:!!s&&r(e,t,n)>-1}},function(e,t,n){var r=n(2202),o=n(269);e.exports=function(e,t,n,a){return null==e?[]:(o(t)||(t=null==t?[]:[t]),o(n=a?void 0:n)||(n=null==n?[]:[n]),r(e,t,n))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2277);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,c=(i=function(e,t,n){n=n||function(){},window.AlipayJSBridge&&window.AlipayJSBridge.call?window.AlipayJSBridge.call("larkJSBridge",{bridgeName:e,params:t},n):n({success:!1,error:3,errorMessage:"window.AlipayJSBridge is undefined"})},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.b)(i)))},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){Object(r.useEffect)((function(){var n=new URLSearchParams(e.search);n.get("mode")&&(window.appData.useMode=n.get("mode"),t.push(e.pathname))}),[])}},function(e,t,n){"use strict";n(350);var r=n(230),o=(n(96),n(23)),a=(n(50),n(19)),i=(n(60),n(24)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f=n(88),d=n(250);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(s,e);var t,n,c,l=y(s);function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),_(b(n=l.call(this,e,t)),"onChange",(function(e){var t=e.event,r=e.file,o=n.props,a=o.book,i=o.dispatch;t&&"progress"===t.type?i({type:"assets/updateUploadProgress",payload:{bookId:a.id,fileUid:r.uid,filename:r.name,percent:t.percent}}):r.response&&n.uploaded(r)})),_(b(n),"getFileExtension",(function(e){var t=e.lastIndexOf(".");return t>=0?e.substring(t).toLowerCase():""})),_(b(n),"uploaded",(function(e){var t=n.props,r=t.dispatch,o=t.book,a=e.response,i=a.data,c="UPLOAD_FAILED";a&&(c="UPLOAD_SUCCESS"),i.state=c,r({type:"assets/uploaded",payload:{bookId:o.id,fileId:e.uid,asset:i,response:a}}),"UPLOAD_SUCCESS"===i.state&&r({type:"assets/getList",payload:{bookId:o.id}})})),_(b(n),"beforeUpload",(function(e,t){var r=n.props,o=r.book,a=r.dispatch,c=n.getFileExtension(e.name);if(!n.isValidFile(c))return i.a.error("不支持 ".concat(c," 格式的文件上传")),!1;if(t.length>10){if(e.uid===t[0].uid){var u=__("单次最多只允许上传 {number} 个文件，多余的文件请稍后再传",{number:10});i.a.warn(u,3)}if(t.findIndex((function(t){return t.uid===e.uid}))>=10)return console.log("ignored: ".concat(e.name)),!1}var l={asset:{uid:e.uid,name:e.name,url:null,state:"UPLOADING",type:null},progress:{percent:0},result:{}};return new Promise((function(t,n){t(e),a({type:"assets/addNotice",payload:{bookId:o.id,notice:l}})}))}));var r=Object(d.a)(window),o="/api/assets?book_id=".concat(e.book.id,"&ctoken=").concat(r);return n.state={uploading:!1,url:o,accepts:[".sketch",".psd",".zip",".ai",".rp",".rplib"]},n}return t=s,(n=[{key:"isValidFile",value:function(e){return this.state.accepts.indexOf(e)>=0}},{key:"render",value:function(){var e=null,t=this.state.accepts;return e="text"===this.props.type?u.a.createElement("span",{className:"text-upload-entry"},u.a.createElement("span",null,__("上传文件"))):u.a.createElement(o.a,{title:__("仅支持 .sketch .psd .ai .rp .rplib .zip(axure) 文件上传存储。"),placement:"bottom"},u.a.createElement(a.a,{type:"primary",disabled:this.state.uploading},u.a.createElement("span",{className:"larkicon larkicon-upload-file"}),u.a.createElement("span",{className:"text"},u.a.createElement("span",null,__("上传"))))),u.a.createElement(r.a,{name:"file",action:this.state.url,showUploadList:!1,dataType:"json",beforeUpload:this.beforeUpload,onChange:this.onChange,multiple:!0,accept:t.join(","),style:{marginLeft:"8px"}},e)}}])&&m(t.prototype,n),c&&m(t,c),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.PureComponent);w.propTypes={type:s.a.string},t.a=Object(f.d)((function(e){return e}))(w)},function(e,t,n){"use strict";n(120);var r=n(63),o=n(0),a=n.n(o),i=n(10),c=n.n(i),u=n(34),l=n(195),s=n(109),f=n(2),d=n.n(f),p=n(1269),m="Banner-module_wrapper_2cLIH",h="Banner-module_content_ZKSg4",y="Banner-module_title_IuNTv",v="Banner-module_count_gyrvt",b="Banner-module_tip_A1jZX",g="Banner-module_leftImg_pVBRx",_="Banner-module_rightImg_UXgQK",w=function(e){var t=e.grainsSum,n=e.canExchange,o=window.appData.isYuque,i=o&&n?__("稻谷可通过收获文档点赞等方式获得，可用于兑换流量"):__("稻谷可通过收获文档点赞等方式获得，稻谷越多代表互动越活跃"),c=o?"https://www.yuque.com/yuque/cdgcvd/gqcepg":"https://yuque.antfin.com/lark/bqllwz/wclroi";return a.a.createElement(r.a,{bodyStyle:{padding:0}},a.a.createElement("div",{className:m,gutter:24,"data-testid":"banner-wrapper"},a.a.createElement("img",{className:g,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*fvnmR7gwpGIAAAAAAAAAAAAAARQnAQ"}),a.a.createElement("div",{className:h},a.a.createElement("p",{className:y},__("已获得"),a.a.createElement(p.c,{number:t||0,className:v}),__("颗稻谷")),a.a.createElement("p",{className:b},i," ",a.a.createElement("a",{href:c,target:"_blank"},__("了解详情")))),a.a.createElement("img",{className:_,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*XLjkQZSVjusAAAAAAAAAAAAAARQnAQ"})))};w.propTypes={grainsSum:d.a.number.isRequired,canExchange:d.a.bool.isRequired};var E=w,O=n(38),x="Rules-module_card_5VcRR",j="Rules-module_head_jgZd4",k="Rules-module_wrapper_tdpLv",S="Rules-module_itemWrapper_6+BH6",C="Rules-module_item_Y+nBS",N="Rules-module_text_8fnjy",P="Rules-module_count_Va8WH",T="Rules-module_grainIcon_DhifO",A=window.appData,L=A.organization,I=A.group,R=function(){var e=L||I?[{text:__("创建 1 篇文档"),grains:l.EXCHANGE_RATIO.CreateDoc},{text:__("文档获得 1 个赞"),grains:l.EXCHANGE_RATIO.Like}]:[{text:__("创建 1 篇文档"),grains:l.EXCHANGE_RATIO.CreateDoc},{text:__("创建 1 篇小记"),grains:l.EXCHANGE_RATIO.CreateNote},{text:__("文档获得 1 个赞"),grains:l.EXCHANGE_RATIO.Like},{text:__("评论 1 篇文档"),grains:l.EXCHANGE_RATIO.Comment},{text:__("关注 1 个用户"),grains:l.EXCHANGE_RATIO.Follow}];return L&&e.splice(1,0,{text:__("评论 1 篇文档"),grains:l.EXCHANGE_RATIO.Comment}),a.a.createElement(r.a,{className:x,title:a.a.createElement("span",{className:j},__("稻谷获取规则")),bodyStyle:{padding:0}},a.a.createElement("ul",{className:k,"data-testid":"grains-rules"},e.map((function(e,t){return a.a.createElement("li",{className:S,key:t},a.a.createElement("div",{className:C},a.a.createElement("span",{className:N},e.text),a.a.createElement("span",{className:P},__("稻谷 +"),e.grains,a.a.createElement(O.b,{name:"grain",width:16,className:T}))))}))))},D=(n(611),n(422)),M=(n(166),n(65)),F=(n(178),n(45)),B=n(32),U=n.n(B),z=n(56),G=n.n(z),V=n(2245),Y=n(140),q=n.n(Y),H="List-module_list_U6t3l",W="List-module_operate_V4d-t",K="List-module_content_BwX8A",$="List-module_grainIcon_oGXYS",Q="List-module_tr_v6rRi";function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=function(e){var t=e.belongedType,n=e.belongedId,r=e.isUser,i=function(e){var t=Z(Object(o.useState)(1),2),n=t[0],r=t[1],a=Z(Object(o.useState)([]),2),i=a[0],c=a[1],s=Z(Object(o.useState)(!1),2),f=s[0],d=s[1],p=Z(Object(o.useState)(!1),2),m=p[0],h=p[1],y=e.belongedType,v=e.belongedId,b=y===l.BELONGED_TYPES.Organization;return{state:{page:n,listData:i,loading:f,hasMore:m},getList:function(){d(!0),u.a.grains.find({belonged_type:y,belonged_id:v,limit:50,offset:50*(n-1)},{useOriginResp:!0}).then((function(e){d(!1);var t=e.data;b&&t.length>0&&U()(t[0].created_at).isSame(U()(),"day")&&t[0].type!==l.TYPES.Consume&&(t=t.slice(1)),c([].concat(J(i),J(t))),h(G()(e,"meta.hasMore"),!1)})).catch((function(e){d(!1)}))},loadMore:function(){r(n+1)}}}({belongedType:t,belongedId:n}),c=i.state,s=c.page,f=c.listData,d=c.loading,p=c.hasMore,m=i.getList,h=i.loadMore,y={emptyText:__("只显示近 30 天的数据")};Object(o.useEffect)((function(){m()}),[s]);return a.a.createElement(D.a,{className:H,onLoadMore:h,loading:d,dataSource:f,header:a.a.createElement(M.a,{style:{width:"100%"},gutter:16},a.a.createElement(F.a,{span:6},__("时间")),a.a.createElement(F.a,{span:14},__("操作")),a.a.createElement(F.a,{span:4,className:Q},__("稻谷数"))),renderItem:function(e){return t===l.BELONGED_TYPES.Organization?function(e){if(e.type===l.TYPES.Consume){var t=e.created_at,n=e.creator,r=e.traffic,o=e.count,i=a.a.createElement("a",{href:"/".concat(n.login),target:"_blank"},n.name," "),c=q.a.getSizeValue(r||0),u="".concat(c.value).concat(c.unit);return a.a.createElement(M.a,{style:{width:"100%"},gutter:16},a.a.createElement(F.a,{span:6},U()(t).format("YYYY-MM-DD HH:mm")),a.a.createElement(F.a,{span:14},a.a.createElement("p",{className:W},a.a.createElement("span",{className:K},__("{userInfo} 兑换了 {sizeString} 空间上传流量",{userInfo:i,sizeString:u})))),a.a.createElement(F.a,{span:4},a.a.createElement("p",{className:Q},o,a.a.createElement(O.b,{name:"grain",width:16,className:$}))))}return a.a.createElement(M.a,{style:{width:"100%"},gutter:16},a.a.createElement(F.a,{span:6},U()(e.created_at).format("YYYY-MM-DD HH:mm")),a.a.createElement(F.a,{span:14},a.a.createElement("p",{className:W},a.a.createElement("span",{className:K},__("当日累计新增 {docSum} 篇文档，{commentSum} 条评论，{likeSum} 个点赞",{docSum:e.createDocDaySum,commentSum:e.commentDaySum,likeSum:e.likeDaySum})))),a.a.createElement(F.a,{span:4},a.a.createElement("p",{className:Q},"+".concat(e.count),a.a.createElement(O.b,{name:"grain",width:16,className:$}))))}(e):function(e,t){var n,r=e.created_at,o=e.creator,i=e.target,c=e.type,u=e.count,s=e.traffic,f=void 0===s?0:s,d=e.member_duration,p=e.grain_option,m="",h=q.a.getSizeValue(f||0),y="".concat(h.value).concat(h.unit);if(!o)return null;var v=(X(n={},l.TYPES.CreateDoc,__("创建了文档")),X(n,l.TYPES.Comment,__("评论了文档")),X(n,l.TYPES.Like,__("点赞了")),n),b=t&&c!==l.TYPES.Like?null:a.a.createElement("a",{href:"/".concat(o.login),target:"_blank"},o.name," ");switch(c){case l.TYPES.Like:case l.TYPES.CreateDoc:case l.TYPES.Comment:if(!i)return null;var g="";i&&(g="/go/doc/".concat(i.id)),m=a.a.createElement("p",{className:W},b,v[c]," ",a.a.createElement("span",{className:K},g?a.a.createElement("a",{target:"_blank",href:g},"《".concat(i.title,"》")):a.a.createElement("span",null,"《".concat(i.title,"》"))));break;case l.TYPES.Consume:m=a.a.createElement("p",{className:W},b,__("兑换了 {sizeString} {trafficType}上传流量",{userInfo:b,sizeString:y,trafficType:t?"":"知识小组"}));break;case l.TYPES.Member:m=a.a.createElement("p",{className:W},b,__("兑换了")," ",a.a.createElement("span",{className:K},__("会员 {num} 天",{num:d})));break;case l.TYPES.Hobby:m=a.a.createElement("p",{className:W},b,__("兑换了")," ",a.a.createElement("span",{className:K},p));break;case l.TYPES.CreateNote:m=a.a.createElement("p",{className:W},b,__("发布了小记")," ",a.a.createElement("span",{className:K},Object(V.extractSummary)(G()(i,"description"))));break;case l.TYPES.Follow:if(!i)return null;m=a.a.createElement("p",{className:W},__("关注了")," ",a.a.createElement("span",{className:K},a.a.createElement("a",{href:"/".concat(i.login),target:"_blank"},i.name)));break;case l.TYPES.ThanksgivingNote:m=a.a.createElement("p",{className:W},__("2021 感恩季，小记稻谷奖励"))}return a.a.createElement(M.a,{style:{width:"100%"},gutter:16},a.a.createElement(F.a,{span:6},U()(r).format("YYYY-MM-DD HH:mm")),a.a.createElement(F.a,{span:14},m),a.a.createElement(F.a,{span:4},a.a.createElement("p",{className:Q},u>0?"+".concat(u):"".concat(u),a.a.createElement(O.b,{name:"grain",width:16,className:$}))))}(e,r)},showLoadingMore:p,locale:y})};ne.propTypes={belongedType:d.a.string.isRequired,belongedId:d.a.number.isRequired,isUser:d.a.bool.isRequired};var re=ne,oe=(n(96),n(23)),ae=(n(60),n(24)),ie=(n(79),n(44)),ce=(n(50),n(19)),ue=(n(1053),n(1069)),le=(n(75),n(26)),se=(n(218),n(51)),fe=n(527),de=n(406),pe="Exchange-module_wrapper_srrqD",me="Exchange-module_tip_UeZTc",he="Exchange-module_list_JGHD-",ye="Exchange-module_itemWrapper_O98Gf",ve="Exchange-module_item_mIP74",be="Exchange-module_img_yUlGZ",ge="Exchange-module_content_EY-+8",_e="Exchange-module_title_g0vdL",we="Exchange-module_isHobby_XEo5v",Ee="Exchange-module_grains_N2RkE",Oe="Exchange-module_grainsNum_4qpR2",xe="Exchange-module_inventory_3jSau",je="Exchange-module_btn_72fp0",ke="Exchange-module_modalContent_PKwkf",Se="Exchange-module_info_wRi-o",Ce="Exchange-module_formContent_rMgkv",Ne="Exchange-module_formBtn_raexf";function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(){Ie=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Pe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Re(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function De(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Re(a,r,o,i,c,"next",e)}function c(e){Re(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Be=window.appData.isYuque,Ue=function(e){var t=e.modalVisible,n=e.exchangeData,r=e.hideModal,i=e.areaConfig,c=e.onExchange,u=e.loading,s=Me(se.a.useForm(),1)[0],f=Me(Object(o.useState)(""),2),d=f[0],p=f[1];if(!t||!n)return null;var m=n.type===l.EXCHANGE_TYPES.hobby,h=function(e){if(m){var t={exchange_type:n.type,hobby_id:n.id,recipient:{name:e.name,phone:e.phone,city:d,address:e.address}};c(t,n)}else c({exchange_type:n.type},n)},y=m&&a.a.createElement("div",{className:Ce},a.a.createElement(M.a,{gutter:16},a.a.createElement(F.a,{span:12},a.a.createElement(se.a.Item,{labelCol:{span:24},label:__("收货人姓名"),rules:[{required:!0}],name:"name"},a.a.createElement(le.a,{type:"text",autoComplete:"null",maxLength:36,placeholder:__("请输入")}))),a.a.createElement(F.a,{span:12},a.a.createElement(se.a.Item,{labelCol:{span:24},label:__("联系电话"),name:"phone",rules:[{required:!0,validator:function(e,t,n){var r=fe.validator.mobilePhone(t);n(r?__("输入正确联系电话"):r)}}]},a.a.createElement(le.a,{type:"text",autoComplete:"null",maxLength:11,placeholder:__("请输入")})))),a.a.createElement(se.a.Item,{name:"city",label:__("所在地区"),labelCol:{span:24},rules:[{required:!0}]},a.a.createElement(ue.a,{onChange:function(e,t){p(t.map((function(e){return e.label})).join("/"))},autoComplete:"null",options:i,showSearch:{filter:function(e,t){return t.some((function(t){return t.label.toLowerCase().includes(e.toLowerCase())}))}},placeholder:__("请选择省/市/区")})),a.a.createElement(se.a.Item,{name:"address",labelCol:{span:24},label:__("详细地址"),rules:[{required:!0}]},a.a.createElement(le.a,{type:"text",autoComplete:"null",maxLength:100}))),v=m?__("地址填写后无法修改，请仔细确认后提交。如因地址填写问题造成寄送不成功将视为放弃。兑换物品将在 15 个工作日内寄出，请耐心等待。"):__("虚拟礼品一经兑换立即生效，不可撤销");return a.a.createElement(ie.a,{title:__("兑换礼品"),width:520,wrapClassName:"grain-exchange-modal",visible:t,onCancel:r,footer:null,maskClosable:!0},a.a.createElement("div",{className:ke},a.a.createElement("div",{className:ge},a.a.createElement("img",{className:be,src:n.photo}),a.a.createElement("div",{className:Se},a.a.createElement("p",{className:_e},n.name),a.a.createElement("p",{className:Ee},__("消耗稻谷 {num} 颗",{num:n.grains_num})))),a.a.createElement(se.a,{form:s,onFinish:h},y,a.a.createElement("p",{className:me},v),a.a.createElement("div",{className:Ne},a.a.createElement(se.a.Item,null,a.a.createElement(ce.a,{htmlType:"submit",type:"primary",className:je},u?__("兑换中"):__("确认兑换"))),a.a.createElement(ce.a,{onClick:r},__("取消"))))))};Ue.propTypes={modalVisible:d.a.bool,exchangeData:d.a.object,hideModal:d.a.func,onExchange:d.a.func,areaConfig:d.a.array,loading:d.a.bool};var ze=function(e){var t=e.remainTimes,r=e.grainsSum,i=e.setGrainsSum,s=e.belongedId,f=e.canExchangeMember,d=e.getRemainTimes,p=e.getHobbyData,m=e.exchangeList,h=Me(Object(o.useState)(!1),2),y=h[0],v=h[1],b=Me(Object(o.useState)(null),2),g=b[0],_=b[1],w=Me(Object(o.useState)(!1),2),E=w[0],O=w[1],x=Me(Object(o.useState)(null),2),j=x[0],k=x[1];Object(o.useEffect)((function(){var e=function(){var e=De(Ie().mark((function e(){var t;return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(29).then(n.bind(null,4053));case 2:t=e.sent,k(t.default);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),p()}),[]);var S=function(){v(!1),_(null)},C=function(){var e=De(Ie().mark((function e(t,n){return Ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,u.a.grains.exchange(Ae(Ae({},t),{},{belonged_id:s}));case 4:!0===e.sent&&(i(r-n.grains_num),ae.a.info(__("兑换成功")));case 6:return e.prev=6,O(!1),S(),p(),d(),e.finish(6);case 12:case"end":return e.stop()}}),e,null,[[1,,6,12]])})));return function(t,n){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:pe},Be&&a.a.createElement("p",{className:me},__("本月还可兑换 {num} 次",{num:t})),a.a.createElement("ul",{className:he},m.map((function(e,n){var o=e.grains_num,i=e.inventory,u=e.start_at,s=e.type,d=e.status,p=e.has_exchanged,m=!0,h=!1,y=i,b=__("立刻兑换"),g="";return r<o&&(m=!1,g=__("稻谷不足")),t&&(s!==l.EXCHANGE_TYPES.member_30_day||f)||(m=!1,g=__("本月兑换次数已达上限")),s===l.EXCHANGE_TYPES.hobby&&(u||(b=__("敬请期待"),m=!1),d!==de.STATUS.on_shelves&&(b=__("敬请期待"),m=!1),u&&new Date<new Date(u)&&(b=__("敬请期待"),m=!1),d===de.STATUS.on_shelves&&(h=!0,(!y||y<0)&&(y=0,b=__("抢完啦"),m=!1),p&&(m=!1,b=__("已兑换")))),a.a.createElement("li",{className:ye},a.a.createElement("div",{className:ve},a.a.createElement("img",{src:e.photo,className:be}),a.a.createElement("div",{className:ge},a.a.createElement("p",{className:c()(_e,Le({},we,s===l.EXCHANGE_TYPES.hobby))},e.name),a.a.createElement("p",{className:Ee},a.a.createElement("span",{className:Oe},e.grains_num," ",__("颗稻谷")),h&&a.a.createElement("span",{className:xe},__("剩余 {num} 个",{num:y}))),a.a.createElement(oe.a,{title:g},a.a.createElement(ce.a,{className:je,disabled:!m,onClick:function(){_(e),v(!0)}},b)))))}))),a.a.createElement(Ue,{exchangeData:g,modalVisible:y,hideModal:S,areaConfig:j,onExchange:C,loading:E}))};ze.propTypes={remainTimes:d.a.number.isRequired,grainsSum:d.a.number.isRequired,setGrainsSum:d.a.func,getRemainTimes:d.a.func,belongedId:d.a.number,canExchangeMember:d.a.bool,exchangeList:d.a.array,getHobbyData:d.a.func};var Ge=ze,Ve="index-module_card_Miog9",Ye="index-module_tab_BFH66",qe="index-module_tabItem_bJJLQ",He="index-module_active_k8OAO";function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(){Xe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==We(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Je(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Je(a,r,o,i,c,"next",e)}function c(e){Je(a,r,o,i,c,"throw",e)}i(void 0)}))}}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nt=window.appData,rt=nt.organization,ot=nt.me,at=nt.isPublicCloud;t.a=Object(s.b)((function(e){var t=function(e){var t=e.group,n=!0;!at&&t&&(n=!1);var r=rt?l.BELONGED_TYPES.Organization:l.BELONGED_TYPES.User,a=!0,i=ot.id,c=ot.grains_sum;rt&&(i=rt.id,c=rt.grains_sum,a=!1),t&&(i=t.id,c=t.grains_sum,a=!1);var s=at?[{name:__("语雀 {traffic} 上传流量",{traffic:"50MB"}),photo:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*GJSCSq8UAi8AAAAAAAAAAAAAARQnAQ",type:l.EXCHANGE_TYPES.traffic_50_mb,grains_num:l.EXCHANGE_RULE_GRAINS.traffic_50_mb},{name:__("语雀 {traffic} 上传流量",{traffic:"100MB"}),photo:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*CQ2fRZSrrNEAAAAAAAAAAAAAARQnAQ",type:l.EXCHANGE_TYPES.traffic_100_mb,grains_num:l.EXCHANGE_RULE_GRAINS.traffic_100_mb},{name:__("语雀 {traffic} 上传流量",{traffic:"500MB"}),photo:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*jqvFR7WKZy8AAAAAAAAAAAAAARQnAQ",type:l.EXCHANGE_TYPES.traffic_500_mb,grains_num:l.EXCHANGE_RULE_GRAINS.traffic_500_mb}]:[];at&&!t&&s.push(a?{name:__("语雀会员 30 天"),photo:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*_cgwT73hVmwAAAAAAAAAAAAAARQnAQ",type:l.EXCHANGE_TYPES.member_30_day,grains_num:l.EXCHANGE_RULE_GRAINS.member_30_day}:{name:__("语雀 {traffic} 上传流量",{traffic:"1GB"}),photo:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*_hDpRYFVJL8AAAAAAAAAAAAAARQnAQ",type:l.EXCHANGE_TYPES.traffic_1_gb,grains_num:l.EXCHANGE_RULE_GRAINS.traffic_1_gb});var f=et(Object(o.useState)(s),2),d=f[0],p=f[1],m=et(Object(o.useState)("Exchange"),2),h=m[0],y=m[1],v=et(Object(o.useState)(c),2),b=v[0],g=v[1],_=et(Object(o.useState)(!1),2),w=_[0],E=_[1],O=et(Object(o.useState)(0),2),x=O[0],j=O[1],k=function(){var e=Ze(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.grains.remainTimes({belonged_id:i});case 2:t=e.sent,j(t.remain_times),E(t.can_exchange_member);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Ze(Xe().mark((function e(){var t;return Xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,u.a.grains.hobbies();case 3:(t=e.sent)&&t.length&&p(s.concat(t.map((function(e){return $e($e({},e),{},{type:l.EXCHANGE_TYPES.hobby})}))));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{state:{canExchange:n,isUser:a,remainTimes:x,selectedTab:h,belongedType:r,belongedId:i,grainsSum:b,canExchangeMember:w,exchangeList:d},setSelectedTab:y,getRemainTimes:k,setGrainsSum:g,setRemainTimes:j,getHobbyData:S}}(e),n=t.state,i=n.canExchange,s=n.selectedTab,f=n.grainsSum,d=n.belongedType,p=n.belongedId,m=n.remainTimes,h=n.isUser,y=n.canExchangeMember,v=n.exchangeList,b=t.setSelectedTab,g=t.getRemainTimes,_=t.setGrainsSum,w=t.getHobbyData;Object(o.useEffect)((function(){i&&(g(),w())}),[]);return a.a.createElement("div",null,a.a.createElement(E,{grainsSum:f,canExchange:i}),a.a.createElement(R,null),i&&(at||v.length)?a.a.createElement(r.a,{className:Ve,title:a.a.createElement("ul",{className:Ye},a.a.createElement("li",{className:c()(qe,Qe({},He,"Exchange"===s)),onClick:function(){b("Exchange")}},__("稻谷权益兑换")),a.a.createElement("li",{className:c()(qe,Qe({},He,"List"===s)),onClick:function(){b("List")}},__("稻谷积分记录"))),bodyStyle:{padding:0},"data-testid":"list-wrapper-width-exchange"},"Exchange"===s&&a.a.createElement(Ge,{belongedId:p,remainTimes:m,grainsSum:f,setGrainsSum:_,isUser:h,getRemainTimes:g,canExchangeMember:y,isPublicCloud:at,exchangeList:v,getHobbyData:w}),"List"===s&&a.a.createElement(re,{isUser:h,belongedType:d,belongedId:p})):a.a.createElement(r.a,{className:Ve,title:__("稻谷积分记录"),bodyStyle:{padding:0},"data-testid":"list-wrapper"},a.a.createElement(re,{belongedType:d,belongedId:p,isUser:h})))}))},function(e,t,n){"use strict";n(79);var r=n(44),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(88),l=n(114),s=n.n(l),f=n(1155),d=n(650),p=n(1363),m=n(287),h=n(38),y=n(685),v=n(17),b=n(124),g=n(554),_=n(1024),w=n(1360),E=n(34),O=n(2217),x=n(1015),j=n(1298),k=(n(173),n(94)),S=n(186),C=n(109);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(i,e);var t,n,r,o=A(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={loading:!0,contributors:[],user:null,last_editor:null,wordCount:null},t.shouldShowWordCount="Doc"===e.doc.type,t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.doc,r=t.book;if(this.shouldShowWordCount){var o=this.props.getWordCount();this.setState({wordCount:o})}this.props.dispatch({type:"proxy.web/docs.findOne",payload:{data:{id:n.slug,book_id:r.id,mode:"raw"}}}).then((function(t){e.setState({loading:!1,user:t.user,last_editor:t.last_editor})})),this.props.dispatch({type:"proxy.web/docs.contributors",payload:{data:{id:n.slug,book_id:r.id}}}).then((function(t){e.setState({contributors:t})}))}},{key:"render",value:function(){var e=this.props.doc;if(this.state.loading)return a.a.createElement(k.a,{justify:"block",className:"doc-insight-spin"});var t=this.state,n=t.user,r=t.last_editor,o=t.contributors;return a.a.createElement("div",{className:"doc-insight"},a.a.createElement("div",{className:"head"},__("统计信息")),a.a.createElement("div",{className:"meta"},this.shouldShowWordCount&&a.a.createElement("div",{className:"word-count"},a.a.createElement("span",{className:"num"},this.state.wordCount),a.a.createElement("span",{className:"desc"},__("字"))),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("a",{href:"/".concat(n.login),className:"user"},n.name),a.a.createElement("span",null,__("创建于#middle")," "),a.a.createElement(S.a,{className:"time",time:e.created_at})),a.a.createElement("li",null,a.a.createElement("a",{href:"/".concat(r.login),className:"user"},r.name),a.a.createElement("span",null,__("最后编辑于")," "),a.a.createElement(S.a,{className:"time",time:e.content_updated_at})))),a.a.createElement("div",{className:"contributors"},a.a.createElement("h4",{className:"title"},__("编辑者")),a.a.createElement("ul",null,o.map((function(e,t){return a.a.createElement("li",{className:"user",key:n.id},a.a.createElement("a",{href:"/".concat(e.login),target:"_blank"},a.a.createElement("span",null,e.name)),t!==o.length-1&&__("、"))})))))}}])&&P(t.prototype,n),r&&P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.PureComponent);R.propTypes={doc:c.a.object.isRequired,getWordCount:c.a.func.isRequired};var D=Object(u.d)((function(e){return e}))(Object(C.b)(R,!0)),M=n(1364),F=(n(175),n(84)),B=(n(96),n(23)),U=n(127),z="EditorHeaderCollabUsers-module_avatar_humc6",G="EditorHeaderCollabUsers-module_name_RmtES",V="EditorHeaderCollabUsers-module_sign_f2lq4",Y="EditorHeaderCollabUsers-module_signInner_UJ3E3",q="EditorHeaderCollabUsers-module_more_x6mXq",H="EditorHeaderCollabUsers-module_moreUsers_2uEpx";function W(e){var t=e.user;return a.a.createElement("span",{className:z},a.a.createElement(U.a,{src:t.avatar_url,name:t.name,size:24}),t.color&&a.a.createElement("span",{className:V},a.a.createElement("div",{className:Y,style:{background:t.color}})))}function K(e){var t=e.users,n=e.me,r=[],o=[];return t.length<=9?r=t.slice(0,t.length):(r=t.slice(0,9),o=t.slice(9)),a.a.createElement(a.a.Fragment,null,r.map((function(e){return a.a.createElement(B.a,{title:e.name,key:e.id},a.a.createElement("span",null,a.a.createElement(W,{user:e})))})),o.length>0&&a.a.createElement(F.a,{placement:"bottom",content:a.a.createElement("ul",{className:H},o.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(W,{user:e}),a.a.createElement("a",{href:"/".concat(e.login),className:G,target:"_blank"},e.name))})))},a.a.createElement("a",{className:"".concat(z," ").concat(q)},"+",o.length)),a.a.createElement(B.a,{title:0===t.length?__("语雀已支持多人同时编辑文档，当前编辑者的头像将显示在此"):__("我"),overlayStyle:{minWidth:"24px",width:0===t.length?"192px":"unset"}},a.a.createElement("span",null,a.a.createElement(W,{user:n}))))}K.propTypes={users:c.a.array.isRequired,me:c.a.object.isRequired};var $=K,Q=n(1342);n(1973);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function J(){J=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==X(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Z(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return re(this,n)}}function re(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=s()("editor:doc:head"),ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(c,e);var t,n,o,i=ne(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),ie(oe(t=i.call(this,e)),"saveMeta",(function(e,n){var r=t.props,o=r.doc,a=r.book,i={id:o.id},c=!1,u=function(){"function"==typeof n&&n(),t.setState({showMetaEdit:!1})};Object.keys(e).forEach((function(t){("custom_cover"===t&&e.custom_cover!==o.cover||void 0!==e[t]&&e[t]!==o[t])&&(c=!0,i[t]=e[t])})),c?(ce("save meta:",i),t.props.dispatch({type:"proxy.web/docs.updateMeta",payload:{data:i}}).then((function(e){t.props.dispatch({type:"doc/update",payload:i}),u(),i.slug&&(window.location.href="/".concat(a.namespace,"/").concat(i.slug,"/edit"))})).catch((function(e){n(e)}))):u()})),ie(oe(t),"showStatics",(function(){t.setState({showStatics:!0})})),ie(oe(t),"showMetaEdit",(function(){t.setState({showMetaEdit:!0})})),ie(oe(t),"saveTitle",(function(e){t.saveMeta({title:e})})),ie(oe(t),"exec",function(){var e,n=(e=J().mark((function e(n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce("exec: ".concat(n)),e.t0=n,e.next=e.t0===v.a.DOC.statics.cmd?4:e.t0===v.a.DOC.edit_meta.cmd||e.t0===v.a.DOC.edit_table_meta.cmd?6:e.t0===v.a.DOC.history.cmd?8:e.t0===v.a.DOC.save_editing_as_version.cmd?10:e.t0===v.a.DOC.save_as_template.cmd?14:17;break;case 4:return t.showStatics(),e.abrupt("break",18);case 6:return t.showMetaEdit(),e.abrupt("break",18);case 8:return t.props.showHistory(),e.abrupt("break",18);case 10:return e.next=12,t.props.save(g.h.USER_SAVE_AS_VERSION);case 12:return t.setState({showSaveAsVersion:!0}),e.abrupt("break",18);case 14:return e.next=16,t.props.save(g.h.USER_SAVE_AS_TEMPLATE);case 16:case 17:return e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Z(a,r,o,i,c,"next",e)}function c(e){Z(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()),ie(oe(t),"getDisabledActions",(function(){var e=[];return window.appData.isDocCollaborator&&e.push(v.a.DOC.delete),e})),t.state={showMetaEdit:!1,showStatics:!1,showSaveAsVersion:!1},t.docTitleRef=a.a.createRef(),t}return t=c,(n=[{key:"isPublishEnabled",value:function(){var e=this.props,t=e.doc,n=e.editing;return"Doc"===t.type||!0===n}},{key:"render",value:function(){var e=this,t=this.props,n=t.group,o=t.book,i=t.doc,c=t.shortDocTitle,u=t.me;return a.a.createElement("div",{className:"lark-editor-header",type:i.type},a.a.createElement("div",{className:"lark-editor-header-content"},a.a.createElement("div",{className:"lark-editor-header-back"},a.a.createElement(p.a,{book:o,doc:i,group:n})),a.a.createElement("div",{className:"lark-editor-header-info"},a.a.createElement("div",{className:"lark-editor-header-title",ref:this.docTitleRef},a.a.createElement(Q.a,{title:i.title,saveTitle:this.saveTitle}),a.a.createElement(m.a.AccessScope,{group:n,book:o,doc:i,getPopupContainer:function(){return e.docTitleRef.current}})),a.a.createElement("div",{className:"lark-editor-header-crumb-status"},!c&&a.a.createElement(y.a,{group:n,book:o,noGroup:!1,showBookIcon:!1,disableClickOnIcon:!0}),!c&&a.a.createElement("span",{className:"split"},"|"),a.a.createElement("div",{className:"lark-editor-header-status"},a.a.createElement("div",{className:"lark-editor-save-tip"},a.a.createElement(x.a,{netStatus:this.props.netStatus,docStatus:this.props.docStatus,savedAt:this.props.savedAt,showHistory:this.props.showHistory}),a.a.createElement(h.b,{name:"cloud",width:16}))))),a.a.createElement("div",{className:"lark-editor-header-action"},this.props.collabUsers&&a.a.createElement("div",{className:"lark-editor-collab-users"},a.a.createElement($,{users:this.props.collabUsers,me:u})),i.abilities&&i.abilities.create_collaborator&&a.a.createElement("div",{className:"lark-editor-header-action-item",style:{marginRight:14,paddingTop:5}},a.a.createElement(_.a,{key:"collaborator-doc-".concat(i.id),type:"doc",isEditing:!0})),"Show"===i.type&&a.a.createElement("div",{className:"lark-editor-play-show"},a.a.createElement(w.a,null)),a.a.createElement("div",{className:"lark-editor-header-action-item"},a.a.createElement(O.a,{doc:i,book:o,group:n,me:u,loading:!this.props.pageReady,saving:this.props.saving,title:m.a.getFormalTitle(i),disabled:!this.isPublishEnabled(),publishing:this.props.publishing,onsubmit:this.props.publish,getSummary:this.props.getSummary,errorStatus:this.props.errorStatus})),a.a.createElement("div",{className:"lark-editor-header-more","data-testid":"lark-editor-header-more"},a.a.createElement(d.a,{"data-testid":"doc-reader-more-actions",direction:"circle",iconWidth:20,content:a.a.createElement(M.a,{commands:b.a.additionalActionsInEditPage(i),disabledCommands:this.getDisabledActions(),book:o,doc:i,onSelect:function(t){var n=t.key;e.exec(n)},onCommandsExecuted:function(t){t.cmd===v.a.DOC.delete.cmd&&e.props.onDeleted()},inEdit:!0})})))),this.state.showMetaEdit&&a.a.createElement(r.a,{width:514,visible:!0,centered:!0,title:__("设置"),footer:null,onCancel:function(){e.setState({showMetaEdit:!1})},bodyStyle:{maxHeight:"90vh",overflow:"auto",paddingTop:16}},a.a.createElement(j.a,{doc:i,group:n,book:o,save:this.saveMeta,getSummary:this.props.getSummary,key:"doc-meta-edit-from-title"})),this.state.showStatics&&a.a.createElement(r.a,{width:384,visible:!0,footer:null,onCancel:function(){e.setState({showStatics:!1})}},a.a.createElement(D,{getWordCount:this.props.getWordCount})),this.state.showSaveAsVersion&&a.a.createElement(f.a,{doc:i,docDomain:"Doc",type:o.enable_auto_publish?"published":"draft",onCancel:function(){e.setState({showSaveAsVersion:!1})},docVersionProxy:E.a.docVersions}))}}])&&ee(t.prototype,n),o&&ee(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.PureComponent);ue.defaultProps={collabUsers:null},ue.propTypes={dispatch:c.a.func.isRequired,group:c.a.object.isRequired,book:c.a.object.isRequired,doc:c.a.object.isRequired,me:c.a.object.isRequired,collabUsers:c.a.array,editing:c.a.bool,pageReady:c.a.bool.isRequired,publishing:c.a.bool.isRequired,saving:c.a.bool,savedAt:c.a.object,shortDocTitle:c.a.bool,save:c.a.func.isRequired,publish:c.a.func.isRequired,showHistory:c.a.func.isRequired,getWordCount:c.a.func,getSummary:c.a.func,onDeleted:c.a.func,netStatus:c.a.string,docStatus:c.a.string};t.a=Object(u.d)((function(e){return{group:e.group,book:e.book,doc:e.doc,me:e.me}}))(ue)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(127),i=n(722),c=n(321),u="index-module_userName_Tly6l";function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(p,e);var t,n,r,l=d(p);function p(e,t){var n,r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),n=l.call(this,e,t),r=m(n),a=function(){var e=n.state.page;n.setState({page:e+1},(function(){var e=20*n.state.page;n.props.loadMore(e)}))},(o="loadMore")in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n.state={page:0},n}return t=p,(n=[{key:"render",value:function(){var e=this.props,t=e.users,n=void 0===t?[]:t,r=e.type,l=e.shouldLoadMore&&n.length%20==0;return o.a.createElement("div",{className:"watchers-wrapper"},n.length>0?o.a.createElement("div",null,o.a.createElement("ul",{className:"watcher-list clearfix"},n.map((function(e){return e?o.a.createElement("li",{key:e.id,className:"watcher-list-item"},o.a.createElement("a",{href:"/".concat(e.login)},o.a.createElement("span",{className:"avatar"},o.a.createElement(c.a,{user:e},o.a.createElement(a.a,{src:e.avatar_url,size:"sm",name:"user.name"}))),o.a.createElement("span",{className:"user-info"},o.a.createElement(i.b,{user:e,type:i.a.text,withCard:!0,className:u},o.a.createElement("h6",null,e.name)),o.a.createElement("span",null,e.login)))):null}))),l&&o.a.createElement("a",{className:"btn-load",onClick:this.loadMore},__("加载更多"))):o.a.createElement("div",{className:"watcher-empty-view"},"star"===r&&o.a.createElement("span",null,__("暂无人喜欢，成为第一个喜欢的人吧~")),"watch"===r&&o.a.createElement("span",null,__("暂无人关注，成为第一个关注的人吧~"))))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(r.Component);t.a=y},function(e,t,n){"use strict";var r=n(14),o=n(18),a=n(0),i=n(10),c=n.n(i),u=n(208),l=n(257),s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},f=function(e){var t,n,i=e.prefixCls,u=e.className,f=e.color,d=void 0===f?"blue":f,p=e.dot,m=e.pending,h=void 0!==m&&m,y=(e.position,e.label),v=e.children,b=s(e,["prefixCls","className","color","dot","pending","position","label","children"]),g=(0,a.useContext(l.b).getPrefixCls)("timeline",i),_=c()((t={},Object(o.a)(t,"".concat(g,"-item"),!0),Object(o.a)(t,"".concat(g,"-item-pending"),h),t),u),w=c()((n={},Object(o.a)(n,"".concat(g,"-item-head"),!0),Object(o.a)(n,"".concat(g,"-item-head-custom"),!!p),Object(o.a)(n,"".concat(g,"-item-head-").concat(d),!0),n));return a.createElement("li",Object(r.default)({},b,{className:_}),y&&a.createElement("div",{className:"".concat(g,"-item-label")},y),a.createElement("div",{className:"".concat(g,"-item-tail")}),a.createElement("div",{className:w,style:{borderColor:/blue|red|green|gray/.test(d||"")?void 0:d}},p),a.createElement("div",{className:"".concat(g,"-item-content")},v))},d=n(118),p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},m=function(e){var t,n=a.useContext(l.b),i=n.getPrefixCls,s=n.direction,m=e.prefixCls,h=e.pending,y=void 0===h?null:h,v=e.pendingDot,b=e.children,g=e.className,_=e.reverse,w=void 0!==_&&_,E=e.mode,O=void 0===E?"":E,x=p(e,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),j=i("timeline",m),k="boolean"==typeof y?null:y,S=y?a.createElement(f,{pending:!!y,dot:v||a.createElement(u.a,null)},k):null,C=a.Children.toArray(b);C.push(S),w&&C.reverse();var N=function(e,t){return"alternate"===O?"right"===e.props.position?"".concat(j,"-item-right"):"left"===e.props.position?"".concat(j,"-item-left"):"".concat(j,t%2==0?"-item-left":"-item-right"):"left"===O?"".concat(j,"-item-left"):"right"===O||"right"===e.props.position?"".concat(j,"-item-right"):""},P=C.filter((function(e){return!!e})),T=a.Children.count(P),A="".concat(j,"-item-last"),L=a.Children.map(P,(function(e,t){var n=t===T-2?A:"",r=t===T-1?A:"";return Object(d.a)(e,{className:c()([e.props.className,!w&&y?n:r,N(e,t)])})})),I=C.some((function(e){var t;return!!(null===(t=null==e?void 0:e.props)||void 0===t?void 0:t.label)})),R=c()(j,(t={},Object(o.a)(t,"".concat(j,"-pending"),!!y),Object(o.a)(t,"".concat(j,"-reverse"),!!w),Object(o.a)(t,"".concat(j,"-").concat(O),!!O&&!I),Object(o.a)(t,"".concat(j,"-label"),I),Object(o.a)(t,"".concat(j,"-rtl"),"rtl"===s),t),g);return a.createElement("ul",Object(r.default)({},x,{className:R}),L)};m.Item=f;var h=m;t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return _}));var r=n(0),o=n.n(r),a=n(39),i=n.n(a),c=n(38),u=n(2098),l=n(349),s=n(91),f="index-module_openInAppContainer_Vmiru",d="index-module_openInAppBtn_P94L1",p="index-module_text_7VXMd",m="index-module_line_Qq-mo";function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v="last_close_open_in_app_timestamp";var b=function(e){var t=h(Object(r.useState)(!0),2),n=t[0],a=t[1],i=e.options||{},f=i.extraStyle,y=i.ignoreLink,b=i.tab;return Object(r.useEffect)((function(){n&&Object(l.b)("c105980",{source:Object(u.b)(),url:window.location.href})}),[n]),n?o.a.createElement("div",{style:f,id:"openInAppBtn",className:d,onClick:function(e){e.preventDefault(),e.stopPropagation(),Object(u.c)(y,b)}},o.a.createElement("span",{className:p},__("App 内打开")),o.a.createElement("div",{className:m}),o.a.createElement(c.b,{size:20,name:"close-open-inapp",fill:"#fefffe",onClick:function(e){e.preventDefault(),e.stopPropagation(),s.default.set(v,"".concat(Date.now())),a(!1)}})):null};function g(e){var t,n,r,a,c,u,l;if(null===(t=window.appData)||void 0===t||null===(n=t.settings)||void 0===n||!n.enable_open_in_mobile_app)return!1;var d=window.self!==window.top,p=(null===(r=window.appData)||void 0===r||null===(a=r.organization)||void 0===a?void 0:a.id)>0,m=(null===(c=window.appData)||void 0===c?void 0:c.isYuqueMobileApp)||(null===(u=window.appData)||void 0===u?void 0:u.isAlipayWebApp)||(null===(l=window.appData)||void 0===l?void 0:l.isDingTalkMiniApp);if(window.h5&&!d&&!p&&!m&&function(){try{var e=s.default.get(v);if(null==e||!e.length)return!0;if(Date.now()-parseInt(e,10)<864e5)return!1}catch(t){}return!0}()){var h=document.createElement("div");h.className=f,document.body.appendChild(h),i.a.render(o.a.createElement(b,{options:e}),h)}}function _(e){Object(r.useEffect)((function(){g(e)}),[])}},function(e,t,n){"use strict";n(120);var r=n(63),o=(n(96),n(23)),a=(n(1903),n(1267)),i=n(0),c=n.n(i),u=n(88),l=n(261),s=n(510),f=n(38);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,n,i,u=y(d);function d(){var e;p(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(b(e=u.call.apply(u,[this].concat(n))),"confirm",(function(){var t=e.props,n=t.book;(0,t.dispatch)({type:"assets/removeNotice",payload:{bookId:n.id}})})),e}return t=d,i=[{key:"isProcessing",value:function(e){return["UPLOADING","PARSING"].indexOf(e)>=0}}],(n=[{key:"successMessage",value:function(e){var t=e.asset;if("demo"===t.file_type||"axure"===t.file_type||"psd"===t.file_type){var n="/r/assets/".concat(t.id);return c.a.createElement("a",{href:n,target:"_blank"},__("点击预览"))}return null}},{key:"processResultNode",value:function(e){var t=e.asset.state;if(d.isProcessing(t))return c.a.createElement(a.a,{percent:e.progress.percent,strokeWidth:4,showInfo:!0});var n=e.result,r=null;switch(t){case"UPLOAD_FAILED":r="ART_BOARD_EXIST"===n.code?c.a.createElement("span",{className:"failed"},c.a.createElement("span",null,__("图集已存在"))):c.a.createElement("span",{className:"failed"},n.message);break;case"UPLOAD_SUCCESS":r=c.a.createElement("span",null,this.successMessage(e));break;default:r=c.a.createElement("span",null,t)}return r}},{key:"render",value:function(){var e=this,t=this.props,n=t.assets,a=t.book,i=n.notices?n.notices[a.id]:[];if(!i||0===i.length)return null;var u=null,p=null;return i.find((function(e){return d.isProcessing(e.asset.state)}))?u=c.a.createElement("span",null,__("正在上传文件至图集...")):(u=c.a.createElement("span",null,__("文件已上传完毕")),p=c.a.createElement(o.a,{title:__("确认处理结果"),placement:"bottom"},c.a.createElement("span",{onClick:this.confirm},c.a.createElement(l.a,null)))),c.a.createElement(r.a,{className:"asset-upload-notice",title:u,extra:p,contentType:"list"},c.a.createElement("div",{className:"files"},c.a.createElement("ul",null,i.map((function(t,n){var r=t.asset;return c.a.createElement("li",{key:r.id,style:0===n&&1===i.length?{width:"100%"}:{}},c.a.createElement("div",{className:"file-wrap"},c.a.createElement("div",{className:"filename"},c.a.createElement(f.b,{name:Object(s.getFileIcon)({ext:Object(s.getExtname)(r)}),width:20}),r.name),c.a.createElement("div",{className:"progress"},e.processResultNode(t))))})))))}}])&&m(t.prototype,n),i&&m(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.PureComponent);t.a=Object(u.d)((function(e){return e}))(w)},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";n(50);var r=n(19),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(198),l=n.n(u),s=n(88),f=n(114),d=n.n(f),p=n(287),m=n(17),h=n(38),y=n(389),v=n(554),b=n(1015);n(1973);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=d()("editor:doc:head"),N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(c,e);var t,n,o,i=O(c);function c(){var e;_(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S(j(e=i.call.apply(i,[this].concat(n))),"binkHotkeys",(function(){l()(v.e.publish.key.join(),(function(t){e.props.publish()}))})),S(j(e),"exec",(function(t){if(C("exec: ".concat(t)),t===m.a.DOC.history.cmd)e.props.showHistory()})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.binkHotkeys()}},{key:"isPublishEnabled",value:function(){var e=this.props,t=e.book,n=e.editing;return"Doc"===t.customIndexPage.type||!0===n}},{key:"render",value:function(){var e=this,t=this.props,n=t.group,o=t.book,i=t.pageReady,c=t.publishing,u=!this.isPublishEnabled(),l=o.customIndexPage;return a.a.createElement("div",{className:"lark-editor-header","data-testid":"doclet-editor-header"},a.a.createElement("div",{className:"lark-editor-header-content"},a.a.createElement("div",{className:"lark-editor-header-title"},a.a.createElement("div",{className:"book-custom-index-header-title"},a.a.createElement("a",{href:"/".concat(window.appData.group.login,"/").concat(window.appData.book.slug)},a.a.createElement(y.a,null),a.a.createElement("span",null,__("返回"))),a.a.createElement("span",{className:"book-custom-index-file-title"},__("编辑首页"))),a.a.createElement("span",{className:"section"},a.a.createElement(p.a.AccessScope,{group:n,book:o,doc:l}))),l.content_updated_at!==l.created_at&&a.a.createElement("div",{className:"book-custom-index-save-tip"},a.a.createElement(h.b,{name:"clock",width:14,height:14}),a.a.createElement(b.a,{docStatus:this.props.docStatus,netStatus:this.props.netStatus,savedAt:this.props.savedAt})),a.a.createElement("div",{className:"lark-editor-header-history"},a.a.createElement("a",{onClick:function(){return e.props.showHistory()},"data-testid":"doclet-editor-header-history"},__("查看历史"))),a.a.createElement("div",{className:"lark-editor-header-action"},a.a.createElement("div",{className:"book-custom-index-publish-button","data-testid":"doclet-editor-header-publish"},a.a.createElement(r.a,{type:"primary",disabled:!i||c||u,onClick:this.props.publish},__("发布"))))))}}])&&w(t.prototype,n),o&&w(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.PureComponent);N.propTypes={group:c.a.object.isRequired,book:c.a.object.isRequired,editing:c.a.bool,pageReady:c.a.bool.isRequired,publishing:c.a.bool.isRequired,saving:c.a.bool,savedAt:c.a.object,publish:c.a.func.isRequired,showHistory:c.a.func.isRequired,netStatus:c.a.string,docStatus:c.a.string},t.a=Object(s.d)((function(e){return{group:e.group,book:e.book}}))(N)},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(175),n(84)),a=(n(133),n(31)),i=(n(50),n(19)),c=(n(351),n(200)),u=n(0),l=n.n(u),s=n(2),f=n.n(s),d=n(198),p=n.n(d),m=n(88),h=n(10),y=n.n(h),v=n(500),b=n(285),g=n(617),_=n(357),w=n(38),E=n(554),O=n(89),x=n(1310),j=n(116),k=n(1015),S=n(1342);n(1973);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(){N=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==C(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function P(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){P(a,r,o,i,c,"next",e)}function c(e){P(a,r,o,i,c,"throw",e)}i(void 0)}))}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e){var t=A(Object(u.useState)(!1),2),n=t[0],s=t[1];Object(u.useEffect)((function(){p()(E.e.publish.key.join(),(function(t){e.publish()}))}),[]);var f,d=Object(x.a)(),m=d.showBookSelector,h=d.contextHolder,C=e.pageReady,P=e.publishing,L=e.template,I=(f=e.editing,!("Doc"===e.template.doclet.type||!0===f)),R=L.doclet,D=window.appData.isYuque?"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*smD-T54QiBwAAAAAAAAAAABkARQnAQ":"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*THO4Q65mn1gAAAAAAAAAAABkARQnAQ",M=window.appData.organization?window.appData.organization.logo:D,F=window.appData,B=F.group,U=F.book;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:y()("lark-editor-header","template-editor-header",{"template-editor-header-doc":"Doc"===R.type}),"data-testid":"template-editor-header"},l.a.createElement("div",{className:"lark-editor-header-content"},l.a.createElement("div",{className:"lark-editor-header-title"},l.a.createElement("div",{className:"template-header-title"},l.a.createElement("img",{src:M,alt:"语雀logo",height:window.appData.organization?32:42}),l.a.createElement("div",{className:"header-crumb"},L.type===g.TYPE.OFFICIAL&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,__("语雀官方")),l.a.createElement("span",{className:"section name-split"},"/")),B&&L.type!==g.TYPE.OFFICIAL&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,l.a.createElement("a",{href:"/".concat(B.login)},window.appData.group.name)),l.a.createElement("span",{className:"section name-split"},"/")),U&&L.type!==g.TYPE.OFFICIAL&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,l.a.createElement("a",{href:"/".concat(B.login,"/").concat(U.slug)},window.appData.book.name)),l.a.createElement("div",{className:"book-name-scope"},l.a.createElement(_.a.AccessScope,{public:window.appData.book.public,size:14})),l.a.createElement("span",{className:"section name-split"},"/")),l.a.createElement(S.a,{title:L.name,saveTitle:function(t){var n=e.template;Object(b.n)(n.id,t),e.dispatch({type:"template/update",payload:{name:t}})}}))),l.a.createElement("span",{className:"templateTag"},l.a.createElement(c.a,null,__("模板")))),R.content_updated_at!==R.created_at&&l.a.createElement("div",{className:"book-custom-index-save-tip"},l.a.createElement(k.a,{docStatus:e.docStatus,netStatus:e.netStatus,savedAt:e.savedAt})),l.a.createElement("div",{className:"lark-editor-header-action"},e.publish&&l.a.createElement("div",{"data-testid":"template-editor-header-publish"},l.a.createElement(i.a,{type:"primary",disabled:!C||P||I,onClick:e.publish},__("发布"))),"laketable"===L.format&&l.a.createElement(i.a,{type:"secondary",onClick:T(N().mark((function e(){var t,n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.type!==g.TYPE.GROUP&&L.type!==g.TYPE.PERSONAL&&L.type!==g.TYPE.OFFICIAL){e.next=10;break}return e.next=3,m();case 3:return t=e.sent,e.next=6,Object(b.d)(t,L);case 6:return n=e.sent,e.next=9,j.webProxy.docs.addToCatalog({ids:[n.id],book_id:t.id,target_node_uuid:null,action:"prependChild"});case 9:window.location.href="/".concat(t.user.login,"/").concat(t.slug,"/").concat(n.slug,"/edit");case 10:case"end":return e.stop()}}),e)})))},__("使用此模板新建")),l.a.createElement("div",{className:"lark-editor-header-more"},l.a.createElement(o.a,{placement:"bottomRight",arrowPointAtCenter:!0,type:"menu",content:l.a.createElement(a.a,null,e.showHistory&&l.a.createElement(a.a.Item,{key:"template-editor-header-history"},l.a.createElement("a",{onClick:function(){return e.showHistory()},"data-testid":"template-editor-header-history"},__("历史版本"))),l.a.createElement(a.a.Item,{key:"template-editor-header-delete"},l.a.createElement("a",{onClick:function(){return s(!0)},"data-testid":"delete"},__("删除"))))},l.a.createElement("span",{className:"template-editor-header-more-trigger","data-testid":"template-editor-header-more-action"},l.a.createElement(w.b,{name:"new-ellipsis",width:15})))))),l.a.createElement(r.a,{visible:n,onCancel:function(){return s(!1)},onOk:function(){Object(b.g)(L.id),null!==window.appData.book&&(window.location.href="/r/".concat(window.appData.group.login,"/").concat(window.appData.book.slug,"/trash")),null!==window.appData.group&&"User"===window.appData.group.type&&(window.location.href="/dashboard/recycles"),null!==window.appData.group&&O.a.isGroupOrPublication(window.appData.group)&&(window.location.href="/r/".concat(window.appData.group.login,"/trash"))},width:300},l.a.createElement("div",{className:"template-header-delete-confirmation","data-testid":"template-header-delete-confirmation"},l.a.createElement(v.a,{style:{color:"#FAAD14"}}),l.a.createElement("div",null,l.a.createElement("h4",null,__("确定删除这个模板？")),l.a.createElement("p",null,__("删除后可在回收站中恢复")))))),h)}I.propTypes={template:f.a.object,editing:f.a.bool,pageReady:f.a.bool.isRequired,publishing:f.a.bool.isRequired,saving:f.a.bool,savedAt:f.a.object,publish:f.a.func.isRequired,showHistory:f.a.func.isRequired,templateProxy:f.a.object,dispatch:f.a.func,netStatus:f.a.string,docStatus:f.a.string},t.a=Object(m.d)((function(e){return{template:e.template}}))(I)},function(e,t,n){"use strict";n(2856);var r=n(1926);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c}))},function(e,t,n){var r=n(604),o=n(2206),a=n(674),i=n(2207),c=n(1293),u=a((function(e){var t=c(e),n=r(e,i);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?o(n,void 0,t):[]}));e.exports=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(911);function o(e){var t=[],n={};if(e.startsWith("<!doctype html>"))t.push(e.substring(15));else{var o=JSON.parse(e.substring(15));t=o.htmls,n=o.options}var a=Object(r.a)(t,n);return{value:JSON.stringify(a)}}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(260),u=n(720),l="Exception-module_wrapper_TZz9i",s="Exception-module_contentBlock_vL99s",f="Exception-module_contentWrapper_quTKW",d="Exception-module_org_6f6sR",p="Exception-module_orgLogo_THlNA",m="Exception-module_orgName_Q7rxf",h="Exception-module_content_rM8A7",y="Exception-module_contentImg_BMsQj",v="Exception-module_contentText_U3Uw+",b="Exception-module_warnTitle_VoNVt",g="Exception-module_warnContent_61KC9",_="Exception-module_traceid_g-Fg1",w=["organization","mode","children","title","description","img","shouldTrace"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function O(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var x=function(e){var t=e.organization,n=e.mode,r=void 0===n?"default":n,a=e.children,i=e.title,x=e.description,j=e.img,k=e.shouldTrace,S=void 0!==k&&k,C=O(e,w);return o.a.createElement(u.a,E({},C,{className:l}),o.a.createElement("div",E({},C,{className:s}),o.a.createElement("div",{className:f},t&&o.a.createElement("div",{className:d},o.a.createElement(c.a.Logo,{src:t.logo,size:24,className:p}),o.a.createElement("h6",{className:m},o.a.createElement(c.a.Name,{organization:t}))),"default"===r&&o.a.createElement("div",{className:h},o.a.createElement("div",{className:v},o.a.createElement("h4",{className:b},i),o.a.createElement("div",{className:g},x)),o.a.createElement("div",{className:y,style:{backgroundImage:"url(".concat(j,")")}})),"custom"===r&&a),S&&window.appData.traceId&&o.a.createElement("p",{className:_},__("反馈码："),window.appData.traceId)))};x.propTypes={organization:i.a.object,title:i.a.node,description:i.a.node,img:i.a.string,mode:i.a.oneOf(["default","custom"]),children:i.a.node,shouldTrace:i.a.bool};t.a=x},function(e,t,n){"use strict";n(75);var r=n(26),o=(n(209),n(61)),a=n(0),i=n.n(a),c=n(88),u=n(2),l=n.n(u),s=n(2872),f="index-module_checkPassword_RmD7d",d="index-module_forgotLink_7eNNV",p=o.a.Item,m=function(e){var t=e.form,n=e.wrapperCol,o=e.showIcon,a=e.showForget,c=e.visibilityToggle,u=t.getFieldDecorator,l=encodeURIComponent("".concat(window.location.href,"#deleteorg")),m=window.appData.defaultSpaceHost;return i.a.createElement("div",{className:f},i.a.createElement(p,{wrapperCol:n},u("password",{validateTrigger:"onSubmit",initialValue:"",rules:[{validator:function(e,t,n){t.length?t.length<6?n(__("输入正确密码格式，至少 6 位")):n():n(__("输入密码"))}}]})(i.a.createElement(r.a.Password,{className:"login-password-input",autoComplete:"off",placeholder:__("密码"),prefix:o?i.a.createElement(s.a,null):null,type:"password",visibilityToggle:c,suffix:a?i.a.createElement("span",{className:d},i.a.createElement("a",{href:"".concat(m,"/password_reset?goto=").concat(l)},i.a.createElement("span",null,__("忘记密码？")))):null,maxLength:200,size:"large"}))))};m.defaultProps={showIcon:!0,showForget:!0,visibilityToggle:!1},m.propTypes={form:l.a.object,showIcon:l.a.bool,showForget:l.a.bool,visibilityToggle:l.a.bool};t.a=Object(c.d)((function(e){return e}))(m)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(34),u=n(666),l=n(2104);n(2208);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t,n,a,i,f=e.doc,d=e.docDomain,p=(t=s(Object(r.useState)(document.body.clientHeight),2),n=t[0],a=t[1],i=function(){a(document.body.clientHeight)},Object(r.useEffect)((function(){return window.addEventListener("resize",i,!1),function(){window.removeEventListener("resize",i,!1)}}),[]),{getSheetAreaHeight:function(){return n-56-32}});return o.a.createElement(u.a,{layout:"fullscreen",doc:f,docDomain:d,docType:"Sheet",renderVersion:function(e){return o.a.createElement(l.a,{key:e.id,className:"doc-history-sheet-viewer",content:e.content,format:e.format,showToolbar:!1,versionMode:!0,geSheetStyle:{width:"100%",height:p.getSheetAreaHeight()}})},renderDiff:function(){},onCancel:e.onCancel,onRevert:e.onRevert,onReverted:e.onReverted,docProxy:c.a.docs,docletProxy:c.a.doclets,docVersionProxy:c.a.docVersions})}d.propTypes={doc:i.a.object.isRequired,docDomain:i.a.string,onCancel:i.a.func.isRequired,onRevert:i.a.func,onReverted:i.a.func},t.a=d},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(2105),u=n(34),l=n(666);function s(e){return o.a.createElement(l.a,{layout:"fullscreen",doc:e.doc,docDomain:e.docDomain,renderVersion:function(e){return o.a.createElement(c.a,{key:e.id,content:e.content,height:"100%",width:"100%"})},renderDiff:function(e,t){return null},onCancel:e.onCancel,onRevert:e.onRevert,onReverted:e.onReverted,docProxy:u.a.docs,docletProxy:u.a.doclets,docVersionProxy:u.a.docVersions})}s.propTypes={onCancel:i.a.func.isRequired,onRevert:i.a.func,onReverted:i.a.func,doc:i.a.object,docDomain:i.a.string},t.a=s},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(1001),u=n(34),l=n(666);function s(e){return o.a.createElement(l.a,{layout:"fullscreen",doc:e.doc,docDomain:e.docDomain,renderVersion:function(e){return o.a.createElement(c.a,{key:e.id,content:e.content,width:"100%",height:"100%"})},renderDiff:function(e,t){return null},onCancel:e.onCancel,onRevert:e.onRevert,onReverted:e.onReverted,docProxy:u.a.docs,docletProxy:u.a.doclets,docVersionProxy:u.a.docVersions})}s.propTypes={onCancel:i.a.func.isRequired,onRevert:i.a.func,onReverted:i.a.func,doc:i.a.object,docDomain:i.a.string},t.a=s},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(260),u=n(38),l=n(632),s=n(1313),f=(n(2210),function(e){var t=e.group,n=e.book,r=window.appData,a=r.organization,i=r.me,f=t.abilities&&t.abilities.read,d=a&&a.id;return o.a.createElement("div",{className:"m-book-header","data-testid":"book-head"},o.a.createElement(l.a,{title:o.a.createElement("div",{className:"title"},d&&o.a.createElement(c.a.Link,{organization:a}),f&&o.a.createElement(o.a.Fragment,null,d&&o.a.createElement("span",null," / "),o.a.createElement("a",{href:"/".concat(t.login)},t.name)))}),o.a.createElement("div",{className:"m-book-header-info"},o.a.createElement("h3",null,n.name,(null==i?void 0:i.isAdmin)&&-1===n.status&&o.a.createElement("span",{className:"book-name-scope"},o.a.createElement(u.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375}}))),o.a.createElement("p",null,n.description),o.a.createElement(s.a,{book:n})))});f.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired},t.a=f},function(e,t,n){var r=n(2205),o=n(454),a=n(2756);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),a):void 0}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return m}));var r=n(5);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,i,c,u){var l=f(e[a],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==o(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,u,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,u,"next",e)}function u(e){i(a,r,o,c,u,"throw",e)}c(void 0)}))}}function u(e){return l.apply(this,arguments)}function l(){return(l=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/tags/TagsController/create",e.abrupt("return",r.e("/api/modules/issue/group/tags/TagsController/create",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return(f=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/tags/TagsController/index",e.abrupt("return",r.c("/api/modules/issue/group/tags/TagsController/index",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/tags/TagsController/batchUpdate",e.abrupt("return",r.e("/api/modules/issue/group/tags/TagsController/batchUpdate",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/tags/TagsController/update",e.abrupt("return",r.f("/api/modules/issue/group/tags/TagsController/update",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=r.F1&&t<=r.F12)return!1;switch(t){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=r.ZERO&&e<=r.NINE)return!0;if(e>=r.NUM_ZERO&&e<=r.NUM_MULTIPLY)return!0;if(e>=r.A&&e<=r.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},o=r;t.default=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(5);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function p(){}function m(){}function h(){}var y={};l(y,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(y=b);var g=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(a,i,c,u){var l=f(e[a],e,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==o(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return m.prototype=h,l(g,"constructor",h),l(h,"constructor",m),m.displayName=l(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),l(g,u,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,u,"next",e)}function u(e){i(a,r,o,c,u,"throw",e)}c(void 0)}))}}function u(e){return l.apply(this,arguments)}function l(){return(l=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/comments/CommentsController/create",e.abrupt("return",r.e("/api/modules/issue/group/issues/comments/CommentsController/create",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return(f=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/comments/CommentsController/index",e.abrupt("return",r.c("/api/modules/issue/group/issues/comments/CommentsController/index",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/comments/CommentsController/update",e.abrupt("return",r.f("/api/modules/issue/group/issues/comments/CommentsController/update",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=c(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/modules/issue/group/issues/comments/CommentsController/del",e.abrupt("return",r.b("/api/modules/issue/group/issues/comments/CommentsController/del",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t){e.exports={artboardExt:[".png",".jpg",".jpeg",".gif",".psd"]}},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(79),n(44)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(88),s=n(68),f=n(10),d=n.n(f),p=n(287),m=n(996),h=n(17),y=n(124),v=n(1024),b=n(1359),g=n(1278),_=n(953),w=n(685),E=n(561),O=n(369),x=n(117),j=n(38),k="title-module_wrapper_hTJNO",S=function(e){var t=e.user,n=window.appData.me;return i.a.createElement("div",{className:k},!window.h5&&__("{name}的小记",{name:i.a.createElement("a",{href:"/".concat(t.login),target:"_blank"},t.name)}),(null==n?void 0:n.isAdmin)&&[x.STATUS.banned,x.STATUS.blocked].includes(t.status)&&i.a.createElement(j.b,{name:"doc-has-content-risk",width:13,style:{opacity:.3,marginLeft:4}}))};S.propTypes={user:u.a.object};var C=S,N=n(1306),P=n(380),T=n(967),A=n(54),L=n(167),I=n(100),R=n(999),D=n(1922),M=(n(96),n(23)),F=n(1083),B=n(2111);function U(e){var t=e.book,n=e.doc,o="Sheet"===n.type||"Table"===n.type;return Object(B.a)(t,n),i.a.createElement(r.a,{type:"primary",onClick:function(){o?F.a.saveSheetPosition(n.id):F.a.saveReadPosition(n.id)},href:"/".concat(t.namespace,"/").concat(n.slug,"/edit").concat(o?window.location.hash:"")},i.a.createElement(M.a,{title:i.a.createElement("p",{style:{textAlign:"center"}},__("编辑")+__("：")+__("E")),placement:"bottom"},__("编辑")))}U.propTypes={book:u.a.object.isRequired,doc:u.a.object.isRequired};var z=U,G=n(1343),V=n(650),Y=n(1364),q=n(312),H=n(549),W=n(850),K=n(1298),$=n(1294),Q=n(116),X=n(324);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}var Z=["show_author_custom_text","show_author_id","show_author_option"];function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function oe(){oe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==J(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function ae(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ae(a,r,o,i,c,"next",e)}function c(e){ae(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e){var t=e.group,n=e.book,r=e.doc,c=e.actions,u=e.history,l=e.dispatch,s=function(e){var t=e.group,n=e.book,r=e.doc,o=e.actions,i=e.history,c=e.dispatch,u=ce(Object(a.useState)(!1),2),l=u[0],s=u[1],f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e.find((function(e){return e.id===r.id||e.url===r.slug})):null},d=f(n.toc),p=!!d,m=q.a.shouldShowToc(n),v=function(){var e=ie(oe().mark((function e(t,o,a,i){var u,l,s,f;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=[],l=n.docs,u=l,s=a.targetBook,"move"!==i||s.id===n.id){e.next=8;break}return e.next=7,Q.webProxy.docs.find({book_id:n.id});case 7:u=e.sent;case 8:if("copy"!==i||s.id!==n.id){e.next=12;break}return e.next=11,Q.webProxy.docs.find({book_id:n.id});case 11:u=e.sent;case 12:return"destroy"===i&&(u=l.filter((function(e){return e.id!==r.id}))),e.next=15,c({type:"book/updateDocs",payload:u});case 15:if(o){e.next=23;break}if("destroy"!==i){e.next=19;break}return e.next=19,Object($.a)(800);case 19:return e.next=21,q.a.getCatalogNodes(n.id);case 21:f=e.sent,o=f.toc;case 23:return c({type:"book/updateToc",payload:o}),e.abrupt("return",{newToc:o,newDocs:u});case 25:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),b=function(){var e=ie(oe().mark((function e(o,a){var c,u,l,s,f,d,p,h;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.a.isMixingType(n)){e.next=3;break}return window.location.href="/".concat(n.namespace),e.abrupt("return");case 3:m?(d=a.catalog,p=a.newCatalog,h=a.currentItem,c=q.a.getRedirectURL(d,p,{currentItem:h,group:t,book:n})):(u=a.docs,s=(l=void 0===u?[]:u).findIndex((function(e){return e.id===r.id})),(f=l[s+1])&&(c="/".concat(t.login,"/").concat(n.slug,"/").concat(f.slug))),c?i.push(c):window.location.href="/".concat(t.login,"/").concat(n.slug);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=ie(oe().mark((function e(o){var a,i,c;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=o,e.next=e.t0===h.a.DOC.delete.cmd?3:e.t0===h.a.DOC.move.cmd||e.t0===h.a.DOC.copy.cmd?9:e.t0===h.a.DOC.edit_meta.cmd?13:15;break;case 3:return e.next=5,v(null,null,{targetBook:n,currentItem:d},"destroy");case 5:return a=e.sent,i=a.newToc,b("delete",{docs:n.docs,catalog:n.toc,newCatalog:i,currentItem:f(n.toc)}),e.abrupt("break",16);case 9:return c=W.a.useViewModel({item:f(n.toc),group:t,book:n,doc:r,catalog:n.toc,onMove:function(e,t,r){v(e,t,r,"move"),r.targetBook.id!==n.id&&b("move",{docs:n.docs,catalog:e,newCatalog:t,currentItem:r.currentItem})},onCopy:function(e,t,n){v(e,t,n,"copy")},onDestroy:function(e,t,r){v(e,t,r,"destroy"),b("delete",{docs:n.docs,catalog:e,newCatalog:t,currentItem:r.currentItem})}}),o===h.a.DOC.copy.cmd&&c.showCopyToModal(),o===h.a.DOC.move.cmd&&c.showMoveToModal(),e.abrupt("break",16);case 13:return s(!0),e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=ie(oe().mark((function e(o){var a,u,l,f,d,p,m;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.show_author_custom_text,u=o.show_author_id,l=o.show_author_option,f=re(o,Z),d=te(te({},f),{},{meta:{show_author_custom_text:a,show_author_id:u,show_author_option:l}}),e.next=4,y.a.updateDocMeta(d,r);case 4:if(p=e.sent){e.next=7;break}return e.abrupt("return");case 7:s(!1),c({type:"doc/update",payload:p}),m=n.docs.map((function(e){return e.id===p.id?p:e})),c({type:"book/updateDocs",payload:m}),i.push("/".concat(t.login,"/").concat(n.slug,"/").concat(p.slug));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{state:{currentCatalogNode:d,isCatalogNode:p,showDocMetaEditor:l},editActions:o,getCatalogNodeByToc:f,doDocAction:g,updateBookDocsAndToc:v,setShowDocMetaEditor:s,saveMeta:_}}({group:t,book:n,doc:r,actions:c,history:u,dispatch:l}),f=s.editActions,d=s.doDocAction,p=s.setShowDocMetaEditor,m=s.saveMeta,v=s.state,b=v.showDocMetaEditor,g=v.currentCatalogNode,_=v.isCatalogNode;return i.a.createElement("span",{className:"header-action-item header-action-item-more","data-aspm-click":"d223116"},i.a.createElement(V.a,{"data-testid":"doc-reader-more-actions",overlayClassName:X.a.popoverMore,direction:"circle",iconWidth:20,getPopupContainer:function(){return document.getElementById("header")},content:i.a.createElement(Y.a,{commands:f,commandParams:_&&{toc_node_uuid:g.uuid,toc_node_url:g.url,toc_node_title:g.title,can_export_multiple:!0},book:n,doc:r,onSelect:e.onSelect,onCommandsExecuted:function(t){var r=t.cmd;r!==h.a.DOC.create_review.cmd?H.a.isMixingType(n)&&d(r):e.dispatch({type:"review/update",payload:{showReviewDrawer:!0,showCreateReviewDrawer:!0}})}})}),b&&i.a.createElement(o.a,{width:514,visible:!0,title:__("文档设置"),footer:null,onCancel:function(){return p(!1)},bodyStyle:{maxHeight:"90vh",overflow:"auto",paddingTop:16}},i.a.createElement(K.a,{doc:r,book:n,group:t,save:m,hideMoreInfo:!0})))}le.propTypes={doc:u.a.object.isRequired,book:u.a.object.isRequired,group:u.a.object.isRequired,actions:u.a.array.isRequired,onSelect:u.a.func,dispatch:u.a.func.isRequired,history:u.a.object.isRequired};var se=le,fe=(n(130),n(35)),de=(n(351),n(200)),pe=n(34),me=n(109);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ye(){ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==he(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function ve(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e){var t=e.defaultVersion,n=e.doc,r=e.onVersionChange,o=be(Object(a.useState)(t),2),i=o[0],c=o[1],u=be(Object(a.useState)(!0),2),l=u[0],s=u[1],f=be(Object(a.useState)([t]),2),d=f[0],p=f[1],m=Object(a.useRef)(!1);return{state:{selectedVersion:i,versionsLoaded:l,versions:d},loadVersions:function(){return(e=ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==m.current){e.next=2;break}return e.abrupt("return");case 2:return m.current=!0,e.next=5,pe.a.docVersions.find({doc_id:n.id,doc_type:"Doc",named:!0});case 5:t=e.sent,p(t),s(!0);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ve(a,r,o,i,c,"next",e)}function c(e){ve(a,r,o,i,c,"throw",e)}i(void 0)}))})();var e},changeVersion:function(e){var t=d.find((function(t){return t.id===e}));c(t),r(t)}}}function we(e){var t=e.doc,n=e.defaultVersion,r=_e({defaultVersion:n,doc:t,onVersionChange:e.onVersionChange}),o=r.state,a=o.selectedVersion,c=o.versions;return t.abilities&&t.abilities.update?i.a.createElement("div",{className:X.a.versionSelector},i.a.createElement(fe.a,{value:a.id,style:{width:200},onDropdownVisibleChange:function(e){!0===e&&r.loadVersions()},getPopupContainer:e.getPopupContainer,onSelect:function(e){r.changeVersion(e)}},c.map((function(e){return i.a.createElement(fe.a.Option,{key:e.id,value:e.id},e.name)})))):i.a.createElement("div",{className:X.a.versionName},i.a.createElement(de.a,null,__("版本："),n.name))}we.defaultProps={onVersionChange:function(){}},we.propTypes={doc:u.a.object.isRequired,defaultVersion:u.a.object.isRequired,onVersionChange:u.a.func,getPopupContainer:u.a.func};var Ee=Object(me.b)(we,!1),Oe=n(22),xe=n(261),je=n(2123),ke=n(683),Se=n(381),Ce=Object(Se.a)({loader:function(){return Promise.all([n.e(0),n.e(27)]).then(n.bind(null,2881))},loading:ke.a}),Ne=n(91),Pe=n(349);function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e){var t=e.doc,n=Te(Object(a.useState)(""),2),r=n[0],o=n[1],i=Te(Object(a.useState)(!1),2),c=i[0],u=i[1],l="scale"===r,s="recentEdit"===r,f=Object(a.useRef)(0);function d(){f.current=0}function p(e){var t,n,r;return(null===(t=window)||void 0===t||null===(n=t.appData)||void 0===n||null===(r=n.readTip)||void 0===r?void 0:r[e])||Ne.default.get(e)}function m(e){var t,n,r;Ne.default.set(e,"1"),null!==(t=window.appData)&&void 0!==t&&null!==(n=t.me)&&void 0!==n&&n.id&&Q.webProxy.mine.readGuide({type:e}),null!==(r=window.appData)&&void 0!==r&&r.readTip&&(window.appData.readTip[e]=1)}function h(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u(!1),setTimeout((function(){o("")}),300),m("doc_present_mode_scale_guide"),e&&Object(Pe.a)("c91016.d190110")}function y(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u(!1),setTimeout((function(){o("")}),300),m("doc_present_mode_recent_edit_guide"),e&&Object(Pe.a)("c91016.d190110")}return Object(a.useEffect)((function(){var e;function t(t){(Oe.ua.macos?t.metaKey:t.ctrlKey)&&187===t.keyCode?(f.current+=1,e&&clearTimeout(e),e=setTimeout((function(){d()}),6e4)):d()}return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[]),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).handlePixelRatioChange;Object(a.useEffect)((function(){var t,n,r,o=window.devicePixelRatio;function a(){var t,n,i,c,u=window.devicePixelRatio;"function"==typeof e&&e(u,o),null===(t=(n=window.matchMedia("(resolution: ".concat(o,"dppx)"))).removeEventListener)||void 0===t||t.call(n,"change",a),r=null===(i=(c=window.matchMedia("(resolution: ".concat(u,"dppx)"))).addEventListener)||void 0===i?void 0:i.call(c,"change",a)}return a(),null===(t=(n=window.matchMedia("(resolution: ".concat(o,"dppx)"))).addEventListener)||void 0===t||t.call(n,"change",a),function(){var e,t;null===(e=r)||void 0===e||null===(t=e.removeEventListener)||void 0===t||t.call(e,"change",a)}}),[])}({handlePixelRatioChange:Object(a.useCallback)((function(e,t){var n=!1;var r=e/t;f.current>=2&&r>1.1&&(p("doc_present_mode_scale_guide")||n||(Object(Pe.a)("c91016.d189132"),setTimeout((function(){u(!0),o("scale")}),300),n=!0),d())}),[])}),Object(a.useEffect)((function(){if(null!=t&&t.content_updated_at){var e=new Date(t.content_updated_at).valueOf();Date.now()-e<=3e5&&(p("doc_present_mode_recent_edit_guide")||(Object(Pe.a)("c91016.d189132"),o("recentEdit")))}}),[t]),{state:{scaleGuideVisible:l,recentEditGuideVisible:s,tooltipVisible:c},onRecentEditGuideClose:y,onScaleGuideClose:h,onPresent:function(){l?(Object(Pe.a)("c91016.d189134"),h(!1)):s&&(Object(Pe.a)("c91016.d189134"),y(!1))},onVisibleChange:function(e){l||u(e)}}}var Ie="index-module_present_RJR62",Re="index-module_btn_nQfFi",De="index-module_badgeDot_bduY4",Me="index-module_scaleGuide_mHEzN",Fe="index-module_recentEditGuide_VfSe+",Be="index-module_guideClose_zdMKD",Ue="index-module_guideImg_o4XNr",ze="index-module_guideText_qYtoP";function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},We.apply(this,arguments)}var Ke=function(e){return i.a.createElement("div",{className:Fe},i.a.createElement("img",{className:Ue,alt:"文档演示模式-新手引导",src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*AxmJTaR2TNYAAAAAAAAAAAAAARQnAQ"}),i.a.createElement("div",{className:ze},__("文档演示模式，让投屏演示更清晰。")),i.a.createElement(xe.a,{className:Be,onClick:e.onClose}))},$e=function(e){return i.a.createElement("div",{className:Me},__("试试演示模式？文档阅读效果更好！"),i.a.createElement(xe.a,{className:Be,onClick:e.onClose}))},Qe={overlayClassName:"index-module_tooltip_-a6S+",placement:"bottom"},Xe=function(){return{title:i.a.createElement(i.a.Fragment,null,__("演示")+__("：")+__("P")),trigger:["hover"]}};function Je(e){var t=e.doc,n=e.onPresent;function r(e){e.preventDefault(),"Doc"===t.type&&"function"==typeof n&&n()}var o=Oe.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p";return Object(je.a)(o,r),i.a.createElement(M.a,We({},Qe,Xe()),i.a.createElement("button",{type:"button","data-aspm-click":"d129827","data-testid":"present-btn",className:Re,onClick:r},i.a.createElement(j.b,{name:"present",width:20,height:20})))}function Ze(e){var t=e.doc,n=e.onPresent,r=Le({doc:t}),o=r.state,c=o.recentEditGuideVisible,u=o.scaleGuideVisible,l=o.tooltipVisible;function s(e){e.preventDefault(),"Doc"===t.type&&("function"==typeof n&&n(),r.onPresent())}var f=c||u,d=u,p=c,m=Oe.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p";Object(je.a)(m,s);var h=Object(a.useMemo)((function(){return i.a.createElement("button",{type:"button","data-aspm-click":"d129827","data-testid":"present-btn",className:Re,onClick:s},i.a.createElement(j.b,{name:"present",width:20,height:20}),f?i.a.createElement("span",{className:De}):null)}),[f]),y=Xe();d&&(y={title:i.a.createElement($e,{onClose:r.onScaleGuideClose}),color:"#1890FF",trigger:[]}),p&&(y={title:i.a.createElement(Ke,{onClose:r.onRecentEditGuideClose}),color:"white",trigger:["hover"]});var v=qe(qe({},Qe),{},{visible:l,onVisibleChange:r.onVisibleChange});return i.a.createElement(M.a,We({},v,y),h)}Je.propTypes={doc:u.a.object.isRequired,onPresent:u.a.func.isRequired},Ze.propTypes=Je.propTypes;var et=function(e){var t=e.doc,n=e.button,r=Ge(Object(a.useState)(!1),2),o=r[0],c=r[1],u=Object(a.useCallback)((function(){c(!1)}),[]),l=Object(a.useCallback)((function(){var e;c(!0),(e=document.body).requestFullScreen=e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen,e.requestFullScreen&&e.requestFullScreen()}),[]);return i.a.createElement("div",{className:Ie},i.a.createElement(n,{doc:t,onPresent:l}),o&&i.a.createElement(Ce,{doc:t,onCancel:u}))};et.propTypes={doc:u.a.object.isRequired,button:u.a.elementType.isRequired};var tt=function(e){var t=e.doc;return i.a.createElement(me.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return i.a.createElement(et,{doc:t,button:Je})}},i.a.createElement(et,{doc:t,button:Ze}))};tt.propTypes={doc:u.a.object.isRequired},tt.displayName="ExposedPresentButton";var nt=tt,rt=n(1360);function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(){ct=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ot(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function ut(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function lt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ut(a,r,o,i,c,"next",e)}function c(e){ut(a,r,o,i,c,"throw",e)}i(void 0)}))}}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ft(e,t)}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ht(e);if(t){var o=ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pt(this,n)}}function pt(e,t){if(t&&("object"===ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mt(e)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(u,e);var t,n,a,c=dt(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),yt(mt(t=c.call(this,e)),"showContentReportEntry",(function(){var e=t.props,n=e.doc,r=e.book,o=e.group,a=e.me,i=window.appData,c=i.isPublicCloud,u=i.share;return c&&n.user_id!==a.id&&(Object(P.a)(o,r,n)||Object(P.b)(u,r,n))})),yt(mt(t),"getMoreActions",(function(e){var n,r=t.props,o=r.version,a=r.book,i=r.me,c=r.note,u={disableDocumentCopy:window.appData.settings&&!0===window.appData.settings.disableDocumentCopy,isDocCollaborator:window.appData.isDocCollaborator,page:window.appData.sharePage?"share":"read",isYuque:window.appData.isYuque},l=o?y.a.additionalActionsInVersionReadPage(e):y.a.additionalActionsInReadPage(e,a,u),s=h.a.DOC,f=s.translate_zh,d=s.translate_en,p=s.view_original,m=s.ban_doc,v=s.unban_doc,b=s.content_report,g=s.divide;if(e.content&&"Doc"===e.type&&!t.translateOpts){var _,w,E=new URLSearchParams(window.location.search),x=Object(O.b)(e.content.replace(/<[^>]+>/g,"")||e.description||e.title),j=E.get("translate")||("zh"===x?"en":"zh");t.translateOpts={srcLanguage:x,tgtLanguage:j},x!==j&&["en","zh"].includes(j)&&(w=E.has("translate")?p:"en"===j?d:f),null===(_=l[0].actions)||void 0===_||_.splice(1,0,w)}(t.showContentReportEntry()&&(l.push(g),l.push(b)),i.isAdmin||i.isSecurityOperator)&&(l.push(g),l.push(m),((null==e?void 0:e.read_status)>=99||(null==c||null===(n=c.doclet)||void 0===n?void 0:n.status)>=99)&&l.push(v));return l})),yt(mt(t),"isAnonymous",(function(){return!t.props.me.id})),yt(mt(t),"onBlock",(function(){var e=t.props,n=e.doc,r=void 0===n?{}:n,o=e.note;t.setState({blockingDoc:r.id?r:o})})),yt(mt(t),"onSubmitBlock",function(){var e=lt(ct().mark((function e(n){var r;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.doc,(void 0===r?{}:r).id){e.next=4;break}return window.location.reload(),e.abrupt("return");case 4:return e.next=6,t.props.dispatch({type:"doc/update",payload:n});case 6:t.setState({blockingDoc:null});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),yt(mt(t),"onUnBlock",(function(){var e,n=t.props,r=n.doc,a=void 0===r?{}:r,i=n.note,c=window.appData.me,u=(void 0===c?{}:c).isSecurityOperator?"unblockForSecurityOps":"unblock";o.a.confirm({content:"确认取消屏蔽文档？",okText:"确认",cancelText:"关闭",onOk:(e=lt(ct().mark((function e(){return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a||!a.id){e.next=6;break}return e.next=3,A.a.docs[u]({id:null==a?void 0:a.id});case 3:t.onSubmitBlock({read_status:1}),e.next=9;break;case 6:return e.next=8,A.a.notes[u]({id:null==i?void 0:i.id});case 8:window.location.reload();case 9:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})})),yt(mt(t),"onCancelBlock",(function(){t.setState({blockingDoc:null})})),yt(mt(t),"toggleContentReport",(function(e){var n=t.state.contentReportVisible;e=void 0!==e?e:!n,t.setState({contentReportVisible:e})})),yt(mt(t),"selectMore",(function(e){var n=e.key,r=window.location,o=new URLSearchParams(r.search),a=h.a.DOC,i=a.translate_en,c=a.translate_zh,u=a.view_original,l=a.history,s=a.ban_doc,f=a.unban_doc,d=a.content_report;switch(n){case i.cmd:case c.cmd:t.handleTranslate(o);break;case u.cmd:o.delete("translate"),r.replace("".concat(r.pathname,"?").concat(o.toString()));break;case l.cmd:t.props.showHistory();break;case s.cmd:t.onBlock();break;case f.cmd:t.onUnBlock();break;case d.cmd:t.toggleContentReport()}})),yt(mt(t),"showEditEntry",(function(){if(window.appData.sharePage)return!1;var e=t.props,n=e.doc;return!e.version&&("Thread"!==n.type&&(n.abilities&&n.abilities.update))})),t.state={moreActions:t.getMoreActions(e.doc),contentReportVisible:!1},t}return t=u,(n=[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search);e.has("translate")&&(this.translateOpts=it(it({},this.translateOpts),{},{tgtLanguage:e.get("translate")}),this.doTranslate())}},{key:"componentDidUpdate",value:function(e){e.doc!==this.props.doc&&(this.translateOpts=null,this.setState({moreActions:this.getMoreActions(this.props.doc)}))}},{key:"doTranslate",value:function(){y.a.translateDoc(it(it({},this.translateOpts),{},{withComment:this.props.book.enable_comment}))}},{key:"handleTranslate",value:function(e){var t=this,n=this.props.history,r=window.location,o=h.a.DOC,a=o.translate_en,i=o.translate_zh,c=o.view_original;e.set("translate",this.translateOpts.tgtLanguage),n.push("".concat(r.pathname,"?").concat(e.toString())),this.doTranslate(),this.setState((function(e){var n=e.moreActions,r="zh"===t.translateOpts.tgtLanguage?i:a,o=n.find((function(e){return"scene"===e.type}));if(o){var u,l=null===(u=o.actions)||void 0===u?void 0:u.findIndex((function(e){return e.cmd===r.cmd}));-1!==l&&o.actions.splice(l,1,c)}return{moreActions:n}}))}},{key:"showShareToDigitalGarden",value:function(){var e=window.appData,t=e.sharePage,n=e.me,r=e.enableUserFeed;if(t)return!1;var o=this.props,a=o.group,i=o.doc,c=o.book;if(o.version)return!1;if(!i||!c||!a)return!1;var u=Object(L.b)({type:"doc",target:i,group:a,book:c}).getPrivacyValue();return[I.PUBLIC.public,I.PUBLIC.intranet_all,I.PUBLIC.intranet].includes(u)&&c.user_id===n.id&&r}},{key:"showShareEntry",value:function(){if(window.appData.sharePage)return!1;var e=this.props,t=e.doc;return!e.version&&t.abilities&&t.abilities.share}},{key:"showCollaborationEntry",value:function(){if(window.appData.sharePage)return!1;var e=this.props,t=e.doc;return!e.version&&t.abilities&&t.abilities.create_collaborator}},{key:"showSkylinkEntry",value:function(){var e=this.props,t=e.doc;return!e.version&&["Doc","Board","Sheet"].includes(t.type)}},{key:"renderOriginDocEntry",value:function(){var e=this.props,t=e.doc,n=e.book,o=e.group,a=e.version,c=e.note,u=e.me,l={thread:__("查看原始话题"),sheet:__("查看原始表格"),doc:__("查看原始文档")};if(a)return i.a.createElement("span",{className:"header-action-item"},i.a.createElement(r.a,{href:"/".concat(n.namespace,"/").concat(t.slug)},__("查看最新文档")));if(c&&u.id===c.user_id){var s=h.a.DOC.goto_note;return i.a.createElement("span",{className:"header-action-item"},i.a.createElement(r.a,{href:s.url},__("返回小记列表")))}return window.appData.sharePage?t.abilities&&t.abilities.read_origin?i.a.createElement("span",{className:"header-action-item"},i.a.createElement(r.a,{href:"/".concat(o.login,"/").concat(n.slug,"/").concat(t.slug),"data-testid":"view-origin-btn"},l[t.type.toLowerCase()]||l.doc)):void 0:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.book,r=t.group,a=t.doc,c=t.version,u=t.note,l=t.style,s=t.shouldHideLogo,f=t.shouldShowSeparator,h=t.showBreadcrumb,y=window.appData.organization,g=d()("header",this.props.className,[X.a.wrapper],yt({"doc-version-head":!!c},X.a.docTypeHead,"Doc"===a.type)),O=a&&a.id?a.id:u&&u.id,x=a&&a.id?"Doc":"Note",j={id:a.mark&&a.mark.id,target_id:a&&a.id,target_type:a.mark&&a.mark.target_type,action_tags:a.mark&&a.mark.action_tags},k=!!u;return i.a.createElement("div",{id:"header",className:g,"data-header-mode":"title","data-aspm":"c36321",style:l},i.a.createElement("div",{className:"doc-head-inner"},i.a.createElement("div",{className:d()("header-crumb","title-visible",{"with-separator":f,"only-doc-title":s&&!h&&!u&&!c})},!s&&i.a.createElement(G.a,{doc:a,book:n,group:r,organization:y}),h?i.a.createElement(w.a,{organization:y,group:r,book:n,doc:a,noGroup:!(r.abilities&&r.abilities.read),isNote:!!u}):i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a.Title,{doc:a}),!u&&i.a.createElement(p.a.AccessScope,{book:n,group:r,doc:a,placement:"bottom"})),u&&i.a.createElement(C,{user:u.user}),c&&i.a.createElement(Ee,{doc:a,defaultVersion:c,onVersionChange:this.props.showVersion,getPopupContainer:function(){return document.getElementById("header")}})),i.a.createElement("div",{className:"header-action"},i.a.createElement("div",{className:X.a.search,"data-aspm-click":"d223110"},i.a.createElement(E.a,{isMiniType:!0,placement:"bottomLeft"})),a.id&&!c&&i.a.createElement("div",{className:X.a.mark,"data-aspm-click":"d223108"},i.a.createElement(_.a,{target:j,targetType:"Doc",isMiniType:!0})),this.showCollaborationEntry()&&i.a.createElement("div",{className:X.a.collaborate},i.a.createElement(v.a,{key:"collaborator-doc-".concat(a.id),type:"doc"})),"Doc"===a.type&&i.a.createElement(nt,{group:r,book:n,doc:a}),"Show"===a.type&&i.a.createElement("div",{className:[X.a.collaborate,X.a.playButton].join(" "),"data-class":"header-action-item"},i.a.createElement(rt.a,null)),this.showSkylinkEntry()&&i.a.createElement("div",{className:X.a.skylink},i.a.createElement(b.a,null)),this.isAnonymous()&&i.a.createElement("span",{className:"header-action-item header-action-anonymous"},i.a.createElement(m.a.Login,{goto:window.location.href})),this.showShareToDigitalGarden()&&i.a.createElement(D.a,{style:{marginLeft:8},docId:a.id,currentUser:window.appData.me}),this.showShareEntry()&&i.a.createElement("div",{className:"header-action-item"},i.a.createElement(R.a,{key:"share-doc-".concat(a.id),type:"doc"})),this.showEditEntry()&&i.a.createElement("span",{className:"header-action-item",style:{marginLeft:8}},i.a.createElement(z,{book:n,doc:a})),this.renderOriginDocEntry(),!k&&i.a.createElement(se,{doc:a,book:n,group:r,actions:this.state.moreActions,onSelect:this.selectMore,dispatch:this.props.dispatch,history:this.props.history}),this.state.blockingDoc&&i.a.createElement(N.a,{punishType:x,punishSelect:["blocked","banned"],doc:this.state.blockingDoc,onSubmit:this.onSubmitBlock,onCancel:this.onCancelBlock}),this.state.contentReportVisible&&i.a.createElement(o.a,{destroyOnClose:!0,title:null,footer:null,visible:!0,onCancel:function(){return e.toggleContentReport(!1)}},i.a.createElement(T.a,{targetId:O,targetType:x,onClose:function(){return e.toggleContentReport(!1)}})))))}}])&&st(t.prototype,n),a&&st(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.a.Component);vt.propTypes={className:u.a.string,me:u.a.object,group:u.a.object,book:u.a.object,doc:u.a.object,note:u.a.object,version:u.a.object,history:u.a.object,search:u.a.object,showHistory:u.a.func,showVersion:u.a.func,dispatch:u.a.func.isRequired,style:u.a.object,shouldHideLogo:u.a.bool,shouldShowSeparator:u.a.bool};t.a=Object(l.d)((function(e){return{me:e.me,group:e.group,book:e.book,doc:e.doc,review:e.review}}))(Object(s.withRouter)(Object(g.b)(vt)))},function(e,t,n){"use strict";n(133);var r=n(31),o=n(0),a=n.n(o),i=n(68),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(149),d=n.n(f),p=n(235),m=n(38),h=n(1279),y=(n(922),n(427)),v=n(2132),b=n(538),g="book-module_createMain_ySGp2",_="book-module_wrapper_+Su+R",w="book-module_cancel_Fa1gS",E="book-module_fields_P2OoT",O="book-module_list_+RCYx",x="book-module_item_eZyH9",j="book-module_text_XUQ1s";function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(){T=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(S){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==k(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function A(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}var L=function(){var e,t=(e=T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(t);case 2:n=e.sent,r="/".concat(t.user.login,"/").concat(t.slug,"/").concat(n.slug,"/edit"),o=r,b.a.relocate(o,{hash:!0});case 5:case"end":return e.stop()}var o}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){A(a,r,o,i,c,"next",e)}function c(e){A(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),I=function(e){var t=[{title:__("新建文档#webappnav"),onClick:function(){var t=e.book,n=e.group;t.user=n,L(t)},iconId:"doc-type-default"}];return t.push.apply(t,C(new Array(4-t.length%4))),a.a.createElement("div",{className:_},a.a.createElement("div",{className:E},a.a.createElement("div",{className:O},t.map((function(t){return t?a.a.createElement("div",{className:x,onClick:function(){e.toggleModal(),t.onClick(t)}},a.a.createElement(m.b,{name:t.iconId,width:32}),a.a.createElement("div",{className:j},t.title)):a.a.createElement("div",{className:x})})))),a.a.createElement("div",{className:w,onClick:function(){e.toggleModal()}},__("取消")))},R=function(e){var t=function(){var e=S(Object(o.useState)(!1),2),t=e[0],n=e[1];return{state:{showModal:t},onShowModal:function(){n(!0)},toggleModal:function(){setTimeout((function(){n(!1)}),16)}}}(),n=t.state.showModal,r=t.onShowModal,i=t.toggleModal;return a.a.createElement("div",{onClick:r},e.children,a.a.createElement(y.a,{popup:!0,visible:n,onClose:i,animationType:"slide-up",className:g,maskClosable:!0},a.a.createElement(I,{toggleModal:i,book:e.book,group:e.group})))};R.propTypes={group:c.PropTypes.object.isRequired,book:c.PropTypes.object.isRequired};var D=R,M=n(2140),F=n(260),B=n(1919),U=n(549),z=n(632),G=n(1313),V=(n(2210),"index-module_webapp_YmhNY"),Y="index-module_webappHeader_zwLgb",q="index-module_search_yCRgJ",H="index-module_plus_DU6pi",W="index-module_mobileAppContainer_S5W5J",K=n(695);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e){var t=e.group,n=e.book,c=e.location.pathname,u=window.appData,l=u.organization,f=u.me,y=window.appData,v=y.isAlipayWebApp,b=y.isDingTalkMiniApp,g=y.isYuqueMobileApp,_=v||b,w=d.a.MIXING_BOOK_TYPES.includes(n.type),E="Book"===n.layout,O=n.namespace||"".concat(t.login,"/").concat(n.slug),x={home:"/".concat(O),catalog:"/r/".concat(O,"/catalog"),docs:"/g/".concat(O,"/docs"),collaborators:"/r/".concat(O,"/collaborators"),statistics:"/r/".concat(O,"/statistics"),trash:"/r/".concat(O,"/trash"),settings:"/".concat(O,"/settings"),watchers:"/".concat(O,"/watchers"),tempStore:"/r/".concat(O,"/temp_store")};function j(e){if(!n.enable_custom_index&&g)return[x.catalog];for(var t=0,r=Object.values(x);t<r.length;t++){var o=r[t];if(e.startsWith(o))return[o]}}var k=$(Object(o.useState)(j(c)),2),S=k[0],C=k[1];Object(o.useEffect)((function(){C(j(c))}),[c]),Object(o.useEffect)((function(){var e=document.getElementById("ReactApp");if(e&&g)return e.classList.add(W),function(){e.classList.remove(W)}}),[g]);var N,P,T,A=t.abilities&&t.abilities.read,L=l&&l.id;return a.a.createElement("div",{className:s()("m-book-header",(N={},P=V,T=_,P in N?Object.defineProperty(N,P,{value:T,enumerable:!0,configurable:!0,writable:!0}):N[P]=T,N)),"data-testid":"book-head"},a.a.createElement(z.a,{title:a.a.createElement("div",{className:"title"},L&&a.a.createElement(F.a.Link,{organization:l}),A&&a.a.createElement(a.a.Fragment,null,L&&a.a.createElement("span",null," / "),a.a.createElement("a",{href:"/".concat(t.login)},t.name)))}),a.a.createElement("div",{className:s()("m-book-header-info",K.a.wrapper,K.a.main)},_&&a.a.createElement("div",{className:Y},a.a.createElement("div",{className:q},a.a.createElement(h.a,{group:t,book:n})),n.type===d.a.TYPE_MAP.BOOK&&n.abilities&&n.abilities.create_doc&&a.a.createElement("div",{className:H},a.a.createElement(D,{group:t,book:n},a.a.createElement(m.b,{name:"webapp-plus",width:24})))),a.a.createElement("div",{onClick:function(){var e,t;g&&null!==(e=window.appData.book)&&void 0!==e&&null!==(t=e.abilities)&&void 0!==t&&t.manage&&p.a.openPage({pageName:"booksSetting",params:{bookId:n.id}})}},a.a.createElement("h3",{className:"m-book-title"},n.name,(null==f?void 0:f.isAdmin)&&-1===n.status&&a.a.createElement("span",{className:"book-name-scope"},a.a.createElement(m.b,{name:"doc-has-content-risk",width:16,style:{opacity:.375,marginLeft:8}}))),a.a.createElement("p",{className:"m-book-desc"},n.description)),a.a.createElement(B.a,{users:n.contributors,canEdit:n.abilities.create_doc,bookId:n.id}),a.a.createElement(G.a,{book:n})),w&&a.a.createElement("div",{"data-testid":"m-book-header-subnavi"},a.a.createElement(M.a,{className:E?"m-header-nav-tree-toc":"",menus:a.a.createElement(r.a,{mode:"horizontal",selectedKeys:S},n.enable_custom_index&&a.a.createElement(r.a.Item,{key:x.home},a.a.createElement(i.NavLink,{to:x.home,exact:!0},__("首页"))),a.a.createElement(r.a.Item,{key:x.catalog},a.a.createElement(i.NavLink,{to:x.catalog,exact:!0},__("目录"))),U.a.shouldShowTempStoreBox(n)&&a.a.createElement(r.a.Item,{key:x.tempStore,className:g?"mobile-app-temp":""},a.a.createElement(i.NavLink,{to:x.tempStore,exact:!0,target:"_blank"},__("全部文档"))))})))}X.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,location:u.a.object.isRequired};t.a=Object(i.withRouter)(X)},function(e,t,n){"use strict";n.r(t),n.d(t,"GlobalBookSelector",(function(){return U}));n(173);var r=n(94),o=(n(75),n(26)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(88),s=n(149),f=n.n(s),d=n(285),p=n(10),m=n.n(p),h=n(42),y=n.n(h),v=n(235),b=n(357),g=n(38),_=n(34),w="GlobalBookSelector-module_tip_RhjZ7",E="GlobalBookSelector-module_tipText_Gtvoq",O="GlobalBookSelector-module_btnNew_v4mB3",x="GlobalBookSelector-module_bookSelector_6khZ0",j="GlobalBookSelector-module_mobile_bdx92",k="GlobalBookSelector-module_bookSelectorItem_EBxLN",S="GlobalBookSelector-module_searchBox_c2zph";function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(){N=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==C(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function P(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){P(a,r,o,i,c,"next",e)}function c(e){P(a,r,o,i,c,"throw",e)}i(void 0)}))}}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=o.a.Search,U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(c,e);var t,n,o,a=I(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),F(D(t=a.call(this,e)),"loadMyBooks",T(N().mark((function e(){var n,r,o,a,i,c,u,l,s,p;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,r=n.organization,o=n.group,a=void 0===o?{}:o,i=n.enableGroupFilter,c=void 0!==i&&i,u=f.a.MIXING_BOOK_TYPES.join(","),(l={organization_id:r.id,type:u,filterByAbility:"create_doc",offset:0,limit:50,enable_group_filter:c,group_id:a.id}).enable_group_filter||delete l.enable_group_filter,e.next=6,_.a.mine.books(l);case 6:s=e.sent,p=Object(d.h)(s,t.props.filterByGroup?a:{}),t.setState({myBooks:p,booksOnDisplay:p,myBooksLoaded:!0});case 9:case"end":return e.stop()}}),e)})))),F(D(t),"initializeBookAndWrite",(function(){var e=t.props,n=e.group,r=void 0===n?{}:n,o=e.enableGroupFilter,a=void 0!==o&&o,i=e.me,c=t.state.myBooks;if(t.isDebugMode()){var u=c.find((function(e){return e.slug===f.a.DEFAULT_BOOK_SLUG}));if(u)return void t.props.onBookSelect(u)}_.a.books.createBook({user_id:a&&r?r.id:i.id,type:"Book",slug:f.a.DEFAULT_BOOK_SLUG,name:__("默认知识库"),public:0}).then((function(e){e.user=a&&r?r:i,window.appData.isYuqueMobileApp&&v.a.notifyEvent("UPDATE_MY_BOOKS_LIST");var n=[e];t.setState({myBooks:n,booksOnDisplay:n,myBooksLoaded:!0}),t.props.onBookSelect(e)}))})),F(D(t),"filterBook",y()((function(e){var n=t.state.myBooks;if(""===e)return t.setState({booksOnDisplay:n});var r=e.toLowerCase(),o=n.filter((function(e){return e.name.toLowerCase().includes(r)||e.user.name.toLowerCase().includes(r)}));t.setState({booksOnDisplay:o})}),300)),F(D(t),"resetFilter",(function(){var e=t.state.myBooks;t.setState({booksOnDisplay:e})})),F(D(t),"isDebugMode",(function(){return"#write"===window.location.hash})),F(D(t),"showQuickStartWrite",(function(){return 0===t.state.myBooks.length||t.isDebugMode()})),t.state={myBooks:[],booksOnDisplay:[],myBooksLoaded:!1},t}return t=c,(n=[{key:"componentDidMount",value:function(){if(window.appData.booksArr){var e=window.appData.booksArr,t=Object(d.h)(e,(this.props.filterByGroup,{}));this.setState({myBooks:t,booksOnDisplay:t,myBooksLoaded:!0})}else this.loadMyBooks()}},{key:"render",value:function(){var e=this,t=this.state,n=t.myBooks,o=t.booksOnDisplay,a=t.myBooksLoaded,c=this.props,u=c.selectedBookId,l=c.isMobile,s=!l,f=window.appData,d=f.isAlipayWebApp,p=f.isDingTalkMiniApp;return a?this.showQuickStartWrite()?d||p?i.a.createElement("p",{className:m()(w,"empty-tip")},__("你尚未创建知识库")):this.props.organization&&this.props.organization.id?i.a.createElement(i.a.Fragment,null,s&&i.a.createElement("p",{className:w},this.props.filterByGroup?__("点击选择一个本团队的知识库"):__("点击选择一个最近参与的知识库")),i.a.createElement("a",{href:"/new",className:O},i.a.createElement(g.b,{name:"doc-quick-create",width:"16"}),__("创建知识库并开始编写"))):i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:m()(w,"empty-tip")},__("你尚未创建知识库")),i.a.createElement("ul",{className:m()(x,F({},j,l))},i.a.createElement("li",{className:m()(k,F({},j,l)),onClick:this.initializeBookAndWrite},i.a.createElement(g.b,{name:"doc-quick-create",width:"16"}),i.a.createElement("span",{className:E},__("创建默认知识库并开始编写"))))):i.a.createElement(i.a.Fragment,null,s&&i.a.createElement("p",{className:w},this.props.filterByGroup?__("点击选择一个本团队的知识库"):__("点击选择一个最近参与的知识库")),n.length>7&&i.a.createElement("div",{className:m()(S,F({},j,l))},i.a.createElement(B,{onChange:function(t){return e.filterBook(t.target.value)},onClear:this.resetFilter,placeholder:__("请输入知识库名称进行搜索")})),i.a.createElement("ul",{className:m()(x,F({},j,l),"global-book-selector-list"),"data-testid":"global-book-selector-list"},o.map((function(t){return i.a.createElement("li",{"data-testid":"global-book-selector-item-".concat(t.id),className:m()(k,F({},j,l)),key:t.id,onClick:function(){e.props.onBookSelect(t)}},i.a.createElement(b.a.Title,{group:t.user,book:t,showGroupName:!0,showOrgLabel:!e.props.organization.id,isMobile:l,checked:u===t.id}))})),0===o.length&&i.a.createElement("p",null,__("未能找到相关知识库，换个关键词试试")))):i.a.createElement(r.a,{justify:"block"})}}])&&A(t.prototype,n),o&&A(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.a.Component);U.defaultProps={me:window.appData.me,enableGroupFilter:!1,isMobile:window.h5},U.propTypes={me:u.a.object,organization:u.a.object.isRequired,group:u.a.object,selectedBookId:u.a.number,onBookSelect:u.a.func.isRequired,enableGroupFilter:u.a.bool,filterByGroup:u.a.bool,isMobile:u.a.bool};t.default=Object(l.d)((function(e){return{organization:e.organization,group:e.group}}))(U)},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(38),i="DocletDraftTip-module_draftTip_7UB58";t.a=function(e){return o.a.createElement("div",{className:i,title:__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新")},o.a.createElement(a.b,{name:"doc-has-new-content",height:18,width:18}),o.a.createElement("p",null,__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新")))}},function(e,t,n){"use strict";n(922);var r=n(427),o=n(0),a=n.n(o),i=n(2),c=n(38),u=n(538),l="group-module_createMain_+mLAa",s="group-module_wrapper_pGYw1",f="group-module_cancel_pwpHK",d="group-module_fields_oDcOW",p="group-module_list_1Gi+L",m="group-module_item_y0EME",h="group-module_text_FQAaw";function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=new URLSearchParams;return Object.keys(e).forEach((function(n){return t.set(n,e[n]||"")})),t.toString()},w=function(e){var t=[{title:__("新建文档#webappnav"),onClick:function(){return t=e.group,n={group_id:t.id},r="".concat("/r/webapp/new/doc","?").concat(_(n)),void u.a.relocate(r,{hash:!0});var t,n,r},iconId:"doc-type-default"},{title:__("新建知识库#webappnav"),onClick:function(){return t=e.group,n={group_id:t.id},r="".concat("/new","?").concat(_(n)),void u.a.relocate(r,{hash:!1});var t,n,r},iconId:"book-type-default"}];return t.push.apply(t,v(new Array(4-t.length%4))),a.a.createElement("div",{className:s},a.a.createElement("div",{className:d},a.a.createElement("div",{className:p},t.map((function(t){return t?a.a.createElement("div",{className:m,onClick:function(){e.toggleModal(),t.onClick(t)}},a.a.createElement(c.b,{name:t.iconId,width:32}),a.a.createElement("div",{className:h},t.title)):a.a.createElement("div",{className:m})})))),a.a.createElement("div",{className:f,onClick:function(){e.toggleModal()}},__("取消")))},E=function(e){var t=function(){var e=y(Object(o.useState)(!1),2),t=e[0],n=e[1];return{state:{showModal:t},onShowModal:function(){n(!0)},toggleModal:function(){setTimeout((function(){n(!1)}),16)}}}(),n=t.state.showModal,i=t.onShowModal,c=t.toggleModal;return a.a.createElement("div",{onClick:i},e.children,a.a.createElement(r.a,{popup:!0,visible:n,onClose:c,animationType:"slide-up",className:l,maskClosable:!0},a.a.createElement(w,{toggleModal:c,group:e.group})))};E.propTypes={group:i.PropTypes.object.isRequired};t.a=E},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(38),s=n(212),f={mainIcon:"index-module_mainIcon_Hb4AQ",edit:"index-module_edit_hs6Qv",catalog:"index-module_catalog_hO3BC",divide:"index-module_divide_d4KOc"};function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={Edit:function(e){return o.a.createElement("span",{className:f.edit,onClick:e.onClick},o.a.createElement(l.b,{name:"edit-border",currentColor:"#323233",width:24,height:24}))}};p.Edit.propTypes={onClick:i.a.func},p.CatalogTrigger=function(e){return o.a.createElement("span",{className:f.catalog,onClick:e.onClick},o.a.createElement(l.b,{name:"catalog",currentColor:"#323233",width:24,height:24}))},p.CatalogTrigger.propTypes={onClick:i.a.func},p.Publish=function(e){var t;return o.a.createElement("span",{onClick:e.onClick,className:u()((t={},d(t,f.mainIcon,!0),d(t,f.mainIconIphoneX,s.a.isIphoneX()),t),"h5-editor-main-icon")},o.a.createElement(l.b,{name:"h5-doc-publish",width:65,height:65}))},p.Publish.propTypes={onClick:i.a.func},p.Divide=function(){return o.a.createElement("span",{className:f.divide})};t.a=p},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(34),u=n(666),l=n(2115);n(2208);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t,n,a,i,f=e.doc,d=e.docDomain,p=(t=s(Object(r.useState)(document.body.clientHeight),2),n=t[0],a=t[1],i=function(){a(document.body.clientHeight)},Object(r.useEffect)((function(){return window.addEventListener("resize",i,!1),function(){window.removeEventListener("resize",i,!1)}}),[]),{getSheetAreaHeight:function(){return n-56-32}});return o.a.createElement(u.a,{layout:"fullscreen",doc:f,docDomain:d,docType:"Table",renderVersion:function(e){return o.a.createElement(l.a,{docId:f.id,key:e.id,className:"doc-history-table-viewer",content:e.content,format:e.format,showToolbar:!1,geSheetStyle:{width:"100%",height:p.getSheetAreaHeight()}})},renderDiff:function(){},onCancel:e.onCancel,onRevert:e.onRevert,onReverted:e.onReverted,docProxy:c.a.docs,docletProxy:c.a.doclets,docVersionProxy:c.a.docVersions})}d.propTypes={doc:i.a.object.isRequired,docDomain:i.a.string,onCancel:i.a.func.isRequired,onRevert:i.a.func,onReverted:i.a.func},t.a=d},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(250);function o(e){for(var t,n=0;n<e.length;){if(-1!==(t=e[n]).type.indexOf("image"))return t;n++}return!1}var a="/api/upload/audit_files?ctoken=".concat(Object(r.a)(window))},function(e,t,n){"use strict";function r(e){var t=e.method,n=e.url,r=e.xhr,o=e.data,a=e.dataType,i=e.success,c=e.error;if(!(r||a&&"json"!==a)){var u,l=!1,s={abort:function(){l=!0,s._aborted=!0}};return window.nebulaMobileApp&&(u=new Promise((function(e,r){var a=n,u=JSON.stringify(o);if(o){var f=new URLSearchParams;Object.keys(o).forEach((function(e){return f.set(e,o[e]||"")}));var d=f.toString();a=n.includes("?")?"".concat(n,"&").concat(d):"".concat(n,"?").concat(d),u=void 0}window.nebulaMobileApp.nebulaHttpRequest(a,{method:t.toUpperCase(),body:u}).then(function(e){return function(t){l||(s.response="string"==typeof t?t:JSON.stringify(t),null==i||i(t),e(t))}}(e)).catch(function(e){return function(t){l||(t.xhr=s,null==c||c(t),e(t))}}(r))}))),u?(s.promise=u,{promise:u,xhr:s}):void 0}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(88),u=n(68),l=(n(133),n(31)),s=n(10),f=n.n(s),d=n(38),p=n(650),m=n(623),h="title",y="action",v="actionMore",b="normal",g="button",_="buttonPrimary",w="custom",E=n(2109),O="header-core-module_headerCrumb_xPhF5",x="header-core-module_headerCrumbTitle_ugv5R",j="header-core-module_withSparator_ZUxKt",k="header-core-module_headerCrumbItem_7ibHl",S="header-core-module_headerCrumbItemFirst_Ny-vQ",C="header-core-module_headerActionItem_3Hhk5",N="header-core-module_headerActionMore_9-uz9",P="header-core-module_headerActionFirstButton_ckS-f",T="header-core-module_wrapper_8It3f",A="header-core-module_popoverMore_oZfDQ",L="header-core-module_actionMore_YcTfZ",I="header-core-module_menuItemContainer_MR5uJ",R="header-core-module_iconContainer_gztbQ",D="header-core-module_iconBeta_Os8b8";function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(i,e);var t,n,r,a=U(i);function i(e){var t,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=G(t),o=function(e,n){return n.actionType===b?t.renderNormalAction(n):t.renderCustomAction(e)},(r="renderActionItem")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.headers=e.headers,t.actions=e.actions,t.actionMore=e.actionMore,t.actionItemCls="header-action-item";var c=[];return t.uiConfig={},t.pluginCtx.extend("registerUIHeader",(function(e,n){t.uiConfig[e]=n,c.push(e)})),t.pluginLoader.init(),t.otherPlugins=t.options.plugins.filter((function(e){return!c.includes(e.pluginName)})),t}return t=i,(n=[{key:"render",value:function(){var e=this,t=[this.renderHeader(),this.renderAction(),o.a.createElement(o.a.Fragment,null,this.otherPlugins.map((function(t){var n=e.pluginLoader.getPlugin(t.pluginName);return n?n.render():null})))];return this.renderContainer(t)}},{key:"renderContainer",value:function(e){var t=f()("header",this.options.className,T);return o.a.createElement("div",{id:"header",className:t,"data-header-mode":"title","data-aspm":"c36321",style:this.options.style},o.a.createElement("div",{className:"doc-head-inner"},e))}},{key:"renderHeader",value:function(){var e=this,t=this.options.shouldShowSeparator?j:"",n=this.headers.map((function(t,n){var r=e.pluginLoader.getPlugin(t);if(!r)return null;var a=[k];return 0===n&&a.push(S),o.a.createElement("div",{className:a.join(" ")},r.render())}));return o.a.createElement("div",{className:O},o.a.createElement("div",{className:"".concat(x," ").concat(t)},n))}},{key:"renderAction",value:function(){var e=this,t=!1;return o.a.createElement("div",{className:"header-action"},this.actions.map((function(n,r){var a=e.pluginLoader.getPlugin(n);if(!a)return null;var i=e.uiConfig[n],c=[C];return[g,_].includes(i.type)&&!t&&(t=!0,c.push(P)),o.a.createElement("div",{className:c.join(" ")},e.renderActionItem(a,i))})),this.renderActionMore())}},{key:"renderActionMore",value:function(){var e=this,t=[];if(this.actionMore){var n=this.actionMore.length;this.actionMore.forEach((function(r,a){var i;r.forEach((function(n){var r=e.pluginLoader.getPlugin(n);if(r){var a=e.uiConfig[n];if(a){i=!0,a.actionType||(a.actionType=a.title?b:w);var c=e.pluginCtx.getCommand(n);t.push(o.a.createElement(l.a.Item,{key:n,onClick:function(t){e.pluginLoader.activePlugin(n),a.onClick&&a.onClick(t,r,a)},className:"doc-action-menu-item-".concat(c," doc-action-menu-item-type-").concat(a.actionType),"data-testid":"doc-action-menu-item-".concat(c)},e.renderActionItem(r,a)))}}})),n-1!==a&&i&&t.push(e.renderDivide(a))}))}var r=o.a.createElement("div",{className:L},o.a.createElement(l.a,{selectable:!1,multiple:!0,mode:"vertical"},t));return o.a.createElement("span",{className:"".concat(this.actionItemCls," ").concat(N)},o.a.createElement(p.a,{"data-testid":"doc-reader-more-actions",overlayClassName:A,direction:"circle",iconWidth:20,content:r}))}},{key:"renderNormalAction",value:function(e){return o.a.createElement("div",{className:I,"data-aspm-click":e.asp||null},o.a.createElement("div",{className:R},e.icon&&o.a.createElement(d.b,{name:e.icon,width:16})),e.tip_id?o.a.createElement(m.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&o.a.createElement("span",{className:D},"Beta"))}},{key:"renderCustomAction",value:function(e){return e.render()}},{key:"renderDivide",value:function(e){return o.a.createElement(l.a.Divider,{key:e})}}])&&F(t.prototype,n),r&&F(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(E.a),q=n(187),H=n(287),W="index-module_accessScope_rnaq8";function K(e){return o.a.createElement("span",{className:W},o.a.createElement(H.a.AccessScope,{book:e.book,group:e.group,doc:e.doc,placement:"bottom",style:{margin:0}}))}function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}var ne,re,oe,ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(i,e);var t,n,r,a=Z(i);function i(){return Q(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"enable",value:function(e){return!e.note}},{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:h})}},{key:"render",value:function(e){return o.a.createElement(K,{group:e.group,book:e.book,doc:e.doc})}}])&&X(t.prototype,n),r&&X(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);oe="accessScope",(re="pluginName")in(ne=ae)?Object.defineProperty(ne,re,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ne[re]=oe;var ie=n(17),ce=n(629),ue=n(1306);function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(){se=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==le(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function fe(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fe(a,r,o,i,c,"next",e)}function c(e){fe(a,r,o,i,c,"throw",e)}i(void 0)}))}}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var o=ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ve(this,n)}}function ve(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return be(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(a,e);var t,n,r,o=ye(a);function a(){var e;pe(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(be(e=o.call.apply(o,[this].concat(n))),"_onSubmitBlock",function(){var t=de(se().mark((function t(n){var r,o,a;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=be(e),a=o.ctx,null!==(r=a.doc)&&void 0!==r&&r.id){t.next=4;break}return window.location.reload(),t.abrupt("return");case 4:return t.next=6,a.dispatch({type:"doc/update",payload:n});case 6:e.state.blocking=null,e.model.dispose();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),_e(be(e),"_onCancelBlock",(function(){e.model.dispose()})),e}return t=a,(n=[{key:"enable",value:function(e){return e.me.isAdmin||e.me.isSecurityOperator}},{key:"init",value:function(e){var t=this;e.onPluginEvent("banCancel",(function(){t._onSubmitBlock({read_status:1})})),e.registerCommand(a.pluginName,ie.a.DOC.ban_doc.cmd),e.registerUIHeader(a.pluginName,{sectionType:v,title:ie.a.DOC.ban_doc.title})}},{key:"active",value:function(e){var t=e.doc&&e.doc.id?"Doc":"Note";this.model=Object(ce.b)(ue.a,{punishType:t,punishSelect:["blocked","banned"],doc:e.doc,onSubmit:this._onSubmitBlock,onCancel:this._onCancelBlock})}}])&&me(t.prototype,n),r&&me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);_e(we,"pluginName","ban");var Ee=n(1343);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ke(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ne(e);if(t){var o=Ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(i,e);var t,n,r,a=Se(i);function i(){return xe(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"enable",value:function(e){return!e.getOption("shouldHideLogo")}},{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:h})}},{key:"render",value:function(e){return o.a.createElement(Ee.a,{doc:e.doc,book:e.book,group:e.group,organization:e.organization})}}])&&je(t.prototype,n),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pe,"pluginName","logo");var Te=n(1024),Ae="index-module_collab_enWG6";function Le(e){return o.a.createElement("div",{className:Ae},o.a.createElement(Te.a,{key:"collaborator-doc-".concat(e.doc.id),type:"doc",isEditing:!0}))}function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var o=Ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(i,e);var t,n,r,a=Fe(i);function i(){return Re(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"enable",value:function(e){var t;return!e.isSharePage&&!e.version&&(null===(t=e.doc.abilities)||void 0===t?void 0:t.create_collaborator)}},{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:y,title:__("协作")})}},{key:"render",value:function(e){return o.a.createElement(Le,{doc:e.doc})}}])&&De(t.prototype,n),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ze,"pluginName","collab");var Ge=n(850),Ve=n(549),Ye=n(312),qe=function(){return function(e,t,n){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,n)}("queryCommandValue","wordCount")},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return Array.isArray(e)?e.find((function(e){return e.id===t.id||e.url===t.slug})):null},We=function(e,t){var n=t.group,r=t.doc;if(Ve.a.isMixingType(e)){var o;if(Ye.a.shouldShowToc(e)){var a=t.catalog,i=t.newCatalog,c=t.currentItem;o=Ye.a.getRedirectURL(a,i,{currentItem:c,group:n,book:e})}else{var u=t.docs,l=void 0===u?[]:u,s=l.findIndex((function(e){return e.id===r.id})),f=l[s+1];f&&(o="/".concat(n.login,"/").concat(e.slug,"/").concat(f.slug))}o?t.history?t.history.push(o):window.location.href=o:window.location.href=o||"/".concat(n.login,"/").concat(e.slug)}else window.location.href="/".concat(e.namespace)},Ke=n(116);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Qe(){Qe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==$e(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Xe(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},et(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);if(t){var o=rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}(a,e);var t,n,r,o=tt(a);function a(){return Je(this,a),o.apply(this,arguments)}return t=a,n=[{key:"enable",value:function(e){return e.abilities.destroy}},{key:"init",value:function(e){e.registerUIHeader(a.pluginName,{sectionType:v,title:ie.a.DOC.copy.title}),e.registerCommand(a.pluginName,ie.a.DOC.copy.cmd)}},{key:"active",value:function(e){var t,n,r=e.doc,o=e.book,a=e.group,i=e.dispatch,c=Ge.a.useViewModel({item:He(e.book.toc,e.doc),group:a,book:o,doc:r,catalog:o.toc,onCopy:(t=Qe().mark((function e(t,n,r){var a,c,u;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],c=o.docs,a=c,r.targetBook.id!==o.id){e.next=8;break}return e.next=7,Ke.webProxy.docs.find({book_id:o.id});case 7:a=e.sent;case 8:return e.next=10,i({type:"book/updateDocs",payload:a});case 10:if(n){e.next=15;break}return e.next=13,Ye.a.getCatalogNodes(o.id);case 13:u=e.sent,n=u.toc;case 15:i({type:"book/updateToc",payload:n});case 16:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){Xe(a,r,o,i,c,"next",e)}function c(e){Xe(a,r,o,i,c,"throw",e)}i(void 0)}))},function(e,t,r){return n.apply(this,arguments)})});c.showCopyToModal()}}],n&&Ze(t.prototype,n),r&&Ze(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ot,"pluginName","copy");n(79);var at=n(44),it=n(1294);function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function ut(){ut=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ct(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function lt(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function st(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){lt(a,r,o,i,c,"next",e)}function c(e){lt(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pt(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vt(e);if(t){var o=vt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ht(this,n)}}function ht(e,t){if(t&&("object"===ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yt(e)}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(a,e);var t,n,r,o=mt(a);function a(){var e;ft(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bt(yt(e=o.call.apply(o,[this].concat(n))),"active",function(){var t=st(ut().mark((function t(n){var r,o;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.ctx.doc,o=__("确认删除 {title}？",{title:r.title}),at.a.confirm({title:o,content:__(""),onOk:function(){e._deleteDoc()}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),bt(yt(e),"_deleteDoc",st(ut().mark((function t(){var n,r,o;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.ctx,r=n.doc,o=n.dispatch,t.next=3,o({type:"proxy.web/docs.destroy",payload:{data:{id:r.id}}});case 3:return t.next=5,e._updateToc();case 5:case"end":return t.stop()}}),t)})))),bt(yt(e),"_updateToc",st(ut().mark((function t(){var n,r,o,a,i,c,u,l,s,f;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.ctx,r=n.group,o=n.book,a=n.doc,i=n.dispatch,c=n.history,u=o.docs,l=u.filter((function(e){return e.id!==a.id})),t.next=5,i({type:"book/updateDocs",payload:l});case 5:return t.next=7,Object(it.a)(800);case 7:return t.next=9,Ye.a.getCatalogNodes(o.id);case 9:s=t.sent,f=s.toc,i({type:"book/updateToc",payload:f}),We(o,{group:r,history:c,docs:o.docs,catalog:o.toc,newCatalog:f,currentItem:He(o.toc,a)});case 13:case"end":return t.stop()}}),t)})))),e}return t=a,(n=[{key:"enable",value:function(e){return e.abilities.destroy}},{key:"init",value:function(e){e.registerUIHeader(a.pluginName,{sectionType:v,title:ie.a.DOC.delete.title}),e.registerCommand(a.pluginName,ie.a.DOC.delete.cmd)}}])&&dt(t.prototype,n),r&&dt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);bt(gt,"pluginName","delete");var _t=n(445),wt=n.n(_t),Et="index-module_infoContent_uUhfp";function Ot(e){var t,n,r=e.doc;return o.a.createElement("div",{className:Et},"Doc"===r.type?o.a.createElement("div",null,__("字数统计：{count}",{count:qe()||0})):o.a.createElement("div",null,__("阅读数：{count}",{count:r.hits||0})),o.a.createElement("div",null,__(r.user?"{user} 创建于 {timer}":"创建于 {timer}",{user:null===(t=r.user)||void 0===t?void 0:t.name,timer:wt.a.format(r.created_at,{onlyDate:!0})})),o.a.createElement("div",null,__(r.last_editor?"{user} 更新于 {time}":"更新于 {time}",{user:null===(n=r.last_editor)||void 0===n?void 0:n.name,time:wt.a.format(r.content_updated_at)})),o.a.createElement("div",null,__("编辑者："),r.contributors.map((function(e){return e.name})).join("、")))}function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},St(e,t)}function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pt(e);if(t){var o=Pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(e,t){if(t&&("object"===xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Pt(e){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pt(e)}var Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&St(e,t)}(i,e);var t,n,r,a=Ct(i);function i(){return jt(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:v})}},{key:"render",value:function(e){return o.a.createElement(Ot,{ref:this.ref,doc:e.doc,onClick:function(e){e.stopPropagation()}})}}])&&kt(t.prototype,n),r&&kt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Tt,"pluginName","docInfo");var At=n(1276),Lt=(n(75),n(26)),It="index-module_nameTitle_NTTVX",Rt="index-module_editable_njHi2";function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ft=function(e){var t=Dt(Object(r.useState)(!1),2),n=t[0],a=t[1],i=Dt(Object(r.useState)(e.title||__("无标题")),2),c=i[0],u=i[1];Object(r.useEffect)((function(){e.title!==c&&u(e.title||__("无标题"))}),[e.title]);var l=function(){var t=c||__("无标题");e.saveTitle(t),u(t),a(!1)};return n?o.a.createElement(Lt.a,{className:"lark-editor-header-title-input",autoFocus:!0,type:"text",maxLength:200,value:c,onChange:function(e){u(e.target.value)},onFocus:function(e){n&&e.target.select()},onBlur:l,onPressEnter:l}):o.a.createElement("span",{className:"".concat(It," ").concat(e.editable?Rt:""),title:c,onClick:function(){e.editable&&a(!0)}},c)};Ft.defaultProps={editable:!0},Ft.propTypes={title:i.a.string.isRequired,editable:i.a.bool,saveTitle:i.a.func.isRequired};var Bt=Ft;function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function zt(){zt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Ut(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Gt(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Vt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Gt(a,r,o,i,c,"next",e)}function c(e){Gt(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ht(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qt(e);if(t){var o=Qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Kt(this,n)}}function Kt(e,t){if(t&&("object"===Ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $t(e)}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qt(e)}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}(i,e);var t,n,r,a=Wt(i);function i(){var e;Yt(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xt($t(e=a.call.apply(a,[this].concat(n))),"_saveTitle",function(){var t=Vt(zt().mark((function t(n){var r,o,a,i,c;return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=$t(e),o=r.ctx,a=o.doc,i=o.dispatch,c={id:a.id,title:n},t.next=5,i({type:"proxy.web/docs.updateMeta",payload:{data:c}});case 5:return t.next=7,i({type:"doc/update",payload:c});case 7:c.doc_id=c.id,At.a.emit("rename",c);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return t=i,(n=[{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:h})}},{key:"render",value:function(e){return o.a.createElement(Bt,{group:e.group,book:e.book,doc:e.doc,note:e.note,title:e.doc.title,editable:e.abilities.update,saveTitle:this._saveTitle})}}])&&qt(t.prototype,n),r&&qt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);Xt(Jt,"pluginName","docTitle");var Zt=n(665);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rn(e,t){return rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rn(e,t)}function on(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=un(e);if(t){var o=un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return an(this,n)}}function an(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cn(e)}function cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(e){return un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},un(e)}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rn(e,t)}(a,e);var t,n,r,o=on(a);function a(){var e;tn(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ln(cn(e=o.call.apply(o,[this].concat(n))),"_onCancel",(function(){e.modal.dispose()})),e}return t=a,(n=[{key:"enable",value:function(e){return e.editable}},{key:"init",value:function(e){var t=He(e.book.toc,e.doc),n=!!t;this.params=n?{toc_node_uuid:t.uuid,toc_node_url:t.url,toc_node_title:t.title,can_export_multiple:!0}:{},e.registerUIHeader(a.pluginName,{sectionType:v,icon:ie.a.DOC.export_doc.icon,title:ie.a.DOC.export_doc.title}),e.registerCommand(a.pluginName,ie.a.DOC.export_doc.cmd)}},{key:"active",value:function(e){this.modal=Object(ce.b)(Zt.a,{doc:e.doc,bookId:e.book.id,exportParams:this.params,canExportMultiple:this.params.can_export_multiple,onCancel:this._onCancel})}}])&&nn(t.prototype,n),r&&nn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);ln(sn,"pluginName","exportDoc");n(60);var fn=n(24),dn=n(1152),pn=n.n(dn);function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}function hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t){return vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vn(e,t)}function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_n(e);if(t){var o=_n(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gn(this,n)}}function gn(e,t){if(t&&("object"===mn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _n(e){return _n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_n(e)}var wn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vn(e,t)}(a,e);var t,n,r,o=bn(a);function a(){return hn(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){e.registerUIHeader(a.pluginName,{sectionType:v,title:ie.a.DOC.fullscreen.title}),e.registerCommand(a.name,ie.a.DOC.fullscreen.cmd)}},{key:"active",value:function(){pn.a.enabled?pn.a.toggle():fn.a.error(__("你的浏览器不支持全屏功能"))}}])&&yn(t.prototype,n),r&&yn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wn,"pluginName","fullscreen");var En=n(2118),On=n(953),xn="index-module_mark_42pG5";function jn(e){var t,n=e.doc,r=e.version,a={id:n.mark&&n.mark.id,target_id:n&&n.id,target_type:n.mark&&n.mark.target_type,action_tags:n.mark&&n.mark.action_tags};return t=r?o.a.createElement(En.a,{target:r,targetType:"DocVersion",isMiniType:!0}):o.a.createElement(On.a,{target:a,targetType:"Doc",isMiniType:!0}),o.a.createElement("div",{className:xn},t)}function kn(e){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(e)}function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return Nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nn(e,t)}function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=An(e);if(t){var o=An(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tn(this,n)}}function Tn(e,t){if(t&&("object"===kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function An(e){return An=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},An(e)}var Ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nn(e,t)}(i,e);var t,n,r,a=Pn(i);function i(){return Sn(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"enable",value:function(e){var t;return!(null===(t=e.doc)||void 0===t||!t.id)}},{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:y,title:__("收藏")})}},{key:"render",value:function(e){return o.a.createElement(jn,{doc:e.doc,version:e.version})}}])&&Cn(t.prototype,n),r&&Cn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ln,"pluginName","mark");n(50);var In=n(19),Rn=(n(209),n(61)),Dn=n(100),Mn=n.n(Dn),Fn=n(1915),Bn=n(1912),Un=n(348),zn=n(613),Gn=n(724),Vn=n(109),Yn=n(167),qn=n(124),Hn=n(89),Wn=n(34),Kn=(n(166),n(65)),$n=(n(178),n(45)),Qn=(n(130),n(35));function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nr=function(e){var t=e.value,n=e.contributors,a=e.onChange,i=er(Object(r.useState)(t.showAuthorOption),2),c=i[0],u=i[1],l=er(Object(r.useState)(t.showAuthorId),2),s=l[0],f=l[1],d=er(Object(r.useState)(t.showAuthorCustomText),2),p=d[0],m=d[1],h=function(t){a&&"function"==typeof a&&a(Jn(Jn({},e.value),t))};return o.a.createElement(Kn.a,{gutter:16},o.a.createElement($n.a,{span:10},o.a.createElement(Qn.a,{"data-testid":"show-author-option-selector",value:c,onChange:function(e){u(Number(e));var t=Number(e);h({showAuthorOption:e,showAuthorId:t!==Mn.a.SHOW_AUTHOR_OPTION.specific_user?0:s,showAuthorCustomText:t!==Mn.a.SHOW_AUTHOR_OPTION.custom_text?"":p})}},o.a.createElement(Qn.a.Option,{value:Mn.a.SHOW_AUTHOR_OPTION.all},__("显示所有编辑者")),o.a.createElement(Qn.a.Option,{"data-testid":"show-author-option-selector-user",value:Mn.a.SHOW_AUTHOR_OPTION.specific_user,disabled:n.length<=1},__("显示指定编辑者")),o.a.createElement(Qn.a.Option,{"data-testid":"show-author-option-selector-hide",value:Mn.a.SHOW_AUTHOR_OPTION.hide},__("不显示编辑者")),o.a.createElement(Qn.a.Option,{"data-testid":"show-author-option-selector-text",value:Mn.a.SHOW_AUTHOR_OPTION.custom_text},__("自定义")))),c===Mn.a.SHOW_AUTHOR_OPTION.specific_user&&o.a.createElement($n.a,{span:14},o.a.createElement(Qn.a,{"data-testid":"show-author-option-user-selector",value:s,onChange:function(e){f(Number(e)),h({showAuthorId:e})},placeholder:__("选择编辑者")},n.map((function(e){return o.a.createElement(Qn.a.Option,{value:e.id,key:String(e.id)},e.name)})))),c===Mn.a.SHOW_AUTHOR_OPTION.custom_text&&o.a.createElement($n.a,{span:14},o.a.createElement(Lt.a,{"data-testid":"show-author-option-custom-input",value:p,type:"text",autoComplete:"off",maxLength:20,placeholder:__("请输入（最多 20 个字符）"),onChange:function(e){var t=e.target.value;m(t),h({showAuthorCustomText:t})}})))};nr.propTypes={value:i.a.shape({showAuthorCustomText:i.a.string,showAuthorId:i.a.number,showAuthorOption:i.a.number}).isRequired,contributors:i.a.array,onChange:i.a.func.isRequired};var rr=nr,or={tagWrapper:"index-module_tagWrapper_oLrde",tagTip:"index-module_tagTip_U6CgK",cover:"index-module_cover_90042",coverPlaceholder:"index-module_coverPlaceholder_25Mk7",coverActions:"index-module_coverActions_ghYGB",btnRemoveCover:"index-module_btnRemoveCover_VCBNl",btnRemoveCoverIcon:"index-module_btnRemoveCoverIcon_XVL1d",moreBtn:"index-module_moreBtn_OLQkd"};function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function ir(){ir=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ar(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function cr(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ur(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){cr(a,r,o,i,c,"next",e)}function c(e){cr(a,r,o,i,c,"throw",e)}i(void 0)}))}}function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e,t){return sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sr(e,t)}function fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mr(e);if(t){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dr(this,n)}}function dr(e,t){if(t&&("object"===ar(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pr(e)}function pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(e){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mr(e)}function hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yr=Rn.a.Item,vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}(i,e);var t,n,r,a=fr(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),hr(pr(t=a.call(this,e)),"onSubmit",(function(e){e.preventDefault(),(0,t.props.form.validateFields)((function(e,n){e||t.handleUploadCover((function(){var e=t.state,r=e.showAuthorOptionData,o=e.description,a=e.cover,i={title:n.title,slug:n.slug,show_author_id:r.showAuthorId,public:t.state.public,custom_description:o,cover:a,custom_cover:a,show_author_option:r.showAuthorOption,show_author_custom_text:r.showAuthorCustomText};t.setState({submitting:!0},ur(ir().mark((function e(){return ir().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.save(i);case 2:t.setState({submitting:!1});case 3:case"end":return e.stop()}}),e)}))))}))}))})),hr(pr(t),"handleUploadCover",(function(e){t.coverUploader.current?t.coverUploader.current.onSubmit().then((function(n){t.setState({cover:n||""},e)})):e()})),hr(pr(t),"onChangePermission",(function(e){t.setState({public:e})})),hr(pr(t),"handleChangeDesc",(function(e){t.setState({description:e.target.value})})),hr(pr(t),"showMore",(function(){var e;t.setState({showMore:!0});var n=t.props,r=n.doc,o=n.group,a=o&&o.abilities&&o.abilities.read_tag,i=null==r||null===(e=r.abilities)||void 0===e?void 0:e.update;(a||i)&&Wn.a.tags.find({docId:r.id}).then((function(e){t.setState({tags:e})}))})),hr(pr(t),"onAuthorShowOptionChange",(function(e){t.setState({showAuthorOptionData:e})}));var n=e.doc,r=qn.a.getDocShowAuthorId(n),c=qn.a.getDocShowAuthorOption(n),u=qn.a.getDocShowAuthorCustomText(n);return t.state={public:n.public,cover:n.cover||"",description:null!=n.custom_description?n.custom_description:n.description||"",submitting:!1,showAuthorOptionData:{showAuthorId:r||void 0,showAuthorOption:c,showAuthorCustomText:u},showMore:!1,tags:[]},t.coverUploader=o.a.createRef(),t.tagBiz=new Bn.a({tagProxy:Wn.a.tags}),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;"function"==typeof this.props.getSummary&&this.props.getSummary((function(t){var n=t.summary,r=t.cover;e.props.doc.custom_description||e.setState({description:n}),e.props.doc.cover||""===e.props.doc.cover||e.setState({cover:r})})),this.props.hideMoreInfo||this.showMore()}},{key:"componentWillUnmount",value:function(){this.coverUploader=null}},{key:"shouldSubmitDisabled",value:function(){var e=this.state,t=e.showAuthorOptionData,n=t.showAuthorId,r=t.showAuthorOption,o=t.showAuthorCustomText,a=e.submitting,i=r===Mn.a.SHOW_AUTHOR_OPTION.specific_user&&!n||r===Mn.a.SHOW_AUTHOR_OPTION.custom_text&&!o;return a||i}},{key:"renderPermission",value:function(){var e=this.props,t=e.group,n=e.book,r=e.doc,a=Object(Yn.b)({type:"book",target:n,group:t}).getPrivacyValue();if("User"===t.type&&0===a)return o.a.createElement("span",{className:"access-scope-tip"},__("私密知识库的文档不允许设置为公开，如有需要给其它用户阅读或编辑请使用 {help}",{help:o.a.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/bosazp",target:"_blank"},__("分享功能"))}));if(4===a)return o.a.createElement("span",{className:"access-scope-tip"},__("仅知识库成员可见知识库的文档不允许设置为公开，如有需要给其它用户阅读或编辑请添加为知识库成员或者使用 {help}",{help:o.a.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/bosazp",target:"_blank"},__("分享功能"))}));var i=Object(Yn.b)({type:"doc",target:r,group:t,book:n});return o.a.createElement(zn.a,{type:"doc",isUser:"User"===t.type,isPublication:Hn.a.isPublication(t),defaultValue:i.getPrivacyValue(),items:Object(Yn.c)(i.getAllPrivacies()),permissions:Object(Yn.c)(i.getEnablePrivacies()),onChangePermission:this.onChangePermission})}},{key:"canEditDoc",value:function(){if(window.appData.sharePage)return!1;var e=this.props.doc;return"Thread"!==e.type&&e.abilities&&e.abilities.update}},{key:"renderTags",value:function(){var e=this.props,t=e.doc,n=e.group,r=this.state.tags,a=this.canEditDoc()&&t&&t.abilities&&t.abilities.destroy,i=a||r&&r.length,c=n&&"User"===n.type,u=__("标签用于管理，仅{desc}可见",{desc:c?__("自己"):Hn.a.memberTitle(n)});if(i)return o.a.createElement(yr,null,o.a.createElement("div",{className:or.tagWrapper},o.a.createElement("p",{className:or.title},__("标签"),o.a.createElement("span",{className:or.tagTip},u)),o.a.createElement(Fn.a,{tags:r||[],editable:a,group:n,docId:t.id,tagBiz:this.tagBiz})))}},{key:"render",value:function(){var e=this.props,t=e.doc,n=e.book,r=e.hideMoreInfo,a=e.hideTitle,i=this.props.form.getFieldDecorator,c="/".concat(n.namespace,"/"),u={xs:{span:24},sm:{span:14}},l=t.contributors||[],s=this.state.showMore,f=!r||s;return o.a.createElement("div",{className:"doc-meta-edit"},o.a.createElement(Rn.a,{layout:"vertical"},!a&&o.a.createElement(yr,{label:__("标题"),colon:!1,wrapperCol:u},i("title",{initialValue:t.title,rules:[{type:"string",required:!0,message:__("请输入标题")}]})(o.a.createElement(Lt.a,{type:"text",autoComplete:"off"}))),o.a.createElement(yr,{label:__("摘要"),colon:!1},o.a.createElement(Lt.a.TextArea,{value:this.state.description,onChange:this.handleChangeDesc,autoSize:{minRows:3,maxRows:6},maxLength:150})),o.a.createElement(yr,{label:__("封面"),colon:!1},o.a.createElement("div",{className:or.cover},o.a.createElement(Gn.a,{attachable_type:"Doc",attachable_id:t.id,cover:this.state.cover,ref:this.coverUploader}))),f?o.a.createElement(o.a.Fragment,null,o.a.createElement(yr,{label:__("作者"),colon:!1},o.a.createElement(rr,{value:this.state.showAuthorOptionData,onChange:this.onAuthorShowOptionChange,contributors:l})),o.a.createElement(yr,{label:__("路径"),colon:!1,wrapperCol:u},i("slug",{initialValue:t.slug,rules:[{type:"string",required:!0,pattern:/^[a-z0-9\-_\.]{2,190}$/,message:__("访问路径为 2～190 个字符，只能输入小写字母、数字、横线、下划线和点")}]})(o.a.createElement(Lt.a,{type:"text",addonBefore:c,autoComplete:"off"}))),this.renderTags(),o.a.createElement(yr,{colon:!1,label:__("权限")},this.renderPermission())):o.a.createElement("div",{className:or.moreBtn,onClick:this.showMore},"高级选项 ",o.a.createElement(Un.a,null)),o.a.createElement(In.a,{className:"doc-meta-edit-submit",type:"primary",onClick:this.onSubmit,disabled:this.shouldSubmitDisabled()},__("确定"))))}}])&&lr(t.prototype,n),r&&lr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);vr.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object,save:i.a.func,getSummary:i.a.func,hideMoreInfo:i.a.bool,hideTitle:i.a.bool};var br=Object(Vn.b)(Rn.a.create()(vr),!0);function gr(e){var t=e.doc,n=e.group,r=e.book,a=e.hideMoreInfo;return o.a.createElement(at.a,{width:514,visible:!0,centered:!0,title:__("文档设置"),footer:null,bodyStyle:{maxHeight:"90vh",overflow:"auto",paddingTop:16},destroyOnClose:!0,onCancel:e.onCancel},o.a.createElement(br,{doc:t,group:n,book:r,save:e.saveMeta,getSummary:e.getSummary,hideMoreInfo:a,key:"doc-meta-edit-from-title"}))}function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function wr(){wr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==_r(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Er(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Or(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Er(a,r,o,i,c,"next",e)}function c(e){Er(a,r,o,i,c,"throw",e)}i(void 0)}))}}function xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kr(e,t){return kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kr(e,t)}function Sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pr(e);if(t){var o=Pr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cr(this,n)}}function Cr(e,t){if(t&&("object"===_r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nr(e)}function Nr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pr(e){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pr(e)}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kr(e,t)}(a,e);var t,n,r,o=Sr(a);function a(){var e;xr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tr(Nr(e=o.call.apply(o,[this].concat(n))),"_onSave",function(){var t=Or(wr().mark((function t(n){var r,o,a,i,c,u,l,s;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Nr(e),o=r.ctx,a=o.doc,i=o.book,c=o.dispatch,u={id:a.id},l=!1,Object.keys(n).forEach((function(e){("custom_cover"===e&&n.custom_cover!==a.cover||void 0!==n[e]&&n[e]!==a[e])&&(l=!0,u[e]=n[e])})),l){t.next=8;break}return e.modal.dispose(),t.abrupt("return");case 8:return o.debug("save meta:",u),t.next=11,c({type:"proxy.web/docs.updateMeta",payload:{data:u}});case 11:c({type:"doc/update",payload:u}),u.slug&&(s="/".concat(i.namespace,"/").concat(u.slug),o.isRunAtRaw?window.location.href=s:window.location.href="".concat(s,"/edit")),e.modal.dispose();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Tr(Nr(e),"_onCancel",(function(){e.modal.dispose()})),e}return t=a,(n=[{key:"enable",value:function(e){return e.abilities.destroy}},{key:"init",value:function(e){e.registerUIHeader(a.pluginName,{sectionType:y,title:ie.a.DOC.edit_meta.title}),e.registerCommand(a.pluginName,ie.a.DOC.edit_meta.cmd)}},{key:"active",value:function(e){this.modal=Object(ce.b)(gr,{doc:e.doc,book:e.book,group:e.group,saveMeta:this._onSave,getSummary:this.getSummary,hideMoreInfo:!e.editable,onCancel:this._onCancel})}}])&&jr(t.prototype,n),r&&jr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function Ir(){Ir=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Lr(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Rr(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fr(e,t){return Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fr(e,t)}function Br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zr(e);if(t){var o=zr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ur(this,n)}}function Ur(e,t){if(t&&("object"===Lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zr(e){return zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zr(e)}Tr(Ar,"pluginName","meta");var Gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fr(e,t)}(a,e);var t,n,r,o=Br(a);function a(){return Dr(this,a),o.apply(this,arguments)}return t=a,n=[{key:"enable",value:function(e){return e.abilities.destroy}},{key:"init",value:function(e){e.registerUIHeader(a.pluginName,{sectionType:y,title:ie.a.DOC.move.title}),e.registerCommand(a.pluginName,ie.a.DOC.move.cmd)}},{key:"active",value:function(e){var t,n,r=e.doc,o=e.book,a=e.group,i=e.dispatch,c=Ge.a.useViewModel({item:He(e.book.toc,e.doc),group:a,book:o,doc:r,catalog:o.toc,onMove:(t=Ir().mark((function e(t,n,r){var c,u,l;return Ir().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],u=o.docs,c=u,r.targetBook.id===o.id){e.next=8;break}return e.next=7,Ke.webProxy.docs.find({book_id:o.id});case 7:c=e.sent;case 8:return e.next=10,i({type:"book/updateDocs",payload:c});case 10:if(n){e.next=15;break}return e.next=13,Ye.a.getCatalogNodes(o.id);case 13:l=e.sent,n=l.toc;case 15:i({type:"book/updateToc",payload:n}),r.targetBook.id!==o.id&&We(o,{group:a,docs:o.docs,catalog:t,newCatalog:n,currentItem:r.currentItem});case 17:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){Rr(a,r,o,i,c,"next",e)}function c(e){Rr(a,r,o,i,c,"throw",e)}i(void 0)}))},function(e,t,r){return n.apply(this,arguments)})});c.showMoveToModal()}}],n&&Mr(t.prototype,n),r&&Mr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Gr,"pluginName","move");var Vr=n(154),Yr="index-module_netStatus_f+QVJ";function qr(e){var t;return"offline"===e.netStatus&&(t=o.a.createElement(o.a.Fragment,null,o.a.createElement(Vr.a,null),o.a.createElement("span",{className:""},__("断网状态下不支持编辑")))),o.a.createElement("div",{className:Yr},t)}function Hr(e){return Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hr(e)}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $r(e,t){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$r(e,t)}function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zr(e);if(t){var o=Zr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xr(this,n)}}function Xr(e,t){if(t&&("object"===Hr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jr(e)}function Jr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zr(e){return Zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zr(e)}function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var to=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$r(e,t)}(a,e);var t,n,r,o=Qr(a);function a(){var e;Wr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return eo(Jr(e=o.call.apply(o,[this].concat(n))),"state",{netStatus:""}),e}return t=a,(n=[{key:"init",value:function(e){var t=this;e.registerUIHeader(a.pluginName,{sectionType:h}),e.onOptionEvent("netStatusChanged",(function(e){t.setState({netStatus:e})}))}},{key:"render",value:function(e){return e.render(qr,{netStatus:this.state.netStatus})}}])&&Kr(t.prototype,n),r&&Kr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);function no(e){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},no(e)}function ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e,t){return ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ao(e,t)}function io(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uo(e);if(t){var o=uo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return co(this,n)}}function co(e,t){if(t&&("object"===no(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uo(e){return uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uo(e)}eo(to,"pluginName","netStatus");var lo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ao(e,t)}(a,e);var t,n,r,o=io(a);function a(){return ro(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){e.registerUIHeader(a.pluginName,{sectionType:v,icon:ie.a.DOC.print.icon,title:ie.a.DOC.print.title}),e.registerCommand(a.pluginName,ie.a.DOC.print.cmd)}},{key:"active",value:function(){window.print()}}])&&oo(t.prototype,n),r&&oo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(lo,"pluginName","print");var so=n(1154);function fo(e){return fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fo(e)}function po(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ho(e,t){return ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ho(e,t)}function yo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=go(e);if(t){var o=go(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vo(this,n)}}function vo(e,t){if(t&&("object"===fo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bo(e)}function bo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function go(e){return go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},go(e)}function _o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ho(e,t)}(a,e);var t,n,r,o=yo(a);function a(){var e;po(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _o(bo(e=o.call.apply(o,[this].concat(n))),"_onCancel",(function(){e.modal.dispose()})),e}return t=a,(n=[{key:"enable",value:function(e){return e.editable}},{key:"init",value:function(e){e.registerUIHeader(a.pluginName,{sectionType:y,icon:ie.a.DOC.save_as_template.icon,title:ie.a.DOC.save_as_template.title}),e.registerCommand(a.pluginName,ie.a.DOC.save_as_template.cmd)}},{key:"active",value:function(e){this.modal=Object(ce.b)(so.a,{modalTitle:__("另存为模板"),book:e.book,doc:e.doc,group:e.group,organization:e.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){e.execCommand(ie.a.DOC.create_from_template.cmd)},templateProxy:Wn.a.templates,docProxy:Wn.a.docs,inEdit:e.editing,visible:!0,onCancel:this._onCancel})}}])&&mo(t.prototype,n),r&&mo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);_o(wo,"pluginName","saveAsTemplate");var Eo=n(285),Oo=n(651);function xo(e){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xo(e)}function jo(){jo=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==xo(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function ko(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function So(e,t){var n=e.book,a=e.commandParams,i=Object(Oo.a)(),c=i.loadTemplateSelector,u=i.showTemplateSelector,l=i.contextHolder;return Object(r.useImperativeHandle)(t,(function(){return{createDocFromTemplate:(e=jo().mark((function e(){var t;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({book:n});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",Object(Eo.e)(n,t,a));case 6:case"end":return e.stop()}}),e)})),t=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ko(a,r,o,i,c,"next",e)}function c(e){ko(a,r,o,i,c,"throw",e)}i(void 0)}))},function(){return t.apply(this,arguments)})};var e,t})),Object(r.useEffect)((function(){c()}),[]),o.a.createElement(o.a.Fragment,null,l)}var Co=Object(r.forwardRef)(So);function No(e){return No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},No(e)}function Po(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function To(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ao(e,t){return Ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ao(e,t)}function Lo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ro(e);if(t){var o=Ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Io(this,n)}}function Io(e,t){if(t&&("object"===No(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ro(e){return Ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ro(e)}var Do=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ao(e,t)}(i,e);var t,n,r,a=Lo(i);function i(){return Po(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"enable",value:function(e){return e.editable}},{key:"init",value:function(e){e.registerCommand(i.pluginName,ie.a.DOC.create_from_template.cmd)}},{key:"active",value:function(){this.ref.current&&this.ref.current.createDocFromTemplate()}},{key:"render",value:function(e){return o.a.createElement(Co,{book:e.book,ref:this.ref})}}])&&To(t.prototype,n),r&&To(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Do,"pluginName","createFromTemplate");n(96);var Mo=n(23),Fo=n(186),Bo=n(32),Uo=n.n(Bo),zo="index-module_saveTip_xnDOu";function Go(e){var t=e.doc,n=e.saving,r=e.mode,a=e.autoPublish,i=e.showHistory,c=e.savedAt,u=function(){if(!0===n)return e.showTime?o.a.createElement("span",null,a?__("正在保存并发布..."):__("正在保存...")):o.a.createElement("span",null,__("保存中..."));if(c){if(!e.showTime)return o.a.createElement("span",null,__("已保存"));var i=Uo()(c).format("H:mm:ss");return a?o.a.createElement("span",null,__("保存并发布于 {time}",{time:i})):o.a.createElement("span",null,__("保存于 {time}",{time:i}))}return e.showTime?t.last_editor&&0===t.status?"embed"===r?o.a.createElement("span",null,__("最后更改于 {time}",{time:o.a.createElement(Fo.a,{time:t.content_updated_at})})):o.a.createElement("span",null,__("{name} 最后更改于 {time}",{name:o.a.createElement("a",{href:"/".concat(t.last_editor.login),target:"_blank"},t.last_editor.name),time:o.a.createElement(Fo.a,{time:t.content_updated_at})})):t.content_updated_at?o.a.createElement("span",null,__("最后更改于{time}",{time:o.a.createElement(Fo.a,{time:t.content_updated_at})})):null:null}(),l=o.a.createElement("span",{className:zo,onClick:function(e){return function(e){var t;"a"!==(null===(t=e.target)||void 0===t?void 0:t.tagName.toLowerCase())&&i&&i()}(e)}},u,o.a.createElement(d.b,{name:"cloud",width:16}));return u&&i?o.a.createElement(Mo.a,{title:__("查看历史版本"),trigger:["hover","click"],placement:"bottom"},l):l}Go.defaultProps={showTime:!0},Go.propTypes={saving:i.a.bool,savedAt:i.a.instanceOf(Date),autoPublish:i.a.bool,doc:i.a.object,mode:i.a.string,book:i.a.object,showTime:i.a.bool,showHistory:i.a.func};var Vo=Go,Yo="index-module_text_BNCYP";function qo(e){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(e)}function Ho(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ko(e,t){return Ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ko(e,t)}function $o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jo(e);if(t){var o=Jo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qo(this,n)}}function Qo(e,t){if(t&&("object"===qo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xo(e)}function Xo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jo(e){return Jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jo(e)}function Zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ko(e,t)}(i,e);var t,n,r,a=$o(i);function i(){var e;Ho(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zo(Xo(e=a.call.apply(a,[this].concat(n))),"state",{saving:!1,savedAt:null,netStatus:""}),e}return t=i,(n=[{key:"enable",value:function(e){return e.editable}},{key:"init",value:function(e){var t=this;e.registerUIHeader(i.pluginName,{sectionType:h}),e.onOptionEvent("savingChanged",(function(e){t.setState({saving:e})})),e.onOptionEvent("savedAtChanged",(function(e){t.setState({saving:!1,savedAt:e})})),e.onOptionEvent("netStatusChanged",(function(e){t.setState({netStatus:e})}))}},{key:"render",value:function(e){return"offline"===this.state.netStatus?null:this.state.saving||this.state.savedAt?o.a.createElement(Vo,{doc:e.doc,saving:this.state.saving,savedAt:this.state.savedAt,showHistory:!1,showTime:!e.isRunAtRaw,autoPublish:!0}):o.a.createElement("span",{className:Yo},__("数据表当前页可直接编辑"))}}])&&Wo(t.prototype,n),r&&Wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);Zo(ea,"pluginName","saveStatus");var ta=n(561);function na(e){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(e)}function ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aa(e,t){return aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},aa(e,t)}function ia(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ua(e);if(t){var o=ua(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ca(this,n)}}function ca(e,t){if(t&&("object"===na(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ua(e){return ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ua(e)}var la=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aa(e,t)}(i,e);var t,n,r,a=ia(i);function i(){return ra(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:y})}},{key:"render",value:function(e){return o.a.createElement(ta.a,{placement:"bottomLeft",isMiniType:!0})}}])&&oa(t.prototype,n),r&&oa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(la,"pluginName","search");var sa=n(999);function fa(e){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fa(e)}function da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ma(e,t){return ma=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ma(e,t)}function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=va(e);if(t){var o=va(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ya(this,n)}}function ya(e,t){if(t&&("object"===fa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function va(e){return va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},va(e)}var ba=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ma(e,t)}(i,e);var t,n,r,a=ha(i);function i(){return da(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"enable",value:function(e){var t;return!e.isSharePage&&!e.version&&(null===(t=e.doc.abilities)||void 0===t?void 0:t.share)}},{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:y,actionType:g})}},{key:"render",value:function(e){return o.a.createElement(sa.a,{key:"share-doc-".concat(e.doc.id),type:"doc"})}}])&&pa(t.prototype,n),r&&pa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ba,"pluginName","share");var ga=n(54);function _a(e){return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_a(e)}function wa(){wa=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==_a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Ea(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ja(e,t){return ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ja(e,t)}function ka(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ca(e);if(t){var o=Ca(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sa(this,n)}}function Sa(e,t){if(t&&("object"===_a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ca(e){return Ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ca(e)}var Na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ja(e,t)}(a,e);var t,n,r,o=ka(a);function a(){return Oa(this,a),o.apply(this,arguments)}return t=a,n=[{key:"enable",value:function(e){var t,n,r;return!(!e.me.isAdmin&&!e.me.isSecurityOperator)&&((null===(t=e.doc)||void 0===t?void 0:t.read_status)>=99||(null===(n=e.note)||void 0===n||null===(r=n.doclet)||void 0===r?void 0:r.status)>=99)}},{key:"init",value:function(e){e.registerUIHeader(a.pluginName,{sectionType:v,title:ie.a.DOC.unban_doc.title}),e.registerCommand(a.pluginName,ie.a.DOC.unban_doc.cmd)}},{key:"active",value:function(e){var t,n,r=e.me.isSecurityOperator?"unblockForSecurityOps":"unblock";at.a.confirm({content:__("确认取消屏蔽文档？"),okText:__("确认"),cancelText:__("关闭"),onOk:(t=wa().mark((function t(){var n,o,a;return wa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=e.doc)||void 0===n||!n.id){t.next=6;break}return t.next=3,ga.a.docs[r]({id:null===(o=e.doc)||void 0===o?void 0:o.id});case 3:e.emitPluginEvent("banCancel"),t.next=9;break;case 6:return t.next=8,ga.a.notes[r]({id:null===(a=e.note)||void 0===a?void 0:a.id});case 8:window.location.reload();case 9:case"end":return t.stop()}}),t)})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){Ea(a,r,o,i,c,"next",e)}function c(e){Ea(a,r,o,i,c,"throw",e)}i(void 0)}))},function(){return n.apply(this,arguments)})})}}],n&&xa(t.prototype,n),r&&xa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Na,"pluginName","unban");var Pa=n(150),Ta=n.n(Pa),Aa=(n(175),n(84)),La=n(127),Ia="index-module_avatar_PVV8q",Ra="index-module_name_t3I-j",Da="index-module_sign_P0wgu",Ma="index-module_signInner_8-5ab",Fa="index-module_more_swKyH",Ba="index-module_moreUsers_MYb1k";function Ua(e){var t=e.user;return o.a.createElement("span",{className:Ia},o.a.createElement(La.a,{src:t.avatar_url,name:t.name,size:24}),t.color&&o.a.createElement("span",{className:Da},o.a.createElement("div",{className:Ma,style:{background:t.color}})))}function za(e){var t=e.users,n=e.me,r=e.maxUsersToShow,a=void 0===r?9:r,i=[],c=[];return t.length<=a?i=t.slice(0,t.length):(i=t.slice(0,a),c=t.slice(a)),o.a.createElement(o.a.Fragment,null,i.map((function(e){return o.a.createElement(Mo.a,{title:e.name,key:e.id},o.a.createElement("span",null,o.a.createElement(Ua,{user:e})))})),c.length>0&&o.a.createElement(Aa.a,{placement:"bottom",content:o.a.createElement("ul",{className:Ba},c.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(Ua,{user:e}),o.a.createElement("a",{href:"/".concat(e.login),className:Ra,target:"_blank"},e.name))})))},o.a.createElement("a",{className:"".concat(Ia," ").concat(Fa)},"+",c.length)),o.a.createElement(Mo.a,{title:e.onlyMeTip||(0===t.length?__("语雀已支持多人同时编辑文档，当前编辑者的头像将显示在此"):__("我")),overlayStyle:{minWidth:"24px",width:e.onlyMeTip||0!==t.length?"unset":"192px"}},o.a.createElement("span",null,o.a.createElement(Ua,{user:n}))))}za.propTypes={users:i.a.array.isRequired,me:i.a.object.isRequired,onlyMeTip:i.a.string};var Ga=za;function Va(e){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(e)}function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ha(e,t){return Ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ha(e,t)}function Wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qa(e);if(t){var o=Qa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ka(this,n)}}function Ka(e,t){if(t&&("object"===Va(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $a(e)}function $a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qa(e){return Qa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qa(e)}function Xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ja=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ha(e,t)}(i,e);var t,n,r,a=Wa(i);function i(){var e;Ya(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xa($a(e=a.call.apply(a,[this].concat(n))),"state",{users:[]}),e}return t=i,(n=[{key:"init",value:function(e){var t=this;e.registerUIHeader(i.pluginName,{sectionType:y}),e.onOptionEvent("collabUsersChanged",(function(e){t.setState({users:e})})),this.state.users=e.getOption("collabUsers")||[]}},{key:"render",value:function(e){var t=Ta()(this.state.users.filter((function(t){return t.id!==e.me.id})),"login");return o.a.createElement(Ga,{users:t,me:e.me,maxUsersToShow:5,onlyMeTip:__("我")})}}])&&qa(t.prototype,n),r&&qa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);Xa(Ja,"pluginName","collabUsers");var Za=n(1359),ei=n(2230);function ti(e){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ti(e)}function ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(e,t){return oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oi(e,t)}function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ci(e);if(t){var o=ci(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ii(this,n)}}function ii(e,t){if(t&&("object"===ti(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ci(e){return ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ci(e)}var ui=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oi(e,t)}(i,e);var t,n,r,a=ai(i);function i(){return ni(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"enable",value:function(e){return e.editable}},{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:y,actionType:g})}},{key:"render",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Za.a,{key:"skylink-doc-".concat(e.doc.id)}),o.a.createElement(ei.a,null))}}])&&ri(t.prototype,n),r&&ri(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ui,"pluginName","skylink");var li=n(1922);function si(e){return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},si(e)}function fi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pi(e,t){return pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pi(e,t)}function mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yi(e);if(t){var o=yi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hi(this,n)}}function hi(e,t){if(t&&("object"===si(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function yi(e){return yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yi(e)}var vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pi(e,t)}(i,e);var t,n,r,a=mi(i);function i(){return fi(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"enable",value:function(e){var t=window.appData,n=t.sharePage,r=t.me,o=t.enableUserFeed;if(n)return!1;var a=e.doc,i=e.book,c=e.group;if(e.version)return!1;if(!a||!i||!c)return!1;var u=Object(Yn.b)({type:"doc",target:a,group:c,book:i}).getPrivacyValue();return[Dn.PUBLIC.public,Dn.PUBLIC.intranet_all,Dn.PUBLIC.intranet].includes(u)&&i.user_id===r.id&&o}},{key:"init",value:function(e){e.registerUIHeader(i.pluginName,{sectionType:y,actionType:g})}},{key:"render",value:function(e){return o.a.createElement(li.a,{docId:e.doc.id,currentUser:e.me})}}])&&di(t.prototype,n),r&&di(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q.a);function bi(e){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(e)}function gi(){return gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gi.apply(this,arguments)}function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){Ei(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xi(e,t){return xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xi(e,t)}function ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ci(e);if(t){var o=Ci(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ki(this,n)}}function ki(e,t){if(t&&("object"===bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Si(e)}function Si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ci(e){return Ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ci(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vi,"pluginName","digitalGarden");var Ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xi(e,t)}(a,e);var t,n,r,o=ji(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=wi(wi({entry:Si(t=o.call(this))},e),{},{plugins:[Pe,Jt,ae,ea,to,la,Ln,ze,ba,Gr,ot,wo,Do,Ar,wn,sn,lo,gt,we,Na,Tt,Ja,ui,vi],headers:["logo","docTitle","accessScope","saveStatus","netStatus"],actions:["search","mark","collab","skylink","digitalGarden","collabUsers","share"],actionMore:[["move","copy","saveAsTemplate"],["meta","fullscreen"],["exportDoc","print","delete"],["ban","unban","special","unspecial"],["docInfo"]]});return t.headerCore=new Y(n),t}return t=a,(n=[{key:"render",value:function(){return this.headerCore.render()}}])&&Oi(t.prototype,n),r&&Oi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.Component);Ni.propTypes={plugins:i.a.array,className:i.a.string,organization:i.a.string,me:i.a.object,group:i.a.object,book:i.a.object,doc:i.a.object,note:i.a.object,version:i.a.object,history:i.a.object,search:i.a.object,collabUsers:i.a.object,showHistory:i.a.func,showVersion:i.a.func,dispatch:i.a.func.isRequired,style:i.a.object,shouldHideLogo:i.a.bool,shouldShowSeparator:i.a.bool};var Pi=Object(c.d)((function(e){return{organization:e.organization,me:e.me,group:e.group,book:e.book,doc:e.doc,review:e.review}}))(Object(u.withRouter)(Ni));t.a=o.a.forwardRef((function(e,t){return o.a.createElement(Pi,gi({wrappedComponentRef:t},e))}))},,,,,function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(1892),u=(n(79),n(44)),l=(n(175),n(84)),s=(n(96),n(23)),f=(n(173),n(94)),d=n(10),p=n.n(d),m=n(998),h=n(90),y=n.n(h),v=n(38),b=n(2100),g=n(1358),_=n(1203),w="EditorBase-module_init_Z9vBN",E="EditorBase-module_editor_4EJsT",O="EditorBase-module_expand_Ydzqb",x="EditorBase-module_fullScreenEditor_xsrDv",j="EditorBase-module_fullEditor_tOi9j",k="EditorBase-module_collapse_d36OS",S="EditorBase-module_collapseIcon_hHdRG",C="EditorBase-module_wordCount_S9NgP",N="EditorBase-module_wordCountInFull_FVvkS",P="EditorBase-module_h5_kNEqK",T="EditorBase-module_shortcutWrap_CQ0NV",A="EditorBase-module_shortcut_DcIu4",L="EditorBase-module_shortcutIcon_Gboe3",I="EditorBase-module_shortcutTip_j7+IB",R="EditorBase-module_shortcutKey_miP8x",D="EditorBase-module_shortcutText_ahxWf",M="EditorBase-module_hotKey_8nXiW";function F(e){var t=[{text:"",children:_.a.filter((function(t){return e.hotKeys.includes(t.name)}))}];return o.a.createElement(g.a,{className:M,showHelpLink:!0,config:t})}var B=n(270),U=n.n(B);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V={Command:U.a.mac?"Command":"Ctrl",Option:U.a.mac?"Option":"Alt"};function Y(e){var t=z(Object(r.useState)(null),2),n=t[0],a=t[1],i=_.a.filter((function(t){return e.hotKeys.includes(t.name)}));return Object(r.useEffect)((function(){var e=Math.floor(Math.random()*i.length);a(i[e])}),[]),n?o.a.createElement("div",{className:I},n.keys.map((function(e,t){return"+"===e?o.a.createElement("span",{className:R,key:t},"+"):o.a.createElement("span",{className:R,key:t},V[e]||e)})),o.a.createElement("span",{className:D},n.text)):null}var q=n(114),H=n.n(q),W=n(140),K=n.n(W),$=n(198),Q=n.n($),X=n(42),J=n.n(X),Z=n(34),ee=n(212),te=n(1266),ne=n(1060);function re(e){return[y.a.FORMAT.MARKDOWN,y.a.FORMAT.ASL].includes(e)}function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(){ue=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==oe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function le(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){le(a,r,o,i,c,"next",e)}function c(e){le(a,r,o,i,c,"throw",e)}i(void 0)}))}}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pe=H()("editor:mini");function me(e){var t=e.editor,n=t.getProps(),o=e.enableWordCount,a=e.isInIframe,i=e.onExpandChange,c=fe(Object(r.useState)(re(n.format)),2),u=c[0],l=c[1],s=fe(Object(r.useState)(n.defaultValue),2),f=s[0],d=s[1],p=fe(Object(r.useState)(n.format),2),m=p[0],h=p[1],v=fe(Object(r.useState)(!1),2),b=v[0],g=v[1],w=fe(Object(r.useState)(!1),2),E=w[0],O=w[1],x=fe(Object(r.useState)(o&&K.a.wordCount(f)),2),j=x[0],k=x[1],S=fe(Object(r.useState)(null),2),C=S[0],N=S[1],P=fe(Object(r.useState)(null),2),T=P[0],A=P[1],L=fe(Object(r.useState)(!1),2),I=L[0],R=L[1],D=Object(r.useRef)(E),M=Object(r.useRef)(C),F=Object(r.useRef)(T),B=Object(r.useRef)(f);Object(r.useEffect)((function(){if(re(n.format)){if(pe("convert: ".concat(n.format," -> lake")),!n.defaultValue)return l(!1),d(""),void h(y.a.FORMAT.LAKE);Z.a.docs.convertContent({from:n.format,to:y.a.FORMAT.LAKE,content:n.defaultValue}).then((function(e){pe("convert done:",e),l(!1),d(e.content),h(y.a.FORMAT.LAKE)})).catch((function(e){pe("convert fail:",e.message),l(!1),g(!0)}))}}),[n.format]),Object(r.useEffect)((function(){D.current=E,M.current=C,F.current=T,B.current=f}),[E,C,T,f]);var U=Object(r.useMemo)((function(){var e=40*n.toolbar[0].length;return n.toolbar[0].includes("heading")&&(e+="en-us"===window.appData.locale?30:18),{left:e}}),[n.toolbar]),z=Object(r.useMemo)((function(){return new ne.a}),[]),G=function(){var e=se(ue().mark((function e(t){return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.event.trigger("save:before"),e.next=3,t.asyncEvent.emitAsync("save:before");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){if(!M.current.isFocus()&&!e)return!1;G(M.current).then((function(){O(!0),i(!0),R(!1),setTimeout((function(){if(F.current){t.setEngine(F.current);var e=M.current.getPureContent();d(e),F.current.setDefaultValue(e),F.current.focusToEnd()}}),600)}))},Y=function(){G(F.current).then((function(){O(!1),i(!1);var e=F.current.getPureContent();d(e),M.current&&(t.setEngine(M.current),M.current.setDefaultValue(e),M.current.focusToEnd())}))},q=Object(r.useCallback)((function(){if(D.current)return Y();V()}),[]);Object(r.useEffect)((function(){if(n.enableFullEditor)return Q()("command+shift+f, ctrl+shift+f",q),function(){Q.a.unbind("command+shift+f, ctrl+shift+f")}}),[n.enableFullEditor]),Object(r.useEffect)((function(){var t=_.a.find((function(e){return"submit"===e.name})).keys.map((function(e){return e.toLowerCase()})).join("");return Q()(t,(function(t){if(e.onSubmit){var n=M.current&&M.current.isFocus()||F.current&&F.current.isFocus();D.current&&Y(),n&&e.onSubmit(t)}})),function(){Q.a.unbind(t)}}),[]);var H=J()((function(){k((E?F.current:M.current).wordCount())}),300),W=function(n){e.onChange(n),t.saveAll(),o&&H()},$=function(){if("function"!=typeof n.getDefaultSuggestions)return[];var e=n.getDefaultSuggestions();return pe("default suggestion users: ",e),e};return{state:{loading:u,convertFail:b,format:m,content:f,expand:E,wordCount:j,tooltipVisible:I},handleExpand:V,handleCollapse:Y,getCommonProps:function(){var t,r,o={lang:ee.a.localeToLakeLang(window.appData.locale),defaultValue:f,onChange:W,onBeforeRenderImage:te.a,typography:n.typography,viewport:n.viewport,sidebar:n.sidebar,autoCompleteLinks:e.autoCompleteLinks,allowMention:n.allowMention,allowResource:n.allowResource,allowResizeVideo:n.allowResizeVideo,disableYuqueCardEmbedView:n.disableYuqueCardEmbedView};return n.imageUploadUrl&&(o.image={uploadAction:n.imageUploadUrl}),n.fileUploadUrl&&(o.file={uploadAction:n.fileUploadUrl},o.previewFileHandler=function(e,t){window.open(t,"_blank")}),n.fileCopyUrl&&(o.file=ie(ie({},o.file),{},{copyAction:n.fileCopyUrl})),n.mentionActionUrl&&(o.mention={action:n.mentionActionUrl,getDefaultSuggestions:$,paramName:"q",origin:n.mentionActionOrigin}),n.cryptoUrl&&(o.lockedtext={action:n.cryptoUrl}),n.videoUploadUrl&&(o.localVideo={uploadAction:n.videoUploadUrl,queryAction:n.videoUploadStatusUrl,attachableId:z.isServify?n.target.slug:n.target.id,attachableType:n.attachType}),null!==(t=window.yqWebApp)&&void 0!==t&&t.isAlipayWebApp&&(o.webappCustomImage={onUpload:(r=se(ue().mark((function e(){var t,n;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.yqWebApp.alipayChooseAndUploadImage();case 3:return t=e.sent,n=t.url,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(){return r.apply(this,arguments)})}),n.yuqueCard&&(o.yuqueCard=n.yuqueCard),o},onEditorLoad:function(r){N(r),t.setEngine(r),e.onLoad&&e.onLoad(r),n.focus&&r.focusToEnd()},onFullEditorLoad:function(e){A(e),t.setEngine(e)},getShortcutStyle:U,showTip:function(){window.h5||a||R(!0)},hideTip:function(){R(!1)}}}function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}function ye(e){var t=me(e),n=t.state,r=t.editorRef,a=t.getCommonProps,i=t.handleExpand,c=t.handleCollapse,d=t.onFullEditorLoad,h=t.onEditorLoad,g=t.showTip,_=t.hideTip,I=t.getShortcutStyle,R=e.editor.getProps(),D=function(){return o.a.createElement("div",{id:"lark-mini-editor",className:w,ref:r},o.a.createElement("h4",null,__("内容格式异常，暂无法编辑")),o.a.createElement("pre",null,e.defaultValue))};if(n.loading)return o.a.createElement("div",{id:"lark-mini-editor",className:w,ref:r},o.a.createElement(f.a,null));if(n.convertFail)return D();if(n.format===y.a.FORMAT.LAKE){var M=a(),B=function(){return o.a.createElement("div",{className:S},o.a.createElement(v.b,{name:"collapse",width:18,height:18}))},U=function(){return o.a.createElement("div",{className:"".concat(window.h5&&P)},n.expand&&!window.h5&&o.a.createElement(m.b,he({onLoad:d,cardWhitelist:R.fullCards,cardBlacklist:R.blockedCards,thirdPartyService:R.thirdpartyCards},M,{changeWithValue:!0})),n.expand&&window.h5&&o.a.createElement(m.c,he({toolbar:R.toolbar,onLoad:d,cardWhitelist:R.fullCards,cardBlacklist:R.blockedCards,thirdPartyService:R.thirdpartyCards},M)),o.a.createElement("div",{className:k,onClick:c},window.h5?B():o.a.createElement(s.a,{title:__("退出全屏"),placement:"left"},B())),R.enableWordCount&&o.a.createElement("span",{className:N},n.wordCount),o.a.createElement(b.a,null))};return o.a.createElement("div",{id:"lark-mini-editor",className:E,ref:r},o.a.createElement(m.c,he({toolbar:R.toolbar,moreToolbar:R.moreToolbar,cardWhitelist:R.cards,cardBlacklist:R.blockedCards,thirdPartyService:R.thirdpartyCards,onLoad:h},M)),R.enableFullEditor&&o.a.createElement(s.a,{visible:n.tooltipVisible,title:__("全屏编辑"),onMouseEnter:g,onMouseLeave:_},o.a.createElement("div",{className:p()(O,"editor-expand-button")},o.a.createElement("span",{onClick:function(){return i(!0)}},o.a.createElement(v.b,{name:"expand",width:10,height:10})))),R.enableWordCount&&o.a.createElement("span",{className:C},n.wordCount),R.showShortcut&&o.a.createElement("div",{className:p()(T,"editor-shortcut-wrap"),style:I},o.a.createElement("div",{className:A},o.a.createElement(l.a,{trigger:"click",content:o.a.createElement(F,{hotKeys:R.hotKeys})},o.a.createElement("span",{className:L},o.a.createElement(v.b,{name:"mini-editor-shortcut",width:16,height:16})))),o.a.createElement(Y,{hotKeys:R.hotKeys})),e.isInIframe?o.a.createElement("div",{style:{display:n.expand?"block":"none"},className:"".concat(x," ").concat(j)},U()):o.a.createElement(u.a,{wrapClassName:j,visible:n.expand,destroyOnClose:!0,keyboard:!1,autoFocusButton:!0,footer:null},U()))}return D()}ye.defaultProps={isInIframe:!1,onExpandChange:function(){}},ye.propTypes={editor:i.a.object,onChange:i.a.func,onLoad:i.a.func,onExpandChange:i.a.func,onSubmit:i.a.func,isInIframe:i.a.bool};var ve=ye,be=!1;function ge(e){return o.a.createElement(ve,{editor:e.editor,isInIframe:e.isInIframe,autoCompleteLinks:e.autoCompleteLinks,onChange:function(t){e.onChange(t),be||(be=!0,c.a.epv({type:"MiniEditor"}))},onLoad:e.onLoad,onSubmit:e.onSubmit,onExpandChange:e.onExpandChange})}ge.defaultProps={onLoad:function(){},onChange:function(){}},ge.propTypes={editor:i.a.object.isRequired,onChange:i.a.func,onSubmit:i.a.func,onLoad:i.a.func,onExpandChange:i.a.func,isInIframe:i.a.bool,autoCompleteLinks:i.a.bool};t.a=ge},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1252),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(2063),d=n(1279),p=n(91),m=n(38),h=n(2212),y=(n(922),n(427)),v="main-module_createMain_+zabJ",b="main-module_wrapper_h6BMM",g="main-module_cancel_5ptVn",_="main-module_fields_V5O6t",w="main-module_list_IB1Be",E="main-module_item_z2MKG",O="main-module_text_yBgz8",x="main-module_mainButton_C9fOX";function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t,n=[];return(t=n=n.concat([{title:__("新建文档#webappnav"),onClick:function(){window.yqWebApp.pushWindow("/r/webapp/new/doc",{hash:!0})},iconId:"doc-type-default",spmDPos:"d165767"},{title:__("新建知识库#webappnav"),onClick:function(){window.yqWebApp.pushWindow("/new",{withServerHost:!0})},iconId:"book-type-default",spmDPos:"d165768"}])).push.apply(t,k(new Array(4-n.length%4))),o.a.createElement("div",{className:b,"data-aspm":"c80398"},o.a.createElement("div",{className:_},o.a.createElement("div",{className:w},n.map((function(t){return t?o.a.createElement("div",{"data-aspm-click":t.spmDPos,className:E,onClick:function(){e.toggleModal(),t.onClick(t)}},o.a.createElement(m.b,{name:t.iconId,width:32}),o.a.createElement("div",{className:O},t.title)):o.a.createElement("div",{className:E})})))),o.a.createElement("div",{"data-aspm-click":"d165769",className:g,onClick:function(){e.toggleModal()}},__("取消")))},P=function(e){var t=function(){var e=j(Object(r.useState)(!1),2),t=e[0],n=e[1];return{state:{showModal:t},onShowModal:function(){n(!0)},toggleModal:function(){setTimeout((function(){n(!1)}),16)}}}(),n=t.state.showModal,a=t.onShowModal,i=t.toggleModal;return o.a.createElement("div",{onClick:a,className:x,"data-aspm-click":"d165759"},e.children,o.a.createElement(y.a,{popup:!0,visible:n,onClose:i,animationType:"slide-up",className:v,maskClosable:!0},o.a.createElement(N,{toggleModal:i})))},T="dashboard",A="profile",L={add:{alias:"add"},home:{alias:"home",get text(){return __("首页#webappnav")},hasActive:!0},note:{alias:"note",get text(){return __("小记#webappnav")},hasActive:!0},profile:{alias:"profile",get text(){return __("我#webappnav")},hasActive:!0}},I={wrapper:"index-module_wrapper_QHXcB",en:"index-module_en_YW9QX",item:"index-module_item_3Q2OJ",text:"index-module_text_Nxbyp",active:"index-module_active_jeWA8",hideBadge:"index-module_hideBadge_xknJV","icon-plus":"index-module_icon-plus_uN3Kf",notificationBadge:"index-module_notificationBadge_Am4kV",countBell:"index-module_countBell_EQkz-"};function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D={tab:24,add:38},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="webapp-".concat(e);return t&&(n+="-active"),e===L.add.alias?o.a.createElement(m.b,{className:s()(I.icon,"icon-".concat(e)),name:n,width:D[e]}):o.a.createElement(m.b,{name:n,width:D.tab})},F="en-us"===window.navigator.language,B=function(e){var t=e.currentTab,n=function(e){if(e!==t){if(e===T){var n=p.default.get(h.b.SUB_TAB),r=n?"/".concat(e,"/").concat(n):"/".concat(e);window.yqWebApp.history.push(r)}else window.yqWebApp.history.push("/".concat(e));window.Tracert&&window.Tracert.logPv()}};return o.a.createElement("div",{"data-aspm":"c80395",className:s()(I.wrapper,R({},I.en,F),"webapp-global-bottom-bar")},o.a.createElement("div",{"data-aspm-click":"d165756",className:s()(I.item,R({},I.active,t===T)),onClick:function(){return n(T)}},M(L.home.alias,t===T),o.a.createElement("div",{className:I.text},L.home.text)),o.a.createElement(P,null,M(L.add.alias)),o.a.createElement("div",{"data-aspm-click":"d165761",className:s()(I.item,R({},I.active,t===A)),onClick:function(){return n(A)}},M(L.profile.alias,t===A),o.a.createElement("div",{className:I.text},L.profile.text)))};B.propTypes={show:u.a.bool};var U=B,z=n(695);function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=__("语雀"),Y=function(e){var t,n=e.title,a=e.mainPage,c=e.forceNoBackGround,u=e.tab,l=e.show,p=e.autoHeight,m=e.className;return Object(r.useEffect)((function(){if(l&&window.yqWebApp.isDingTalkApp){if(window.yqWebApp.currentOrganization.id&&n===V)return void window.yqWebApp.setTitle(window.yqWebApp.currentOrganization.name);window.yqWebApp.setTitle(e.title)}}),[l]),o.a.createElement(i.a,{title:n},o.a.createElement("div",{className:s()(z.a.wrapper,(t={},G(t,z.a.main,a),G(t,z.a.forceNoBackGround,c),G(t,z.a.show,l),G(t,z.a.autoHeight,p),t),m)},!window.yqWebApp.isWebApp&&o.a.createElement(d.c,{title:n,onBack:e.onBack}),e.children,a&&o.a.createElement(U,{currentTab:u,show:l}),o.a.createElement(f.a,{menuItems:[{name:__("关于"),onClick:function(){window.yqWebApp.goToAbout()}},{name:__("分享"),onClick:function(){window.yqWebApp.shareApp()}}]},o.a.createElement("span",{id:"global-option-menu-button",style:{display:"none"}}))))};Y.defaultProps={autoHeight:!0,mainPage:!1,forceNoBackGround:!1,title:V,show:!0,className:""},Y.propTypes={autoHeight:u.a.bool,mainPage:u.a.bool,forceNoBackGround:u.a.bool,title:u.a.string,show:u.a.bool,className:u.a.string};t.a=Y},function(e,t,n){"use strict";n(173);var r=n(94),o=n(231),a=n.n(o),i=(n(245),n(64)),c=(n(133),n(31)),u=n(0),l=n.n(u),s=n(10),f=n.n(s),d=n(161),p=n(2),m=n(2135),h=n(2253),y=n(2372),v=n(2255),b=n(2373),g=n(2256),_=n(2371),w=n(573),E=n(370),O=n(318),x=n(2064),j=n(38),k=n(91),S=n(34),C=n(961),N=n(42),P=n.n(N),T=(n(60),n(24)),A=n(198),L=n.n(A),I=n(32),R=n.n(I),D=n(114),M=n.n(D),F=n(1102),B=n(974),U=n(529),z=n(368),G=n(2129);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function Y(){Y=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==V(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function q(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}var H=function(e){e(!0),setTimeout((function(){e(!1)}),3e3)},W=function(){var e,t=(e=Y().mark((function e(t,n){var r,o,a;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=window.appData)&&void 0!==r&&null!==(o=r.me)&&void 0!==o&&o.id){e.next=2;break}return e.abrupt("return",!1);case 2:if(!k.default.get(t)){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,S.a.mine.userSettings();case 6:if(null==(a=e.sent)||!a[t]){e.next=10;break}return k.default.set(t,"1"),e.abrupt("return",!1);case 10:return e.next=12,S.a.mine.updateUserSettings({key:t,value:1});case 12:return H(n),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){q(a,r,o,i,c,"next",e)}function c(e){q(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),K=W;function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(){ee=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==$(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function te(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){te(a,r,o,i,c,"next",e)}function c(e){te(a,r,o,i,c,"throw",e)}i(void 0)}))}}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=O.myNotesConsts.NOTE_LATEST_UPDATED_STORAGE_KEY,ce=O.myNotesConsts.NOTE_QUERY_STATUS_INTERVAL,ue=O.myNotesConsts.NOTE_ORDER_BY_STORAGE_KEY,le=O.myNotesConsts.NOTE_PINNED_SHOW_KEY,se=O.myNotesConsts.NOTE_ALLOW_PAGEPATH_LIST,fe=O.myNotesConsts.NOTE_WS_RECONNECT_DEFUALT_INTERVAL,de=M()("biz.note"),pe=!0,me=!1,he=!1,ye=fe,ve="undefined"!=typeof WebSocket,be=null,ge=[],_e=null,we=!1,Ee=k.default.get(ue)||d.ORDER_BY.content_updated_at,Oe={status:d.STATUS.unarchived,filterTab:d.FILTER_TYPES.all},xe=null,je=null,ke=null,Se="string"!=typeof k.default.get(le)||Boolean(Number(k.default.get(le))),Ce=function(e){var t=re(Object(u.useState)([]),2),n=t[0],r=t[1],o=re(Object(u.useState)([]),2),a=o[0],i=o[1],c=re(Object(u.useState)(Se),2),s=c[0],f=c[1],p=re(Object(u.useState)(!1),2),m=p[0],h=p[1],y=re(Object(u.useState)(Ee),2),v=y[0],b=y[1],g=re(Object(u.useState)(!0),2),_=g[0],w=g[1],E=re(Object(u.useState)({}),2),x=E[0],j=E[1],C=re(Object(u.useState)(null),2),N=C[0],A=C[1],I=re(Object(u.useState)(!1),2),D=I[0],M=I[1],V=re(Object(u.useState)(Object(O.getDefaultShortCutText)()),2),Y=V[0],q=V[1],H=re(Object(u.useState)(null),2),W=H[0],$=H[1],Q=re(Object(u.useState)([]),2),J=Q[0],te=Q[1],oe=re(Object(u.useState)(null),2),ae=oe[0],le=oe[1],Ce=re(Object(u.useState)(!1),2),Ne=Ce[0],Pe=Ce[1],Te=re(Object(u.useState)([]),2),Ae=Te[0],Le=Te[1],Ie=re(Object(u.useState)(!1),2),Re=Ie[0],De=Ie[1],Me=re(Object(u.useState)(!0),2),Fe=Me[0],Be=Me[1],Ue=re(Object(u.useState)(!0),2),ze=Ue[0],Ge=Ue[1],Ve=re(Object(u.useState)(null),2),Ye=Ve[0],qe=Ve[1],He=re(Object(u.useState)(!1),2),We=He[0],Ke=He[1],$e=re(Object(u.useState)(!1),2),Qe=$e[0],Xe=$e[1],Je=re(Object(u.useState)(""),2),Ze=Je[0],et=Je[1],tt=re(Object(u.useState)(Oe),2),nt=tt[0],rt=tt[1];O.isDesktopApp&&T.a.config({top:80,duration:1.5}),Object(u.useEffect)((function(){var e=document.querySelector("#siteTipGuide");return e&&(e.style.display="none"),function(){var e=document.querySelector("#siteTipGuide");e&&(e.style.display="block")}}),[]);var ot=function(e){return a.find((function(t){return t.id===e}))?[a,i]:[n,r]},at=function(){var e=ne(ee().mark((function e(t){var o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.notes.pinNotes({ids:[t.id]});case 2:t.pinned_at=new Date,o=n.filter((function(e){return e.id!==t.id})),a.unshift(t),r(o),i(a),T.a.success(__("小记置顶成功"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=ne(ee().mark((function e(t){var o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.notes.deletePinNotes({ids:[t.id]});case 2:t.pinned_at=null,o=a.filter((function(e){return e.id!==t.id})),n.unshift(t),r(n),i(o),T.a.success(__("取消置顶成功"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(e){var t=d.DEFAULT_TYPE.includes(Oe.filterTab)?Ee:d.ORDER_BY.first_published_at,n=R()(e[t]).format("YYYY-MM-DD HH:mm:ss"),r="".concat(e.id,"-").concat(n);if(k.default.set(ie,r),O.isDev){var o=document.getElementById("note-lasted-updated");o&&(o.innerText=r)}},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.noLoading||h(!0);var t={offset:ge.length,q:_e,filter_type:Oe.filterTab,tag:je,status:Oe.status,merge_dynamic_data:0};d.NEED_PINNED_TYPE.includes(Oe.filterTab)&&(t.with_pinned_notes=!0),e.fromQuery&&(t.offset=0),_e||(t.order=Ee),d.DEFAULT_TYPE.includes(Oe.filterTab)||(t.include_body=!0,t.order=d.ORDER_BY.first_published_at),S.a.notes.find(t,{useOriginResp:!0}).then((function(o){var a=o.data,c=o.meta;e.fromInitial&&(we=!0,O.isDesktopApp&&(window.YuqueDesktopJSBridge?window.YuqueDesktopJSBridge.postMessage(U.DesktopBridgeEvents.notify,{eventName:"common:loaded"}):window.parent.postMessage({name:"iframeLoaded"},"*")));var u=c.hasMore,l=c.mirror,s=void 0===l?{}:l;if(_e||e.fromQuery||j(s),w(u),0===t.offset){if(!_e){var f=0,p=0,m=d.DEFAULT_TYPE.includes(Oe.filterTab)?Ee:d.ORDER_BY.first_published_at;a.forEach((function(e,t){e[m]&&new Date(e[m])>p&&(f=t,p=new Date(e[m]))}));var h=a[f];h&&ct(h)}if(a=a.map((function(e){var t=ge.find((function(t){return t.id===e.id&&t.content_updated_at===e.content_updated_at}));return t||e})),d.NEED_PINNED_TYPE.includes(Oe.filterTab)){var y=a.filter((function(e){return!!e.pinned_at})),v=a.filter((function(e){return!e.pinned_at}));i(y),r(v)}else r(a)}else{var b=n.concat(a);b=b.map((function(e){var t=ge.find((function(t){return t.id===e.id&&t.content_updated_at===e.content_updated_at}));return t||e})),r(b)}})).finally((function(){return h(!1)}))};function lt(){return st.apply(this,arguments)}function st(){return(st=ne(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.tagMaps.count({target_type:F.TARGET_TYPE.Note,target_status:Oe.status,filter_type:Oe.filterTab});case 2:(t=e.sent)&&(te(t),ae&&!t.some((function(e){return e.tag_meta.id===ae}))&&le(null));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ft=Object(u.useCallback)((function(e){rt(X(X({},nt),e))}),[nt]),dt=function(){var e=ne(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.notes.updateContentUpdatedAt({id:t,latest_update_user_uuid:Ye||null});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){A(null),i([]),r([]),setTimeout(ut,16)};function mt(){return(mt=ne(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe&&xe.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,S.a.notes.findOne({id:xe.id,merge_dynamic_data:0});case 4:e.sent.first_published_at&&(j(t),r([]),setTimeout((function(){return ut({fromQuery:!0})}),16));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(){be&&(be.reset(),be=null,qe(null),de("[%s] 断开长连接",R()().format("YYYY-MM-DD HH:mm:ss")))}function yt(e,t,n){if(pe){var o=e.latestNote,a=e.note_data_sync_info,i=e.collab;he=ve&&(null==a?void 0:a.enable)&&i,ye=1e3*parseInt(null==a?void 0:a.interval,10)||fe,de("[%s] 处理轮询，远程开关 %s",R()().format("YYYY-MM-DD HH:mm:ss"),null==a?void 0:a.enable),ht();var c=function(){var e,n,a,i,c;xe&&o&&o.id!==xe.id&&((n=o,a=d.DEFAULT_TYPE.includes(Oe.filterTab)?Ee:d.ORDER_BY.first_published_at,i=R()(n[a]).format("YYYY-MM-DD HH:mm:ss"),c="".concat(n.id,"-").concat(i),!(k.default.get(ie)===c))&&(r([]),setTimeout((function(){ut({fromQuery:!0}),lt()}),16)));var u=null==t?void 0:t.mirror;u&&(null==u?void 0:u.id)!==(null===(e=xe)||void 0===e?void 0:e.id)&&function(e){mt.apply(this,arguments)}(u)};he?(n.refreshBeforeReconnect&&me&&c(),be=new G.a({collab:i}),de("[%s] 切换到长连接",R()().format("YYYY-MM-DD HH:mm:ss"),i),be.on("ready",(function(e){var t=e.uuid;de("[%s] 长连接ready, uuid: %s",R()().format("YYYY-MM-DD HH:mm:ss"),t),qe(t)})),be.on("broadcast",(function(e){var t=e.type;e.body;me&&t===G.a.CHANNELS.NOTE.UPDATE_LIST&&(r([]),lt(),setTimeout((function(){return ut({fromQuery:!0})}),16))}))):me&&(de("[%s] 切换到轮询",R()().format("YYYY-MM-DD HH:mm:ss")),c())}}var vt,bt=Object(u.useMemo)((function(){return P()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ke&&clearTimeout(ke);var t=he?ye:ce;if(de("[%s] 定时器启动 %s ms",R()().format("YYYY-MM-DD HH:mm:ss"),t),ke=setTimeout(bt,t),pe){var n=d.DEFAULT_TYPE.includes(Oe.filterTab)?Ee:d.ORDER_BY.first_published_at;S.a.notes.getStatus({order:n,filter_type:Oe.filterTab,status:Oe.status},{useOriginResp:!0,ignoreGlobalMessage:!0}).then((function(t){var n=t.data;return yt(void 0===n?{}:n,t.meta,e)}))}}),1e3,{leading:!0})}),[]),gt=function(){we||(ge.length&&r([]),setTimeout((function(){return ut({fromInitial:!0})}),16))},_t=function(e,t){var n,r,o,a=d.MENU_SENCE.noteBlank;if(null!==(n=e.target)&&void 0!==n&&n.closest(".ne-editor"))window._lake_editer=null===(o=e.target)||void 0===o?void 0:o.closest(".ne-editor"),a=d.MENU_SENCE.edit;else if(null!==(r=e.target)&&void 0!==r&&r.closest(".note-list-item")){(window.getSelection().toString().length>0||t)&&(a=d.MENU_SENCE.noteRead)}return a},wt=function(e){var t=e.data;if("string"==typeof t)if(Ke("onLeaveNote"!==t),"onAfterRecycleRestore"===t)pt(),lt();else if("onSwitchToNote"===t)lt(),gt();else if(t.startsWith("onSwitchToNote:")){var n=t.replace("onSwitchToNote:","");if(n)try{var r=JSON.parse(n);r.openMiniWindowShortcut&&q(__("按 {shortcut} 全局新建小记",{shortcut:r.openMiniWindowShortcut}))}catch(i){}lt(),gt()}else if(/execCommand/.test(t)){var o,a=t.replace("execCommand:","");if(("undo"===a||"redo"===a)&&null!==(o=window._lake_editer)&&void 0!==o&&o._editor)return void window._lake_editer._editor.execCommand(a);document.execCommand(a)}},Et=function(){se.includes(window.location.pathname)&&("visible"===document.visibilityState?(gt(),Be(!0),Ke(!0)):"hidden"===document.visibilityState&&Be(!1))},Ot=function(){gt(),window.addEventListener("visibilitychange",Et),function(){if(O.isDesktopApp){if(L()(O.isWin?"ctrl+alt+i":"control+option+⌘+i",(function(e){e.preventDefault(),window.parent.postMessage({name:"openDevTools"},"*")})),window.addEventListener("focus",(function(){Ke(!0),Be(!0),Ge(!0),window.YuqueDesktopJSBridge?window.YuqueDesktopJSBridge.postMessage(U.DesktopBridgeEvents.notify,{eventName:"note:windowFocus"}):window.parent.postMessage({name:"windowFocus"},"*")}),!1),window.YuqueDesktopJSBridge)for(var e=["execCommand","onLeaveNote","onAfterRecycleRestore","onSwitchToNote"],t=0;t<e.length;t++)window.YuqueDesktopJSBridge.postMessage(U.DesktopBridgeEvents.listen,{eventName:e[t],listener:function(e,t){wt({data:t})}});window.addEventListener("blur",(function(){Ge(!1)}),!1),window.addEventListener("message",wt,!1),window.addEventListener("contextmenu",(function(e){if(!e.defaultPrevented){e.preventDefault();var t=!1,n="";if(O.isDesktopApp){var r=e.target;(t="IMG"===r.nodeName)&&(n=r.src);var o,a=r.closest(".yuque-doc-content"),i=window.getSelection();if(i.focusNode&&(o=i.getRangeAt(0)),a&&t&&o&&o.commonAncestorContainer&&!o.commonAncestorContainer.contains(e.target)){var c=document.createRange();i.removeAllRanges(),c.selectNode(r),i.addRange(c)}}window.YuqueDesktopJSBridge?window.YuqueDesktopJSBridge.postMessage(U.DesktopBridgeEvents.notify,{eventName:"note:contextmenu",data:{menuSence:_t(e,n),image:{url:n}}}):window.parent.postMessage({name:"contextmenu",menuSence:_t(e,n),image:{url:n}},"*")}})),window.YuqueDesktopJSBridge||(window.openExternalLink=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window.parent.postMessage({name:"openExternalLink",args:[].concat(t)},"*")})}}(),lt()};function xt(){return(xt=ne(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t[0].isIntersecting&&ut({noLoading:!0});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){je!==ae&&(ge=[],je=ae,r([]),i([]),setTimeout(ut,16),f(!0),Object(B.scrollToTop)({silent:!0}))}),[ae]),Object(u.useEffect)((function(){return Ot(),function(){we=!1,ht()}}),[]),Object(u.useEffect)((function(){if(window.yqWebApp){var e=function(){ge=[],lt(),ut({noLoading:!0})},t=window.yqWebApp.onEvent(z.a.UPDATE_NOTES_LIST,e).remover;return document.addEventListener("resume",e,!1),function(){t(),document.removeEventListener("resume",e)}}}),[]),Object(u.useEffect)((function(){pe=Fe,O.isDesktopApp&&(pe=pe&&ze&&We),pe&&bt({refreshBeforeReconnect:!0})}),[Fe,ze,We]),Object(u.useEffect)((function(){me=!N&&!n.some((function(e){return e.editing}))&&!ae}),[n,N,ae]),Object(u.useEffect)((function(){xe=x}),[x]),Object(u.useEffect)((function(){_e=N}),[N]),Object(u.useEffect)((function(){ge=n}),[n]),Object(u.useEffect)((function(){Ee!==v&&(Ee=v,k.default.set(ue,v),r([]),setTimeout(ut,16))}),[v]),Object(u.useEffect)((function(){Oe.status===nt.status&&Oe.filterTab===nt.filterTab||(Oe=nt,De(!1),pt(),le(null),lt(),d.NEED_PINNED_TYPE.includes(nt.filterTab)&&f(!0))}),[nt]),window.IntersectionObserver&&(vt=new IntersectionObserver((function(e){return xt.apply(this,arguments)}),{threshold:.1})),Object(u.useEffect)((function(){if(W&&vt)return vt.observe(W),function(){vt.unobserve(W)}}),[W,n]),{state:{listData:n,pinnedListData:a,listLoading:m,orderBy:v,hasMore:_,note:x,searchValue:N,searchActive:D,filterTab:nt.filterTab,shortCutText:Y,noteTags:J,currentTagId:ae,showRepoModal:Ne,toDocList:Ae,batchProcess:Re,noteStatus:nt.status,archivedStateFirstSet:Qe,filterMsg:Ze,currentUuid:Ye,showPinned:s},getNotes:ut,onLoadNote:function(e){var t=e.id,n=re(ot(t),2),r=n[0],o=n[1],a=r.slice(),i=a.findIndex((function(e){return e.id===t}));return a[i].loading=!0,o(a),S.a.notes.findOne({id:t,merge_dynamic_data:0}).then((function(e){var t=r.slice();t[i]=X(X({},e),{},{expanded_at:new Date}),o(t)})).catch((function(){var e=r.slice();a[i].loading=!1,o(e),T.a.error(__("获取内容失败，请再试一次"))}))},onLoadNotes:function(e){var t=[];return e.forEach((function(e){return t.push(function(e){return S.a.notes.findOne({id:e})}(e))})),Promise.all(t).then((function(e){return e})).catch((function(){T.a.error(__("获取小记内容失败，请稍后尝试"))}))},onCollapseNote:function(e){var t=e.id,n=re(ot(t),2),r=n[0],o=n[1],a=r.slice(),i=a.findIndex((function(e){return e.id===t}));delete a[i].expanded_at,delete a[i].changed_at,delete a[i].doclet,delete a[i].loading,o(a)},onChangeNote:function(e){var t=e.id,n=re(ot(t),2),r=n[0],o=n[1],a=r.slice(),i=a.findIndex((function(e){return e.id===t}));a[i].changed_at=new Date,o(a)},onRemoveNote:function(e){var t=e.id;S.a.notes.destroy({id:t,latest_update_user_uuid:Ye||null},{useOriginResp:!0}).then((function(){var e=re(ot(t),2),n=e[0],r=e[1],o=n.slice(),a=o.findIndex((function(e){return e.id===t}));o.splice(a,1),r(o),T.a.success(__("小记已移至回收站")),setTimeout((function(){lt()}),1e3)})).catch((function(){T.a.error(__("删除失败"))}))},onRemoveNotes:function(e){return S.a.notes.destroyMulti({ids:e,latest_update_user_uuid:Ye||null}).then((function(){Le([]),De(!1);var t=n.slice().filter((function(t){return!e.includes(t.id)}));r(t);var o=a.slice().filter((function(t){return!e.includes(t.id)}));i(o),!t.length&&_&&ut(),lt(),T.a.success(__("小记已移至回收站"))})).catch((function(){T.a.error(__("删除失败"))}))},onPublicNote:function(e){var t=e.id;S.a.notes.shareNoteToPublic({id:t}).then((function(e){var o;[].concat(Z(a),Z(n)).find((function(e){return e.id===t})).pinned_at?((o=a).forEach((function(e){e.id===t&&(e.is_public=!0)})),i(Z(o))):((o=n).forEach((function(e){e.id===t&&(e.is_public=!0)})),r(Z(o))),T.a.success(__("推送成功"))}))},onArchiveNotes:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S.a.notes.archiveMulti({ids:e,archive:t}).then(ne(ee().mark((function o(){var c,u,s,f;return ee().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(Le([]),De(!1),c=n.slice(),u=c.filter((function(t){return!e.includes(t.id)})),r(u),s=a.slice(),f=s.filter((function(t){return!e.includes(t.id)})),i(f),!t){o.next=15;break}return T.a.success(__("{num} 篇小记已归档 {target}",{target:l.a.createElement("a",{style:{paddingLeft:"16px"},onClick:function(){return ft({status:d.STATUS.archived,filterTab:d.FILTER_TYPES.all})}},__("查看")),num:e.length})),et(__("转为归档的小记在这里查看")),o.next=13,K("firstArchivedChange",Xe);case 13:o.next=16;break;case 15:T.a.success(__("小记已取消归档"));case 16:lt();case 17:case"end":return o.stop()}}),o)})))).catch((function(){t?T.a.error(__("归档失败")):T.a.error(__("取消归档失败"))}))},onSelectNote:function(e){var t=e.id,n=re(ot(t),2),r=n[0],o=n[1],a=r.slice(),i=a.findIndex((function(e){return e.id===t}));a[i].editing=!0,o(a),setTimeout((function(){Object(B.checkSubmitBtnShow)()}),1e3)},onCancelNode:function(e){var t=e.id,n=re(ot(t),2),r=n[0],o=n[1],a=r.slice(),i=a.findIndex((function(e){return e.id===t}));a[i].editing=!1,o(a),setTimeout((function(){Object(B.fixNoteViewer)({id:t})}),100)},onSearchNote:function(e){A(e),r([]),i([]),setTimeout(ut,16)},onSearchReset:function(){N&&pt()},onAfterPublishSuccess:function(e,t){var o=e.note,c=e.meta,u=x.id===o.id,l=n.slice(),f=l.findIndex((function(e){return e.id===o.id})),p=!1,m=X(X({},o),{},{expanded_at:new Date});if(Oe.status===d.STATUS.archived&&u||o.pinned_at||(Oe.filterTab===d.FILTER_TYPES.all?Ee===d.ORDER_BY.content_updated_at?(f>-1&&l.splice(f,1),l.unshift(m),ct(m)):Ee===d.ORDER_BY.first_published_at&&(f>-1?(l[f]=m,p=!0):(l.unshift(m),ct(m))):Oe.filterTab===d.FILTER_TYPES.image?m.has_image&&(l.unshift(m),ct(m)):Oe.filterTab===d.FILTER_TYPES.bookmark?m.has_bookmark&&(l.unshift(m),ct(m)):Oe.filterTab===d.FILTER_TYPES.attachment&&m.has_attachment&&(l.unshift(m),ct(m))),r(l),o.pinned_at){var h=a.slice(),y=h.findIndex((function(e){return e.id===o.id}));h[y]=o,i(h)}if(p?Object(B.scrollToElem)(x):Object(B.scrollToTop)(),u){var v;t||j(m),s&&Object(B.scrollToElem)(x);var b=c.mirror;if(j(void 0===b?{}:b),null!=o&&null!==(v=o.tags)&&void 0!==v&&v.includes(je))return;le(null)}},onChangeShareStatus:function(e,t){var n=re(ot(null==e?void 0:e.target_id),2),r=n[0],o=n[1],a=r.slice(),i=a.findIndex((function(t){return t.id===(null==e?void 0:e.target_id)}));i>-1&&(a[i].is_public=e&&e.is_active&&!e.is_time_expired,a[i].is_toolbar_active=t,o(a))},onAfterEditorActive:function(){S.a.notes.getStatus({},{useOriginResp:!0}).then((function(e){var t=e.meta.mirror,n=void 0===t?{}:t;n&&n.id!==x.id&&pt()}))},setSearchActive:M,setOrderBy:b,setLoadRef:$,getNoteTags:lt,onTagChanged:function(e,t,n){if(!(x.id===t.id)){var r=re(ot(t.id),2),o=r[0],a=r[1],i=o.slice(),c=i.findIndex((function(e){return e.id===t.id})),u=e?e.map((function(e){var t;return null==e||null===(t=e.tag_meta)||void 0===t?void 0:t.id})):[];i[c].tags=u,a(i),n&&lt()}},onSelectTag:function(e){if(e===ae)return le(null);A(null),le(e)},setShowRepoModal:Pe,setToDocList:Le,setBatchProcess:De,onChangeFilterParams:ft,onUpdateContentUpdatedAt:dt,pinnedNote:at,deletePinnedNote:it,setShowPinned:f}},Ne=(n(79),n(44)),Pe=n(149),Te=n.n(Pe),Ae=n(287),Le=n(1223),Ie=n(124),Re={modal:"repo-selector-modal-module_modal_JTFUc",modalTitle:"repo-selector-modal-module_modalTitle_KLBEf",modalDescription:"repo-selector-modal-module_modalDescription_WbJwm",archiveCheckbox:"repo-selector-modal-module_archiveCheckbox_w+t5l",archiveContext:"repo-selector-modal-module_archiveContext_Xfncd",noBookId:"repo-selector-modal-module_noBookId_hmEkX"};function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Me(){Me=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==De(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function Fe(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function Be(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Fe(a,r,o,i,c,"next",e)}function c(e){Fe(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e){var t=e.state,n=t.showRepoModal,r=t.toDocList,o=t.filterTab,a=t.batchProcess,i=t.noteStatus,c=t.noteType,l=e.setShowRepoModal,s=e.currentGroup,f=e.currentBook,p=e.onLoadNotes,m=e.setBatchProcess,h=e.onArchiveNotes,y=e.setToDocList,v=e.haveBooks,b=window.appData.organization,g=void 0===b?{}:b,_=Ue(Object(u.useState)(e.currentGroup),2),w=_[0],E=_[1],x=Ue(Object(u.useState)(f),2),j=x[0],k=x[1],C=Ue(Object(u.useState)(!1),2),N=C[0],P=C[1],A=Ue(Object(u.useState)(!0),2),L=A[0],I=A[1],R=o===d.FILTER_TYPES.all,D=i===d.STATUS.archived,M=function(){var e=Be(Me().mark((function e(t){var n,r;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t.map((function(e){return e.id})));case 2:return n=e.sent,r=Object(O.combineNotes)(n.map((function(e){return e.doclet.body_draft_asl}))),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Be(Me().mark((function e(t,n){var r,o;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={title:Ae.a.getDefaultTitle(Ie.a.adapterDocType()),type:Ie.a.adapterDocType(),format:Ie.a.getDefaultFormat(),book_id:t.id,status:1,insert_to_catalog:!0,action:"prependChild",target_uuid:null},n&&(r.body_draft_asl=n,r.body_asl=n),e.next=4,S.a.docs.createDoc(r);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Be(Me().mark((function e(t){var n,o,a;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(r);case 2:return n=e.sent,e.next=5,F(t,n);case 5:o=e.sent,a="/".concat(t.user.login,"/").concat(t.slug,"/").concat(o.slug,"/edit"),Object(O.openDocLink)(a,{login:t.user.login,bookSlug:t.slug,docSlug:o.slug}),l(!1),y([]),m(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(){return(U=Be(Me().mark((function e(){var t,n,o,a,i,c,u;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),t=window.appData,n=t.group,o=void 0===n?{}:n,a=t.me,i={user_id:o.id?o.id:a.id,type:"Book",slug:Te.a.DEFAULT_BOOK_SLUG,name:__("默认知识库"),public:0},e.next=5,S.a.books.createBook(i);case 5:(c=e.sent).user=o.id?o:a,B(c),L&&!D&&(u=r.map((function(e){return e.id})),h(u,L));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=Ue(Object(u.useState)(v),2),G=z[0],V=z[1];function Y(){return(Y=Be(Me().mark((function e(){var t,n,r;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Te.a.MIXING_BOOK_TYPES.join(","),n={organization_id:g.id,type:t,filterByAbility:"create_doc",offset:0,limit:1},e.next=4,S.a.mine.books(n);case 4:(r=e.sent)&&r.length&&V(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){!function(){Y.apply(this,arguments)}()}),[]),{state:{showRepoModal:n,showToArchive:R,currentGroup:s,currentBook:f,targetGroup:w,targetBook:j,toDocLoading:N,toArchive:L,filterTab:o,haveBooks:G,noteType:c},handleOk:function(e){if(e&&e.id)if(e!==f){if(P(!0),B(e),L&&!D&&c!==d.TYPE.todo){var t=r.map((function(e){return e.id}));h(t,L)}}else T.a.error(__("请先选择知识库"))},handleCancel:function(){l(!1),a||y([])},setToArchive:I,initializeBookAndWrite:function(){return U.apply(this,arguments)},handleSelect:function(e,t){E(e),k(t)}}}Le.a.propTypes={currentGroup:p.PropTypes.object,currentBook:p.PropTypes.object,targetBook:p.PropTypes.object,showRepoModal:p.PropTypes.bool};var Ve=function(e){var t,n,r,o=Ge(e),a=o.state,i=a.showRepoModal,c=a.currentGroup,u=a.currentBook,s=a.targetBook,p=a.toDocLoading,m=a.haveBooks,h=a.noteType;return m?l.a.createElement(Ne.a,{className:f()(Re.modal,(t={},n=Re.noBookId,r=!(null!=s&&s.id),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),visible:i,onOk:function(){o.handleOk(s)},onCancel:o.handleCancel,confirmLoading:p,keyboard:!0,centered:!0,width:604,title:l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:Re.modalTitle},__("移动到知识库")),l.a.createElement("p",{className:Re.modalDescription},__("{type}会转化为文档保存到知识库{desc}",{type:h===d.TYPE.todo?__("待办"):__("小记"),desc:h===d.TYPE.note?__("，并自动归档"):""})))},l.a.createElement(Le.a,{className:Re.repoSelector,defaultGroup:c,defaultBook:u,onSelected:o.handleSelect})):l.a.createElement(Ne.a,{className:Re.modal,visible:i,onOk:function(){return o.initializeBookAndWrite()},onCancel:o.handleCancel,confirmLoading:p,keyboard:!0,centered:!0,width:604,title:l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:Re.modalTitle},__("移动到知识库")),l.a.createElement("p",{className:Re.modalDescription},__("{type}会转化为文档保存到知识库{desc}",{type:h===d.TYPE.todo?__("待办"):__("小记"),desc:h===d.TYPE.note?__("，并自动归档"):""})))})},Ye={wrapper:"index-module_wrapper_QcLrj",mainTitle:"index-module_mainTitle_YMtyq",versionInfo:"index-module_versionInfo_aQHd2",mainContent:"index-module_mainContent_6OA3S",leftSide:"index-module_leftSide_hjt+x",editor:"index-module_editor_uaChI",rightSide:"index-module_rightSide_vu9t6",listWrapper:"index-module_listWrapper_-6mWY",notesList:"index-module_notesList_mfsOd",empty:"index-module_empty_Eq63j",autoWidth:"index-module_autoWidth_lEhdO",desktop:"index-module_desktop_Cwczw",noteFilter:"index-module_noteFilter_nZ6d8",noteStatus:"index-module_noteStatus_JqfPq",item:"index-module_item_paSWs",filterContent:"index-module_filterContent_Sd39s",filterBar:"index-module_filterBar_uWOSz",orderOptions:"index-module_orderOptions_kr+R0",orderOptionsDisable:"index-module_orderOptionsDisable_jWTh+",orderChecked:"index-module_orderChecked_s1uDp"};function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(this,arguments)}var We=function(e){var t,n,o,u,s=Ce(e),p=e.autoLayout,N=s.state,P=N.listData,T=N.listLoading,A=N.orderBy,L=N.searchActive,I=N.showRepoModal,R=N.batchProcess,D=N.filterTab,M=N.archivedStateFirstSet,F=N.filterMsg,B=s.setOrderBy,U=s.setSearchActive,z=s.onSearchReset,G=s.onSearchNote,V=A===d.ORDER_BY.content_updated_at,Y=s.state.noteTags,q=Y&&Y.length&&D!==d.FILTER_TYPES.dingTalkRobot&&D!==d.FILTER_TYPES.wechatRobot;return l.a.createElement("div",{"data-testid":"my-notes",className:f()("layout-container",Ye.wrapper,(t={},qe(t,Ye.autoWidth,p),qe(t,Ye.desktop,O.isDesktopApp),qe(t,Ye.win,O.isWin),t)),id:"mynote-container"},l.a.createElement("div",{className:Ye.mainContent},l.a.createElement("div",{className:Ye.leftSide},l.a.createElement("h3",{className:Ye.mainTitle},__("小记"),(o=window.navigator.userAgent.match(/yuque-desktop\/([\d.]+)/i),(u=o&&o[1])?l.a.createElement("span",{className:Ye.versionInfo},u,"/",l.a.createElement("span",{id:"note-version-info"})):null)),l.a.createElement("div",{className:Ye.editor},l.a.createElement(m.a,s))),l.a.createElement("div",{className:Ye.rightSide},l.a.createElement("div",{className:Ye.noteFilter},l.a.createElement("div",{className:Ye.noteStatus},l.a.createElement("div",{className:Ye.item},__("小记"))),l.a.createElement("div",{className:f()(Ye.filterContent,"note-list-header")},l.a.createElement("div",{className:Ye.search},D===d.FILTER_TYPES.dingTalkRobot||D===d.FILTER_TYPES.wechatRobot?null:l.a.createElement(g.a,{searchValue:s.state.searchValue,searchActive:s.state.searchActive,setSearchActive:U,onSearchReset:z,onSearchNote:G,isDesktopApp:O.isDesktopApp})),l.a.createElement("div",{className:Ye.filterBar},l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a,s),l.a.createElement("div",{id:"noteFilterBar",style:{bottom:-10}}),M&&l.a.createElement(w.a,{tip:F,containerSelector:"#noteFilterBar",placement:"bottom"}))),l.a.createElement("div",{className:f()(Ye.orderOptions,qe({},Ye.orderOptionsDisable,L||D===d.FILTER_TYPES.dingTalkRobot||D===d.FILTER_TYPES.wechatRobot))},l.a.createElement(i.a,{disabled:L,overlayClassName:"order-option-dropdown",getPopupContainer:function(e){return e.parentNode},overlay:l.a.createElement(c.a,null,l.a.createElement(c.a.Item,{onClick:function(){return B(d.ORDER_BY.content_updated_at)}},l.a.createElement("span",{className:Ye.orderChecked},V&&l.a.createElement(E.a,null)),__("更新时间排序")),l.a.createElement(c.a.Item,{onClick:function(){return B(d.ORDER_BY.first_published_at)}},l.a.createElement("span",{className:Ye.orderChecked},!V&&l.a.createElement(E.a,null)),__("创建时间排序"))),placement:"bottomRight"},l.a.createElement("span",null,l.a.createElement(j.b,{name:"note-swap",width:16})))))),R?l.a.createElement(b.a,s):q?D!==d.FILTER_TYPES.share&&l.a.createElement(v.a,{query:s.state.searchValue,onRefreshData:s.getNoteTags,data:s.state.noteTags,currentTagId:s.state.currentTagId,onSelect:function(e){return s.onSelectTag(e)},storage:k.default,webProxy:S.a}):null,l.a.createElement(r.a,{spinning:T,wrapperClassName:f()("note-list-scroll",Ye.listWrapper)},l.a.createElement("div",{className:f()(Ye.notesList,qe({},Ye.empty,a()(P)))},l.a.createElement(h.a,He({},s,{enableDynamicTaskList:!0,renderToolBar:function(e){return l.a.createElement(_.a,{item:e,onRemoveNote:s.onRemoveNote,onPublicNote:s.onPublicNote,onSelectNote:s.onSelectNote,onChangeShareStatus:s.onChangeShareStatus,setShowRepoModal:s.setShowRepoModal,setBatchProcess:s.setBatchProcess,toDocList:s.state.toDocList,setToDocList:s.setToDocList,batchProcess:s.state.batchProcess,onArchiveNotes:s.onArchiveNotes,onTagChanged:s.onTagChanged,noteTags:s.state.noteTags,orderBy:A,pinnedNote:s.pinnedNote,deletePinnedNote:s.deletePinnedNote})},renderEditor:function(e){return l.a.createElement(m.a,e)},renderResourceIcon:function(e){return l.a.createElement(x.a.Icon,{item:e,size:24})},webAppNavigate:C.a}))))),I&&(n=window.appData.me,l.a.createElement(Ve,He({},s,{currentGroup:n,currentBook:{type:"Book"}})))))};We.defaultProps={autoLayout:!1},We.propTypes={autoLayout:p.PropTypes.bool};t.a=We},,,function(e,t,n){"use strict";n(60);var r=n(24),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(261),l="index-module_messageClose_2LMjD",s=function(e){var t=e.history;return Object(o.useEffect)((function(){var e=(t&&t.location&&t.location.query||{}).resource_id;if(e){var n,o=function(){n&&n(),window.history.replaceState({},document.title,window.location.pathname)},i=a.a.createElement("span",null,__("文件已转成语雀文件，原始文件请到 {history} 中查看。",{history:a.a.createElement("a",{onClick:function(){o(),window.open("/go/resource/".concat(e,"?history=1"),"_blank")}},__("历史版本"))}),a.a.createElement("span",{className:l,onClick:o},a.a.createElement(u.a,null)));n=r.a.warning(i,0)}}),[]),null};s.propTypes={history:c.a.object};t.a=s},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(114),i="index-module_loadMore_q-GCI",c=n.n(a)()("ui:loadmore");t.a=function(e){var t=e.onLoadMore,n=e.root,a=void 0===n?null:n,u=Object(r.useRef)(null),l=null;if(e.autoload&&window.IntersectionObserver){l=new IntersectionObserver((function(t){c("[LoadMore.IntersectionObserver]isIntersecting: ",t[0].isIntersecting),t[0].isIntersecting&&(c("[LoadMore.IntersectionObserver]try loading"),e.onLoadMore())}),{root:a,threshold:1})}return Object(r.useEffect)((function(){return l&&u.current&&(c("[LoadMore.IntersectionObserver]start observe"),l.observe(u.current)),function(){l&&u.current&&(c("[LoadMore.IntersectionObserver]end observe"),l.unobserve(u.current))}})),o.a.createElement("div",{ref:u,className:i,onClick:function(){t()}},__("加载更多"))}},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(120),n(63)),a=(n(50),n(19)),i=(n(173),n(94)),c=(n(60),n(24)),u=n(0),l=n.n(u),s=n(10),f=n.n(s),d=n(263),p=n(2),m=n.n(p),h=n(109),y=n(1921),v=n(513),b=n(2257),g=n(622),_=n(34),w=n(2097),E=n(2112),O="index-module_quicklink_r3b1m",x="index-module_list_q2U-T",j="index-module_empty_9ZaVw",k="index-module_restore_XuKmF",S="index-module_quicklinkDefault_-xwzc",C="index-module_quicklinkFlat_D1ytL",N="index-module_btnAdd_pyCs2";function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(){A=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==P(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function L(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){L(a,r,o,i,c,"next",e)}function c(e){L(a,r,o,i,c,"throw",e)}i(void 0)}))}}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e){var t,n,s,p=function(e){var t=window.appData.group,n=e.refId,r=e.onEdited,o=!t||!t.id||t&&t.abilities&&t.abilities.create_book,a=R(Object(u.useState)(!1),2),i=a[0],s=a[1],f=R(Object(u.useState)(!0),2),d=f[0],p=f[1],m=R(Object(u.useState)(!1),2),h=m[0],v=m[1],b=R(Object(u.useState)([]),2),w=b[0],E=b[1],O=R(Object(u.useState)(null),2),x=O[0],j=O[1],S=Object(g.a)(t,y.LAYOUT.aside.quickLinks);function C(){return N.apply(this,arguments)}function N(){return(N=I(A().mark((function e(){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.quickLinks.find({group_id:t&&t.id,ref_id:n});case 2:r=e.sent,p(!1),E(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n){return T.apply(this,arguments)}function T(){return(T=I(A().mark((function e(r,o,a){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),r.stopPropagation(),e.next=4,_.a.quickLinks.create({type:o.type,target_type:o.target_type,target_id:o.target_id,url:o.url,title:o.title,order_num:a,group_id:t&&t.id,ref_id:n});case 4:return e.next=6,C();case 6:c.a.success(__("撤销成功"));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=I(A().mark((function e(n,r,o){var a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.next=4,_.a.quickLinks.destroy({id:r.id,group_id:t&&t.id});case 4:a=l.a.createElement("span",null,__("快捷入口删除成功"),l.a.createElement("a",{className:k,onClick:function(e){P(e,r,o),c.a.destroy()},"data-testid":"restore"},__("撤销"))),c.a.success(a,1.5),w.splice(o,1),E(w.concat());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=I(A().mark((function e(n,r){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==n.index){e.next=2;break}return e.abrupt("return");case 2:return o=w[n.index],e.next=5,_.a.quickLinks.update({id:o.id,order_num:r,group_id:t&&t.id});case 5:w.splice(n.index,1),w.splice(r,0,o),E(w.concat()),c.a.success(__("快捷入口排序成功")),setTimeout((function(){v(!1)}),200);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){C()}),[]),{state:{targetLink:x,showModal:i,loading:d,quickLinks:w,dragging:h,editable:o},onCancel:function(){j(null),s(!1)},onRemove:function(e,t,n){return L.apply(this,arguments)},onSaveName:S,onSubmit:function(){r(),C(),s(!1),c.a.success(x?__("更新快捷入口成功"):__("添加快捷入口成功")),j(null)},onUpdateLink:function(e){j(e),s(!0)},toggleModal:function(){i&&j(null),s(!i)},onDragStart:function(){v(!0)},onSort:function(e,t){return D.apply(this,arguments)}}}(e),m=p.state,h=p.onSort,v=p.onDragStart,P=p.onRemove,L=p.onUpdateLink,D=p.onSaveName,M=p.toggleModal,F=p.onSubmit,B=m.loading,U=m.dragging,z=m.quickLinks,G=m.editable,V=m.targetLink,Y=m.showModal,q=window.appData.group,H=e.noAction,W=e.refId,K=e.mode,$=e.name;if(null!==(t=window.appData)&&void 0!==t&&null!==(n=t.settings)&&void 0!==n&&n.disable_dashboard_quicklink)return null;var Q="flat"===K?l.a.createElement("a",{className:N,"data-aspm-click":"d71640",onClick:M},l.a.createElement(d.a,null)):l.a.createElement(a.a,{"data-aspm-click":"d71640",onClick:M},__("添加"));return l.a.createElement("div",{"data-aspm":"c35579"},l.a.createElement(o.a,{transparentHead:!0,title:l.a.createElement(b.a,{editable:q&&q.abilities&&q.abilities.manage,name:$||__("快捷入口"),onSubmit:D}),className:f()(O,(s={},T(s,S,"default"===K),T(s,C,"flat"===K),s)),extra:G&&Q},l.a.createElement("div",{className:x},z&&z.length?l.a.createElement(E.a,{links:z,aspmB:"d73385",onSort:h,onDragStart:v,manage:G&&!H,dragging:U,onUpdateLink:L,onRemove:P}):B?l.a.createElement(i.a,{justify:"block"}):G?l.a.createElement("p",{className:j},__("在这里 {add} 你的常用链接",{add:l.a.createElement("a",{onClick:M,"data-aspm-click":"d71640"},__("添加"))})):l.a.createElement("p",{className:j},__("暂无数据")))),l.a.createElement(r.a,{width:520,visible:Y,title:V?__("更新快捷入口"):__("添加快捷入口"),footer:null,onCancel:M,destroyOnClose:!0},l.a.createElement(w.a,{onCancel:M,onSubmit:F,data:V,refId:W})))}M.defaultProps={onEdited:function(){},refId:v.BLOCK_TYPE.quickLink,mode:"default"},M.propTypes={noAction:m.a.bool,onEdited:m.a.func,name:m.a.string,refId:m.a.string,mode:m.a.oneOf(["default","flat"])};t.a=Object(h.b)(M,!0)},,function(e,t,n){"use strict";t.a={code:{code_expired:__("验证码已失效，请重新获取"),invalid:__("输入正确的验证码"),misskey:__("验证码不能为空")}}},function(e,t){e.exports={kitchen:{text:"Kitchen",logo:"https://gw.alipayobjects.com/zos/rmsportal/LFooOLwmxGLsltmUjTAP.svg",guide:"请回到 Sketch，用 Kitchen 上传你的设计稿到语雀"},markque:{text:"Markque",logo:"https://gw.alipayobjects.com/zos/rmsportal/FvGFgAtnhXTTdFeIIOuU.png",guide:"请回到 Markque 编辑你的 Markdown 文档"}}},function(e,t,n){"use strict";var r=n(14),o=n(0),a=n(308),i=n(95),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=a.a.TimePicker,l=a.a.RangePicker,s=o.forwardRef((function(e,t){return o.createElement(l,Object(r.default)({},e,{dropdownClassName:e.popupClassName,picker:"time",mode:void 0,ref:t}))})),f=o.forwardRef((function(e,t){var n=e.addon,a=e.renderExtraFooter,l=e.popupClassName,s=c(e,["addon","renderExtraFooter","popupClassName"]),f=o.useMemo((function(){return a||(n?(Object(i.a)(!1,"TimePicker","`addon` is deprecated. Please use `renderExtraFooter` instead."),n):void 0)}),[n,a]);return o.createElement(u,Object(r.default)({},s,{dropdownClassName:l,mode:void 0,ref:t,renderExtraFooter:f}))}));f.displayName="TimePicker",f.RangePicker=s,t.a=f},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=function(e){var t=e.href,n=e.className,r=e.children,a=e.draggable;return o.a.createElement("a",{href:t,className:n,draggable:a},r)};c.defaultProps={draggable:!0},c.propTypes={href:i.a.string,className:i.a.string,draggable:i.a.bool,children:i.a.node},t.a=c},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(641),u=function(e){var t=e.mark;return Object(r.useEffect)((function(){Object(c.a)(t)}),[]),o.a.createElement("span",{style:{display:"none"}})};u.propTypes={mark:i.a.string.isRequired},t.a=u},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(60),n(24)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(34),d=n(255),p=n(174),m=n(1354),h=n(199);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){b=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&n.call(v,o)&&(m=v);var g=p.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==y(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(g),c(g,i,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function g(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t,n,r=_(Object(a.useState)([]),2),i=r[0],c=r[1],u=_(Object(a.useState)([]),2),l=u[0],s=u[1],d=_(Object(a.useState)(),2),m=d[0],h=d[1],y=_(Object(a.useState)(),2),v=y[0],w=y[1],E=_(Object(a.useState)(),2),O=E[0],x=E[1],j=_(Object(a.useState)(!1),2),k=j[0],S=j[1],C=_(Object(a.useState)(),2),N=C[0],P=C[1];return{state:{approvers:i,ccs:l,submitting:k,errorMsg:N},onError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;for(var n in e)if(e[n]){t=!0,P(e[n]);break}t||P()},onChangeApprovers:function(e){c(e)},onChangeCcs:function(e){s(e)},onChangeProductCodes:function(e){h(e)},onChangeDesc:function(e){w(e)},onChangeName:function(e){x(e)},onSubmit:(t=b().mark((function t(){var n,r,a,c,u,s;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k&&!N){t.next=2;break}return t.abrupt("return");case 2:return S(!0),n={target_type:e.targetType,target_id:e.target.id},void 0!==v&&(n.body=v),n.name=O||__("文档评审"),m&&(n.product_codes=m),i&&(window.appData.isYuque?(r=i.filter((function(e){return p.a.isDepartment(e)})),a=i.filter((function(e){return p.a.isUser(e)})),n.approver_ids=a.map((function(e){return e.user_id})),n.approver_department_ids=r.map((function(e){return e.id}))):n.approver_work_ids=i.map((function(e){return e.work_id}))),l&&(window.appData.isYuque?(c=l.filter((function(e){return p.a.isDepartment(e)})),u=l.filter((function(e){return p.a.isUser(e)})),n.cc_ids=u.map((function(e){return e.user_id})),n.cc_department_ids=c.map((function(e){return e.id}))):n.cc_work_ids=l.map((function(e){return e.work_id}))),t.prev=9,t.next=12,f.a.reviews.create(n);case 12:s=t.sent,S(!1),o.a.success(__("已成功发起评审")),e.onCreateReview(s),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(9),S(!1);case 21:case"end":return t.stop()}}),t,null,[[9,18]])})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){g(a,r,o,i,c,"next",e)}function c(e){g(a,r,o,i,c,"throw",e)}i(void 0)}))},function(){return n.apply(this,arguments)})}},O=function(e){var t,n=E(e),o=n.state,a=o.submitting,c=o.approvers,u=o.ccs,l=o.errorMsg,f=e.isMiniSize,p=c&&c.length>0&&c.length<=d.MAX_APPROVER_NUM,y=u&&u.length<=d.MAX_CC_NUM;return i.a.createElement("div",{className:s()("review-create-module",(t={},v(t,h.a.wrapper,!f),v(t,h.a.miniWrapper,f),t))},i.a.createElement("div",{className:h.a.body},i.a.createElement(m.a,{onChangeApprovers:n.onChangeApprovers,onChangeCcs:n.onChangeCcs,onChangeProductCodes:n.onChangeProductCodes,onChangeDesc:n.onChangeDesc,onChangeName:n.onChangeName,onError:n.onError,isMiniSize:f,editable:!0})),i.a.createElement("div",{className:s()(h.a.footer,h.a.footerNoBorder)},i.a.createElement("span",null,i.a.createElement(r.a,{"data-testid":"btn-submit",className:h.a.btn,type:"primary",disabled:a||!p||!y||l,onClick:n.onSubmit},__("发起评审"))),i.a.createElement(r.a,{"data-testid":"btn-cancel",className:h.a.btn,onClick:e.onCancel},__("取消"))))};O.propTypes={target:u.a.object.isRequired,targetType:u.a.oneOf(["Doc"]).isRequired,onCancel:u.a.func.isRequired,onCreateReview:u.a.func.isRequired,isMiniSize:u.a.bool},t.a=O},function(e,t,n){"use strict";n(246);var r=n(110),o=(n(96),n(23)),a=(n(50),n(19)),i=(n(60),n(24)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f=n(10),d=n.n(f),p=n(1894),m=n(255),h=n(34),y=n(321),v=n(174),b=n(1346),g=n(1347),_=n(1354),w=n(199);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){x=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==E(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function j(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){j(a,r,o,i,c,"next",e)}function c(e){j(a,r,o,i,c,"throw",e)}i(void 0)}))}}function S(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){var t,n=e.review,l=e.isMiniSize,s=e.isApprover,f=e.isHistoryReview,E=function(e){var t,n,r,o=e.review,a=C(Object(c.useState)(o.approvers?S(o.approvers):[]),2),l=a[0],s=a[1],f=C(Object(c.useState)(o.ccs?S(o.ccs):[]),2),d=f[0],p=f[1],y=C(Object(c.useState)((null==o?void 0:o.product_codes)||[]),2),b=y[0],g=y[1],_=C(Object(c.useState)(),2),w=_[0],E=_[1],O=C(Object(c.useState)(),2),j=O[0],N=O[1],P=C(Object(c.useState)(!1),2),T=P[0],A=P[1],L=C(Object(c.useState)(!1),2),I=L[0],R=L[1],D=C(Object(c.useState)(),2),M=D[0],F=D[1],B=u.a.createRef();return{state:{ccs:d,approvers:l,submitting:T,isEditing:I,errorMsg:M},infoRef:B,onError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;for(var n in e)if(e[n]){t=!0,F(e[n]);break}t||F()},onChangeApprovers:function(e){s(e)},onChangeCcs:function(e){p(e)},onChangeProductCodes:function(e){g(e)},onChangeDesc:function(e){E(e)},onChangeName:function(e){N(e)},startEdit:function(){R(!0)},cancelEdit:function(){R(!1),F(),B.current&&B.current.resetEdit()},finishEdit:(r=k(x().mark((function t(){var n,r,a,i,c,u;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!T&&!M){t.next=2;break}return t.abrupt("return");case 2:return A(!0),n={id:o.id},void 0!==w&&(n.body=w),j&&(n.name=j),l&&(window.appData.isYuque?(r=l.filter((function(e){return v.a.isDepartment(e)})),a=l.filter((function(e){return v.a.isUser(e)})),n.approver_ids=a.map((function(e){return e.user_id})),n.approver_department_ids=r.map((function(e){return e.id}))):n.approver_work_ids=l.map((function(e){return e.work_id}))),d&&(window.appData.isYuque?(i=d.filter((function(e){return v.a.isDepartment(e)})),c=d.filter((function(e){return v.a.isUser(e)})),n.cc_ids=c.map((function(e){return e.user_id})),n.cc_department_ids=i.map((function(e){return e.id}))):n.cc_work_ids=d.map((function(e){return e.work_id}))),n.product_codes=b||[],t.prev=9,t.next=12,h.a.reviews.update(n);case 12:u=t.sent,A(!1),R(!1),e.updateActiveReview(u),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(9),A(!1);case 21:case"end":return t.stop()}}),t,null,[[9,18]])}))),function(){return r.apply(this,arguments)}),onSubmitApproval:(n=k(x().mark((function t(n){var r;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!T){t.next=2;break}return t.abrupt("return");case 2:return A(!0),t.next=5,h.a.reviews.reviewTarget({id:o.id,status:n});case 5:r=t.sent,n!==m.REVIEWER_STATUS.incomplete&&i.a.success(__("已成功提交评审意见")),A(!1),e.updateActiveReview(r);case 9:case"end":return t.stop()}}),t)}))),function(e){return n.apply(this,arguments)}),onCancelReview:(t=k(x().mark((function t(n){var r;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!T){t.next=2;break}return t.abrupt("return");case 2:return A(!0),t.next=5,h.a.reviews.cancelReview({id:o.id,status:n});case 5:r=t.sent,A(!1),e.updateActiveReview(r);case 8:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}}(e),j=E.state,N=j.submitting,P=j.isEditing,T=j.ccs,A=j.approvers,L=j.errorMsg,I=A&&A.length>0&&A.length<=m.MAX_APPROVER_NUM,R=T&&T.length<=m.MAX_CC_NUM,D=!!n.approvers.find((function(e){return e.id===n.user_id})),M=!!n.approvers.find((function(e){return e.id===n.user_id&&e.isCompleted}));return u.a.createElement("div",{className:d()((t={},O(t,w.a.wrapper,!l),O(t,w.a.miniWrapper,l),O(t,w.a.miniFolding,l),t))},!P&&u.a.createElement("div",{className:w.a.header},u.a.createElement("div",{className:w.a.headerTitle},n.status!==m.STATUS.active?u.a.createElement("span",{className:w.a.headerReviewName},n.name):u.a.createElement(u.a.Fragment,null,!D&&u.a.createElement("span",{className:w.a.headerReviewName},n.name),D&&n.user&&__("{user} 邀你评审 {target}",{user:u.a.createElement(y.a,{user:n.user},u.a.createElement("a",{href:"/".concat(n.user.login)},n.user.name)),target:u.a.createElement("span",{className:w.a.headerReviewName},n.name)}),D&&n.status===m.STATUS.active&&u.a.createElement("div",{className:w.a.headerActions},!P&&u.a.createElement("a",{onClick:E.startEdit},u.a.createElement(p.a,null)," ",__("编辑")))))),u.a.createElement("div",{className:d()(w.a.body,w.a.stampWrapper)},P?u.a.createElement(_.a,{review:n,onChangeApprovers:E.onChangeApprovers,onChangeCcs:E.onChangeCcs,onChangeProductCodes:E.onChangeProductCodes,onChangeDesc:E.onChangeDesc,onChangeName:E.onChangeName,onError:E.onError,editable:P,isMiniSize:l,ref:E.infoRef,isApprover:s}):u.a.createElement(b.a,{isHistoryReview:f,review:n,isMiniSize:l,isApprover:s,onSubmitApproval:E.onSubmitApproval}),u.a.createElement(g.a,{review:n})),!f&&n.status===m.STATUS.active&&u.a.createElement(u.a.Fragment,null,P?u.a.createElement("div",{className:d()(w.a.footer,w.a.footerNoBorder)},u.a.createElement(o.a,{placement:"top",title:L,className:L?w.a.tooltip:{}},u.a.createElement(a.a,{onClick:E.finishEdit,disabled:N||!I||!R||L,type:"primary",className:w.a.btn},__("完成"))),u.a.createElement(a.a,{onClick:E.cancelEdit,disabled:N},__("取消"))):u.a.createElement("div",{className:d()(w.a.footer,w.a.footerNoBorder)},D?u.a.createElement(u.a.Fragment,null,M?u.a.createElement(a.a,{disabled:N,onClick:function(){return E.onSubmitApproval(m.REVIEWER_STATUS.incomplete)},className:d()(w.a.btn,w.a.whiteBtn)},__("重新投票")):null):u.a.createElement(a.a,{disabled:N,type:"primary",className:w.a.btn,onClick:E.startEdit},__("编辑评审")),u.a.createElement(r.a,{title:__("确认取消评审？"),onConfirm:function(){E.onCancelReview(m.STATUS.cancelled)}},u.a.createElement(a.a,{disabled:N,className:d()(w.a.btn,w.a.whiteBtn)},__("取消评审"))))))};T.propTypes={review:s.a.object.isRequired,isMiniSize:s.a.bool,isHistoryReview:s.a.bool,updateActiveReview:s.a.func,isApprover:s.a.bool},t.a=T},function(e,t,n){"use strict";n(50);var r=n(19),o=(n(60),n(24)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(10),s=n.n(l),f=n(109),d=n(321),p=n(255),m=n(34),h=n(1346),y=n(1347),v=n(199);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(){_=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new j(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(k([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==b(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new w(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function w(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t,n,r=e.review,i=e.updateActiveReview,c=E(Object(a.useState)(!1),2),u=c[0],l=c[1];return{state:{submitting:u},onSubmitApproval:(t=_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,m.a.reviews.reviewTarget({id:r.id,status:t});case 3:n=e.sent,t!==p.REVIEWER_STATUS.incomplete&&o.a.success(__("已成功提交评审意见")),l(!1),i(n);case 7:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))},function(e){return n.apply(this,arguments)})}};function j(e){var t,n=x(e),o=e.review,a=e.isApprover,c=window.appData.me,u=(o.approvers.find((function(e){return e.id===c.id}))||{}).isCompleted;return i.a.createElement("div",{className:s()(v.a.wrapper,v.a.handleWrapper,(t={},g(t,v.a.wrapper,!window.h5),g(t,v.a.miniWrapper,window.h5),t))},i.a.createElement("div",{className:v.a.header},i.a.createElement("div",{className:v.a.headerTitle},o.status!==p.STATUS.active?i.a.createElement("span",{className:v.a.headerReviewName},o.name):i.a.createElement(i.a.Fragment,null,!a&&i.a.createElement("span",{className:v.a.headerReviewName},o.name),a&&o.user&&o.status===p.STATUS.active&&__("{user} 邀你评审 {target}",{user:i.a.createElement(d.a,{user:o.user},i.a.createElement("a",{href:"/".concat(o.user.login)},o.user.name)),target:i.a.createElement("span",{className:v.a.headerReviewName},o.name)})))),i.a.createElement(h.a,{review:o,isApprover:a,onSubmitApproval:n.onSubmitApproval}),u&&a&&o.status===p.STATUS.active&&i.a.createElement("div",{className:s()(v.a.footer,v.a.footerNoBorder)},i.a.createElement(r.a,{disabled:n.state.submitting,onClick:function(){return n.onSubmitApproval(p.REVIEWER_STATUS.incomplete)},className:s()(v.a.btn,v.a.whiteBtn,v.a.fullBtn)},__("重新投票"))),i.a.createElement(y.a,{review:o}))}j.propTypes={review:u.a.object,isApprover:u.a.bool},t.a=Object(f.b)(j,!0)},function(e,t,n){"use strict";n.r(t),n.d(t,"PresentationRender",(function(){return u}));var r=n(1307),o=n(589),a=r.a.componentRegistry,i=r.a.LakexViewerName,c=r.a.PresentationOverlay,u=r.a.PresentationRender;a.registerComponent(i,o.a),t.default=c},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(370),u=n(10),l=n.n(u),s=n(127),f=n(2071);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(i,e);var t,n,r,a=y(i);function i(){var e;p(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(b(e=a.call.apply(a,[this].concat(n))),"state",{list:[],loading:!1}),_(b(e),"handleSearch",(function(t){e.q=t.target.value,e.timer||(e.timer=setTimeout((function(){e.props.getCreators({q:e.q}).then((function(t){e.setState({list:t}),e.timer=null}))}),100))})),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.getCreators().then((function(t){return e.setState({list:t})}))}},{key:"render",value:function(){var e=this,t=this.props.selectedItems;return o.a.createElement("div",{className:"meta-box"},o.a.createElement(f.a,{loading:this.state.loading,originData:this.state.list,list:this.state.list,searchPlaceholder:__("搜索创建者"),handleSearch:this.handleSearch,renderItem:function(n,r){var a=t.findIndex((function(e){return!(!e||!e.id)&&e.id===n.id}))>=0,i=l()("meta-list-item",{selected:a});return o.a.createElement("div",{onClick:function(){a?e.props.unSelect(n):e.props.onSelect(n)},className:i},o.a.createElement("span",null,o.a.createElement(s.a,{className:"avatar",src:n.avatar_url,size:20}),o.a.createElement("span",{className:"member-name",title:n.name},n.name)),a&&o.a.createElement(c.a,null))},emptyView:__("暂无数据")}),o.a.createElement("div",{className:"meta-box-footer clearfix"},o.a.createElement("span",{className:"btn-clearup",onClick:this.props.clearSelection},o.a.createElement("span",null,__("清除选择")))))}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);w.propTypes={selectedItems:i.a.array.isRequired,onSelect:i.a.func.isRequired,unSelect:i.a.func.isRequired,getCreators:i.a.func.isRequired,clearSelection:i.a.func.isRequired},t.a=w},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r={createDoc:"createDoc",search:"search",docReaderMore:"docReaderMore",webPageMore:"webPageMore",docOutline:"docOutline",deliveryEvent:"deliveryEvent"},o={share:"share",copyLink:"copyLink",refresh:"refresh",openInSystem:"openInSystem",bookSetting:"bookSetting"}},function(e,t,n){"use strict";n(584);var r=n(283),o=n(0),a=n.n(o),i=n(1252),c=n.n(i),u=n(2),l=n.n(u),s=n(10),f=n.n(s),d=(n(922),n(427)),p="index-module_popMenu_zAYDV",m="index-module_menu_ZngKw",h="index-module_item_8DE06",y="index-module_cancel_nMc+D";function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=e.menuItems;return a.a.createElement("div",{className:f()(m,"pop-menu")},t.map((function(t,n){return a.a.createElement("div",{className:f()(h,t.className),key:n,onClick:function(n){t.onClick&&(e.toggleModal(),t.onClick())}},t.name)})),a.a.createElement("div",{className:y,onClick:function(){e.toggleModal()}},__("取消")))},w=function(e){var t=function(){var e=b(Object(o.useState)(!1),2),t=e[0],n=e[1];return{state:{showModal:t},onShowModal:function(){n(!0)},toggleModal:function(){setTimeout((function(){n(!1)}),16)}}}(),n=t.state.showModal,r=t.onShowModal,i=t.toggleModal;return a.a.createElement("div",{onClick:r},e.children,a.a.createElement(d.a,{popup:!0,visible:n,onClose:i,animationType:"slide-up",className:p,maskClosable:!0},a.a.createElement(_,v({},e,{toggleModal:i}))))};w.propsType={menuItems:l.a.array};var E=w,O=n(389),x="index-module_header_OQjrZ",j="index-module_back_8l-eV",k="index-module_title_ez20L",S=function(e){var t=e.onBack,n=e.title;return a.a.createElement("div",{className:x},t&&a.a.createElement("div",{className:j,onClick:t},a.a.createElement(O.a,null)),a.a.createElement("div",{className:k},n))};S.propTypes={title:l.a.string,onBack:l.a.func};var C=S,N="index-module_layoutWrapper_Heypa",P="index-module_layoutWrapperAndroid_Ea+i7";var T=__("语雀"),A=function(e){var t,n,i,u,l,s=e.title,d=e.onTitleClick,p=e.className;return Object(o.useEffect)((function(){var t,n;null===(t=window.yqWebApp)||void 0===t||null===(n=t.setTitle)||void 0===n||n.call(t,e.title||T)}),[]),a.a.createElement(c.a,{title:s},a.a.createElement(r.a,{autoInsertSpaceInButton:!1},a.a.createElement("div",{className:f()(N,(i={},u=P,l=null===(t=window.yqWebApp)||void 0===t?void 0:t.isAndroid,u in i?Object.defineProperty(i,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[u]=l,i),p),id:"layout-wrapper",onClick:d},!(null!==(n=window.yqWebApp)&&void 0!==n&&n.isWebApp)&&a.a.createElement(C,{title:s,onBack:e.onBack}),e.children),a.a.createElement(E,{menuItems:[{name:__("关于"),onClick:function(){window.yqWebApp.goToAbout()}},{name:__("分享"),onClick:function(){window.yqWebApp.shareApp()}},{name:__("反馈"),onClick:function(){window.yqWebApp.goToFeedBack()}}]},a.a.createElement("span",{id:"global-option-menu-button",style:{display:"none"}}))))};A.defaultProps={title:T,className:""},A.propTypes={title:l.a.string,className:l.a.string,onBack:l.a.func};t.a=A},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(10),i=n.n(a),c=n(346),u=n(38),l=n(127),s=n(321),f=n(186),d=n(2084),p=n(1469),m="NoteFeed-module_note_sRsMI",h="NoteFeed-module_descMore_gEiMT",y="NoteFeed-module_descMoreIcon_SZ+3-";function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g="DocFeed-module_doc_H0Mvc",_="DocFeed-module_detail_arwEf",w="DocFeed-module_cover_8-AkA",E="DocFeed-module_title_1RpjJ",O="DocFeed-module_desc_L-DM2",x=function(e){var t=e.subject,n=e.url,r=t.custom_cover||t.cover||"",a=t.custom_description||t.description||"";return o.a.createElement("div",{className:g},o.a.createElement("div",{className:_},o.a.createElement("div",null,o.a.createElement("a",{href:n,target:"_blank",className:E},t.title)),o.a.createElement("div",{className:O},a)),r&&o.a.createElement("a",{className:w,href:n,target:"_blank",style:{backgroundImage:'url("'.concat(r,'")')}}))},j="Feed-module_feed_hyrAF",k="Feed-module_aside_n2G-2",S="Feed-module_main_58zyF",C="Feed-module_last_cr8J6",N="Feed-module_invalid_XPMbd",P="Feed-module_meta_Mype9",T="Feed-module_uname_srr3b",A="Feed-module_unameAndOther_KyCWL",L="Feed-module_otherUname_Sm1HS",I="Feed-module_etc_ksa6K",R="Feed-module_time_WJjFg",D="Feed-module_timeAndOther_HpIDS",M="Feed-module_behavior_2-muv",F="Feed-module_extra_htQdI",B="Feed-module_source_wskkG",U="Feed-module_likeTargetActor_fdghf";function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G={recommend_doc:x,share_doc_to_home:x,share_note_to_home:function(e){var t=e.subject,n=v(Object(r.useState)(__("展开")),2),a=n[0],i=n[1],c=v(Object(r.useState)("down"),2),l=c[0],s=c[1],f=v(Object(r.useState)(t.description),2),d=f[0],b=f[1],g=v(Object(r.useState)("".concat(t.id,"-description")),2),_=g[0],w=g[1],E=Object(r.useRef)(null),O=Object(r.useRef)();return o.a.createElement("div",{className:m},o.a.createElement(p.a,{docId:t.doclet_id,key:_,content:d,dynamicData:t.doc_dynamic_data}),t.description.indexOf("\x3c!-- note-viewmore --\x3e")>-1&&o.a.createElement("span",{ref:E,className:h,onClick:function(){"down"===l?(b(t.doclet.body_asl),s("arrow-up"),i(__("收起")),w("".concat(t.id,"-body_asl"))):(E.current&&(O.current=E.current.getBoundingClientRect().bottom),b(t.description),s("down"),i(__("展开")),w("".concat(t.id,"-description")),setTimeout((function(){E.current&&E.current.scrollIntoView(),window.scrollTo(window.scrollX,function(e){for(var t=0;e&&"BODY"!==e.tagName;)t+=e.offsetTop,e=e.offsetParent;return t}(E.current)-O.current),O.current=0}),16))}},a,o.a.createElement(u.b,{name:l,size:14,className:y})))},like_doc:x};t.a=function(e){var t=e.event,n=e.withActor,r=e.avatarSize,a=void 0===r?28:r,p=e.isLast,m=void 0!==p&&p,h=t.event_type,y=t.actor,v=t.subject,b=G[h];if(!b)return null;var g=function(e){var t=e.event_type,n=e.subject,r="";return n?("share_doc_to_home"===t||"like_doc"===t?r="/go/doc/".concat(n.id):"share_note_to_home"===t?r="/r/notes/share/".concat(n.slug):"recommend_doc"===t&&(r="/go/doc/".concat(n.id)),r):r}(t),_=y.otherActor;return o.a.createElement(c.a,null,o.a.createElement("div",{className:i()(j,m?C:"")},n&&o.a.createElement("div",{className:k},y&&o.a.createElement("a",{href:"/".concat(y.login),target:"_blank"},o.a.createElement(s.a,{user:y},o.a.createElement(l.a,{src:y.avatar_url,size:a,name:y.name})))),o.a.createElement("div",{className:S},o.a.createElement("div",{className:P},n&&o.a.createElement("a",{className:i()(T,z({},A,_&&_.length)),href:"/".concat(y.login),target:"_blank"},_&&_.length>0?"".concat(y.name,"、"):y.name),_&&_.slice(0,2).map((function(e,t){return o.a.createElement("span",{className:L,onClick:function(){window.open("/"+e.login)}},_.length>1&&0===t?"".concat(e.name,"、"):e.name)})),_&&(null==_?void 0:_.length)>2&&o.a.createElement("span",{className:I},__("等")),o.a.createElement(f.a,{className:i()(R,z({},D,_&&_.length)),time:t.updated_at}),["share_doc_to_home","share_note_to_home","like_doc"].includes(t.event_type)&&o.a.createElement("span",{className:M},"like_doc"===t.event_type?__("点赞了"):__("分享了"))),t.isBan||!v?o.a.createElement("div",{className:N},o.a.createElement(u.b,{name:"unlink",size:16}),o.a.createElement("span",null,__("该内容已失效"))):o.a.createElement(o.a.Fragment,null,o.a.createElement(b,{subject:v,url:g}),o.a.createElement("div",{className:F},o.a.createElement(d.a,{type:t.subject_type,me:window.appData.me,targetId:v.id,simplify:!0,likeCount:v.likes_count,size:"mini",likeStatus:v.liked,scene:"single"}),o.a.createElement("a",{className:B,href:g,target:"_blank"},o.a.createElement(u.b,{name:"next-page",size:16}),__("查看原文")),"like_doc"===h&&o.a.createElement("p",{className:U}," ",__("作者"),"：",o.a.createElement("a",{href:"/"+t.actor_login,target:"_blank"},t.actor_name)))))))}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(150),i=n.n(a),c=n(34),u=n(1102),l=n(259),s=n(343);function f(e,t){var n=Object(r.useRef)({}).current;return function(){n.timer&&clearTimeout(n.timer);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];n.timer=setTimeout(e.bind.apply(e,[void 0].concat(o)),t)}}var d=n(39),p=n.n(d),m=n(2024),h=n(2),y=n.n(h),v=n(256);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=e.message,n=e.rightText,a=e.onClick,i=b(Object(r.useState)(!0),2),c=i[0],u=i[1],l=Object(r.useRef)(),s=function(){null==a||a(),u(!1)};return Object(r.useEffect)((function(){return c&&(l.current=setTimeout((function(){u(!1)}),3e3)),function(){null!=l&&l.current&&clearTimeout(l.current)}}),[]),c?o.a.createElement(m.Spring,{from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"},config:{duration:200}},(function(e){return o.a.createElement("div",{className:v.a.noteToast},o.a.createElement("div",{className:v.a.text},t),n&&o.a.createElement("div",{className:v.a.rightText,onClick:s},n))})):null};_.propTypes={message:y.a.string,rightText:y.a.string,onClick:y.a.func};function w(e){var t=p.a.createPortal(o.a.createElement(_,e),document.getElementById("ReactApp"));p.a.render(t,document.createDocumentFragment())}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(){S=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(j([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==E(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function C(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,c,"next",e)}function c(e){C(a,r,o,i,c,"throw",e)}i(void 0)}))}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=P(Object(r.useState)(l.TYPE.note),2),n=t[0],o=t[1],a=P(Object(r.useState)(null),2),d=a[0],p=a[1],m=P(Object(r.useState)(!1),2),h=m[0],y=m[1],v=P(Object(r.useState)(s.b),2),b=v[0],g=v[1],_=P(Object(r.useState)(s.c),2),E=_[0],O=_[1],j=P(Object(r.useState)([]),2),C=j[0],T=j[1],A=P(Object(r.useState)(!1),2),L=A[0],I=A[1],R=[];if(e.useFirstPageStorage){var D=localStorage.getItem(s.i);if(D)try{R=JSON.parse(D)}catch(le){}}var M=P(Object(r.useState)(R),2),F=M[0],B=M[1],U=P(Object(r.useState)(!0),2),z=U[0],G=U[1],V=P(Object(r.useState)(!0),2),Y=V[0],q=V[1],H=P(Object(r.useState)([]),2),W=H[0],K=H[1],$=Object(r.useCallback)((function(e){return e===l.TYPE.todo?E:b}),[b,E]),Q=function(e){return e.type===l.TYPE.todo?O(e):g(e)},X=function(){var e=N(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(s.j))try{t=JSON.parse(t),T(t||[]),I(!0)}catch(le){}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=N(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:n=Array.from(new Set([t].concat(k(C)))).slice(0,10),localStorage.setItem(s.j,JSON.stringify(n)),T(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=N(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem(s.j),T([]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=Object(r.useCallback)(function(){var e=N(S().mark((function e(t){var r,o,a,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(d),r=x({offset:"number"==typeof t?t:F.length,q:d,type:n,merge_dynamic_data:0},$(n)),e.prev=2,e.next=5,c.a.notes.find(r,{useOriginResp:!0});case 5:o=e.sent,a=o.data,u=o.meta,q(u.hasMore),0===r.offset?(localStorage.setItem(s.i,JSON.stringify(a)),B(a)):B(i()([].concat(k(F),k(a)),"id"));case 10:return e.prev=10,G(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[2,,10,13]])})));return function(t){return e.apply(this,arguments)}}(),[F,d,n,b,E,$]),te=f(ee,500),ne=function(){var e=N(S().mark((function e(){var t,r,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$(n),r=t.status,e.next=3,c.a.tagMaps.count({target_type:u.TARGET_TYPE.Note,target_status:r,filter_type:"all"});case 3:(o=e.sent)&&K(o);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=f(ne,500),oe=Object(r.useCallback)(N(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(0);case 2:return e.next=4,ne();case 4:case"end":return e.stop()}}),e)}))),[ee,ne]),ae=Object(r.useCallback)((function(e,t){var r,o=k(F),a=F.filter((function(t){return t.id!==e}));(B(k(a)),"unarchive"!==(null==t?void 0:t.type))?"archive"!==(null==t?void 0:t.type)?"remove"===(null==t?void 0:t.type)&&t.recycleId&&w({message:n===l.TYPE.todo?__("1 篇待办已删除"):__("1 篇小记已删除"),rightText:__("撤销"),onClick:(r=N(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.mine.restore({id:t.recycleId},{});case 2:B(o);case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}):w({message:__("1 篇小记已归档"),rightText:__("去查看"),onClick:function(){Q(x(x({},s.b),{},{status:l.STATUS.archived}))}}):w({message:__("1 篇小记已取消归档"),rightText:__("去查看"),onClick:function(){Q(x(x({},s.b),{},{status:l.STATUS.unarchived}))}})}),[F,n]),ie=Object(r.useCallback)(function(){var e=N(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=F.map((function(e){return e.id===t.id?t:e})),e.next=3,ne();case 3:B(k(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[F]),ce=Object(r.useMemo)((function(){var e=$(n),t=e.tag,r=e.status;return!!t||r!==l.STATUS.unarchived&&r!==l.STATUS.unReady}),[n,$]);Object(r.useEffect)((function(){ee(0),ne()}),[n,$]),Object(r.useEffect)((function(){d?(G(!0),te(0),re()):B([])}),[d]);var ue=$(n);return{state:{noteType:n,searchValue:d,showHistory:L,searchHistory:C,showFilter:h,listData:F,listLoading:z,hasMore:Y,noteTags:W,queryParams:ue,isFilterActive:ce},onChangeNoteType:function(e){e!==n&&(o(e),G(!0),B([]))},onSearch:function(){var e,t="/r/alipay_mini_app/nebula/note/search";null!==(e=window.yqWebApp)&&void 0!==e&&e.isWebApp?window.yqWebApp.history.replace(t):window.location.href=t},getNotes:ee,load:oe,onPublishSuccess:ie,onChangeSearchValue:function(e){p(e),e||B([])},onRemoveNote:ae,onClearFilter:function(){return n===l.TYPE.todo?g(s.c):g(s.b)},getNoteTags:ne,setShowFilter:y,setSearchValue:p,getQueryParams:$,setQueryParams:Q,loadSearchHistory:X,addHistory:J,onClearHistory:Z}}},function(e,t,n){"use strict";n(972);var r=n(653),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(88),l=n(1135),s=n(1914),f=n(38),d=n(1273),p=(n(173),n(94)),m=n(32),h=n.n(m),y=n(4051),v=n(1062),b=n(665),g=n(34),_={versionList:"index-module_versionList_BXccR",versionListItem:"index-module_versionListItem_M9iZI",author:"index-module_author_pBnbO",authorName:"index-module_authorName_oRRN-",btnDownload:"index-module_btnDownload_BwYgt",actionItem:"index-module_actionItem_raRSM",versionListItemName:"index-module_versionListItemName_QAnhV"};function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.resource,n=e.doc,r=w(Object(o.useState)(!1),2),i=r[0],c=r[1],u=w(Object(o.useState)([]),2),f=u[0],d=u[1],m=w(Object(o.useState)(!1),2),E=m[0],O=m[1];if(Object(o.useEffect)((function(){c(!0),g.a.resources.versions({id:t.id}).then((function(e){c(!1),d(e)}))}),[t]),i)return a.a.createElement(p.a,{justify:"block"});var x=t.abilities&&t.abilities.download;return a.a.createElement("ul",{className:_.versionList,"data-testid":"test-resoruce-version-list"},f.map((function(e){e.type="file";var t=Object(l.getResourceName)(e),r=Object(s.a)(e);return a.a.createElement("li",{key:e.id,className:_.versionListItem},a.a.createElement("div",null,a.a.createElement("h6",{className:_.versionListItemName},t),a.a.createElement("span",{className:_.time},a.a.createElement("span",null,h()(e.created_at).format("YYYY-MM-DD HH:mm")),a.a.createElement("span",{className:_.author},__("{name} 上传",{name:a.a.createElement("span",{className:_.authorName},e.user&&e.user.name)})))),x&&(r?a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:_.actionItem,"data-testid":"resource-list-actions-export-".concat(e.id),onClick:function(){return O(!0)}},a.a.createElement(y.a,null)),E&&a.a.createElement(b.a,{doc:n,bookId:n.book_id,onCancel:function(){return O(!1)}})):a.a.createElement("a",{title:__("下载{name}",{name:t}),className:_.btnDownload,download:t,href:"/r/resources/download/".concat(e.id,"?type=version"),"data-testid":"resource-sidebar-version-download-".concat(e.id)},a.a.createElement(v.a,null))))})))};O.propTypes={resource:c.a.object.isRequired,doc:c.a.object};var x=Object(u.d)((function(e){return{doc:e.doc}}))(O),j=n(445),k=n.n(j),S=n(2211),C="Resource-module_info_hzsyM",N="Resource-module_label_S-p0b",P="Resource-module_wrapper_is737";function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enableComment,o=void 0===n||n,i=t.withAreaSelection,c=[{key:"info",icon:a.a.createElement("span",{className:"larkicon larkicon-info"}),title:Object(l.getResourceName)(e),content:a.a.createElement("div",{className:C},a.a.createElement("p",null,a.a.createElement("span",{className:"larkicon larkicon-user"}),a.a.createElement("span",{className:N},__("最近更新：")," "),a.a.createElement("span",null,e.user&&e.user.name)),a.a.createElement("p",null,a.a.createElement("span",{className:"larkicon larkicon-clock"}),a.a.createElement("span",{className:N},__("更新于：")," "),a.a.createElement("span",null,k.a.format(e.updated_at,{full:!0}))),a.a.createElement("p",null,a.a.createElement("span",{className:"larkicon larkicon-comments"}),a.a.createElement("span",{className:N},__("评论：")," "),a.a.createElement("span",{className:"item-text"},e.comments_count||0)))}];if(o){var u=a.a.createElement("span",{"data-testid":"icon-comment"},a.a.createElement(f.b,{name:"comment-timeline",size:16}));c.push({key:"comment",title:__("评论"),icon:e.comments_count>0?a.a.createElement(r.a,{dot:!0},u):u,content:a.a.createElement(d.a,{commentableType:"Resource",target:e,useMiniGuide:!0,withAreaSelection:i,size:"mini"})})}return c.push({key:"version",title:__("历史版本"),icon:a.a.createElement("span",{className:"larkicon larkicon-clock"}),content:a.a.createElement(x,{resource:e})}),c}function A(e){var t=e.resource,n=e.review,r=e.enableComment,o=void 0===r||r,i=e.isOpenHistory,c=e.page,u=Object(s.c)(t),l=i?"version":"";return n&&n.showCreateReviewDrawer&&(l="comment"),a.a.createElement(S.a,{className:P,initTab:l,tabs:T(t,{enableComment:o,withAreaSelection:u}),type:"Resource",page:c,withAreaSelection:u})}A.propTypes={resource:c.a.object.isRequired,enableComment:c.a.bool,isOpenHistory:c.a.bool,page:c.a.number,review:c.a.object};t.a=Object(u.d)((function(e){return{review:e.review}}))(A)},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(18),o=n(28),a=n(41),i=n(0),c=n(10),u=n.n(c),l=n(197),s=n(405),f=n(95),d=n(257),p=n(14);function m(e){return null!=e}var h=function(e){var t,n=e.itemPrefixCls,o=e.component,a=e.span,c=e.className,l=e.style,s=e.labelStyle,f=e.contentStyle,d=e.bordered,p=e.label,h=e.content,y=e.colon,v=o;return d?i.createElement(v,{className:u()((t={},Object(r.a)(t,"".concat(n,"-item-label"),m(p)),Object(r.a)(t,"".concat(n,"-item-content"),m(h)),t),c),style:l,colSpan:a},m(p)&&i.createElement("span",{style:s},p),m(h)&&i.createElement("span",{style:f},h)):i.createElement(v,{className:u()("".concat(n,"-item"),c),style:l,colSpan:a},i.createElement("div",{className:"".concat(n,"-item-container")},p&&i.createElement("span",{className:u()("".concat(n,"-item-label"),Object(r.a)({},"".concat(n,"-item-no-colon"),!y)),style:s},p),h&&i.createElement("span",{className:u()("".concat(n,"-item-content")),style:f},h)))};function y(e,t,n){var r=t.colon,o=t.prefixCls,a=t.bordered,c=n.component,u=n.type,l=n.showLabel,s=n.showContent,f=n.labelStyle,d=n.contentStyle;return e.map((function(e,t){var n=e.props,m=n.label,y=n.children,v=n.prefixCls,b=void 0===v?o:v,g=n.className,_=n.style,w=n.labelStyle,E=n.contentStyle,O=n.span,x=void 0===O?1:O,j=e.key;return"string"==typeof c?i.createElement(h,{key:"".concat(u,"-").concat(j||t),className:g,style:_,labelStyle:Object(p.default)(Object(p.default)({},f),w),contentStyle:Object(p.default)(Object(p.default)({},d),E),span:x,colon:r,component:c,itemPrefixCls:b,bordered:a,label:l?m:null,content:s?y:null}):[i.createElement(h,{key:"label-".concat(j||t),className:g,style:Object(p.default)(Object(p.default)(Object(p.default)({},f),_),w),span:1,colon:r,component:c[0],itemPrefixCls:b,bordered:a,label:m}),i.createElement(h,{key:"content-".concat(j||t),className:g,style:Object(p.default)(Object(p.default)(Object(p.default)({},d),_),E),span:2*x-1,component:c[1],itemPrefixCls:b,bordered:a,content:y})]}))}var v=function(e){var t=i.useContext(_),n=e.prefixCls,r=e.vertical,o=e.row,a=e.index,c=e.bordered;return r?i.createElement(i.Fragment,null,i.createElement("tr",{key:"label-".concat(a),className:"".concat(n,"-row")},y(o,e,Object(p.default)({component:"th",type:"label",showLabel:!0},t))),i.createElement("tr",{key:"content-".concat(a),className:"".concat(n,"-row")},y(o,e,Object(p.default)({component:"td",type:"content",showContent:!0},t)))):i.createElement("tr",{key:a,className:"".concat(n,"-row")},y(o,e,Object(p.default)({component:c?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},b=function(e){return e.children},g=n(118),_=i.createContext({}),w={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function E(e,t,n){var r=e;return(void 0===t||t>n)&&(r=Object(g.a)(e,{span:n}),Object(f.a)(void 0===t,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),r}function O(e){var t,n=e.prefixCls,c=e.title,f=e.extra,p=e.column,m=void 0===p?w:p,h=e.colon,y=void 0===h||h,b=e.bordered,g=e.layout,O=e.children,x=e.className,j=e.style,k=e.size,S=e.labelStyle,C=e.contentStyle,N=i.useContext(d.b),P=N.getPrefixCls,T=N.direction,A=P("descriptions",n),L=i.useState({}),I=Object(o.a)(L,2),R=I[0],D=I[1],M=function(e,t){if("number"==typeof e)return e;if("object"===Object(a.a)(e))for(var n=0;n<s.b.length;n++){var r=s.b[n];if(t[r]&&void 0!==e[r])return e[r]||w[r]}return 3}(m,R);i.useEffect((function(){var e=s.a.subscribe((function(e){"object"===Object(a.a)(m)&&D(e)}));return function(){s.a.unsubscribe(e)}}),[]);var F=function(e,t){var n=Object(l.a)(e).filter((function(e){return e})),r=[],o=[],a=t;return n.forEach((function(e,i){var c,u=null===(c=e.props)||void 0===c?void 0:c.span,l=u||1;if(i===n.length-1)return o.push(E(e,u,a)),void r.push(o);l<a?(a-=l,o.push(e)):(o.push(E(e,l,a)),r.push(o),a=t,o=[])})),r}(O,M);return i.createElement(_.Provider,{value:{labelStyle:S,contentStyle:C}},i.createElement("div",{className:u()(A,(t={},Object(r.a)(t,"".concat(A,"-").concat(k),k&&"default"!==k),Object(r.a)(t,"".concat(A,"-bordered"),!!b),Object(r.a)(t,"".concat(A,"-rtl"),"rtl"===T),t),x),style:j},(c||f)&&i.createElement("div",{className:"".concat(A,"-header")},c&&i.createElement("div",{className:"".concat(A,"-title")},c),f&&i.createElement("div",{className:"".concat(A,"-extra")},f)),i.createElement("div",{className:"".concat(A,"-view")},i.createElement("table",null,i.createElement("tbody",null,F.map((function(e,t){return i.createElement(v,{key:t,index:t,colon:y,prefixCls:A,vertical:"vertical"===g,bordered:b,row:e})})))))))}O.Item=b;t.b=O},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(10),i=n.n(a),c=n(2),u=n.n(c),l=(n(96),n(23)),s=n(69),f=n.n(s),d=n(254),p=n(210),m="list-module_wrapper_5x9OY",h="list-module_hideMore_jam7b",y="list-module_expand_7MOyB",v="list-module_list_jO-VD",b="list-module_addTag_lTYbW",g="list-module_rightSide_xad0I",_="list-module_item_N2-pI",w="list-module_isMobile_qgbG-",E="list-module_delete_oXMtx",O="list-module_active_wfxxv",x="list-module_canSelect_OChsB",j="list-module_name_KQZhV",k="list-module_count_VSBGT",S="list-module_expandBtn_+QxK2",C="list-module_expanded_nAMFx",N="list-module_icon_ZKZ18";function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e){var t,n=e.data,a=e.onDelete,c=e.renderFirstItem,u=e.showCount,s=e.hideMore,A=e.storageKey,L=e.localStorage,I=e.currentTagId,R=e.onSelect,D=e.isMobile,M=e.renderRightSide,F=!1;A&&L&&L.get(A)&&(F=!0);var B=T(Object(r.useState)(F),2),U=B[0],z=B[1],G=T(Object(r.useState)(!1),2),V=G[0],Y=G[1],q=Object(r.useRef)(),H=function(){if(s&&q&&q.current){var e=q.current.children;if(!e||e.length<=2)Y(!1);else{var t=e[1],n=e[e.length-1],r=t.getBoundingClientRect().top!==n.getBoundingClientRect().top;Y(r)}}};Object(r.useEffect)((function(){H()}),[n]),Object(r.useEffect)((function(){L&&A&&(U?L.set(A,"true"):L.remove(A))}),[U]),Object(r.useEffect)((function(){var e=f()(H,200);return s&&window.addEventListener("resize",e,!1),function(){window.removeEventListener("resize",e,!1)}}),[]);return o.a.createElement("div",{"data-testid":"note-tag-list-wrapper",className:i()(m,(t={},P(t,y,U),P(t,h,s),t),"note-tag-list")},o.a.createElement("div",{className:v,ref:q,onMouseDown:function(e){D&&e.preventDefault()}},c&&o.a.createElement("div",{className:b},c()),M||V?o.a.createElement("div",{className:g},V&&o.a.createElement("div",{className:i()(S,"tag-list-expand",P({},C,U)),onClick:function(e){e.stopPropagation(),z(!U)},onMouseDown:function(e){D&&e.preventDefault()}},o.a.createElement(d.a,{className:N})),M&&M()):null,n.map((function(e){var t,n,r,c=null===(t=e.tag_meta)||void 0===t?void 0:t.name;if(!c)return null;var s=c.length>20,f=s?"".concat(c.slice(0,20),"..."):c,d=I===e.tag_meta.id;return o.a.createElement(l.a,{title:s?c:null},o.a.createElement("div",{"data-testid":"note-tag-list-item",className:i()(_,(n={},P(n,O,d),P(n,x,!!R),P(n,w,D),n)),key:null===(r=e.tag_meta)||void 0===r?void 0:r.name,onClick:function(){R&&R(e.tag_meta.id)}},o.a.createElement("span",{className:j},f),function(e){return u&&void 0!==e.count?o.a.createElement("span",{className:k},"(",e.count,")"):null}(e),a&&o.a.createElement("span",{"data-testid":"note-tag-list-delete",className:i()(E,P({},w,D)),onClick:function(){return a(e)}},o.a.createElement(p.IconClose,null))))}))))}L.propTypes={data:u.a.array.isRequired,onSelect:u.a.func,onDelete:u.a.func,renderFirstItem:u.a.func,showCount:u.a.bool,hideMore:u.a.bool,storageKey:u.a.string,localStorage:u.a.object,currentTagId:u.a.number,isMobile:u.a.bool,renderRightSide:u.a.func};var I=L,R="tag-list-module_wrapper_JoprB",D="tag-list-module_noteTagListBlank_tSqxS";function M(e){return o.a.createElement("div",{className:i()(R,(t={},n=D,r=!e.tags||0===e.tags.length,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))},o.a.createElement(I,{onDelete:e.onDeleteTag,data:e.tags,hideMore:!0,isMobile:!0}));var t,n,r}M.propTypes={onDeleteTag:u.a.func,tags:u.a.array};t.a=M},function(e,t,n){"use strict";n(79);var r=n(44),o=(n(50),n(19)),a=(n(96),n(23)),i=(n(60),n(24)),c=n(0),u=n.n(c),l=n(2),s=n.n(l),f=n(68),d=n(114),p=n.n(d),m=n(69),h=n.n(m),y=n(101),v=n.n(y),b=n(252),g=n(328),_=n(1908),w=n(91),E=n(312),O=n(1276),x=n(34),j=n(2099),k=(n(175),n(84)),S=(n(75),n(26)),C=n(10),N=n.n(C),P=n(270),T=n.n(P),A=n(263),L=n(149),I=n(1236),R=n.n(I),D=n(38),M=n(1274),F=n(2131),B=n(321),U=n(186),z=n(124),G=n(17),V=n(684),Y=n(2101),q="index-module_titleItem_r4Y+9",H="index-module_titleItemTitle_MNRmR",W="index-module_catalogItemActions_C0bl9",K="index-module_btnItem_04PGO",$="index-module_tailHiddenOnHover_xc0wc",Q="index-module_titleItemBook_8mQWj",X="index-module_titleItemDoc_MmrcY",J="index-module_titleEditing_zCOXx",Z="index-module_fullWidthName_coxzJ",ee="index-module_slugWithoutDivider_mHnOA";function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ne.apply(this,arguments)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ue(e);if(t){var o=ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(i,e);var t,n,r,o=ae(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),le(ce(t=o.call(this,e)),"handleMenuVisibleChange",(function(e,n){var r={};"create"===n?r.createMenuVisible=e:"edit"===n&&(r.editMenuVisible=e),!1===e&&!1===t.mouseEntered&&(r.actionVisible=!1),t.setState(r)})),le(ce(t),"onNonExistentDocClick",(function(){t.props.canCreateDoc&&t.props.onCreateDoc()})),le(ce(t),"renderTail",(function(e){var n=t.props,r=n.doc,o=n.tailType,a=n.bookNamespace,i=n.isEditing,c=n.runtime;if(!r)return null;if(e.type===b.TYPES.title||e.type===b.TYPES.link)return null;var l=null;if(o===L.TOC_TAIL_TYPES.AUTHOR){var s=r.user,f=window.appData.book;if(s&&f){var d=z.a.getDocShowAuthorId(r);-1===d?s=null:d&&s.id!==d&&f.contributors&&(s=f.contributors.find((function(e){return e.id===d}))||s)}s&&(l=u.a.createElement(B.a,{user:s},u.a.createElement("a",{href:"/".concat(s.login),target:"_blank"},s.name)))}else l=o===L.TOC_TAIL_TYPES.UPDATED_AT?u.a.createElement("span",{className:"date"},u.a.createElement(U.a,{time:r.content_updated_at})):o===L.TOC_TAIL_TYPES.CREATED_AT?u.a.createElement("span",{className:"date"},u.a.createElement(U.a,{time:r.created_at})):u.a.createElement("a",{href:"/".concat(a,"/").concat(e.url),onClick:function(e){return e.stopPropagation()}},e.url);return l?u.a.createElement("span",{className:N()("slug",le({},ee,i&&"normal"===c))},u.a.createElement("span",{className:"tail-info"},l)):null})),t.state={editMenuVisible:!1,createMenuVisible:!1,actionVisible:!1},t.$childRef=Object(c.createRef)(),t}return t=i,(n=[{key:"docNotFound",value:function(){var e=this.props.node,t=__("此文档尚未创建");return u.a.createElement("a",{onClick:this.onNonExistentDocClick},u.a.createElement(a.a,{title:t,placement:"topLeft"},u.a.createElement("span",{className:"catalog-item-doc-not-found"},e.title)))}},{key:"renameDoc",value:function(e,t){this.props.onAction({action:b.ACTIONS.edit,node_uuid:e.uuid,title:t},e)}},{key:"renderTitle",value:function(e){var t=this,n=this.props,r=n.runtime,o=n.isEditing,a=n.bookNamespace,i=n.onClickItem,c=n.node,l=n.doc,s=window.appData.book,d=e.type,p=e.open_window,m=e.url,h=e.title,y="/".concat(a,"/").concat(m),v=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp,g=function(){i(c)};if(o)return u.a.createElement("div",{className:J},u.a.createElement(S.a,{draggable:!T.a.safari,onDragStart:function(e){e.preventDefault(),e.stopPropagation()},defaultValue:e.title,onPressEnter:function(n){t.renameDoc(e,n.target.value)},onBlur:function(n){t.renameDoc(e,n.target.value)},autoFocus:!0,onFocus:function(e){e.target.select()},onClick:function(e){e.stopPropagation()}}));if(d===b.TYPES.title)return u.a.createElement("span",{className:H,onClick:g},h);if(d===b.TYPES.doc)return"spa"===r?u.a.createElement(f.NavLink,{to:y,title:h,draggable:!1,onClick:function(e){if(e.metaKey){e.preventDefault(),g();var t=document.createElement("a");return t.setAttribute("target","_blank"),t.setAttribute("href",y),void t.click()}g()}},h):window.appData.isYuqueMobileApp?u.a.createElement("a",{title:h,onClick:function(){Object(Y.a)({url:y,title:h,book:s,doc:l})},draggable:!1},h):u.a.createElement("a",{href:y,title:h,onClick:function(e){return e.stopPropagation()},draggable:!1,target:v?"_blank":null},h);if(d===b.TYPES.uncreated_doc)return this.docNotFound();var _=R.a.getSafeBlankLinkProps(p);return v&&(_.target="_blank"),u.a.createElement("a",ne({onClick:function(e){return e.stopPropagation()},href:R.a.sanitizeUrl(m),draggable:!1},_),h)}},{key:"shouldComponentUpdate",value:function(e,t){return e.isActive!==this.props.isActive||e.isEditing!==this.props.isEditing||!v()(e.node,this.props.node)||!v()(t,this.state)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.node,o=n.runtime,a=n.isActive,i=n.itemIndex,c=n.book,l=n.catalog,s=n.editable,f=n.isEditing;return u.a.createElement("span",{id:"catalog-".concat(i),"data-docid":"catalog-doc-".concat(r.id),className:N()(q,"catalog-item catalog-item-".concat(r.level+1),"catalog-item-runtime-".concat(o),(e={},le(e,Q,"normal"===o),le(e,X,"spa"===o),le(e,"catalog-item-active",a),le(e,"catalog-item-action-active",this.state.actionVisible),e)),onMouseEnter:function(){s&&(t.mouseEntered=!0,t.setState({actionVisible:!0}))},onMouseLeave:function(){s&&(t.mouseEntered=!1,t.setState((function(e){return{actionVisible:e.createMenuVisible||e.editMenuVisible||!1}})))}},u.a.createElement("span",{className:N()("name",le({},Z,f&&"normal"===o))},this.renderTitle(r)),s?u.a.createElement("span",{className:$},this.props.showSlug&&this.renderTail(r)):this.props.showSlug&&this.renderTail(r),s&&!f&&u.a.createElement("span",{className:W,onClick:function(e){return e.stopPropagation()}},u.a.createElement(k.a,{type:"menu",trigger:["click"],arrowPointAtCenter:!0,hideWhenInactive:!0,autoAdjustOverflow:!0,visible:this.state.createMenuVisible,onVisibleChange:function(e){t.handleMenuVisibleChange(e,"create")},placement:"bottomLeft",align:{offset:[-22,-3]},getPopupContainer:function(){var e;return(null===(e=t.$childRef.current)||void 0===e?void 0:e.closest("[".concat(V.c,"]")))||document.body},content:u.a.createElement(M.a,{book:c,commands:z.a.additionalActionsForNewDoc({canImport:!0,canCreateCatalogGroup:!0,canCreateCatalogLink:!0}),commandParams:{toc_node_uuid:r.uuid,toc_node_url:r.url,toc_node_title:r.title,create_from:"doc_toc",insert_to_catalog:!0,action:"prependChild",target_uuid:r.uuid,can_export_multiple:!0},onCommandsExecuted:function(e){var n=e.cmd;t.setState({createMenuVisible:!1}),n===G.a.CATALOG.create_title.cmd&&t.props.onAction({target_uuid:r&&r.uuid,action:b.ACTIONS.insert,type:b.TYPES.title}),n===G.a.CATALOG.create_link.cmd&&t.props.onCreateCatalogLink({target_uuid:r&&r.uuid,action:b.ACTIONS.insert,type:b.TYPES.link})}})},u.a.createElement("span",{onClick:function(e){return e.stopPropagation()},className:K,ref:this.$childRef},u.a.createElement(A.a,null))),u.a.createElement(F.a,{group:window.appData.group,book:c,catalog:l,item:r,onAction:this.props.onAction,onMove:this.props.onMove,onCopy:this.props.onCopy,onDestroy:this.props.onDestroy,setEditItem:this.props.setEditItem,visible:this.state.editMenuVisible,onVisibleChange:function(e){t.handleMenuVisibleChange(e,"edit")},onMenuItemClick:function(){t.setState({editMenuVisible:!1})},mode:"lite",placement:"bottomLeft",align:{offset:[-22,-3]}},u.a.createElement("span",{onClick:function(e){return e.stopPropagation()},doc:!0,className:K},u.a.createElement(D.b,{name:"catalog-more",width:16})))))}}])&&re(t.prototype,n),r&&re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(c.Component);se.defaultProps={onClickItem:function(){}},se.propTypes={bookNamespace:s.a.string.isRequired,node:s.a.object.isRequired,canCreateDoc:s.a.bool,showSlug:s.a.bool,runtime:s.a.oneOf(["spa","normal"]).isRequired,onCreateDoc:s.a.func,onAction:s.a.func,isEditing:s.a.bool,doc:s.a.object,tailType:s.a.string,isActive:s.a.bool,itemIndex:s.a.number,onClickItem:s.a.func,book:s.a.object,catalog:s.a.array,editable:s.a.bool,setEditItem:s.a.func,onMove:s.a.func};var fe=se,de=n(1303),pe=n(407);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}function ye(){ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==me(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function ve(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ve(a,r,o,i,c,"next",e)}function c(e){ve(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=xe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Oe(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){if(e){if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Se(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Te(e);if(t){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ne(this,n)}}function Ne(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pe(e)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=new p.a("catalogViewer"),Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(s,e);var t,n,c,l=Ce(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Ae(Pe(t=l.call(this,e)),"foldAll",(function(){t.catalogTreeElem&&t.catalogTreeElem.foldAll()})),Ae(Pe(t),"unfoldAll",(function(){t.catalogTreeElem&&t.catalogTreeElem.unfoldAll()})),Ae(Pe(t),"getExpandedKeysBySelectItem",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=Oe(t),o=[];if(e){var a=function(e){return n.find((function(t){return t.uuid===e.parent_uuid}))},i=n.find((function(t){return t.uuid===e})),c=function e(t){if(t){var n=a(t);n&&(o.push(n.uuid),n.level>0&&e(n))}};c(i)}return o.length&&r.push.apply(r,o),Oe(new Set(r))})),Ae(Pe(t),"rerenderCatalog",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.setState({catalog:e,catalog_tree:Object(g.generateTreeByTocItems)(e)}),n&&t.props.dispatch({type:"book/updateToc",payload:e})})),Ae(Pe(t),"changeContainerHeight",(function(){"doc"===t.props.mode&&t.setState({containerHeight:t._calcContainerHeight()})})),Ae(Pe(t),"highlightImportCatalog",(function(){if("book"===t.props.mode){var e,n=t.props.book,r="highlightBookImport_".concat(n.slug,"_").concat(n.id),o=w.default.get(r);if("_"===o?e=n.toc.length:o&&(e=n.toc.findIndex((function(e){return e.uuid===o}))),e>=0){var a,i=[],c=Ee(n.toc.entries());try{for(c.s();!(a=c.n()).done;){var u=we(a.value,2),l=u[0],s=u[1];l<e&&i.push(s.uuid)}}catch(f){c.e(f)}finally{c.f()}t.setState({highlightKeys:i}),t.timer&&clearTimeout(t.timer),t.timer=setTimeout((function(){t.setState({highlightKeys:[]})}),3e3)}w.default.remove(r)}})),Ae(Pe(t),"initDocsMap",(function(){var e,n={},r=Ee(t.props.book.docs);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o.id]=o,n[o.slug]=o}}catch(a){r.e(a)}finally{r.f()}return n})),Ae(Pe(t),"showCreateDocView",(function(e){t.setState({showCreateDocView:!0,docToCreate:{title:e.title,slug:e.url}})})),Ae(Pe(t),"showCatalogLinkForm",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.target_uuid,r=(e.action,e.type,e.onSubmit);t.setState({showCatalogLinkForm:!0,targetUId:n}),"function"==typeof r&&(t.onCatalogLinkFormSubmit=r)})),Ae(Pe(t),"hideDocCreateView",(function(){t.setState({showCreateDocView:!1,docToCreate:null})})),Ae(Pe(t),"setEditItem",(function(e){t.setState({editItemUId:e})})),Ae(Pe(t),"redirectToNextDoc",(function(e,n,r){var o=window.appData.group,a=t.props,i=a.book,c=a.activeNodeSlug,u=a.history,l=r.currentItem,s=r.docIds,f=void 0===s?[]:s,d=e.find((function(e){return e.url===c}));if(l&&d&&f.includes(d.id)){var p=E.a.getRedirectURL(e,n,_e(_e({},r),{},{group:o,book:i}));p?u.push(p):window.location.href="/".concat(o.login,"/").concat(i.slug)}})),Ae(Pe(t),"onMove",function(){var e=be(ye().mark((function e(n,r,o){var a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.redirectToNextDoc(n,r,o),t.rerenderCatalog(r),t._scrollToCurrentNode(),o.targetBook.id===t.props.book.id){e.next=9;break}return e.next=7,x.a.docs.find({book_id:t.props.book.id});case 7:a=e.sent,t.props.dispatch({type:"book/updateDocs",payload:a});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),Ae(Pe(t),"onCopy",function(){var e=be(ye().mark((function e(n,r){var o,a,i,c,u,l,s,f,d,p=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=p.length>2&&void 0!==p[2]?p[2]:{},a=o.doc_ids,i=o.toc_updated_at,c=o.targetBook,u={},l=Ee(a);try{for(l.s();!(s=l.n()).done;)f=s.value,u[f]={updated_at:i,created_at:i}}catch(n){l.e(n)}finally{l.f()}if(t.setState((function(e){return{docsMap:_e(_e({},e.docsMap),u)}})),t.rerenderCatalog(r),c.id!==t.props.book.id){e.next=12;break}return e.next=10,x.a.docs.find({book_id:t.props.book.id});case 10:d=e.sent,t.props.dispatch({type:"book/updateDocs",payload:d});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ae(Pe(t),"onDestroy",(function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.rerenderCatalog(n),r.docIds&&r.docIds.length){var o=window.appData.group,a=t.props.book;i.a.success(__("删除成功，删除的文档可以从 {recycle} 中恢复",{recycle:u.a.createElement("a",{href:"/r/".concat(o.login,"/").concat(a.slug,"/trash")},__("回收站"))}),3),t.redirectToNextDoc(e,n,r),t.props.dispatch({type:"book/updateDocs",payload:a.docs.filter((function(e){return!r.docIds.includes(e.id)}))})}})),Ae(Pe(t),"onDocEventRename",function(){var e=be(ye().mark((function e(n){var r,o,a,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.book,o=r.toc.find((function(e){return e.doc_id===n.doc_id})),o){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,E.a.updateNode(r,{action:"edit",node_uuid:o.uuid,title:n.title});case 7:a=e.sent,c=a.toc,t.rerenderCatalog(c),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),i.a.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}()),Ae(Pe(t),"onAction",function(){var e=be(ye().mark((function e(n,r){var o,a,c,u,l,s,f,d,p;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.props,a=o.book,c=o.activeNodeSlug,e.prev=1,e.next=4,E.a.updateNode(a,_e({},n));case 4:return u=e.sent,l=u.node_uuid,s=u.toc,t.rerenderCatalog(s),n.action===b.ACTIONS.insert&&n.target_uuid?(f=t.state.expandedKeys,d=[].concat(Oe(f),[n.target_uuid]),t.setState({editItemUId:null,expandedKeys:Oe(new Set(d))})):t.setState({editItemUId:null}),n.action===b.ACTIONS.insert&&n.type===b.TYPES.title&&t.setEditItem(l),n.action===b.ACTIONS.edit&&r&&r.type===b.TYPES.doc&&r.url===c&&t.props.dispatch({type:"doc/update",payload:{title:n.title}}),n.action===b.ACTIONS.edit&&(p=a.toc.find((function(e){return e.uuid===n.node_uuid})).doc_id,t.props.dispatch({type:"book/updateDocs",payload:a.docs.map((function(e){return e.id===p?_e(_e({},e),{},{title:n.title}):e}))})),e.abrupt("return",u);case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),i.a.error(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()),Ae(Pe(t),"onCreateCatalogLink",be(ye().mark((function e(){var n,r,o,a,i,c=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:{},r=n.title,o=n.url,a=n.open_window,i={target_uuid:t.state.targetUId,action:b.ACTIONS.insert,type:b.TYPES.link,title:r,url:o,open_window:a},e.next=4,t.onAction(i);case 4:t.onCatalogLinkFormSubmit(),t.onCatalogLinkFormSubmit=function(){},t.setState({showCatalogLinkForm:!1});case 7:case"end":return e.stop()}}),e)})))),Ae(Pe(t),"handleExpand",(function(e){t.setState({expandedKeys:e})})),Ae(Pe(t),"handleSelect",(function(e){var n=t.state.expandedKeys,r=e.data.uuid;if(!n.includes(r)){var o=[].concat(Oe(n),[r]);t.setState({expandedKeys:Oe(new Set(o))})}r!==t.state.selectedKeys[0]&&t.setState({selectedKeys:[r]})})),Ae(Pe(t),"renderTitle",(function(e,n){var r=t.props,o=r.book,a=r.mode,i=r.activeNodeSlug,c=o.abilities,l=void 0===c?{}:c,s=l&&l.create_doc&&!window.h5;return"book"===a?u.a.createElement(fe,{key:e.uuid,bookNamespace:o.namespace,node:e,canCreateDoc:o.abilities.create_doc,onCreateCatalogLink:t.showCatalogLinkForm,onCreateDoc:function(){t.showCreateDocView(e)},showSlug:!0,runtime:"normal",doc:t.state.docsMap[e.doc_id]||t.state.docsMap[e.url],tailType:t.state.tailType,onAction:t.onAction,onClickItem:function(e){t.catalogTreeElem&&"TITLE"!==e.type&&t.catalogTreeElem.lockExpand()},itemIndex:n,onMove:t.onMove,onCopy:t.onCopy,onDestroy:t.onDestroy,setEditItem:t.setEditItem,book:o,catalog:t.state.catalog,isEditing:e.uuid===t.state.editItemUId,editable:s}):"doc"===a?u.a.createElement(fe,{isEditing:e.uuid===t.state.editItemUId,key:e.uuid,bookNamespace:o.namespace,node:e,canCreateDoc:o.abilities.create_doc,onCreateDoc:function(){t.showCreateDocView(e)},onCreateCatalogLink:t.showCatalogLinkForm,isActive:e.url&&i===e.url,runtime:"spa",onAction:t.onAction,onMove:t.onMove,onCopy:t.onCopy,onDestroy:t.onDestroy,setEditItem:t.setEditItem,onClickItem:function(e){t.catalogTreeElem&&"TITLE"!==e.type&&t.catalogTreeElem.lockExpand()},book:o,catalog:t.state.catalog,editable:s}):void 0}));var n=e.book.toc,r=Object(g.generateTreeByTocItems)(n),o=t.getCurrentSelectedToc(),a=o?[o.uuid]:[];return t.state={showCreateDocView:!1,showCatalogLinkForm:!1,targetUId:null,docToCreate:null,catalog_tree:r,catalog:n,tailType:e.book.catalog_tail_type,editItemUId:null,containerHeight:t._calcContainerHeight(),highlightKeys:[],expandedKeys:t.getExpandKeysByLevel(t.getCatalogLevel(),n,a),selectedKeys:a,docsMap:t.initDocsMap()},t.timer=null,t.onCatalogLinkFormSubmit=function(){},t}return t=s,(n=[{key:"componentDidMount",value:function(){this.highlightImportCatalog(),this.initCatalogScroll(),window.addEventListener("resize",h()(this.changeContainerHeight,300),!1),O.a.on("rename",this.onDocEventRename)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.activeNodeSlug!==this.props.activeNodeSlug){var t=e.book.toc.find((function(t){return t.url&&t.url===e.activeNodeSlug})),n=this.state,r=n.expandedKeys,o=n.catalog;if(t&&t.uuid){var a=this.getExpandedKeysBySelectItem(t.uuid,r,o);this.setState({expandedKeys:a,selectedKeys:[t.uuid]})}}}},{key:"shouldComponentUpdate",value:function(e,t){return!v()(e,this.props)||!v()(t,this.state)}},{key:"componentDidUpdate",value:function(e){var t=e.book.toc,n=void 0===t?[]:t,r=this.props.book.toc,o=void 0===r?[]:r;v()(n,o)||this.rerenderCatalog(o,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("resume",this.locationRefresh),window.removeEventListener("resize",this.changeContainerHeight,!1),O.a.off("rename",this.onDocEventRename)}},{key:"getExpandKeysByLevel",value:function(e,t,n){var r=this;if(e===1/0)return t.map((function(e){return e.uuid}));var o,a,i=[],c=Ee(t);try{for(c.s();!(o=c.n()).done;){var u=o.value;u.level<e-1&&i.push(u.uuid)}}catch(l){c.e(l)}finally{c.f()}return n&&n.length&&((a=i).push.apply(a,Oe(n)),i=n.reduce((function(e,n){var o=r.getExpandedKeysBySelectItem(n,i,t);return[].concat(Oe(e),Oe(o))}),[])),Oe(new Set(i))}},{key:"_calcContainerHeight",value:function(){return window.innerHeight-147}},{key:"_scrollToCurrentNode",value:function(){var e=this.props,t=e.book,n=e.activeNodeSlug;if(this.catalogTreeElem&&n){var r=this.props.book.toc.filter((function(e){return e.level<=t.catalog_display_level||!(!e.url||e.url!==n)})).find((function(e){return e.url&&e.url===n}));r&&(this.scrolled=!0,this.catalogTreeElem.scrollTo({key:r.uuid,align:"top",offset:100}))}}},{key:"scrollToTop",value:function(){var e=this.props,t=e.book,n=e.activeNodeSlug;if(this.catalogTreeElem&&n){var r=0!==t.toc.length?this.props.book.toc[0].uuid:null;r&&this.catalogTreeElem.scrollTo({key:r,align:"top",offset:100})}}},{key:"initCatalogScroll",value:function(){this.scrolled||this._scrollToCurrentNode()}},{key:"docNotFound",value:function(e){var t=this;return u.a.createElement("a",{onClick:function(){return t.showCreateDocView(e)}},u.a.createElement(a.a,{title:__("此文档尚未创建"),placement:"topLeft"},u.a.createElement("span",{className:"catalog-item-doc-not-found"},e.title)))}},{key:"getCurrentSelectedToc",value:function(){var e=this.props,t=e.activeNodeSlug;return e.book.toc.find((function(e){return e.url&&e.url===t}))}},{key:"getCatalogLevel",value:function(){var e=this.props.book.catalog_display_level;return void 0===e&&(e=b.DEFAULT_DISPLAY_LEVEL),"all"===e?1/0:parseInt(e,10)+1}},{key:"render",value:function(){var e=this,t=this.state,n=t.docToCreate,a=t.catalog_tree,i=t.catalog,c=this.props,l=c.mode,s=c.book,f=(s=void 0===s?{}:s).abilities;if(!a||0===a.length)return null;var d="doc"===l,p=f&&f.create_doc&&!window.h5,m={data:a,listData:i,catalogLevel:this.getCatalogLevel(),highlightKeys:this.state.highlightKeys,selectedKeys:this.state.selectedKeys,expandedKeys:this.state.expandedKeys,onExpand:this.handleExpand,onSelect:this.handleSelect};return d&&(m.height=this.state.containerHeight),Le("[CatalogTree] params: %j",m),u.a.createElement("div",{"data-testid":"catalog",className:"book-catalog"},u.a.createElement(_.a,he({},m,{ref:function(t){e.catalogTreeElem=t},editable:p,renderTitle:this.renderTitle,onAction:this.onAction,wrapperClassName:"book"===l?"book-index-wrapper":"aside-catalog",size:"book"===l?"large":"normal",showScrollMask:d,rerenderString:"".concat(this.state.editItemUId),toggleTitleOnSelect:!0,offscreenRendering:!0})),this.state.showCreateDocView&&u.a.createElement(r.a,{visible:!0,title:null,footer:null,width:"400px",closable:!1},u.a.createElement("div",{className:"catalog-create-doc-wrap"},u.a.createElement("div",{className:"title"},"“",n.title,"”"),u.a.createElement("div",{className:"tip"},__("这篇文档不存在，创建并开始编写？")),u.a.createElement("div",{className:"action"},u.a.createElement(o.a,{onClick:this.hideDocCreateView},__("取消")),u.a.createElement(j.a,{book:this.props.book,title:n.title,slug:n.slug,canImport:!1,commandParams:{title:n.title,slug:n.slug,insert_to_catalog:!0,action:"prependChild"},onCreated:function(){window.location.reload()}})))),this.state.showCatalogLinkForm&&u.a.createElement(r.a,{visible:!0,title:null,footer:null,wrapClassName:pe.a.modal,onCancel:function(){return e.setState({showCatalogLinkForm:!1})}},u.a.createElement("h6",{className:pe.a.modalTitle},__("添加链接")),u.a.createElement("p",{className:pe.a.modalDescription},__("通过添加网页链接，可插入非本知识库的内容")),u.a.createElement(de.a,{onSubmit:function(t){return e.onCreateCatalogLink(t)},onCancel:function(){return e.setState({showCatalogLinkForm:!1})}})))}}])&&ke(t.prototype,n),c&&ke(t,c),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.Component);Ie.propTypes={dispatch:s.a.func,book:s.a.object.isRequired,mode:s.a.oneOf(["book","doc"]).isRequired,activeNodeSlug:s.a.string,onMoveToStagingBox:s.a.func};var Re=Object(f.withRouter)(Ie);t.a=u.a.forwardRef((function(e,t){return u.a.createElement(Re,he({wrappedComponentRef:t},e))}))},function(e,t,n){"use strict";n(611);var r=n(422),o=(n(60),n(24)),a=n(0),i=n.n(a),c=n(2),u=n.n(c),l=n(88),s=n(253),f=n(2422),d=n(117),p=n(207),m=n(322),h=n(212),y=n(34),v=n(127),b=(n(79),n(44)),g=(n(246),n(110)),_=n(10),w=n.n(_),E=n(294),O=n(179),x=n.n(O),j=n(32),k=n.n(j),S=n(38),C=n(186),N=n(321),P=n(589),T=n(1893),A=n(723),L=n(2133),I=n(380),R=n(1002),D=n(2355),M=n(2356),F=n(1004),B=n(967),U=n(1296),z=n(1153),G=n(2137),V=n(1345);n(2023);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Q(this,n)}}function Q(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(c,e);var t,n,r,a=$(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Z(X(t=a.call(this,e)),"edit",(function(){t.setState({mode:"edit"},(function(){t.props.onEdit&&t.props.onEdit()}))})),Z(X(t),"cancelEdit",(function(){t.setState({mode:"view"})})),Z(X(t),"toggleParentComment",(function(){t.setState((function(e){return{showParent:!e.showParent}}))})),Z(X(t),"scrollTo",(function(){var e;if(t.positionKeeperRef.current){var n=t.props,r=n.comment,o=n.getViewEngine,a=null==r||null===(e=r.selection)||void 0===e?void 0:e.paragraph_id,i=o();i&&a&&i.execCommand("tryUnfold",a),t.positionKeeperRef.current.emit(R.a.SCROLL,H(H({},r.selection),{},{comment_id:r.id}))}})),Z(X(t),"renderWordingContent",(function(){var e=t.props.comment;return"Review"===e.selection_type?null:i.a.createElement("div",{className:"content-detail-wording-container"},i.a.createElement("div",{className:"content-detail-wording-content"},e.selection.text),i.a.createElement("a",{className:"content-detail-wording-action",onClick:t.scrollTo},__("回到原文划线处")))})),Z(X(t),"renderReplyContent",(function(){var e=t.props,n=e.comment,r=e.parentComment,o=e.target;if(!n.parent_id&&!n.selection)return null;if(!n.parent_id&&n.selection)return t.renderWordingContent();var a,c=r;return c?(a=c.user?c.user.name:__("用户已注销"),i.a.createElement("div",{className:w()("content-detail-reply",{"content-detail-reply-unfold":t.state.showParent})},i.a.createElement("div",{className:"content-detail-reply-header",onClick:t.toggleParentComment},__("回复 {user}",{user:i.a.createElement("a",{className:"reply-link"},"@",a)}),i.a.createElement("a",{className:"parent-link",onClick:function(e){t.props.gotoOriginComment(e,c.id)}},"Thread"===o.type?__("回到原处"):__("回到原评论"))),t.state.showParent&&i.a.createElement("div",{className:"content-detail-reply-body"},i.a.createElement(P.b,{id:r.id,content:r.body_asl,genOutline:!1,genAnchor:!1,disableYuqueCardEmbedView:t.props.disableYuqueCardEmbedView,simpleUI:!0})))):i.a.createElement("div",{className:"content-detail-reply"},i.a.createElement("p",{style:{cursor:"default"},className:"content-detail-reply-header"},__("该评论已删除")))})),Z(X(t),"setReplyingToPost",(function(){t.setState({replyingToPost:!0})})),Z(X(t),"cancelReplyingToPost",(function(){t.setState((function(e){return{replyingToPost:!1}}))})),Z(X(t),"createSubCommentReply",(function(e){if(t.props.createSubCommentReply)return t.props.createSubCommentReply(e)})),Z(X(t),"deleteSubComment",(function(e){if(t.props.deleteSubComment)return t.props.deleteSubComment(e)})),Z(X(t),"renderActions",(function(){var e=t.props,n=e.comment,r=e.me,o=e.bookType,a=e.canCommentPost;return r&&r.id?i.a.createElement("div",{className:"actions"},a&&i.a.createElement("span",{className:"action-link",onClick:"Thread"===o?t.setReplyingToPost:function(){t.props.onReplyTo(n.id)}},"Thread"===o?__("评论"):__("回复")),i.a.createElement("span",{className:"more-actions"},t.canEdit()&&i.a.createElement("span",{className:"action-link",onClick:t.edit},__("编辑")),t.canReport()&&i.a.createElement(F.a,{targetId:n.id,targetType:"Comment"},(function(e){return i.a.createElement("span",{className:"action-link",onClick:e.onShowPanel},__("举报"))})),t.canDelete()&&i.a.createElement(g.a,{title:__("确认删除该评论么？"),onConfirm:function(){t.props.onRemove(n.id)}},i.a.createElement("span",{className:"action-link"},__("删除"))))):null})),Z(X(t),"changeMood",(function(e){t.setState({commentMoodChanged:!0,mood:e}),t.props.onChangeMood&&t.props.onChangeMood({id:t.props.comment.id,mood:e})})),Z(X(t),"toggleContentReport",(function(e){var n=t.state.contentReportVisible;e=void 0!==e?e:!n,t.setState({contentReportVisible:e})})),Z(X(t),"onExecPostAction",(function(e){var n=t.props.comment,r=A.a.getPostUrl(n.id);switch(e){case"copy_link":x()(r),o.a.success(__("链接已复制"));break;case"edit":t.edit();break;case"reply":t.setReplyingToPost();break;case"delete":t.props.onRemove(n.id);break;case"content_report":t.setState({contentReportVisible:!0})}})),t.state={mode:"read",showParent:!1,commentMoodChanged:!1,mood:e.comment.mood,replyingToPost:!1,contentReportVisible:!1},t.createSubCommentInput=i.a.createRef(),t.positionKeeperRef=i.a.createRef(),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.positionKeeperRef.current=Object(R.b)()}},{key:"canEdit",value:function(){var e=this.props,t=e.me,n=e.comment;return t&&t.id===n.user_id}},{key:"canReport",value:function(){var e=this.props,t=e.me,n=e.comment;if(!window.appData.isPublicCloud)return!1;var r=Object(I.a)()||Object(I.b)();return n.status===s.STATUS.normal&&r&&t&&t.id!==n.user_id}},{key:"canDelete",value:function(){var e,t,n=this.props,r=n.me,o=n.comment,a=n.type,i=n.target;if(!r)return!1;if(r.id===o.user_id)return!0;switch(a){case"Doc":return null===(e=i.abilities)||void 0===e?void 0:e.destroy_comment;case"Topic":return null===(t=i.abilities)||void 0===t?void 0:t.block;default:return!1}}},{key:"renderMood",value:function(){var e=this.props,t=e.comment;return e.enableMoodComment&&t.mood?i.a.createElement(U.a,{className:"post-mood",size:"mini",selected:!0,name:t.mood}):null}},{key:"renderCommentContent",value:function(){var e=this.props,t=e.comment,n=e.group,r=e.target,o=e.type,a=e.enableMoodComment,c=e.onClick,u={read_status:-1===t.status?99:0,id:t.id};if("edit"===this.state.mode){var l=a&&!t.parent_id;return i.a.createElement(i.a.Fragment,null,i.a.createElement(L.a,{onChange:this.changeMood,visiable:l,value:this.state.mood}),i.a.createElement(V.a,{type:o,group:n,comment:t,target:r,onCancel:this.cancelEdit,onSave:this.props.onSave,getDefaultSuggestions:this.props.getDefaultSuggestions,commentMoodChanged:this.state.commentMoodChanged,useMiniGuide:this.props.useMiniGuide}))}var s=Object(I.a)()||Object(I.b)();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"content-detail",onClick:function(){return c(t)}},this.renderReplyContent(t),s&&i.a.createElement("div",{"data-testid":"reader-audit",style:{marginBottom:6}},i.a.createElement(T.a,{key:"audits",doc:u,type:"Comment"})),i.a.createElement(P.b,{id:t.id,key:"reply-".concat(t.id),genOutline:!1,genAnchor:!1,content:t.body_asl,disableYuqueCardEmbedView:this.props.disableYuqueCardEmbedView,simpleUI:!0,imageLazyLoad:!0})),"Thread"===r.type&&i.a.createElement(M.a,{me:this.props.me,comment:t,onReactionUpdate:this.props.onReactionUpdate,sub_comments:this.props.subComments,onReply:this.setReplyingToPost}),this.renderActions(t))}},{key:"render",value:function(){var e=this,t=this.props,n=t.comment,r=t.floor,o=t.hash,a=t.type,c=t.me,u=t.subComments,l=t.currentCommentId,s=t.timeMode,f=m.a.getAnchorId(n.id,a),p="floor-".concat(r),h=o==="#".concat(f)||o==="#".concat(p),y=w()({"comment-list-item-inner":!0,"comment-list-item-current":h,"comment-list-item-incoming":n.isNewIncoming,"pointer-cursor":"Resource"===a}),g=n&&n.user,_="sm";"Thread"===this.props.target.type&&(_=window.h5?28:32);var O=w()({"comment-list-item":!0,"comment-list-item-incoming-wrap":n.isNewIncoming,"comment-list-item-focus":h,"comment-list-item-selected":l===n.id});return i.a.createElement("div",{id:f,"data-df":n.format,className:O},i.a.createElement("div",{id:p,className:y},g?i.a.createElement("div",{className:"comment-header"},i.a.createElement("a",{href:"/".concat(g.login),className:"avatar"},i.a.createElement(N.a,{user:g},i.a.createElement(v.a,{src:g.avatar_url,size:_,name:g.name})),n.order&&i.a.createElement("span",{className:"comment-order"},n.order)),i.a.createElement("div",{className:"commenter"},i.a.createElement(N.a,{user:g},i.a.createElement("a",{href:"/".concat(g.login),className:"name"},g.name,(null==c?void 0:c.isAdmin)&&[d.STATUS.banned,d.STATUS.blocked].includes(g.status)&&i.a.createElement("span",{className:"book-name-scope"},i.a.createElement(S.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375,marginLeft:4}})))),this.renderMood(),i.a.createElement("a",{href:window.location.hash&&window.h5?null:"#".concat(f),className:"time","data-testid":"comment-time-hash"},"absolute"===s?i.a.createElement("span",null,k()(n.created_at).format("YYYY-MM-DD HH:mm")):i.a.createElement(C.a,{time:n.created_at}))),"Thread"===this.props.target.type&&i.a.createElement("div",{className:"comment-header-right"},i.a.createElement(D.a,{me:c,comment:n,target:this.props.target,exec:this.onExecPostAction}))):i.a.createElement("div",{className:"comment-header"},i.a.createElement("a",{className:"avatar"},i.a.createElement(v.a,{src:E.avatar.user,size:_,name:__("用户已注销")})),i.a.createElement("div",{className:"commenter"},i.a.createElement("a",{className:"name"},__("用户已注销")),i.a.createElement("a",{href:"#".concat(f),className:"time"},i.a.createElement(C.a,{time:n.created_at})))),i.a.createElement("div",{className:"content"},this.renderCommentContent(n),i.a.createElement(G.a,{me:c,replyingToPost:this.state.replyingToPost,getRootCommentByParentComment:this.props.getRootCommentByParentComment,parentComment:n,subComments:u,onSubmit:this.createSubCommentReply,onDelete:this.deleteSubComment,cancelReplyingToPost:this.cancelReplyingToPost,auto_expand:h,comment_forbidden:Object(z.b)(this.props.target)})),i.a.createElement(b.a,{destroyOnClose:!0,title:null,footer:null,visible:this.state.contentReportVisible,onCancel:function(){return e.toggleContentReport(!1)}},i.a.createElement(B.a,{targetId:n.id,targetType:"Comment",onClose:function(){return e.toggleContentReport(!1)}}))))}}])&&W(t.prototype,n),r&&W(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.Component);ee.defaultProps={canCommentPost:!0,onClick:function(){},timeMode:"relative",getViewEngine:function(){return null}},ee.propTypes={bookType:u.a.string,group:u.a.object.isRequired,me:u.a.object.isRequired,type:u.a.oneOf(m.a.TARGET_TYPES),target:u.a.object.isRequired,comment:u.a.object.isRequired,subComments:u.a.array,floor:u.a.number.isRequired,parentComment:u.a.object,getRootCommentByParentComment:u.a.func.isRequired,gotoOriginComment:u.a.func,hash:u.a.string,onReplyTo:u.a.func,onRemove:u.a.func,onSave:u.a.func,getDefaultSuggestions:u.a.func,enableMoodComment:u.a.bool,onChangeMood:u.a.func,createSubCommentReply:u.a.func,deleteSubComment:u.a.func,canCommentPost:u.a.bool,onReactionUpdate:u.a.func,useMiniGuide:u.a.bool,currentCommentId:u.a.number,onClick:u.a.func,onEdit:u.a.func,disableYuqueCardEmbedView:u.a.bool,timeMode:u.a.oneOf(["relative","absolute"]),getViewEngine:u.a.func};var te=ee;function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(){ae=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ne(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function ie(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var o=me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pe(e)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(u,e);var t,n,a,c=fe(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),he(pe(t=c.call(this,e)),"getHashScrollOffsetTop",(function(){var e=0;"Doc"===t.props.type&&(document.querySelector(".doc-head")&&(e=60));return e})),he(pe(t),"getRootCommentByParentCommentFactory",(function(e){return function(){return Object(f.getRootCommentByParentComment)(t.props.comments,e)}})),he(pe(t),"handleHashChange",(function(){t.setState({hashValue:decodeURIComponent(window.location.hash)})})),he(pe(t),"handleGoParent",(function(e,n){e.stopPropagation();var r=t.props.type,o=m.a.getAnchorId(n,r);window.location.hash=o,h.a.scrollToHash({top:t.getHashScrollOffsetTop()})})),he(pe(t),"handleRemove",(function(e){var n={id:e};y.a.comments.destroy(n).then((function(){t.props.dispatch({type:"litecomment/remove",payload:n}),o.a.success(__("操作成功"),3),t.props.onCommentRemove(n)}))})),he(pe(t),"onChangeMood",(function(e){var n=e.id,r=e.mood,o=t.state.moodMap;t.setState({moodMap:ue(ue({},o),{},he({},n,r))})})),he(pe(t),"handleSave",function(){var e,n=(e=ae().mark((function e(n,r,o){var a,i;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:n,format:r.format,body_asl:r.value,body:r.html},Object.keys(t.state.moodMap).indexOf(String(n))>-1&&(a.mood=t.state.moodMap[n]),e.next=4,y.a.comments.update(a);case 4:i=e.sent,o&&o(),t.props.onCommentUpdate(i),t.props.dispatch({type:"litecomment/updateOne",payload:i});case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ie(a,r,o,i,c,"next",e)}function c(e){ie(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,t,r){return n.apply(this,arguments)}}()),he(pe(t),"parsedComments",(function(e){var t,n=[],r={},o=re(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;if("text"===a.format){var i=a.parent_id;r[i]=r[i]||[],r[i].push(a)}else n.push(a)}}catch(c){o.e(c)}finally{o.f()}return{posts:n,subComments:r}})),he(pe(t),"createSubCommentReply",(function(e){var n={type:"SUB_COMMENT",commentable_type:"Doc",commentable_id:t.props.doc.id,body:e.value,format:"text",parent_id:e.parent_id,to_user_id:e.to_user_id,root_id:e.root_id};return y.a.comments.create(n).then((function(e){t.props.dispatch({type:"litecomment/create",payload:{data:e,showEditorAtBottom:!0}});try{t.props.onReplyTo(e)}catch(n){p.a.logError(n,"".concat(n.message,",LitCommentList:createSubCommentReply:onReplyTo"))}}))})),he(pe(t),"handleClickCommentItem",(function(e){var n=t.props,r=n.type,o=n.dispatch;"Resource"===r&&o({type:"litecomment/updateCurrentCommentId",payload:e.id})})),t.state={hashValue:decodeURIComponent(window.location.hash),moodMap:{}},t.timer=null,window.addEventListener("hashchange",t.handleHashChange,!1),window.addEventListener("confirmRemoveComment",t.handleRemove,!1),t}return t=u,(n=[{key:"componentDidMount",value:function(){h.a.initScrollbarPosition({top:this.getHashScrollOffsetTop()})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null,window.removeEventListener("hashchange",this.handleHashChange,!1),window.removeEventListener("confirmRemoveComment",this.handleRemove,!1)}},{key:"getParentComment",value:function(e){var t=e.parent_id;return t?this.props.comments.find((function(e){return e.id===parseInt(t,10)})):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.me,o=t.comments,a=t.group,c=t.target,u=t.doc,l=t.bookType,f=t.canCommentPost,p=t.currentCommentId,m=t.listType,h=t.isMiniSize,y=t.timeMode,b=t.getViewEngine;if(o.length<1)return null;var g=o,_={};if("Thread"===l){var w=this.parsedComments(o);g=w.posts,_=w.subComments}g=g.filter((function(e){var t;return"Review"===e.selection_type?!(![s.TYPE.REVIEW_APPROVAL,s.TYPE.REVIEW_REJECTION,s.TYPE.REVIEW_OPINION].includes(e.type)||!e.body||(e.body_asl=e.body,0)):!!((null==n?void 0:n.id)===e.user_id||null!=n&&n.isAdmin)||![d.STATUS.banned,d.STATUS.blocked].includes(null==e||null===(t=e.user)||void 0===t?void 0:t.status)}));var E=h?24:32;return i.a.createElement(r.a,{justify:"block",className:"comment-list",dataSource:g,renderItem:function(t,r){var o=_[t.id],s=i.a.createElement(te,{timeMode:y,bookType:l,onChangeMood:e.onChangeMood,type:e.props.type,group:a,me:n,target:c,comment:t,subComments:o,floor:r+1,parentComment:e.getParentComment(t),getRootCommentByParentComment:e.getRootCommentByParentCommentFactory(t),hash:e.state.hashValue,key:t.id,gotoOriginComment:e.handleGoParent,onReplyTo:e.props.onReplyTo,onRemove:e.handleRemove,onSave:e.handleSave,getDefaultSuggestions:e.props.getDefaultSuggestions,enableMoodComment:!!(u&&u.meta&&u.meta.enable_mood_comment),createSubCommentReply:e.createSubCommentReply,deleteSubComment:e.handleRemove,canCommentPost:f,onReactionUpdate:e.props.onReactionUpdate,useMiniGuide:e.props.useMiniGuide,currentCommentId:p,onClick:e.handleClickCommentItem,onEdit:e.props.onEdit,disableYuqueCardEmbedView:e.props.disableYuqueCardEmbedView,getViewEngine:b});return"timeline"===m?i.a.createElement("div",{className:"timeline-comment-item"},i.a.createElement(v.a,{className:"avatar",src:t.user.avatar_url,size:E}),t.order&&i.a.createElement("span",{className:"comment-order"},t.order),s):s}})}}])&&le(t.prototype,n),a&&le(t,a),Object.defineProperty(t,"prototype",{writable:!1}),u}(a.Component);ye.defaultProps={onCommentUpdate:function(){},onCommentRemove:function(){},timeMode:"relative"},ye.propTypes={bookType:u.a.string,me:u.a.object,doc:u.a.object,type:u.a.oneOf(m.a.TARGET_TYPES),group:u.a.object.isRequired,target:u.a.object.isRequired,onReactionUpdate:u.a.func,onCommentUpdate:u.a.func,onCommentRemove:u.a.func,onReplyTo:u.a.func.isRequired,onEdit:u.a.func,comments:u.a.arrayOf(u.a.object),getDefaultSuggestions:u.a.func,dispatch:u.a.func,canCommentPost:u.a.bool,useMiniGuide:u.a.bool,currentCommentId:u.a.number,listType:u.a.oneOf(["default","timeline"]),isMiniSize:u.a.bool,disableYuqueCardEmbedView:u.a.bool,timeMode:u.a.oneOf(["relative","absolute"]),getViewEngine:u.a.func};var ve=window.appData,be=ve.isAlipayWebApp,ge=ve.isDingTalkMiniApp,_e=be||ge?Object(l.d)((function(e){return e}))(ye):Object(l.d)((function(e){return{group:e.group,me:e.me}}))(ye);t.a=_e},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(261),u=n(270),l=n.n(u),s=l.a.mobile||l.a.tablet,f=navigator.userAgent.toLowerCase(),d=f.indexOf("iphone")>=0&&f.indexOf("safari")>=0&&f.indexOf("mobile safari")<0,p=function(e){var t=e.tipText,n=e.visible;return o.a.createElement("div",{className:"social-share"},s&&n&&o.a.createElement("div",{className:"doc-share-guide"},d?o.a.createElement("div",{className:"share-guide-safari"},o.a.createElement("div",{className:"doc-share-content"}),o.a.createElement("div",{className:"btn-close",onClick:e.onCancel},o.a.createElement(c.a,null))):o.a.createElement("div",{className:"share-guide-default"},o.a.createElement("div",{className:"doc-share-content"},t||__("点击右上角菜单分享给朋友"),o.a.createElement("button",{type:"button",className:"btn-close",onClick:e.onCancel},__("知道了"))))))};p.propTypes={tipText:i.a.string,visible:i.a.bool,onCancel:i.a.func};t.a=p},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c="index-module_modal_RmjKt",u="index-module_tipImg_3mf06",l="index-module_closeBtn_rSEPz",s=function(e){var t=e.visible,n=e.onClose,r=e.imgUrl,a=-1!==window.navigator.userAgent.toLowerCase().indexOf("micromessenger"),i=window.appData.isDingTalkApp;return(a||i)&&t?o.a.createElement("div",{className:c},o.a.createElement("div",{className:u},o.a.createElement("img",{src:r})),o.a.createElement("div",{onClick:n,className:l},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*McjkTZ88-0cAAAAAAAAAAAAAARQnAQ"}))):null};s.propTypes={visible:i.a.bool,onClose:i.a.func,imgUrl:i.a.string};t.a=s},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(10),i=n.n(a),c=n(208),u="index-module_empty_cm8z3",l="index-module_bordered_+Ol6l",s="index-module_spin_+oV4d";t.a=function(e){var t,n,r,a=e.children,f=e.loading,d=e.className,p=e.bordered,m=e.useSpin,h=i()(u,d,(r=p,(n=l)in(t={})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),y=m?o.a.createElement("span",{className:s},o.a.createElement(c.a,null)):__("加载中");return o.a.createElement("div",{className:h},f?y:a||__("暂无数据"))}},function(e,t,n){"use strict";var r=n(231),o=n.n(r),a=(n(120),n(63)),i=n(0),c=n.n(i),u=n(2),l=n.n(u),s=n(2254),f=(n(144),n(33)),d=n(42),p=n.n(d),m=n(10),h=n.n(m),y=n(210),v=n(1469),b=n(1224),g=n(259),_=n(2219),w=n(1353),E=n(256);var O=function(e){var t=e.item,n=e.orderBy,r=e.noteTags,o=e.currentTag,i=e.searchValue,u=e.isLiteViewMode,l=e.onRemoveNote,s=e.onPublishSuccess,d="item-".concat(t.id,"-").concat(t.content_updated_at),m=t.content_updated_at,O=t.first_published_at,x=t.description,j=t.tags,k=void 0===j?[]:j,S=p()((function(e){return Object(_.a)({disableAutoFocus:!0,note:t,onRemoveNote:l,onPublishSuccess:s}),e.preventDefault(),!1}),200),C=function(){var e=k&&k.map((function(e){var t=r&&r.find((function(t){var n;return(null===(n=t.tag_meta)||void 0===n?void 0:n.id)===e}));return t?{tag_map_id:e,tag_meta:t.tag_meta}:null})).filter((function(e){return!!e}));return e&&!!e.length?c.a.createElement("div",{className:E.a.tagList,onClick:S},e.map((function(e){var t,n=null===(t=e.tag_meta)||void 0===t?void 0:t.name;if(!n)return null;var r,a,i,u=n.length>20?"".concat(n.slice(0,20),"..."):n;return c.a.createElement("span",{key:n,className:h()(E.a.tagName,(r={},a=E.a.selectedTagName,i=o===n,a in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i,r))},u)}))):null},N=function(){var e=n===g.ORDER_BY.content_updated_at?m:O,t=u&&new Date(m).getFullYear()!==(new Date).getFullYear();return c.a.createElement("span",{className:E.a.dateTime},b.default.format(e,{onlyDate:t}))},P=function(){return c.a.createElement("div",{className:E.a.action,onClick:function(){Object(w.a)({note:t,onRemoveNote:l})}},c.a.createElement(y.IconIconListmoreMini,{width:16,height:16,color:"#BEC0BF"}))};return c.a.createElement(a.a,{className:E.a.noteItem},t.type===g.TYPE.todo&&c.a.createElement("div",{className:E.a.todoActionWrapper},c.a.createElement("div",{className:E.a.todoStatus},t.status===g.STATUS.ready?__("已完成"):__("待完成")),!i&&c.a.createElement(f.a,{value:t.status===g.STATUS.unReady,onValueChange:function(e){}})),c.a.createElement("div",{className:h()(E.a.noteViewer,"note-viewer"),onClick:S},c.a.createElement("div",{className:E.a.noteViewerPreventEvent},c.a.createElement(v.a,{query:i,docId:t.doclet_id,key:"".concat(d,"-description"),content:x,dynamicData:t.doc_dynamic_data,onReady:function(e){return function(e,t){if(e&&!e.container_loaded){e.container_loaded=!0;var n=x&&x.endsWith(g.VIEW_MORE_TAG);try{var r=decodeURIComponent(x);/codeblock/.test(r)&&r.split("\\n").length>10&&(n=!0)}catch(a){}var o=e.getBoundingClientRect().height;(n||o>=window.screen.availHeight/2)&&e.closest(".note-viewer").classList.add("note-viewer-mask")}}(e)}}))),c.a.createElement(C,null),c.a.createElement("div",{className:E.a.footer},c.a.createElement(N,null),!i&&c.a.createElement(P,null)))};O.propTypes={item:l.a.object,orderBy:l.a.string,currentTag:l.a.string,searchValue:l.a.string,noteTags:l.a.array,isLiteViewMode:l.a.bool,onRemoveNote:l.a.func,onPublishSuccess:l.a.func};var x=O;function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t=e.orderBy,n=e.listData,r=e.listLoading,u=e.hasMore,l=e.queryParams,f=e.searchValue,d=e.isFilterActive,p=e.getNotes,m=e.onRemoveNote,h=e.onPublishSuccess,y=e.onClearFilter,v=e.noteTags,b=Object(i.useRef)(null);Object(i.useEffect)((function(){if(window.IntersectionObserver){var e=new IntersectionObserver((function(e){var t;e&&null!==(t=e[0])&&void 0!==t&&t.isIntersecting&&(null==p||p())}),{threshold:.2});return setTimeout((function(){b.current&&(null==e||e.observe(b.current))}),200),function(){b.current&&(null==e||e.unobserve(b.current))}}}),[b,n]),Object(i.useEffect)((function(){setTimeout((function(){var e=document.querySelector("#note-list");if(e){var t,n=j(e.querySelectorAll(".yuque-doc-content"));try{for(n.s();!(t=n.n()).done;){var r=t.value;f?(r.searchPad||(r.searchPad=new s.a({target:r,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}}})),r.searchPad.find(f.trim())):r.searchPad&&r.searchPad.clear()}}catch(o){n.e(o)}finally{n.f()}}}),100)}),[n]);var g;return r?c.a.createElement("div",{className:E.a.noteListSkeletonWrapper},new Array(4).fill(1).map((function(){return c.a.createElement(a.a,{className:E.a.noteItem},c.a.createElement("div",{className:E.a.noteSkeletonLine,style:{width:"20%"}}),c.a.createElement("div",{className:E.a.noteSkeletonLine}),c.a.createElement("div",{className:E.a.noteSkeletonLine}),c.a.createElement("div",{className:E.a.noteSkeletonLine}),c.a.createElement("div",{className:E.a.noteSkeletonLine,style:{width:"30%"}}))}))):o()(n)?c.a.createElement("div",{className:E.a.emptyWrapper},r?null:f?c.a.createElement("div",{className:E.a.searchEmpty},c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*JDfUTZWXGDQAAAAAAAAAAAAAARQnAQ"}),c.a.createElement("p",null,__("暂无相关内容"))):d?c.a.createElement("div",{className:E.a.filterEmpty},c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*JDfUTZWXGDQAAAAAAAAAAAAAARQnAQ"}),c.a.createElement("p",null,__("暂无相关内容"),c.a.createElement("span",{className:E.a.bold,onClick:y},__("，点击清空筛选条件")))):c.a.createElement("div",{className:E.a.empty},c.a.createElement("p",null,__("点击创建小记")),c.a.createElement("p",{className:E.a.img},c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*mQ2KTLGmXAQAAAAAAAAAAAAAARQnAQ"})))):c.a.createElement("div",{className:E.a.noteListWrapper},c.a.createElement("div",{className:E.a.noteList,id:"note-list"},(g=n,r?null:g.sort((function(e,n){return new Date(n[t]).getTime()-new Date(e[t]).getTime()})).map((function(e){return c.a.createElement(x,{key:e.id,item:e,orderBy:t,noteTags:v,currentTag:l.tag,searchValue:f,onRemoveNote:m,onPublishSuccess:h})}))),r?null:u?c.a.createElement("div",{className:E.a.loadMoreBtn,onClick:function(){return p()},ref:b},__("点击加载更多")):n&&n.length>9?c.a.createElement("div",{className:E.a.theEndTips},__("已经到底啦")):void 0))};S.propTypes={noteType:l.a.string,orderBy:l.a.string,queryParams:l.a.object,searchValue:l.a.string,listData:l.a.array,listLoading:l.a.bool,hasMore:l.a.bool,isFilterActive:l.a.bool,getNotes:l.a.func,onRemoveNote:l.a.func,onPublishSuccess:l.a.func,onClearFilter:l.a.func,noteTags:l.a.array};t.a=S},function(e,t,n){"use strict";n(162)},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(10),u=n.n(c),l=n(38),s=n(370),f="index-module_scene_P-3cO",d="index-module_mobile_9VFjd",p="index-module_beta_fu4ah",m="index-module_info_CR0cW",h="index-module_icon_-3bHo",y="index-module_desc_IRmA1",v="index-module_checked_lu9Q5",b="index-module_selected_9GTsK",g="index-module_bookScenes_3BhMT",_="index-module_groupScenes_Q4rR3";function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=e.scenes,n=e.isMobile,r=e.selected||{};return o.a.createElement("ul",{className:g},t.filter((function(e){return!1!==e.show_in_create_entry})).map((function(t){var a;return o.a.createElement("li",{key:t.name,className:u()(f,(a={},w(a,b,r.id===t.id),w(a,d,n),a)),onClick:function(){e.onSelect(t)},"data-aspm-click":t.spm.factory,"data-testid":"scene-".concat(t.id)},o.a.createElement(l.b,{name:t.icon,width:50,height:50}),o.a.createElement("div",{className:m},o.a.createElement("h4",null,t.name,t.isBeta&&o.a.createElement(l.b,{name:"beta",className:p,width:32,height:16})),o.a.createElement("p",{className:y},t.desc)),n&&o.a.createElement("div",{className:v},r.id===t.id&&o.a.createElement(s.a,null)))})))}function O(e){var t=e.scenes,n=e.selected||{};return o.a.createElement("ul",{className:"".concat(_," ").concat(e.className||"")},t.map((function(t){return o.a.createElement("li",{key:t.id,className:u()(f,w({},b,n.id===t.id)),onClick:function(){e.onSelect(t)},"data-aspm-click":t.spm.factory,"data-testid":"scene-".concat(t.id)},o.a.createElement("div",{className:h},o.a.createElement(l.b,{name:t.icon,width:26,height:26})),o.a.createElement("div",{className:m},o.a.createElement("span",{"data-feature-guide-container":"group-add-scene-".concat(t.id)},t.name),o.a.createElement("p",{className:y},t.desc)))})))}E.defaultProps={isMobile:window.h5},E.propTypes={scenes:i.a.array.isRequired,selected:i.a.object,onSelect:i.a.func,isMobile:i.a.bool},O.propTypes={className:i.a.string,scenes:i.a.array.isRequired,selected:i.a.object,onSelect:i.a.func}},function(e,t,n){"use strict";n(79);var r=n(44),o=n(0),a=n.n(o),i=n(91);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,n,o,c=s(f);function f(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),t=c.call(this,e),n=d(t),o=function(){var e=t.props.guideKey;i.default.set(e,1),t.setState({visible:!1})},(r="close")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.state={visible:!1},t}return t=f,(n=[{key:"componentDidMount",value:function(){var e=this.props.guideKey;i.default.get(e)||this.setState({visible:!0})}},{key:"render",value:function(){var e=this.props.children;return a.a.createElement(r.a,{className:"lark-guide-modal",maskClosable:!1,width:880,visible:this.state.visible,onCancel:this.close},e)}}])&&u(t.prototype,n),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.PureComponent);t.a=m},function(e,t,n){"use strict";n(175);var r=n(84),o=n(0),a=n.n(o),i=n(2),c=n.n(i),u=n(10),l=n.n(u),s=n(1470),f=n(318),d=n(370),p=n(263),m=n(34),h="add-tag-module_wrapper_1TA1A",y="add-tag-module_isFocus_MLIaH",v="add-tag-module_addBtnWrapper_zA3vY",b="add-tag-module_input_R-Zri",g="add-tag-module_addBtn_6deR4",_="add-tag-module_addBtnDisabled_MHZfM",w="add-tag-module_contentWrapper_ivGdu",E="add-tag-module_whiteBg_HSoJR",O="add-tag-module_create_vdrCf",x="add-tag-module_listWrapper_R-qox",j="add-tag-module_list_neGf0",k="add-tag-module_item_1VMWH",S="add-tag-module_itemText_sSm81",C="add-tag-module_selected_7yWbA",N="add-tag-module_selectedIcon_npYhl",P="add-tag-module_icon_YV3Y9";function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(){I=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return j()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=_(i,n);if(c){if(c===s)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var s={};function f(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(x([])));y&&y!==t&&n.call(y,o)&&(m=y);var v=p.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function r(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==T(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,s;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,c(v,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new g(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function R(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){R(a,r,o,i,c,"next",e)}function c(e){R(a,r,o,i,c,"throw",e)}i(void 0)}))}}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(u){c=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e){var t=e.visible,n=function(e){var t=e.noteId,n=e.onChange,r=e.currentNoteTags,a=e.visible,i=e.onClose,c=e.engine,u=M(Object(o.useState)([]),2),l=u[0],d=u[1],p=M(Object(o.useState)(""),2),h=p[0],y=p[1],v=M(Object(o.useState)([]),2),b=v[0],g=v[1],_=M(Object(o.useState)(!1),2),w=_[0],E=_[1],O=Object(o.useRef)(null);Object(o.useEffect)((function(){var e,t;a?(null===(e=O.current)||void 0===e||e.focus(),E(!0)):(y(""),null===(t=O.current)||void 0===t||t.blur(),E(!1))}),[a]);var x=function(){var e=D(I().mark((function e(){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.tagMetas.find({target_id:t,target_type:s.TARGET_TYPE.Note});case 2:n=e.sent,d(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=D(I().mark((function e(o){var a,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.tagMaps.create({target_type:s.TARGET_TYPE.Note,target_id:t,tag_meta_id:o.id});case 2:(a=e.sent)&&(u=[a].concat(L(r)),n(u),y(""),i(),null==c||c.focusToEnd());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=D(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=l.find((function(e){return e.name===t})))){e.next=3;break}return e.abrupt("return",j(n));case 3:return e.next=5,m.a.tagMetas.create({target_type:s.TARGET_TYPE.Note,name:t});case 5:(r=e.sent)&&j(r),x();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){setTimeout((function(){x()}),200)}),[]),Object(o.useEffect)((function(){if(h)if(l){var e=l.filter((function(e){return e.name.includes(h)}));g(Object(f.orderTag)(e,r))}else g([]);else g(Object(f.orderTag)(l,r))}),[l,h,r]),Object(o.useEffect)((function(){var e,t=function(){window.visualViewport.height===window.screen.height&&i()};return a&&(null===(e=window.visualViewport)||void 0===e||e.addEventListener("resize",t,!1)),function(){var e;null===(e=window.visualViewport)||void 0===e||e.removeEventListener("resize",t,!1)}}),[a]),{state:{inputValue:h,suggestData:b,inputRef:O,isFocus:w},setInputValue:y,onSelect:j,onCreateTag:k}}(e),i=n.state,c=i.inputValue,u=i.suggestData,T=i.inputRef,R=i.isFocus,F=n.setInputValue,B=n.onSelect,U=n.onCreateTag;if(!t)return null;var z=a.a.createElement("div",{className:w,onMouseDown:function(e){e.preventDefault()}},a.a.createElement("div",{className:E}),a.a.createElement("div",{className:x},a.a.createElement("ul",{className:j},u.map((function(e){return a.a.createElement("li",{key:e.name,className:l()(k,A({},C,e.selected)),onClick:function(t){e.selected||(B(e),t.preventDefault())}},a.a.createElement("div",{className:S},e.name,e.selected&&a.a.createElement(d.a,{className:N})))})))));return c&&!u.length&&(z=a.a.createElement("div",{className:l()(w,O),onClick:function(){return U(c)},onMouseDown:function(e){e.preventDefault()}},a.a.createElement(p.a,{className:P}),__("暂无标签 “{name}”，点击创建",{name:c}))),a.a.createElement("div",{className:l()(h,A({},y,R))},a.a.createElement(r.a,{overlayClassName:"mobile-add-tag",placement:"topRight",content:z,getPopupContainer:function(e){return e.parentNode},transitionName:"ant-slide-up",visible:!0},a.a.createElement("div",{className:v},a.a.createElement("input",{ref:T,placeholder:__("输入标签名"),className:b,value:c,onChange:function(e){return F(e.target.value)},onKeyDown:function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),e.stopPropagation(),U(e.target.value))}}),a.a.createElement("span",{className:l()(g,A({},_,!c)),onClick:function(e){e.preventDefault(),e.stopPropagation(),c&&U(c)}},__("创建")))))}U.propTypes={currentNoteTags:c.a.array,noteId:c.a.number,onChange:c.a.func,onClose:c.a.func,visible:c.a.bool,engine:c.a.object};t.a=U},function(e,t,n){"use strict";n(162),n(396)}]]);