/*! For license information please see c__Lakex.91c1adfb.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1059:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="BarsOutlined";t.a=a.forwardRef(c)},106:function(e,t,n){var r=n(391),a=n(1074);function i(t,n,o){return a()?(e.exports=i=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&r(i,n.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(null,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},1062:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="DownloadOutlined";t.a=a.forwardRef(c)},1063:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="UpOutlined";t.a=a.forwardRef(c)},1064:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="PictureTwoTone";t.a=a.forwardRef(c)},1065:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="FileTwoTone";t.a=a.forwardRef(c)},1066:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="PaperClipOutlined";t.a=a.forwardRef(c)},1072:function(e,t,n){var r=n(3);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1073:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="CaretRightOutlined";t.a=a.forwardRef(c)},1074:function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},1084:function(e,t,n){"use strict";var r=n(1085),a=n(1086),i=n(697),o=n(1087),c=n(1088);function l(e){if(!(this instanceof l))return new l(e);var t=r(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}l.from=function(e){if("string"==typeof e)return new l(e);if(e instanceof l){var t=new l("");return t.err=e.err,t.segments=e.segments.map((function(e){return e.slice()})),t.__stack=e.__stack.map((function(e){return i().matrix(e.toArray())})),t}throw new Error("SvgPath.from: invalid param type "+e)},l.prototype.__matrix=function(e){var t,n=this;e.queue.length&&this.iterate((function(r,a,i,o){var l,s,u,d;switch(r[0]){case"v":s=0===(l=e.calc(0,r[1],!0))[0]?["v",l[1]]:["l",l[0],l[1]];break;case"V":s=(l=e.calc(i,r[1],!1))[0]===e.calc(i,o,!1)[0]?["V",l[1]]:["L",l[0],l[1]];break;case"h":s=0===(l=e.calc(r[1],0,!0))[1]?["h",l[0]]:["l",l[0],l[1]];break;case"H":s=(l=e.calc(r[1],o,!1))[1]===e.calc(i,o,!1)[1]?["H",l[0]]:["L",l[0],l[1]];break;case"a":case"A":var h=e.toArray(),f=c(r[1],r[2],r[3]).transform(h);if(h[0]*h[3]-h[1]*h[2]<0&&(r[5]=r[5]?"0":"1"),l=e.calc(r[6],r[7],"a"===r[0]),"A"===r[0]&&r[6]===i&&r[7]===o||"a"===r[0]&&0===r[6]&&0===r[7]){s=["a"===r[0]?"l":"L",l[0],l[1]];break}s=f.isDegenerate()?["a"===r[0]?"l":"L",l[0],l[1]]:[r[0],f.rx,f.ry,f.ax,r[4],r[5],l[0],l[1]];break;case"m":d=a>0,s=["m",(l=e.calc(r[1],r[2],d))[0],l[1]];break;default:for(s=[u=r[0]],d=u.toLowerCase()===u,t=1;t<r.length;t+=2)l=e.calc(r[t],r[t+1],d),s.push(l[0],l[1])}n.segments[a]=s}),!0)},l.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(e=i(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}},l.prototype.toString=function(){var e="",t="",n=!1;this.__evaluateStack();for(var r=0,a=this.segments.length;r<a;r++){var i=this.segments[r],o=i[0];o!==t||"m"===o||"M"===o?("m"===o&&"z"===t&&(e+=" "),e+=o,n=!1):n=!0;for(var c=1;c<i.length;c++){var l=i[c];1===c?n&&l>=0&&(e+=" "):l>=0&&(e+=" "),e+=l}t=o}return e},l.prototype.translate=function(e,t){return this.__stack.push(i().translate(e,t||0)),this},l.prototype.scale=function(e,t){return this.__stack.push(i().scale(e,t||0===t?t:e)),this},l.prototype.rotate=function(e,t,n){return this.__stack.push(i().rotate(e,t||0,n||0)),this},l.prototype.skewX=function(e){return this.__stack.push(i().skewX(e)),this},l.prototype.skewY=function(e){return this.__stack.push(i().skewY(e)),this},l.prototype.matrix=function(e){return this.__stack.push(i().matrix(e)),this},l.prototype.transform=function(e){return e.trim()?(this.__stack.push(a(e)),this):this},l.prototype.round=function(e){var t,n=0,r=0,a=0,i=0;return e=e||0,this.__evaluateStack(),this.segments.forEach((function(o){var c=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":return c&&(o[1]+=a),a=o[1]-o[1].toFixed(e),void(o[1]=+o[1].toFixed(e));case"V":case"v":return c&&(o[1]+=i),i=o[1]-o[1].toFixed(e),void(o[1]=+o[1].toFixed(e));case"Z":case"z":return a=n,void(i=r);case"M":case"m":return c&&(o[1]+=a,o[2]+=i),a=o[1]-o[1].toFixed(e),i=o[2]-o[2].toFixed(e),n=a,r=i,o[1]=+o[1].toFixed(e),void(o[2]=+o[2].toFixed(e));case"A":case"a":return c&&(o[6]+=a,o[7]+=i),a=o[6]-o[6].toFixed(e),i=o[7]-o[7].toFixed(e),o[1]=+o[1].toFixed(e),o[2]=+o[2].toFixed(e),o[3]=+o[3].toFixed(e+2),o[6]=+o[6].toFixed(e),void(o[7]=+o[7].toFixed(e));default:return t=o.length,c&&(o[t-2]+=a,o[t-1]+=i),a=o[t-2]-o[t-2].toFixed(e),i=o[t-1]-o[t-1].toFixed(e),void o.forEach((function(t,n){n&&(o[n]=+o[n].toFixed(e))}))}})),this},l.prototype.iterate=function(e,t){var n,r,a,i=this.segments,o={},c=!1,l=0,s=0,u=0,d=0;if(t||this.__evaluateStack(),i.forEach((function(t,n){var r=e(t,n,l,s);Array.isArray(r)&&(o[n]=r,c=!0);var a=t[0]===t[0].toLowerCase();switch(t[0]){case"m":case"M":return l=t[1]+(a?l:0),s=t[2]+(a?s:0),u=l,void(d=s);case"h":case"H":return void(l=t[1]+(a?l:0));case"v":case"V":return void(s=t[1]+(a?s:0));case"z":case"Z":return l=u,void(s=d);default:l=t[t.length-2]+(a?l:0),s=t[t.length-1]+(a?s:0)}})),!c)return this;for(a=[],n=0;n<i.length;n++)if(void 0!==o[n])for(r=0;r<o[n].length;r++)a.push(o[n][r]);else a.push(i[n]);return this.segments=a,this},l.prototype.abs=function(){return this.iterate((function(e,t,n,r){var a,i=e[0],o=i.toUpperCase();if(i!==o)switch(e[0]=o,i){case"v":return void(e[1]+=r);case"a":return e[6]+=n,void(e[7]+=r);default:for(a=1;a<e.length;a++)e[a]+=a%2?n:r}}),!0),this},l.prototype.rel=function(){return this.iterate((function(e,t,n,r){var a,i=e[0],o=i.toLowerCase();if(i!==o&&(0!==t||"M"!==i))switch(e[0]=o,i){case"V":return void(e[1]-=r);case"A":return e[6]-=n,void(e[7]-=r);default:for(a=1;a<e.length;a++)e[a]-=a%2?n:r}}),!0),this},l.prototype.unarc=function(){return this.iterate((function(e,t,n,r){var a,i,c,l=[],s=e[0];return"A"!==s&&"a"!==s?null:("a"===s?(i=n+e[6],c=r+e[7]):(i=e[6],c=e[7]),0===(a=o(n,r,i,c,e[4],e[5],e[1],e[2],e[3])).length?[["a"===e[0]?"l":"L",e[6],e[7]]]:(a.forEach((function(e){l.push(["C",e[2],e[3],e[4],e[5],e[6],e[7]])})),l))})),this},l.prototype.unshort=function(){var e,t,n,r,a,i=this.segments;return this.iterate((function(o,c,l,s){var u,d=o[0],h=d.toUpperCase();c&&("T"===h?(u="t"===d,"Q"===(n=i[c-1])[0]?(e=n[1]-l,t=n[2]-s):"q"===n[0]?(e=n[1]-n[3],t=n[2]-n[4]):(e=0,t=0),r=-e,a=-t,u||(r+=l,a+=s),i[c]=[u?"q":"Q",r,a,o[1],o[2]]):"S"===h&&(u="s"===d,"C"===(n=i[c-1])[0]?(e=n[3]-l,t=n[4]-s):"c"===n[0]?(e=n[3]-n[5],t=n[4]-n[6]):(e=0,t=0),r=-e,a=-t,u||(r+=l,a+=s),i[c]=[u?"c":"C",r,a,o[1],o[2],o[3],o[4]]))})),this},e.exports=l},1085:function(e,t,n){"use strict";var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},a=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function i(e){return e>=48&&e<=57}function o(e){return e>=48&&e<=57||43===e||45===e||46===e}function c(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function l(e){for(;e.index<e.max&&(10===(t=e.path.charCodeAt(e.index))||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&a.indexOf(t)>=0);)e.index++;var t}function s(e){var t=e.path.charCodeAt(e.index);return 48===t?(e.param=0,void e.index++):49===t?(e.param=1,void e.index++):void(e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")")}function u(e){var t,n=e.index,r=n,a=e.max,o=!1,c=!1,l=!1,s=!1;if(r>=a)e.err="SvgPath: missed param (at pos "+r+")";else if(43!==(t=e.path.charCodeAt(r))&&45!==t||(t=++r<a?e.path.charCodeAt(r):0),i(t)||46===t){if(46!==t){if(o=48===t,t=++r<a?e.path.charCodeAt(r):0,o&&r<a&&t&&i(t))return void(e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+n+")");for(;r<a&&i(e.path.charCodeAt(r));)r++,c=!0;t=r<a?e.path.charCodeAt(r):0}if(46===t){for(s=!0,r++;i(e.path.charCodeAt(r));)r++,l=!0;t=r<a?e.path.charCodeAt(r):0}if(101===t||69===t){if(s&&!c&&!l)return void(e.err="SvgPath: invalid float exponent (at pos "+r+")");if(43!==(t=++r<a?e.path.charCodeAt(r):0)&&45!==t||r++,!(r<a&&i(e.path.charCodeAt(r))))return void(e.err="SvgPath: invalid float exponent (at pos "+r+")");for(;r<a&&i(e.path.charCodeAt(r));)r++}e.index=r,e.param=parseFloat(e.path.slice(n,r))+0}else e.err="SvgPath: param should start with 0..9 or `.` (at pos "+r+")"}function d(e){var t,n;n=(t=e.path[e.segmentStart]).toLowerCase();var a=e.data;if("m"===n&&a.length>2&&(e.result.push([t,a[0],a[1]]),a=a.slice(2),n="l",t="m"===t?"l":"L"),"r"===n)e.result.push([t].concat(a));else for(;a.length>=r[n]&&(e.result.push([t].concat(a.splice(0,r[n]))),r[n]););}function h(e){var t,n,a,i,c,h=e.max;if(e.segmentStart=e.index,t=e.path.charCodeAt(e.index),n=97==(32|t),function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(t))if(i=r[e.path[e.index].toLowerCase()],e.index++,l(e),e.data=[],i){for(a=!1;;){for(c=i;c>0;c--){if(!n||3!==c&&4!==c?u(e):s(e),e.err.length)return;e.data.push(e.param),l(e),a=!1,e.index<h&&44===e.path.charCodeAt(e.index)&&(e.index++,l(e),a=!0)}if(!a){if(e.index>=e.max)break;if(!o(e.path.charCodeAt(e.index)))break}}d(e)}else d(e);else e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")"}e.exports=function(e){var t=new c(e),n=t.max;for(l(t);t.index<n&&!t.err.length;)h(t);return t.err.length?t.result=[]:t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}}},1086:function(e,t,n){"use strict";var r=n(697),a={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},i=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,o=/[\s,]+/;e.exports=function(e){var t,n,c=new r;return e.split(i).forEach((function(e){if(e.length)if(void 0===a[e])switch(n=e.split(o).map((function(e){return+e||0})),t){case"matrix":return void(6===n.length&&c.matrix(n));case"scale":return void(1===n.length?c.scale(n[0],n[0]):2===n.length&&c.scale(n[0],n[1]));case"rotate":return void(1===n.length?c.rotate(n[0],0,0):3===n.length&&c.rotate(n[0],n[1],n[2]));case"translate":return void(1===n.length?c.translate(n[0],0):2===n.length&&c.translate(n[0],n[1]));case"skewX":return void(1===n.length&&c.skewX(n[0]));case"skewY":return void(1===n.length&&c.skewY(n[0]))}else t=e})),c}},1087:function(e,t,n){"use strict";var r=2*Math.PI;function a(e,t,n,r){var a=e*n+t*r;return a>1&&(a=1),a<-1&&(a=-1),(e*r-t*n<0?-1:1)*Math.acos(a)}function i(e,t){var n=4/3*Math.tan(t/4),r=Math.cos(e),a=Math.sin(e),i=Math.cos(e+t),o=Math.sin(e+t);return[r,a,r-a*n,a+r*n,i+o*n,o-i*n,i,o]}e.exports=function(e,t,n,o,c,l,s,u,d){var h=Math.sin(d*r/360),f=Math.cos(d*r/360),p=f*(e-n)/2+h*(t-o)/2,m=-h*(e-n)/2+f*(t-o)/2;if(0===p&&0===m)return[];if(0===s||0===u)return[];s=Math.abs(s),u=Math.abs(u);var y=p*p/(s*s)+m*m/(u*u);y>1&&(s*=Math.sqrt(y),u*=Math.sqrt(y));var g=function(e,t,n,i,o,c,l,s,u,d){var h=d*(e-n)/2+u*(t-i)/2,f=-u*(e-n)/2+d*(t-i)/2,p=l*l,m=s*s,y=h*h,g=f*f,v=p*m-p*g-m*y;v<0&&(v=0),v/=p*g+m*y;var b=(v=Math.sqrt(v)*(o===c?-1:1))*l/s*f,x=v*-s/l*h,k=d*b-u*x+(e+n)/2,w=u*b+d*x+(t+i)/2,C=(h-b)/l,E=(f-x)/s,O=(-h-b)/l,P=(-f-x)/s,M=a(1,0,C,E),j=a(C,E,O,P);return 0===c&&j>0&&(j-=r),1===c&&j<0&&(j+=r),[k,w,M,j]}(e,t,n,o,c,l,s,u,h,f),v=[],b=g[2],x=g[3],k=Math.max(Math.ceil(Math.abs(x)/(r/4)),1);x/=k;for(var w=0;w<k;w++)v.push(i(b,x)),b+=x;return v.map((function(e){for(var t=0;t<e.length;t+=2){var n=e[t+0],r=e[t+1],a=f*(n*=s)-h*(r*=u),i=h*n+f*r;e[t+0]=a+g[0],e[t+1]=i+g[1]}return e}))}},1088:function(e,t,n){"use strict";var r=1e-10,a=Math.PI/180;function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.rx=e,this.ry=t,this.ax=n}i.prototype.transform=function(e){var t=Math.cos(this.ax*a),n=Math.sin(this.ax*a),i=[this.rx*(e[0]*t+e[2]*n),this.rx*(e[1]*t+e[3]*n),this.ry*(-e[0]*n+e[2]*t),this.ry*(-e[1]*n+e[3]*t)],o=i[0]*i[0]+i[2]*i[2],c=i[1]*i[1]+i[3]*i[3],l=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),s=(o+c)/2;if(l<r*s)return this.rx=this.ry=Math.sqrt(s),this.ax=0,this;var u=i[0]*i[1]+i[2]*i[3],d=s+(l=Math.sqrt(l))/2,h=s-l/2;return this.ax=Math.abs(u)<r&&Math.abs(d-c)<r?90:180*Math.atan(Math.abs(u)>Math.abs(d-c)?(d-o)/u:u/(d-c))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(d),this.ry=Math.sqrt(h)):(this.ax+=90,this.rx=Math.sqrt(h),this.ry=Math.sqrt(d)),this},i.prototype.isDegenerate=function(){return this.rx<r*this.ry||this.ry<r*this.rx},e.exports=i},1251:function(e,t,n){"use strict";var r,a=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(e){return"string"==typeof e&&o.test(e)},l=[],s=0;s<256;++s)l.push((s+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return u(r)}},133:function(e,t,n){},145:function(e,t,n){"use strict";n(896);var r=n(378);n(345);t.a=r.a},175:function(e,t,n){},179:function(e,t,n){"use strict";var r=n(891),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,o,c,l,s,u=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),c=document.createRange(),l=document.getSelection(),(s=document.createElement("span")).textContent=e,s.ariaHidden="true",s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=a[t.format]||a.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(s),c.selectNodeContents(s),l.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(d){n&&console.error("unable to copy using execCommand: ",d),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(d){n&&console.error("unable to copy using clipboardData: ",d),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(c):l.removeAllRanges()),s&&document.body.removeChild(s),o()}return u}},196:function(e,t,n){"use strict";n(976);var r=n(347);n(344);t.a=r.a},20:function(e,t,n){var r=n(1072);function a(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=a=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var a=r(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},200:function(e,t,n){"use strict";n(550);var r=n(320);n(351);t.a=r.a},230:function(e,t,n){"use strict";n(1235);var r=n(708);n(350);t.a=r.a},233:function(e,t,n){"use strict";n(1067);var r=n(390),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(10),s=n.n(l),u=n(59),d=n.n(u),h=(n(612),["className","title"]);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.className,a=e.title,o=g(e,h),c={},l=s()("larkui-skeleton",n);return a&&(a.size&&(l=s()(l,{"larkui-skeleton-title-sm":"sm"===a.size})),a.width&&(c.title={width:a.width})),i.a.createElement(r.a,y({className:l,ref:t},c,o))}));v.propTypes=p(p({},r.a.SkeletonProps),{},{className:c.a.string}),d()(v,r.a),t.a=v},239:function(e,t,n){"use strict";n(1233);var r=n(707);n(360);t.a=r.a},245:function(e,t,n){},272:function(e,t){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},273:function(e,t,n){const r=n(570),a=n(571);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}},283:function(e,t,n){"use strict";n(1242);var r=n(82);t.a=r.b},284:function(e,t,n){"use strict";n(1239);var r=n(714);n(421);t.a=r.a},31:function(e,t,n){"use strict";n(698);var r=n(108),a=n(0),i=n.n(a),o=n(59),c=n.n(o),l=(n(133),["onKeyDown"]);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var f=[37,38,39,40],p=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],m=function(e){var t,n=e.onKeyDown,r=h(e,l),o=Object(a.useCallback)((t=n,function(e){return!(!p.includes(e.key)&&!f.includes(e.keyCode))||t(e)}),[n]);return i.a.createElement("ul",d({},r,{onKeyDown:o}))},y=i.a.forwardRef((function(e){var t=d({},e);return i.a.createElement(r.a,d({component:m},t))}));y.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.a.MenuProps),c()(y,r.a),t.a=y},310:function(e,t,n){var r=n(393),a=n(392),i=n(307),o=n(394);e.exports=function(e){return r(e)||a(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},325:function(e,t,n){var r;!function(a,i,o,c){"use strict";var l,s=["","webkit","Moz","MS","ms","o"],u=i.createElement("div"),d=Math.round,h=Math.abs,f=Date.now;function p(e,t,n){return setTimeout(k(e,n),t)}function m(e,t,n){return!!Array.isArray(e)&&(y(e,n[t],n),!0)}function y(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==c)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function g(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=a.console&&(a.console.warn||a.console.log);return i&&i.call(a.console,r,n),e.apply(this,arguments)}}l="function"!=typeof Object.assign?function(e){if(e===c||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==c&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t}:Object.assign;var v=g((function(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;)(!n||n&&e[r[a]]===c)&&(e[r[a]]=t[r[a]]),a++;return e}),"extend","Use `assign`."),b=g((function(e,t){return v(e,t,!0)}),"merge","Use `assign`.");function x(e,t,n){var r,a=t.prototype;(r=e.prototype=Object.create(a)).constructor=e,r._super=a,n&&l(r,n)}function k(e,t){return function(){return e.apply(t,arguments)}}function w(e,t){return"function"==typeof e?e.apply(t&&t[0]||c,t):e}function C(e,t){return e===c?t:e}function E(e,t,n){y(j(t),(function(t){e.addEventListener(t,n,!1)}))}function O(e,t,n){y(j(t),(function(t){e.removeEventListener(t,n,!1)}))}function P(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function M(e,t){return e.indexOf(t)>-1}function j(e){return e.trim().split(/\s+/g)}function S(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function R(e){return Array.prototype.slice.call(e,0)}function L(e,t,n){for(var r=[],a=[],i=0;i<e.length;){var o=t?e[i][t]:e[i];S(a,o)<0&&r.push(e[i]),a[i]=o,i++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function A(e,t){for(var n,r,a=t[0].toUpperCase()+t.slice(1),i=0;i<s.length;){if((r=(n=s[i])?n+a:t)in e)return r;i++}return c}var B=1;function N(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}var D="ontouchstart"in a,I=A(a,"PointerEvent")!==c,T=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),_="touch",q="mouse",z=24,F=["x","y"],Y=["clientX","clientY"];function X(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){w(e.options.enable,[e])&&n.handler(t)},this.init()}function G(e,t,n){var r=n.pointers.length,a=n.changedPointers.length,i=1&t&&r-a==0,o=12&t&&r-a==0;n.isFirst=!!i,n.isFinal=!!o,i&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,a=r.length;n.firstInput||(n.firstInput=H(t));a>1&&!n.firstMultiple?n.firstMultiple=H(t):1===a&&(n.firstMultiple=!1);var i=n.firstInput,o=n.firstMultiple,l=o?o.center:i.center,s=t.center=W(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=K(l,s),t.distance=Z(l,s),function(e,t){var n=t.center,r=e.offsetDelta||{},a=e.prevDelta||{},i=e.prevInput||{};1!==t.eventType&&4!==i.eventType||(a=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=a.x+(n.x-r.x),t.deltaY=a.y+(n.y-r.y)}(n,t),t.offsetDirection=U(t.deltaX,t.deltaY);var u=V(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=h(u.x)>h(u.y)?u.x:u.y,t.scale=o?(d=o.pointers,p=r,Z(p[0],p[1],Y)/Z(d[0],d[1],Y)):1,t.rotation=o?function(e,t){return K(t[1],t[0],Y)+K(e[1],e[0],Y)}(o.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,a,i,o=e.lastInterval||t,l=t.timeStamp-o.timeStamp;if(8!=t.eventType&&(l>25||o.velocity===c)){var s=t.deltaX-o.deltaX,u=t.deltaY-o.deltaY,d=V(l,s,u);r=d.x,a=d.y,n=h(d.x)>h(d.y)?d.x:d.y,i=U(s,u),e.lastInterval=t}else n=o.velocity,r=o.velocityX,a=o.velocityY,i=o.direction;t.velocity=n,t.velocityX=r,t.velocityY=a,t.direction=i}(n,t);var d,p;var m=e.element;P(t.srcEvent.target,m)&&(m=t.srcEvent.target);t.target=m}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function H(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:W(t),deltaX:e.deltaX,deltaY:e.deltaY}}function W(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var n=0,r=0,a=0;a<t;)n+=e[a].clientX,r+=e[a].clientY,a++;return{x:d(n/t),y:d(r/t)}}function V(e,t,n){return{x:t/e||0,y:n/e||0}}function U(e,t){return e===t?1:h(e)>=h(t)?e<0?2:4:t<0?8:16}function Z(e,t,n){n||(n=F);var r=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return Math.sqrt(r*r+a*a)}function K(e,t,n){n||(n=F);var r=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return 180*Math.atan2(a,r)/Math.PI}X.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(N(this.element),this.evWin,this.domHandler)}};var Q={mousedown:1,mousemove:2,mouseup:4},J="mousedown",$="mousemove mouseup";function ee(){this.evEl=J,this.evWin=$,this.pressed=!1,X.apply(this,arguments)}x(ee,X,{handler:function(e){var t=Q[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:q,srcEvent:e}))}});var te={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ne={2:_,3:"pen",4:q,5:"kinect"},re="pointerdown",ae="pointermove pointerup pointercancel";function ie(){this.evEl=re,this.evWin=ae,X.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(re="MSPointerDown",ae="MSPointerMove MSPointerUp MSPointerCancel"),x(ie,X,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),a=te[r],i=ne[e.pointerType]||e.pointerType,o=i==_,c=S(t,e.pointerId,"pointerId");1&a&&(0===e.button||o)?c<0&&(t.push(e),c=t.length-1):12&a&&(n=!0),c<0||(t[c]=e,this.callback(this.manager,a,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),n&&t.splice(c,1))}});var oe={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ce="touchstart",le="touchstart touchmove touchend touchcancel";function se(){this.evTarget=ce,this.evWin=le,this.started=!1,X.apply(this,arguments)}function ue(e,t){var n=R(e.touches),r=R(e.changedTouches);return 12&t&&(n=L(n.concat(r),"identifier",!0)),[n,r]}x(se,X,{handler:function(e){var t=oe[e.type];if(1===t&&(this.started=!0),this.started){var n=ue.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:_,srcEvent:e})}}});var de={touchstart:1,touchmove:2,touchend:4,touchcancel:8},he="touchstart touchmove touchend touchcancel";function fe(){this.evTarget=he,this.targetIds={},X.apply(this,arguments)}function pe(e,t){var n=R(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var a,i,o=R(e.changedTouches),c=[],l=this.target;if(i=n.filter((function(e){return P(e.target,l)})),1===t)for(a=0;a<i.length;)r[i[a].identifier]=!0,a++;for(a=0;a<o.length;)r[o[a].identifier]&&c.push(o[a]),12&t&&delete r[o[a].identifier],a++;return c.length?[L(i.concat(c),"identifier",!0),c]:void 0}x(fe,X,{handler:function(e){var t=de[e.type],n=pe.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:_,srcEvent:e})}});function me(){X.apply(this,arguments);var e=k(this.handler,this);this.touch=new fe(this.manager,e),this.mouse=new ee(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ye(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ge.call(this,t)):12&e&&ge.call(this,t)}function ge(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function ve(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var a=this.lastTouches[r],i=Math.abs(t-a.x),o=Math.abs(n-a.y);if(i<=25&&o<=25)return!0}return!1}x(me,X,{handler:function(e,t,n){var r=n.pointerType==_,a=n.pointerType==q;if(!(a&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)ye.call(this,t,n);else if(a&&ve.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var be=A(u.style,"touchAction"),xe=be!==c,ke="compute",we="auto",Ce="manipulation",Ee="none",Oe="pan-x",Pe="pan-y",Me=function(){if(!xe)return!1;var e={},t=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||a.CSS.supports("touch-action",n)})),e}();function je(e,t){this.manager=e,this.set(t)}je.prototype={set:function(e){e==ke&&(e=this.compute()),xe&&this.manager.element.style&&Me[e]&&(this.manager.element.style[be]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return y(this.manager.recognizers,(function(t){w(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(M(e,Ee))return Ee;var t=M(e,Oe),n=M(e,Pe);if(t&&n)return Ee;if(t||n)return t?Oe:Pe;if(M(e,Ce))return Ce;return we}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,a=M(r,Ee)&&!Me.none,i=M(r,Pe)&&!Me["pan-y"],o=M(r,Oe)&&!Me["pan-x"];if(a){var c=1===e.pointers.length,l=e.distance<2,s=e.deltaTime<250;if(c&&l&&s)return}if(!o||!i)return a||i&&6&n||o&&n&z?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Se=32;function Re(e){this.options=l({},this.defaults,e||{}),this.id=B++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Le(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Ae(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Be(e,t){var n=t.manager;return n?n.get(e):e}function Ne(){Re.apply(this,arguments)}function De(){Ne.apply(this,arguments),this.pX=null,this.pY=null}function Ie(){Ne.apply(this,arguments)}function Te(){Re.apply(this,arguments),this._timer=null,this._input=null}function _e(){Ne.apply(this,arguments)}function qe(){Ne.apply(this,arguments)}function ze(){Re.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Fe(e,t){return(t=t||{}).recognizers=C(t.recognizers,Fe.defaults.preset),new Ye(e,t)}Re.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(m(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Be(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return m(e,"dropRecognizeWith",this)||(e=Be(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(m(e,"requireFailure",this))return this;var t=this.requireFail;return-1===S(t,e=Be(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this))return this;e=Be(e,this);var t=S(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Le(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Le(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Se},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!w(this.options.enable,[this,t]))return this.reset(),void(this.state=Se);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},x(Ne,Re,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,a=this.attrTest(e);return r&&(8&n||!a)?16|t:r||a?4&n?8|t:2&t?4|t:2:Se}}),x(De,Ne,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(Pe),e&z&&t.push(Oe),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,a=e.direction,i=e.deltaX,o=e.deltaY;return a&t.direction||(6&t.direction?(a=0===i?1:i<0?2:4,n=i!=this.pX,r=Math.abs(e.deltaX)):(a=0===o?1:o<0?8:16,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=a,n&&r>t.threshold&&a&t.direction},attrTest:function(e){return Ne.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ae(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),x(Ie,Ne,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ee]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),x(Te,Re,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[we]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!a)this.reset();else if(1&e.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return Se},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),x(_e,Ne,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ee]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),x(qe,Ne,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return De.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:n&z&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&h(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Ae(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),x(ze,Re,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ce]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&a&&n){if(4!=e.eventType)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||Z(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&i?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Se},failTimeout:function(){return this._timer=p((function(){this.state=Se}),this.options.interval,this),Se},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Fe.VERSION="2.0.7",Fe.defaults={domEvents:!1,touchAction:ke,enable:!0,inputTarget:null,inputClass:null,preset:[[_e,{enable:!1}],[Ie,{enable:!1},["rotate"]],[qe,{direction:6}],[De,{direction:6},["swipe"]],[ze],[ze,{event:"doubletap",taps:2},["tap"]],[Te]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ye(e,t){var n;this.options=l({},Fe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(I?ie:T?fe:D?me:ee))(n,G),this.touchAction=new je(this,this.options.touchAction),Xe(this,!0),y(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Xe(e,t){var n,r=e.element;r.style&&(y(e.options.cssProps,(function(a,i){n=A(r.style,i),t?(e.oldCssProps[n]=r.style[n],r.style[n]=a):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}Ye.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,a=t.curRecognizer;(!a||a&&8&a.state)&&(a=t.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],2===t.stopped||a&&n!=a&&!n.canRecognizeWith(a)?n.reset():n.recognize(e),!a&&14&n.state&&(a=t.curRecognizer=n),i++}},get:function(e){if(e instanceof Re)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(m(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(m(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=S(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==c&&t!==c){var n=this.handlers;return y(j(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==c){var n=this.handlers;return y(j(e),(function(e){t?n[e]&&n[e].splice(S(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=i.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&Xe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Fe,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Se,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:z,DIRECTION_ALL:30,Manager:Ye,Input:X,TouchAction:je,TouchInput:fe,MouseInput:ee,PointerEventInput:ie,TouchMouseInput:me,SingleTouchInput:se,Recognizer:Re,AttrRecognizer:Ne,Tap:ze,Pan:De,Swipe:qe,Pinch:Ie,Rotate:_e,Press:Te,on:E,off:O,each:y,merge:b,extend:v,assign:l,inherit:x,bindFn:k,prefixed:A}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=Fe,(r=function(){return Fe}.call(t,n,t,e))===c||(e.exports=r)}(window,document)},344:function(e,t,n){},345:function(e,t,n){},350:function(e,t,n){},351:function(e,t,n){},360:function(e,t,n){},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ji})),n.d(t,"b",(function(){return Xn})),n.d(t,"c",(function(){return ll})),n.d(t,"d",(function(){return ax})),n.d(t,"e",(function(){return wo})),n.d(t,"f",(function(){return Ho})),n.d(t,"g",(function(){return Eo})),n.d(t,"h",(function(){return $t})),n.d(t,"i",(function(){return zb})),n.d(t,"j",(function(){return dr})),n.d(t,"k",(function(){return Wi})),n.d(t,"l",(function(){return li})),n.d(t,"m",(function(){return Ul})),n.d(t,"n",(function(){return Nl})),n.d(t,"o",(function(){return xa})),n.d(t,"p",(function(){return Us})),n.d(t,"q",(function(){return za})),n.d(t,"r",(function(){return Ya})),n.d(t,"s",(function(){return xc})),n.d(t,"t",(function(){return Fn})),n.d(t,"u",(function(){return Im})),n.d(t,"v",(function(){return Zl})),n.d(t,"w",(function(){return Tl}));var r=n(36),a=n(43),i=n.n(a),o=n(1),c=n.n(o),l=n(111),s=n.n(l),u=n(47),d=n.n(u),h=n(395),f=n.n(h),p=n(6),m=n.n(p),y=n(7),g=n.n(y),v=n(16),b=n.n(v),x=n(310),k=n.n(x),w=n(67),C=n(229),E=n.n(C),O=n(4),P=n.n(O),M=n(8),j=n.n(M),S=n(9),R=n.n(S),L=n(3),A=n.n(L),B=n(21),N=n.n(B),D=n(20),I=n.n(D),T=n(80),_=n.n(T),q=n(1251),z=n(99),F=n.n(z),Y=n(29),X=n.n(Y),G=n(15),H=n.n(G),W=n(22),V=n(987),U=n.n(V);const Z=Math.pow(2,-52),K=new Uint32Array(512);class Q{static from(e,t=ie,n=oe){const r=e.length,a=new Float64Array(2*r);for(let i=0;i<r;i++){const r=e[i];a[2*i]=t(r),a[2*i+1]=n(r)}return new Q(a)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:a}=this,i=e.length>>1;let o=1/0,c=1/0,l=-1/0,s=-1/0;for(let O=0;O<i;O++){const t=e[2*O],n=e[2*O+1];t<o&&(o=t),n<c&&(c=n),t>l&&(l=t),n>s&&(s=n),this._ids[O]=O}const u=(o+l)/2,d=(c+s)/2;let h,f,p,m=1/0;for(let O=0;O<i;O++){const t=J(u,d,e[2*O],e[2*O+1]);t<m&&(h=O,m=t)}const y=e[2*h],g=e[2*h+1];m=1/0;for(let O=0;O<i;O++){if(O===h)continue;const t=J(y,g,e[2*O],e[2*O+1]);t<m&&t>0&&(f=O,m=t)}let v=e[2*f],b=e[2*f+1],x=1/0;for(let O=0;O<i;O++){if(O===h||O===f)continue;const t=ne(y,g,v,b,e[2*O],e[2*O+1]);t<x&&(p=O,x=t)}let k=e[2*p],w=e[2*p+1];if(x===1/0){for(let r=0;r<i;r++)this._dists[r]=e[2*r]-e[0]||e[2*r+1]-e[1];re(this._ids,this._dists,0,i-1);const t=new Uint32Array(i);let n=0;for(let e=0,r=-1/0;e<i;e++){const a=this._ids[e];this._dists[a]>r&&(t[n++]=a,r=this._dists[a])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(ee(y,g,v,b,k,w)){const e=f,t=v,n=b;f=p,v=k,b=w,p=e,k=t,w=n}const C=function(e,t,n,r,a,i){const o=n-e,c=r-t,l=a-e,s=i-t,u=o*o+c*c,d=l*l+s*s,h=.5/(o*s-c*l);return{x:e+(s*u-c*d)*h,y:t+(o*d-l*u)*h}}(y,g,v,b,k,w);this._cx=C.x,this._cy=C.y;for(let O=0;O<i;O++)this._dists[O]=J(e[2*O],e[2*O+1],C.x,C.y);re(this._ids,this._dists,0,i-1),this._hullStart=h;let E=3;n[h]=t[p]=f,n[f]=t[h]=p,n[p]=t[f]=h,r[h]=0,r[f]=1,r[p]=2,a.fill(-1),a[this._hashKey(y,g)]=h,a[this._hashKey(v,b)]=f,a[this._hashKey(k,w)]=p,this.trianglesLen=0,this._addTriangle(h,f,p,-1,-1,-1);for(let O,P,M=0;M<this._ids.length;M++){const i=this._ids[M],o=e[2*i],c=e[2*i+1];if(M>0&&Math.abs(o-O)<=Z&&Math.abs(c-P)<=Z)continue;if(O=o,P=c,i===h||i===f||i===p)continue;let l=0;for(let e=0,t=this._hashKey(o,c);e<this._hashSize&&(l=a[(t+e)%this._hashSize],-1===l||l===n[l]);e++);l=t[l];let s,u=l;for(;s=n[u],!ee(o,c,e[2*u],e[2*u+1],e[2*s],e[2*s+1]);)if(u=s,u===l){u=-1;break}if(-1===u)continue;let d=this._addTriangle(u,i,n[u],-1,-1,r[u]);r[i]=this._legalize(d+2),r[u]=d,E++;let m=n[u];for(;s=n[m],ee(o,c,e[2*m],e[2*m+1],e[2*s],e[2*s+1]);)d=this._addTriangle(m,i,s,r[i],-1,r[m]),r[i]=this._legalize(d+2),n[m]=m,E--,m=s;if(u===l)for(;s=t[u],ee(o,c,e[2*s],e[2*s+1],e[2*u],e[2*u+1]);)d=this._addTriangle(s,i,u,-1,r[u],r[s]),this._legalize(d+2),r[s]=d,n[u]=u,E--,u=s;this._hullStart=t[i]=u,n[u]=t[m]=i,n[i]=m,a[this._hashKey(o,c)]=i,a[this._hashKey(e[2*u],e[2*u+1])]=u}this.hull=new Uint32Array(E);for(let O=0,P=this._hullStart;O<E;O++)this.hull[O]=P,P=n[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let a=0,i=0;for(;;){const o=n[e],c=e-e%3;if(i=c+(e+2)%3,-1===o){if(0===a)break;e=K[--a];continue}const l=o-o%3,s=c+(e+1)%3,u=l+(o+2)%3,d=t[i],h=t[e],f=t[s],p=t[u];if(te(r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1])){t[e]=p,t[o]=d;const r=n[u];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===u){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(o,n[i]),this._link(i,u);const c=l+(o+1)%3;a<K.length&&(K[a++]=c)}else{if(0===a)break;e=K[--a]}}return i}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,a,i){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,a),this._link(o+2,i),this.trianglesLen+=3,o}}function J(e,t,n,r){const a=e-n,i=t-r;return a*a+i*i}function $(e,t,n,r,a,i){const o=(r-t)*(a-e),c=(n-e)*(i-t);return Math.abs(o-c)>=33306690738754716e-32*Math.abs(o+c)?o-c:0}function ee(e,t,n,r,a,i){return($(a,i,e,t,n,r)||$(e,t,n,r,a,i)||$(n,r,a,i,e,t))<0}function te(e,t,n,r,a,i,o,c){const l=e-o,s=t-c,u=n-o,d=r-c,h=a-o,f=i-c,p=u*u+d*d,m=h*h+f*f;return l*(d*m-p*f)-s*(u*m-p*h)+(l*l+s*s)*(u*f-d*h)<0}function ne(e,t,n,r,a,i){const o=n-e,c=r-t,l=a-e,s=i-t,u=o*o+c*c,d=l*l+s*s,h=.5/(o*s-c*l),f=(s*u-c*d)*h,p=(o*d-l*u)*h;return f*f+p*p}function re(e,t,n,r){if(r-n<=20)for(let a=n+1;a<=r;a++){const r=e[a],i=t[r];let o=a-1;for(;o>=n&&t[e[o]]>i;)e[o+1]=e[o--];e[o+1]=r}else{let a=n+1,i=r;ae(e,n+r>>1,a),t[e[n]]>t[e[r]]&&ae(e,n,r),t[e[a]]>t[e[r]]&&ae(e,a,r),t[e[n]]>t[e[a]]&&ae(e,n,a);const o=e[a],c=t[o];for(;;){do{a++}while(t[e[a]]<c);do{i--}while(t[e[i]]>c);if(i<a)break;ae(e,a,i)}e[n+1]=e[i],e[i]=o,r-a+1>=i-n?(re(e,t,a,r),re(e,t,n,i-1)):(re(e,t,n,i-1),re(e,t,a,r))}}function ae(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ie(e){return e[0]}function oe(e){return e[1]}const ce=1e-6;class le{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const r=(e=+e)+(n=+n),a=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>ce||Math.abs(this._y1-a)>ce)&&(this._+="L"+r+","+a),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=a}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class se{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class ue{constructor(e,[t,n,r,a]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(a=+a)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=a,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this,a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let h,f,p=0,m=0,y=n.length;p<y;p+=3,m+=2){const t=2*n[p],r=2*n[p+1],i=2*n[p+2],o=e[t],c=e[t+1],l=e[r],s=e[r+1],u=e[i],d=e[i+1],y=l-o,g=s-c,v=u-o,b=d-c,x=y*y+g*g,k=v*v+b*b,w=2*(y*b-g*v);if(w)if(Math.abs(w)<1e-8)h=(o+u)/2,f=(c+d)/2;else{const e=1/w;h=o+(b*x-g*k)*e,f=c+(y*k-v*x)*e}else h=(o+u)/2-1e8*b,f=(c+d)/2+1e8*v;a[m]=h,a[m+1]=f}let i,o,c,l=t[t.length-1],s=4*l,u=e[2*l],d=e[2*l+1];r.fill(0);for(let h=0;h<t.length;++h)l=t[h],i=s,o=u,c=d,s=4*l,u=e[2*l],d=e[2*l+1],r[i+2]=r[s]=c-d,r[i+3]=r[s+1]=u-o}render(e){const t=null==e?e=new le:void 0,{delaunay:{halfedges:n,inedges:r,hull:a},circumcenters:i,vectors:o}=this;if(a.length<=1)return null;for(let s=0,u=n.length;s<u;++s){const t=n[s];if(t<s)continue;const r=2*Math.floor(s/3),a=2*Math.floor(t/3),o=i[r],c=i[r+1],l=i[a],u=i[a+1];this._renderSegment(o,c,l,u,e)}let c,l=a[a.length-1];for(let s=0;s<a.length;++s){c=l,l=a[s];const t=2*Math.floor(r[l]/3),n=i[t],u=i[t+1],d=4*c,h=this._project(n,u,o[d+2],o[d+3]);h&&this._renderSegment(n,u,h[0],h[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new le:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new le:void 0,r=this._clip(e);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let i=2;i<a;i+=2)r[i]===r[i-2]&&r[i+1]===r[i-1]||t.lineTo(r[i],r[i+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new se;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,a){let i;const o=this._regioncode(e,t),c=this._regioncode(n,r);0===o&&0===c?(a.moveTo(e,t),a.lineTo(n,r)):(i=this._clipSegment(e,t,n,r,o,c))&&(a.moveTo(i[0],i[1]),a.lineTo(i[2],i[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let r=0,a=t.length;r<a;r+=2)for(let i=0,o=e.length;i<o;i+=2)if(t[r]==e[i]&&t[r+1]==e[i+1]&&t[(r+2)%a]==e[(i+o-2)%o]&&t[(r+3)%a]==e[(i+o-1)%o]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:a}}=this,i=n[e];if(-1===i)return null;const o=[];let c=i;do{const n=Math.floor(c/3);if(o.push(t[2*n],t[2*n+1]),c=c%3==2?c-2:c+1,a[c]!==e)break;c=r[c]}while(c!==i&&-1!==c);return o}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let r,a,i,o,c,l=null,s=t[n-2],u=t[n-1],d=this._regioncode(s,u);for(let h=0;h<n;h+=2)if(r=s,a=u,s=t[h],u=t[h+1],i=d,d=this._regioncode(s,u),0===i&&0===d)o=c,c=0,l?l.push(s,u):l=[s,u];else{let t,n,h,f,p;if(0===i){if(null===(t=this._clipSegment(r,a,s,u,i,d)))continue;[n,h,f,p]=t}else{if(null===(t=this._clipSegment(s,u,r,a,d,i)))continue;[f,p,n,h]=t,o=c,c=this._edgecode(n,h),o&&c&&this._edge(e,o,c,l,l.length),l?l.push(n,h):l=[n,h]}o=c,c=this._edgecode(f,p),o&&c&&this._edge(e,o,c,l,l.length),l?l.push(f,p):l=[f,p]}if(l)o=c,c=this._edgecode(l[0],l[1]),o&&c&&this._edge(e,o,c,l,l.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(e,t,n,r,a,i){for(;;){if(0===a&&0===i)return[e,t,n,r];if(a&i)return null;let o,c,l=a||i;8&l?(o=e+(n-e)*(this.ymax-t)/(r-t),c=this.ymax):4&l?(o=e+(n-e)*(this.ymin-t)/(r-t),c=this.ymin):2&l?(c=t+(r-t)*(this.xmax-e)/(n-e),o=this.xmax):(c=t+(r-t)*(this.xmin-e)/(n-e),o=this.xmin),a?(e=o,t=c,a=this._regioncode(e,t)):(n=o,r=c,i=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,a,i){let o,c=Array.from(t);if((o=this._project(c[0],c[1],n,r))&&c.unshift(o[0],o[1]),(o=this._project(c[c.length-2],c[c.length-1],a,i))&&c.push(o[0],o[1]),c=this._clipFinite(e,c))for(let l,s=0,u=c.length,d=this._edgecode(c[u-2],c[u-1]);s<u;s+=2)l=d,d=this._edgecode(c[s],c[s+1]),l&&d&&(s=this._edge(e,l,d,c,s),u=c.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(c=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return c}_edge(e,t,n,r,a){for(;t!==n;){let n,i;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,i=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,i=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,i=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,i=this.ymin}r[a]===n&&r[a+1]===i||!this.contains(e,n,i)||(r.splice(a,0,n,i),a+=2)}if(r.length>4)for(let i=0;i<r.length;i+=2){const e=(i+2)%r.length,t=(i+4)%r.length;(r[i]===r[e]&&r[e]===r[t]||r[i+1]===r[e+1]&&r[e+1]===r[t+1])&&(r.splice(e,2),i-=2)}return a}_project(e,t,n,r){let a,i,o,c=1/0;if(r<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/r)<c&&(o=this.ymin,i=e+(c=a)*n)}else if(r>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/r)<c&&(o=this.ymax,i=e+(c=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<c&&(i=this.xmax,o=t+(c=a)*r)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<c&&(i=this.xmin,o=t+(c=a)*r)}return[i,o]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const de=2*Math.PI,he=Math.pow;function fe(e){return e[0]}function pe(e){return e[1]}function me(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class ye{static from(e,t=fe,n=pe,r){return new ye("length"in e?function(e,t,n,r){const a=e.length,i=new Float64Array(2*a);for(let o=0;o<a;++o){const a=e[o];i[2*o]=t.call(r,a,o,e),i[2*o+1]=n.call(r,a,o,e)}return i}(e,t,n,r):Float64Array.from(function*(e,t,n,r){let a=0;for(const i of e)yield t.call(r,i,a,e),yield n.call(r,i,a,e),++a}(e,t,n,r)))}constructor(e){this._delaunator=new Q(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const e=2*t[r],a=2*t[r+1],i=2*t[r+2];if((n[i]-n[e])*(n[a+1]-n[e+1])-(n[a]-n[e])*(n[i+1]-n[e+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],a=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let i=0,o=t.length/2;i<o;++i){const e=me(t[2*i],t[2*i+1],a);t[2*i]=e[0],t[2*i+1]=e[1]}this._delaunator=new Q(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,i=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let c=0,l=n.length;c<l;++c){const e=a[c%3==2?c-2:c+1];-1!==n[c]&&-1!==i[e]||(i[e]=c)}for(let c=0,l=r.length;c<l;++c)o[r[c]]=c;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],i[r[0]]=1,2===r.length&&(i[r[1]]=0))}voronoi(e){return new ue(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:a,triangles:i,collinear:o}=this;if(o){const t=o.indexOf(e);return t>0&&(yield o[t-1]),void(t<o.length-1&&(yield o[t+1]))}const c=t[e];if(-1===c)return;let l=c,s=-1;do{if(yield s=i[l],l=l%3==2?l-2:l+1,i[l]!==e)return;if(l=a[l],-1===l){const t=n[(r[e]+1)%n.length];return void(t!==s&&(yield t))}}while(l!==c)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const r=n;let a;for(;(a=this._step(n,e,t))>=0&&a!==n&&a!==r;)n=a;return a}_step(e,t,n){const{inedges:r,hull:a,_hullIndex:i,halfedges:o,triangles:c,points:l}=this;if(-1===r[e]||!l.length)return(e+1)%(l.length>>1);let s=e,u=he(t-l[2*e],2)+he(n-l[2*e+1],2);const d=r[e];let h=d;do{let r=c[h];const d=he(t-l[2*r],2)+he(n-l[2*r+1],2);if(d<u&&(u=d,s=r),h=h%3==2?h-2:h+1,c[h]!==e)break;if(h=o[h],-1===h){if(h=a[(i[e]+1)%a.length],h!==r&&he(t-l[2*h],2)+he(n-l[2*h+1],2)<u)return h;break}}while(h!==d);return s}render(e){const t=null==e?e=new le:void 0,{points:n,halfedges:r,triangles:a}=this;for(let i=0,o=r.length;i<o;++i){const t=r[i];if(t<i)continue;const o=2*a[i],c=2*a[t];e.moveTo(n[o],n[o+1]),e.lineTo(n[c],n[c+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t=2){const n=null==e?e=new le:void 0,{points:r}=this;for(let a=0,i=r.length;a<i;a+=2){const n=r[a],i=r[a+1];e.moveTo(n+t,i),e.arc(n,i,t,0,de)}return n&&n.value()}renderHull(e){const t=null==e?e=new le:void 0,{hull:n,points:r}=this,a=2*n[0],i=n.length;e.moveTo(r[a],r[a+1]);for(let o=1;o<i;++o){const t=2*n[o];e.lineTo(r[t],r[t+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new se;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new le:void 0,{points:r,triangles:a}=this,i=2*a[e*=3],o=2*a[e+1],c=2*a[e+2];return t.moveTo(r[i],r[i+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[c],r[c+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new se;return this.renderTriangle(e,t),t.value()}}var ge=n(620),ve=n.n(ge),be=n(62),xe=n.n(be),ke=n(101),we=n.n(ke),Ce=n(306),Ee=n.n(Ce),Oe=(n(60),n(24)),Pe=n(220),Me=n.n(Pe),je=n(556),Se=n.n(je),Re=n(716),Le=n.n(Re),Ae=n(555),Be=n.n(Ae),Ne=n(69),De=n.n(Ne),Ie=n(42),Te=n.n(Ie),_e=n(660),qe=n.n(_e),ze=n(504),Fe=n.n(ze),Ye=n(553),Xe=n.n(Ye),Ge=n(325),He=n.n(Ge);function We(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,i,o,c,l,s,u,d,h,f=e._root,p={data:r},m=e._x0,y=e._y0,g=e._x1,v=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((s=t>=(i=(m+g)/2))?m=i:g=i,(u=n>=(o=(y+v)/2))?y=o:v=o,a=f,!(f=f[d=u<<1|s]))return a[d]=p,e;if(c=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===c&&n===l)return p.next=f,a?a[d]=p:e._root=p,e;do{a=a?a[d]=new Array(4):e._root=new Array(4),(s=t>=(i=(m+g)/2))?m=i:g=i,(u=n>=(o=(y+v)/2))?y=o:v=o}while((d=u<<1|s)==(h=(l>=o)<<1|c>=i));return a[h]=f,a[d]=p,e}var Ve=function(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a};function Ue(e){return e[0]}function Ze(e){return e[1]}function Ke(e,t,n){var r=new Qe(null==t?Ue:t,null==n?Ze:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Qe(e,t,n,r,a,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function Je(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var $e=Ke.prototype=Qe.prototype;$e.copy=function(){var e,t,n=new Qe(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Je(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=Je(t));return n},$e.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return We(this.cover(t,n),t,n,e)},$e.addAll=function(e){var t,n,r,a,i=e.length,o=new Array(i),c=new Array(i),l=1/0,s=1/0,u=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,c[n]=a,r<l&&(l=r),r>u&&(u=r),a<s&&(s=a),a>d&&(d=a));if(l>u||s>d)return this;for(this.cover(l,s).cover(u,d),n=0;n<i;++n)We(this,o[n],c[n],e[n]);return this},$e.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var o,c,l=a-n,s=this._root;n>e||e>=a||r>t||t>=i;)switch(c=(t<r)<<1|e<n,(o=new Array(4))[c]=s,s=o,l*=2,c){case 0:a=n+l,i=r+l;break;case 1:n=a-l,i=r+l;break;case 2:a=n+l,r=i-l;break;case 3:n=a-l,r=i-l}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this},$e.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},$e.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},$e.find=function(e,t,n){var r,a,i,o,c,l,s,u=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new Ve(m,u,d,h,f)),null==n?n=1/0:(u=e-n,d=t-n,h=e+n,f=t+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(a=l.x0)>h||(i=l.y0)>f||(o=l.x1)<u||(c=l.y1)<d))if(m.length){var y=(a+o)/2,g=(i+c)/2;p.push(new Ve(m[3],y,g,o,c),new Ve(m[2],a,g,y,c),new Ve(m[1],y,i,o,g),new Ve(m[0],a,i,y,g)),(s=(t>=g)<<1|e>=y)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-s],p[p.length-1-s]=l)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=v*v+b*b;if(x<n){var k=Math.sqrt(n=x);u=e-k,d=t-k,h=e+k,f=t+k,r=m.data}}return r},$e.remove=function(e){if(isNaN(i=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,a,i,o,c,l,s,u,d,h,f=this._root,p=this._x0,m=this._y0,y=this._x1,g=this._y1;if(!f)return this;if(f.length)for(;;){if((s=i>=(c=(p+y)/2))?p=c:y=c,(u=o>=(l=(m+g)/2))?m=l:g=l,t=f,!(f=f[d=u<<1|s]))return this;if(!f.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,h=d)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(a=f.next)&&delete f.next,r?(a?r.next=a:delete r.next,this):t?(a?t[d]=a:delete t[d],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=a,this)},$e.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},$e.root=function(){return this._root},$e.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},$e.visit=function(e){var t,n,r,a,i,o,c=[],l=this._root;for(l&&c.push(new Ve(l,this._x0,this._y0,this._x1,this._y1));t=c.pop();)if(!e(l=t.node,r=t.x0,a=t.y0,i=t.x1,o=t.y1)&&l.length){var s=(r+i)/2,u=(a+o)/2;(n=l[3])&&c.push(new Ve(n,s,u,i,o)),(n=l[2])&&c.push(new Ve(n,r,u,s,o)),(n=l[1])&&c.push(new Ve(n,s,a,i,u)),(n=l[0])&&c.push(new Ve(n,r,a,s,u))}return this},$e.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Ve(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var i,o=t.x0,c=t.y0,l=t.x1,s=t.y1,u=(o+l)/2,d=(c+s)/2;(i=a[0])&&n.push(new Ve(i,o,c,u,d)),(i=a[1])&&n.push(new Ve(i,u,c,l,d)),(i=a[2])&&n.push(new Ve(i,o,d,u,s)),(i=a[3])&&n.push(new Ve(i,u,d,l,s))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},$e.x=function(e){return arguments.length?(this._x=e,this):this._x},$e.y=function(e){return arguments.length?(this._y=e,this):this._y};var et=n(106),tt=n.n(et),nt=n(30),rt=n.n(nt),at=n(0),it=n.n(at),ot=n(2),ct=n.n(ot),lt=n(10),st=n.n(lt),ut=(n(96),n(23)),dt=(n(50),n(19)),ht=n(81),ft=n.n(ht),pt=(n(245),n(64)),mt=(n(133),n(31)),yt=(n(75),n(26)),gt=(n(345),n(145)),vt=(n(421),n(284)),bt=n(576),xt=n(1073),kt=n(516),wt=(n(79),n(44)),Ct=(n(175),n(84)),Et=(n(144),n(33)),Ot=(n(360),n(239)),Pt=(n(148),n(53)),Mt=(n(298),n(206));function jt(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-viewport-container *::selection {\n  background-color: rgba(52, 155, 249, 0.15) !important;\n  color: inherit !important;\n}\n.lake-user-select-none {\n  user-select: none;\n}\n.lake-diagram-mindmap-root::selection {\n  background-color: var(--yq-blue-1) !important;\n}\n.selection-transparent::selection {\n  background-color: transparent !important;\n  color: inherit !important;\n}\n.selection-transparent *::selection {\n  background-color: transparent !important;\n  color: inherit !important;\n}\n");var St=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!1!==n(t,a,i)){var o=r(t);if(o)for(var c=0;c<o.length;c++)e(o[c],n,r,t,c)}},Rt=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=r(t);if(i)for(var o=0;o<i.length;o++)!1!==n(i[o],t,a)&&e(i[o],n,r,o)};function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nt(e,t){var n,r=-1/0;if(void 0===t){var a,i=At(e);try{for(i.s();!(a=i.n()).done;)null!=(n=a.value)&&r<n&&(r=n)}catch(e){i.e(e)}finally{i.f()}}else{var o,c=-1,l=At(e);try{for(l.s();!(o=l.n()).done;)null!=(n=t(n=o.value,++c,e))&&r<n&&(r=n)}catch(e){l.e(e)}finally{l.f()}}return r}function Dt(e,t,n){return e<t?t:e>n?n:e}function It(e,t){for(var n,r=-1/0,a=0;a<e.length;a++){var i=e[a],o=t?i[t]:i;o>r&&(r=o,n=i)}return n}function Tt(e,t){var n=t(e);return e.children&&(n.children=[],e.children.forEach((function(e){n.children&&n.children.push(Tt(e,t))}))),n}function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return e<t?t:e>n?n:e}function qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return e>=t[0]-n&&e<=t[1]+n}function zt(e,t){return Object.values(e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{}))}function Ft(e){return e.filter((function(e,t,n){return n.indexOf(e,0)===t}))}function Yt(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function Xt(e,t,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}function Gt(e){for(var t,n,r=arguments.length<=1?0:arguments.length-1;r>=1&&e.length;){var a;for(t=(a=1+--r)<1||arguments.length<=a?void 0:arguments[a];-1!==(n=e.indexOf(t));)e.splice(n,1)}return t}function Ht(e,t){e.indexOf(t)<0&&e.push(t)}function Wt(e,t){e.children?e.children.push(t):e.children=[t]}function Vt(e,t,n,r){for(var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return void 0===e};e&&e!==n&&i(a);)a=t(e),e=r(e);return a}function Ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.forEach((function(t){var n=t.query,r=t.css;"self"!==n?e.querySelectorAll(n).forEach((function(e){Object.keys(r).forEach((function(t){e.style[t]=r[t]}))})):Object.keys(r).forEach((function(t){e.style[t]=r[t]}))}))}function Zt(e,t){var n={};return Object.keys(t).forEach((function(r){var a=t[r];!0===a?n[r]=d()(e[r]):s()(t[r])&&s()(e[r])&&a&&(n[r]=Zt(e[r],a))})),n}function Kt(e,t,n){var r={};return e&&n?t?(n.forEach((function(n){e[n]!==t[n]&&(r[n]=e[n])})),r):function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e):r}function Qt(e,t){return f()(e,t,(function(e,t){return void 0!==e||s()(t)?e:null}))}function Jt(e,t){var n="object"===i()(e)?e:c()({},e,t),r={},a=function(e){e.split(".").reduce((function(t,r,a,i){return t[r]=a+1===i.length?n[e]:{}}),r)};for(var o in n)a(o);return r}var $t=Object.freeze({__proto__:null,max:Nt,min:function(e,t){var n,r=1/0;if(void 0===t){var a,i=At(e);try{for(i.s();!(a=i.n()).done;)null!=(n=a.value)&&r>n&&(r=n)}catch(e){i.e(e)}finally{i.f()}}else{var o,c=-1,l=At(e);try{for(l.s();!(o=l.n()).done;)null!=(n=t(n=o.value,++c,e))&&r>n&&(r=n)}catch(e){l.e(e)}finally{l.f()}}return r},limitValue:Dt,findMaxObjBy:It,buildTree:Tt,getValue:_t,between:qt,groupBy:zt,arrayUnique:Ft,arrayEqual:Yt,arrayMove:Xt,removeArray:Gt,push:Ht,append:Wt,closest:Vt,setStyleSheets:Ut,pick:Zt,diff:Kt,mergeUndefinedToNull:Qt,makeChangeModel:Jt});function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nn=function(e,t){var n=["x","y"].map((function(n){return e[n]+2*(t[n]-e[n])})),r=b()(n,2);return{x:r[0],y:r[1]}},rn=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},an=function(e,t){var n=pi(t),r=Math.sin(n),a=Math.cos(n),i=e.x,o=e.y;return{x:i*a-o*r,y:i*r+o*a}},on=function(e,t,n){var r={x:e.x-t.x,y:e.y-t.y},a=an(r,n);return{x:a.x+t.x,y:a.y+t.y}},cn=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},ln=function(e,t,n){var r=rn(e,t),a=on(t,r,-n),i=a.x,o=a.y,c=Math.abs(2*(i-r.x)),l=Math.abs(2*(o-r.y));return{x:r.x-c/2,y:r.y-l/2,w:c,h:l,r:n}},sn=function(e,t,n){var r=e.map((function(e){return an(e,-n)})),a=b()(r,2),i=a[0],o=a[1],c=an(t,-n),l=0,s=0,u={x:0,y:0};mi(i.y,o.y)?(l=Math.abs(i.x-o.x),s=Math.abs(c.y-i.y),u={x:(i.x+o.x)/2,y:(i.y+c.y)/2}):mi(i.x,o.x)&&(s=Math.abs(i.y-o.y),l=Math.abs(c.x-i.x),u={x:(i.x+c.x)/2,y:(i.y+o.y)/2});var d=an(u,n);return{x:d.x-l/2,y:d.y-s/2,w:l,h:s,r:n}},un=function(e,t,n,r){var a,i,o=b()(e,2),c=o[0],l=o[1],s=rn(c,l),u=t,d=rn(s,u),h=cn(s,u),f=n.w/n.h;return"width"===r?i=(a=h)/f:a=f*(i=h),{x:d.x-a/2,y:d.y-i/2,w:a,h:i,r:n.r}},dn=function(e){var t=e.x,n=e.y;return{x:t+e.w/2,y:n+e.h/2}},hn=function(e){var t=e.x,n=e.y;return 180*Math.atan2(n,t)/Math.PI},fn=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y},i=hn(r);return hn(a)-i},pn=function(e,t){var n=t.x,r=t.y,a=b()(e,2),i=a[0],o=a[1];if(mi(i.x,o.x))return{x:i.x,y:r};if(mi(i.y,o.y))return{x:n,y:i.y};var c=bi(i.x,i.y,o.x,o.y),l=-1/c,s=(c*i.x+r-i.y-l*n)/(c-l);return{x:s,y:i.y-c*(i.x-s)}},mn=function(){function e(t){m()(this,e),c()(this,"rect",void 0),c()(this,"_tl",void 0),c()(this,"_tr",void 0),c()(this,"_br",void 0),c()(this,"_bl",void 0),c()(this,"_tc",void 0),c()(this,"_bc",void 0),c()(this,"_rc",void 0),c()(this,"_lc",void 0),c()(this,"_center",void 0),this.rect=t,this._tl=null,this._tr=null,this._br=null,this._bl=null,this._tc=null,this._bc=null,this._rc=null,this._lc=null,this._center=null}return g()(e,[{key:"center",get:function(){return this._center||(this._center=dn(this.rect)),this._center}},{key:"tl",get:function(){if(!this._tl){var e=this.rect,t=e.x,n=e.y,r=e.r;this._tl=on({x:t,y:n},this.center,r)}return this._tl}},{key:"tr",get:function(){if(!this._tr){var e=this.rect,t=e.x,n=e.y,r=e.w,a=e.r;this._tr=on({x:t+r,y:n},this.center,a)}return this._tr}},{key:"br",get:function(){return this._br||(this._br=nn(this.tl,this.center)),this._br}},{key:"bl",get:function(){return this._bl||(this._bl=nn(this.tr,this.center)),this._bl}},{key:"tc",get:function(){return this._tc||(this._tc=rn(this.tl,this.tr)),this._tc}},{key:"bc",get:function(){return this._bc||(this._bc=rn(this.br,this.bl)),this._bc}},{key:"rc",get:function(){return this._rc||(this._rc=rn(this.tr,this.br)),this._rc}},{key:"lc",get:function(){return this._lc||(this._lc=rn(this.tl,this.bl)),this._lc}}]),e}(),yn="\t\n\v\f\r   ᠎             　\u2028\u2029",gn=new RegExp("([a-z])["+yn+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+yn+"]*,?["+yn+"]*)+)","ig"),vn=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+yn+"]*,?["+yn+"]*","ig");function bn(e){if(!e)return null;if(Array.isArray(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return(e=String(e)).replace(gn,(function(e,r,a){var i=[],o=r.toLowerCase();if(a.replace(vn,(function(e,t){t&&i.push(+t)})),"m"===o&&i.length>2&&(n.push([r].concat(i.splice(0,2))),o="l",r="m"===r?"l":"L"),"o"===o&&1===i.length&&n.push([r,i[0]]),"r"===o)n.push([r].concat(i));else for(;i.length>=t[o]&&(n.push([r].concat(i.splice(0,t[o]))),t[o]););return""})),n}function xn(e){if(Array.isArray(e)){var t=k()(e);return[t[0],t.slice(1).join()].join("")}var n=e.name,r=e.x,a=e.y;switch(n.toLowerCase()){case"m":case"l":return n+[r,a].join();case"h":case"v":return n+r;case"z":return n;case"a":var i=e.xAxisRotation,o=e.largeArcFlag,c=e.sweepFlag;return n+[e.rx,e.ry,i,o,c,r,a].join();case"c":return n+[e.x1,e.y1,e.x2,e.y2,e.x,e.y].join();case"q":return n+[e.x1,e.y1,e.x,e.y].join();default:throw new Error("unknown path command: ".concat(n))}}function kn(e){return e.map(xn).join("")}function wn(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a;return kn(a?[["M",+e+ +a,t],["l",n-2*a,0],["a",a,i,0,0,1,a,i],["l",0,r-2*i],["a",a,i,0,0,1,-a,i],["l",2*a-n,0],["a",a,i,0,0,1,-a,-i],["l",0,2*i-r],["a",a,i,0,0,1,a,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]])}function Cn(e){return kn(e.map((function(e,t){return[0===t?"M":"L",e.x,e.y]})))}function En(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return kn([["M",e-n,t],["a",n,r,0,1,0,2*n,0],["a",n,r,0,1,0,-2*n,0],["Z"]])}function On(e,t,n){return En(e,t,n)}function Pn(e){for(var t=[],n=[0,.25,.5,.75],r=0;r<e.length-1;r++){var a=e[r-1],i=e[r],o=e[r+1],c=e[r+2];void 0===a&&(a={x:2*i.x-o.x,y:2*i.y-o.y}),void 0===c&&(c={x:2*o.x-i.x,y:2*o.y-i.y}),n[1]=Math.pow(xi(a.x,a.y,i.x,i.y),1)+n[0],n[2]=Math.pow(xi(i.x,i.y,o.x,o.y),1)+n[1],n[3]=Math.pow(xi(o.x,o.y,c.x,c.y),1)+n[2];var l=[(n[2]-n[1])/(n[2]-n[0]),(n[1]-n[0])/(n[2]-n[0]),(n[3]-n[2])/(n[3]-n[1]),(n[2]-n[1])/(n[3]-n[1])],s=[(n[2]-n[1])*(l[0]*(i.x-a.x)/(n[1]-n[0])+l[1]*(o.x-i.x)/(n[2]-n[1])),(n[2]-n[1])*(l[0]*(i.y-a.y)/(n[1]-n[0])+l[1]*(o.y-i.y)/(n[2]-n[1]))],u=[(n[2]-n[1])*(l[2]*(o.x-i.x)/(n[2]-n[1])+l[3]*(c.x-o.x)/(n[3]-n[2])),(n[2]-n[1])*(l[2]*(o.y-i.y)/(n[2]-n[1])+l[3]*(c.y-o.y)/(n[3]-n[2]))];t.push(["C",i.x+s[0]/3,i.y+s[1]/3,o.x-u[0]/3,o.y-u[1]/3,o.x,o.y])}return t}function Mn(e,t,n){var r=[],a=t[0],i=t[t.length-1],o=e[0],c=e[e.length-1];if(!o&&!o)return[];"V"===o[o.length-1]?r.push(["L",a.x,o[1]]):r.push(["L",o[0],a.y]);for(var l=1;l<e.length;l++){var s=e[l-1],u=e[l];"V"===u[u.length-1]?r.push(["L",s[0],u[1]]):r.push(["L",u[0],s[1]])}"V"===c[c.length-1]?r.push(["L",i.x,c[1]]):r.push(["L",c[0],i.y]);var d=r;n&&(d=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a=e[n+1];r&&a&&yi(r.slice(1),a.slice(1),2)?n+=1:t.push(r)}return t}(r)),d.unshift(["M",a.x,a.y]);var h=d[d.length-1];if(mi(h[1],t[t.length-1].x,.65)&&mi(h[h.length-1],t[t.length-1].y,.65)?d[d.length-1]=["L",t[t.length-1].x,t[t.length-1].y]:mi(h[1],t[t.length-1].x)&&mi(h[h.length-1],t[t.length-1].y)||d.push(["L",t[t.length-1].x,t[t.length-1].y]),d.length>1){var f=d[0],p=d[1];mi(f[1],p[1],.65)&&mi(f[f.length-1],p[p.length-1],.65)&&d.splice(1,1)}return d}function jn(e){var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return 0!==t?[1/t*e[0],1/t*e[1]]:t}function Sn(e,t){return(t-e)/3}function Rn(e,t){var n=0,r=0;return function(e,t){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)}(e,t)?n=Sn(e.x,t.x):r=Sn(e.y,t.y),{x:e.x+n,y:e.y+r}}function Ln(e,t){var n=Rn(e,t),r=Rn(t,e);return["C",n.x,n.y,r.x,r.y,t.x,t.y]}function An(e,t){var n={x:-1,y:-1},r=t.connection;return r&&("string"===i()(r)?n=e.anchors.filter((function(e){return e.name===r}))[0]:Array.isArray(r)&&(n={x:r[0],y:r[1]})),{width:e.width,height:e.height,theta:e.rotate,port:n}}function Bn(e,t,n,r){var a,i,o=e.width,c=e.height,l=e.port,s=e.theta,u=l.x,d=l.y;if(0===u&&0===d||1===u&&1===d||0===u&&1===d||1===u&&0===d)return a=[n.x-t.x,n.y-t.y],i=Math.sqrt(Math.pow(o,2)+Math.pow(c,2))/3,{direction:jn(a),offset:Math.max(i,36)};var h=jn([n.x-t.x,n.y-t.y]);return 0===u&&d>0&&d<1?(a=0===s?[-1,0]:h,i=Math.abs(Math.abs(n.x)-Math.abs(r.x))):1===u&&d>0&&d<1?(a=0===s?[1,0]:h,i=Math.abs(Math.abs(n.x)-Math.abs(r.x))):0===d&&u>0&&u<1?(a=0===s?[0,-1]:h,i=Math.abs(Math.abs(n.y)-Math.abs(r.y))):1===d&&u>0&&u<1?(a=0===s?[0,1]:h,i=Math.abs(Math.abs(n.y)-Math.abs(r.y))):(a=h,i=Math.abs(n.y-r.y)),i/=2,{direction:a,offset:Math.max(i,32)}}function Nn(e){var t=e.source,n=e.target,r=e.diagram,a=[],i=r.find(t.id),o=r.find(n.id),c=e.getPoints(),l=c[0],s=c[1];if(!i&&!o){var u=Ln(c[0],c[1]);return a.push(u),a}if(i&&o){var d=An(i,t),h=An(o,n),f=i.percentage2Canvas({x:.5,y:.5}),p=o.percentage2Canvas({x:.5,y:.5}),m=Bn(d,f,l,s),y=Bn(h,p,s,l),g=[l.x+m.direction[0]*m.offset,l.y+m.direction[1]*m.offset],v=[s.x+y.direction[0]*y.offset,s.y+y.direction[1]*y.offset];return[["C",g[0],g[1],v[0],v[1],s.x,s.y]]}if(!i&&o){var b=Bn(An(o,n),o.percentage2Canvas({x:.5,y:.5}),s,l),x=Ln(c[0],c[1]);return x[3]=s.x+b.direction[0]*b.offset,x[4]=s.y+b.direction[1]*b.offset,a.push(x),a}var k=Bn(An(i,t),i.percentage2Canvas({x:.5,y:.5}),l,s),w=Ln(c[0],c[1]);return w[1]=l.x+k.direction[0]*k.offset,w[2]=l.y+k.direction[1]*k.offset,a.push(w),a}function Dn(e,t,n,r,a,i,o,c){return kn([["M",e,t],["L",n,t],["L",n,r],["L",e,r],["Z"],["M",a,i],["L",a,c],["L",o,c],["L",o,i],["Z"]])}function In(e,t,n,r){return kn([["M",e,t],["L",n,r]])}function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qn(e){for(var t,n=/([mlhvcsqtaz])/gi,r=e.replace(n," $1 ").trim().split(/[ ,]+/),a=[],i=0;i<r.length;i++){var o=r[i];n.test(o)?(t&&a.push(t),t=[o]):t.push(parseFloat(o))}return a}function zn(e,t,n){return"string"==typeof e&&(e=qn(e)),e.map((function(e){return function(e,t,n){switch(Array.isArray(e)&&(e=function(e){var t=k()(e),n=t[0],r=t.slice(1);switch(n.toLowerCase()){case"m":case"l":var a=b()(r,2);return{name:n,x:a[0],y:a[1]};case"a":var i=b()(r,7);return{name:n,rx:i[0],ry:i[1],xAxisRotation:i[2],largeArcFlag:i[3],sweepFlag:i[4],x:i[5],y:i[6]};case"c":var o=b()(r,6);return{name:n,x1:o[0],y1:o[1],x2:o[2],y2:o[3],x:o[4],y:o[5]};case"q":var c=b()(r,4);return{name:n,x1:c[0],y1:c[1],x:c[2],y:c[3]};default:return{name:n}}}(e)),e.name.toLowerCase()){case"m":case"l":var r=e,a=r.x,i=r.y;return _n(_n({},e),{},{x:a*t,y:i*n});case"a":var o=e,c=o.x,l=o.y,s=o.rx,u=o.ry;return _n(_n({},e),{},{x:c*t,y:l*n,rx:s*t,ry:u*n});case"c":var d=e,h=d.x1,f=d.y1,p=d.x2,m=d.y2,y=d.x,g=d.y;return _n(_n({},e),{},{x1:h*t,y1:f*n,x2:p*t,y2:m*n,x:y*t,y:g*n});case"q":var v=e,x=v.x1,w=v.y1,C=v.x,E=v.y;return _n(_n({},e),{},{x1:x*t,y1:w*n,x:C*t,y:E*n});default:return e}}(e,t,n)}))}var Fn=Object.freeze({__proto__:null,parsePathString:bn,formatPath:kn,rectPath:wn,polylinePath:Cn,ellipsePath:En,circlePath:On,catmullRomPath:Pn,elbowPath:Mn,bezierPath:Nn,huiPath:Dn,linePath:In,inflatePath:qn,scalePath:zn});function Yn(){var e=[],t=arguments.length<=0?void 0:arguments[0];Array.isArray(t)?e.push(t):e.push([t]);for(var n=1;n<arguments.length;n++)if(t=n<0||arguments.length<=n?void 0:arguments[n],Array.isArray(t))e.push(t);else{for(var r=[],a=0;a<e[0].length;a++)r.push(t);e.push(r)}return e}var Xn=Object.freeze({__proto__:null,convertBatch:Yn}),Gn=function(e){return null==e?void 0:e.isLine},Hn=function(e){return null==e?void 0:e.isVertex},Wn=function(e){return null==e?void 0:e.isGroup},Vn=function(e){return null==e?void 0:e.isBoardCell},Un=function(e){return null==e?void 0:e.isMindmap},Zn=function(e){return null==e?void 0:e.isGeometry},Kn=function(e){return null==e?void 0:e.isSwimlane},Qn=function(e){return null==e?void 0:e.isSwimlaneCell},Jn=function(e){return null==e?void 0:e.isStack},$n=function(e){return null==e?void 0:e.isStackCell},er=function(e){return{minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height}},tr=function(e){var t=new mn(e),n=t.tl,r=t.tr,a=t.bl,i=t.br;return{minX:Math.min(n.x,r.x,a.x,i.x),minY:Math.min(n.y,r.y,a.y,i.y),maxX:Math.max(n.x,r.x,a.x,i.x),maxY:Math.max(n.y,r.y,a.y,i.y)}};function nr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e.getBBox()},n=e.reduce((function(e,n){var r=t(n),a=[r.x,r.y],i=[[a[0],a[1]],[a[0]+r.width,a[1]+r.height]];return e.push.apply(e,i),e}),[]),r=n.reduce((function(e,t){return t[0]>e?t[0]:e}),n[0][0]),a=n.reduce((function(e,t){return t[0]<e?t[0]:e}),n[0][0]),i=n.reduce((function(e,t){return t[1]>e?t[1]:e}),n[0][1]),o=n.reduce((function(e,t){return t[1]<e?t[1]:e}),n[0][1]);return{minX:a,minY:o,maxX:r,maxY:i}}var rr={locale:r.LocaleUtil.getLocale(),translations:{"en-us":{" 粘贴":" paste",ER:"ER",UML:"UML","三角形":"Triangle","上下居中":"Align vertically","上传素材中":"Uploading Material","上传素材图片失败":"Failed to upload material image","上移":"Forward","上移一层":"Bring Forward","下移":"Backward","下移一层":"Bring Backward","不透明度":"Opacity","与编辑一致":"WYSIWYG","云":"cloud","五角星":"star","五边形":"Polygon","五边箭头":"pentagon-arrow","位置":"Position","使用":"Use","使用说明":"Instructions","保存":"Save","保持宽高比":"Constrain proportions","全局":"Global","全部概化":"Total generalization","关系":"Relationship","内部存储":"Internal Storage","决策":"Decision","准备":"Preparation","分支":"Choice","分支类型":"Branch type","分支粗细":"Branch thickness","分支线条宽度逐渐变细":"Tapered line","分支颜色":"Line Color","删除":"Delete","删除单个节点":"Delete a single node","删除泳道":"Delete Lane","前进":"Forward","剪切":"Cut","剪切失败":"Cut failed","剪切成功":"Cut successfully","副标题":"Subtitle","加粗":"Bold","包":"Package","十字":"Cross","卡片":"Card","历史":"Histroy Pseudostate","原始大小":"Original size","双击画布快速添加":"Double click to directly add","双向箭头":"Arrow 3","发送信号":"Send Signal","取消成组":"UnGroup","另存为图片":"Save as picture","可设置颜色、布局、文字等样式":"Can set color, layout, text and other styles","右对齐":"Right","右箭头":"Arrow 2","合并":"Merge","同步":"Fork","同级":"same level","后退":"Backward","回到中心":"Fit Page","图形":"Shape","图片":"Picture","图片上传中，请稍候":"Picture uploading, please wait","圆形":"Circle","圆角半径":"Corner radius","圆角矩形":"Rounded Rectangle","垂直均分":"Distribute vertically","垂直居中":"Align vertically","基础图形":"Basic","基础格式":"Basic Format","填充":"Fill","填充颜色":"Fill","备注":"Note","复制":"Copy","复制为其它格式":"Copy to other formats","复制失败":"Copy failed","复制成功":"Copy successfully","多个值":"multiValue","多值属性":"","多文档":"Multi Document","多类例":"Multiplicity","大小":"Size","大标题":"Title","子级":"Child","字号":"Font size","字色":"Font Color","存储数据":"Stored Data","实体":"Entity","实际尺寸":"Actual size","宽":"Widht","宽度":"Width","对象":"Object","对齐":"Alignment","对齐方式":"Alignment","导出素材图片失败":"Failed to export stock image","小标题":"Title small","层级":"Level","展开":"Expand","展开工具栏":"Expand Toolbar","展开节点":"Expand topic","属性":"Attributes","左右居中":"Align horizontally","左对齐":"Left","左箭头":"Arrow 1","已粘贴当前页面复制的内容，如需粘贴页面外内容请使用 ":"The copied content of the current page has been pasted. If you need to paste the content outside the page, please use","布局":"Layout","平行四边形":"Parallelogram","并行模式":"Parallel","幻灯片布局":"Slide layout","底对齐":"Bottom","底部对齐":"Bottom","延迟":"Delay","开始":"Start","弱关系":"Weak Relationship","弱实体":"Weak Entity","形状":"Shape","彩虹分支":"Multi-colored lines","循环起止符":"Loop Limit","思维导图":"Mindmap","成组":"Group","或者":"Or","所有 icon 素材均来自 iconfont 平台，仅供广大用户交流学习使用，未经 iconfont 或其关联公司书面授权许可，不得用于任何商业用途。":"All icon materials come from the iconfont platform and are only for the communication and learning of the majority of users, and may not be used for any commercial purposes without the written authorization of iconfont or its affiliates.","手动循环":"Manual loop","手动设置节点宽度":"Fixed size","手动设置节点尺寸":"Custom size","手动输入":"Manual Input","打开设置":"Setting","批注":"Annotation","折叠":"Collapse","折叠节点":"Collapse topic","拖拽":"Drag","排列":"Arrange","排序":"Sort","接口":"Interface","接收信号":"Receive Signal","控制":"Control","推荐素材":"Recommended material","描边":"Stroke","插入":"Insert","插入 Iconfont":"Insert Iconfont","插入主节点":"Insert root topic","插入同级":"Insert sibling","插入同级节点":"Insert topic","插入图片":"Insert image","插入子级":"Insert child","插入子节点":"Insert subtopic","插入父级":"Insert parent","插入连线":"Inset line","插入链接":"Insert link","搜索结果为空":"Search results are empty","撤销":"Undo","数据":"Data","数据库":"Storage","整理":"Collate","文字样式":"Text Style","文本":"Text","文本颜色":"Font color","文档":"Document","新建节点":"New Node","旋转":"Rotate","旋转角度":"Rotate angle","无颜色":"No color","时间信号":"Frequency","星形":"Star","显示":"Display","暂时无法从 iconfont 获取资源":"Temporarily unable to get resources from iconfont","更多 >":"More >","最近使用":"Recently Used","条带":"Paper Tape","标注":"Comment","标注 2":"Annotation 2","样式":"Styles","格式":"Format","格式面板":"Format panel","框选后，右键添加到素材库":"After frame selection, right click and add to material library","梯形":"Trapezoid","概化":"Generalization","正文":"Text","步骤一：框选需要添加的内容":"Step 1: Box to select the content to be added","步骤二：右键打开面板，选择“添加到素材库”":"Step 2: Right-click to open the panel and select 'Add to Material Library'","水平均分":"Distribute horizontally","水平对齐":"Horizontal Alignment","汇总连接":"Summing Junction","注释":"Annotation","泳道":"Swimlane","泳道垂直":"Vertical Swimlane","泳道水平":"horizontal Swimlane","泳道数":"Lane Number","活动":"Activity","活动类":"Activity Class","派生属性":"Derived Attribute","流程图":"Flowchart","流程图图形":"Flowchart Graphics","流程箭头":"process-arrow","流终止":"Termination Pseudostate","添加到素材库":"Add to material library","添加图形":"Insert Geometry","添加思维导图":"Insert Mindmap","添加文字":"Insert Text","添加自定义素材":"Add custom material","添加连线":"Insert Line","添加链接":"Insert Link","激活":"Activation","点击选中元素":"Click on the selected element","父级":"Parent","版权说明":"Copyright statement","状态":"State","用例":"Use Case","矩形":"Rectangle","硬盘":"Hard Disk","竖直对齐":"Vertical Alignment","端点":"End Point","简单类":"Simple Class","类":"Class","类型":"Type","粗细":"Line Width","粘贴":"Paste","粘贴失败":"Paste failed","素材库":"Material Lib","素材版权说明":"Material copyright statement","约束":"Constraint","线条":"Line","线条/边框":"Line/Border","线条样式":"Line style","线条端点":"Line Endpoint","线条类型":"Line Shape","线条粗细":"Line Width","线条颜色":"Line Color","组件":"Component","组合片段":"Frame","终点":"End","绑定":"Boundary","结束":"Finish","结构":"Structure","编辑文本":"Edit text","置底":"Back","置顶":"Front","背景":"Background","背景颜色":"Background color","自动适配":"Adaption","自定义素材":"Custom material","节点":"Node","节点填充":"Fill","节点形状":"Topic shape","节点描边":"Stroke","菱形":"Diamond","角度":"Angle","角色":"Actor","设置":"Setting","设置面板":"Properties","语雀文档":"Yuque document","语雀表格":"Yuque table","请搜索":"Please search","起止符":"Terminator","起点":"Start","转换":"Swap","边框":"Border","边框粗细":"Border thickness","边框颜色":"Border color","过程":"Process","连接器":"Connector","连接线":"Line","连线":"Insert Line","适应画布":"Reset View","重做":"Redo","链接":"Link","隐藏工具栏":"Hide Toolbar","页外连接符":"Off-page Connector","顶对齐":"Top","顶部对齐":"Top","预定义流程":"Predefined Process","颜色":"Color","高":"Height","高度":"Height","概要":"Abstract","添加概要":"Insert Abstract"}}};function ar(e,t){if(!e)return e;var n=rr.locale,r=rr.translations[n]||{};return"zh-cn"!==n&&(e=r[e]||e),e.replace(/\{([^\}]+)\}/g,(function(e,n){return t[n]||n}))}var ir=["#A287E1","#E48484","#69B1E4","#DE81C6","#77C386","#DFB85D","#8169BF"],or={html:"".concat(ar("思维导图")),type:"mindmap",defaultContentStyle:{color:"rgb(38, 38, 38)"},border:{fill:"rgb(245, 245, 245)"}},cr={"line-height":!0,"font-size":!0,"text-decoration-line":!0,"font-weight":!0,"font-style":!0,"text-align":!0,"text-decoration":!0,color:!0},lr=[{key:"top",icon:"top",title:"顶部对齐"},{key:"middle",icon:"middle",title:"垂直居中"},{key:"bottom",icon:"bottom",title:"底部对齐"}],sr=lr.map((function(e){return e.key})),ur="rgba(88, 90, 90, 0.7)",dr=Object.freeze({__proto__:null,INLINE_STYLE:cr,EMPTY_TEXT:"&#8203;",LOCKED_STROKE_COLOR:"#979797",DEFAULT_FONT_COLOR:"#262626",MULTI_SELECTED_FRAME_FILL:"rgba(9, 109, 217, .05)",LOCAL_STORAGE_CLIPBOARD_DATA_KEY:"lake_diagram_clipboard_data",LOCAL_STORAGE_CUSTOM_COLORS_KEY:"lake_diagram_custom_colors",LOCAL_STORAGE_GRAPHIC_LATEST_USED:"lake_diagram_graphic_latest_used",MINIMUM_STACK_CELL_HEIGHT:30,STACK_CELL_VERTICAL_PADDING:12,MAXIMUM_LINE_TEXT_DISTANCE:60,VERTICAL_TEXT_ALIGN_DEFAULT_VALUE:"middle",VERTICAL_TEXT_ALIGN_ALIGN_DATA:lr,VERTICAL_TEXT_ALIGN_VAILD_VALUES:sr,REF_LINE_STROKE:"#1672F3",RESIZE_STROKE:ur,RESIZE_FILL:"#FFFFFF",RESIZE_LINE_STROKE:"#3384F5",RESIZE_BUTTON_RADIUS:4,ANCHOR_STORE:"rgba(255,255,255,0.6)",ANCHOR_FILL:"rgba(192, 217, 252, 0.6)",ANCHOR_HOVER_FILL:"rgba(95, 159, 246, 0.6)",CONTROL_STROKE:"rgba(255,255,255,0.8)",CONTROL_FILL:"#3384F5",ANTIANCHOR_STROKE:"#3384F5",ANTIANCHOR_FILL:"rgba(192,217,252,0.2)",CONNECT_FILL:"rgba(192,217,252,0.2)",SELECTED_STROKE_COLOR:"#3384F5",LINE_DOCK_TIME:1500,DRAG_DISTANCE_THRESHOLD:8,SWIMLANE_SINGLE_LANE_WIDTH:150,MAX_LANE_NUMBER:50,MIN_LANE_NUMBER:1,MINDMAP_ROOT_TEMPLATE:or}),hr="http://www.w3.org/2000/svg",fr="http://www.w3.org/1999/xlink";function pr(e){e=e||document.body;var t=document.createElementNS(hr,"svg");return t.setAttribute("version","1.1"),t.setAttribute("xmlns",hr),t.setAttribute("xmlns:xlink",fr),t.style.opacity=0,t.style.width="0px",t.style.height="0px",t.style.position="absolute",t.style["z-index"]=-1,e.appendChild(t),t}function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gr=pr(),vr=function(e){j()(n,_.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this),c()(P()(r),"options",void 0),c()(P()(r),"matrix",void 0),c()(P()(r),"rendererElement",void 0),c()(P()(r),"destroyed",void 0),c()(P()(r),"styles",void 0),c()(P()(r),"attrs",void 0),c()(P()(r),"parent",void 0);var a=yr({matrix:[1,0,0,0,1,0,0,0,1]},e);if(!a.name)throw new Error("Should set name for Graphics Element!");return r.options=a,r.matrix=a.matrix,r.attrs={},r.styles={},r.rendererElement=r.create(a.name),r.update(a),r}return g()(n,[{key:"hide",value:function(){this.update({visibility:"hidden"})}},{key:"show",value:function(){this.update({visibility:"visible"})}},{key:"on",value:function(e,t){return"string"==typeof e&&-1!==this.passthroughEventKeys().indexOf(e)&&this.rendererElement.addEventListener(e,t),I()(A()(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){return"string"==typeof e&&-1!==this.passthroughEventKeys().indexOf(e)&&this.rendererElement.removeEventListener(e,t),I()(A()(n.prototype),"off",this).call(this,e,t)}},{key:"passthroughEventKeys",value:function(){return["mousedown","mouseenter","mouseleave","mousemove","mouseover","click"]}},{key:"passthroughAttributeKeys",value:function(){return["id","fill","stroke","stroke-width","stroke-linecap","stroke-linejoin","stroke-miterlimit","clip-path","visibility","pointer-events","opacity","stroke-dasharray","class"]}},{key:"_getPassthroughData",value:function(e,t){var n={},r=Object.keys(t),a=this["passthrough".concat(e,"Keys")]();return r.filter((function(e){return a.includes(e)})).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}},{key:"dataset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.rendererElement;t.dataset?Object.assign(t.dataset,e):Object.keys(e).forEach((function(n){t.setAttribute("data-".concat(n),e[n])}))}},{key:"update",value:function(e){var t=this._getPassthroughData("Attribute",e),n=e.matrix;n&&(t.transform="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(n[6],", ").concat(n[7],")"),this.matrix=n),this.attr(t)}},{key:"_setAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rendererElement;Object.keys(e).forEach((function(n){var r=e[n];null==r?t.removeAttribute(n):t.setAttribute(n,r)}))}},{key:"_setStyles",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.rendererElement.style[n]=e[n]}))}},{key:"create",value:function(e){return document.createElementNS(hr,e)}},{key:"css",value:function(e){if("object"===i()(e))this.styles=yr(yr({},this.styles),e),this._setStyles(e);else if("string"==typeof e)return this.styles[e]}},{key:"attr",value:function(e){if("object"===i()(e))this.attrs=yr(yr({},this.attrs),e),this._setAttrs(e);else if("string"==typeof e)return this.attrs[e]}},{key:"getBBox",value:function(){var e,t=this.rendererElement,n=this.canvas,r=n&&n.calculateCanvas||gr;if(document.contains(t))e=t.getBBox();else{var a=t.cloneNode(!0);r.appendChild(a),e=a.getBBox(),r.removeChild(a)}return{x:e.x,y:e.y,width:e.width,height:e.height}}},{key:"capture",value:function(e){!0===e?this.css({"pointer-events":"auto"}):!1===e&&this.css({"pointer-events":"none"})}},{key:"getBoundingClientRect",value:function(){return this.rendererElement.getBoundingClientRect()}},{key:"getZIndex",value:function(){return this.parent?this.parent.children.indexOf(this):null}},{key:"getSiblingRendererElement",value:function(){return this.rendererElement.nextSibling?["before",this.rendererElement.nextSibling]:this.rendererElement.previousSibling?["after",this.rendererElement.previousSibling]:null}},{key:"remove",value:function(){this.parent&&this.parent.removeChild(this)}},{key:"previousSibling",get:function(){if(!this.parent)return null;var e=this.parent.children,t=e.indexOf(this);return t>=1?e[t-1]:null}},{key:"nextSibling",get:function(){var e=this.parent.children,t=e.indexOf(this);return t>=0?e[t+1]:null}},{key:"before",value:function(e){if(!this.parent)return null;this.parent.insertBefore(e,this)}},{key:"after",value:function(e){var t;if(!this.parent)return null;null===(t=this.parent)||void 0===t||t.insertAfter(e,this)}},{key:"toBack",value:function(){if(!this.destroyed){var e=this.parent;e&&e.insertBefore(this,e.children[0])}}},{key:"toFront",value:function(){if(!this.destroyed){var e=this.parent;e&&e.insertBefore(this,null)}}},{key:"forward",value:function(){if(!this.destroyed){var e=this.parent,t=this.nextSibling;e&&t&&e.insertBefore(t,this)}}},{key:"backward",value:function(){if(!this.destroyed){var e=this.parent,t=this.previousSibling;e&&t&&e.insertBefore(this,t)}}},{key:"destroy",value:function(){this.destroyed=!0,this.options=null,this.remove()}}]),n}();function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xr=function(e){j()(n,vr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;m()(this,n);var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:"g"},e);return r=t.call(this,a),c()(P()(r),"children",void 0),r.children=[],r}return g()(n,[{key:"passthroughAttributeKeys",value:function(){return I()(A()(n.prototype),"passthroughAttributeKeys",this).call(this)}},{key:"deepEach",value:function(e){St(this,e)}},{key:"add",value:function(e){this.children.includes(e)||(e.parent=this,this.children.push(e),this.rendererElement.appendChild(e.rendererElement))}},{key:"append",value:function(e){this.rendererElement.appendChild(e.rendererElement)}},{key:"prepend",value:function(e){this.insertBefore(e,this.children[0])}},{key:"insertBefore",value:function(e,t){var n=this.children,r=this.rendererElement,a=n.indexOf(e);a>=0&&n.splice(a,1),e.parent=this;var i=n.indexOf(t);i>=0?(n.splice(i,0,e),r.insertBefore(e.rendererElement,t.rendererElement)):(n.push(e),r.insertBefore(e.rendererElement,null))}},{key:"insertAfter",value:function(e,t){t?this.insertBefore(e,t.nextSibling):this.insertBefore(e,null)}},{key:"removeChild",value:function(e){if(e.parent===this){var t=this.children,n=t.indexOf(e);n>-1&&t.splice(n,1),e.parent=void 0,this.rendererElement.removeChild(e.rendererElement)}}},{key:"clear",value:function(){N()(this.children).forEach((function(e){e.remove()}))}}]),n}();function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cr=function(e){j()(n,xr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(m()(this,n),!(r=wr({container:null,calculatedContainer:null,name:"svg"},r)).container)throw new Error("Please set container for canvas!");e=t.call(this,r),c()(P()(e),"calculateCanvas",void 0),e.options=r;var a=r,i=a.container,o=P()(e),l=o.rendererElement;return l.setAttribute("version","1.1"),l.setAttribute("xmlns",hr),l.setAttribute("xmlns:xlink",fr),i.appendChild(l),e.createCalculateCanvas(),e.container=i,e.canvas=P()(e),e}return g()(n,[{key:"createCalculateCanvas",value:function(){var e=this.options;this.calculateCanvas=pr(e.calculatedContainer)}},{key:"remove",value:function(){this.container&&this.container.removeChild(this.rendererElement),this.calculateCanvas&&this.calculateCanvas.parentElement.removeChild(this.calculateCanvas)}}]),n}();function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pr=function(e){j()(n,xr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,Or({x:0,y:0,scale:1,rotate:0},e))}return g()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.options,e);var t=this.options,r=t.x,a=t.y,i=t.scale,o=t.rotate,c=i,l=Math.cos(o),s=Math.sin(o);e.matrix=[l*c,s*c,0,-s*c,l*c,0,r,a,1],I()(A()(n.prototype),"update",this).call(this,e)}}]),n}();var Mr=function(e){j()(n,vr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e=t.call(this,r),c()(P()(e),"isShape",!0),e}return g()(n)}();function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lr=function(e){j()(n,Mr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=Rr(Rr({},r),{},{name:"path"}),e=t.call(this,r),c()(P()(e),"isPath",!0),e}return g()(n,[{key:"passthroughAttributeKeys",value:function(){return I()(A()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["d","marker-start","marker-end","fill-rule","clip-rule"])}},{key:"update",value:function(e){var t=e.d;Array.isArray(t)?I()(A()(n.prototype),"update",this).call(this,Rr(Rr({},e),{},{d:kn(t)})):I()(A()(n.prototype),"update",this).call(this,e)}},{key:"getPath",value:function(e,t){var n;return zn(null===(n=this.options)||void 0===n?void 0:n.d,e,t)}},{key:"getClosestPoint",value:function(e,t){if("number"==typeof e&&"number"==typeof t){var n=e,r=t,a=Qi(this.rendererElement,(function(e,t){var a=e-n,i=t-r;return a*a+i*i})),i=a.point,o=a.percentage;return{point:[i.x,i.y],percentage:o}}if("number"!=typeof e&&t&&"number"!=typeof t){var c,l=e,s=t,u=er(this.rendererElement.getBBox()),d=ye.from(s).voronoi([u.minX-10,u.minY-10,u.maxX+10,u.maxY+10]),h=0,f=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(d.cellPolygons());try{for(f.s();!(c=f.n()).done;){if(c.value,d.contains(h,l.x,l.y))return h;h++}}catch(e){f.e(e)}finally{f.f()}return 0}}},{key:"getIntersectionPoint",value:function(e,t,n,r){return Qi(this.rendererElement,(function(a,i){var o=a-e,c=i-t,l=a-n,s=i-r;return Math.sqrt(o*o+c*c)+Math.sqrt(l*l+s*s)})).point}}]),n}();function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}["getPointAtLength","getTotalLength","isPointInFill","isPointInStroke"].forEach((function(e){Object.defineProperty(Lr.prototype,e,{value:function(){var t=this.rendererElement;return t[e].apply(t,arguments)}})}));var Nr=function(e){j()(n,Mr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e=Br({name:"html",html:"",x:0,y:0,width:0,height:0,styleSheets:[]},e),t.call(this,e)}return g()(n,[{key:"addClass",value:function(e){this.htmlContainer.classList.add(e)}},{key:"removeClass",value:function(e){this.htmlContainer.classList.remove(e)}},{key:"passthroughAttributeKeys",value:function(){return I()(A()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["x","y","width","height"])}},{key:"create",value:function(){var e=document.createElement("div"),t=I()(A()(n.prototype),"create",this).call(this,"foreignObject");return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e),this.htmlContainer=e,Ut(this.htmlContainer,this.options.styleSheets),t}},{key:"update",value:function(e){e.html&&this.htmlContainer.innerHTML!==e.html&&(this.html=e.html,this.htmlContainer.innerHTML=e.html,Ut(this.htmlContainer,this.options.styleSheets)),I()(A()(n.prototype),"update",this).call(this,e)}}]),n}();var Dr=function(e){j()(n,Mr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e={name:"avatar",matrix:e.element.matrix,element:e.element},t.call(this,e)}return g()(n,[{key:"create",value:function(){return this.options.element.rendererElement.cloneNode(!0)}}]),n}();function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _r=function(e){j()(n,Mr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),t.call(this,Tr({name:"image",crossorigin:"anonymous",preserveAspectRatio:"none"},e))}return g()(n,[{key:"passthroughAttributeKeys",value:function(){return I()(A()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["href","x","y","width","height","crossorigin","preserveAspectRatio"])}}]),n}();function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fr=function(e){j()(n,Lr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){m()(this,n);var r=e.x,a=e.y,i=e.width,o=e.height,c=e.rx,l=e.ry;return t.call(this,zr(zr({},e),{},{d:wn(r,a,i,o,c,l)}))}return g()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options,r=n.x,a=n.y,i=n.width,o=n.height,c=n.rx,l=n.ry;return wn(r*e,a*t,i*e,o*t,Math.min(c*e,c),Math.min(l*e,l))}}]),n}();function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gr=function(e){j()(n,Lr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){m()(this,n);var r=e.cx,a=e.cy,i=e.rx,o=e.ry;return t.call(this,Xr(Xr({},e),{},{d:En(r,a,i,o)}))}return g()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options,r=n.cx,a=n.cy,i=n.rx,o=n.ry;return En(r*e,a*t,i*e,o*t)}}]),n}();function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vr=function(e){j()(n,vr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e=Wr({name:"use"},e),t.call(this,e)}return g()(n,[{key:"passthroughAttributeKeys",value:function(){return I()(A()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["x","y","width","height","href"])}}]),n}();function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kr=function(e){j()(n,vr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,Zr(Zr({},e),{},{name:"title"}))}return g()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title;null!=t&&(this.rendererElement.innerHTML=t)}}]),n}();function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $r=function(e){j()(n,vr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,Jr(Jr({},e),{},{name:"text"}))}return g()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I()(A()(n.prototype),"update",this).call(this,e);var t=e||{},r=t.text;null!=r&&(this.rendererElement.innerHTML=r)}},{key:"passthroughAttributeKeys",value:function(){return I()(A()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["dominant-baseline","x","y","textLength"])}}]),n}();function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var na=function(e){j()(n,Lr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){m()(this,n);var r=e.points;return t.call(this,ta(ta({},e),{},{d:Cn(r).concat("z")}))}return g()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options.points,r=n.map((function(n){return{x:n.x*e,y:n.y*t}}));return Cn(r).concat("z")}}]),n}();function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ia=function(e){j()(n,xr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),r=aa({name:"defs",matrix:null},r),(e=t.call(this,r)).isDefs=!0,e}return g()(n)}();var oa=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ca=function(e){j()(n,vr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this,{name:"linearGradient",matrix:null})).id=Object(q.a)(),e.rendererElement.setAttribute("id",e.id),e}return g()(n,[{key:"update",value:function(e){if("string"==typeof e){var t,n,r,a,i=this.rendererElement,o=oa.exec(e),c=(n=parseFloat(o[1]),(Math.PI/180*n%(t=2*Math.PI)+t)%t),l=o[2];c>=0&&c<.5*Math.PI?(r={x:0,y:0},a={x:1,y:1}):.5*Math.PI<=c&&c<Math.PI?(r={x:1,y:0},a={x:0,y:1}):Math.PI<=c&&c<1.5*Math.PI?(r={x:1,y:1},a={x:0,y:0}):(r={x:0,y:1},a={x:1,y:0});var s=Math.tan(c),u=s*s,d=(a.x-r.x+s*(a.y-r.y))/(u+1)+r.x,h=s*(a.x-r.x+s*(a.y-r.y))/(u+1)+r.y;i.setAttribute("x1",r.x),i.setAttribute("y1",r.y),i.setAttribute("x2",d),i.setAttribute("y2",h),i.innerHTML=function(e){var t=e.match(/[\d.]+:(#[^\s]+|[^\)]+\))/gi);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),t.forEach((function(e){e=e.split(":"),n+='<stop offset="'.concat(e[0],'" stop-color="').concat(e[1],'"></stop>')})),n}(l)}}}]),n}();function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ua=function(e){j()(n,xr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,sa(sa({},e),{},{name:"marker"}))}return g()(n,[{key:"passthroughAttributeKeys",value:function(){return I()(A()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["id","markerWidth","markerHeight","viewBox","orient","refX","refY"])}}]),n}();function da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?da(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fa=function(e){j()(n,xr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),(e=t.call(this,ha(ha({},r),{},{name:"filter"}))).children=[],e}return g()(n,[{key:"add",value:function(e){e.parent=this,this.children.push(e),this.rendererElement.appendChild(e.rendererElement)}},{key:"destroy",value:function(){this.children.forEach((function(e){return e.destroy()})),I()(A()(n.prototype),"destroy",this).call(this)}}]),n}();function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ya=function(e){j()(n,vr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,ma(ma({},e),{},{name:"feDropShadow"}))}return g()(n,[{key:"passthroughAttributeKeys",value:function(){return I()(A()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["dx","dy","stdDeviation","flood-color"])}}]),n}();function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ba=function(e){j()(n,xr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,va(va({},e),{},{matrix:null,name:"clipPath"}))}return g()(n,[{key:"passthroughAttributeKeys",value:function(){return I()(A()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["id","clipPathUnits"])}}]),n}(),xa=Object.freeze({__proto__:null,Canvas:Cr,Group:xr,FixedGroup:Pr,Shape:Mr,Path:Lr,Html:Nr,Avatar:Dr,Image:_r,Defs:ia,LinearGradient:ca,Rect:Fr,Ellipse:Gr,Marker:ua,Use:Vr,Filter:fa,FeDropShadow:ya,ClipPath:ba,Title:Kr,Text:$r,Polygon:na});function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Pr,r=new Lr({d:On(0,0,4),stroke:ur,fill:"#FFFFFF","stroke-width":1});return n.add(r),r.dataset(wa(wa({},t),{},{type:"point",cursor:e})),{group:n,shape:r,name:e}}function Ea(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new xr,r=new Lr({stroke:"rgba(255,255,255,0)"}),a=new Lr({stroke:"#3384F5"});return r.dataset(wa(wa({},t),{},{type:"line",cursor:e})),n.add(a),n.add(r),{visShape:a,shape:r,name:e,group:n}}function Oa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Pr,r=8,a=2*r,i=new _r({href:"https://gw.alipayobjects.com/zos/bmw-prod/4b5add15-99f2-4473-9ad5-98faf7686060.svg",x:-r,y:-r,width:a,height:a});return n.add(i),i.dataset(wa({lake_prevent_click_unselect:"true",rotate_button:"true"},t)),n.css({cursor:"pointer"}),{group:n,shape:i,name:e}}var Pa=function(e){for(var t=e;null!==(n=t)&&void 0!==n&&n.parent&&Wn(null===(r=t)||void 0===r?void 0:r.parent);){var n,r,a;t=null===(a=t)||void 0===a?void 0:a.parent}return t};function Ma(e){var t=F()(e).toRgb(),n=t.r,r=t.g,a=t.b;return t.a<.5||.299*n+.587*r+.114*a>=210?"#8C8C8C":"#fff"}var ja=[];try{ja=JSON.parse(r.LocalStorageUtil.getItem("lake_diagram_custom_colors"))||[]}catch(ix){ja=[]}var Sa=ja;function Ra(e,t){var n=t.colors.reduce((function(e,t){return e.concat(t)}),[]);Sa.concat(n).includes(e)||(Sa.push(e),Sa.length>10&&Sa.splice(0,1)),r.LocalStorageUtil.setItem("lake_diagram_custom_colors",JSON.stringify(Sa))}function La(e,t){var n=[],r={};return e.forEach((function(e){St(e,(function(e){var a=Object(q.a)();r[e.id]=a,t&&(t[a]=t[e.id]),e.id=a,"line"!==e.type&&"edge"!==e.type||n.push(e)}))})),n.forEach((function(e){e.source&&e.source.id&&r[e.source.id]&&(e.source.id=r[e.source.id]),e.target&&e.target.id&&r[e.target.id]&&(e.target.id=r[e.target.id])})),r}function Aa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),i=Math.sin(n),o=Ii(8,r,[r[0]+a,r[1]+i]);return o(e,0)||o(e,4)?"ew-resize":o(e,1)||o(e,5)?"nesw-resize":o(e,2)||o(e,6)?"ns-resize":"nwse-resize"}function Ba(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),i=Math.sin(n),o=Ii(4,r,[r[0]+a,r[1]+i]);return o(e,0)||o(e,2)?"nesw-resize":"nwse-resize"}function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ia(e){var t=new Image;return new Promise((function(n,r){t.onload=function(){n(t)},t.onerror=function(){r(new Error("unable to load url ".concat(e)))},t.crossOrigin="anonymous",t.src=e}))}function Ta(e,t,n,r,a,i,o,c,l,s,u){var d=document.createElement("canvas"),h=d.getContext("2d");d.width=s,d.height=u,h&&h.drawImage(t,r,a,i,o,c,l,s,u),e.push({canvas:d,fy:a*n,fHeight:u})}function _a(e){return qa.apply(this,arguments)}function qa(){return(qa=X()(H.a.mark((function e(t){var n,r,a,i,o,c,l,s,u,d,h,f,p,m,y,g,v,b,x,k,w,C,E=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.length>1&&void 0!==E[1]?E[1]:{},e.next=3,Ia(t);case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(a=document.createElement("canvas"),i=Da({width:r.naturalWidth,height:r.naturalHeight,fLimit:1e4,ratio:1},n),o=i.width,c=i.height,l=i.fLimit,s=i.backgroundColor,u=i.ratio,d=o*u,h=c*u,a.width=d,a.height=h,f=a.getContext("2d")){e.next=15;break}return e.abrupt("return");case 15:if(s&&(f.fillStyle=s,f.fillRect(0,0,d,h)),h>l){for(p=parseInt(h/l),m=h%l,y=0,g=0,v=o,b=d,x=[],k=0,w=0,C=0;C<p;C++)Ta(x,r,u,y,k,v,l/u,g,w,b,l),k+=l/u;Ta(x,r,u,y,k,v,m/u,g,w,b,m),x.forEach((function(e){var t=e.canvas,n=e.fy,r=e.fHeight;f.drawImage(t,0,n,d,r)}))}else f.drawImage(r,0,0,d,h);return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var za=Object.freeze({__proto__:null,loadImage:Ia,loadCanvas:_a});function Fa(e){return W.ua.macos?e.metaKey:e.ctrlKey}var Ya=Object.freeze({__proto__:null,isMod:Fa}),Xa=[{key:"standard-h",directions:[[1,0],[-1,0]]},{key:"standard-r",directions:[[1,0]]},{key:"standard-l",directions:[[-1,0]]},{key:"standard-t",directions:[[0,-1]]},{key:"standard-b",directions:[[0,1]]},{key:"indent-br",directions:[[1,1]]},{key:"indent-bl",directions:[[-1,1]]},{key:"indent-tr",directions:[[1,-1]]},{key:"indent-tl",directions:[[-1,-1]]},{key:"timeline-r",directions:[[1,0]]},{key:"timeline-l",directions:[[-1,0]]}];function Ga(e,t){if(0!==e.length){var n=[];return e.forEach((function(e){var r=t.get([e],"downDirection");if(r){var a=t.get([e],"downLayoutType"),i=t.get([e],"layoutQuadrantConstraint"),o=r.map((function(e){return Math.sign(e)})).join(","),c=(1===i.length?{"0,-1":"t","0,1":"b","-1,0":"l","1,0":"r","1,1":"br","-1,1":"bl","1,-1":"tr","-1,-1":"tl"}:{"-1,0":"h","1,0":"h","0,1":"v","0,-1":"v"})[o];n.push("".concat(a,"-").concat(c))}})),n.every((function(e){return e===n[0]}))?n[0]:"multiValue"}}function Ha(e){var t,n,r=e.split("-"),a=b()(r,2),i=a[0],o=a[1];return"indent"===i?(t=[1,1],n={br:[1],bl:[2],tl:[3],tr:[4]}[o]):"standard"===i?"h"===o?(t=[1,0],n=null):"v"===o?(t=[0,1],n=null):"r"===o?(t=[1,0],n=[1]):"l"===o?(t=[1,0],n=[2]):"t"===o?(t=[0,1],n=[2]):"b"===o&&(t=[0,1],n=[1]):"timeline"===i&&("r"===o?(t=[1,0],n=[1]):"l"===o&&(t=[1,0],n=[2])),{type:i,direction:t,quadrantConstraint:n}}function Wa(e,t){var n=t.some((function(t,n){return Math.sign(t)===Math.sign(e[n])})),r=t.every((function(t,n){return Math.sign(t)!==-Math.sign(e[n])||0===Math.sign(t)}));return n&&r}function Va(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?"standard"!==t:"timeline"===e&&"indent"!==t}var Ua=function(e,t){var n=new Pr,r=new Gr({cx:0,cy:0,rx:4,ry:4,width:8,height:8,stroke:t?"rgba(255,255,255,0.40)":ur,strokeWidth:"2px",fill:t?"rgba(9,109,217,0.40)":"#FFFFFF"});return r.dataset({isControlPoint:"".concat(!t),isUIPoints:"".concat(t),index:"".concat(e),test_id:"line-control-point_".concat(e)}),n.add(r),n.dataset({lake_prevent_click_unselect:"true",test_id:"line-control-point_".concat(e),isControlPoint:"".concat(!t),isUIPoints:"".concat(t),index:"".concat(e)}),{group:n,shape:r,index:e,isUIPoints:t,isControlPoints:!t}},Za=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=Ua(e,t);return n&&(a.shape.css({cursor:"V"===r[r.length-1]?"row-resize":"col-resize"}),a.group.dataset({test_id:"elbow_".concat(t?"ui_point":"control_point","_").concat(e)})),a},Ka=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=new Pr,r=new Gr({cx:0,cy:0,rx:t,ry:t,stroke:ur,fill:"#FFFFFF"});return n.add(r),n.dataset({lake_prevent_click_unselect:"true",test_id:"line_endpoint_".concat(e)}),{group:n,shape:r,name:e}};function Qa(e,t){for(var n=e.getPoints(),r=Mn(e.controlPoints,n,t),a=[],i=0;i<r.length-1;i++){var o=r[i],c=r[i+1],l=[.5*(o[1]+c[1]),.5*(o[2]+c[2]),mi(o[1],c[1],2)?"H":"V"];a.push(l)}return a.length>2?a.slice(1,a.length-1):a}function Ja(e){var t=e.cell,n=e.uiPoints,r=e.uiPointIndex;return"elbow"===t.shape?function(e,t,n){return t.length<=1?t:0===n?t.splice(0,t.length-1):n===t.length-1?t.splice(1):t.slice(1,t.length-1)}(0,n,r):function(e,t,n){var r=t[n],a=d()(e.controlPoints);return a.splice(n,0,r),a}(t,n,r)}function $a(e,t){var n=[];return"straight"===e.shape?n=function(e){var t,n=[],r=e.getPoints(),a=r.length;for(t=0;t<a-1;t++){var i=[.5*(r[t].x+r[t+1].x),.5*(r[t].y+r[t+1].y)];n.push(i)}return n}(e):"curve"===e.shape?n=function(e){var t=[],n=e.getPoints().length,r=e.wireElement;if(2===n){var a=r.getPointAtLength(.5*r.getTotalLength());t.push([a.x,a.y])}else if(3===n){var i=r.getPointAtLength(.25*r.getTotalLength()),o=r.getPointAtLength(.75*r.getTotalLength());t.push([i.x,i.y]),t.push([o.x,o.y])}else{var c,l=bn(e.d);for(c=0;c<l.length-1;c++){var s=[];if("M"===l[c][0])s.push(l[c]),s.push(l[c+1]);else{var u=l[c];s.push(["M",u[u.length-2],u[u.length-1]]),s.push(l[c+1])}var d=kn(s),h=new Lr({d:d}),f=h.getPointAtLength(.5*h.getTotalLength());h.destroy(),t.push([f.x,f.y])}}return t}(e):"elbow"===e.shape&&(n=function(e,t){if(e.controlPoints.length>0||e.isLoop)return function(e,t){var n=e.getPoints(),r=e.controlPoints,a=n[0],i=r[0],o=n[n.length-1],c=r[r.length-1],l=d()(Qa(e,t)),s=Mn(r,n,t);return l.length<=2&&s.length<=3||(mi(i[0],a.x)||mi(i[1],a.y)||("V"===i[i.length-1]?l.unshift([a.x,.5*(i[1]+a.y),"H"]):l.unshift([.5*(i[0]+a.x),a.y,"V"])),mi(c[0],o.x)||mi(c[1],o.y)||("V"===c[c.length-1]?l.push([o.x,.5*(c[1]+o.y),"H"]):l.push([.5*(c[0]+o.x),o.y,"V"]))),l}(e,t);var n=e.source,r=e.target,a=e.diagram,i=a.find(n.id),o=a.find(r.id),c=e.getPoints(),l=[];if(!i&&!o&&2===c.length){var s=c[0],u=c[1],h=.5*(s.x+u.x),f=.5*(s.y+u.y);return mi(s.x,u.x)||mi(s.y,u.y)?l.push([h,f,0]):(l.push([.5*(s.x+h),s.y,"V"]),l.push([h,f,"H"]),l.push([.5*(h+u.x),u.y,"V"])),l}for(var p=bn(e.d),m=1;m<p.length;m++){var y=p[m-1],g=p[m];mi(y[1],g[1])?l.push([y[1],.5*(y[2]+g[2]),"H"]):mi(y[2],g[2])&&l.push([.5*(y[1]+g[1]),y[2],"V"])}return l}(e,t)),n}var ei=function(e){return Array.isArray(e)?{x:e[0],y:e[1]}:e},ti=document.createElementNS(hr,"svg"),ni=function(e){var t,n;if(Array.isArray(e)){var r=b()(e,2);t=r[0],n=r[1]}else t=e.x,n=e.y;var a=ti.createSVGPoint();return a.x=t,a.y=n,a},ri=function(e){return!!(E()(e)&&e.hasOwnProperty("x")&&e.hasOwnProperty("y"))};function ai(e,t){var n=e;if("number"!=typeof e&&(n=Ci(e.x,e.y,t.x,t.y)),n>=5*Math.PI/4&&n<7*Math.PI/4)return"N";if(n>=7*Math.PI/4||n<Math.PI/4)return"E";if(n>=Math.PI/4&&n<3*Math.PI/4)return"S";if(n>=3*Math.PI/4&&n<5*Math.PI/4)return"W";throw new Error("unexpected radian ".concat(n))}var ii=["penetratedKeys","Subcells"],oi=function(e,t){return f()(e,t,(function(e,t,n){if(ii.indexOf(n)>-1)return[].concat(N()(e||[]),N()(t||[]))}))},ci=function(e){return U()(e,(function(e){if("object"===i()(e)&&!s()(e))return e}))},li=Object.freeze({__proto__:null,mergeDefalutProps:oi,cloneDeepDefaultProps:ci}),si=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=a?a/180*Math.PI:0,c=Math.sin(o),l=Math.cos(o),s=n/2,u=r/2;return[l*i,c*i,0,-c*i,l*i,0,e+(-s*l+u*c+s),t+(-s*c-u*l+u),1]};function ui(e,t){return{minX:-1.5*e,minY:t+10,maxX:2.5*e,maxY:t+30}}function di(e,t,n){var r=e/2,a=t/2,i=r<n?r:n,o=a<n?a:n;return[["M",+i+0,0],["l",e-2*i,0],["a",i,o,0,0,1,i,o],["l",0,t-2*o],["a",i,o,0,0,1,-i,o],["l",2*i-e,0],["a",i,o,0,0,1,-i,-o],["l",0,2*o-t],["a",i,o,0,0,1,i,-o],["z"]]}function hi(e){return e>=180&&(e-=360),e<=-180&&(e+=360),e}function fi(e){return 180*e/Math.PI}function pi(e){return Math.PI/180*e}function mi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(e-t)<=n}function yi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return e.length===t.length&&e.every((function(e,r){return mi(e,t[r],n)}))}function gi(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&e.maxX>=t.maxX&&e.maxY>=t.maxY}function vi(e,t){return!(t.maxX<e.minX||t.minX>e.maxX||t.maxY<e.minY||t.minY>e.maxY)}function bi(e,t,n,r){var a;return a=(r-t)/(n-e),isNaN(a)?1/0:a=Number(a.toFixed(2))}function xi(e,t,n,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r){var a=e,i=t;return Math.sqrt(Math.pow(n-a,2)+Math.pow(r-i,2))}if("number"!=typeof e&&"number"!=typeof t){var o=e,c=t;return Math.sqrt(Math.pow(o.x-c.x,2)+Math.pow(o.y-c.y,2))}return 0}function ki(e,t,n,r,a){var i=bi(e,t,n,r),o=Math.atan(i),c=n<e,l=a*Math.cos(o),s=a*Math.sin(o);return c&&(l*=-1,s*=-1),{offsetX:l,offsetY:s}}function wi(e,t,n,r,a){if(xi(e,t,n,r)<a)return{x:e,y:t};var i=ki(e,t,n,r,a);return{x:n-i.offsetX,y:r-i.offsetY}}function Ci(e,t,n,r){var a=bi(e,t,n,r),i=Math.atan(a);return n<e?i+Math.PI:r<t?i+2*Math.PI:i}function Ei(e,t,n,r){var a;return a=mi(e,n)?1/0:mi(t,r)?0:(a=(r-t)/(n-e)).toFixed(2),Number(a)}function Oi(e,t,n,r,a,i,o,c){if(Ei(e,t,n,r)===Ei(a,i,o,c))return!1;var l=((e*r-n*t)*(a-o)-(e-n)*(a*c-i*o))/((e-n)*(i-c)-(t-r)*(a-o)),s=((e*r-n*t)*(i-c)-(t-r)*(a*c-i*o))/((e-n)*(i-c)-(t-r)*(a-o));return{x:-0===l?0:l,y:-0===s?0:s}}function Pi(e,t,n,r){return Math.abs(e-n)+Math.abs(t-r)}function Mi(e,t,n){return e>=t&&e<=n}function ji(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-4;return mi(e,n,a)&&mi(t,r,a)}function Si(e,t,n,r,a,i,o,c){var l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],s={x:a-e,y:i-t},u={x:n-e,y:r-t},d={x:o-a,y:c-i},h=u.x*d.y-u.y*d.x,f=h*h,p=u.x*u.x+u.y*u.y,m=d.x*d.x+d.y*d.y,y=null;if(f>1e-4*p*m){var g=(s.x*d.y-s.y*d.x)/h,v=(s.x*u.y-s.y*u.x)/h;Mi(g,0,1)&&Mi(v,0,1)&&(y={x:e+g*u.x,y:t+g*u.y})}return y&&!l&&(ji(e,t,y.x,y.y,.1)||ji(n,r,y.x,y.y,.1)||ji(a,i,y.x,y.y,.1)||ji(o,c,y.x,y.y,.1))?null:y}function Ri(e,t,n,r){if(e===n)return{f:function(){return null},fy:function(){return e},string:"x=".concat(e.toFixed(3))};if(t===r)return{f:function(){return t},fy:function(){return null},string:"y=".concat(t.toFixed(3))};var a=(r-t)/(n-e),i=-e/(n-e)*(r-t)+t;return{f:function(e){return a*e+i},fy:function(e){return(e-i)/a},string:"y=".concat(a.toFixed(3),"x+").concat(i.toFixed(3))}}function Li(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!!(Si(e.x1,e.y1,e.x2,e.y2,t.minX,t.minY,t.minX,t.maxY,n)||Si(e.x1,e.y1,e.x2,e.y2,t.minX,t.minY,t.maxX,t.minY,n)||Si(e.x1,e.y1,e.x2,e.y2,t.maxX,t.minY,t.maxX,t.maxY,n)||Si(e.x1,e.y1,e.x2,e.y2,t.minX,t.maxY,t.maxX,t.maxY,n))}function Ai(e,t){return Ei(e.x,e.y,t.x1,t.y1)===Ei(e.x,e.y,t.x2,t.y2)}function Bi(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function Ni(e,t){if(e.k===1/0){if(e.y1<e.y2&&t.y<e.y1)return!1;if(e.y1>e.y2&&t.y>e.y1)return!1}else{if(e.x1<e.x2&&t.x<e.x1)return!1;if(e.x1>e.x2&&t.x>e.x1)return!1}return!0}function Di(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e[0]*t[0]+e[1]*t[1],a=e[0]*t[1]-e[1]*t[0],i=Math.atan2(a,r);return i<0&&(i=2*Math.PI-Math.abs(i)),n?2*Math.PI-i:i}function Ii(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,0],r=[],a=2*Math.PI/e,i=0;i<e;i++)r.push([a*i,a*(i+1)]);var o=[n[0]-t[0],n[1]-t[1]];return function(e,n){var a=[e[0]-t[0],e[1]-t[1]],i=r[n];return qt(Di(a,o,!1),i)}}var Ti=function(e,t,n){return(n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y)>0},_i=function(e,t){var n="x"in e?er(e):e,r="x"in t?er(t):t;return Math.max(0,Math.min(n.maxX,r.maxX)-Math.max(n.minX,r.minX))*Math.max(0,Math.min(n.maxY,r.maxY)-Math.max(n.minY,r.minY))},qi=function(e,t,n){var r=ei(e);return n.map((function(e){var n=hi(e.r+t),a=dn(e),i=[0,0],o=[0,0];w.b.rotate(i,[e.x-r.x,e.y-r.y],[0,0],pi(t)),i[0]+=r.x,i[1]+=r.y,w.b.rotate(o,[a.x-r.x,a.y-r.y],[0,0],pi(t)),o[0]+=r.x,o[1]+=r.y;var c=[0,0];return w.b.rotate(c,[i[0]-o[0],i[1]-o[1]],[0,0],pi(360-t)),c[0]+=o[0],c[1]+=o[1],{x:c[0],y:c[1],r:n}}))},zi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m()(this,e),this.vertices={},this.edges={},this.isDirected=t}return g()(e,[{key:"snap",value:function(e){for(var t={vertex:void 0,distance:1/0},n=this.getAllVertices(),r=0;r<n.length;r++){var a=n[r];if(a.x===e.x&&a.y===e.y)return a;var i=Math.abs(a.x-e.x)+Math.abs(a.y-e.y);i<t.distance&&(t.vertex=a,t.distance=i)}return t.vertex}},{key:"addVertex",value:function(e){return this.vertices[e.getKey()]=e,this}},{key:"getVertexByKey",value:function(e){return this.vertices[e]}},{key:"getNeighbors",value:function(e){return e.getNeighbors()}},{key:"getAllVertices",value:function(){return Object.values(this.vertices)}},{key:"getAllEdges",value:function(){return Object.values(this.edges)}},{key:"addEdge",value:function(e){var t=this.getVertexByKey(e.startVertex.getKey()),n=this.getVertexByKey(e.endVertex.getKey());if(t||(this.addVertex(e.startVertex),t=this.getVertexByKey(e.startVertex.getKey())),n||(this.addVertex(e.endVertex),n=this.getVertexByKey(e.endVertex.getKey())),this.edges[e.getKey()])throw new Error("Edge has already been added before");return this.edges[e.getKey()]=e,this.isDirected?t.addEdge(e):(t.addEdge(e),n.addEdge(e)),this}},{key:"deleteEdge",value:function(e){if(!this.edges[e.getKey()])throw new Error("Edge not found in graph");delete this.edges[e.getKey()];var t=this.getVertexByKey(e.startVertex.getKey()),n=this.getVertexByKey(e.endVertex.getKey());t.deleteEdge(e),n.deleteEdge(e)}},{key:"findEdge",value:function(e,t){return this.getVertexByKey(e.getKey()).findEdge(t)}},{key:"findVertexByKey",value:function(e){return this.vertices[e]?this.vertices[e]:null}},{key:"getWeight",value:function(){return this.getAllEdges().reduce((function(e,t){return e+t.weight}),0)}},{key:"reverse",value:function(){var e=this;return this.getAllEdges().forEach((function(t){e.deleteEdge(t),t.reverse(),e.addEdge(t)})),this}},{key:"getVerticesIndices",value:function(){var e={};return this.getAllVertices().forEach((function(t,n){e[t.getKey()]=n})),e}},{key:"getAdjacencyMatrix",value:function(){var e=this,t=this.getAllVertices(),n=this.getVerticesIndices(),r=Array(t.length).fill(null).map((function(){return Array(t.length).fill(1/0)}));return t.forEach((function(t,a){t.getNeighbors().forEach((function(i){var o=n[i.getKey()];r[a][o]=e.findEdge(t,i).weight}))})),r}},{key:"toString",value:function(){return Object.keys(this.vertices).toString()}}]),e}(),Fi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m()(this,e),this.value=t,this.next=n}return g()(e,[{key:"toString",value:function(e){return e?e(this.value):"".concat(this.value)}}]),e}(),Yi=function(){function e(t){m()(this,e),this.compare=t||e.defaultCompareFunction}return g()(e,[{key:"equal",value:function(e,t){return 0===this.compare(e,t)}},{key:"lessThan",value:function(e,t){return this.compare(e,t)<0}},{key:"greaterThan",value:function(e,t){return this.compare(e,t)>0}},{key:"lessThanOrEqual",value:function(e,t){return this.lessThan(e,t)||this.equal(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return this.greaterThan(e,t)||this.equal(e,t)}},{key:"reverse",value:function(){var e=this.compare;this.compare=function(t,n){return e(n,t)}}}],[{key:"defaultCompareFunction",value:function(e,t){return e===t?0:e<t?-1:1}}]),e}(),Xi=function(){function e(t){m()(this,e),this.head=null,this.tail=null,this.compare=new Yi(t)}return g()(e,[{key:"prepend",value:function(e){return this.head=new Fi(e,this.head),this}},{key:"append",value:function(e){var t=new Fi(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)}},{key:"delete",value:function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare.equal(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare.equal(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare.equal(this.tail.value,e)&&(this.tail=n),t}},{key:"find",value:function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,a=void 0===r?void 0:r;if(!this.head)return null;for(var i=this.head;i;){if(a&&a(i.value))return i;if(void 0!==n&&this.compare.equal(i.value,n))return i;i=i.next}return null}},{key:"deleteTail",value:function(){if(this.head===this.tail){var e=this.tail;return this.head=null,this.tail=null,e}for(var t=this.tail,n=this.head;n.next;)n.next.next?n=n.next:n.next=null;return this.tail=n,t}},{key:"deleteHead",value:function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e}},{key:"toArray",value:function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e}},{key:"toString",value:function(e){return this.toArray().map((function(t){return t.toString(e)})).toString()}}]),e}(),Gi=function(){function e(t){if(m()(this,e),void 0===t)throw new Error("Graph vertex must have a value");this.value=t,this.edges=new Xi((function(e,t){return e.getKey()===t.getKey()?0:e.getKey()<t.getKey()?-1:1}))}return g()(e,[{key:"addEdge",value:function(e){return this.edges.append(e),this}},{key:"deleteEdge",value:function(e){this.edges.delete(e)}},{key:"getNeighbors",value:function(){var e=this;return this.edges.toArray().map((function(t){return t.value.startVertex===e?t.value.endVertex:t.value.startVertex}))}},{key:"getEdges",value:function(){return this.edges.toArray().map((function(e){return e.value}))}},{key:"getDegree",value:function(){return this.edges.toArray().length}},{key:"hasEdge",value:function(e){return!!this.edges.find({callback:function(t){return t===e}})}},{key:"hasNeighbor",value:function(e){return!!this.edges.find({callback:function(t){return t.startVertex===e||t.endVertex===e}})}},{key:"findEdge",value:function(e){var t=this.edges.find({callback:function(t){return t.startVertex===e||t.endVertex===e}});return t?t.value:null}},{key:"getKey",value:function(){return this.value}},{key:"deleteAllEdges",value:function(){var e=this;return this.getEdges().forEach((function(t){return e.deleteEdge(t)})),this}},{key:"toString",value:function(e){return e?e(this.value):"".concat(this.value)}}]),e}(),Hi=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;m()(this,e),this.startVertex=t,this.endVertex=n,this.weight=r}return g()(e,[{key:"getKey",value:function(){var e=this.startVertex.getKey(),t=this.endVertex.getKey();return"".concat(e,"_").concat(t)}},{key:"reverse",value:function(){var e=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=e,this}},{key:"toString",value:function(){return this.getKey()}}]),e}(),Wi=Object.freeze({__proto__:null,Graph:zi,Vertex:Gi,Edge:Hi,LinkedList:Xi});function Vi(e){return e.getNeighbors().filter((function(e){return!0!==e.visited}))}function Ui(e){var t,n={};for(t=0;t<e.length;t++){var r=e[t],a=Ri(r.x1,r.y1,r.x2,r.y2).string;if(n[a])"ray"===r.type&&(n[a].type="straight"),e[t]=null;else{n[a]=r;var i,o=Ei(r.x1,r.y1,r.x2,r.y2);i=r.x1===r.x2?r.x1:r.y1===r.y2?r.y1:r.y1-(r.y2-r.y1)/(r.x2-r.x1)*r.x1,r.k=o,r.b=i,r.intersections=[]}}return(e=e.filter((function(e){return e}))).sort((function(e,t){return e.b-t.b})),e}function Zi(e){var t,n,r=zt(e=Ui(e),"k"),a=[];for(t=0;t<r.length;t++){var i=r[t],o=function(){var e=r[n];i.forEach((function(t){e.forEach((function(e){var n=Oi(t.x1,t.y1,t.x2,t.y2,e.x1,e.y1,e.x2,e.y2);("ray"!==t.type||Ni(t,n))&&("ray"!==e.type||Ni(e,n))&&(t.intersections.push(n),e.intersections.push(n),n.index=a.length,a.push(n))}))}))};for(n=t+1;n<r.length;n++)o()}var c=new zi,l=a.map((function(e,t){var n=new Gi(t);return Object.assign(n,e),n})),s=[];for(t=0;t<e.length;t++){var u=e[t];for(n=0;n<u.intersections.length;n++){var d=u.intersections[n],h=u.intersections[n+1];h&&s.push(new Hi(l[d.index],l[h.index]))}}return l.forEach((function(e){c.addVertex(e)})),s.forEach((function(e){c.addEdge(e)})),c}function Ki(e,t,n,r){t=e.snap(t),n=e.snap(n);var a,i,o=t,c=Vi(o),l=[o];for(o.visited=!0,o.distance=0;c.length>0;){a=-1/0,i=void 0;for(var s=0;s<c.length;s++){var u=c[s];if(u.from=o,!u.visited){u.distance=Bi(o.x,o.y,u.x,u.y)+o.distance;var d=r(u,t,n);d>a&&(i=u,a=d)}}if(i&&(c=Vi(o=i),l.push(o),o.visited=!0,o===n))break}return l}function Qi(e,t){var n,r,a=e.getTotalLength();if(0===a)return{point:{x:0,y:0},percentage:0};var i,o,c,l,s=8,u=0,d=1/0;for(c=0;c<=a;c+=s)(l=t((o=e.getPointAtLength(c)).x,o.y))<d&&(d=l,u=c,i=o);for(s/=2;s>.5;){var h=u-s,f=e.getPointAtLength(h),p=t(f.x,f.y);if(h>=0&&p<d)i=f,u=h,d=p;else{var m=u+s,y=e.getPointAtLength(m),g=t(y.x,y.y);g>=0&&g<d?(i=y,u=m,d=g):s/=2}}return{point:{x:(null===(n=i)||void 0===n?void 0:n.x)||0,y:(null===(r=i)||void 0===r?void 0:r.y)||0},percentage:u/a}}var Ji=Object.freeze({__proto__:null,deepTreeTraversal:St,deepTreeTraversalWithoutSelf:Rt,breadthTreeTraversal:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=[];for(r.unshift(e);0!==r.length;){var a=r.shift();if(a){t(a);var i=n(a);if(i)for(var o=0;o<i.length;o++)r.push(i[o])}}},normolizeR:hi,toDegree:fi,toRadian:pi,pointRotateByPoint:function(e,t,n){e=ei(e),t=ei(t);var r=[e.x-t.x,e.y-t.y],a=[0,0];return w.b.rotate(a,r,[0,0],pi(n)),{x:a[0]+t.x,y:a[1]+t.y}},computeWidthByHW:function(e,t){var n=pi(hi(e.r));return(t-e.h*Math.abs(Math.cos(Math.PI/2-n)))/Math.abs(Math.cos(n))},roughlyEqual:mi,roughlyArrayEqual:yi,roughlyDeepEqual:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;if(Array.isArray(t)&&Array.isArray(n))return t.length===n.length&&t.every((function(t,a){return e(t,n[a],r)}));if(E()(t)&&E()(n)){for(var a=0,i=Object.keys(t);a<i.length;a++){var o=i[a];if(!e(t[o],n[o],r))return!1}return!0}return mi(t,n,r)},rectContainRect:gi,rectIntersectRect:vi,lineSlope:bi,lineDistance:xi,computeXYOffset:ki,findThridPoint:wi,lineRadian:Ci,lineIntercept:Ei,lineIntersection:Oi,manhattanDistance:Pi,isBetween:Mi,isEqlPoint:ji,lineSegmentIntersect:Si,getLineEquation:Ri,lineSegmentIntersectRect:Li,pointInLine:Ai,pointToPointDistance:Bi,isInRay:Ni,clockwiseAngle:Di,radialQuadrantSegmentationGenerator:Ii,normalize2D:function(e){var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[1/t*e[0],1/t*e[1]]},getOffset:function(e,t){return Math.max(Math.max(Math.abs(Math.abs(e[0])-Math.abs(t[0])),Math.abs(Math.abs(e[1])-Math.abs(t[1])))/3,4)},isPointLiesLineRight:Ti,isPointInRect:function(e,t){var n=new mn(t),r=n.tl,a=n.tr,i=n.bl,o=n.br;return Ti(e,r,a)&&Ti(e,a,o)&&Ti(e,o,i)&&Ti(e,i,r)},intersectingAreaOfTwoRects:_i,rotateByPoint:qi,calculateLine:Ui,linesToGraph:Zi,snapPoint:function(e,t){for(var n={vertex:void 0,distance:1/0},r=e.getAllVertices(),a=0;a<r.length;a++){var i=r[a];if(i.x===t.x&&i.y===t.y)return i;var o=Pi(i.x,i.y,t.x,t.y);o<n.distance&&(n.vertex=i,n.distance=o)}return n.vertex},pathFinding:Ki,binaryFindPoint:Qi}),$i='<div style="text-align:center;">&nbsp;</div>',eo=["text","mindmap","geometry","stack","image","swimlane"],to=function(e){return!!e.type&&eo.includes(e.type)},no=function(e){return!!e.type&&"line"===e.type};function ro(e,t,n){if(e.type){if(to(e))return{x:("number"==typeof e.x?e.x:0)+t,y:("number"==typeof e.y?e.y:0)+n};if(no(e)){var r={};return e.target&&!e.target.id&&e.target.connection&&(r.target=d()(e.target),Array.isArray(r.target.connection)&&(r.target.connection[0]+=t,r.target.connection[1]+=n)),e.source&&!e.source.id&&e.source.connection&&(r.source=d()(e.source),Array.isArray(r.source.connection)&&(r.source.connection[0]+=t,r.source.connection[1]+=n)),r}}return{}}function ao(e,t,n){return!!e.type&&(to(e)?("number"==typeof e.x?e.x=e.x+t:e.x=t,"number"==typeof e.y?e.y=e.y+n:e.y=n):no(e)&&(e.target&&!e.target.id&&Array.isArray(e.target.connection)&&(e.target.connection[0]+=t,e.target.connection[1]+=n),e.source&&!e.source.id&&Array.isArray(e.source.connection)&&(e.source.connection[0]+=t,e.source.connection[1]+=n),e.controlPoints&&e.controlPoints.forEach((function(e){"number"==typeof e[0]&&(e[0]+=t),"number"==typeof e[1]&&(e[1]+=n)}))),!0)}function io(e,t,n){return e.map((function(e){return ro(e,t,n)}))}function oo(e,t,n){e.forEach((function(e){St(e,(function(e){return ao(e,t,n)}))}))}var co=[{name:"rect",category:"basic",width:100,height:100,outline:{name:"polygon",points:[{x:0,y:0},{x:100,y:0},{x:100,y:100},{x:0,y:100}]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,23.6],["C",24,23.8209139,23.8209139,24,23.6,24],["L",8.4,24],["C",8.1790861,24,8,23.8209139,8,23.6],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"rounded-rect",category:"basic",width:100,height:100,round:10,outline:{path:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=0,i=0,o=e/2,c=t/2,l=Math.min(e,t);r>=l/2&&(r=l/2);var s=o<r?o:r,u=c<r?c:r;return[["M",+a+ +s,i],["l",e-2*s,0],["a",s,u,0,0,1,s,u],["l",0,t-2*u],["a",s,u,0,0,1,-s,u],["l",2*s-e,0],["a",s,u,0,0,1,-s,-u],["l",0,2*u-t],["a",s,u,0,0,1,s,-u],["z"]]}},scene:[],thumb:[{d:[["M",11,8],["L",21,8],["C",22.6568542,8,24,9.3431458,24,11],["L",24,21],["C",24,22.6568542,22.6568542,24,21,24],["L",11,24],["C",9.3431458,24,8,22.6568542,8,21],["L",8,11],["C",8,9.3431458,9.3431458,8,11,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"triangle",category:"basic",width:100,height:87,outline:{name:"polygon",points:[{x:50,y:0},{x:100,y:87},{x:-141931921e-23,y:87}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:8},{x:25,y:24},{x:7,y:24}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],antiAnchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:1},{x:1,y:1}]},{name:"cross",category:"basic",width:80,height:80,outline:{d:[["M",56,0],["C",57.1045695,-0,58,.8954305,58,2],["L",58,22],["L",78,22],["C",79.1045695,22,80,22.8954305,80,24],["L",80,56],["C",80,57.1045695,79.1045695,58,78,58],["L",58,58],["L",58,78],["C",58,79.1045695,57.1045695,80,56,80],["L",24,80],["C",22.8954305,80,22,79.1045695,22,78],["L",22,57.999],["L",2,58],["C",.8954305,58,0,57.1045695,0,56],["L",0,24],["C",0,22.8954305,.8954305,22,2,22],["L",22,21.999],["L",22,2],["C",22,.8954305,22.8954305,0,24,0],["L",56,0],["Z"]]},scene:[],thumb:[{d:[["M",18.8909091,7],["C",19.5536508,7,20.0909091,7.5372583,20.0909091,8.2],["L",20.09,11.909],["L",23.8,11.9090909],["C",24.4627417,11.9090909,25,12.4463492,25,13.1090909],["L",25,18.8909091],["C",25,19.5536508,24.4627417,20.0909091,23.8,20.0909091],["L",20.09,20.09],["L",20.0909091,23.8],["C",20.0909091,24.4627417,19.5536508,25,18.8909091,25],["L",13.1090909,25],["C",12.4463492,25,11.9090909,24.4627417,11.9090909,23.8],["L",11.909,20.09],["L",8.2,20.0909091],["C",7.5372583,20.0909091,7,19.5536508,7,18.8909091],["L",7,13.1090909],["C",7,12.4463492,7.5372583,11.9090909,8.2,11.9090909],["L",11.909,11.909],["L",11.9090909,8.2],["C",11.9090909,7.5372583,12.4463492,7,13.1090909,7],["L",18.8909091,7],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"cloud",category:"basic",width:112,height:80,outline:{d:[["M",20.6665465,28.3657378],["C",9.0184823,12.0418488,29.8104362,1.5251218,41.8853768,16.5362653],["C",41.1592489,-4.3380418,87.3193529,-8.1490155,88.6486324,20.930009],["C",103.875914,12.7155897,116.726702,29.8609474,101.339386,39.434501],["C",122.97831,47.5058532,108.447103,73.4138921,86.4692273,64.7475232],["C",86.3334719,64.958338,86.1921896,65.1661294,86.0455508,65.3708699],["C",81.9792975,83.9250756,49.2991196,84.5216854,42.2982472,68.9125048],["C",27.3426857,79.041314,7.4780067,68.88778,15.843504,56.1252668],["C",-8.1440256,55.1167183,-3.5710215,23.0030303,20.6665465,28.3657378],["Z"]]},scene:[],thumb:[{d:[["M",9.0595002,13.6731476],["C",6.7714876,10.4083698,10.8556214,8.3050244,13.2274847,11.3072531],["C",13.0848525,7.1323916,22.1520157,6.3701969,22.4131242,12.1860018],["C",25.4041974,10.5431179,27.9284594,13.9721895,24.9059508,15.8869002],["C",29.1564537,17.5011706,26.3021096,22.6827784,21.9850268,20.9495046],["C",21.9583605,20.9916676,21.9306087,21.0332259,21.9018046,21.074174],["C",21.1030763,24.7850151,14.6837556,24.9043371,13.3085843,21.782501],["C",10.3708847,23.8082628,6.4688942,21.777556,8.1121169,19.2250534],["C",3.4002807,19.0233437,4.2985494,12.6006061,9.0595002,13.6731476],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"pentagon-arrow",category:"basic",width:120,height:50,textarea:{region:function(e,t){var n=t/50*25;return n>=e?{minX:4,minY:4,maxX:e-4,maxY:t-4}:{minX:4,minY:4,maxX:e-n/2-4,maxY:t-4}}},outline:{path:function(e,t){var n=t/50*25;return n>=e?[["M",0,0],["L",e,t/2],["L",0,t],["Z"]]:[["M",0,0],["L",e-n,0],["L",e,t/2],["L",e-n,t],["L",0,t],["Z"]]}},scene:[],thumb:[{d:[["M",7.4,10],["L",18.8343146,10],["C",18.9404012,10,19.0421427,10.0421427,19.1171573,10.1171573],["L",25,16],["L",25,16],["L",19.1171573,21.8828427],["C",19.0421427,21.9578573,18.9404012,22,18.8343146,22],["L",7.4,22],["C",7.1790861,22,7,21.8209139,7,21.6],["L",7,10.4],["C",7,10.1790861,7.1790861,10,7.4,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"process-arrow",category:"basic",width:120,height:50,textarea:{region:function(e,t){var n=t/50*25;return n>=e?{minX:4,minY:4,maxX:e-4,maxY:t-4}:{minX:n+4,minY:4,maxX:e-n/2-4,maxY:t-4}}},outline:{path:function(e,t){var n=t/50;return 25*n>=e?[["M",0,0],["L",e,t/2],["L",0,t]]:[["M",0,0],["L",e-25*n,0],["L",e,t/2],["L",e-25*n,t],["L",0,t],["L",25*n,t/2],["L",0,0],["Z"]]}},scene:[],thumb:[{d:[["M",19.9439083,10],["C",20.0481092,10,20.1480423,10.0421427,20.2217235,10.1171573],["L",26,16],["L",20.2217235,21.8828427],["C",20.1480423,21.9578573,20.0481092,22,19.9439083,22],["L",6.3928901,22],["C",6.1759029,22,6,21.8209139,6,21.6],["C",6,21.4939134,6.0413937,21.3921718,6.1150748,21.3171573],["L",11.3377208,16],["L",6.1150748,10.6828427],["C",5.9616417,10.526633,5.9616417,10.273367,6.1150748,10.1171573],["C",6.188756,10.0421427,6.2886892,10,6.3928901,10],["L",19.9439083,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-1",category:"basic",width:100,height:80,textarea:{region:function(e,t){var n=t/80*50;return n>=e?{minX:4,minY:4,maxX:e-4,maxY:t-4}:{minX:n/2,minY:.25*t+4,maxX:e-4,maxY:.75*t-4}}},outline:{path:function(e,t){var n=t/80*50;return n>=e?[["M",e,0],["L",0,t/2],["L",e,t],["Z"]]:[["M",n,t/4],["L",n,0],["L",0,t/2],["L",n,t],["L",n,3*t/4],["L",e,3*t/4],["L",e,t/4],["Z"]]}},scene:[],thumb:[{name:"polygon",points:[{x:16.2620321,y:7.99867328},{x:7,y:15.9997347},{x:16.2620321,y:23.9986733},{x:16.2620321,y:19.9277347},{x:25.7357163,y:19.9277347},{x:25.7357163,y:12.1917347},{x:16.2620321,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-2",category:"basic",width:100,height:80,textarea:{region:function(e,t){var n=t/80*50;return n>=e?{minX:4,minY:4,maxX:e-4,maxY:t-4}:{minX:4,minY:.25*t+4,maxX:e-n/2,maxY:.75*t-4}}},outline:{path:function(e,t){var n=t/80;return 50*n>=e?[["M",0,0],["L",e,t/2],["L",0,t],["Z"]]:[["M",e-50*n,t/4],["L",e-50*n,0],["L",e,t/2],["L",e-50*n,t],["L",e-50*n,3*t/4],["L",0,3*t/4],["L",0,t/4],["Z"]]}},scene:[],thumb:[{name:"polygon",points:[{x:16.4736842,y:7.99867328},{x:25.7357163,y:15.9997347},{x:16.4736842,y:23.9986733},{x:16.4736842,y:19.9277347},{x:7,y:19.9277347},{x:7,y:12.1917347},{x:16.4736842,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-3",category:"basic",width:138,height:80,textarea:{region:function(e,t){var n=t/80*46;return 2*n>=e?{minX:4,minY:4,maxX:e-4,maxY:t-4}:{minX:n/2,minY:.3125*t+4,maxX:e-4-n/2,maxY:.6875*t-4}}},outline:{path:function(e,t){var n=.3125,r=.6875,a=t/80*46;return 2*a>=e?[["M",e/2,0],["L",0,t/2],["L",e/2,t],["L",e,t/2],["Z"],["M",e/2,0],["L",e/2,t*n],["M",e/2,t],["L",e/2,t*r]]:[["M",e-a,n*t],["L",e-a,0],["L",e,t/2],["L",e-a,t],["L",e-a,t*r],["L",a,t*r],["L",a,t],["L",0,t/2],["L",a,0],["L",a,t*n],["Z"]]}},scene:[],thumb:[{name:"polygon",points:[{x:19.8639344,y:8},{x:27.109397,y:16},{x:19.8639344,y:24},{x:19.8639344,y:19.1800649},{x:12.5968509,y:19.1800649},{x:12.5968509,y:24},{x:5.10939702,y:16.0010614},{x:12.5968509,y:8},{x:12.5968509,y:12.9324943},{x:19.8639344,y:12.9324943}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"circle",category:"basic",width:100,height:100,outline:{name:"ellipse",cx:50,cy:50,rx:50,ry:50},scene:[],thumb:[{name:"ellipse",cx:16,cy:16.5333333,rx:9,ry:9}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"comment-2",category:"basic",width:120,height:100,controlPoints:[[.25,.75],[.25,1],[.5,.75]],controlPointsConfig:[{x:{proportional:["2"]},y:{proportional:["2"]}},{x:{},y:{limit:!0}},{x:{limit:["0",1]},y:{limit:!0}}],textarea:{region:function(e,t,n){return{minX:4,minY:4,maxX:e-4,maxY:Dt(n[0][1],0,1)*t-4}}},outline:{path:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[[.25,.75],[.25,1],[.5,.75]],r=n.map((function(n){return[Dt(n[0],0,1)*e,Dt(n[1],0,1)*t]})),a=Math.min(e/2,t/2,8,r[0][1]/2,r[0][0]/2,(e-r[2][0])/2);return[["M",a,0],["l",e-2*a,0],["a",a,a,0,0,1,a,a],["l",0,r[0][1]-2*a],["a",a,a,0,0,1,-a,a],["L",r[2][0],r[2][1]],["L",r[1][0],r[1][1]],["L",r[0][0],r[0][1]],["l",a-r[0][0],0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-r[0][1]],["a",a,a,0,0,1,a,-a],["Z"]]}},scene:[],thumb:[{d:[["M",10,9],["L",22,9],["C",23.6568542,9,25,10.3431458,25,12],["L",25,18.700459],["C",25,20.3573132,23.6568542,21.700459,22,21.700459],["L",15.4989962,21.700459],["L",15.4989962,21.700459],["L",10.5156524,25.2421473],["L",10.5156524,21.7],["L",10,21.7],["C",8.3431458,21.7,7,20.3568542,7,18.7],["L",7,12],["C",7,10.3431458,8.3431458,9,10,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"comment",category:"basic",width:120,height:100,controlPoints:[[.4,.75],[.5,1],[.6,.75]],controlPointsConfig:[{x:{proportional:["2"]},y:{proportional:["2"]}},{x:{},y:{limit:!0}},{x:{limit:["0",1]},y:{limit:!0}}],outline:{path:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[[.4,.75],[.5,1],[.6,.75]],r=n.map((function(n){return[Dt(n[0],0,1)*e,Dt(n[1],0,1)*t]}));return[["M",0,0],["L",0,r[0][1]],["L",r[0][0],r[0][1]],["L",r[1][0],r[1][1]],["L",r[2][0],r[2][1]],["L",e,r[2][1]],["L",e,0],["Z"]]}},scene:[],thumb:[{d:[["M",7,22],["C",6.4477153,22,6,21.5522847,6,21],["L",6,10],["C",6,9.4477153,6.4477153,9,7,9],["L",25,9],["C",25.5522847,9,26,9.4477153,26,10],["L",26,21],["C",26,21.5522847,25.5522847,22,25,22],["L",18,22],["L",16,25],["L",14,22],["L",7,22],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],textarea:{region:function(e,t,n){return{minX:4,minY:4,maxX:e-4,maxY:Dt(n[0][1],0,1)*t-4}}}},{name:"diamond",category:"basic",width:100,height:100,outline:{d:[["M",50.5029462,.2083271],["L",99.7916729,49.4970538],["C",100.069442,49.7748233,100.069442,50.2251767,99.7916729,50.5029462],["L",50.5029462,99.7916729],["C",50.2251767,100.069442,49.7748233,100.069442,49.4970538,99.7916729],["L",.2083271,50.5029462],["C",-.0694424,50.2251767,-.0694424,49.7748233,.2083271,49.4970538],["L",49.4970538,.2083271],["C",49.7748233,-.0694424,50.2251767,-.0694424,50.5029462,.2083271],["Z"]]},scene:[],thumb:[{d:[["M",16.2852309,7.0928427],["L",24.9119336,15.7195454],["C",25.0681433,15.8757552,25.0681433,16.1290212,24.9119336,16.2852309],["L",16.2852309,24.9119336],["C",16.1290212,25.0681433,15.8757552,25.0681433,15.7195454,24.9119336],["L",7.0928427,16.2852309],["C",6.936633,16.1290212,6.936633,15.8757552,7.0928427,15.7195454],["L",15.7195454,7.0928427],["C",15.8757552,6.936633,16.1290212,6.936633,16.2852309,7.0928427],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"parallelogram",category:"basic",width:160,height:80,controlPoints:[[.1875,.25]],controlPointsConfig:[{x:{limit:[0,.75]},y:{limit:!0}}],outline:{path:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[[.1875,.25]],r=n.map((function(n){return[Dt(n[0],0,1)*e,Dt(n[1],0,1)*t]}));return[["M",4*r[0][0]/3,0],["L",0,t],["L",e-4*r[0][0]/3,t],["L",e,0],["Z"]]}},scene:[],thumb:[{d:[["M",11.2637585,9],["L",26.3933844,9],["C",26.6142983,9,26.7933844,9.1790861,26.7933844,9.4],["C",26.7933844,9.4541707,26.7823813,9.507777,26.7610424,9.5575677],["L",21.1038995,22.7575677],["C",21.040868,22.9046413,20.8962528,23,20.7362415,23],["L",5.6066156,23],["C",5.3857017,23,5.2066156,22.8209139,5.2066156,22.6],["C",5.2066156,22.5458293,5.2176187,22.492223,5.2389576,22.4424323],["L",10.8961005,9.2424323],["C",10.959132,9.0953587,11.1037472,9,11.2637585,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"star",category:"basic",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:75},{x:18.6107374,y:91},{x:24.2235871,y:57.7254249},{x:0,y:34.5491503},{x:33.3053687,y:29.7745751},{x:48,y:0},{x:62.6946313,y:29.7745751},{x:96,y:34.5491503},{x:71.7764129,y:57.7254249},{x:77.3892626,y:91}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:21},{x:10.1221475,y:24.0901699},{x:11.2447174,y:17.545085},{x:6.48943484,y:12.9098301},{x:13.0610737,y:11.954915},{x:16,y:6},{x:18.9389263,y:11.954915},{x:25.5105652,y:12.9098301},{x:20.7552826,y:17.545085},{x:21.8778525,y:24.0901699}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],antiAnchors:[{x:.5,y:0},{x:0,y:.38},{x:1,y:.38},{x:18.6107374/96,y:1},{x:77.3892626/96,y:1}]},{name:"trapezoid",category:"basic",width:140,height:80,controlPoints:[[.75,0]],controlPointsConfig:[{x:{limit:[.5,1]},y:{limit:!0}}],outline:{path:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[[.75,0]],r=n.map((function(n){return[Dt(n[0],0,1)*e,Dt(n[1],0,1)*t]}));return[["M",e-r[0][0],0],["L",r[0][0],0],["L",e,t],["L",0,t],["Z"]]}},scene:[],thumb:[{d:[["M",6.4000995,22],["L",25.3553854,22],["C",25.5762993,22,25.7553854,21.8209139,25.7553854,21.6],["C",25.7553854,21.5646094,25.7506887,21.5293754,25.7414182,21.4952206],["L",22.7014434,10.2952206],["C",22.6541459,10.120965,22.4959711,10,22.3154107,10],["L",9.4095965,10],["C",9.228659,10,9.0702525,10.1214609,9.0232992,10.2962],["L",6.0138022,21.4962],["C",5.956475,21.709546,6.0829534,21.9289701,6.2962994,21.9862972],["C",6.3301496,21.995393,6.3650485,22,6.4000995,22],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],lo=[{name:"collate",category:"flowchart",width:42,height:36,textarea:{region:ui},outline:{d:[["M",40.3837262,0],["C",40.6808145,0,40.9625216,.132096,41.1525116,.3604931],["C",41.478533,.7524209,41.4542938,1.3198118,41.1146853,1.6825771],["L",41.0232331,1.7687854],["L",20.9996243,18.0064637],["L",41.0232331,34.2312146],["C",41.2190021,34.3940632,41.3440192,34.6242958,41.3757431,34.8738407],["L",41.3837518,35],["C",41.3837518,35.5128358,40.997686,35.9355072,40.5003473,35.9932723],["L",40.3837262,36],["L",1.9253140000000002,36],["C",1.6282257999999992,36,1.3465187000000007,35.867904,1.1565287000000009,35.6395069],["C",.8305071999999996,35.2475791,.8547464999999992,34.6801882,1.1943549999999998,34.317423],["L",1.2858070999999995,34.2312146],["L",20.9996243,18.0064637],["L",1.2858070999999995,1.7687854],["C",1.0900382000000004,1.6059368,.9650210999999995,1.3757042,.9332972000000002,1.1261593],["L",.9252885000000006,1],["C",.9252885000000006,.4871642,1.3113542000000002,.0644928,1.8086929000000005,.0067277],["L",1.9253140000000002,0],["L",40.3837262,0],["Z"]]},scene:[],thumb:[{d:[["M",23.6671476,9],["C",23.787916,9,23.9022194,9.0545637,23.9781629,9.1484658],["C",24.1170814,9.3202349,24.0904508,9.5720969,23.9186817,9.7110154],["L",23.9186817,9.7110154],["L",16.142839,16],["L",23.9186817,22.2889846],["C",23.9938034,22.3497394,24.0437485,22.4350446,24.0607217,22.5285699],["L",24.0671476,22.6],["C",24.0671476,22.8209139,23.8880615,23,23.6671476,23],["L",23.6671476,23],["L",8.3328524,23],["C",8.212084,23,8.0977806,22.9454363,8.0218371,22.8515342],["C",7.8829186,22.6797651,7.9095492,22.4279031,8.0813183,22.2889846],["L",8.0813183,22.2889846],["L",15.856839,16],["L",8.0813183,9.7110154],["C",8.0061966,9.6502606,7.9562515,9.5649554,7.9392783,9.4714301],["L",7.9328524,9.4],["C",7.9328524,9.1790861,8.1119385,9,8.3328524,9],["L",8.3328524,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.02,name:"NW"},{x:0,y:.98,name:"SW"},{x:1,y:.02,name:"NE"},{x:1,y:.98,name:"SE"}],antiAnchors:[{x:.5,y:0},{x:.5,y:1}]},{name:"connector",category:"flowchart",width:44,height:44,textarea:{region:ui},outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[],thumb:[{name:"ellipse",cx:16,cy:16,rx:9,ry:9}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"data",category:"flowchart",width:124,height:60,textarea:{region:function(e,t){return{minX:.15*e,minY:4,maxX:e-.15*e-4,maxY:t-4}}},outline:{d:[["M",17.1403103,0],["L",122.687657,0],["C",123.239942,-0,123.687657,.4477153,123.687657,1],["C",123.687657,1.0896438,123.675604,1.1788806,123.65182,1.2653118],["L",107.823852,58.7853118],["C",107.704434,59.2192873,107.309796,59.52,106.85969,59.52],["L",1.3123427,59.52],["C",.7600579,59.52,.3123427,59.0722847,.3123427,58.52],["C",.3123427,58.4303562,.3243965,58.3411194,.34818,58.2546882],["L",16.1761477,.7346882],["C",16.2955661,.3007127,16.6902043,-0,17.1403103,0],["Z"]]},scene:[],thumb:[{d:[["M",7.6068779,10],["L",27.4750629,10],["C",27.6959768,10,27.8750629,10.1790861,27.8750629,10.4],["C",27.8750629,10.4358575,27.8702414,10.4715522,27.860728,10.5061247],["L",24.7787871,21.7061247],["C",24.7310198,21.8797149,24.5731645,22,24.3931221,22],["L",4.5249371,22],["C",4.3040232,22,4.1249371,21.8209139,4.1249371,21.6],["C",4.1249371,21.5641425,4.1297586,21.5284478,4.139272,21.4938753],["L",7.2212129,10.2938753],["C",7.2689802,10.1202851,7.4268355,10,7.6068779,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.095,y:.5,name:"W"},{x:.905,y:.5,name:"E"},{x:.23,y:.02,name:"NW"},{x:.015,y:.98,name:"SW"},{x:.985,y:.02,name:"NE"},{x:.77,y:.98,name:"SE"}]},{name:"database",category:"flowchart",width:70,height:80,textarea:{region:function(e,t){return{minX:4,minY:4+.2*t,maxX:e-4,maxY:t-4}}},outline:{d:[["M",35,0],["C",53.9753466,0,69.4238162,5.273994,69.9842524,11.8539517],["L",69.995311,11.8537712],["L",69.995311,12.022052],["L",70,12.2242015],["C",70,12.2917139,69.998433,12.3590985,69.995311,12.426351],["L",69.995311,67.977948],["C",69.6862333,74.6359505,54.1366666,80,35,80],["C",16.0547001,80,.6251167,74.7426951,.0185218,68.1772958],["L",.004689,67.977948],["L",0,11.8537712],["L",.0157476,11.8539517],["C",.5761838,5.273994,16.0246534,0,35,0],["Z"]]},scene:[{d:[["M",70,13],["C",70,19.0751322,54.3299662,24,35,24],["C",15.8633334,24,.3137667,19.1731371,.004689,13.1819051],["L",0,13]],attr:{fill:"transparent"}}],thumb:[{d:[["M",16,7],["C",20.337222099999998,7,23.8683009,8.1866487,23.9964006,9.6671391],["L",23.9989282,9.6670985],["L",23.9989282,9.7049617],["L",24,9.750445299999999],["C",24,9.7656356,23.9996418,9.7807972,23.9989282,9.795929000000001],["L",23.9989282,22.2950383],["C",23.9282819,23.7930889,20.3740952,25,16,25],["C",11.6696457,25,8.1428838,23.8171064,8.0042336,22.3398916],["L",8.0010718,22.2950383],["L",8,9.6670985],["L",8.0035994,9.6671391],["C",8.1316991,8.1866487,11.6627779,7,16,7],["Z"]]},{d:[["M",24,10],["C",24,11.1045695,20.418278,12,16,12],["C",11.6259048,12,8.0717181,11.1223886,8.0010718,10.0330737],["L",8,10]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:.15,name:"NW"},{x:0,y:.85,name:"SW"},{x:1,y:.15,name:"NE"},{x:1,y:.85,name:"SE"}]},{name:"decision",category:"flowchart",width:140,height:70,textarea:{region:function(e,t){return{minX:24,minY:1/8*t,maxX:e-24,maxY:7/8*t}}},outline:{name:"polygon",points:[{x:70,y:0},{x:140,y:35},{x:70,y:70},{x:0,y:35}]},scene:[],thumb:[{d:[["M",5.5303015,15.6625354],["L",15.7852498,9.1366592],["C",15.9162764,9.0532787,16.0837236,9.0532787,16.2147502,9.1366592],["L",26.4696985,15.6625354],["C",26.656075,15.7811387,26.7110162,16.0283736,26.5924129,16.2147502],["C",26.5609814,16.2641425,26.5190908,16.3060331,26.4696985,16.3374646],["L",16.2147502,22.8633408],["C",16.0837236,22.9467213,15.9162764,22.9467213,15.7852498,22.8633408],["L",5.5303015,16.3374646],["C",5.343925,16.2188613,5.2889839,15.9716264,5.4075871,15.7852498],["C",5.4390186,15.7358575,5.4809092,15.6939669,5.5303015,15.6625354],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"delay",category:"flowchart",width:120,height:60,textarea:{region:function(e,t){return{minX:4,minY:4,maxX:.81*e,maxY:t-4}}},outline:{d:[["M",1,0],["L",90,0],["C",106.568542,-0,120,13.4314575,120,30],["C",120,46.5685425,106.568542,60,90,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6.4,11.0666667],["L",20,11.0666667],["C",23.3137085,11.0666667,26,13.7529582,26,17.0666667],["C",26,20.3803752,23.3137085,23.0666667,20,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,11.4666667],["C",6,11.2457528,6.1790861,11.0666667,6.4,11.0666667],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.81,y:0,name:"NE"},{x:.81,y:1,name:"SE"}]},{name:"display",category:"flowchart",width:120,height:60,textarea:{region:function(e,t){return{minX:.15*e+4,minY:4,maxX:.9*e,maxY:t-4}}},outline:{d:[["M",18.559242,0],["L",108.388294,0],["C",108.593661,-124e-7,108.794047,.0632157,108.962224,.18108],["C",116.320741,5.3381999,120,15.2778399,120,30],["C",120,43.9124351,116.326183,53.8383306,108.978548,59.7776865],["C",108.800609,59.9215337,108.578719,60,108.349908,60],["L",18.559242,60],["C",18.2079174,60,17.8823628,59.8156369,17.70166,59.5143473],["L",.3084873,30.5143473],["C",.1185966,30.1977386,.1185966,29.8022614,.3084873,29.4856527],["L",17.70166,.4856527],["C",17.8823628,.1843631,18.2079174,0,18.559242,0],["Z"]]},scene:[],thumb:[{d:[["M",8.7974767,10],["L",24.1863956,10],["L",24.1863956,10],["C",25.6811795,11.0207233,26.4285714,13.0207233,26.4285714,16],["C",26.4285714,18.8174994,25.6811795,20.8174994,24.1863956,22],["L",8.7974767,22],["C",8.6564465,22,8.525838,21.9257329,8.4537242,21.8045343],["L",5.1216988,16.2045343],["C",5.0467021,16.0784903,5.0467021,15.9215097,5.1216988,15.7954657],["L",8.4537242,10.1954657],["C",8.525838,10.0742671,8.6564465,10,8.7974767,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.2,y:.14,name:"NW"},{x:.2,y:.86,name:"SW"},{x:.92,y:.14,name:"NE"},{x:.92,y:.86,name:"SE"}]},{name:"document",category:"flowchart",width:120,height:72,outline:{d:[["M",1,0],["L",119,0],["C",119.552285,-0,120,.4477153,120,1],["L",120,63.2943312],["C",119.999975,63.8466024,119.552271,64.2943066,119,64.2943066],["C",118.874051,64.2943066,118.749236,64.2705132,118.63212,64.2241781],["C",108.562735,60.240377,99.0186463,58.2432881,89.9998549,58.2329113],["C",75.8605271,58.216643,73.9215376,58.9595768,59.9999032,65.0379103],["C",46.0782688,71.1162438,44.1653018,71.9832913,29.9999516,72],["C",20.7325008,72.010162,10.9291929,69.6914094,.590028,65.0437423],["C",.2309588,64.882365,-0,64.5253236,0,64.1316572],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6,10],["L",26,10],["L",26,23.0414063],["C",24.237687,22.2996937,22.5710122,21.9279131,20.9999758,21.9260644],["C",18.6434212,21.9232914,18.3202563,22.0499279,15.9999839,23.0860074],["C",13.6797115,24.122087,13.3608836,24.2698792,11,24.2726331],["C",9.4260668,24.274461,7.7594002,23.864052,6,23.0414063],["L",6,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.9,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:0,y:.9,name:"SW"},{x:.98,y:.015,name:"NE"},{x:1,y:.9,name:"SE"}]},{name:"internal-storage",category:"flowchart",width:80,height:80,textarea:{region:function(e,t){return{minX:.1*e+4,minY:1/8*t+4,maxX:e-4,maxY:t-4}}},outline:{name:"rect",x:0,y:0,width:80,height:80,rx:0,ry:0},scene:[{d:[{name:"M",x:0,y:8},{name:"L",x:80,y:8}]},{d:[{name:"M",x:8,y:0},{name:"L",x:8,y:80}]}],thumb:[{name:"rect",x:8,y:8,width:17,height:17,rx:.4,ry:.4},{d:[{name:"M",x:8.5,y:12.5},{name:"L",x:24.5,y:12.5}]},{d:[{name:"M",x:12.5,y:8.5},{name:"L",x:12.5,y:24.5}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"loop-limit",category:"flowchart",width:120,height:60,outline:{d:[["M",17.5871195,0],["L",102.429999,0],["C",102.7204,-0,102.996458,.1262398,103.186409,.3459021],["L",119.75641,19.5077312],["C",119.913532,19.6894304,120,19.9216166,120,20.1618291],["L",120,59],["C",120,59.5522847,119.552285,60,119,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,20.1621158],["C",0,19.92173,.0865921,19.6893882,.2439196,19.5076371],["L",16.831039,.3455213],["C",17.0209853,.1260876,17.2968941,0,17.5871195,0],["Z"]]},scene:[],thumb:[{d:[["M",9.5170283,11.0666667],["L",22.4862374,11.0666667],["C",22.6043417,11.0666667,22.7164089,11.1188597,22.7924108,11.2092607],["L",25.9061734,14.9129485],["C",25.9667743,14.9850307,26,15.0761829,26,15.1703545],["L",26,22.6666667],["C",26,22.8875806,25.8209139,23.0666667,25.6,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,15.1704681],["C",6,15.0762275,6.0332743,14.9850132,6.0939556,14.9129087],["L",9.210984,11.2091073],["C",9.286986,11.118798,9.3989942,11.0666667,9.5170283,11.0666667],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.1,y:.15,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.9,y:.15,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-input",category:"flowchart",width:118,height:60,textarea:{region:function(e,t){return{minX:4,minY:t*(2/7)+4,maxX:e-4,maxY:t-4}}},outline:{d:[["M",.8676336,15.6420323],["L",116.867634,.1512179],["C",117.415059,.0781139,117.918097,.4626272,117.991201,1.0100523],["C",117.99706,1.0539311,118,1.0981505,118,1.1424188],["L",118,59],["C",118,59.5522847,117.552285,60,117,60],["L",1,60],["C",.4477152,60,0,59.5522847,0,59],["L",0,16.6332332],["C",0,16.1321084,.3709182,15.7083644,.8676336,15.6420323],["Z"]]},scene:[],thumb:[{d:[["M",6.3471791,12.618128],["L",25.5471791,10.0603243],["C",25.7661584,10.0311521,25.9673249,10.1850212,25.9964971,10.4040005],["C",25.9988298,10.4215108,26,10.4391564,26,10.4568214],["L",26,21.2666667],["C",26,21.4875806,25.8209139,21.6666667,25.6,21.6666667],["L",6.4,21.6666667],["C",6.1790861,21.6666667,6,21.4875806,6,21.2666667],["L",6,13.0146251],["C",6,12.8141269,6.1484367,12.6446042,6.3471791,12.618128],["Z"]]}],anchors:[{x:.5,y:.195,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-loop",category:"flowchart",width:120,height:60,textarea:{region:function(e,t){var n=.14*e;return{minX:n,minY:4,maxX:e-n,maxY:t-4}}},outline:{d:[["M",1.3143594,0],["L",118.682087,0],["C",119.234371,-0,119.682087,.4477153,119.682087,1],["C",119.682087,1.0910107,119.669662,1.1815953,119.645158,1.2692451],["L",103.43015,59.2692451],["C",103.309369,59.7012703,102.915669,60,102.467078,60],["L",17.3668015,60],["C",16.917245,60,16.5229467,59.7000072,16.4030326,59.2667387],["L",.3505905,1.2667387],["C",.2032748,.7344638,.5153458,.1835468,1.0476207,.0362311],["C",1.1344943,.0121874,1.2242199,-0,1.3143594,0],["Z"]]},scene:[],thumb:[{d:[["M",6.5216709,11.0666667],["L",25.4769568,11.0666667],["C",25.6978707,11.0666667,25.8769568,11.2457528,25.8769568,11.4666667],["C",25.8769568,11.5020572,25.8722601,11.5372913,25.8629896,11.5714461],["L",22.8230148,22.7714461],["C",22.7757173,22.9457017,22.6175425,23.0666667,22.4369821,23.0666667],["L",9.5311679,23.0666667],["C",9.3502305,23.0666667,9.1918239,22.9452058,9.1448706,22.7704667],["L",6.1353736,11.5704667],["C",6.0780465,11.3571206,6.2045248,11.1376966,6.4178708,11.0803694],["C",6.451721,11.0712737,6.4866199,11.0666667,6.5216709,11.0666667],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.1,y:.5,name:"W"},{x:.9,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.22,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.78,y:.985,name:"SE"}]},{name:"merge",category:"flowchart",width:50,height:36,textarea:{region:ui},outline:{d:[["M",48.9094474,1.5703958],["L",25.82137,34.8172272],["C",25.5063491,35.2708574,24.883234299999998,35.3832223,24.4296042,35.0682014],["C",24.3316502,35.0001778,24.246653600000002,34.9151812,24.17863,34.8172272],["L",1.0905526000000005,1.5703958],["C",.7755317000000002,1.1167657,.8878967000000006,.4936509,1.3415268000000005,.17863],["C",1.5090014000000007,.0623282,1.7080259000000009,0,1.9119226000000005,0],["L",48.0880774,0],["C",48.6403621,0,49.0880774,.4477153,49.0880774,1],["C",49.0880774,1.2038967,49.0257492,1.4029212,48.9094474,1.5703958],["Z"]]},scene:[],thumb:[{d:[["M",25.5482177,9.6324953],["L",16.3254934,22.5443093],["C",16.1970898,22.7240743,15.9472698,22.765711,15.7675047,22.6373074],["C",15.7315865,22.6116515,15.7001625,22.5802275,15.6745066,22.5443093],["L",6.4517823,9.6324953],["C",6.3233787,9.4527302,6.3650154,9.2029102,6.5447805,9.0745066],["C",6.6126207,9.0260493,6.6939065,9,6.7772757,9],["L",25.2227243,9],["C",25.4436382,9,25.6227243,9.1790861,25.6227243,9.4],["C",25.6227243,9.4833692,25.596675,9.564655,25.5482177,9.6324953],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:0,y:1,name:"SW"},{x:1,y:0,name:"NE"},{x:1,y:1,name:"SE"}]},{name:"multi-document",category:"flowchart",isClip:!1,width:120,height:80,textarea:{region:function(e,t){return{minX:4,minY:.2*t,maxX:11/12*e-4,maxY:.8*t}}},outline:{d:[["M",119,-0],["C",119.552285,-0,120,.4477153,120,1],["L",120,57.6634711],["C",120.00004,58.2157781,119.552307,58.6635113,119,58.6635113],["C",118.846121,58.6635113,118.694318,58.6280008,118.556406,58.5597438],["C",117.079303,57.8286782,115.893834,57.3066398,115,56.9936286],["L",114.744,56.868],["L",114.744526,63.1694166],["C",114.744553,63.7217167,114.296826,64.1694445,113.744526,64.1694445],["C",113.610972,64.1694445,113.478771,64.1426929,113.355724,64.0907684],["C",111.834645,63.4488877,110.620494,62.9604303,109.71327,62.6253962],["L",109.714286,71.1461039],["C",109.714249,71.6983687,109.26655,72.1460677,108.714286,72.1460677],["C",108.59377,72.1460677,108.474247,72.1242823,108.361482,72.0817624],["C",98.4971172,68.3622546,89.1471649,66.4976545,80.3116246,66.4879622],["C",66.4538962,66.4727606,64.5535237,67.1669765,50.9091531,72.8467226],["C",37.2647825,78.5264687,35.3899142,79.3366596,21.5066816,79.351889],["C",12.4628087,79.3615937,5.4112062,77.2136321,.351874,72.9080041],["C",.1286374,72.7179927,0,72.4396044,0,72.1464509],["L",0,11.7804604],["C",0,11.2281757,.4477153,10.7804604,1,10.7804604],["L",5.255,10.78],["L",5.2554745,6.3902302],["C",5.2554745,5.8379455,5.7031897,5.3902302,6.2554745,5.3902302],["L",10.51,5.39],["L",10.5109489,1],["C",10.5109489,.4477153,10.9586642,-0,11.5109489,-0],["L",119,-0],["Z"]]},scene:[{d:[["M",10,5.3902302],["L",113.744526,5.3902302],["C",114.29681,5.3902302,114.744526,5.8379455,114.744526,6.3902302],["L",114.744526,61.6827625],["L",114.744526,61.6827625]],attr:{fill:"transparent"}},{d:[["M",3,10.7804604],["L",108.714286,10.7804604],["C",109.26657,10.7804604,109.714286,11.2281757,109.714286,11.7804604],["L",109.714286,69.602221],["L",109.714286,69.602221]],attr:{fill:"transparent"}}],thumb:[{d:[["M",8.4444444,10.4296499],["L",8.4444444,8],["L",28.4444444,8],["L",28.4444444,19.5606936],["C",28.0673004,19.4077004,26.2625497,18.3360173,25.8924529,18.2092979]]},{d:[["M",6.2222222,13.090719],["L",6.2222222,10.7555556],["L",25.4444444,10.7555556],["L",25.4444444,21.8666667],["C",25.0819671,21.7196232,23.3557041,21.1217914,23,21]]},{d:[["M",4.3333333,13.5111111],["L",22.3333333,13.5111111],["L",22.3333333,23.8011738],["C",20.6331063,23.1515551,19.0251483,22.8259361,17.5094592,22.824317],["C",15.2359257,22.8218883,14.9241458,22.9328011,12.6856163,23.8402371],["C",10.4470867,24.7476731,10.1394911,24.8771148,7.8617733,24.8795322],["C",6.3432947,24.8811295,5.1671481,24.5216767,4.3333333,23.8011738],["L",4.3333333,13.5111111],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.88,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.08,y:.1,name:"NW"},{x:0,y:.91,name:"SW"},{x:.98,y:.02,name:"NE"},{x:.885,y:.91,name:"SE"}]},{name:"off-page",category:"flowchart",width:38,height:38,textarea:{region:ui},outline:{d:[["M",.3999999999999986,0],["L",37.6,0],["C",37.8209139,0,38,.1790861,38,.4],["L",38,19.0323398],["C",38,19.1391572,37.9572763,19.2415374,37.8813478,19.3166695],["L",19.2813478,37.7216028],["C",19.125486199999997,37.8758298,18.874513800000003,37.8758298,18.7186522,37.7216028],["L",.11865219999999965,19.3166695],["C",.04272369999999981,19.2415374,0,19.1391572,0,19.0323398],["L",0,.4],["C",0,.1790861,.17908609999999925,0,.3999999999999986,0],["Z"]]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,15.9169777],["C",24,16.0237952,23.9572763,16.1261753,23.8813478,16.2013075],["L",16.2813478,23.7216028],["C",16.1254862,23.8758298,15.8745138,23.8758298,15.7186522,23.7216028],["L",8.1186522,16.2013075],["C",8.0427237,16.1261753,8,16.0237952,8,15.9169777],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:1,y:0,name:"NE"}]},{name:"or",category:"flowchart",width:44,height:44,textarea:{region:ui},outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[{name:"M",x:0,y:21.5},{name:"L",x:44,y:21.5}]},{d:[{name:"M",x:21.5,y:0},{name:"L",x:21.5,y:44}]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",7,17],["L",25,17],["M",16,8],["L",16,26]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"parallel",category:"flowchart",width:120,height:40,outline:{name:"rect",x:0,y:0,width:120,height:40,rx:0,ry:0,style:{visibility:"hidden"}},open:!0,scene:[{d:[{name:"M",x:120,y:40},{name:"L",x:0,y:40}]},{d:[{name:"M",x:0,y:0},{name:"L",x:120,y:0}]}],thumb:[{d:[["M",26,21],["L",6,21],["M",6,11],["L",26,11]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"polygon",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:0},{x:95.5528258,y:34.5491503},{x:77.3892626,y:90.4508497},{x:18.6107374,y:90.4508497},{x:.44717419000000014,y:34.5491503}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:7},{x:24.5595086,y:13.2188471},{x:21.2900673,y:23.2811529},{x:10.7099327,y:23.2811529},{x:7.44049135,y:13.2188471}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"preparation",category:"flowchart",width:120,height:60,textarea:{region:function(e,t){return{minX:1/6*e,minY:4,maxX:5/6*e,maxY:t-4}}},outline:{d:[["M",19.9840694,0],["L",99.6873184,0],["C",100.023525,-0,100.33723,.1689467,100.522259,.4496594],["L",119.639798,29.4535248],["C",119.858585,29.7854538,119.859975,30.2154564,119.64334,30.5487937],["L",100.798808,59.5449283],["C",100.614349,59.8287556,100.298826,60,99.960325,60],["L",20.1720063,60],["C",19.83462,60,19.5199796,59.8298739,19.3352402,59.5475604],["L",.3565669,30.5448953],["C",.1398092,30.2136523,.1388534,29.7857253,.3541294,29.4535175],["L",19.1448658,.4561827],["C",19.3292042,.1717169,19.6450984,0,19.9840694,0],["Z"]]},scene:[],thumb:[{d:[["M",9.1753609,10],["L",22.7586938,10],["C",22.8919773,10,23.016505,10.0663866,23.0907953,10.1770457],["L",26.8513724,15.7786117],["C",26.9413749,15.912675,26.9419451,16.0877051,26.8528179,16.2223519],["L",23.1470284,21.8207859],["C",23.072951,21.9326965,22.9476882,22,22.8134814,22],["L",9.2130739,22],["C",9.0793157,22,8.9544098,21.9331428,8.8802274,21.8218405],["L",5.1471359,16.2207607],["C",5.057961,16.0869638,5.0575691,15.9127763,5.1461411,15.7785795],["L",8.8415196,10.1796593],["C",8.9155518,10.067492,9.0409649,10,9.1753609,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.26,y:.02,name:"NW"},{x:.26,y:.98,name:"SW"},{x:.74,y:.02,name:"NE"},{x:.74,y:.98,name:"SE"}]},{name:"process",category:"flowchart",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"sort",category:"flowchart",width:44,height:44,textarea:{region:ui},outline:{d:[["M",22.707552999999997,.7084468],["L",43.2664758,21.2933397],["C",43.6564052,21.6837616,43.6564052,22.3162384,43.2664758,22.7066603],["L",22.707552999999997,43.2915532],["C",22.3172753,43.682324,21.6841104,43.6827236,21.293339699999997,43.2924459],["C",21.2930419,43.2921485,21.292744399999997,43.291851,21.292447000000003,43.2915532],["L",.7335241999999997,22.7066603],["C",.3435948,22.3162384,.3435948,21.6837616,.7335241999999997,21.2933397],["L",21.292447000000003,.7084468],["C",21.6827247,.317676,22.3158896,.3172764,22.706660300000003,.7075541],["C",22.7069581,.7078515,22.707255600000003,.708149,22.707552999999997,.7084468],["Z"]]},scene:[{d:[{name:"M",x:.1242938,y:22},{name:"L",x:43.8757062,y:22}]}],thumb:[{d:[["M",16.2830212,7.2833787],["L",24.706338,15.7173359],["C",24.8623098,15.8735046,24.8623098,16.1264954,24.706338,16.2826641],["L",16.2830212,24.7166213],["C",16.1269101,24.8729296,15.8736442,24.8730894,15.7173359,24.7169784],["C",15.7172168,24.7168594,15.7170978,24.7167404,15.7169788,24.7166213],["L",7.293662,16.2826641],["C",7.1376902,16.1264954,7.1376902,15.8735046,7.293662,15.7173359],["L",15.7169788,7.2833787],["C",15.8730899,7.1270704,16.1263558,7.1269106,16.2826641,7.2830216],["C",16.2827832,7.2831406,16.2829022,7.2832596,16.2830212,7.2833787],["Z"],["M",7.3175141,15.7333333],["L",25.2158192,15.7333333]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"start-end",category:"flowchart",width:120,height:60,outline:{path:function(e,t){return di(e,t,Math.min(e,t)/2)}},scene:[],thumb:[{d:[["M",11,10],["L",21,10],["C",24.3137085,10,27,12.6862915,27,16],["C",27,19.3137085,24.3137085,22,21,22],["L",11,22],["C",7.6862915,22,5,19.3137085,5,16],["C",5,12.6862915,7.6862915,10,11,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.11,y:.11,name:"NW"},{x:.11,y:.89,name:"SW"},{x:.89,y:.11,name:"NE"},{x:.89,y:.89,name:"SE"}]},{name:"stored-data",category:"flowchart",width:120,height:60,textarea:{region:function(e,t){return{minX:1/12*e,minY:4,maxX:e-1*e/8,maxY:t-4}}},outline:{d:[["M",13.7777709,0],["L",120,0],["C",111.115006,4.7754794,106.672509,14.7754794,106.672509,30],["C",106.672509,44.2961128,111.115006,54.2961128,120,60],["L",13.7777709,60],["C",4.2600422,53.6223342,-.3265282,43.6223342,.0180598,30],["C",.4106176,14.4813071,4.997188,4.4813072,13.7777709,0],["Z"]]},scene:[],thumb:[{d:[["M",7.7592332,10],["L",26.7592332,10],["C",24.3123052,10.9550959,23.0888412,12.9550959,23.0888412,16],["C",23.0888412,18.8592226,24.3123052,20.8592226,26.7592332,22],["L",7.7592332,22],["C",5.853146,20.7244668,4.9346072,18.7244668,5.0036168,16],["C",5.0822332,12.8962614,6.000772,10.8962614,7.7592332,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:.93,y:.5,name:"E"},{x:.1,y:0,name:"NW"},{x:.1,y:1,name:"SW"},{x:.995,y:.01,name:"NE"},{x:.995,y:.99,name:"SE"}]},{name:"subroutine",category:"flowchart",width:120,height:60,textarea:{region:function(e,t){return{minX:.08*e+4,minY:4,maxX:.92*e-4,maxY:t-4}}},outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[{d:[{name:"M",x:8,y:-0},{name:"L",x:8,y:60}]},{d:[{name:"M",x:112,y:-0},{name:"L",x:112,y:60}]}],thumb:[{d:[["M",6.4,10],["L",25.6,10],["C",25.8209139,10,26,10.1790861,26,10.4],["L",26,21.6],["C",26,21.8209139,25.8209139,22,25.6,22],["L",6.4,22],["C",6.1790861,22,6,21.8209139,6,21.6],["L",6,10.4],["C",6,10.1790861,6.1790861,10,6.4,10],["Z"],["M",10,10],["L",10,22],["M",22,10],["L",22,22]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"summing-junction",category:"flowchart",width:44,height:44,textarea:{region:ui},outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[["M",6.44365,6.44365],["l",31.1127,31.1127],["m",-31.1127,0],["l",31.1127,-31.1127]]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",9.636,10.636],["l",12.727922,12.727922],["m",0,-12.727922],["l",-12.727922,12.727922]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"hard-disk",category:"flowchart",width:120,height:60,outline:{d:[["M",15,60],["L",14.7519476,59.9959809],["C",9.2781402,59.818482,4.5170854,53.7768783,1.9708869,44.875377],["L",1.7488298,44.0706625],["L",1.7488298,44.0706625],["L",1.538854,43.2511373],["C",.5535534,39.2550784,0,34.7568286,0,30],["C",0,27.0176624,.2175896,24.1369663,.6227504,21.4179485],["L",.76471,20.5176797],["C",.9879463,19.1765057,1.2572417,17.8774189,1.5688436,16.627924],["L",1.7828048,15.8023567],["C",1.892878,15.3933289,2.0075593,14.9899966,2.1267097,14.5926377],["L",2.3709282,13.805967],["C",4.9969253,5.6312819,9.5529446,.172607,14.7519476,.0040191],["L",15.0621025,0],["L",15.0621025,0],["L",105,0],["L",105.248052,.0040191],["C",110.72186,.181518,115.482915,6.2231217,118.029113,15.124623],["L",118.25117,15.9293375],["L",118.25117,15.9293375],["L",118.461146,16.7488627],["C",119.446447,20.7449216,120,25.2431714,120,30],["C",120,32.9823376,119.78241,35.8630337,119.37725,38.5820515],["L",119.23529,39.4823203],["C",119.012054,40.8234943,118.742758,42.1225811,118.431156,43.372076],["L",118.217195,44.1976433],["C",118.107122,44.6066711,117.992441,45.0100034,117.87329,45.4073623],["L",117.629072,46.194033],["C",115.003075,54.3687181,110.447055,59.827393,105.248052,59.9959809],["L",105,60],["L",15,60],["Z"]]},scene:[{d:[["M",105,0],["C",96.7157288,0,90,13.4314575,90,30],["C",90,46.5685425,96.7157288,60,105,60]],attr:{fill:"transparent"}}],thumb:[{d:[["M",26,16],["C",26,19.7950693,24.6815015,22.8847632,23.0365121,22.9968505],["L",23.0365572,22.9990622],["L",9.005513,22.9990622],["C",7.3410124,22.9372467,6,19.8273333,6,16],["C",6,12.21094,7.3143262,9.1250233,8.955676,9.0037044],["L",9.005513,9.0009378],["L",23.0365572,9],["L",23.0365121,9.0031495],["C",24.6815015,9.1152368,26,12.2049307,26,16],["Z"]]},{d:[["M",22.6666667,23],["C",21.4393672,23,20.4444444,19.8659932,20.4444444,16],["C",20.4444444,12.1726667,21.4195683,9.0627533,22.6299182,9.0009378],["L",22.6666667,9]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"annotation",category:"flowchart",width:160,height:100,outline:{name:"rect",x:0,y:0,width:160,height:100,rx:0,ry:0,style:{visibility:"hidden"}},open:!0,scene:[{d:[["M",12,0],["L",2,0],["C",.8954305,0,0,.8954305,0,2],["L",0,98],["C",0,99.1045695,1.8954305,100,2,100],["L",12,100],["L",12,100]],attr:{fill:"transparent"}}],thumb:[{d:[["M",14,25],["L",8.4,25],["C",8.1790861,25,8,24.8209139,8,24.6],["L",8,7.4],["C",8,7.1790861,8.1790861,7,8.4,7],["L",14,7]],attr:{fill:"transparent"}},{d:[["M",15,12.4],["L",23,12.4],["M",15,19.6],["L",20,19.6],["M",15,16],["L",25,16]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"paper-tape",category:"flowchart",width:120,height:60,outline:{d:[["M",1.5222953,.9815615],["C",9.1503953,5.6605205,18.6431804,8,30.0006506,8],["C",48.1891811,8,72,0,90,0],["C",101.772949,0,111.620866,2.5667099,119.54375,7.7001296],["C",119.827781,7.8834886,119.999272,8.1983049,120,8.536377],["L",120,58.1813965],["C",119.99868,58.7336797,119.549899,59.1803262,118.997616,59.1790094],["C",118.81486,59.1785736,118.635719,59.1280638,118.479584,59.0330812],["C",110.744659,54.3443604,101.251465,52,90,52],["C",72,52,47.9802124,60,30.0006506,60],["C",18.2410691,60,8.3931965,57.4332901,.4570327,52.2998704],["C",.1725566,52.1168331,7995e-7,51.8018948,0,51.463623],["L",0,1.8312988],["C",.0011011,1.2790152,.4497064,.8321918,1.0019901,.8332909],["C",1.1858393,.8336568,1.3660294,.8846988,1.5222953,.9815615],["Z"]]},scene:[],thumb:[{d:[["M",6.6474214,9.5811114],["C",7.8470102,10.5270371,9.2979179,11,11.0001446,11],["C",14.0315882,11,18.0555691,9,21.0153944,9],["C",22.9279117,9,24.5476734,9.6262819,25.8746796,10.8788457],["C",25.9544319,10.953493,25.9996109,11.0577585,26.0001446,11.1669922],["L",26.0001446,22.1123047],["C",25.9985502,22.3332128,25.8181845,22.5110102,25.5972763,22.5094261],["C",25.5080849,22.5087865,25.421666,22.4783549,25.3523768,22.4221807],["C",24.1466821,21.4740602,22.7041694,21,21.0248386,21],["C",18.037633,21,13.9967599,23,11.0001446,23],["C",9.0638551,23,7.4385415,22.3737181,6.1242038,21.1211543],["C",6.0451563,21.0461214,6.0003506,20.9419953,6,20.8330078],["L",6,9.8935547],["C",6.000786,9.6726422,6.1805061,9.4941923,6.4014186,9.4949758],["C",6.4907774,9.4952927,6.5774568,9.5255221,6.6474214,9.5811114],["Z"]]}],anchors:[{x:.5,y:.09,name:"N"},{x:.5,y:.91,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:.09,name:"NW"},{x:0,y:.91,name:"SW"},{x:1,y:.09,name:"NE"},{x:1,y:.91,name:"SE"}]},{name:"card",category:"flowchart",width:120,height:60,outline:{d:[["M",17.119717,0],["L",119,0],["C",119.552285,-0,120,.4477153,120,1],["L",120,59],["C",120,59.5522847,119.552285,60,119,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,20.1542151],["C",0,19.9186136,.0831857,19.6905777,.2348891,19.5103165],["L",16.3546062,.3561015],["C",16.5446112,.1303284,16.8246316,-0,17.119717,0],["Z"]]},scene:[],thumb:[{d:[["M",9.5170283,10],["L",25.6,10],["C",25.8209139,10,26,10.1790861,26,10.4],["L",26,21.6],["C",26,21.8209139,25.8209139,22,25.6,22],["L",6.4,22],["C",6.1790861,22,6,21.8209139,6,21.6],["L",6,14.1038014],["C",6,14.0095609,6.0332743,13.9183465,6.0939556,13.846242],["L",9.210984,10.1424406],["C",9.286986,10.0521313,9.3989942,10,9.5170283,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.1,y:.16,name:"NW"},{x:.015,y:.98,name:"SW"},{x:.985,y:.02,name:"NE"},{x:.985,y:.98,name:"SE"}]}],so=1/6*Math.PI,uo=20*Math.tan(so);function ho(e,t){return{d:uo>e?0:uo,titleHeight:20>t?t:20}}var fo=[{name:"frame",width:500,height:400,html:'<div style="text-align:left;">&nbsp;</div>',textarea:{region:function(e,t){return{minX:4,minY:4,maxX:.4*e-(10<e?10:0),maxY:(30<t?30:t)-4}}},outline:{path:function(e,t){return di(e,t,4)}},scene:[{path:function(e,t){var n,r,a=.4*e,i=10<e?10:0;return 30<t?(n=30,r=16):(n=t,r=0),[["M",0,n],["l",a-i,0],["l",i,-r],["L",a,0]]},attr:{fill:"none"}}],thumb:[{d:[["M",6.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]},{d:[["M",6,12],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["L",16.5337171,9],["C",16.697486400000003,9,16.8447125,9.0998297,16.9053186,9.251971900000001],["L",18,12],["L",18,12],["L",6,12],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"UML"},{name:"package",category:"UML",isClip:!1,width:120,height:80,textarea:{region:function(e,t){return{minX:4,minY:ho(e,t).titleHeight+4,maxX:e-4,maxY:t-4}}},outline:{path:function(e,t){var n=.6*e,r=ho(e,t),a=r.d,i=r.titleHeight,o=e/2,c=t>i?t/2:0,l=o<4?o:4,s=c<4?c:4;return[["M",l,0],["l",n,0],["l",a-l,i],["L",e-l,i],["a",l,s,0,0,1,l,s],["L",e,t-s],["a",l,s,0,0,1,-l,s],["L",l,t],["a",l,s,0,0,1,-l,-s],["L",0,s],["a",l,s,0,0,1,l,-s],["Z"]]}},scene:[{path:function(e,t){var n=.6*e,r=ho(e,t),a=r.d;return[["M",0,r.titleHeight],["l",n+a,0]]}}],thumb:[{d:[["M",6,11],["L",25.6,11],["C",25.8209139,11,26,11.1790861,26,11.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,11],["L",6,11],["Z"]]},{d:[["M",6,11],["L",6,8.9],["C",6,8.6790861,6.1790861,8.5,6.4,8.5],["L",14.7328929,8.5],["C",14.8966622,8.5,15.0438883,8.5998297,15.1044944,8.751971900000001],["L",16,11],["L",16,11],["L",6,11],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"activation",category:"UML",width:20,height:80,textarea:{region:ui},outline:{name:"rect",x:0,y:0,width:20,height:80,rx:4,ry:4},scene:[],thumb:[{d:[["M",19,6.4],["L",19,25.6],["C",19,25.8209139,18.8209139,26,18.6,26],["L",13.4,26],["C",13.1790861,26,13,25.8209139,13,25.6],["L",13,6.4],["C",13,6.1790861,13.1790861,6,13.4,6],["L",18.6,6],["C",18.8209139,6,19,6.1790861,19,6.4],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"actor",category:"UML",width:40,height:80,isClip:!1,closed:!1,textarea:{region:ui},outline:{d:[["M",20,20],["C",25.5228475,20,30,15.5228475,30,10],["C",30,4.4771525,25.5228475,0,20,0],["C",14.4771525,0,10,4.4771525,10,10],["C",10,15.5228475,14.4771525,20,20,20],["Z"],["M",0,35],["L",40,35],["M",20,20],["L",20,52],["M",20,52],["L",0,80],["M",20,52],["L",40,80]]},scene:[{name:"rect",x:0,y:0,width:40,height:80,attr:{fill:"transparent",stroke:"transparent"}}],thumb:[{d:[["M",16,13],["C",17.9329966,13,19.5,11.4329966,19.5,9.5],["C",19.5,7.5670034,17.9329966,6,16,6],["C",14.0670034,6,12.5,7.5670034,12.5,9.5],["C",12.5,11.4329966,14.0670034,13,16,13],["Z"],["M",11,16],["L",21,16],["M",16,19],["L",11,26],["M",16,19],["L",21,26],["M",16,13],["L",16,19]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],antiAnchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.4375,name:"W"},{x:1,y:.4375,name:"E"}]},{name:"annotation",category:"UML",width:159,height:100,outline:{name:"rect",x:0,y:0,width:160,height:100,rx:0,ry:0},scene:[{d:[["M",2,0],["L",10,0],["C",11.1045695,-0,12,.8954305,12,2],["L",12,98],["C",12,99.1045695,11.1045695,100,10,100],["L",0,100],["L",0,100]]}],thumb:[{d:[["M",14,25],["L",8.4,25],["C",8.1790861,25,8,24.8209139,8,24.6],["L",8,7.4],["C",8,7.1790861,8.1790861,7,8.4,7],["L",14,7]]},{d:[["M",20.6,18.8],["C",20.8209139,18.8,21,18.9790861,21,19.2],["L",21,20],["C",21,20.2209139,20.8209139,20.4,20.6,20.4],["L",15.4,20.4],["C",15.1790861,20.4,15,20.2209139,15,20],["L",15,19.2],["C",15,18.9790861,15.1790861,18.8,15.4,18.8],["L",20.6,18.8],["Z"],["M",25.6,15.2],["C",25.8209139,15.2,26,15.3790861,26,15.6],["L",26,16.4],["C",26,16.6209139,25.8209139,16.8,25.6,16.8],["L",15.4,16.8],["C",15.1790861,16.8,15,16.6209139,15,16.4],["L",15,15.6],["C",15,15.3790861,15.1790861,15.2,15.4,15.2],["L",25.6,15.2],["Z"],["M",23.6,11.6],["C",23.8209139,11.6,24,11.7790861,24,12],["L",24,12.8],["C",24,13.0209139,23.8209139,13.2,23.6,13.2],["L",15.4,13.2],["C",15.1790861,13.2,15,13.0209139,15,12.8],["L",15,12],["C",15,11.7790861,15.1790861,11.6,15.4,11.6],["L",23.6,11.6],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"boundary",category:"UML",width:70,height:50,isClip:!1,textarea:{region:ui},outline:{d:[["M",45,50],["C",58.8071187,50,70,38.8071187,70,25],["C",70,11.1928813,58.8071187,0,45,0],["C",31.1928813,0,20,11.1928813,20,25],["C",20,38.8071187,31.1928813,50,45,50],["Z"],["M",-0,0],["L",0,50],["M",0,25],["L",20,25]]},scene:[],thumb:[{d:[["M",19,22],["C",22.3137085,22,25,19.3137085,25,16],["C",25,12.6862915,22.3137085,10,19,10],["C",15.6862915,10,13,12.6862915,13,16],["C",13,19.3137085,15.6862915,22,19,22],["Z"],["M",8,16],["L",13,16],["M",7.5,10],["L",7.5,22]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"choice",width:40,height:40,textarea:{region:ui},outline:{d:[["M",22.1213203,.9081169],["L",39.0918831,17.8786797],["C",40.263456,19.0502525,40.263456,20.9497475,39.0918831,22.1213203],["L",22.1213203,39.0918831],["C",20.9497475,40.263456,19.0502525,40.263456,17.8786797,39.0918831],["L",.9081169,22.1213203],["C",-.263456,20.9497475,-.263456,19.0502525,.9081169,17.8786797],["L",17.8786797,.9081169],["C",19.0502525,-.263456,20.9497475,-.263456,22.1213203,.9081169],["Z"]]},scene:[],thumb:[{d:[["M",16.219338,9.0908528],["L",22.9091472,15.780662],["C",23.0302843,15.901799,23.0302843,16.098201,22.9091472,16.219338],["L",16.219338,22.9091472],["C",16.098201,23.0302843,15.901799,23.0302843,15.780662,22.9091472],["L",9.0908528,16.219338],["C",8.9697157,16.098201,8.9697157,15.901799,9.0908528,15.780662],["L",15.780662,9.0908528],["C",15.901799,8.9697157,16.098201,8.9697157,16.219338,9.0908528],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"UML"},{name:"control",category:"UML",width:50,height:55,isClip:!1,textarea:{region:ui},outline:{d:[["M",25,55],["C",38.8071187,55,50,43.8071187,50,30],["C",50,16.1928813,38.8071187,5,25,5],["C",11.1928813,5,0,16.1928813,0,30],["C",0,43.8071187,11.1928813,55,25,55],["Z"],["M",24,4.9497475],["L",28.9497475,0]]},scene:[{d:[{name:"M",x:28.9497475,y:9.8994949},{name:"L",x:24,y:4.9497475}]}],thumb:[{d:[["M",16,22],["C",19.3137085,22,22,19.3137085,22,16],["C",22,12.6862915,19.3137085,10,16,10],["C",12.6862915,10,10,12.6862915,10,16],["C",10,19.3137085,12.6862915,22,16,22],["Z"],["M",15,10.1213203],["L",17.1213203,8],["M",17.1213203,12.2426407],["L",15,10.1213203]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"deletion",category:"UML",width:40,height:40,isClip:!1,closed:!1,textarea:{region:ui},outline:{d:[["M",0,0],["L",40,40],["M",40,0],["L",0,40]],attr:{stroke:{width:4}}},scene:[],thumb:[{d:[["M",9.3534503,9.3534503],["L",22.6465497,22.6465497],["M",22.6465497,9.3534503],["L",9.3534503,22.6465497]],attr:{"stroke-width":2}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"finish",category:"UML",width:42,height:42,textarea:{region:ui},outline:{name:"ellipse",cx:21,cy:21,rx:21,ry:21,attr:{stroke:{color:"#595959",width:4.2}}},scene:[{name:"ellipse",cx:21,cy:21,rx:12,ry:12,attr:{fill:"#595959"}}],thumb:[{name:"ellipse",cx:16,cy:16,rx:7,ry:7,attr:{stroke:"#595959","stroke-width":1.2}},{name:"ellipse",cx:16,cy:16,rx:5,ry:5,attr:{fill:"#595959"}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"fork",category:"UML",width:120,height:20,outline:{name:"rect",x:0,y:0,width:120,height:20,rx:4,ry:4,attr:{fill:{color:"#595959"}}},scene:[],thumb:[{name:"rect",x:6,y:14,width:20,height:4,rx:1,ry:1,attr:{fill:"#595959"}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"frequency",category:"UML",textarea:{region:ui},width:44,height:36,outline:{d:[["M",42.7122245,0],["C",42.8304828,0,42.9426798,.0523287,43.0186811,.1429312],["C",43.1606563,.3121825,43.1385446,.5644814,42.9692933,.7064566],["L",42.9692933,.7064566],["L",22.353,18],["L",42.9692933,35.2935434],["C",43.0417753,35.3543444,43.0897621,35.4383107,43.1060575,35.5300135],["L",43.1122245,35.6],["C",43.1122245,35.8209139,42.9331384,36,42.7122245,36],["L",42.7122245,36],["L",1.2877755,36],["C",1.1695172,36,1.0573202,35.9476713,.9813189,35.8570688],["C",.8393436999999999,35.6878175,.8614554000000001,35.4355186,1.0307067,35.2935434],["L",1.0307067,35.2935434],["L",21.646,17.999],["L",1.0307067,.7064566],["C",.9582246999999999,.6456556,.9102379,.5616893,.8939425000000001,.4699865],["L",.8877755,.4],["C",.8877755,.1790861,1.0668616,0,1.2877755,0],["L",1.2877755,0],["Z"]]},scene:[],thumb:[{d:[["M",23.6012174,9],["C",23.7214126,9,23.8352365,9.0540492,23.9112011,9.1471955],["C",24.0508212,9.3183948,24.0252212,9.5703637,23.8540219,9.7099837],["L",23.8540219,9.7099837],["L",16.142,16],["L",23.8540219,22.2900163],["C",23.928539,22.350788,23.9780339,22.4357897,23.9948511,22.5288994],["L",24.0012174,22.6],["C",24.0012174,22.8209139,23.8221313,23,23.6012174,23],["L",23.6012174,23],["L",8.3987826,23],["C",8.2785874,23,8.1647635,22.9459508,8.0887989,22.8528045],["C",7.9491788,22.6816052,7.9747788,22.4296364,8.1459781,22.2900163],["L",8.1459781,22.2900163],["L",15.858,16],["L",8.1459781,9.7099837],["C",8.071461,9.649212,8.0219661,9.5642103,8.0051489,9.4711006],["L",7.9987826,9.4],["C",7.9987826,9.1790861,8.1778687,9,8.3987826,9],["L",8.3987826,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],antiAnchors:[{x:.5,y:0},{x:.5,y:1}]},{name:"node",category:"UML",width:240,height:240,textarea:{region:function(e,t){return{minX:4,minY:1/11*t+4,maxX:10/11*e-4,maxY:t-4}}},outline:{d:[["M",0,239],["L",0,20.4142136],["C",0,20.1489971,.1053568,19.8946432,.2928932,19.7071068],["L",19.7071068,.2928932],["C",19.8946432,.1053568,20.1489971,0,20.4142136,0],["L",239,0],["C",239.552285,-0,240,.4477153,240,1],["L",240,219.585786],["C",240,219.851003,239.894643,220.105357,239.707107,220.292893],["L",220.292893,239.707107],["C",220.105357,239.894643,219.851003,240,219.585786,240],["L",1,240],["C",.4477153,240,0,239.552285,0,239],["Z"]]},scene:[{name:"polygon",points:[{x:20,y:0},{x:240,y:0},{x:220,y:20},{x:0,y:20}],attr:{fill:"rgba(0,0,0,0.1)"}},{name:"polygon",points:[{x:220,y:20},{x:220,y:240},{x:240,y:220},{x:240,y:6123234e-22}],attr:{fill:"rgba(0,0,0,0.1)"}}],thumb:[{d:[["M",8,10],["L",22,10],["L",22,24],["L",8.4,24],["C",8.1790861,24,8,23.8209139,8,23.6],["L",8,10],["L",8,10],["Z"]]},{d:[["M",8,10],["L",9.9481766,8.1127039],["C",10.0227934,8.0404189,10.122606300000001,8,10.2264947,8],["L",24,8],["L",24,8],["L",22.4516129,10]]},{d:[["M",22,24],["L",23.8872961,22.0518234],["C",23.9595811,21.977206600000002,24,21.8773937,24,21.7735053],["L",24,8],["L",24,8]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"object",category:"UML",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10],["L",25.6,10],["C",25.8209139,10,26,10.1790861,26,10.4],["L",26,21.6],["C",26,21.8209139,25.8209139,22,25.6,22],["L",6.4,22],["C",6.1790861,22,6,21.8209139,6,21.6],["L",6,10.4],["C",6,10.1790861,6.1790861,10,6.4,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"receive-signal",category:"UML",width:139,height:60,textarea:{region:function(e,t){return{minX:.18*e+4,minY:4,maxX:e-4,maxY:t-4}}},outline:{d:[["M",138,0],["L",1.1350416,0],["C",.5827568999999999,0,.1350416000000001,.4477153,.1350416000000001,1],["C",.1350416000000001,1.2339365,.21705780000000008,1.4604694,.3668203000000001,1.6401844],["L",23.466513,29.3598156],["C",23.7755513,29.7306616,23.7755513,30.2693384,23.466513,30.6401844],["L",.3668203000000001,58.3598156],["C",.01325630000000011,58.7840925,.07058030000000004,59.4146572,.4948572,59.7682213],["C",.6745722000000001,59.9179838,.9011051000000001,60,1.1350416,60],["L",138,60],["C",138.552285,60,139,59.5522847,139,59],["L",139,1],["C",139,.4477153,138.552285,0,138,0],["Z"]]},scene:[],thumb:[{d:[["M",25.6,20],["L",6.9656854,20],["C",6.7447715,20,6.5656854,19.8209139,6.5656854,19.6],["C",6.5656854,19.4939134,6.6078282,19.3921718,6.6828427,19.3171573],["L",9.7171573,16.2828427],["C",9.873367,16.126633,9.873367,15.873367,9.7171573,15.7171573],["L",6.6828427,12.6828427],["C",6.526633,12.526633,6.526633,12.273367,6.6828427,12.1171573],["C",6.7578573,12.0421427,6.8595988,12,6.9656854,12],["L",25.6,12],["C",25.8209139,12,26,12.1790861,26,12.4],["L",26,19.6],["C",26,19.8209139,25.8209139,20,25.6,20],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"send-signal",category:"UML",width:140,height:60,textarea:{region:function(e,t){return{minX:4,minY:4,maxX:e-.18*e-4,maxY:t-4}}},outline:{d:[["M",1,0],["L",114.531625,0],["C",114.828405,0,115.109853,.131823,115.299846,.3598156],["L",139.466513,29.3598156],["C",139.775551,29.7306616,139.775551,30.2693384,139.466513,30.6401844],["L",115.299846,59.6401844],["C",115.109853,59.868177,114.828405,60,114.531625,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6.4,12],["L",21.8343146,12],["C",21.9404012,12,22.0421427,12.0421427,22.1171573,12.1171573],["L",26,16],["L",26,16],["L",22.1171573,19.8828427],["C",22.0421427,19.9578573,21.9404012,20,21.8343146,20],["L",6.4,20],["C",6.1790861,20,6,19.8209139,6,19.6],["L",6,12.4],["C",6,12.1790861,6.1790861,12,6.4,12],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"simple-class",category:"UML",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:4,ry:4},scene:[],thumb:[{d:[["M",6.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"start",width:40,height:40,textarea:{region:ui},outline:{name:"ellipse",cx:20,cy:20,rx:20,ry:20,attr:{fill:{color:"#595959"}}},scene:[],thumb:[{name:"ellipse",cx:16,cy:16,rx:7,ry:7,attr:{fill:"#595959"}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"UML"},{name:"state",category:"UML",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:12,ry:12},scene:[],thumb:[{d:[["M",8,10],["L",24,10],["C",25.1045695,10,26,10.8954305,26,12],["L",26,20],["C",26,21.1045695,25.1045695,22,24,22],["L",8,22],["C",6.8954305,22,6,21.1045695,6,20],["L",6,12],["C",6,10.8954305,6.8954305,10,8,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"termination-pseudostate",category:"UML",width:40,height:40,textarea:{region:ui},outline:{name:"ellipse",cx:20,cy:20,rx:20,ry:20},scene:[{d:[["M",5.7142857,5.7142857],["C",5.7142857,5.7142857,15.2380952,15.2380952,34.2857143,34.2857143],["M",34.2857143,5.7142857],["L",5.7142857,34.2857143]]}],thumb:[{d:[["M",16,23],["C",19.8659932,23,23,19.8659932,23,16],["C",23,12.1340068,19.8659932,9,16,9],["C",12.1340068,9,9,12.1340068,9,16],["C",9,19.8659932,12.1340068,23,16,23],["Z"],["M",11,11],["C",11,11,14.3333333,14.3333333,21,21],["M",21,11],["L",11,21]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"use-case",category:"UML",width:120,height:70,outline:{name:"ellipse",cx:60,cy:35,rx:60,ry:35},scene:[],thumb:[{name:"ellipse",cx:16,cy:16,rx:11,ry:8}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"class",category:"UML",type:"stack",width:280,height:200,row:3,heights:[40,80,80],outline:{path:function(e,t){return di(e,t,8)}},scene:[{d:[["M",0,40],["L",280,40]],height:40},{d:[["M",0,120],["L",280,120]],height:120}],thumb:[{d:[["M",6.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]},{d:[{name:"M",x:6,y:12},{name:"L",x:26,y:12}]},{d:[{name:"M",x:6,y:17.5},{name:"L",x:26,y:17.5}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],htmls:['<div style="text-align:center;"><span style="font-weight:bold;">Class</span></div>','<div style="text-align:left;">+ attribute1:type = defaultValue</div>\n      <div style="text-align:left;">+ attribute2:type</div>\n      <div style="text-align:left;">- attribute3:type</div>','<div style="text-align:left;">+ operation1(params):returnType</div>\n      <div style="text-align:left;">- operation2(params)</div>\n      <div style="text-align:left;">- operation3()</div>']},{name:"interface",type:"stack",width:280,height:200,row:2,heights:[64,90],outline:{path:function(e,t){return di(e,t,8)}},scene:[{d:[["M",0,64],["L",280,64]],height:64}],thumb:[{d:[["M",6.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]},{d:[{name:"M",x:6,y:16},{name:"L",x:26,y:16}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],htmls:['<div style="text-align:center;"><span style="font-weight:bold;">&lt;&lt;interface&gt;&gt;</span></div>\n      <div style="text-align:center;">Interface</div>','<div style="text-align:left;">+ operation1(params):returnType</div>\n      <div style="text-align:left;">- operation2(params)</div>\n      <div style="text-align:left;">- operation3()</div>'],category:"UML"},{name:"constraint",width:120,height:50,textarea:{region:function(e,t){var n=.1*e,r=16/380*t;return{minX:n+4,minY:r,maxX:e-n-4,maxY:t-r}}},outline:{name:"rect",x:0,y:0,width:120,height:50,rx:0,ry:0,style:{visibility:"hidden"}},scene:[{d:[["M",11,2],["L",10,2],["C",7.790861,2,6,3.790861,6,6],["L",6,19.9098301],["C",6,21.8036903,4.9299881,23.5350059,3.236068,24.381966],["L",1,25],["L",3.236068,25.618034],["C",4.9299881,26.4649941,6,28.1963097,6,30.0901699],["L",6,44],["C",6,46.209139,7.790861,48,10,48],["L",11,48]],attr:{fill:"transparent"}},{d:[["M",109,2],["L",110,2],["C",112.209139,2,114,3.790861,114,6],["L",114,19.9098301],["C",114,21.8036903,115.070012,23.5350059,116.763932,24.381966],["L",119,25],["L",116.763932,25.618034],["C",115.070012,26.4649941,114,28.1963097,114,30.0901699],["L",114,44],["C",114,46.209139,112.209139,48,110,48],["L",109,48]],attr:{fill:"transparent"}}],thumb:[{d:[["M",11,8],["L",11,9.0792291],["L",10.0378007,9.0792291],["L",9.9004779,9.0841809],["C",9.2360127,9.1336991,8.9037801,9.5546039,8.9037801,10.3468951],["L",8.9037801,10.3468951],["L",8.9037801,13.9100642],["L",8.8982764,14.0989026],["C",8.8432399,15.0236884,8.3754296,15.6573876,7.4948454,16],["C",8.4341352,16.3768737,8.9037801,17.0735189,8.9037801,18.0899358],["L",8.9037801,18.0899358],["L",8.9037801,21.6702355],["L",8.9082098,21.8216676],["C",8.9525075,22.5544031,9.3290378,22.9207709,10.0378007,22.9207709],["L",10.0378007,22.9207709],["L",11,22.9207709],["L",11,24],["L",9.814433,24],["L",9.6063574,23.9933191],["C",8.997079,23.9532334,8.5223368,23.7327623,8.1821306,23.3319058],["C",7.8155785,22.9321913,7.6323024,22.3668808,7.6323024,21.6359743],["L",7.6323024,21.6359743],["L",7.6323024,18.1413276],["L",7.6272015,17.9587794],["C",7.6033971,17.5465739,7.4962772,17.2305496,7.3058419,17.0107066],["C",7.0652921,16.7366167,6.6300114,16.5881513,6,16.5653105],["L",6,16.5653105],["L",6,15.4346895],["L",6.2061856,15.4190393],["C",6.7356497,15.366026,7.1022019,15.2227774,7.3058419,14.9892934],["C",7.5234823,14.7380443,7.6323024,14.3611706,7.6323024,13.8586724],["L",7.6323024,13.8586724],["L",7.6323024,10.3811563],["L",7.6378007,10.1635974],["C",7.6707904,9.5263383,7.8522337,9.0278373,8.1821306,8.6680942],["C",8.5601375,8.2226981,9.1042383,8,9.814433,8],["L",9.814433,8],["L",11,8],["Z"],["M",22.185567,8],["C",22.8957617,8,23.4398625,8.2226981,23.8178694,8.6680942],["C",24.1477663,9.0278373,24.3292096,9.5263383,24.3621993,10.1635974],["L",24.3676976,10.3811563],["L",24.3676976,13.8586724],["C",24.3676976,14.3611706,24.4765178,14.7380443,24.6941581,14.9892934],["C",24.8977981,15.2227774,25.2643503,15.366026,25.7938144,15.4190393],["L",26,15.4346895],["L",26,16.5653105],["C",25.3699885,16.5881513,24.9347079,16.7366167,24.6941581,17.0107066],["C",24.5037228,17.2305496,24.3966029,17.5465739,24.3727985,17.9587794],["L",24.3676976,18.1413276],["L",24.3676976,21.6359743],["C",24.3676976,22.3668808,24.1844215,22.9321913,23.8178694,23.3319058],["C",23.4776632,23.7327623,23.002921,23.9532334,22.3936426,23.9933191],["L",22.185567,24],["L",21,24],["L",21,22.9207709],["L",21.9621993,22.9207709],["C",22.6709622,22.9207709,23.0474925,22.5544031,23.0917902,21.8216676],["L",23.0962199,21.6702355],["L",23.0962199,18.0899358],["C",23.0962199,17.0735189,23.5658648,16.3768737,24.5051546,16],["C",23.6245704,15.6573876,23.1567601,15.0236884,23.1017236,14.0989026],["L",23.0962199,13.9100642],["L",23.0962199,10.3468951],["C",23.0962199,9.5546039,22.7639873,9.1336991,22.0995221,9.0841809],["L",21.9621993,9.0792291],["L",21,9.0792291],["L",21,8],["L",22.185567,8],["Z"]],attr:{fill:"#595959","stroke-width":0}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"UML"},{name:"activity-class",width:120,height:60,textarea:{region:function(e,t){var n=.128*e;return{minX:n+4,minY:4,maxX:e-n-4,maxY:t-4}}},outline:{name:"rect",x:0,y:0,width:120,height:60,rx:4,ry:4},scene:[{d:[["M",105,0],["L",105,60],["M",15,60],["L",15,0]]}],thumb:[{d:[["M",6.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]},{d:[{name:"M",x:9,y:9},{name:"L",x:9,y:23}]},{d:[{name:"M",x:23,y:9},{name:"L",x:23,y:23}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"UML"},{name:"component",width:120,height:80,isClip:!1,textarea:{region:function(e,t){return{minX:28,minY:4,maxX:e-4,maxY:t-4}}},outline:{path:function(e,t){var n=e-12,r=(n-12)/2,a=t/2,i=r<4?r:4,o=a<4?a:4,c=2,l=14;if(t<80){var s=t/80;return[["M",+i+12,0],["l",n-2*i,0],["a",i,o,0,0,1,i,o],["l",0,t-2*o],["a",i,o,0,0,1,-i,o],["l",2*i-n,0],["a",i,o,0,0,1,-i,-o],["l",0,o-(l*=s)],["l",(c*=s)-12,0],["a",c,c,0,0,1,-c,-c],["l",0,2*c-l],["a",c,c,0,0,1,c,-c],["l",12-c,0],["l",0,-24*s],["l",c-12,0],["a",c,c,0,0,1,-c,-c],["l",0,2*c-l],["a",c,c,0,0,1,c,-c],["l",12-c,0],["l",0,o-l],["a",i,o,0,0,1,i,-o],["z"]]}return[["M",+i+12,0],["l",n-2*i,0],["a",i,o,0,0,1,i,o],["l",0,t-2*o],["a",i,o,0,0,1,-i,o],["l",2*i-n,0],["a",i,o,0,0,1,-i,-o],["l",0,-(t-o-(80-l))],["l",c-12,0],["a",c,c,0,0,1,-c,-c],["l",0,2*c-l],["a",c,c,0,0,1,c,-c],["l",12-c,0],["l",0,-(80-4*l)],["l",c-12,0],["a",c,c,0,0,1,-c,-c],["l",0,2*c-l],["a",c,c,0,0,1,c,-c],["l",12-c,0],["l",0,o-l],["a",i,o,0,0,1,i,-o],["z"]]}},scene:[{path:function(e,t){var n=2,r=14;if(t<80){var a=t/80;return[["M",12,r*=a],["l",12-(n*=a),0],["a",n,n,0,0,1,n,n],["l",0,r-2*n],["a",n,n,0,0,1,-n,n],["l",n-12,0],["M",12,t-2*r],["l",12-n,0],["a",n,n,0,0,1,n,n],["l",0,r-2*n],["a",n,n,0,0,1,-n,n],["l",n-12,0]]}return[["M",12,r],["l",12-n,0],["a",n,n,0,0,1,n,n],["l",0,r-2*n],["a",n,n,0,0,1,-n,n],["l",n-12,0],["M",12,80-2*r],["l",12-n,0],["a",n,n,0,0,1,n,n],["l",0,r-2*n],["a",n,n,0,0,1,-n,n],["l",n-12,0]]},attr:{fill:"transparent"}}],thumb:[{d:[["M",8.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",8.4,23],["C",8.1790861,23,8,22.8209139,8,22.6],["L",8,9.4],["C",8,9.1790861,8.1790861,9,8.4,9],["Z"]]},{d:[["M",6.4,12],["L",11.6,12],["C",11.8209139,12,12,12.1790861,12,12.4],["L",12,13.6],["C",12,13.8209139,11.8209139,14,11.6,14],["L",6.4,14],["C",6.1790861,14,6,13.8209139,6,13.6],["L",6,12.4],["C",6,12.1790861,6.1790861,12,6.4,12],["Z"]]},{d:[["M",6.4,18],["L",11.6,18],["C",11.8209139,18,12,18.1790861,12,18.4],["L",12,19.6],["C",12,19.8209139,11.8209139,20,11.6,20],["L",6.4,20],["C",6.1790861,20,6,19.8209139,6,19.6],["L",6,18.4],["C",6,18.1790861,6.1790861,18,6.4,18],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"UML"},{name:"multiplicity",width:110,height:70,isClip:!1,textarea:{region:function(e,t){return{minX:4,minY:.15*t+4,maxX:e-.1*e-4,maxY:t-4}}},outline:{d:[["M",106,0],["C",108.209139,-0,110,1.790861,110,4],["L",110,56],["C",110,58.209139,108.209139,60,106,60],["L",100,60],["L",100,66],["C",100,68.209139,98.209139,70,96,70],["L",4,70],["C",1.790861,70,0,68.209139,0,66],["L",0,14],["C",-0,11.790861,1.790861,10,4,10],["L",10,10],["L",10,4],["C",10,1.790861,11.790861,0,14,0],["L",106,0],["Z"]]},scene:[{d:[["M",10,10],["L",96,10],["C",98.209139,10,100,11.790861,100,14],["L",100,60]],attr:{fill:"transparent"}}],thumb:[{d:[["M",9.4,9],["L",26.6,9],["C",26.8209139,9,27,9.1790861,27,9.4],["L",27,19.6],["C",27,19.8209139,26.8209139,20,26.6,20],["L",9.4,20],["C",9.1790861,20,9,19.8209139,9,19.6],["L",9,9.4],["C",9,9.1790861,9.1790861,9,9.4,9],["Z"]]},{d:[["M",6.4,12],["L",23.6,12],["C",23.8209139,12,24,12.1790861,24,12.4],["L",24,22.6],["C",24,22.8209139,23.8209139,23,23.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,12.4],["C",6,12.1790861,6.1790861,12,6.4,12],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"UML"},{name:"note",width:120,height:80,outline:{d:[["M",120,79],["C",120,79.5522847,119.552285,80,119,80],["L",1,80],["C",.4477153,80,0,79.5522847,0,79],["L",0,1],["C",0,.4477153,.4477153,0,1,0],["L",100,0],["L",120,20],["L",120,79],["Z"]]},scene:[{d:[["M",120,20],["L",100.5,20],["C",100.223858,20,100,19.7761424,100,19.5],["L",100,0],["L",100,0]],attr:{fill:"transparent"}}],thumb:[{d:[["M",6.4,9],["L",21,9],["L",21,9],["L",25.8828427,13.8828427],["C",25.9578573,13.9578573,26,14.0595988,26,14.1656854],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]},{d:[["M",21,9],["L",21,13.6],["C",21,13.8209139,21.1790861,14,21.4,14],["L",26,14],["L",26,14]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"UML"},{name:"history-pseudostate",width:40,height:40,textarea:{region:ui},outline:{name:"ellipse",cx:20,cy:20,rx:20,ry:20},scene:[{d:[["M",12,20],["L",28,20],["M",12,11],["L",12,29],["M",28,11],["L",28,29]]}],thumb:[{name:"ellipse",cx:16,cy:16,rx:7,ry:7},{d:[["M",18.319148900000002,19.9993969],["C",18.567375900000002,19.991959100000003,18.742907799999998,19.930596899999998,18.845744699999997,19.8153104],["C",18.9485816,19.700023899999998,19,19.568002200000002,19,19.4192454],["L",19,19.4192454],["L",19,12.5801515],["C",19,12.4313947,18.9450355,12.2975136,18.8351064,12.1785082],["C",18.7251773,12.0595027,18.5460993,12,18.2978723,12],["C",18.035460999999998,12,17.856383,12.0632216,17.7606383,12.1896649],["C",17.6648936,12.3161082,17.617021299999998,12.4462704,17.617021299999998,12.5801515],["L",17.617021299999998,12.5801515],["L",17.617021299999998,15.2689307],["L",14.382978699999999,15.2689307],["L",14.382978699999999,12.5801515],["C",14.382978699999999,12.4313947,14.3315603,12.2975136,14.2287234,12.1785082],["C",14.1258865,12.0595027,13.9503546,12,13.7021277,12],["C",13.4539007,12,13.2748227,12.0632216,13.1648936,12.1896649],["C",13.0549645,12.3161082,13,12.4462704,13,12.5801515],["L",13,12.5801515],["L",13,19.4192454],["C",13,19.553126499999998,13.0549645,19.6851482,13.1648936,19.8153104],["C",13.2748227,19.945472600000002,13.4539007,20.0068348,13.7021277,19.9993969],["C",13.9503546,19.991959100000003,14.1258865,19.930596899999998,14.2287234,19.8153104],["C",14.3315603,19.700023899999998,14.382978699999999,19.568002200000002,14.382978699999999,19.4192454],["L",14.382978699999999,19.4192454],["L",14.382978699999999,16.5184878],["L",17.617021299999998,16.5184878],["L",17.617021299999998,19.4192454],["C",17.617021299999998,19.553126499999998,17.6719858,19.6851482,17.7819149,19.8153104],["C",17.891844,19.945472600000002,18.070922,20.0068348,18.319148900000002,19.9993969],["Z"]],attr:{fill:"#595959","stroke-width":0}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"UML"},{name:"entity",category:"UML",width:50,height:50,isClip:!1,textarea:{region:ui},outline:{name:"ellipse",cx:25,cy:25,rx:25,ry:25},scene:[{d:[{name:"M",x:0,y:50},{name:"L",x:50,y:50}]}],thumb:[{d:[{name:"M",x:8,y:22},{name:"L",x:24,y:22}]},{name:"ellipse",cx:16,cy:16,rx:6,ry:6}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"activity",category:"UML",width:120,height:60,outline:{path:function(e,t){return di(e,t,Math.min(e,t)/2)}},scene:[],thumb:[{d:[["M",11,10],["L",21,10],["C",24.3137085,10,27,12.6862915,27,16],["C",27,19.3137085,24.3137085,22,21,22],["L",11,22],["C",7.6862915,22,5,19.3137085,5,16],["C",5,12.6862915,7.6862915,10,11,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.11,y:.11,name:"NW"},{x:.11,y:.89,name:"SW"},{x:.89,y:.11,name:"NE"},{x:.89,y:.89,name:"SE"}]}],po=[{name:"swimlane-vertical",category:"swimlane",type:"swimlane",number:3,htmls:['<div style="text-align:center;"><span style="font-weight:bold;">Lane 1</span></div>','<div style="text-align:center;"><span style="font-weight:bold;">Lane 2</span></div>','<div style="text-align:center;"><span style="font-weight:bold;">Lane 3</span></div>'],width:450,widths:[1/3,2/3],height:600,heights:[.1],outline:{path:function(e,t){return di(e,t,0)}},scene:[],thumb:[{d:[["M",6.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]},{d:[{name:"M",x:12.5,y:9},{name:"L",x:12.5,y:23}]},{d:[{name:"M",x:19.5,y:9},{name:"L",x:19.5,y:23}]},{d:[{name:"M",x:6,y:12.5},{name:"L",x:26,y:12.5}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"swimlane-horizontal",category:"swimlane",type:"swimlane",number:3,htmls:['<div style="text-align:center;"><span style="font-weight:bold;">Lane 1</span></div>','<div style="text-align:center;"><span style="font-weight:bold;">Lane 2</span></div>','<div style="text-align:center;"><span style="font-weight:bold;">Lane 3</span></div>'],width:600,widths:[.1],height:400,heights:[1/3,2/3],outline:{path:function(e,t){return di(e,t,0)}},scene:[],thumb:[{d:[["M",6.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]},{d:[{name:"M",x:9.5,y:9},{name:"L",x:9.5,y:23}]},{d:[{name:"M",x:6,y:13.5},{name:"L",x:26,y:13.5}]},{d:[{name:"M",x:6,y:18.5},{name:"L",x:26,y:18.5}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],mo=[].concat(N()(co),N()(lo),N()(fo),N()([{name:"er-entity",width:120,height:70,outline:{name:"rect",x:0,y:0,width:120,height:70,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"ER"},{name:"weak-entity",width:120,height:70,outline:{name:"rect",x:0,y:0,width:120,height:70,rx:1,ry:1},scene:[{name:"rect",x:5,y:5,width:110,height:60,rx:1,ry:1,attr:{fill:"transparent"}}],thumb:[{d:[["M",6.4,9],["L",25.6,9],["C",25.8209139,9,26,9.1790861,26,9.4],["L",26,22.6],["C",26,22.8209139,25.8209139,23,25.6,23],["L",6.4,23],["C",6.1790861,23,6,22.8209139,6,22.6],["L",6,9.4],["C",6,9.1790861,6.1790861,9,6.4,9],["Z"]]},{d:[["M",8.4,11],["L",23.6,11],["C",23.8209139,11,24,11.1790861,24,11.4],["L",24,20.6],["C",24,20.8209139,23.8209139,21,23.6,21],["L",8.4,21],["C",8.1790861,21,8,20.8209139,8,20.6],["L",8,11.4],["C",8,11.1790861,8.1790861,11,8.4,11],["Z"]],attr:{fill:"transparent"}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"ER"},{name:"derived-attribute",width:120,height:70,outline:{d:[["M",60,70],["C",93.137085,70,120,54.3299662,120,35],["C",120,15.6700338,93.137085,0,60,0],["C",26.862915,0,0,15.6700338,0,35],["C",0,54.3299662,26.862915,70,60,70],["Z"]],attr:{stroke:{style:"dash"}}},scene:[],thumb:[{d:[["M",16,24],["C",22.0751322,24,27,20.418278,27,16],["C",27,11.581722,22.0751322,8,16,8],["C",9.9248678,8,5,11.581722,5,16],["C",5,20.418278,9.9248678,24,16,24],["Z"]],attr:{"stroke-dasharray":"2"}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"ER"},{name:"attribute",width:120,height:70,outline:{name:"ellipse",cx:60,cy:35,rx:60,ry:35},scene:[],thumb:[{name:"ellipse",cx:16,cy:16,rx:11,ry:8}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"ER"},{name:"multivalued-attribute",width:120,height:70,outline:{name:"ellipse",cx:60,cy:35,rx:60,ry:35},scene:[{name:"ellipse",cx:60,cy:35,rx:55,ry:30,attr:{fill:"transparent"}}],thumb:[{name:"ellipse",cx:16,cy:16,rx:11,ry:8},{name:"ellipse",cx:16,cy:16,rx:9,ry:6,attr:{fill:"transparent"}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"ER"},{name:"relationship",width:120,height:70,outline:{name:"polygon",points:[{x:60,y:0},{x:120,y:35},{x:60,y:70},{x:0,y:35}]},scene:[],thumb:[{d:[["M",16.2309401,8.1632993],["L",26.8518283,15.6734014],["C",27.0322037,15.8009461,27.0750315,16.0505647,26.9474868,16.2309401],["C",26.921263,16.2680261,26.8889143,16.3003748,26.8518283,16.3265986],["L",16.2309401,23.8367007],["C",16.0925332,23.9345692,15.9074668,23.9345692,15.7690599,23.8367007],["L",5.1481717,16.3265986],["C",4.9677963,16.1990539,4.9249685,15.9494353,5.0525132,15.7690599],["C",5.078737,15.7319739,5.1110857,15.6996252,5.1481717,15.6734014],["L",15.7690599,8.1632993],["C",15.9074668,8.0654308,16.0925332,8.0654308,16.2309401,8.1632993],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"ER"},{name:"weak-relationship",width:120,height:70,outline:{name:"polygon",points:[{x:60,y:0},{x:120,y:35},{x:60,y:70},{x:0,y:35}]},scene:[{name:"polygon",points:[{x:60.4285714,y:5},{x:111.857143,y:35},{x:60.4285714,y:65},{x:9,y:35}],attr:{fill:"transparent"}}],thumb:[{d:[["M",16.2309401,10.1632993],["L",24.0234012,15.6734014],["C",24.2037766,15.8009461,24.2466044,16.0505647,24.1190597,16.2309401],["C",24.0928359,16.2680261,24.0604872,16.3003748,24.0234012,16.3265986],["L",16.2309401,21.8367007],["C",16.0925332,21.9345692,15.9074668,21.9345692,15.7690599,21.8367007],["L",7.9765988,16.3265986],["C",7.7962234,16.1990539,7.7533956,15.9494353,7.8809403,15.7690599],["C",7.9071641,15.7319739,7.9395128,15.6996252,7.9765988,15.6734014],["L",15.7690599,10.1632993],["C",15.9074668,10.0654308,16.0925332,10.0654308,16.2309401,10.1632993],["Z"]]},{d:[["M",16.2309401,8.1632993],["L",26.8518283,15.6734014],["C",27.0322037,15.8009461,27.0750315,16.0505647,26.9474868,16.2309401],["C",26.921263,16.2680261,26.8889143,16.3003748,26.8518283,16.3265986],["L",16.2309401,23.8367007],["C",16.0925332,23.9345692,15.9074668,23.9345692,15.7690599,23.8367007],["L",5.1481717,16.3265986],["C",4.9677963,16.1990539,4.9249685,15.9494353,5.0525132,15.7690599],["C",5.078737,15.7319739,5.1110857,15.6996252,5.1481717,15.6734014],["L",15.7690599,8.1632993],["C",15.9074668,8.0654308,16.0925332,8.0654308,16.2309401,8.1632993],["Z"]],attr:{fill:"transparent"}}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"ER"},{name:"generalization",width:66,height:68,isClip:!1,outline:{d:[["M",33,54],["L",1,14],["L",65,14],["L",33,54],["Z"],["M",33,54],["L",33,68],["M",33,0],["L",33,14]]},scene:[],thumb:[{d:[["M",16.5,22],["L",7,11],["L",26,11],["L",16.5,22],["Z"],["M",16.5,22],["L",16.5,26],["M",16.5,7],["L",16.5,11]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"ER"},{name:"total-generalization",width:66,height:68,isClip:!1,outline:{d:[["M",33,54],["L",1,14],["L",65,14],["L",33,54],["Z"],["M",33,54],["L",33,68],["M",23,0],["L",23,14],["M",43,0],["L",43,14]]},scene:[],thumb:[{d:[["M",16.5,22],["L",7,11],["L",26,11],["L",16.5,22],["Z"],["M",11.5,7],["L",11.5,11],["M",20.5,7],["L",20.5,11],["M",16.5,22],["L",16.5,26]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],category:"ER"}]),N()(po));function yo(e){return"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent('<?xml version="1.0" encoding="utf-8"?>'+e)))}var go=["http:","https:","data:","dingtalk:","ftp:","mailto:","blob:"];function vo(e){return function(e){return"string"==typeof e&&!(e=e.toLowerCase()).startsWith("data:text/html")&&(!!go.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}(e)?e:""}var bo=new ve.a.FilterXSS({onIgnoreTag:function(){return""},css:{whiteList:cr},whiteList:{p:["style","id"],a:["href","title","target","style"],b:["style"],i:["style"],span:["style"],br:[],div:["style"]},onTag:function(e,t,n){var r=n.isClosing;if("a"===e&&!r&&"string"==typeof t){var a=t.match(/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/);if(!a||!vo(a[2]))return""}},onTagAttr:function(e,t,n){if("a"===e&&"href"===t){var r=vo(n);return r?"".concat(t,'="').concat(r,'"'):""}}});function xo(e){if(e&&e.body){var t=[];e.body.forEach((function(e){St(e,(function(e,n){e.isPlaceholder?t.push({model:e,parent:n}):(function(e){if(e&&e.layout){var t=e.layout.type,n=e.layout,r=n.quadrants,a=n.direction;"standrad"===t?(1===(r=Array.isArray(r)?r.length:Number(r))&&(Yt(a,[-1,0])||Yt(a,[0,-1])?e.layout.quadrantConstraint=[2]:e.layout.quadrantConstraint=[1]),Yt(a,[-1,0])?e.layout.direction=[1,0]:Yt(a,[0,-1])&&(e.layout.direction=[0,1])):"indent"===t&&(Yt(a,[1,0])?e.layout.quadrantConstraint=[1]:Yt(a,[-1,0])&&(e.layout.quadrantConstraint=[2]),e.layout.direction=[1,1])}}(e),function(e){if("line"===e.type&&e.children&&delete e.children,e.image&&e.image.src){var t=vo(e.image.src);e.image.src=bo.process(t)}}(e))}))})),t.forEach((function(t){var n=t.model,r=t.parent,a=r?r.children:e.body,i=a.indexOf(n);i>-1&&a.splice(i,1)}))}}var ko=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),c()(this,"onKey",void 0),c()(this,"offKey",void 0),c()(this,"events",void 0),c()(this,"destroyed",void 0),this.onKey="on",this.offKey="off",this.events=[],Object.assign(this,t)}return g()(e,[{key:"bind",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e===window||e instanceof HTMLElement||e instanceof SVGElement?"addEventListener":r.onKey)||this.onKey;e[a](t,n);var i={object:e,eventName:t,callback:n,options:r};return this.events.push(i),i}},{key:"_unbind",value:function(e){var t=e.object,n=e.eventName,r=e.callback,a=e.options;if(t[(t===window||t instanceof HTMLElement||t instanceof SVGElement?"removeEventListener":a.offKey)||this.offKey](n,r),this.events){var i=this.events.indexOf(e);-1!==i&&this.events.splice(i,1)}}},{key:"unbind",value:function(e){var t=this;e?this._unbind(e):this.events.concat([]).forEach((function(e){t._unbind(e)}))}},{key:"destroy",value:function(){this.events&&this.unbind(),this.events=[],this.destroyed=!0}}]),e}(),wo=function(){function e(t){if(m()(this,e),c()(this,"default",void 0),c()(this,"anchors",void 0),c()(this,"stem",void 0),c()(this,"root",void 0),c()(this,"type",void 0),c()(this,"model",void 0),c()(this,"zIndex",void 0),c()(this,"matrix",void 0),c()(this,"graphicGroup",void 0),c()(this,"state",void 0),c()(this,"diagram",void 0),c()(this,"eventHelper",void 0),c()(this,"destroyed",void 0),c()(this,"cellMap",void 0),c()(this,"parent",void 0),c()(this,"depth",void 0),c()(this,"isStem",void 0),c()(this,"isRoot",void 0),c()(this,"isCell",void 0),c()(this,"cache",void 0),c()(this,"penetratedKeys",void 0),c()(this,"width",void 0),c()(this,"height",void 0),!t.diagram)throw new Error("cell requires diagram!");if(!t.cellMap)throw new Error("cell requires cellMap")}return g()(e,[{key:"init",value:function(e){Object.assign(this,e),this.stem=this.stem||this,this.root=this.root||this,this.type=this.stem.model.type,this.zIndex=this.model.zIndex||0}},{key:"setDefault",value:function(){}},{key:"get",value:function(e){return d()(this[e])}},{key:"draw",value:function(){}},{key:"percentage2Relative",value:function(e){return[(e=ei(e)).x*this.width,e.y*this.height]}},{key:"relative2Percentage",value:function(e){return[(e=ei(e)).x/this.width,e.y/this.height]}},{key:"canvas2percentage",value:function(e){return e=ei(e),this.relative2Percentage(this.canvas2Relative(e))}},{key:"percentage2Canvas",value:function(e){return this.relative2Canvas(this.percentage2Relative(e))}},{key:"relative2Canvas",value:function(e){e=ei(e);var t=w.c.transformMat3([],[e.x,e.y,1],this.matrix),n=b()(t,2);return{x:n[0],y:n[1]}}},{key:"canvas2Relative",value:function(e){e=ei(e);var t=w.c.transformMat3([],[e.x,e.y,1],w.a.invert([],this.matrix)),n=b()(t,2);return{x:n[0],y:n[1]}}},{key:"capture",value:function(e){var t=this.graphicGroup,n=this.state;!0===e?t.css({"pointer-events":"auto"}):!1===e&&t.css({"pointer-events":"none"}),n.capture=e}},{key:"rotateTo",value:function(e){var t=[1,0,0,0,1,0,0,0,1];w.a.fromRotation(t,e),this.matrix[0]=t[0],this.matrix[1]=t[1],this.matrix[3]=t[3],this.matrix[4]=t[4],this.graphicGroup.update({matrix:this.matrix})}},{key:"getBBox",value:function(){var e=this.percentage2Canvas([0,0]),t=this.percentage2Canvas([1,0]),n=this.percentage2Canvas([0,1]),r=this.percentage2Canvas([1,1]),a=Math.min(e.x,t.x,n.x,r.x),i=Math.min(e.y,t.y,n.y,r.y),o=Math.max(e.x,t.x,n.x,r.x),c=Math.max(e.y,t.y,n.y,r.y);return{minX:a,minY:i,maxX:o,maxY:c,x:a,y:i,width:o-a,height:c-i}}},{key:"eventDelegation",value:function(){}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"getChildren",value:function(){var e=this.cellMap;return(this.model.children||[]).map((function(t){return e[t.id]}))}},{key:"getAllChildren",value:function(){var e=[];return this.deepEachWithoutSelf((function(t){return e.push(t),!0})),e}},{key:"getAllCellsByZIndex",value:function(){var e=this.getAllCells();return e.sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e}},{key:"getAllCells",value:function(){var e=this.cellMap,t=[];return St(this.model,(function(n){return t.push(e[n.id]),!0})),t}},{key:"getSiblings",value:function(){var e=this,t=this.cellMap;return this.parent?this.parent.model.children.filter((function(t){return t.id!==e.model.id})).map((function(e){return t[e.id]})):[]}},{key:"delegateEvent",value:function(e,t,n){var r=this,a=this.eventHelper,i=this.diagram;a.bind(e,t,(function(e){i.emit(n,r.getEventObject(e))}))}},{key:"hide",value:function(){this.graphicGroup.css({display:"none"}),this.state.visible=!1}},{key:"show",value:function(){this.graphicGroup.css({display:""}),this.state.visible=!0}},{key:"updateState",value:function(){}},{key:"select",value:function(){this.state.selected=!0,this.state.highlight=!1,this.updateState()}},{key:"unSelect",value:function(){this.state.selected=!1,this.updateState()}},{key:"highlight",value:function(){this.state.highlight=!0,this.updateState()}},{key:"unHighlight",value:function(){this.state.highlight=!1,this.updateState()}},{key:"toBack",value:function(){this.graphicGroup.toBack()}},{key:"toFront",value:function(){this.graphicGroup.toFront()}},{key:"forward",value:function(){this.graphicGroup.forward()}},{key:"backward",value:function(){this.graphicGroup.backward()}},{key:"getZIndex",value:function(){var e=this.graphicGroup.getZIndex();return Ee()(e)?e:-1}},{key:"getNth",value:function(){return this.parent?this.parent.model.children.indexOf(this.model):0}},{key:"forEach",value:function(e){var t=this.cellMap;this.model.children.forEach((function(n,r){e(t[n.id],r)}))}},{key:"deepEach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e.children},n=this.cellMap;St(this.model,(function(t){return e(n[t.id])}),t)}},{key:"deepEachWithoutSelf",value:function(e){var t=this.cellMap;Rt(this.model,(function(n){return e(t[n.id])}))}},{key:"render",value:function(){}},{key:"update",value:function(e){this.updateModel(e),this.draw()}},{key:"updateModel",value:function(e){e&&(f()(this.model,e,(function(e,t){if(Array.isArray(e))return t})),this._normalize(),this._merge())}},{key:"_normalize",value:function(){var e=this;Object.keys(this.model).forEach((function(t){var n=e.model[t];null==n?e.model[t]=void 0:s()(n)&&(Object.values(n).every((function(e){return null==e}))?e.model[t]=void 0:Object.keys(n).forEach((function(r){null==n[r]&&(e.model[t][r]=void 0)})))}))}},{key:"_merge",value:function(){var e=this,t=this.model,n=this.penetratedKeys;Object.keys(t).filter((function(e){return n.includes(e)})).forEach((function(n){var r=t[n],a=e.default&&d()(e.default[n]);s()(r)&&a?Object.keys(r).forEach((function(t){var i=r[t];e[n][t]=null==i?a[t]:i})):e[n]=null==r?a:r}))}},{key:"isCacheStale",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return!we()(e.cache[t],e[t])}))}},{key:"drawPosition",value:function(){}},{key:"drawCollapse",value:function(){}},{key:"drawInherit",value:function(){}},{key:"destroy",value:function(){var e;null===(e=this.diagram)||void 0===e||e.cleanDomCellMap(this.graphicGroup.rendererElement),this.eventHelper.destroy(),this.graphicGroup.destroy(),this.destroyed=!0}}],[{key:"getDefaultProps",value:function(){return{model:{},parent:null,computedProps:{},penetratedKeys:[],anchors:[],state:{visible:!0,capture:!0,selected:!1,beginEdit:!1},cache:{},matrix:[1,0,0,0,1,0,0,0,1],isCell:!0,graphicGroup:new xr,eventHelper:new ko}}}]),e}();function Co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(wo,"className","Cell"),c()(wo,"mergeKeys",["penetratedKeys","Subcells"]),c()(wo,"Line",void 0);var Eo=function(){function e(t){m()(this,e),c()(this,"autoSelect",!0),c()(this,"diagram",void 0),this.diagram=null==t?void 0:t.diagram,Object.assign(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}return g()(e,[{key:"commandName",get:function(){return this.constructor.className}},{key:"execute",value:function(e){}},{key:"forward",value:function(){}},{key:"backward",value:function(){}},{key:"select",value:function(e){var t=this.diagram;this.autoSelect&&(e&&e.length>0?t.selector.select(e):(t.selector.clear(),t.tryFocus()))}}],[{key:"enable",value:function(e){return!0}}]),e}();c()(Eo,"className","Command"),c()(Eo,"isModelChange",!0),c()(Eo,"Update",void 0),c()(Eo,"Add",void 0);var Oo=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"map",new Map),e}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.model,n=void 0===t?{}:t,r=this.cellOptions,a=Yn(n,void 0===r?{}:r);a[0].forEach((function(e){e.id||(e.id=Object(q.a)())}));var i=e.add.apply(e,N()(a));i.forEach((function(t,n){Object.assign(a[1][n],e.getCellOptions(t))})),this.changeArguments=a,this.select(i)}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.add.apply(e,N()(t));this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id).parent;e.remove(t[0].map((function(e){return e.id}))),this.select(n&&n.model.id)}}]),n}();c()(Oo,"className","Add");var Po=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"getCells",value:function(){var e=this.changeArguments,t=this.diagram,n=e[0].map((function(e){return t.find(e)}));if(n.some((function(e){return!e})))throw new Error("can not find the cell");return n}},{key:"execute",value:function(){var e=this.diagram,t=this.model,n=this.cellOptions,r=void 0===n?{}:n,a=this.originModels,o=this.id;Array.isArray(o)||(o=[o]),"object"===i()(o[0])&&(o=o.map((function(e){return e.model.id})));var c=Yn(o,t,r);this.changeArguments=c;var l=this.getCells(),u=c[1];this.originModels=a||l.map((function(e,t){var n=u[t];return Object.keys(n).reduce((function(e,r){if("children"===r)return e;var a=n[r],i=l[t].model[r];return s()(a)?e[r]=Object.keys(a).reduce((function(e,t){var n=i&&i[t];return e[t]=null==n?null:n,e}),{}):e[r]=null==i?null:i,e}),{})})),this.originCellOptions=l.map((function(t){return e.getCellOptions(t)}));for(var d=0;d<u.length;d++)Qt(this.originModels[d],u[d]);e.update(l,u,c[2]),this.select(l)}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.getCells(),r=t[1];e.update(n,r,t[2]),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.originModels,n=this.originCellOptions,r=this.getCells();e.update(r,t,n),this.select(r)}}]),n}();c()(Po,"className","Update");var Mo=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"commands",void 0),e}return g()(n,[{key:"execute",value:function(){var e=this.commands,t=e.length;e.forEach((function(e,n){e.autoSelect=n===t-1,e.execute()}))}},{key:"forward",value:function(){var e=this.commands,t=e.length;e.forEach((function(e,n){e.autoSelect=n===t-1,e.forward()}))}},{key:"backward",value:function(){for(var e=this.commands,t=e.length-1;t>=0;t--){var n=e[t];n.autoSelect=0===t,n.backward()}}}]),n}();c()(Mo,"className","Compound");var jo=function(e){j()(n,Mo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){}}]),n}();c()(jo,"className","NoneExecuteCompound");var So=function(e){return e.reduce((function(e,t){return t.isStem?e.concat(t.getChildren()):e.concat(t)}),[])};var Ro=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.onlyCell,n=t?[t]:e.selector.selections,r=So(e.deduplicate(n)).filter((function(e){return e.canCollapse()}));e.update(r,{collapsed:!0}),e.selector.select(r),this.cells=r.map((function(e){return e.model.id}))}},{key:"backward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:null}),e.selector.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:!0}),e.selector.select(t)}}]),n}();c()(Ro,"className","Collapse"),c()(Ro,"enable",(function(e){var t=e.selector.selections;return So(e.deduplicate(t)).some((function(e){return e.canCollapse()}))}));var Lo=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.onlyCell,n=t?[t]:e.selector.selections,r=So(e.deduplicate(n)).filter((function(e){return!e.canCollapse()&&e.canExpand()}));e.update(r,{collapsed:null}),e.selector.select(r),this.cells=r.map((function(e){return e.model.id}))}},{key:"backward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:!0}),e.selector.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:null}),e.selector.select(t)}}]),n}();c()(Lo,"className","Expand"),c()(Lo,"enable",(function(e){var t=e.selector.selections;return So(e.deduplicate(t)).some((function(e){return!e.canCollapse()&&e.canExpand()}))}));var Ao=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){this.diagram.command.undo()}}]),n}();c()(Ao,"className","Undo"),c()(Ao,"enable",(function(e){return e.command.index>=0}));var Bo=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){this.diagram.command.redo()}}]),n}();c()(Bo,"className","Redo"),c()(Bo,"enable",(function(e){var t=e.command;return t.index<t.commands.length-1}));var No=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram.viewport;e.setViewport(e.zoom+.2)}}]),n}();c()(No,"className","ZoomIn"),c()(No,"isModelChange",!1),c()(No,"enable",(function(e){var t=e.viewport;return t.zoom+.2<=t.maxZoom}));var Do=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram.viewport;e.setViewport(e.zoom-.2)}}]),n}();c()(Do,"className","ZoomOut"),c()(Do,"isModelChange",!1),c()(Do,"enable",(function(e){var t=e.viewport;return t.zoom-.2>=t.minZoom}));var Io=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this,e);var a=P()(r).diagram.viewport;return r.queue=!1,r.zoom=e.zoom<a.minZoom&&a.minZoom||e.zoom>a.maxZoom&&a.maxZoom||e.zoom,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.zoom;e.viewport.setViewport(t)}}]),n}();c()(Io,"className","ZoomTo"),c()(Io,"isModelChange",!1);var To=function(){function e(){m()(this,e),this.clipboardData={setData:function(e,t){this[e]=t},getData:function(e){return this[e]},files:[]}}return g()(e,[{key:"preventDefault",value:function(){}}]),e}();function _o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zo(e,t){return Ft(e.reduce((function(e,n){return Kn(n)?e.push.apply(e,[n].concat(N()(n.children),N()(n.contain.map(t.find.bind(t)).filter((function(e){return e}))))):Jn(n)?e.push.apply(e,[n].concat(N()(n.children))):Wn(n)?n.deepEachWithoutSelf((function(t){e.push(t)})):e.push(n),e}),[]))}function Fo(){return(Fo=X()(H.a.mark((function e(t,n){var r,a,i,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.exporter.blob("png",{cells:zo(t.selector.selections,t)});case 2:r=e.sent,a=new Blob([n.text],{type:"text/plain"}),i=new Blob([n.html],{type:"text/html"}),o=new window.ClipboardItem({"text/html":i,"text/plain":a,"image/png":r}),window.navigator.clipboard.write([o]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(e,t){t.importer.caches={};var n=t.selector.selections;if(0!==n.length){e.preventDefault();var a=t.exporter.clipboard(n);try{var i,o,c;document.hasFocus()&&null!==(i=window)&&void 0!==i&&null!==(o=i.navigator)&&void 0!==o&&null!==(c=o.clipboard)&&void 0!==c&&c.write&&W.ua.chrome&&function(e,t){Fo.apply(this,arguments)}(t,a)}catch(e){console.warn("Asynchronous clipboard is not supported")}e.clipboardData.setData("text/html",a.html),e.clipboardData.setData("text/plain",a.text),r.LocalStorageUtil.setItem("lake_diagram_clipboard_data",JSON.stringify(qo(qo({},a),{},{recordTime:Date.now()})))}}var Xo=new To;function Go(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!document.execCommand(e))if("paste"!==e)t.command.execute(e.charAt(0).toUpperCase()+e.slice(1),{e:Xo});else{var i=r.LocalStorageUtil.getItem("lake_diagram_clipboard_data");if(i){i=JSON.parse(i);var o=W.ua.macos?"⌘+V":"Ctrl+V";a&&Oe.a.info(ar("已粘贴当前页面复制的内容，如需粘贴页面外内容请使用 ")+o+ar(" 粘贴")),Xo.clipboardData.setData("text/html",i.html),Xo.clipboardData.setData("text/plain",i.text),t.command.execute("Paste",{e:Xo,focusPoint:n})}}}window.__lake_diagram_board_custom_clipboard_event=Xo;var Ho=Object.freeze({__proto__:null,getCopyImageCells:zo,handleCopy:Yo,customClipboardEvent:Xo,executeClipboardCommand:Go});function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Vo=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({queue:!1},e))}return g()(n,[{key:"execute",value:function(){Yo(this.e,this.diagram)}}]),n}();c()(Vo,"className","Copy"),c()(Vo,"isModelChange",!1);var Uo=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.e,n=this.focusPoint,r=t.clipboardData.getData("text/html"),a=t.clipboardData.getData("text/plain"),i=Array.from(t.clipboardData.files),o={text:a,html:r};i.length>0&&(""===r&&/^.+\.\w+$/.test(a)||""===a&&/^(<meta.+?>)?<img.+?>$/.test(r)||!a||!r)&&(o.files=i);var c=e.importer.clipboard(o,n);c?(this.handler=c,s()(c)&&(this.selectedCellId=e.selector.selections.map((function(e){return e.model.id})),e.destroyed||(e.signal.beforePasteSelect=!0,e.selector.select(this.handler.body.map((function(e){return e.id}))),e.signal.beforePasteSelect=!1))):this.queue=!1}},{key:"forward",value:function(){var e=this.handler,t=this.diagram;e&&(e.execute(),t.selector.select(this.handler.body.map((function(e){return e.id}))))}},{key:"backward",value:function(){var e=this.handler,t=this.diagram,n=this.selectedCellId;e&&(e.body.forEach((function(e){t.remove(e.id)})),n&&t.selector.select(n))}}]),n}();function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(Uo,"className","Paste");var Ko=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){return m()(this,n),t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({queue:!1},e))}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.command.execute("ZoomTo",{zoom:1}),e.viewport.focus([t.x,t.y])}}]),n}();c()(Ko,"className","FocusSelection"),c()(Ko,"enable",(function(e){return 1===e.selector.selections.length}));var Qo=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.id,n=this.endHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r)}},{key:"forward",value:function(){var e=this.diagram,t=this.endHTML,n=this.id,r={html:t};Array.isArray(t)&&(r=t.map((function(e){return{html:e}}))),e.update(n,r),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.startHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r),this.select(t)}}]),n}();c()(Qo,"className","UpdateCellContent");var Jo=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=ar("链接"),n=window.getSelection(),r=null==n?void 0:n.getRangeAt(0),a=null==r?void 0:r.commonAncestorContainer;if(e.contentEditor.dom&&a===e.contentEditor.dom){var i=null==a?void 0:a.querySelectorAll("a");if(1===i.length){var o=i[0].getAttribute("href");o&&(t=o)}}e.contentEditor.execCommand("createLink",t)}}]),n}();c()(Jo,"className","CreateLink"),c()(Jo,"enable",(function(e){var t=e.getCell(e.contentEditor.dom);return!!e.contentEditor.getRange()&&!!t}));var $o=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r.onBeginInsertLine=function(e){if(r.sourceCell){var t=P()(r),n=t.diagram,a=t.beginInsertEvent,i=n.viewport.invertClient([e.clientX,e.clientY]);n.emit("begininsertline",{source:{id:r.sourceCell.model.id,connection:null},target:{id:null,connection:[i[0],i[1]]}}),n.off(a,r.onBeginInsertLine)}},r}return g()(n,[{key:"bindBegineInsertEvent",value:function(){var e=this.diagram,t=this.sourceCell,n=this.beginInsertEvent;e.off(n,this.onBeginInsertLine),t&&e.on(n,this.onBeginInsertLine)}},{key:"execute",value:function(){var e=this.diagram,t=this.shape,n=this.beginInsertEvent,r=e.selector.selections;1!==r.length||r[0].isLine||r[0].isGroup||(this.sourceCell=r[0],n="mousemove"),e.selector.clear(),e.tryFocus(),e.interaction.changeMode("beginInsertLine"),e.settings.line.shape=t,this.beginInsertEvent=n,this.beginInsertEvent&&this.bindBegineInsertEvent()}}],[{key:"enable",value:function(){return!0}}]),n}();c()($o,"className","BeginInsertLine"),c()($o,"isModelChange",!1),Eo.Add=Oo,Eo.Update=Po;var ec=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.name,n=this.value,r=e.selector,a=e.contentEditor,i=r.selections,o=[];i.forEach((function(e){var t,n=e.getCanTextCell();Array.isArray(n)?(t=o).push.apply(t,N()(n)):o.push(e)}));var c=(o=Ft(o)).map((function(e){return e.textareaElement.htmlContainer})),l=c.map((function(e){return e.innerHTML}));e.contentEditor.batchEdit(c,t,n);var s=c.map((function(e){return e.innerHTML})),u={html:s};Array.isArray(s)&&(u=s.map((function(e){return{html:e}}))),this.endHTML=s,this.startHTML=l,this.id=o,e.update(o,u),1!==o.length||a.isBegin||a.prepareEdit()}},{key:"forward",value:function(){var e=this.diagram,t=this.endHTML,n=this.id,r={html:t};Array.isArray(t)&&(r=t.map((function(e){return{html:e}}))),e.update(n,r),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.startHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r),this.select(t)}}],[{key:"enable",value:function(e){return e.selector.selections.filter((function(e){return e.canUpdateText()})).length>0}}]),n}();c()(ec,"className","ContentCommand");var tc=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(e){var t=this.diagram,n=this.cells,r=n.map((function(e){return e.model.id})),a=n.map((function(e){return t.getCellOptions(e)}));n.forEach((function(t){t[e]()}));var i=n.map((function(e){return t.getCellOptions(e)}));this.beforeCellOptions=a,this.afterCellOptions=i,this.id=r,this.select(r)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.beforeCellOptions;e.update(t,{},n),this.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.id,n=this.afterCellOptions;e.update(t,{},n),this.select(t)}}]),n}();c()(tc,"className","ZIndex");var nc=function(e){j()(n,tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this,"toBack")}}]),n}();c()(nc,"className","ToBack");var rc=function(e){j()(n,tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this,"toFront")}}]),n}();c()(rc,"className","ToFront");var ac=function(e){j()(n,tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this,"forward")}}]),n}();c()(ac,"className","Forward");var ic=function(e){j()(n,tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this,"backward")}}]),n}();c()(ic,"className","Backward");var oc=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){this.diagram.viewport.autoFit()}}]),n}();c()(oc,"className","FitViewport"),c()(oc,"isModelChange",!1);var cc=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram;e.selector.select(e.getCells().filter((function(e){return e.state.visible})))}}]),n}();c()(cc,"className","SelectAll"),c()(cc,"isModelChange",!1);var lc=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){this.diagram.viewport.setViewport(1)}}]),n}();c()(lc,"className","ActualSize"),c()(lc,"isModelChange",!1);var sc=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.contentEditor.prepareEdit(),e.contentEditor.beginEdit(),e.update(t,{})}}],[{key:"enable",value:function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.textareaElement}))}}]),n}();c()(sc,"className","BeginEditContent"),c()(sc,"isModelChange",!1);var uc=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram;if("dragCanvas"===e.interaction.currentMode)e.interaction.changeMode("edit"),e.signal.buttonDragCanvas=!1;else e.highlight.clear(),e.interaction.changeMode("dragCanvas"),e.signal.buttonDragCanvas=!0}}]),n}();function dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(uc,"className","ButtonDragCanvas"),c()(uc,"isModelChange",!1);var fc=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"index",-1),c()(this,"commands",[]),c()(this,"commandConstructors",void 0),this.commandConstructors={ToBack:nc,ToFront:rc,Forward:ac,Backward:ic,Add:Oo,Update:Po,Compound:Mo,NoneExecuteCompound:jo,Collapse:Ro,Expand:Lo,Undo:Ao,Redo:Bo,ZoomIn:No,ZoomOut:Do,ZoomTo:Io,ActualSize:lc,FitViewport:oc,UpdateCellContent:Qo,ContentCommand:ec,FocusSelection:Ko,Copy:Vo,Paste:Uo,CreateLink:Jo,BeginInsertLine:$o,SelectAll:cc,ButtonDragCanvas:uc,BeginEditContent:sc}}return g()(e,[{key:"find",value:function(e){var t=this.diagram;return!e||t&&t.destroyed?null:"string"==typeof e?this.commandConstructors[e]:e.constructor}},{key:"enable",value:function(e){var t=this.find(e);return t&&(!t.enable||t.enable(this.diagram))||!1}},{key:"register",value:function(e){this.commandConstructors[e.className]=e}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this.commandConstructors[e](hc({diagram:this.diagram},t))}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.diagram;if(!n||!n.destroyed){"string"==typeof e&&(e=this.create(e,t));var r=e.constructor,a=r.className,i={commandName:a,command:e,prevent:!1,useTime:0,isModelChange:!0};if(n&&n.emit("beforecommandexecute",i),this.enable(e)&&!0!==i.prevent&&this.commands){var o=+new Date;e.execute(),!1!==e.queue&&(this.index>-1?this.commands=this.commands.slice(0,this.index+1):this.commands=[],this.commands.push(e),this.index=this.commands.indexOf(e)),i.useTime=+new Date-o,i.isModelChange=r.isModelChange,n&&n.emit("aftercommandexecute",i)}return e}}},{key:"redo",value:function(){var e=this.index,t=this.commands,n=this.diagram;if(t&&!(e>=t.length-1)){var r=t[++e];n&&n.emit("beforecommandforward",{command:r}),r.forward(),n&&n.emit("aftercommandforward",{command:r}),this.index=e}}},{key:"undo",value:function(){var e=this.index,t=this.commands,n=this.diagram;if(t&&!(e<0)){var r=t[e];n&&n.emit("beforecommandbackward",{command:r}),r.backward(),n&&n.emit("aftercommandbackward",{command:r}),this.index=--e}}},{key:"destroy",value:function(){this.commands=[]}}]),e}();function pc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yc(e){if(!e)return!1;var t=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-lake_diagram_body]");return!!t&&{body:JSON.parse(t.dataset.lake_diagram_body),extraInformations:JSON.parse(t.dataset.lake_extra_informations||t.dataset.lake_computed_props_map)||{},optionsMap:{}}}function gc(e){return e.replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#"+e.charCodeAt(0)+";"}))}function vc(e){return e&&(e=bo.process(e)),"&#8203;"!==gc(e)&&(e=e.replace(/[\u200B\u200C\uFEFF]/g,"")),e||""}function bc(e){try{var t;t=e.includes("\r\n")?e.trim().split("\r\n"):e.trim().split("\n");var n,r,a,i,o,c,l=[],s=0,u=pc(t);try{for(u.s();!(c=u.n()).done;)if(0!==(i=c.value).trim().length){var d,h=(i=i.replace(decodeURI("%0D"),"")).match(/^(\s*)(\S[\s\S]*)$/),f=b()(h,3),p=f[1],m=f[2],y="",g=!0,v=pc(m);try{for(v.s();!(d=v.n()).done;){var x=d.value;if("\n"!==x)y+=x;else{if(g){y+="<div>",g=!1;continue}y+="</div><div>"}}}catch(e){v.e(e)}finally{v.f()}g||(y+="</div>"),!o&&p&&n&&(o=p.length);var k=p.length/o;if(k)if(k>s)r=a,a={html:y},r.children=[a],s+=1;else if(k===s)a={html:y},r.children.push(a);else{var w=0;for(r=n;w<k-1;)r=r.children[r.children.length-1],w++;a={html:y},s=k,r.children.push(a)}else n=r=a={html:y},l.push(n)}}catch(e){u.e(e)}finally{u.f()}return l}catch(e){return null}}c()(fc,"className","Command");var xc=Object.freeze({__proto__:null,getLakeDataByHtml:yc,toHTMLCharacters:gc,parseHTML:vc,structuredPlainText:bc});function kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cc(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=e.getBoundingClientRect(),i=t.getBoundingClientRect();return n=e.collapsed&&["x","y","width","height"].every((function(e){return 0===a[e]}))&&1===e.commonAncestorContainer.nodeType?e.commonAncestorContainer.getBoundingClientRect().bottom-i.bottom:a.bottom-i.bottom,(n=Math.abs(n/r))<6}function Ec(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=e.getBoundingClientRect(),i=t.getBoundingClientRect();return n=e.collapsed&&["x","y","width","height"].every((function(e){return 0===a[e]}))&&1===e.commonAncestorContainer.nodeType?e.commonAncestorContainer.getBoundingClientRect().y-i.y:a.y-i.y,(n=Math.abs(n/r))<6}function Oc(e,t){var n=e.endContainer,r=e.endOffset;return!!e.collapsed&&function e(t,n,r){if(t.nodeType===Node.TEXT_NODE){if(n!==t.data.length)return!1}else if(n!==t.childNodes.length)return!1;if(t===r)return!0;var a=t.parentNode;return!!a&&e(a,Array.from(a.childNodes).indexOf(t)+1,r)}(n,r,t)}function Pc(e,t){var n=e.startContainer,r=e.startOffset;return!!e.collapsed&&function e(t,n,r){if(n>0)return!1;if(t===r)return!0;var a=t.parentNode;return!!a&&e(a,Array.from(a.childNodes).indexOf(t),r)}(n,r,t)}function Mc(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector).call(e,t)}function jc(e,t,n){for(;e&&n.contains(e);){if("string"==typeof t&&Mc(e,t)||"function"==typeof t&&t(e))return e;e=e.parentNode}return null}function Sc(e,t){var n=e.getAttribute("style");return n&&n.includes(t)}function Rc(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)}function Lc(e){return!(e.altKey||e.ctrlKey||e.metaKey||["Enter","Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Capslock","Esc","Home","Pause","Shift","Option","Alt","Help","Esc","Backspace","Delete","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"].includes(e.key))}function Ac(e,t){return t.tagName!==e||t.childNodes&&t.childNodes[0]&&3!==t.childNodes[0].nodeType&&(t.childNodes[0].tagName===e||1!==t.childNodes.length)?t.childNodes[0]&&Ac(e,t.childNodes[0]):t}function Bc(e,t,n,r){var a=function(e,t){if(!e)return{};var n=window.getComputedStyle(e),r=n["text-align"],a=parseInt(n["font-size"]),i=n.color;return{textAlign:r,fontSize:t.fontSize?t.fontSize.value:a,color:t.foreColor?t.foreColor.value:i}}(e,n),i=function(e,t,n){if(!e)return{};var r=window.getComputedStyle(e),a=parseInt(r["font-size"]),i=r.color;return{bold:t.bold?!t.bold.cancel:!!jc(e,(function(e){return Sc(e,"bold")}),n),italic:t.italic?!t.italic.cancel:!!jc(e,(function(e){return Sc(e,"italic")}),n),strikethrough:t.strikethrough?!t.strikethrough.cancel:!!jc(e,(function(e){return Sc(e,"line-through")}),n),underline:t.underline?!t.underline.cancel:!!jc(e,(function(e){return Sc(e,"underline")}),n),fontSize:t.fontSize?t.fontSize.value:a,color:t.foreColor?t.foreColor.value:i}}(t,n,r);return wc(wc({bold:!1,italic:!1,strikethrough:!1,underline:!1},a),i)}function Nc(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return{};if(t){var i=t.startContainer;if(i===e)n=Ac("SPAN",e),r=Ac("DIV",e);else{var o=jc(i,(function(e){return 1===e.nodeType}),e);n=o,r=o}}else n=Ac("SPAN",e),r=Ac("DIV",e);return Bc(r,n,a,e)}function Dc(e){if(e.preventDefault(),this.isBegin){e.stopPropagation();var t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("text/html");if(n){var r=(new DOMParser).parseFromString(n,"text/html");if(r&&1===r.body.childNodes.length&&"A"===r.body.childNodes[0].tagName)return this.execCommand("insertHTML",r.body.childNodes[0].outerHTML);if(n.includes("lake_diagram_content_editor_data"))return this.execCommand("insertHTML",r.querySelector("[data-lake_diagram_content_editor_data]").innerHTML)}return t&&/^https?:\/\/\S+$/.test(t)?this.execCommand("insertHTML",'<a href="'.concat(t,'" target="_blank">').concat(t,"</a>")):this.execCommand("insertText",t)}}function Ic(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}function Tc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"copy";if(this.isBegin){e.stopPropagation(),"copy"===t&&e.preventDefault();var n=this.getRange(),r=document.createElement("div"),a=n.cloneContents();r.dataset.lake_diagram_content_editor_data=!0,r.appendChild(a),e.clipboardData.setData("text/html",r.outerHTML),e.clipboardData.setData("text",r.innerText)}}function _c(e,t,n){St(t,(function(t){if(1===t.nodeType){var n=t.getAttribute("style");n&&n.includes("font-size: x-small;")&&(t.style["font-size"]="".concat(e,"px"))}}),(function(e){return e.childNodes}));var r=[];St(t,(function(e){1===e.nodeType&&"FONT"===e.tagName&&r.push(e)}),(function(e){return e.childNodes})),r.length>0&&(n&&!n.collapsed&&St(n.commonAncestorContainer,(function(e){1===e.nodeType&&n.isPointInRange(e,0)&&(e.style["font-size"]="")}),(function(e){return e.childNodes})),r.forEach((function(t){var n=t.parentNode,r=document.createElement("span");r.style["font-size"]="".concat(e,"px"),n.insertBefore(r,t),r.appendChild(t),Rc(t);var a=r.childNodes[0];a&&"SPAN"===a.tagName&&1===r.childNodes.length&&(Object.keys(cr).forEach((function(e){a.style[e]&&"font-size"!==e&&(r.style[e]=a.style[e])})),Rc(a)),"SPAN"===n.tagName&&1===n.childNodes.length&&(Object.keys(cr).forEach((function(e){r.style[e]&&"font-size"!==e&&(n.style[e]=r.style[e])})),Rc(r))})))}function qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fc=W.HotKeyUtils.isHotkey,Yc=function(e){j()(n,_.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this)).diagram=e,c()(P()(r),"eventHelper",new ko),c()(P()(r),"isBegin",!1),c()(P()(r),"dom",void 0),c()(P()(r),"eventObj",{}),c()(P()(r),"originCursor",void 0),c()(P()(r),"compositing",!1),c()(P()(r),"readyCommands",{}),r}return g()(n,[{key:"batchEdit",value:function(e,t,n){var r,a=this,i=window.getSelection();try{r=null==i?void 0:i.getRangeAt(0)}catch(e){}e.forEach((function(e){var r=document.createRange();r.selectNodeContents(e),null==i||i.removeAllRanges(),null==i||i.addRange(r);var o=e.getAttribute("contenteditable");e.setAttribute("contenteditable","true"),"fontSize"===t?(a._execCommand(t,"1"),_c(n,e,r)):a._execCommand(t,n),o||e.removeAttribute("contenteditable")})),null==i||i.removeAllRanges(),r&&(null==i||i.addRange(r))}},{key:"prepareEdit",value:function(){var e=this.dom;if(e){this.updateStartContent();var t=window.getSelection(),n=document.createRange();e.focus(),n.selectNodeContents(e),null==t||t.removeAllRanges(),null==t||t.addRange(n),this.emit("prepareedit")}}},{key:"closest",value:function(e,t){return jc(e,t,this.dom)}},{key:"getRange",value:function(){if(!this.dom)return null;var e=window.getSelection();try{var t=null==e?void 0:e.getRangeAt(0);return t&&!this.dom.contains(t.commonAncestorContainer)?null:t}catch(e){return null}}},{key:"_execCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];document.execCommand("styleWithCss",!1,"true");var r=document.execCommand(e,n,t),a={name:e,showUI:n,value:t,result:r,target:void 0};return{result:r,eventObj:a}}},{key:"convertFontSize",value:function(e){var t=this.getRange();_c(e,this.dom,t)}},{key:"execReadyCommand",value:function(){this.readyCommands.fontSize&&this.convertFontSize(this.readyCommands.fontSize.value),this.readyCommands={}}},{key:"execCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.getRange();if(r&&e){if("fontSize"===e){var a=this._execCommand(e,"1",n),i=a.result,o=a.eventObj;return this.convertFontSize(t),this.afterExecCommand({name:e,value:t,result:i,eventObj:o}),i}if("createLink"===e){var c=this._execCommand(e,t,n),l=c.result,s=c.eventObj;if(l){var u,d,h=null===(u=this.dom)||void 0===u?void 0:u.querySelectorAll("a"),f=null===(d=r=this.getRange())||void 0===d?void 0:d.commonAncestorContainer;if(s.target=jc(f,"a",this.dom)||1===f.nodeType&&(null==f?void 0:f.querySelector("a")),h)for(var p=0;p<h.length;p++){var m=h[p];m.setAttribute("target","_blank"),m.style.cursor="default",Ic(m.getAttribute("href"))&&m.setAttribute("href","")}}return this.afterExecCommand({name:e,value:t,result:l,eventObj:s}),l}var y=this._execCommand(e,t,n),g=y.result,v=y.eventObj;return this.afterExecCommand({name:e,value:t,result:g,eventObj:v}),g}}},{key:"getFirstTag",value:function(e){return Ac(e,this.dom)}},{key:"afterExecCommand",value:function(e){var t=e.name,n=e.value,r=e.result,a=e.eventObj,i=this.getRange();if(null!=i&&i.collapsed)if(this.readyCommands[t])Object.assign(this.readyCommands[t],{value:n,result:r,cancel:!this.readyCommands[t].cancel});else{var o=this.getRange(),c=null==o?void 0:o.startContainer,l=c===this.dom?this.getFirstTag("SPAN"):this.closest(c,(function(e){return 1===e.nodeType}));this.readyCommands[t]={value:n,result:r,cancel:!!this.closest(l,(function(e){return Sc(e,"strikethrough"===t?"line-through":t)}))}}this.emit("execcommand",a),this.emitChangeEvent()}},{key:"emitChangeEvent",value:function(){this.emit("change",{dom:this.dom})}},{key:"beginEdit",value:function(){if(this.dom){this.isBegin=!0,this.emit("beginedit",this.eventObj),document.execCommand("styleWithCss",!1,"true"),this.dom.classList.remove("selection-transparent");var e=escape(this.dom.innerText);if(this.dom.style.cursor="text","%u200B"===e||"%u200D"===e){var t=this.getRange();null==t||t.collapse()}this.emit("selectionchange")}}},{key:"forceEndEdit",value:function(){this.isBegin&&(this.endEdit(),this.prepareEdit())}},{key:"updateStartContent",value:function(){var e;this.eventObj&&(this.eventObj.startHTML=vc(null===(e=this.dom)||void 0===e?void 0:e.innerHTML))}},{key:"bind",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.eventHelper,a=zc({insertParagraphKey:function(e){},cancelKey:function(e){}},n),i=a.insertParagraphKey,o=a.cancelKey;this.originCursor=e.style.cursor,this.dom=e,e.setAttribute("contenteditable","true"),e.setAttribute("spellcheck","false"),e.focus({preventScroll:!0}),this.eventObj={dom:e},this.updateStartContent(),r.bind(e,"contextmenu",(function(e){t.isBegin&&e.stopPropagation()})),r.bind(document,"selectionchange",(function(){t.compositing||(t.execReadyCommand(),t.emit("selectionchange"))}),{onKey:"addEventListener",offKey:"removeEventListener"}),r.bind(e,"keydown",(function(e){var n=t.dom,r=t.diagram,a=t.getRange(),c=r.viewport.zoom;if(t.isBegin){if(Fc("mod+k",e))return e.preventDefault(),e.stopPropagation(),void t.execCommand("createLink",ar("链接"));if(i(e))return t.compositing||t.execCommand("insertParagraph",""),e.stopPropagation(),void e.preventDefault();if(o(e))return e.preventDefault(),e.stopPropagation(),void(t.compositing||t.forceEndEdit());if(Fc("mod+s",e))return;if(Fc("left",e)&&Pc(a,n))return e.preventDefault(),void e.stopPropagation();if(Fc("right",e)&&Oc(a,n))return e.preventDefault(),void e.stopPropagation();if(Fc("up",e)&&Ec(a,n,c))return e.preventDefault(),void e.stopPropagation();if(Fc("down",e)&&Cc(a,n,c))return e.preventDefault(),void e.stopPropagation();e.stopPropagation()}else{if(Fc("mod+c",e)||Fc("mod+v",e)||Fc("mod+x",e)||Fc("shift+enter",e)||Fc("space",e))return;if(Fc("mod+enter",e))return e.preventDefault(),e.stopPropagation(),void t.beginEdit();if(Lc(e))return e.stopPropagation(),void t.beginEdit();e.preventDefault()}})),r.bind(e,"compositionstart",(function(){t.compositing=!0})),r.bind(e,"compositionend",(function(){t.compositing=!1})),r.bind(e,"input",(function(e){e.stopPropagation(),t.isBegin?t.emitChangeEvent():e.preventDefault()})),r.bind(e,"paste",Dc.bind(this)),r.bind(e,"copy",Tc.bind(this)),r.bind(e,"cut",(function(e){Tc.call(t,e,"cut")}))}},{key:"endEdit",value:function(){this.isBegin=!1,this.dom&&(this.eventObj.endHTML=vc(this.dom.innerHTML),this.dom.style.cursor=this.originCursor,this.dom.classList.add("selection-transparent")),this.emit("endedit",this.eventObj)}},{key:"unbind",value:function(){var e=this.dom,t=this.eventHelper;e&&(e.removeAttribute("contenteditable"),e.removeAttribute("spellcheck"),t.unbind(),this.endEdit(),this.dom=void 0)}},{key:"query",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dom,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getRange(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.readyCommands;return Nc(e,t,n)}},{key:"destroy",value:function(){this.unbind()}}]),n}();c()(Yc,"className","ContentEditor");var Xc=function(){function e(t){m()(this,e),c()(this,"graphicGroup",void 0),c()(this,"dx",0),c()(this,"dy",0),this.graphicGroup=t}return g()(e,[{key:"translate",value:function(e,t){this.graphicGroup.update({matrix:[1,0,0,0,1,0,e,t,1]}),this.dx=e,this.dy=t}},{key:"getBBox",value:function(){return this.graphicGroup.getBBox()}},{key:"destroy",value:function(){this.graphicGroup.destroy()}}]),e}(),Gc=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"delegations",[])}return g()(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.diagram,n=new xr;"function"==typeof e?e(n):((e=e.map((function(e){return t.find(e)})).filter((function(e){return e}))).sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e.forEach((function(e){var t=new Dr({element:e.graphicGroup});n.add(t)}))),t.frontRootGroup.prepend(n);var r=new Xc(n);return this.delegations.push(r),r}},{key:"clear",value:function(){var e=this;this.delegations.forEach((function(t){e.remove(t)}))}},{key:"remove",value:function(e){var t=this.delegations;t.splice(t.indexOf(e),1),e.destroy()}},{key:"destroy",value:function(){this.delegations=[]}}]),e}();c()(Gc,"className","Delegator");var Hc=function(e,t){var n={};return t.forEach((function(t){var r=e.find(t);if(r){var a=r.mindmapParent;if(a&&a.isMindmap){var i=a.model.id,o=a.getChildren().indexOf(r),c=a.isTwoQuadrantLayout,l=o;if(c){var s,u,d=null!==(s=null===(u=r.model.layout)||void 0===u?void 0:u.quadrant)&&void 0!==s?s:1;i+=":"+d;var h=a.quadrantTreeLists[d-1];if(!h)throw new Error("no correct quad index list"+JSON.stringify(a.quadrantTreeLists));l=h.indexOf(o)}if(r.model.abstract){var f,p,m={id:r.model.id,index:o,q:c?null!==(f=null===(p=r.model.layout)||void 0===p?void 0:p.quadrant)&&void 0!==f?f:1:void 0,start:r.model.start,end:r.model.end};n[i]?n[i].abstracts.push(m):n[i]={indexes:[],childrenIds:[],childrenLength:a.model.children.filter((function(e){return!e.abstract})).length,abstracts:[m]}}else l>=0&&(n[i]?(n[i].indexes.push(l),n[i].childrenIds.push(r.model.id)):n[i]={indexes:[l],childrenIds:[r.model.id],childrenLength:a.model.children.filter((function(e){return!e.abstract})).length,abstracts:[]})}}})),n};function Wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Uc=function(e,t,n){var r,a,i="mindmap"===e.type;if(t&&t.isMindmap){if(delete e.type,delete e.x,delete e.y,delete e.zIndex,e.children){var o=e.layout,c=(o=void 0===o?{}:o).type,l=void 0===c?"standard":c,s=o.quadrantConstraint,u=void 0===s?[1,2]:s;if(!i||"standard"!==l||null!==u&&2!==u.length)e.children.forEach((function(e){var t;2===(null===(t=e.layout)||void 0===t?void 0:t.quadrant)&&(e.layout.quadrant=1)}));else{e.children.sort((function(e,t){var n=e.layout,r=(n=void 0===n?{}:n).quadrant,a=void 0===r?1:r,i=e.abstract,o=t.layout,c=(o=void 0===o?{}:o).quadrant,l=void 0===c?1:c,s=t.abstract;return i&&s||!i&&!s?a-l:i?1:s?-1:0}));var d=e.children.filter((function(e){var t=e.layout,n=(t=void 0===t?{}:t).quadrant,r=void 0===n?1:n,a=e.abstract;return 1===r&&!a}));e.children.forEach((function(e){var t=e.layout,n=(t=void 0===t?{}:t).quadrant,r=void 0===n?1:n,a=e.abstract,i=e.start,o=void 0===i?0:i,c=e.end,l=void 0===c?0:c;return 2===r&&a&&(e.start=o+d.length,e.end=l+d.length),0}))}}}else e.layout&&delete e.layout.quadrant,delete e.collapsed,delete e.abstract,delete e.start,delete e.end,e.type="mindmap",e.layout=null!==(r=e.layout)&&void 0!==r?r:{type:"standard"},e.layout.type=null!==(a=e.layout.type)&&void 0!==a?a:"standard",i||e.children.forEach((function(e){e.layout&&(e.layout.quadrant=1)}));return e},Zc=function(e,t){t=t.concat([]);var n=Hc(e,t),r=[{},{}],a=t.filter((function(e){return!e.isMindmap})),i=a.map((function(e){return d()(e.model)})),o=t.filter((function(e){return e.isMindmap&&e.isStem})),c=o.length;a.push.apply(a,N()(o)),o.forEach((function(e){var t,n=d()(e.model);null!==(t=n.layout)&&void 0!==t&&t.quadrant&&delete n.layout.quadrant,i.push(n)})),Object.keys(n).forEach((function(t){var a=t.split(":"),i=b()(a,2),o=i[0],c=i[1],l=void 0===c?void 0:parseInt(c),s=null!=l?l:1,u=n[t],d=u.indexes,h=u.abstracts,f=u.childrenIds,p=u.childrenLength,m=e.find(o),y={normal:[],abstract:[]};f.forEach((function(t,n){var r=e.find(t);if(r){var a={cell:r,quadIndex:d[n]};y.normal.push(a)}})),m.getChildren().filter((function(e){return e.model.abstract&&e.realQuadrant===s})).forEach((function(e,t){var n=e.model,r=n.id,a=n.start,i=n.end;if(Se()(a,i+1).every((function(e){return d.includes(e)}))){var o={cell:e,quadIndex:t};y.abstract.push(o)}else if(h.find((function(e){return r===e.id}))){var c={cell:e,quadIndex:t+p};y.normal.push(c)}})),r[s-1][t]=y})),r.forEach((function(e,t){Object.keys(e).forEach((function(n){var r,o,c=(null!==(r=null===(o=e[n])||void 0===o?void 0:o.normal)&&void 0!==r?r:[]).sort((function(e,t){return e.quadIndex-t.quadIndex}));a.push.apply(a,N()(c.map((function(e){return e.cell})))),i.push.apply(i,N()(c.map((function(e){var n=d()(e.cell.model),r=e.cell,a=r.x,i=r.y;return delete n.abstract,delete n.start,delete n.end,n.x=a,n.y=i,n.layout=Vc(Vc({},n.layout),{},{quadrant:t+1}),n}))))}))})),r.forEach((function(e,t){Object.keys(e).reduce((function(r,o){var c,l,s,u,h=n[o].indexes.sort(),f=null!==(c=null===(l=e[o])||void 0===l?void 0:l.normal)&&void 0!==c?c:[],p=(null!==(s=null===(u=e[o])||void 0===u?void 0:u.abstract)&&void 0!==s?s:[]).sort((function(e,t){return e.quadIndex-t.quadIndex}));return a.push.apply(a,N()(p.map((function(e){return e.cell})))),i.push.apply(i,N()(p.map((function(e){var n=d()(e.cell.model),a=e.cell,i=a.x,o=a.y;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.start,a=e.end;if(e.start=t.indexOf(r)+n,e.end=t.indexOf(a)+n,e.start===n-1||e.end===n-1)throw new Error("wrong s and e for trans: ".concat(e.start,", ").concat(e.end))}(n,h,r),n.x=i,n.y=o,n.layout&&(n.layout.quadrant=t+1),n})))),r+f.length}),c)}));var l=e.deduplicate(a),s=i.filter((function(e){return l.find((function(t){return t.model.id===e.id}))}));return[l,s]},Kc=function(e,t,n,r,a){var i=[],o=[],c=[];if(t&&Un(t)){var l,s=t.isTwoQuadrantLayout;i.push.apply(i,N()(e.filter((function(e){return!!a&&!a(e)})))),i.forEach((function(){o.push({})}));var u=e.filter((function(e){return!a||a(e)}));s||(n=1);var d=[[],[]],h=[[],[]],f=1,p=null!==(l=t.model.children)&&void 0!==l?l:[],m=p.filter((function(e){return e.abstract})),y=p.length-m.length,g=t.quadrantTreeLists,v=[-1,-1];u.forEach((function(e){var t,n=(null===(t=e.layout)||void 0===t?void 0:t.quadrant)||1;e.abstract||(n>f?f=n:f>n&&(n=f,void 0===e.layout&&(e.layout={}),e.layout.quadrant=n),d[n-1].push(e))})),u.forEach((function(e){if(e.abstract){var t=e.start,n=e.end,r=e.layout,a=(r=void 0===r?{}:r).quadrant,i=void 0===a?1:a,o=d[i-1].length;t>v[i-1]&&t<=n&&n<o?(v[i-1]=n,h[i-1].push(e)):St(e,(function(e){c.push(e.id)}))}})),n&&(d.forEach((function(e){e.forEach((function(e){void 0===e.layout&&(e.layout={}),e.layout.quadrant=n}))})),h.reduce((function(e,t,r){return t.forEach((function(t){t.start+=e,t.end+=e,void 0===t.layout&&(t.layout={}),t.layout.quadrant=n})),e+d[r].length}),0),d=[Me()(d)],h=[Me()(h)]),d.reduce((function(e,a,c){var l=n?n-1:c,s=void 0===r||r>=g[l].length,u=0===l?0===g[l].length?0:g[l][g[l].length-1]+1:y,d=s?u:g[l][r];return a.forEach((function(n,r){Uc(n,t),i.push(n);var a={nth:d+r+e,parent:t.model.id};o.push(a)})),e+a.length}),0),d=[Me()(d)],h.reduce((function(e,a,l){var u=n?n-1:l,h=g[u],f=null!=r?r:h.length;if(!m.some((function(e){var t=e.start,n=e.end,r=e.layout,a=(r=void 0===r?{}:r).quadrant;return u+1===(s?void 0===a?1:a:1)&&t<f&&f<=n}))){var p=m.findIndex((function(e,t){var n=e.start,r=e.layout,a=(r=void 0===r?{}:r).quadrant,i=s?void 0===a?1:a:1;return i>u+1||u+1===i&&n>=f})),v=y+d[0].length+(-1===p?m.length:p);return a.forEach((function(n,r){n.start+=f,n.end+=f,Uc(n,t),i.push(n);var a={nth:v+r+e};t&&(a.parent=t.model.id),o.push(a)})),e+a.length}return a.forEach((function(e){St(e,(function(e){c.push(e.id)}))})),e}),0)}else e.forEach((function(e){(!a||a(e))&&Uc(e),i.push(e);var n={};t&&(n.parent=t.model.id),o.push(n)}));return[i,o,c]};function Qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $c(e,t){var n=t.left,r=t.top,a=t.width,i=t.height,o=t.padding;e.setAttribute("viewBox",[n-o,r-o,a+2*o,i+2*o].join(",")),e.setAttribute("width","".concat(a)),e.setAttribute("height","".concat(i)),e.style.width="".concat(a,"px"),e.style.height="".concat(i,"px")}function el(e){return"jpg"===e||"jpeg"===e}function tl(e){var t=(new XMLSerializer).serializeToString(e);return t=t.replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[\x00-\x1F\x7F-\x9F]/g,""),"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent('<?xml version="1.0" encoding="utf-8"?>'+t)))}function nl(e,t){if(t.image&&t.image.src){var n=document.createElement("img");n.setAttribute("src",t.image.src),e.appendChild(n)}}function rl(e,t){if(t.noteContent){var n=document.createElement("p");n.textContent=t.noteContent,e.appendChild(n)}}function al(e){var t=document.createElement("td");return e.textContent&&(t.textContent=e.textContent),nl(t,e),rl(t,e),t}var il=function(){function e(t){m()(this,e),this.diagram=t}var t,n,r;return g()(e,[{key:"canvas",value:(r=X()(H.a.mark((function e(){var t,n,r,a,i,o,c,l,s,u,d,h,f,p=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=t.backgroundColor,r=t.paperClip,a=t.cells,i=this.svg(a),r&&(o=this.diagram.paper,c=o.size,$c(i,{left:0,top:0,width:c[0],height:c[1],padding:2})),e.next=6,Promise.all(Array.from(i.querySelectorAll("image"),function(){var e=X()(H.a.mark((function e(t){var n,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.getAttribute("href"))){e.next=6;break}return e.next=4,_a(n);case 4:(r=e.sent)&&t.setAttribute("href",r.toDataURL("image/png"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return l=parseFloat((null==i?void 0:i.getAttribute("width"))||"0"),s=parseFloat((null==i?void 0:i.getAttribute("height"))||"0"),u=l/s,d=window.devicePixelRatio>2?window.devicePixelRatio:2,t.width&&null==t.height?(h=t.width,f=t.width/u):t.height&&null==t.width?(f=t.height,h=t.height*u):t.width&&t.height?(h=t.width,f=t.height):(h=l,f=s),e.next=13,_a(tl(i),{backgroundColor:n,width:h,height:f,ratio:d});case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"json",value:function(e){var t=this.diagram,n={head:Jc({},t.head),body:[]};return e?e.forEach((function(e){var t=e.model;if(null!=t&&t.type){var r=d()(e.model);n.body.push(r)}})):t.rootGroup.rendererElement.childNodes.forEach((function(e,r){var a=t.getCell(e);if(a&&(a.model.zIndex=r,a.isRoot&&!a.model.isPlaceholder)){var i=d()(a.model);i.children&&0===i.children.length&&delete i.children,St(i,(function(){void 0!==i.html&&(i.html=vc(i.html))})),n.body.push(i)}})),n}},{key:"svg",value:function(e,t){t=Jc({type:"default"},t);var n=function(e,t){var n,r,a=e.getCells(),i=a.filter((function(e){return e.state.beginEdit||e.state.selected||e.state.highlight}));i.forEach((function(e){e.setDefault()})),t&&a.forEach((function(e){e.graphicGroup.rendererElement.setAttribute("data-id",e.model.id)}));var o=e.canvas.rendererElement.cloneNode(!0),c=o.querySelectorAll("foreignObject");if(null===(n=o.querySelector('[data-element="front_group"]'))||void 0===n||n.remove(),null===(r=o.querySelector('[data-element="back_group"]'))||void 0===r||r.remove(),t)for(var l=o.querySelectorAll("[data-id]"),s=0;s<l.length;s++){var u=l[s],d=u.getAttribute("data-id");d&&t.includes(d)||u.remove()}return c&&c.forEach((function(e){var t=e.getAttribute("width");t&&(t=Number(t))>0&&(t+=4,e.setAttribute("width",String(t)))})),i.forEach((function(e){e.updateState()})),t&&a.forEach((function(e){e.graphicGroup.rendererElement.removeAttribute("data-id")})),function(e){e.style.position="fixed",e.style.visibility="hidden",document.body.appendChild(e),$c(e,Object.assign(function(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return Array.from(e.childNodes).filter((function(e){return"root_group"===e.dataset.element})).forEach((function(e){if("defs"!==e.tagName.toLowerCase()){var i=e.getBBox(),o=i.x,c=i.y,l=i.width,s=i.height;o<t&&(t=o),o+l>r&&(r=o+l),c<n&&(n=c),c+s>a&&(a=c+s)}})),{left:t,top:n,width:r-t,height:a-n}}(e),{padding:2})),e.style.position="relative",e.style.visibility="visible",document.body.removeChild(e)}(o),o}(this.diagram,e&&e.map((function(e){return e.model.id}))),r=t.type;return"string"===r||"dom-string"===r?'<?xml version="1.0" encoding="utf-8"?>'+(new XMLSerializer).serializeToString(n):n}},{key:"image",value:function(){var e=this.svg(),t=new Image;return t.src=tl(e),t}},{key:"blob",value:(n=X()(H.a.mark((function e(){var t,n,r,a=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"jpeg",n=a.length>1&&void 0!==a[1]?a[1]:{},el(t)&&(n.backgroundColor="#fff"),e.next=5,this.canvas(n);case 5:return r=e.sent,e.abrupt("return",new Promise((function(e){null==r||r.toBlob(e,"image/".concat(t),"jpeg"===t?.8:1)})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"download",value:(t=X()(H.a.mark((function e(){var t,n,r,a,i,o=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"jpeg",n=o.length>1&&void 0!==o[1]?o[1]:{},el(t)&&(n.backgroundColor="#fff"),e.next=5,this.canvas(n);case 5:r=e.sent,a=document.createElement("a"),i=n.filename||"yuque_diagram",a.download="".concat(i,".").concat(t),r&&(a.href=r.toDataURL("image/".concat(t))),a.click();case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_textContent",value:function(e){return e?function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}(e):""}},{key:"doc",value:function(e){var t=this,n=document.createElement("div");return e.forEach((function(e){St(e,(function(e){if(qt(e.depth,[0,3])){if(e.textContent){var r=document.createElement("h".concat(e.depth+1));r.textContent=e.textContent,n.appendChild(r)}return nl(n,e),void rl(n,e)}return t.list([e]).childNodes.forEach((function(e){n.appendChild(e)})),!1}))})),n}},{key:"table",value:function(e){var t=document.createElement("table");e.forEach((function(e){St(e,(function(e,n){if(e.parent=n,!e.children||0===e.children.length){var r=document.createElement("tr"),a=al(e);for(r.prepend(a);n;){var i=al(n);r.prepend(i),n=n.parent}t.appendChild(r)}}))}));var n=0;return t.childNodes.forEach((function(e){var t=e.childNodes.length;t>n&&(n=t)})),t.childNodes.forEach((function(e){for(var t=e.childNodes.length,r=0;r<n-t;r++){var a=document.createElement("td");e.appendChild(a)}})),t}},{key:"list",value:function(e){var t=document.createElement("div");return e.forEach((function(e){var n=document.createElement("ul");St(e,(function(e,t){e.level=t?t.level+1:1;var r=document.createElement("li");t?t.childContainer.appendChild(r):n.appendChild(r),e.textContent&&(r.textContent=e.textContent),nl(r,e),rl(r,e),e.children&&e.children.length>0&&(e.childContainer=document.createElement("ul"),t?t.childContainer.appendChild(e.childContainer):n.appendChild(e.childContainer))})),t.appendChild(n)})),t}},{key:"dom",value:function(e){var t=this,n=this.diagram,r=n.settings.copyType;e||(e=n.getCells().filter((function(e){return e.isStem}))),e=n.deduplicate(e);var a=Zc(n,e),i=b()(a,2),o=i[0],c=i[1],l=document.createElement("div"),s=document.createElement("div"),u=[];o.forEach((function(e){u=u.concat(e.getAllCells())}));var h=u.reduce((function(e,t){var n=d()(t.computedProps)||{};return"line"===t.type&&(n.points=t.getPoints()),n.swimlane=t.swimlane,n.x=t.x,n.y=t.y,n.rootType=t.stem.type,n.nth=t.getNth(),n.hasParent=!!t.parent,e[t.model.id]=n,e}),{})||{};s.dataset.lake_diagram_body=JSON.stringify(c);var f,p=JSON.stringify(h);return s.dataset.lake_extra_informations=p,l.appendChild(s),c.forEach((function(e,n){e.depth=null==o?void 0:o[n].depth,Rt(e,(function(e,t){e.depth=t.depth+1})),St(e,(function(e){e.textContent=t._textContent(e.html),e.note&&e.note.content&&(e.noteContent=t._textContent(e.note.content))}))})),f="doc"===r?this.doc(c):"table"===r?this.table(c):this.list(c),l.appendChild(f),l}},{key:"html",value:function(){return this.dom().outerHTML}},{key:"getText",value:function(){return this.dom().innerText}},{key:"clipboard",value:function(e){var t=this.dom(e);return{html:t.innerHTML,text:t.textContent}}},{key:"destroy",value:function(){}}]),e}();c()(il,"className","Exporter");var ol=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"group",new xr),c()(this,"eventHelper",new ko),c()(this,"arr",[]),c()(this,"destroyed",!1),this.group.css({"pointer-events":"none"})}return g()(e,[{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;e.arr.length>0&&("update"===n||"delete"===n)&&e.draw()}))}},{key:"show",value:function(){this.group.show()}},{key:"hide",value:function(){this.group.hide()}},{key:"select",value:function(e){var t=this.diagram.viewport.zoom;e=e.filter((function(e){return e.multiSelectHighlight&&e.state.visible})),this.render(e,(function(e){return e.isLine?{type:"outline",shapeStyle:{fill:"none",stroke:"#3384F5","stroke-width":2/t}}:{type:"rect",shapeStyle:{fill:"none",stroke:"#fff","stroke-width":1/t},shadowStyle:{fill:"none",stroke:"#3384F5","stroke-width":1/t}}}))}},{key:"render",value:function(e,t){var n=this.group,r=this.diagram;Yt(e,this.arr.map((function(e){return e.cell})))||(this.clear(),e&&!e.some((function(e){return!e||!e.isCell}))&&(r.frontRootGroup.add(n),this.bind(),this.arr=e.map((function(e){var r=t(e),a=r.type,i=r.shapeStyle,o=r.shadowStyle,c={cell:e,type:"function"==typeof a?a(e):a,shape:i&&new Lr(i),shadow:o&&new Lr(o)};return c.shadow&&n.add(c.shadow),c.shape&&n.add(c.shape),c})),this.draw()))}},{key:"_updateShape",value:function(e){var t=e.cell,n=e.type,r=e.shape,a=e.shadow,i=t.getKeyShape();if(i){var o,c=i.attr("stroke-width"),l=c/2,s=t.graphicGroup.matrix.concat([]),u=i.getBBox();if(o="outline"===n?i.attr("d"):wn(-l,-l,u.width+c,u.height+c),r.update({matrix:s,d:o}),a){var d=parseFloat(a.attr("stroke-width"))+parseFloat(r.attr("stroke-width")),h=u.width+c,f=u.height+c,p=o;t.isLine||(p=Le()(o).scale(1+d/h,1+d/f).translate(-d/2,-d/2).toString()),a.update({matrix:s,d:p})}}}},{key:"_draw",value:function(){var e=this;this.arr.forEach((function(t){e._updateShape(t)}))}},{key:"draw",value:function(){this.arr.length>0&&this._draw()}},{key:"clear",value:function(){this.destroyed||0===this.arr.length||(this.arr=[],this.group.clear(),this.group.remove(),this.eventHelper.unbind())}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.arr=[],this.destroyed=!0}}]),e}();c()(ol,"className","Highlight");var cl=function(){function e(t){m()(this,e),this.diagram=t}return g()(e,[{key:"json",value:function(e){this.diagram.add(e.body)}},{key:"clipboard",value:function(e,t){return"clipboard"}},{key:"destroy",value:function(){}}]),e}();c()(cl,"className","Importer");var ll=function(e){j()(n,ko);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),e}return g()(n,[{key:"init",value:function(e){this.diagram=e}},{key:"reset",value:function(){}}]),n}();var sl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Fa(t)&&!t.shiftKey&&"z"===t.key?(e.command.execute("Undo"),e.tryFocus()):(Fa(t)&&"y"===t.key||Fa(t)&&t.shiftKey&&"z"===t.key)&&(e.command.execute("Redo"),e.tryFocus())}))}}]),n}();var ul=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(Fa(t)&&"/"===t.key){if(e.command.enable("Collapse"))return e.command.execute("Collapse");if(e.command.enable("Expand"))return e.command.execute("Expand")}}))}}]),n}();var dl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t=e.selector;this.bind(window,"mousedown",(function(n){var r=e.selector.selections,a=e.getCell(n.target);if(!(a&&a.state.selected&&e.contentEditor.isBegin)){if(a)if(n.shiftKey||(W.ua.macos?n.metaKey:n.ctrlKey))if(r.includes(a))t.select(r.filter((function(e){return e!==a})));else{var i=a.parent,o=!1;if(n.shiftKey&&a.isMindmap&&null!=i&&i.isMindmap&&!a.isAbstract)for(var c=function(e){var n=r[e];if(n.isMindmap&&!n.isAbstract){var c=n.parent,l=n.realQuadrant;if(c===i&&a.realQuadrant===l){var s=c.quadrantTreeLists[l-1],u=[s.findIndex((function(e){return e===n.getNth()})),s.findIndex((function(e){return e===a.getNth()}))].sort(),d=b()(u,2),h=d[0],f=d[1],p=c.getChildren(),m=[];return Se()(h,f+1).forEach((function(e){var t=s[e];m.push(p[t])})),t.select(Be()(r.concat(m))),o=!0,"break"}}},l=r.length-1;l>=0&&"break"!==c(l);l--);o||t.select(r.concat([a]))}else r.includes(a)||t.select([a]);else Vt(n.target,(function(e){var t,n;return(null==e||null===(t=e.dataset)||void 0===t?void 0:t.lake_prevent_click_unselect)||(null==e||null===(n=e.classList)||void 0===n?void 0:n.contains("lake-diagram-prevent-mouse-select"))}),window.document,(function(e){return e.parentNode}),(function(e){return!e}))||r.length>0&&t.clear();a&&a.state.selected&&!e.contentEditor.isBegin&&n.preventDefault()}}))}}]),n}();var hl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"collapsedbutton:click",(function(t){var n=t.nativeEvent,r=t.cell;if(n.stopPropagation(),n.target.closest("[data-diagram-collapsed-button=true]")){if(e.command.enable("Collapse"))return e.command.execute("Collapse",{onlyCell:r});if(e.command.enable("Expand"))return e.command.execute("Expand",{onlyCell:r})}}))}}]),n}();var fl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"scroll",(function(e){(e.ctrlKey||W.ua.macos&&e.metaKey)&&(e.preventDefault(),e.stopPropagation())})),this.bind(e,"wheel",(function(t){if(t.ctrlKey||W.ua.macos&&t.metaKey){t.preventDefault(),t.stopPropagation();var n=t.wheelDelta||-t.deltaY;if(e.emit("wheelzoom"),Math.abs(n)>0){var r=e.viewport.zoom;n>0?e.viewport.setViewport(1.05*r):e.viewport.setViewport(r*(1/1.05))}}}))}}]),n}();var pl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"copy",(function(t){e.command.execute("Copy",{e:t})}))}}]),n}();var ml=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"cut",(function(t){e.command.execute("Cut",{e:t})}))}}]),n}();var yl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"paste",(function(t){t.preventDefault(),e.command.execute("Paste",{e:t})}))}}]),n}();var gl=W.HotKeyUtils.isHotkey,vl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){gl("mod+=",t)?(t.preventDefault(),e.command.execute("ZoomIn")):gl("mod+shift+=",t)?(t.preventDefault(),e.command.execute("FitViewport")):gl("mod+-",t)?(t.preventDefault(),e.command.execute("ZoomOut")):gl("mod+0",t)?e.command.execute("ActualSize"):gl("mod+8",t)&&e.command.execute("FocusSelection")}))}}]),n}();var bl=document.createElement("div"),xl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t=e.contentEditor;this.bind(t,"change",(function(t){var n=t.dom,r=e.getCell(n);!e.signal.preventUpdateCellContent&&r&&e.update(r,{html:n.innerHTML})})),this.bind(t,"beginedit",(function(t){var n=t.dom;e.signal.contentEditing=!0;var r=e.getCell(n);r&&r.beginEditContent()})),this.bind(t,"endedit",(function(t){var n=t.dom,r=t.startHTML,a=t.endHTML;e.signal.contentEditing=!1;var i=e.getCell(n);i&&(i.endEditContent(),bl.innerHTML=a,""===bl.textContent&&(a=-1!==a.indexOf("<br>")?a.replace("<br>","".concat("&#8203;","<br>")):"&#8203;"),r!==a&&"&#8203;"!==a?e.command.execute("UpdateCellContent",{id:i.model.id,startHTML:r,endHTML:a}):i.shouldRefreshEndEditContent()&&e.update(i))}))}}]),n}();var kl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t;this.bind(e,"mousedown",(function(n){clearTimeout(t),t=setTimeout((function(){e.getCell(n.target)?e.tryFocus():e.focus()}))}))}}]),n}(),wl=function(e){return e.reduce((function(e,t){return Kn(t)?e.push.apply(e,N()(t.children)):e.push(t),e}),[])};var Cl=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;return m()(this,n),e=t.call(this),c()(P()(e),"selections",void 0),c()(P()(e),"lines",void 0),e.selections=[],e.lines=void 0,e}return g()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"afterselect",(function(e){var n=e.selections,r=t.lines;if(1===n.length){if(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].model.id!==t[n].model.id)return!1;return!0}(t.selections,n))return void(r&&r.forEach((function(e){return e.resizer.update()})));r&&r.forEach((function(e){return e.resizer.end()})),t.lines=n.filter((function(e){return Gn(e)})),t.lines.forEach((function(e){return e.resizer.begin()}))}else r&&r.forEach((function(e){return e.resizer.end()})),t.lines=void 0;t.selections=n}))}}]),n}(),El=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"_currentMode",null),c()(this,"defaultCursor","default"),c()(this,"defaultCursors",{read:"grab"}),c()(this,"modes",void 0),this.modes={edit:[new sl,new ul,new dl,new hl,new fl,new pl,new ml,new yl,new vl,new xl,new kl,new Cl],read:[new ul,new dl,new hl,new vl,new fl,new kl,new pl],none:[]}}return g()(e,[{key:"currentMode",get:function(){return this._currentMode||"read"},set:function(e){this._currentMode=e}},{key:"_removeCurrentMode",value:function(){var e;this.currentMode&&(null===(e=this.modes[this.currentMode])||void 0===e||e.forEach((function(e){e.reset(),e.unbind()})))}},{key:"init",value:function(e){this.changeMode(e)}},{key:"addDefaultCursor",value:function(e){Object.assign(this.defaultCursors,e)}},{key:"registerMode",value:function(e,t){var n,r=this.modes;r[e]?r[e]=null===(n=r[e])||void 0===n?void 0:n.concat(t):this.modes[e]=t}},{key:"getModeCursor",value:function(){return this.defaultCursors[this.currentMode]||this.defaultCursor}},{key:"changeMode",value:function(e){var t=this,n=this.modes[e],r=this.diagram;r.emit("beforemodechange"),this._removeCurrentMode(),null==n||n.forEach((function(e){e.diagram=t.diagram,e.init(t.diagram)}));var a=this.defaultCursors[e]||this.defaultCursor;this.currentMode=e,r.emit("aftermodechange"),this.diagram.setCursor(a)}},{key:"destroy",value:function(){this._removeCurrentMode()}}]),e}();c()(El,"className","Interaction");var Ol=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"fill",{color:"#ffffff"}),c()(this,"eventHelper",new ko),c()(this,"visible",void 0),c()(this,"size",void 0),c()(this,"element",void 0),this.diagram=t}return g()(e,[{key:"init",value:function(e){Object.assign(this,{size:[200,200]},e),this.visible&&this.render(),this.bind()}},{key:"calculateBBox",value:function(){var e=this.diagram,t=this.size,n=e.rootGroup.getBBox(),r=e.viewport.zoom;if("auto"===t){var a={},i=e.width/r,o=e.height/r;if(n.width<i){var c=n.x+n.width/2,l=i/2;a.left=c-l,a.right=c+l}else a.left=n.x,a.right=n.x+n.width;if(n.height<o){var s=n.y+n.height/2,u=o/2;a.top=s-u,a.bottom=s+u}else a.top=n.y,a.bottom=n.y+n.height;return a}return 0===n.width&&0===n.height?Array.isArray(t)?{top:0,bottom:t[1],left:0,right:t[0]}:{top:0,bottom:e.height,left:0,right:e.width}:{top:Math.floor(n.y/t[1])*t[1],bottom:Math.ceil((n.y+n.height)/t[1])*t[1],left:Math.floor(n.x/t[0])*t[0],right:Math.ceil((n.x+n.width)/t[0])*t[0]}}},{key:"getBBox",value:function(){return this.calculateBBox()}},{key:"render",value:function(){var e=this.diagram,t=this.size,n=this.fill,r=e.defs,a=e.backRootGroup,i=Object(q.a)(),o=new fa,c=new ya({dx:0,dy:2,stdDeviation:8,"flood-color":"rgba(115, 115, 115, 0.08)"});o.attr({id:i}),o.add(c),r.add(o);var l=b()(t,2),s=l[0],u=l[1],d=new Fr({x:0,y:0,width:s,height:u,fill:n.color});d.css({filter:"url(#".concat(i,")"),"pointer-events":"none"}),a.add(d),this.element=d}},{key:"bind",value:function(){var e=this;if(this.visible){var t=De()((function(){e.update()}),16);this.eventHelper.bind(this.diagram,"afterviewportchange",t)}}},{key:"update",value:function(e){e&&Object.assign(this,e);var t=this.diagram,n=this.fill,r=this.size;if(this.visible){this.element||this.render();var a=b()(r,2),i=a[0],o=a[1],c=t.viewport.paperBox,l=c.left,s=c.top;this.element.update({x:l,y:s,width:i,height:o,fill:n&&n.color||"#fff"})}}},{key:"destroy",value:function(){this.element&&this.element.destroy(),this.eventHelper.destroy()}}]),e}();c()(Ol,"className","Paper");var Pl=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"behaviours",void 0),this.behaviours=[]}return g()(e,[{key:"init",value:function(e){var t=this;e.forEach((function(e){t.registerPlugin(e)}))}},{key:"registerCell",value:function(e){var t=this.diagram;t&&(t.Cells[e.className]=e)}},{key:"registerPlugin",value:function(e){var t=this,n=this.diagram;if(n){var r=e.Cells,a=e.Commands,i=e.Extends,o=e.modes,c=e.defaultCursors,l=e.dataProcessor,s=e.settings;r&&r.forEach((function(e){t.registerCell(e)})),o&&o.forEach((function(e){var r=e.mode,a=e.Behaviours.map((function(e){return e instanceof ll?e:new e}));n.interaction.registerMode(r,a),t.behaviours=t.behaviours.concat(a)})),a&&a.forEach((function(e){n.command.register(e)})),i&&n.addExtend(i),l&&n.addDataProcessor(l),c&&n.interaction.addDefaultCursor(c),s&&Object.assign(n.settings,s)}}},{key:"destroy",value:function(){this.diagram=void 0,this.behaviours.forEach((function(e){return e.destroy()}))}}]),e}();c()(Pl,"className","Register");var Ml=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"_selections",void 0),this._selections=[]}return g()(e,[{key:"selections",get:function(){return this._selections}},{key:"_select",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.diagram,a=r.cellMap,i=e.map((function(e){return"string"==typeof e?a[e]:e}));i.forEach((function(e){if(e.state.selected!==n){var r=t.selections.indexOf(e);n?(e.select(),-1===r&&t.selections.push(e)):(e.unSelect(),-1!==r&&t.selections.splice(r,1))}}))}},{key:"select",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Array.isArray(e)||(e=[e]);var n=this.diagram,r=this.selections,a={selections:N()(r)},i={selections:N()(e).map((function(e){return n.find(e)})).filter((function(e){return e}))},o={before:a,after:i,selections:i.selections},c=Yt(a.selections,i.selections);!c&&n.emit("beforeselectionchange",o),n.emit("beforeselect",o),this._select(a.selections,!1),this._select(e,t),n.emit("afterselect",o),!c&&n.emit("afterselectionchange",o)}},{key:"clear",value:function(){this.select([])}},{key:"destroy",value:function(){}}]),e}();c()(Ml,"className","Selector");var jl=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"zoom",1),c()(this,"eventHelper",new ko),c()(this,"focusPoint",[0,0]),c()(this,"minZoom",.02),c()(this,"maxZoom",4),c()(this,"m",void 0),c()(this,"n",void 0),c()(this,"autoFitPadding",8),c()(this,"scrollBarSize",20),c()(this,"scrollLeft",void 0),c()(this,"scrollTop",void 0),c()(this,"isPreventDefault",void 0),c()(this,"destroyed",void 0),c()(this,"viewportCanvasBox",void 0),c()(this,"containerBox",void 0),c()(this,"canvasWidth",void 0),c()(this,"canvasHeight",void 0),c()(this,"paperBox",void 0),c()(this,"opRecord",void 0),c()(this,"viewBox",void 0)}return g()(e,[{key:"init",value:function(){this._initContainerSize(),this.setViewport(1),this._bindEvent()}},{key:"getViewportClientBox",value:function(){var e=this.diagram,t=this.scrollBarSize,n=e.viewportContainer.getBoundingClientRect(),r=n.x||n.left,a=n.y||n.top,i=n.width-t,o=n.height-t;return{minX:r,minY:a,maxX:r+i,maxY:a+o,x:r,y:a,width:i,height:o}}},{key:"getViewportCanvasBox",value:function(){var e=this.getViewportClientBox(),t=e.minX,n=e.minY,r=e.maxX,a=e.maxY,i=this.invertClient([t,n]),o=this.invertClient([r,a]);return{minX:i[0],minY:i[1],maxX:o[0],maxY:o[1],x:i[0],y:i[1],width:o[0]-i[0],height:o[1]-i[1]}}},{key:"width",get:function(){return this.diagram.width}},{key:"height",get:function(){return this.diagram.height}},{key:"_resetFocusPoint",value:function(){var e=this.focusPoint,t=this.getViewportClientBox();e[0]=t.x+t.width/2,e[1]=t.y+t.height/2}},{key:"_bindEvent",value:function(){var e=this,t=this.diagram,n=this.eventHelper,r=t.viewportContainer;n.bind(r,"scroll",De()((function(){mi(e.scrollLeft,r.scrollLeft,1)&&mi(e.scrollTop,r.scrollTop,1)||e.setScroll(r.scrollLeft,r.scrollTop)}),16)),n.bind(t,"aftercommandexecute",(function(t){if(t.isModelChange){if(e.isPreventDefault||e.destroyed)return;e.refresh()}})),this._trackVisualFocus()}},{key:"translate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scrollLeft,r=this.scrollTop;this.setScroll(n+e,r+t)}},{key:"preventDefault",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isPreventDefault=e}},{key:"scrollIntoView",value:function(e){var t=this.diagram,n=this.scrollBarSize,r=t.width,a=t.height,i=t.canvas.getBoundingClientRect();if(!(i.width<=r&&i.height<=a)){var o=this.convertViewport([e.x,e.y]),c=this.convertViewport([e.x+e.width,e.y+e.height]),l=this.scrollLeft,s=this.scrollTop;o[0]<0?l-=Math.abs(o[0])+20:c[0]>r-n&&(l+=c[0]-r+n+20),o[1]<0?s-=Math.abs(o[1])+20:c[1]>a-n&&(s+=c[1]-a+n+20),l===this.scrollLeft&&s===this.scrollTop||this.setScroll(l,s)}}},{key:"_trackVisualFocus",value:function(){var e=this,t=this.diagram,n=this.focusPoint,r=this.eventHelper;r.bind(t,"mousemove",(function(e){var t=e.clientX,r=e.clientY;n[0]=t,n[1]=r})),r.bind(t,"mouseleave",(function(t){t.relatedTarget&&1===t.relatedTarget.nodeType&&t.relatedTarget.closest(".lake-diagram-prevent-mouseleave-reset-focus-point")||e._resetFocusPoint()}))}},{key:"_resizeViewport",value:function(){var e=this.diagram,t=e.viewportContainer,n=e.width,r=e.height;t.style.width="".concat(n,"px"),t.style.height="".concat(r,"px"),t.style.maxWidth="".concat(n,"px"),t.style.maxHeight="".concat(r,"px")}},{key:"_initContainerSize",value:function(){this.diagram.viewportContainer.style.overflow="auto",this._resizeViewport()}},{key:"_change",value:function(){var e=this.scrollLeft,t=this.scrollTop,n=this.canvasWidth,r=this.canvasHeight,a=this.viewBox,i=this.diagram;i.emit("beforeviewportchange"),this._resizeViewport(),i.canvas.rendererElement.style.display="block",i.canvas.rendererElement.style.width="".concat(n,"px"),i.canvas.rendererElement.style.height="".concat(r,"px"),i.canvas.rendererElement.setAttribute("viewBox",a.join(",")),i.viewportContainer.scrollLeft=e,i.viewportContainer.scrollTop=t,this._setMatrix(),i.emit("afterviewportchange"),this.viewportCanvasBox=this.getViewportCanvasBox()}},{key:"_setMatrix",value:function(){var e=this.zoom,t=this.scrollLeft,n=this.scrollTop,r=this.viewBox;this.n=[e,0,0,0,e,0,-e*r[0],-e*r[1],1],this.m=[e,0,0,0,e,0,-t-e*r[0],-n-e*r[1],1]}},{key:"isInnerCanvasPoint",value:function(e){var t=this.viewportCanvasBox,n=t.minX,r=t.maxX,a=t.minY,i=t.maxY;return!(e[0]<n||e[0]>r||e[1]<a||e[1]>i)}},{key:"focusFirstRoot",value:function(){var e=this.diagram,t=e.getCells().filter((function(e){return e.isStem}))[0];t&&(this.autoFit(),e.viewport.focus([t.x+t.width/2,t.y+t.height/2]),e.viewport.setViewport(1))}},{key:"focusGraphicCenter",value:function(){var e=this.diagram;if(e.getCells().length>0){var t=e.rootGroup.getBBox();e.viewport.focus([t.x+t.width/2,t.y+t.height/2]),e.viewport.setViewport(1)}}},{key:"setScroll",value:function(e,t){this.destroyed||(this._setScrollLeft(e),this._setScrollTop(t),this._change())}},{key:"getPadding",value:function(e,t){var n=this.diagram;return n.options.padding||[n.height/2,n.width/2]}},{key:"moveTo",value:function(e,t){var n=this.zoom,r=this.invertViewport([0,0]);this.setScroll(this.scrollLeft+(e-r[0])*n,this.scrollTop+(t-r[1])*n)}},{key:"_restoreCanvasTlPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom;this.setViewport(t),this.moveTo.apply(this,N()(e))}},{key:"refresh",value:function(){var e=this.getViewportClientBox();this.setViewport(this.zoom,[e.x,e.y])}},{key:"_setScrollLeft",value:function(e){var t=this.diagram,n=this.canvasWidth,r=this.scrollBarSize,a=n-t.width+r;this.scrollLeft=Dt(e,0,a)}},{key:"_setScrollTop",value:function(e){var t=this.diagram,n=this.canvasHeight,r=this.scrollBarSize,a=n-t.height+r;this.scrollTop=Dt(e,0,a)}},{key:"setViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.zoom,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focusPoint,n=this.minZoom,r=this.maxZoom;(e=Dt(e,n,r))!==this.zoom&&(this.opRecord=void 0),this.zoom=e;var a,i,o=this.diagram,c=this.m,l=o.width,s=o.paper,u=s.getBBox(),d=this.getPadding(u,e),h=this.getViewportClientBox(),f=u.right-u.left,p=u.bottom-u.top,m=f*e+2*d[1],y=p*e+2*d[0],g=[u.left-d[1]/e,u.top-d[0]/e,m/e,y/e];if(c){var v=[t[0]-h.x,t[1]-h.y,1],b=w.a.invert([],c),x=w.c.transformMat3([],[v[0],v[1],1],b),k=[e,0,0,0,e,0,-e*g[0],-e*g[1],1],C=w.c.transformMat3([],x,k);a=C[0]-v[0],i=C[1]-v[1]}else a=(m-l)/2,i=d[0]-u.top;this.paperBox=u,this.canvasWidth=m,this.canvasHeight=y,this.zoom=e,this.viewBox=g,this.containerBox=h,this._setScrollLeft(a),this._setScrollTop(i),this._change()}},{key:"convertViewport",value:function(e){e=ei(e);var t=this.m;return w.c.transformMat3([],[e.x,e.y,1],t)}},{key:"invertViewport",value:function(e){e=ei(e),this.m;var t=w.a.invert([],this.m);return w.c.transformMat3([],[e.x,e.y,1],t)}},{key:"convertViewportAbs",value:function(e){return w.c.transformMat3([],[e[0],e[1],1],this.n)}},{key:"invertViewportAbs",value:function(e){var t=w.a.invert([],this.n);return w.c.transformMat3([],[e[0],e[1],1],t)}},{key:"convertClient",value:function(e){e=ei(e);var t=this.getViewportClientBox(),n=w.c.transformMat3([],[e.x,e.y,1],this.m);return[n[0]+t.x,n[1]+t.y]}},{key:"invertClient",value:function(e){e=ei(e);var t=this.getViewportClientBox(),n=[e.x-t.x,e.y-t.y,1],r=w.a.invert([],this.m),a=w.c.transformMat3([],[n[0],n[1],1],r);return[a[0],a[1]]}},{key:"getCenter",value:function(){var e=this.getViewportClientBox();return this.invertClient([e.x+e.width/2,e.y+e.height/2])}},{key:"getFocus",value:function(){var e=this.focusPoint;return this.invertClient(e)}},{key:"toObject",value:function(){var e=this.zoom,t=this.diagram;return{zoom:e,tlCanvasPoint:this.invertViewport([0,0]),width:t.width,height:t.height}}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tlCanvasPoint||e.originCanvasTlPoint;if(t){var n=e.zoom;this._restoreCanvasTlPoint(t,n)}else"number"==typeof e.scrollLeft&&"number"==typeof e.scrollTop&&(this.setViewport(e.zoom),this.setScroll(e.scrollLeft,e.scrollTop))}},{key:"setWYSIWYG",value:function(e){var t=this.diagram,n=this.scrollBarSize;if(t.width>e.width&&t.height>e.height)this.set({zoom:e.zoom,tlCanvasPoint:e.tlCanvasPoint});else{var r=Math.min((t.width-n)/(e.width-n),(t.height-n)/(e.height-n))*e.zoom;this.set({zoom:r,tlCanvasPoint:e.tlCanvasPoint})}}},{key:"_focus",value:function(e){var t=this.getViewportClientBox(),n=w.c.transformMat3([],[e[0],e[1],1],this.m),r=[t.width/2,t.height/2],a=r[0]-n[0],i=r[1]-n[1];this._setScrollLeft(this.scrollLeft-a),this._setScrollTop(this.scrollTop-i),this._setMatrix()}},{key:"focus",value:function(e){this._focus(e),this._change()}},{key:"autoFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.minZoom,n=e.maxZoom,r=e.zoom,a=this.getViewportClientBox(),i=this.diagram.rootGroup.getBBox();t=t||this.minZoom,n=n||1,null==r&&(a.width-=2*this.autoFitPadding,a.height-=2*this.autoFitPadding,r=Math.min(a.width/i.width,a.height/i.height)),r=Dt(r,t,n),this._focus([i.x+i.width/2,i.y+i.height/2]),this._resetFocusPoint(),this.setViewport(r),this.opRecord="autoFit"}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.destroyed=!0}}]),e}();c()(jl,"className","Viewport");var Sl,Rl,Ll,Al=window.getSelection(),Bl=function(e){j()(n,_.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this)).diagram=e,c()(P()(r),"eventHelper",new ko),c()(P()(r),"destroyed",!1),c()(P()(r),"emitQueryChange",void 0),r.emitQueryChange=Te()((function(){r.destroyed||r.emit("querychange",{query:r._getQuery()})}),32),r}return g()(n,[{key:"init",value:function(){var e=this,t=this.diagram,n=this.eventHelper,r=this.emitQueryChange;n.bind(t.contentEditor,"selectionchange",(function(){e._updateEditRange(),r()})),n.bind(t,"afterselect",(function(){e._updateEditRange(),r()}))}},{key:"_updateEditRange",value:function(){var e=this.diagram;try{var t=null==Al?void 0:Al.getRangeAt(0);if(!t)return;e.canvasContainer.contains(t.commonAncestorContainer)&&!Ll&&(Sl=t.cloneRange()),Rl=t.cloneRange()}catch(e){return}}},{key:"_setRange",value:function(e){e&&(null==Al||Al.removeAllRanges(),null==Al||Al.addRange(e))}},{key:"_getSelections",value:function(){return this.diagram.selector.selections.filter((function(e){return e.textareaElement}))}},{key:"_getQuery",value:function(){var e,t=this.diagram,n=this._getSelections();if(n.length>1){var r=n.filter((function(e){return e.textareaElement}));r.sort((function(e,t){return e.x-t.x}));var a=r.map((function(e){return e.textareaElement.htmlContainer}));e=t.contentEditor.query(a[0],null)}else e=t.contentEditor.query();return e}},{key:"execCommand",value:function(e,t){var n=this.diagram,r=this.emitQueryChange;n.contentEditor.isBegin?(Sl.commonAncestorContainer!==Rl.commonAncestorContainer&&(Ll=!0),Ll&&this._setRange(Sl),n.contentEditor.execCommand(e,t),Sl=null==Al?void 0:Al.getRangeAt(0).cloneRange(),Ll=!1):n.command.execute("ContentCommand",{name:e,value:t}),r()}},{key:"destroy",value:function(){this.eventHelper&&this.eventHelper.destroy(),this.destroyed=!0}}]),n}();c()(Bl,"className","ContentEditorPlus");var Nl=Object.freeze({__proto__:null,Command:fc,ContentEditor:Yc,Delegator:Gc,Exporter:il,Highlight:ol,Importer:cl,Interaction:El,Paper:Ol,Register:Pl,Selector:Ml,Viewport:jl,ContentEditorPlus:Bl}),Dl={plugins:[]};function Il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tl="2.0.0";function _l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}var zl=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","hover","drop","dragover","contextmenu"],Fl=["touchstart","touchmove","touchend"],Yl=["keydown","keyup","keypress"],Xl=["compositionstart","compositionend"],Gl=["copy","paste","cut"],Hl=["wheel","scroll"],Wl=W.HotKeyUtils.isHotkey,Vl=function(e){j()(n,_.a);var t=ql(n);function n(e){var r;m()(this,n),r=t.call(this),c()(P()(r),"options",void 0),c()(P()(r),"nativeEvents",void 0),c()(P()(r),"dataProcessors",void 0),c()(P()(r),"Cells",void 0),c()(P()(r),"head",void 0),c()(P()(r),"cellMap",void 0),c()(P()(r),"elementMap",void 0),c()(P()(r),"domCellMap",void 0),c()(P()(r),"signal",void 0),c()(P()(r),"settings",void 0),c()(P()(r),"container",void 0),c()(P()(r),"viewportContainer",void 0),c()(P()(r),"canvasContainer",void 0),c()(P()(r),"input",void 0),c()(P()(r),"calculatedContainer",void 0),c()(P()(r),"width",void 0),c()(P()(r),"height",void 0),c()(P()(r),"extend",void 0),c()(P()(r),"canvas",void 0),c()(P()(r),"rootGroup",void 0),c()(P()(r),"frontRootGroup",void 0),c()(P()(r),"backRootGroup",void 0),c()(P()(r),"defs",void 0),c()(P()(r),"destroyed",void 0),c()(P()(r),"command",void 0),c()(P()(r),"delegator",void 0),c()(P()(r),"contentEditor",void 0),c()(P()(r),"contentEditorPlus",void 0),c()(P()(r),"exporter",void 0),c()(P()(r),"importer",void 0),c()(P()(r),"interaction",void 0),c()(P()(r),"paper",void 0),c()(P()(r),"highlight",void 0),c()(P()(r),"register",void 0),c()(P()(r),"selector",void 0),c()(P()(r),"viewport",void 0),c()(P()(r),"vertexRotateResize",void 0),c()(P()(r),"groupRotateResize",void 0),c()(P()(r),"abstractView",void 0),c()(P()(r),"groupManager",void 0),c()(P()(r),"lineAlign",void 0),c()(P()(r),"connect",void 0),c()(P()(r),"lineCellAlign",void 0),c()(P()(r),"lineResizer",void 0),c()(P()(r),"font",void 0),c()(P()(r),"mouseDragCanvas",void 0),c()(P()(r),"modelManager",void 0),c()(P()(r),"align",void 0),c()(P()(r),"swimlane",void 0),c()(P()(r),"swimlaneResize",void 0);var a=f()({locale:{},width:500,height:500,plugins:[],paper:null,padding:null,mode:"edit",head:{version:"2.0.0"}},e);r.options=a,r.nativeEvents=[].concat(zl,Fl,Yl,Xl,Gl,Hl),r.dataProcessors=[xo],r.Cells={Cell:wo,Line:wo.Line},r.head=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_l(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({version:"2.0.0"},e.head),r.cellMap={},r.elementMap={},r.signal={keydown:{}},r.settings={};var i=a.container,o=r._createViewportContainer(),l=r._createCanvasContainer(),s=r._createInputElement();return r.container=i,r.viewportContainer=o,r.canvasContainer=l,r.input=s,i.appendChild(o),o.appendChild(l),o.appendChild(s),r.width=a.width,r.height=a.height,r.calculatedContainer=r._appendCalculatedContainer(),r.domCellMap=new WeakMap,r._initCanvas(),r._initExtend(),r._initEvent(),r}return g()(n,[{key:"_initEvent",value:function(){var e,t=this,r=this.viewportContainer,a=this.nativeEvents,i=!1,o=!1,c=0,l=function(e,n){var r=e,a=r.target,i={target:a,clientX:r.clientX,clientY:r.clientY,button:r.button,preventDefault:function(){e.preventDefault()},stopPropagation:function(){e.stopPropagation()}},o=t.getCell(a);o&&(i.cell=o,t.emit("".concat(o.type,":").concat(n),i)),t.emit(n,i)};a.forEach((function(n){"mousedown"===n?r.addEventListener(n,(function(t){i=!0,l(t,n),c=t.button,e=[t.clientX,t.clientY]})):"mousemove"===n?r.addEventListener(n,(function(r){o&&t.emit("drag",{evt:r,button:c}),i&&!o&&xi(r.clientX,r.clientY,e[0],e[1])>8&&(o=!0,t.emit("dragstart",{evt:r,button:c})),t.emit(n,r)})):"mouseup"===n?r.addEventListener(n,(function(e){l(e,n),o?(t.emit("dragend",{evt:e}),o=!1):2===e.button&&t.emit("contextmenu",e),i=!1})):"contextmenu"===n?r.addEventListener(n,(function(e){e.preventDefault()})):r.addEventListener(n,(function(e){t.emit(n,e)}))})),n._boundGlobalEvent||(window.addEventListener("mousedown",(function(e){!e.target.closest("[data-lake_prevent_click_unselect]")||e.target.matches("input")||e.target.matches("textarea")||e.preventDefault()})),n._boundGlobalEvent=!0)}},{key:"_createViewportContainer",value:function(){var e=document.createElement("div");return e.classList.add("lake-diagram-viewport-container"),e.setAttribute("style","position: relative; outline: none; user-select: text"),e.setAttribute("tabindex","0"),e.setAttribute("focusable","true"),e.setAttribute("dragable","false"),e.addEventListener("dragstart",(function(e){return e.preventDefault()})),e}},{key:"_createCanvasContainer",value:function(){return document.createElement("div")}},{key:"_createInputElement",value:function(){var e=this,t=document.createElement("div");return t.setAttribute("contenteditable","true"),t.style.position="fixed",t.style.top="-300px",t.style.left="-300px",t.style.right="0",t.style.bottom="0",t.style.width="100px",t.style.height="40px",t.margin="auto",t.style["z-index"]=2,t.style.outline="none",t.style.opacity=0,t.style["pointer-events"]="none",t.addEventListener("keydown",(function(t){Wl("mod+v",t)||e.selector.selections.length>0&&(Wl("mod+c",t)||Wl("mod+x",t))})),t.addEventListener("beforeinput",(function(e){e.preventDefault()})),W.ua.mobile&&t.addEventListener("focus",(function(){t.blur()})),t}},{key:"_appendCalculatedContainer",value:function(){var e=this.options.container,t=document.createElement("div"),n=document.createElement("div");return t.appendChild(n),e.appendChild(t),t.setAttribute("style","opacity: 0; height: 0;width: 0"),t.style.overflow="hidden",n.style.width="10000px",n}},{key:"_initExtend",value:function(){var e,t=this.options;this.extend={},this.addExtend(Object.keys(Nl).map((function(e){return Nl[e]}))),this.register.init(Dl.plugins.concat(t.plugins)),this.paper.init(t.paper||{size:[828,1170]}),this.viewport.init(),this.interaction.init(t.mode),null===(e=this.mouseDragCanvas)||void 0===e||e.init(),this.contentEditorPlus.init()}},{key:"_initCanvas",value:function(){var e=this.canvasContainer,t=this.calculatedContainer;this.canvas=new Cr({container:e,calculatedContainer:t}),this.rootGroup=new xr,this.frontRootGroup=new xr,this.backRootGroup=new xr,this.rootGroup.dataset({element:"root_group"}),this.frontRootGroup.dataset({element:"front_group"}),this.backRootGroup.dataset({element:"back_group"}),this.defs=new ia,this.canvas.add(this.defs),this.canvas.add(this.backRootGroup),this.canvas.add(this.rootGroup),this.canvas.add(this.frontRootGroup)}},{key:"insertBefore",value:function(e,t){if(e.isStem&&t.isStem)for(var n=this.rootGroup,r=e.getAllCellsByZIndex(),a=t.getAllCellsByZIndex(),i=0;i<r.length;i++)n.insertBefore(r[i].graphicGroup,a[0].graphicGroup)}},{key:"cleanDomCellMap",value:function(e){var t=this.domCellMap;St(e,(function(e){t.delete(e)}),(function(e){return e.childNodes}))}},{key:"addExtend",value:function(e){var t=this;e.forEach((function(e){var n=e.className,r=n.charAt(0).toLowerCase()+n.substring(1),a=new e(t);t.extend[r]=a,t[r]=a}))}},{key:"addDataProcessor",value:function(e){this.dataProcessors.push(e)}},{key:"inherit",value:function(e,t){var n=this.cellMap;t||(t=this.getCells().filter((function(e){return e.isStem}))),t.forEach((function(t){St(t.model,(function(t,r){t=n[t.id],r=r&&n[r.id]||t.parent,t.computedProps=r?xe()({},r.computedProps,Zt(t,e)):Zt(t,e)}))}))}},{key:"deepEach",value:function(e){var t=this.cellMap;Object.keys(t).forEach((function(n){e(t[n])}))}},{key:"focus",value:function(){var e=this.input,t=window.getSelection(),n=document.createRange();e.innerHTML="ddd",n.setStart(e.childNodes[0],1),n.setEnd(e.childNodes[0],2),null==t||t.removeAllRanges(),null==t||t.addRange(n)}},{key:"tryFocus",value:function(){this.viewportContainer.contains(document.activeElement)||this.focus()}},{key:"clear",value:function(){this.rootGroup.clear(),this.cellMap={}}},{key:"destroy",value:function(){var e;if(!this.destroyed){var t=this.canvas,n=this.viewportContainer,r=this.extend,a=this.calculatedContainer;this.deepEach((function(e){e.destroy()})),Object.keys(r).forEach((function(e){r[e].destroy()})),null===(e=n.parentNode)||void 0===e||e.removeChild(n),a.remove(),t.destroy(),this.destroyed=!0}}},{key:"export",value:function(){return this.exporter.json()}},{key:"import",value:function(e){this.dataProcessors.forEach((function(t){t(e)}));var t=this.importer.json(e);return this.emit("afterimport"),this.viewport.refresh(),t}},{key:"setCursor",value:function(e){this.canvas.css({cursor:e})}},{key:"resetCursor",value:function(){this.setCursor(this.interaction.getModeCursor())}},{key:"isSelected",get:function(){return this.selector.selections.length>0}}]),n}();c()(Vl,"_boundGlobalEvent",void 0);var Ul=function(e){j()(n,e);var t=ql(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n)}(function(e){return function(e){j()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"changePaper",value:function(e){Object.assign(this.paper,e),this.viewport.refresh()}},{key:"changeSize",value:function(e,t){this.width=e,this.height=t,this.viewport.refresh()}}]),n}(e)}(function(e){return function(e){j()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"deduplicate",value:function(e){var t=this;if(!e||0===e.length)return e;if((e=e.concat([])).every((function(t){return t.depth===e[0].depth})))return e;Fe()(e,["depth"]);for(var n=0;n<e.length;n++){var r=e[n];r&&Rt(r.model,(function(n){n=t.find(n.id);var r=e.indexOf(n);-1!==r&&(e[r]=null)}))}return e.filter((function(e){return e}))}},{key:"snapshot",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t.map((function(e){return d()(e.model)})),t.map((function(t){return e.getCellOptions(t)}))]}},{key:"getCell",value:function(e){var t,n=this.canvas,r=this.cellMap,a=this.domCellMap,i=this.rootGroup,o=this.find(null==e||null===(t=e.dataset)||void 0===t?void 0:t.cellid);if(o)return o;if(!e||!i.rendererElement.contains(e)||n.rendererElement===e)return null;var c=a.get(e);if(c)return c;for(var l=Object.keys(r),s=0;s<l.length;s++){var u=r[l[s]];if(u.graphicGroup.rendererElement.contains(e))return a.set(e,u),u}return null}},{key:"getCellOptions",value:function(e){var t=this,n=this.cellMap,r=[];return St(e.model,(function(e){var a=n[e.id],i=t.getSibling(a);i&&(i.unshift(a.model.id),i.push(a.getZIndex()),r.push(i))})),{parent:e.parent&&e.parent.model.id,nth:e.getNth(),siblingSheets:r}}},{key:"getSibling",value:function(e){var t=e.graphicGroup.getSiblingRendererElement();return t?(t[1]=this.getCell(t[1]).model.id,t):null}},{key:"getCells",value:function(){var e=[];return this.deepEach((function(t){e.push(t)})),e}},{key:"getCellsByZIndex",value:function(){var e=[];return this.deepEach((function(t){e.push([t,t.getZIndex()])})),e.sort((function(e,t){var n=b()(e,2)[1],r=b()(t,2)[1];return n>r?1:n<r?-1:0})),e.map((function(e){return e[0]}))}}]),n}(e)}(function(e){j()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"find",value:function(e){if(null!=e){var t=this.cellMap;return e instanceof wo?e:t[e]}}},{key:"layout",value:function(e){var t=this.find(e);if(t&&!t.destroyed){if(!t.isStem)throw new Error("Only stem type cell can be layouted!");if(t.executeLayout){var n=this.cellMap;t.executeLayout(),this.emit("afterstemcelllayout",{stem:this}),St(t.model,(function(e){var r=n[e.id];return r!==t&&r.drawPosition(),!0}))}}}},{key:"findByContent",value:function(e){return this.getCells().find((function(t){return t.html.includes(e)}))}},{key:"_draw",value:function(e){var t=this;this.emit("beforedraw",e);var n=e.cells,r=void 0===n?[]:n,a=e.stems,i=void 0===a?[]:a,o=e.relatedLines,c=void 0===o?[]:o;i.forEach((function(e){!e.destroyed&&t.layout(e)})),r.forEach((function(e){!e.destroyed&&e.draw()})),c.forEach((function(e){!e.destroyed&&e.draw()})),this.emit("afterdraw",e)}},{key:"_getStems",value:function(e){return Ft(e.map((function(e){return e.stem})))}},{key:"_getRoots",value:function(e){return Ft(e.map((function(e){return e.root})))}},{key:"_processSiblingSheets",value:function(e){var t=this.cellMap;e.sort((function(e,t){return t[3]-e[3]}));for(var n=0;n<e.length;n++){var r=e[n],a=t[r[0]],i=t[r[2]];if(a&&i){var o=r[1];"before"!==o&&"after"!==o||i.graphicGroup[o](a.graphicGroup)}}}},{key:"getRelatedLines",value:function(e){var t=this.cellMap,n=e.reduce((function(e,t){return e[t.stem.model.id]=!0,e}),{}),r=this.getCells().filter((function(e){return e.isLine})),a=[];return r.forEach((function(e){["source","target"].some((function(r){var a=e[r].id,i=t[a];return a&&!i||i&&n[i.stem.model.id]}))&&a.push(e)})),a}},{key:"_getCellConstructors",value:function(e){var t=this.Cells;if(!e)return[t.Cell];var n=e.charAt(0).toUpperCase()+e.substring(1),r=t[n+"Stem"],a=t[n+"Cell"];return r&&a?[r,a]:a||(a=t[n])?[a]:void 0}},{key:"_getId",value:function(e){var t=this.cellMap;return null==e||t[e]?Object(q.a)():e}},{key:"_add",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={action:"add"};this.emit("beforechange",n);var r=this.cellMap,a=this.rootGroup,i=[],o=[];t.forEach((function(t){var n,a,c,l,s,u=t.model,d=t.options,h=[];if(d.parent){if((l=r[d.parent])&&(a=l.stem.model,c=l.root.model,n=e._getCellConstructors(a.type),s=l,Wt(l.model,u),"number"==typeof d.nth&&d.nth>=0)){var f=l.model.children;Xt(f,f.indexOf(u),d.nth),l.model.children=l.model.children.filter((function(e){return e}))}}else c=u;if(St(u,(function(t,i){i&&i.id&&(l=r[i.id]);var o=l?l.depth+1:0,s=0===o,u=!!t.type||s;u&&(a=t,n=e._getCellConstructors(t.type)),void 0!==t.html&&(t.html=vc(t.html)),t.id=e._getId(t.id);var d=t.id,f=u?n[0]:n[n.length-1],p={model:t,cellMap:r,parent:l,depth:o,isStem:u,isRoot:s,stem:r[a.id],root:r[c.id],diagram:e},m=new f(p),y=f.getDefaultProps();return m.default=ci(y),Object.assign(m,y),m.init(p),r[d]=m,h.push(m),!0})),s){var p=e.find(u.id);i.push({cell:p,insertBeforeCell:s})}o=o.concat(h)})),o.sort((function(e,t){return e.zIndex-t.zIndex})),o.forEach((function(e){a.add(e.graphicGroup)})),i.forEach((function(e){var t=e.cell,n=e.insertBeforeCell;a.insertBefore(t.graphicGroup,n.graphicGroup)}));var c=[];t.forEach((function(e){var t=e.options;t.siblingSheets&&(c=c.concat(t.siblingSheets))})),this._processSiblingSheets(c);var l=t.map((function(e){return e.model})),s=this._getStems(o),u=this._getRoots(s),d=this.getRelatedLines(s);return n.models=l,n.stems=s,n.cells=o,n.roots=u,n.relatedLines=d,this._draw(n),this.emit("afterchange",n),l.map((function(e){return r[e.id]}))}},{key:"add",value:function(e,t){var n,r={};if(Array.isArray(e))n=e.map((function(e){return{model:e}}));else{if(!s()(e))throw new Error("Params is illegal");n=[{model:e,options:t}]}return Array.isArray(t)?n.forEach((function(e,n){e.options=t[n]})):s()(t)&&n.forEach((function(e){e.options=t})),n.forEach((function(e){e.options||(e.options=r)})),this._add(d()(n))}},{key:"_update",value:function(e){var t=this,n=this.cellMap,r=[],a={action:"update",models:[]},i=[];e=e.map((function(e){var n=t.find(e.id);return n?(e.cell=n,a.models.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Il(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n.model.id},e.model)),e):null})).filter((function(e){return e})),a.arr=e,this.emit("beforechange",a),e.forEach((function(e){var t=e.model,a=e.options,o=e.cell,c=n[a.parent];if(c){var l=o.parent!==c,s=c.stem.type===o.stem.type,u=c.isStem&&o.isStem;if(l&&(s||u)){if(o.parent){var d=o.parent.model.children;d.splice(d.indexOf(o.model),1)}Wt(c.model,o.model),o.parent=c,o.isRoot=!1,o.stem!==o&&o.deepEach((function(e){e.stem=c.stem})),o.deepEach((function(e){e.root=c.root,e.depth=e.parent.depth+1}))}}else if(null===a.parent&&o.isStem&&o.parent){var h=o.parent.model.children;h.splice(h.indexOf(o.model),1),o.parent=null,o.isRoot=!0,o.depth=0,o.deepEachWithoutSelf((function(e){e.root=o,e.depth=e.parent.depth+1}))}var f=a.nth;if(void 0!==f&&o.parent){var p=o.parent.model.children;Xt(p,p.indexOf(o.model),f)}a.siblingSheets&&(i=i.concat(a.siblingSheets)),o.updateModel(t),r.push(o),void 0!==t.collapsed&&St(o.model,(function(e){var t=n[e.id];return t!==o&&t.drawCollapse(),!0}))})),this._processSiblingSheets(i);var o=this._getStems(r),l=this._getRoots(o),s=this.getRelatedLines(o);a.cells=r,a.stems=o,a.roots=l,a.relatedLines=s,this._draw(a),this.emit("afterchange",a)}},{key:"update",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(("string"==typeof e||"object"===i()(e)&&e.isCell)&&s()(n))t=[{id:e}];else{if(!Array.isArray(e))throw new Error("Please set id !");t=e.map((function(e){return{id:e}}))}s()(n)?t.forEach((function(e){e.model=n})):Array.isArray(n)&&t.forEach((function(e,t){e.model=n[t]})),s()(r)?t.forEach((function(e){e.options=r})):Array.isArray(r)?t.forEach((function(e,t){e.options=r[t]})):t.forEach((function(e){e.options={}})),t.forEach((function(e){e.model=e.model||{},e.model=qe()(e.model),e.options=e.options||{},e.options=qe()(e.options)})),this._update(t)}},{key:"_remove",value:function(e){var t=this,n=e.map((function(e){return t.find(e)})).filter((function(e){return e}));if(0!==n.length){n=this.deduplicate(n);var r=this.cellMap,a=n.map((function(e){return e.getAllCells()})).reduce((function(e,t){return e.concat(t)})),i=Ft(n.map((function(e){return e.stem}))),o=this.getRelatedLines(i),c=[],l={},s={action:"remove",stems:i,models:c,relatedLines:o};return n.forEach((function(e,t){if(c.push(e.model),e.parent){var n={nth:e.parent.model.children.indexOf(e.model),model:c[t]};l[e.parent.model.id]=l[e.parent.model.id]?l[e.parent.model.id].concat(n):[n]}else{var r={nth:-1,model:c[t]};l.root=l.root?l.root.concat(r):[r]}})),this.emit("beforechange",s),n.forEach((function(e){if(e.parent){var t=e.parent.model.children;t.splice(t.indexOf(e.model),1)}})),a.forEach((function(e){e.destroy();var n=t.selector.selections.indexOf(e);-1!==n&&t.selector.selections.splice(n,1),delete r[e.model.id]})),this._draw(s),this.emit("afterchange",s),{eventObj:s,deletedModelsInfo:l}}}},{key:"remove",value:function(e){return Array.isArray(e)||(e=[e]),this._remove(e)}}]),n}(Vl)))),Zl=function(){function e(t){m()(this,e),c()(this,"cell",void 0),c()(this,"destroyed",!1),c()(this,"shapeElement",void 0),this.cell=t}return g()(e,[{key:"render",value:function(){}},{key:"update",value:function(){}},{key:"draw",value:function(){}},{key:"drawInherit",value:function(){}},{key:"drawPosition",value:function(){}},{key:"setDefault",value:function(){}},{key:"updateState",value:function(){}},{key:"destroy",value:function(){this.destroyed=!0}}]),e}();function Kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window.____lake_diagram_version="2.0.0";var Jl=function(e){j()(n,wo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"Subcells",void 0),c()(P()(e),"subcells",void 0),c()(P()(e),"textareaContentStyleSheets",void 0),c()(P()(e),"x",void 0),c()(P()(e),"y",void 0),c()(P()(e),"opacity",void 0),c()(P()(e),"stroke",void 0),c()(P()(e),"isGroup",void 0),c()(P()(e),"isGeometry",void 0),c()(P()(e),"isLine",void 0),c()(P()(e),"isImage",void 0),c()(P()(e),"isText",void 0),c()(P()(e),"isVertex",void 0),c()(P()(e),"isBoardCell",void 0),c()(P()(e),"stem",void 0),e}return g()(n,[{key:"getOuterWidth",value:function(){return this.model.width}},{key:"shouldRefreshEndEditContent",value:function(){return!1}},{key:"beginEditContent",value:function(){}},{key:"endEditContent",value:function(){}},{key:"isContentEmpty",value:function(){var e=this.html,t=document.createElement("div");return t.innerHTML=e,!t.textContent||"%E2%80%8B"===encodeURI(t.textContent)}},{key:"canTextVerticalAlign",value:function(){return!0}},{key:"canDragCanvas",value:function(){return!0}},{key:"canDelete",value:function(){return!0}},{key:"canFill",value:function(){return!0}},{key:"canStroke",value:function(){return!0}},{key:"canStrokeWidth",value:function(){return!0}},{key:"canStrokeStyle",value:function(){return!0}},{key:"canConnect",value:function(){return!0}},{key:"canRotate",value:function(){return!0}},{key:"canCollapse",value:function(){var e=this.model;return e.children&&e.children.length>0&&!0!==this.collapsed}},{key:"canExpand",value:function(){var e=this.model;return e.children&&e.children.length>0&&!0===this.collapsed}},{key:"canUseAddLineButton",value:function(){return!1}},{key:"canArrange",value:function(){return!!this.isStem}},{key:"canText",value:function(){return!0}},{key:"canUpdateText",value:function(){return this.textareaElement}},{key:"canRound",value:function(){return!1}},{key:"getCanTextCell",value:function(){return this}},{key:"getPadding",value:function(){return[4,4,4,4]}},{key:"center",get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}}},{key:"updateTextareaStyleSheets",value:function(){var e=this.textareaContentStyleSheets,t=this.getPadding(),n=e.find((function(e){return"self"===e.query}));if("self"===n.query){var r=this.getOuterWidth();n.css.width=r?r-t[1]-t[3]+"px":""}}},{key:"getTextareaPosition",value:function(e){return{x:0,y:0}}},{key:"snapAnchor",value:function(e){var t=this,n=this.percentage2Canvas({x:.5,y:.5}),r=[e.x-n.x,e.y-n.y];return this.anchors.map((function(e){var a=t.percentage2Canvas(e);return Ql(Ql({},a),{},{rad:w.b.angle(r,[a.x-n.x,a.y-n.y])})})).sort((function(e,t){return e.rad-t.rad}))}},{key:"getPoint",value:function(e){var t=this.anchors;if("string"==typeof e){var n=t.find((function(t){return t.name===e}));if(n)return this.percentage2Canvas(n)}if("number"==typeof e)if(e>=1&&e<t.length){var r=t[e-1];if(r)return this.percentage2Canvas(r)}else if(e>=0)return this.getPointAtPercent(e);if(Array.isArray(e)){var a=b()(e,2),i=a[0],o=a[1];return e.every((function(e){return e>=0&&e<=1}))?this.percentage2Canvas({x:i,y:o}):{x:i,y:o}}throw new Error("unknown connection point ".concat(e))}},{key:"getKeyShape",value:function(){var e;return Rt(this.graphicGroup,(function(t){if(t.isPath)return e=t,!1})),e}},{key:"isPointInShape",value:function(e){var t=ni(this.canvas2Relative(e)),n=this.getKeyShape();return n.isPointInFill(t)||n.isPointInStroke(t)}},{key:"isPointInFill",value:function(e){var t=ni(this.canvas2Relative(e));return this.getKeyShape().isPointInFill(t)}},{key:"isPointInStroke",value:function(e){var t=ni(this.canvas2Relative(e));return this.getKeyShape().isPointInStroke(t)}},{key:"getIntersectionPoint",value:function(e){var t=this.canvas2Relative(e),n={x:.5*this.width,y:.5*this.height},r=n.x,a=n.y,i=t.x,o=t.y,c=this.getKeyShape().getIntersectionPoint(i,o,r,a),l={x:Dt((c=c||{x:0,y:0}).x/this.width,0,1),y:Dt(c.y/this.height,0,1)};return this.percentage2Canvas(l)}},{key:"getPointAtLength",value:function(e){return this.relative2Canvas(this.getKeyShape().getPointAtLength(e))}},{key:"getPointAtPercent",value:function(e){var t=this.getKeyShape(),n=t.getTotalLength(),r=t.getPointAtLength(e*n);return this.relative2Canvas(r)}},{key:"convertStrokeStyle",value:function(){if("dash"===this.stroke.style){var e=this.stroke.width||1;return{"stroke-dasharray":[e,3*e].join(" ")}}return{"stroke-dasharray":"none"}}},{key:"getAlignBBox",value:function(){return this.getBBox()}},{key:"getKeyShapeBox",value:function(){var e=this.getKeyShape().getBBox(),t=this.x+e.x,n=this.y+e.y;return{x:t,y:n,width:e.width,height:e.height,minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}},{key:"getFullBBox",value:function(){var e=1/0,t=1/0,n=-1/0,r=-1/0;return this.deepEach((function(a){if(a.state.visible){var i=a.getBBox();e=Math.min(e,i.minX),t=Math.min(t,i.minY),n=Math.max(n,i.maxX),r=Math.max(r,i.maxY)}return!0})),{x:e,y:t,width:n-e,height:r-t,minX:e,minY:t,maxX:n,maxY:r}}},{key:"getTextBox",value:function(){return this.getBBox()}},{key:"toBack",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this);if(0!==n&&-1!==n){var r=t[0];e.insertBefore(this,r)}}}},{key:"toFront",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this),r=t.length;if(n!==r-1){var a=t[r-1];e.insertBefore(this,a),e.insertBefore(a,this)}}}},{key:"forward",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this);if(n!==t.length-1){var r=t[n+1];e.insertBefore(r,this)}}}},{key:"backward",value:function(){if(this.isStem){var e=this.diagram,t=e.groupManager.getStemsByZIndex(),n=t.indexOf(this);if(0!==n&&-1!==n){var r=t[n-1];e.insertBefore(this,r)}}}},{key:"updateMatrix",value:function(){if(this.isCacheStale("x","y","width","height","rotate")){var e=this.x,t=this.y,n=this.width,r=this.height,a=this.rotate;this.matrix=si(e,t,n,r,a)}}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{stroke:{width:1},rotate:0,penetratedKeys:["strokeStyle"],multiSelectHighlight:!0,isBoardCell:!0})}}]),n}();function $l(e){var t=e.naturalWidth/e.naturalHeight,n=e.firstInsertRatio?e.naturalWidth*e.firstInsertRatio:e.naturalWidth;return e.width=n>=480?480:n,e.height=e.width/t,e}function es(e){return e<=2?3:e>=2&&e<=4?2:1}c()(Jl,"className","BoardCell");var ts=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"element",void 0),e}return g()(n,[{key:"setDefault",value:function(){var e=this.element;e&&e.hide()}},{key:"updateState",value:function(){var e=this.element,t=this.cell;if(t.state.selected){var n={d:""};n.d=t.borderElement.attr("d"),e.update(n),e.show()}else e.hide()}},{key:"render",value:function(){this.element=new Lr({stroke:"#3384F5",fill:"transparent"}),this.element.css({"pointer-events":"none"}),this.cell.outlineElement=this.element,this.cell.graphicGroup.add(this.element)}},{key:"draw",value:function(){}},{key:"destroy",value:function(){I()(A()(n.prototype),"destroy",this).call(this)}}]),n}();c()(ts,"className","Outline"),c()(ts,"configName","outline"),c()(ts,"zIndex",3);var ns=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"geometryClipPath",void 0),c()(P()(e),"clipPath",void 0),e}return g()(n,[{key:"render",value:function(){var e=this.cell.diagram.defs,t=new ba({id:this.cell.clipPathID}),n=new Lr({"clip-rule":"evenodd","fill-rule":"evenodd"});t.add(n),e.add(t),this.geometryClipPath=n,this.clipPath=t}},{key:"draw",value:function(){var e=this.cell,t=this.geometryClipPath,n=e.outlineElement.attr("d");t.update({d:n})}},{key:"destroy",value:function(){this.geometryClipPath.destroy(),this.clipPath.destroy(),I()(A()(n.prototype),"destroy",this).call(this)}}]),n}();var rs=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"clipPathID",Object(q.a)()),c()(P()(r),"group",new xr),r.subCell=new ns(P()(r)),r.diagram=e.diagram,r}return g()(n,[{key:"getSytle",value:function(){var e=this.cell,t=e.border,n=e.computedProps,r=Zt(t,{fill:!0});return r.stroke=t.stroke||n.treeEdge.stroke,r["stroke-width"]=e.getBorderStrokeWidth(),"line"===t.shape&&(r.stroke="rgba(255,255,255,0)",r.fill="rgba(255,255,255,0)"),r}},{key:"render",value:function(){var e=this.cell;this.element=new Lr,this.group.add(this.element),this.group.update({"clip-path":"url(#".concat(this.clipPathID,")")}),e.graphicGroup.add(this.group),e.borderElement=this.element,this.outlineElement=this.element,this.subCell.render()}},{key:"drawInherit",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=e.width,a=e.height,i=e.border,o=i.outer,c=i.radius,l=i.shape,s=this.getSytle(),u=Kt(s,n.borderStyle,["stroke","fill","stroke-width"]);u["stroke-width"]&&(u["stroke-width"]*=2),r===n.width&&a===n.height&&we()(i,n.border)||(u.d=function(e){var t=e.radius,n=e.outer,r=e.width+2*n,a=e.height+2*n;return"capsule"===e.shape&&(t=r<a?r/2:a/2),wn(-n,-n,r,a,t)}({radius:c,outer:o,width:r,height:a,shape:l})),Object.keys(u).length>0&&(t.update(u),this.subCell.draw(),n.borderStyle=s)}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();c()(rs,"className","Border"),c()(rs,"configName","border"),c()(rs,"zIndex",1);var as=_r,is=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var e=this.cell,t=new as;this.element=t,e.imageElement=t}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.graphicGroup,r=e.image,a=e.contentBox,i=e.diagram.imageManager,o=e.getPadding();if(r.src){if(n.children.includes(t)||n.add(t),r){var c=r.src,l=r.width,s=r.height,u=r.naturalWidth,d=r.naturalHeight;t.update({x:a.x+(a.width-r.width)/2,y:o[0],width:l,height:s}),t.dataset({raw_src:r.src}),i.setImageHref(t,c,u,d)}}else t.remove()}},{key:"destroy",value:function(){this.element.destroy(),I()(A()(n.prototype),"destroy",this).call(this)}}]),n}();c()(is,"className","ImageSubcell"),c()(is,"configName","image"),c()(is,"zIndex",2);var os=Nr,cs=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this,e);var a=e.note,i=a.width,o=a.height,c=a.padding;return r.size=[i+c[1]+c[3],o+c[0]+c[2]],r}return g()(n,[{key:"render",value:function(){var e=this.cell.note,t=e.width,n=e.height,r=new os({width:t,height:n}),a=r.htmlContainer;a.classList.add("lake-diagram-note"),a.classList.add("lake-icon"),a.classList.add("lake-icon-diagram-cell-note"),a.style.cursor="pointer",a.style["vertical-align"]="top",a.style.color="#8C8C8C",a.style["font-size"]=t+"px",a.style.width=t+"px",a.style.height=n+"px",a.style["line-height"]=t+"px",this.element=r}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.model,r=e.note,a=e.graphicGroup,i=e.width,o=e.height,c=e.border;n.note?(t.attr({x:i-r.width-r.padding[1],y:(o-r.height)/2}),c.fill&&(t.htmlContainer.style.color=Ma(c.fill)),a.add(t)):t.remove()}}]),n}();function ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(cs,"className","Note"),c()(cs,"zIndex",3);var ss=Nr,us=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new ss({styleSheets:e.textareaContentStyleSheets,html:e.html});n.htmlContainer.classList.add("selection-transparent"),t.add(n),this.element=n,e.textareaElement=n,e.textarea=this,this.initCalculatedDOM()}},{key:"initCalculatedDOM",value:function(){var e=this.cell.diagram,t=document.createElement("div");e.calculatedContainer.appendChild(t),this.calculatedDOM=t}},{key:"update",value:function(){var e=this.cell,t=this.calculatedDOM,n=e.cache,r=e.textareaContentStyleSheets;n.html!==e.html&&(t.innerHTML=e.html),e.updateTextareaStyleSheets(),["html","width","height","image","textHeight","textWidth"].some((function(t){return n[t]!==e[t]}))&&(Ut(t,r),this._setBBox())}},{key:"getPosition",value:function(){var e=this.cell,t=this.getBBox();return e.getTextareaPosition(t)}},{key:"calculateBBox",value:function(){var e=this.calculatedDOM;e.style.display="inline-block";var t=e.getBoundingClientRect();return e.style.display="none",{x:t.x,y:t.y,width:Math.ceil(t.width),height:Math.ceil(t.height)}}},{key:"_setBBox",value:function(){this.box=this.calculateBBox()}},{key:"getBBox",value:function(){return this.box}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.box,r=e.cache,a=e.textareaContentStyleSheets,i={};r.html!==e.html&&(i.html=e.html),["html","width","height","textWidth","textHeight","textVerticalAlign"].some((function(t){return r[t]!==e[t]}))&&(Ut(t.htmlContainer,a),Object.assign(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ls(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:n.width+2,height:n.height},this.getPosition()))),Object.keys(i).length>0&&(t.update(i),"read"===e.diagram.interaction.currentMode&&t.htmlContainer.querySelectorAll("a").forEach((function(e){var t=e.href,n=window.location.origin+window.location.pathname;(t===n||t.startsWith(n+location.search+"#"))&&e.removeAttribute("target")})))}},{key:"destroy",value:function(){this.element.destroy(),this.calculatedDOM.remove()}}]),n}();c()(us,"className","Textarea"),c()(us,"configName","textarea"),c()(us,"zIndex",2);var ds=function(e){j()(n,us);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"calculateBBox",value:function(){var e=I()(A()(n.prototype),"calculateBBox",this).call(this),t=this.cell,r=this.calculatedDOM,a=t.image&&t.image.src;return r.textContent||t.state.beginEdit||!a?e:{width:e.width+1,height:0}}},{key:"getPosition",value:function(){var e=this.cell,t=e.image,n=e.contentBox,r=t&&t.src&&t.height+2||0;return{x:n.x,y:n.y+r}}}]),n}();c()(ds,"className","Textarea");var hs=[rs,ts,is,cs,ds],fs=function(e){j()(n,Jl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t=this;I()(A()(n.prototype),"init",this).call(this,e),this.model.children||(this.model.children=[]),this.Subcells.sort((function(e,t){return e.zIndex-t.zIndex})),this.Subcells.forEach((function(e){var n=e.configName;n&&!t[n]&&(t[n]={},!t.default[n]&&(t.default[n]={}))})),this.initSubcell(),this.render(),this.eventDelegation()}},{key:"minWidth",get:function(){var e=this.border;if(e){var t=e.shape;if("rect"===t)return 38;if("capsule"===t)return 42}return 32}},{key:"minHeight",get:function(){return 16}},{key:"isPlaceholder",get:function(){return this.model.isPlaceholder}},{key:"updateTextareaStyleSheets",value:function(){for(var e=this.textareaContentStyleSheets,t=this.model,n=this.minWidth,r=this.minHeight,a=this.subcells,i=this.getPadding(),o=i[1]+i[3]+this.getNoteWidth(),c=i[0]+i[2],l=a.find((function(e){return e instanceof ds})),s=0;s<e.length;s++){var u=e[s];"self"===u.query&&(t.width?(u.css.width=t.width-o+"px",u.css["max-width"]=""):t.image&&t.image.src&&t.image.width?l.calculateBBox().width<t.image.width&&(u.css.width=t.image.width-1+"px",u.css["max-width"]=""):(u.css["max-width"]="480px",u.css.width=""),u.css["min-width"]=n-o+"px",u.css["min-height"]=r-c+"px")}}},{key:"getBBox",value:function(){var e=this.graphicGroup.rendererElement.getBBox(),t=this.x+e.x,n=this.y+e.y;return{x:t,y:n,width:e.width,height:e.height,minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}},{key:"getTimelineLayoutAlign",value:function(){var e=this.getTimelineLayoutSourceCell(),t="";return[e,this].forEach((function(e){e&&"line"===e.border.shape?t+="b":t+="c"})),t}},{key:"getTimelineLayoutSourceCell",value:function(){var e=this.parent;if(this.isStem)return null;var t=this.getNth();return 0===t?e:this.getSiblings()[t-1]}},{key:"showCollapsedButton",value:function(){this.state.collapsedButtonVisible||(this.state.collapsedButtonVisible=!0,this.updateState())}},{key:"hideCollapsedButton",value:function(){this.state.collapsedButtonVisible&&(this.state.collapsedButtonVisible=!1,this.updateState())}},{key:"findSubcell",value:function(e){return this.subcells.find((function(t){return t.constructor.className===e}))}},{key:"shouldRefreshEndEditContent",value:function(){return this.isContentEmpty()&&this.image&&this.image.src}},{key:"canStroke",value:function(){return"line"!==this.border.shape}},{key:"canRotate",value:function(){return!1}},{key:"canStrokeWidth",value:function(){return!1}},{key:"canStrokeStyle",value:function(){return!1}},{key:"canFill",value:function(){return"line"!==this.border.shape}},{key:"get",value:function(e){var t=I()(A()(n.prototype),"get",this).call(this,e);return"border"===e?(t.stroke=t.stroke||this.computedProps.treeEdge.stroke,t["stroke-width"]=this.getBorderStrokeWidth(),t):"treeEdge"===e?(t.stroke=this.computedProps.treeEdge.stroke,t["stroke-width"]=this.getTreeEdgeStrokeWidth(),t):t}},{key:"getKeyShape",value:function(){return this.borderElement}},{key:"getPadding",value:function(){return[4,8,4,8]}},{key:"getBorderStrokeWidth",value:function(){return this.border["stroke-width"]||this.getDefaultStrokeWidth()}},{key:"getTreeEdgeStrokeWidth",value:function(){return this.computedProps.treeEdge["stroke-width"]||this.getDefaultStrokeWidth()}},{key:"getDefaultStrokeWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.depth,t=this.stem,n=t.tapered;return n&&es(e)||3}},{key:"initSubcell",value:function(){var e=this;this.subcells=this.Subcells.map((function(t){return new t(e)}))}},{key:"eventDelegation",value:function(){var e=this.graphicGroup,t=this.imageElement;this.delegateEvent(t,"mouseenter","mindmapcellimage:mouseenter"),this.delegateEvent(t,"mouseleave","mindmapcellimage:mouseleave"),this.delegateEvent(e,"mouseenter","mindmapcell:mouseenter"),this.delegateEvent(e,"mouseleave","mindmapcell:mouseleave")}},{key:"render",value:function(){this.subcells.forEach((function(e){e.render()})),this.updateModel(this.model)}},{key:"draw",value:function(){this.drawInner(),this.updateCache(),this.updateState()}},{key:"updateModel",value:function(e){e&&""===e.html&&(e.html="&#8203;"),I()(A()(n.prototype),"updateModel",this).call(this,e),this.calculate()}},{key:"isInCollapsed",value:function(){for(var e=this.parent;e;){if(!0===e.collapsed)return!0;e=e.parent}return!1}},{key:"getCellQuadrant",value:function(){for(var e=this;1!==e.depth;)e=e.parent;return e.model.quadrant}},{key:"drawInner",value:function(){this.subcells.forEach((function(e){e.draw()})),this.drawCollapse(),this.drawPosition()}},{key:"drawInherit",value:function(){this.subcells.forEach((function(e){e.drawInherit()}))}},{key:"drawPosition",value:function(){this.subcells.forEach((function(e){e.drawPosition()}));var e=this.graphicGroup,t=this.x,n=this.y,r=this.cache;if(!r.matrix||t!==r.matrix[6]||n!==r.matrix[7]){var a=[1,0,0,0,1,0,t,n,1];e.update({matrix:a}),r.matrix=a,this.matrix=a}}},{key:"drawCollapse",value:function(){this.isInCollapsed()?this.hide():this.show()}},{key:"getNoteWidth",value:function(){return this.model.note&&this.findSubcell("Note").size[0]||0}},{key:"calculate",value:function(){this.calculateSize()}},{key:"calculateSize",value:function(){var e=this,t=this.cache,n=this.getPadding(),r={noteWidth:this.getNoteWidth(),padding:n},a=this.findSubcell("Textarea");a.update(),this.textareaBBox=a.getBBox(),t.html&&this.html&&t.html!==this.html&&(this.model.height=null),["width","height","html","image"].some((function(n){return t[n]!==e[n]}))&&(this.calculateImageSize(r),this.contentHeight=this.getContentHeight(r),this.contentWidth=this.getContentWidth(r),this.height=this.getHeight(r),this.width=this.getWidth(r),this.contentBox=this.getContentBox(r))}},{key:"getContentBox",value:function(e){var t=e.padding,n=e.noteWidth,r=this.width,a=this.contentWidth,i=this.contentHeight;return{x:(r-a-t[1]-t[3]-n)/2+t[3],y:t[0],width:a,height:i}}},{key:"getHasModelSizeContentWidth",value:function(e,t){var n,r=this.model,a=this.border,i=e[1]+e[3]+t,o=r.width-i;return"capsule"===a.shape&&(n=r.width>r.height?r.width-r.height+i:r.width/2,o=Math.min(o,n)),o}},{key:"calculateImageSize",value:function(e){var t=e.padding,r=e.noteWidth,a=this.image,i=this.model;if(!a.height||i.height){if(!a.src)return Object.assign(a,{width:0,height:0});var o=a.naturalWidth/a.naturalHeight,c=this.getTextareaHeight(),l=this.getHasModelSizeContentWidth(t,r),s=i.height-t[0]-t[2]-c-4,u=((s=Math.max(s>0?s:0,36))>0?l/s:o)<=o?l/o:s,d=u*o;I()(A()(n.prototype),"updateModel",this).call(this,{image:{width:d,height:u}})}}},{key:"getWidth",value:function(e){var t,n=e.padding,r=e.noteWidth,a=this.isPlaceholder,i=this.model,o=this.border,c=this.contentWidth,l=this.contentHeight;if(a)return i.width;if(i.width)t=i.width;else if(t=c+n[1]+n[3]+r,"capsule"===o.shape){var s=n[1]+n[3];l>s&&(t+=l-s)}return _t(Math.ceil(t),this.minWidth)}},{key:"getHeight",value:function(e){var t=e.padding;return this.isPlaceholder?this.model.height:_t(this.contentHeight+t[0]+t[2],this.minHeight)}},{key:"getContentWidth",value:function(e){var t=e.padding,n=e.noteWidth,r=this.textareaBBox,a=this.image,i=this.model;return i.width?i.width-n-t[1]-t[3]:Math.ceil(Math.max(r.width,a.width))||100}},{key:"getTextareaHeight",value:function(){var e=this.textareaBBox,t=this.image,n=this.diagram;return t.src&&this.isContentEmpty()&&!n.contentEditor.isBegin?0:e.height}},{key:"getContentHeight",value:function(){var e=this.image,t=this.getTextareaHeight();return Math.ceil(t+e.height)}},{key:"updateState",value:function(){this.setDefault(),this.subcells.forEach((function(e){e.updateState()}))}},{key:"setDefault",value:function(){this.subcells.forEach((function(e){e.setDefault()}))}},{key:"updateCache",value:function(){this.cache.width=this.width,this.cache.height=this.height,this.cache.html=this.html,this.cache.collapsed=this.collapsed}},{key:"preventDelete",value:function(){return!1}},{key:"beginEditContent",value:function(){this.state.beginEdit=!0,this.updateState()}},{key:"endEditContent",value:function(){this.state.beginEdit=!1,this.updateState()}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"destroy",value:function(){this.subcells.forEach((function(e){e.destroy()})),I()(A()(n.prototype),"destroy",this).call(this)}},{key:"getNewQuadIndexByNewRealIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.quadrantTreeLists[t-1],r=n.findIndex((function(t){return t>=e}));return-1!==r?r:n.length}},{key:"mindmapParent",get:function(){var e=this.parent;return e&&e.isMindmap?e:void 0}},{key:"quadrantTreeLists",get:function(){var e=this.getChildren();if(this.isTwoQuadrantLayout){var t=[[],[]];return e.forEach((function(e,n){var r=e.model,a=r.layout,i=(a=void 0===a?{}:a).quadrant,o=void 0===i?1:i,c=r.abstract,l=Math.min(2,Math.max(1,o));c||t[l-1].push(n)})),t}return[Se()(e.filter((function(e){return!e.model.abstract})).length)]}},{key:"isTwoQuadrantLayout",get:function(){return n.modelIsTwoQuadrantLayout(this.model)}},{key:"realQuadrant",get:function(){var e=this.mindmapParent;if(e){var t=this.model.layout,n=(t=void 0===t?{}:t).quadrant,r=void 0===n?1:n;if(e.layoutQuadrantConstraint&&e.layoutQuadrantConstraint.length>1)return r}return 1}},{key:"quadrantNth",get:function(){var e=this.parent&&this.parent.isTwoQuadrantLayout,t=this.getNth();if(e){var n=this.parent.quadrantTreeLists[this.realQuadrant-1];if(!this.isAbstract)return n.indexOf(t)}return this.parent&&this.parent.isMindmap?t:-1}},{key:"abstractCoveredCells",get:function(){var e=this.model,t=e.abstract,n=e.start,r=e.end,a=this.realQuadrant;if(this.parent&&t&&void 0!==n&&void 0!==r){var i=this.parent.getChildren();return this.parent.quadrantTreeLists[a-1].slice(n,r+1).map((function(e){return i[e]}))}return[]}},{key:"abstractCoveredCellsWithAllChildren",get:function(){var e=this.model,t=e.abstract,n=e.start,r=e.end,a=this.realQuadrant;if(this.parent&&t&&void 0!==n&&void 0!==r){var i=this.parent.getChildren();return this.parent.quadrantTreeLists[a-1].slice(n,r+1).map((function(e){return i[e]})).reduce((function(e,t,n){return e.concat(t).concat(t.getAllChildren())}),[])}return[]}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{x:0,y:0,rotate:0,collapsed:!1,html:"&#8203;",layout:{},image:{width:0,height:0},note:{width:14,height:14,padding:[0,8,0,0]},anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],Subcells:hs,penetratedKeys:["x","y","width","collapsed","quadrant","zIndex","html","layout","rainbow","tapered","note","treeEdge"].concat(hs.map((function(e){return e.configName}))),isMindmap:!0,multiSelectHighlight:!1,resizeRotatePoints:["tr"]})}},{key:"modelIsTwoQuadrantLayout",value:function(e){var t=e.layout,n=(t=void 0===t?{}:t).type,r=void 0===n?"standard":n,a=t.quadrantConstraint,i=void 0===a?void 0:a;return"mindmap"===e.type&&"standard"===r&&(!i||i.length>1)}}]),n}();function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ms(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ys(e){"flowchart"===e.type&&(e.type="geometry"),"edge"===e.type&&(e.type="line")}function gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(fs,"className","MindmapBase");var vs=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"group",void 0),c()(P()(e),"shapeElement",void 0),e}return g()(n,[{key:"render",value:function(){var e=this.cell,t=new xr;this.group=t,Hn(e)?e.clipGroup.add(this.group):Kn(e)?e.group.add(this.group):e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.group,n=e.createOutlineShapeElement();if(n){if(t.clear(),Zn(e)){var r=e.stencil.outline;r.style&&n.css(r.style)}t.add(n),this.shapeElement=n,e.outlineElement=n}}},{key:"draw",value:function(){var e=this.cell,t=this.shapeElement,n=e.stroke,r=e.fill,a=e.stencil;if(n){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.convertStrokeStyle()),o=e.getOutlinePath(t);o&&(i.d=o);var l=n.width;a&&!1!==a.isClip&&(l*=2),e.isCacheStale("stroke")&&Object.assign(i,{stroke:n.color,"stroke-width":l}),e.isCacheStale("fill")&&(i.fill=r.color),Kn(e)&&(i.fill="transparent"),t.update(i)}}}]),n}();function bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}["getTotalLength","isPointInFill","isPointInStroke"].forEach((function(e){Object.defineProperty(vs.prototype,e,{value:function(){var t;return(t=this.shapeElement)[e].apply(t,arguments)}})}));var xs=function(e){j()(n,Jl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"textareaContentStyleSheets",void 0),c()(P()(e),"rotate",void 0),c()(P()(e),"fill",void 0),c()(P()(e),"textareaRegion",void 0),c()(P()(e),"textVerticalAlign",void 0),c()(P()(e),"outlineElement",void 0),c()(P()(e),"clipPathID",Object(q.a)()),c()(P()(e),"clipGroup",new xr),e}return g()(n,[{key:"init",value:function(e){I()(A()(n.prototype),"init",this).call(this,e),this.initSubcell(),this.eventDelegation(),this.render()}},{key:"canUseAddLineButton",value:function(){return!0}},{key:"initSubcell",value:function(){var e=this;this.subcells=this.Subcells.map((function(t){return new t(e)}))}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"eventDelegation",value:function(){var e=this.graphicGroup;this.delegateEvent(e,"mouseenter","vertexcell:mouseenter"),this.delegateEvent(e,"mouseleave","vertexcell:mouseleave")}},{key:"draw",value:function(){this.subcells.forEach((function(e){return e.draw()})),this.graphicGroup.attr({opacity:this.opacity}),this.drawPosition(),this.updateCache()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["x","y","width","height","rotate","shape","fill","stroke","controlPoints","round"].forEach((function(n){var r=e[n];t[n]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e),this.graphicGroup.prepend(this.clipGroup)}},{key:"getTextareaPosition",value:function(e){var t=this.width,n=this.height,r=this.getPadding(),a=e.height;return{x:Math.max((t-e.width)/2,r[3]),y:(n-a)/2}}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t})}}},{key:"updateMatrix",value:function(){if(this.isCacheStale("x","y","width","height","rotate")){var e=this.x,t=this.y,n=this.width,r=this.height,a=this.rotate;this.matrix=si(e,t,n,r,a)}}},{key:"getKeyShape",value:function(){var e;return null===(e=this.subcells.find((function(e){return e instanceof vs})))||void 0===e?void 0:e.shapeElement}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),I()(A()(n.prototype),"destroy",this).call(this)}},{key:"beforeUpdateModel",value:function(e){if(this.constraints&&this.constraints.proportion){var t=this.width/this.height;e.height>0&&null==e.width?e.width=e.height*t:e.width>0&&(e.height=e.width/t)}}},{key:"afterUpdateModel",value:function(){this.updateMatrix(),this.subcells.forEach((function(e){e.update()})),this.stencil&&(!1===this.stencil.isClip?this.clipGroup.update({"clip-path":"none"}):this.clipGroup.update({"clip-path":"url(#".concat(this.clipPathID,")")}))}},{key:"updateModel",value:function(e){this.beforeUpdateModel(e),I()(A()(n.prototype),"updateModel",this).call(this,e),this.afterUpdateModel()}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{html:"",x:0,y:0,rotate:0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],opacity:1,penetratedKeys:["x","y","width","height","category","stroke","fill","rotate","html","shape","image","constraints","opacity"],textareaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":"Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif","min-height":"24px","min-width":"24px","line-height":"1.74","word-break":"break-word","font-feature-settings":'"tnum"',"font-variant":"tabular-nums",margin:0,color:"#262626"}}],Subcells:[vs,ns],isVertex:!0})}}]),n}();function ks(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ws(e){switch((e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ks(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"stroke-linecap":"square","stroke-linejoin":"round"},e)).name){case"rect":return new Fr(e);case"ellipse":return new Gr(e);case"polygon":return new na(e);default:return new Lr(e)}}c()(xs,"className","VertexCell");var Cs=function(e){j()(n,xs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"textarea",void 0),e}return g()(n,[{key:"getTextareaPosition",value:function(e){var t=this.textareaRegion,n=this.textVerticalAlign,r={x:t.minX,y:0};return r.y="top"===n?t.minY:"bottom"===n?t.maxY-e.height:(t.minY+t.maxY-e.height)/2,r}},{key:"_updateSize",value:function(){var e=this.subcells.find((function(e){return e instanceof us})),t=this.getPadding();e.update();var n=e.getBBox();n&&(this.width="number"!=typeof this.model.width?n.width+t[1]+t[3]:this.width,this.height="number"!=typeof this.model.height?n.height+t[1]+t[3]:this.height)}},{key:"_updateTextareaRegion",value:function(){var e=this.width,t=this.height;this.textareaRegion={minX:4,minY:4,maxX:e-4,maxY:t-4}}},{key:"afterUpdateModel",value:function(){this._updateSize(),this._updateTextareaRegion(),I()(A()(n.prototype),"afterUpdateModel",this).call(this)}},{key:"createOutlineShapeElement",value:function(){if(this.isCacheStale("shape"))return ws({name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1})}},{key:"getOutlinePath",value:function(e){if(this.isCacheStale("width","height","shape")){var t=this.width/120,n=this.height/60;return e.getPath(t,n)}return null}},{key:"getPadding",value:function(){return[4,4,4,4]}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{fill:{color:"rgba(255,255,255,0)"},shape:"text",stroke:{width:1},isText:!0,Subcells:[us],penetratedKeys:["textVerticalAlign"]})}}]),n}();function Es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Cs,"className","TextCell");var Ps=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"element",void 0),c()(P()(e),"hitElement",void 0),e}return g()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n={"stroke-linejoin":"round"},r=new Lr(n);r.update({"clip-path":"url(#".concat(e.clipPathID,")")});var a=new Lr(n);t.add(r),this.element=r,this.hitElement=a,e.wireElement=r}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.hitElement,r=e.d,a=e.stroke,i=e.graphicGroup,o={d:r};t.update(Os(Os({stroke:a.color,"stroke-width":a.width,fill:"none"},e.convertStrokeStyle()),o)),!n.parent&&i.insertAfter(n,t),n.update({stroke:"rgba(255,255,255,0)","stroke-width":a.width+8,fill:"none",d:o.d})}},{key:"destroy",value:function(){this.element.destroy(),this.hitElement.destroy(),I()(A()(n.prototype),"destroy",this).call(this)}}]),n}(),Ms={none:function(){return{baseOffset:0,pc:0,path:[]}},"open-triangle":function(e){return{baseOffset:0,pc:1,fill:"none",path:[["M",-1*e,-1*e*Math.sin(pi(30))],["L",0,0],["L",-1*e,e*Math.sin(pi(30))]]}},"one-side-up":function(e){return{baseOffset:0,pc:0,fill:"none",path:[["M",0,0],["L",-1*e,-1*e*Math.sin(pi(30))]]}},"one-side-down":function(e){return{baseOffset:0,pc:0,fill:"none",path:[["M",0,0],["L",-1*e,e*Math.sin(pi(30))]]}},arrow:function(e){return{baseOffset:2*e*Math.cos(pi(20))-e,pc:1/(2*Math.sin(pi(20))),path:[["M",-e*Math.cos(pi(20)),-e*Math.sin(pi(20))],["A",e,e,20,0,1,-e*Math.cos(pi(20)),e*Math.sin(pi(20))],["L",0,0],["Z"]]}},"hollow-triangle":function(e){return{baseOffset:e,pc:1,fill:"white",path:[["M",0,0],["L",-1*e,-1*e*Math.sin(pi(30))],["L",-1*e,e*Math.sin(pi(30))],["Z"]]}},"sharp-solid-square":function(e){var t=e/=2,n=Math.tan(pi(60))*t;return{baseOffset:2*n,pc:1,path:[["M",0,0],["L",-n,-t],["L",-2*n,0],["L",-n,t],["Z"]]}},"sharp-hollow-square":function(e){var t=e/=2,n=Math.tan(pi(60))*t;return{baseOffset:2*n,pc:1,fill:"white",path:[["M",0,0],["L",-n,-t],["L",-2*n,0],["L",-n,t],["Z"]]}},"flat-solid-square":function(e){return{baseOffset:2*(e*=Math.tan(pi(30))),pc:.5,path:[["M",0,-1*e],["L",-2*e,-1*e],["L",-2*e,e],["L",0,e],["Z"]]}},"flat-hollow-square":function(e){return{baseOffset:2*(e*=Math.tan(pi(30))),pc:.5,fill:"white",path:[["M",0,-1*e],["L",-2*e,-1*e],["L",-2*e,e],["L",0,e],["Z"]]}},"solid-circle":function(e){return{baseOffset:2*(e*=Math.tan(pi(30))),pc:.5,path:On(-1*e,0,e)}},"hollow-circle":function(e){return{baseOffset:2*(e*=Math.tan(pi(30))),pc:.5,fill:"white",path:On(-e,0,e)}},"cross-circle":function(e){var t=-(e*=Math.tan(pi(30))),n=e;return{baseOffset:2*e,pc:.5,fill:"white",path:On(t,0,n)+kn([["M",t,-n],["L",t,n],["M",-2*n,0],["L",0,0]])}},"half-open-circle":function(e){return{baseOffset:e*=Math.tan(pi(30)),pc:0,fill:"none",path:[["M",0,0],["m",0,-e],["A",e,e,0,1,0,0,e]]}},"end-vertical-line":function(e){return{baseOffset:0,pc:.5,fill:"none","stroke-linecap":"square",path:[["M",0,-(e*=Math.tan(pi(30)))],["L",0,e]]}},"middle-vertical-line":function(e){return{baseOffset:e/=1.5,pc:0,fill:"none",path:[["M",-1*e,2*-e/3],["L",-1*e,2*e/3],["M",-1*e,0],["L",0,0]]}},"double-vertical-line":function(e){var t=2*(e/=1.5)/3;return{baseOffset:2*e,pc:0,fill:"none",path:[["M",-2*e,-t],["L",-2*e,t],["M",-e,-t],["L",-e,t],["M",-2*e,0],["L",0,0]]}},"single-slash":function(e){return{baseOffset:e/=1.5,pc:0,path:[["M",0,0],["L",-e,0],["M",-(e+e*Math.cos(pi(60))),-e*Math.sin(pi(60))],["L",-(e-e*Math.cos(pi(60))),e*Math.sin(pi(60))]]}},"three-line":function(e){return{baseOffset:e,pc:0,fill:"none",path:[["M",-1*e,0],["L",0,0],["M",-1*e,0],["L",0,-1*Math.sin(pi(30))*e],["M",-1*e,0],["L",0,Math.sin(pi(30))*e]]}},"three-line-plus-vertical":function(e){var t=Math.sin(pi(30))*e;return{baseOffset:e,pc:0,fill:"none",path:[["M",-e,0],["L",0,0],["M",-e,0],["L",0,-t],["M",-e,0],["L",0,t],["M",-e,-t],["L",-e,t]]}},"three-line-plus-circle":function(e){var t=Math.sin(pi(30))*e,n=-e-t;return{baseOffset:e+2*t,pc:0,fill:"white",path:kn([["M",-e,0],["L",0,0],["M",-e,0],["L",0,-t],["M",-e,0],["L",0,t]])+On(n,0,t)}},"circle-vertical":function(e){var t=.5*e,n=-(e+t);return{baseOffset:2*e,pc:0,fill:"white",path:kn([["M",-t,-t],["L",-t,t],["M",0,0],["L",-e,-0]])+On(n,0,t)}}},js=["none","open-triangle","one-side-up","one-side-down","arrow","hollow-triangle","sharp-solid-square","sharp-hollow-square","flat-solid-square","flat-hollow-square","solid-circle","hollow-circle","cross-circle","half-open-circle","end-vertical-line","middle-vertical-line","double-vertical-line","single-slash","three-line","three-line-plus-vertical","three-line-plus-circle","circle-vertical"];var Ss=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e,r){var a;return m()(this,n),(a=t.call(this,e)).type=r,c()(P()(a),"element",void 0),c()(P()(a),"group",void 0),c()(P()(a),"stencil",void 0),c()(P()(a),"sp",void 0),c()(P()(a),"ep",void 0),c()(P()(a),"cell",void 0),a.cell=e,a}return g()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new xr,r=new Lr({"stroke-miterlimit":"10"});n.update({"clip-path":"url(#".concat(e.clipPathID,")")}),n.add(r),this.element=r,this.group=n,t.add(this.group)}},{key:"getEndPointName",value:function(){var e=this.cell;return("tip"===this.type?e.target.marker:e.source.marker)||"none"}},{key:"getOhterEndPointName",value:function(){var e=this.cell;return("tail"===this.type?e.target.marker:e.source.marker)||"none"}},{key:"getRatio",value:function(){return 6+2*(this.cell.stroke.width-1)}},{key:"update",value:function(){var e=this.cell,t=this.type,n=this.getEndPointName(),r=this.getRatio();this.stencil=Ms[n](r);var a=this.stencil,i=a.baseOffset,o=a.pc,c=Ms[this.getOhterEndPointName()](r),l=c.baseOffset+c.pc,s=i+e.stroke.width*o;e["".concat(t,"Offset")]=s;var u=e.getPoints();if(Array.isArray(u)){var d=u.length,h=u[0],f=u[1];if("tip"===t&&(h=u[d-1],f=u[d-2]),h&&f){var p=xi(h,f),m=e.target.marker&&"none"!==e.target.marker&&e.source.marker&&"none"!==e.source.marker?40:20;if(p<=(m=Math.max(m,s+l+20))){var y=Dt(p/m*r,.01,r);this.stencil=Ms[n](y);var g=this.stencil,v=g.baseOffset,b=g.pc;s=v+e.stroke.width*b}e["".concat(t,"Offset")]=s}}}},{key:"computeEndPoints",value:function(){this.update();var e,t,n,r,a=this.type,i=this.cell,o=i.d,c=i.shape,l=bn(o),s=this.cell.getPoints();if("curve"===c){if(l.length<=1)return;if("tail"===a)e=s[0].x,t=s[0].y,n=l[1][1],r=l[1][2];else{var u=s.length;if(e=s[u-1].x,t=s[u-1].y,2===s.length)n=l[1][3],r=l[1][4];else if(3===s.length)n=l[1][1],r=l[1][2];else{var d=l.length-1;n=l[d][3],r=l[d][4]}}}else if("tail"===a)if("straight"===c)e=s[0].x,t=s[0].y,n=s[1].x,r=s[1].y;else{e=s[0].x,t=s[0].y;var h=b()(l[1],3);n=h[1],r=h[2]}else if("straight"===c){var f=s.length;e=s[f-1].x,t=s[f-1].y,n=s[f-2].x,r=s[f-2].y}else{e=s[s.length-1].x,t=s[s.length-1].y;var p=b()(l[l.length-2],3);n=p[1],r=p[2]}this.sp={x:n,y:r},this.ep={x:e,y:t}}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.type,r=e.stroke;if(this.computeEndPoints(),this.ep&&this.sp){var a=[1,0,0,0,1,0,-1*e.stroke.width*this.stencil.pc,0,1],i=[1,0,0,0,1,0,this.ep.x,this.ep.y,1],o=w.a.rotate([],[1,0,0,0,1,0,0,0,1],Ci(this.sp.x,this.sp.y,this.ep.x,this.ep.y)),c=a;if("tail"===n){var l=e.source.marker;"one-side-up"!==l&&"one-side-down"!==l&&"single-slash"!==l||w.a.multiply(c,[1,0,0,0,-1,0,0,0,1],c)}w.a.multiply(c,o,c),w.a.multiply(c,i,c),t.update({stroke:r.color,d:this.stencil.path,"stroke-width":e.stroke.width,"stroke-linecap":this.stencil["stroke-linecap"]||"butt",fill:this.stencil.fill||r.color,matrix:c}),t.dataset({test_id:("tip"===n?e.target.marker:e.source.marker)||"none"})}}},{key:"destroy",value:function(){this.group.destroy(),I()(A()(n.prototype),"destroy",this).call(this)}}]),n}(),Rs=function(){function e(t){m()(this,e),c()(this,"line",void 0),c()(this,"points",void 0),this.line=t}return g()(e,[{key:"getFirstInsertControlPoints",value:function(){return!1}},{key:"getTextareaPosition",value:function(){return this.line.getPointByPercent(void 0===this.line.textPosition?.5:this.line.textPosition)}},{key:"getControlPointButtonPosition",value:function(e){return this.line.controlPoints[e]}},{key:"updatePoints",value:function(){var e=this.line,t=e.source,n=e.target,r=e.sourceCell,a=e.targetCell,i=e.controlPoints.map((function(e){var t=b()(e,2);return{x:t[0],y:t[1]}})).filter((function(e){return!isNaN(e.x)})),o=i.length,c=e.getEndpoint(t),l=e.getEndpoint(n);if(ri(c)&&ri(l))if(c&&l){if(c.x===l.x&&c.y===l.y&&0===i.length)return l.x+=2,l.y+=2,void(this.points=[c,l]);"elbow"===e.shape?(r&&!t.connection&&(c=r.snapAnchor(i[0]||l)[0]),a&&!n.connection&&(l=a.snapAnchor(i[o-1]||c)[0])):(r&&!t.connection&&(c=r.getIntersectionPoint(i[0]||l)),a&&!n.connection&&(l=a.getIntersectionPoint(i[o-1]||c))),this.points=[c].concat(i).concat(l)}else this.points=[c,l]}},{key:"getPoints",value:function(){return this.points||this.updatePoints(),this.points}},{key:"getPath",value:function(){return""}}]),e}();var Ls=function(e){j()(n,Rs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"getPath",value:function(){var e=this.line,t=e.getPoints(),n=e.tipOffset,r=e.tailOffset,a=t[t.length-1],i=t[t.length-2],o=wi(i.x,i.y,a.x,a.y,n),c=t[0],l=t[1],s=[wi(l.x,l.y,c.x,c.y,r)];return 0===e.controlPoints.length?s.push(o):s=s.concat(e.controlPoints.map((function(e){var t=b()(e,2);return{x:t[0],y:t[1]}})).filter((function(e){return!isNaN(e.x)})),o),Cn(s)}}]),n}();var As=function(e){j()(n,Rs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"getPath",value:function(){var e,t=this.line,n=t.tailOffset,r=t.tipOffset,a=this.getPoints();if(2===a.length){(e=Nn(t)).unshift(["M",a[0].x,a[0].y]);var i={x:e[0][1],y:e[0][2]},o={x:e[1][1],y:e[1][2]},c={x:e[1][5],y:e[1][6]},l={x:e[1][3],y:e[1][4]};i=wi(o.x,o.y,i.x,i.y,n),c=wi(l.x,l.y,c.x,c.y,r),e[0][1]=i.x,e[0][2]=i.y,e[1][5]=c.x,e[1][6]=c.y}else if(3===a.length){var s=a[0],u=a[1],d=a[2];s=wi((u={x:(u.x-.25*d.x-.25*s.x)/.5,y:(u.y-.25*d.y-.25*s.y)/.5}).x,u.y,s.x,s.y,n),d=wi(u.x,u.y,d.x,d.y,r),u={x:(a[1].x-.25*d.x-.25*s.x)/.5,y:(a[1].y-.25*d.y-.25*s.y)/.5},e=[["M",s.x,s.y],["Q",u.x,u.y,d.x,d.y]]}else{(e=Pn(a)).unshift(["M",a[0].x,a[0].y]);var h=e.length-1,f={x:e[h][5],y:e[h][6]},p={x:e[h][3],y:e[h][4]},m={x:e[0][1],y:e[0][2]},y={x:e[1][1],y:e[1][2]};m=wi(y.x,y.y,m.x,m.y,n),f=wi(p.x,p.y,f.x,f.y,r),e[0][1]=m.x,e[0][2]=m.y,e[h][5]=f.x,e[h][6]=f.y}return kn(e)}}]),n}();function Bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ts=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),Object.assign(this,Ns({expandRectGap:16},t))}return g()(e,[{key:"getExpandedBBox",value:function(e){var t=this.expandRectGap;return{minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t}}},{key:"getRectLines",value:function(e){var t=500;return[{x1:e.minX,y1:e.minY-t,x2:e.minX,y2:e.maxY+t},{x1:e.minX-t,y1:e.minY,x2:e.maxX+t,y2:e.minY},{x1:e.maxX,y1:e.minY-t,x2:e.maxX,y2:e.maxY+t},{x1:e.minX-t,y1:e.maxY,x2:e.maxX+t,y2:e.maxY}]}},{key:"getVertexLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ray",r=500;return"all"===t?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n},{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}]:"N"===t||"S"===t?["N"===t?{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n}:{x1:e.x,y1:e.y,x2:e.x,y2:e.y+r,type:n}]:["W"===t?{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}:{x1:e.x,y1:e.y,x2:e.x+r,y2:e.y,type:n}]}},{key:"vMiddleLine",value:function(e,t){var n;n=Math.abs(e.minX-t.maxX)<Math.abs(e.maxX-t.minX)?(e.minX+t.maxX)/2:(e.maxX+t.minX)/2;var r=((e.minY+e.maxY)/2+(t.minY+t.maxY)/2)/2;return{x1:n,y1:r-500,x2:n,y2:r+500}}},{key:"hMiddleLine",value:function(e,t){var n;n=Math.abs(e.minY-t.maxY)<Math.abs(e.maxY-t.minY)?(e.minY+t.maxY)/2:(e.maxY+t.minY)/2;var r=((e.minX+e.maxX)/2+(t.minX+t.maxX)/2)/2;return{x1:r-500,y1:n,x2:r+500,y2:n}}},{key:"cost",value:function(e){var t,n=e.vertex,r=e.end,a=e.middleLine,i=0,o=0;return t=n.distance+Pi(n.x,n.y,r.x,r.y),n.from&&n.from.from&&Ei(n.x,n.y,n.from.x,n.from.y)!==Ei(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(i=-1),a&&n.from&&n.from.from&&Ai(n,a)&&!Ai(n.from.from,a)&&n.from&&n.from.from&&Ei(n.x,n.y,n.from.x,n.from.y)!==Ei(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(o=2),-t+i+o}},{key:"getSide",value:function(e,t){var n=[(e.minX+e.maxX)/2,(e.minY+e.maxY)/2],r=[e.maxX,e.minY],a=[e.maxX,e.maxY],i=[r[0]-n[0],r[1]-n[1]],o=[a[0]-n[0],a[1]-n[1]],c=[t[0]-n[0],t[1]-n[1]],l=w.b.angle(i,o),s=l/2,u=[0,s],d=[u[1],s+Math.PI-l],h=[d[1],s+Math.PI],f=[2*Math.PI-s,2*Math.PI],p=w.b.angle(c,[1,0]);return c[1]<0&&(p=2*Math.PI-p),qt(p,u)||qt(p,f)?"E":qt(p,d)?"S":qt(p,h)?"W":"N"}},{key:"dedupePoints",value:function(e){if(e.length>=3){for(var t=[e[0]],n=1;n<e.length-1;n++){var r=e[n-1],a=e[n],i=e[n+1];mi(r.x,a.x)&&mi(i.x,a.x)||mi(r.y,a.y)&&mi(i.y,a.y)||t.push(a)}return t.push(e[e.length-1]),t}return e}},{key:"getExpandPoint",value:function(e,t,n){return"N"===n?{x:e.x,y:t.minY}:"S"===n?{x:e.x,y:t.maxY}:"W"===n?{x:t.minX,y:e.y}:"E"===n?{x:t.maxX,y:e.y}:null}},{key:"find",value:function(e,t){var n=this,r=e.cell,a=t.cell,i=r&&r.getBBox(),o=a&&a.getBBox(),c=i&&this.getExpandedBBox(i),l=o&&this.getExpandedBBox(o),s=[];s=c?s.concat(this.getRectLines(c)):s,s=l?s.concat(this.getRectLines(l)):s;var u,d,h,f=new Gi("start"),p=new Gi("end"),m=[e.x,e.y],y=[t.x,t.y];Object.assign(f,{x:m[0],y:m[1]}),Object.assign(p,{x:y[0],y:y[1]}),i?(d=this.getSide(i,m),s=s.concat(this.getVertexLine(f,d))):s=s.concat(this.getVertexLine(f,"all","straight")),o?(h=this.getSide(o,y),s=s.concat(this.getVertexLine(p,h))):s=s.concat(this.getVertexLine(p,"all","straight")),a&&r&&("E"===d&&"W"===h?u=r.x+r.width<a.x?this.vMiddleLine(i,o):this.hMiddleLine(i,o):"W"===d&&"E"===h?u=r.x+r.width<a.x?this.hMiddleLine(i,o):this.vMiddleLine(i,o):"S"===d&&"N"===h?u=r.y+r.height>a.y?this.vMiddleLine(i,o):this.hMiddleLine(i,o):"N"===d&&"S"===h&&(u=r.y+r.height>a.y?this.hMiddleLine(i,o):this.vMiddleLine(i,o))),e.d&&("N"===d?f.y-=e.d:"S"===d?f.y+=e.d:"E"===d?f.x+=e.d:"W"===d&&(f.x-=e.d)),t.d&&("N"===h?p.y-=t.d:"S"===h?p.y+=t.d:"E"===h?p.x+=t.d:"W"===h&&(p.x-=t.d)),u&&s.push(u);var g=Zi(s);i&&o&&!vi(c,l)&&g.getAllEdges().forEach((function(e){var t=e.startVertex,n=e.endVertex,r={x1:t.x,y1:t.y,x2:n.x,y2:n.y};(Li(r,i)||Li(r,o))&&g.deleteEdge(e)}));var v,b=this.getExpandPoint(f,c,d)||f,x=this.getExpandPoint(p,l,h)||p,k=g.snap(b),w=g.snap(x);return k.from=f,w.from=p,(v=mi(k.x,w.x)&&mi(k.y,w.y)?[]:Ki(g,k,w,(function(e,t,r){return n.cost({vertex:e,start:t,end:r,middleLine:u})}))).unshift(f),v.push(p),this.dedupePoints(v)}},{key:"destroy",value:function(){this.destroyed=!0}}]),e}()),_s=function(e){j()(n,Rs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"truncate",value:function(e){var t=this.line,n=t.tailOffset,r=t.tipOffset,a=bn(e),i=a[a.length-1],o=a[a.length-2],c=a[0],l=a[1],s=wi(o[1],o[2],i[1],i[2],r),u=wi(l[1],l[2],c[1],c[2],n);return i[1]=s.x,i[2]=s.y,c[1]=u.x,c[2]=u.y,kn(a)}},{key:"getPath",value:function(){return this.truncate(this._getPath())}},{key:"_getPath",value:function(){var e=this.line,t=e.source,n=e.target,r=e.diagram;if(!r)return"";var a=this.getPoints();if(e.controlPoints.length>0)return kn(Mn(e.controlPoints,a,e.resizer.getElbowMergeSig()));var i=r.find(t.id),o=r.find(n.id),c=e.getEndpoint(t),l=e.getEndpoint(n);if(null!=i&&i===o&&xi(c.x,c.y,l.x,l.y)<8&&0!==e.controlPoints.length)return kn([["M",(c=i.getPoint([1,.5])).x,c.y-8],["l",16,0],["l",0,16],["L",c.x,c.y+8]]);if(!c||!l)return kn([["M",0,0],["L",50,0],["L",50,50]]);if(!i&&!o&&0===e.controlPoints.length){if(c.x===l.x)return"M".concat(c.x,",").concat(c.y," L").concat(l.x,",").concat(l.y);var s=.5*(c.x+l.x);return"M".concat(c.x,",").concat(c.y," L").concat(s,",").concat(c.y," L").concat(s,",").concat(l.y," L").concat(l.x,",").concat(l.y)}return Cn(Ts.find(Is(Is({cell:i},a[0]),{},{d:0}),Is(Is({cell:o},a[1]),{},{d:0})))}}]),n}();var qs=Lr,zs=ba,Fs=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var e=this.cell.diagram.defs,t=new zs({id:this.cell.clipPathID}),n=new qs({"clip-rule":"evenodd","fill-rule":"evenodd"});n.update({fill:"black",opacity:.1}),t.add(n),e.add(t),this.lineTextClipPath=n,this.clipPath=t}},{key:"draw",value:function(){var e=this.cell,t=this.lineTextClipPath,n=e.textarea,r=n.box,a=r.width,i=r.height,o=n.getPosition(),c=o.x,l=o.y,s=e.getBBox(),u=s.x,d=s.y,h=s.width,f=s.height;r.width>0?t.update({d:wn(u-15,d-15,h+30,f+30)+wn(c,l,a,i)}):t.update({d:wn(u-15,d-15,h+30,f+30)})}},{key:"destroy",value:function(){this.lineTextClipPath.destroy(),this.clipPath.destroy(),I()(A()(n.prototype),"destroy",this).call(this)}}]),n}();function Ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gs(e){for(var t=[],n=1;n<e+1;n++)t.push(n);return t}function Hs(e,t,n){n=n||Gs(t);for(var r,a,i,o={},c=0;c<e.length;c++){for(a=r=e[c],i=1;!n.includes(a)&&i<100;)i%2==1?(a+=i)>t&&(a%=t):(a-=i)<1&&(a=t+a%t),i++;o[r]=a}return o}var Ws=function(e){var t=e.abstract,n=e.start,r=void 0===n?0:n,a=e.parent,i=e.direction;if(t&&a){var o=a.children,c=void 0===o?[]:o;if("timeline"===a.layout){var l=c[r].quadrantConstraint,s=(void 0===l?[]:l)[0],u=i[1];switch(s){case 1:case 2:return 0!==u&&(e.quadrantConstraint=[u>0?1:2]),{direction:[0,1],layout:"timeline"};case 3:case 4:return 0!==u&&(e.quadrantConstraint=[u>0?2:1]),{direction:[0,-1],layout:"timeline"};default:return}}if("indent"===a.layout){var d=a,h=d.directions,f=void 0===h?[]:h,p=d.layout,m=void 0===p?"":p,y=e.mergedQuadrant,g=void 0===y?0:y;return{direction:[Math.sign(f[g-1][0]),0],layout:m}}}},Vs=function(){function e(t){m()(this,e),c()(this,"algorithms",void 0),c()(this,"model",void 0),c()(this,"options",void 0),c()(this,"tree",void 0),c()(this,"trees",void 0),c()(this,"destroyed",void 0),c()(this,"beforeLayoutAdjust",void 0),c()(this,"afterLayoutAdjust",void 0),Object.assign(this,Xs({algorithms:{},model:{}},t))}return g()(e,[{key:"buildTree",value:function(){var e=this.model,t=this.parse(e);t.x=void 0!==e.x?e.x:0,t.y=void 0!==e.y?e.y:0,t.layout=t.layout||"standard",this.tree=t}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.algorithms,a=Xs(Xs({w:10,h:10,quadrant:void 0,quadrantConstraint:void 0,direction:[1,0],collapsed:!1,layout:void 0},e),{},{origin:e,depth:n,children:[],parent:t,isAbstractUnderTimeline:!1,ax:0,ay:0,al:0,ad:"x",ap:1,quadrantTreeLists:[]});if(a.quadrant?a.quadrant=Number(a.quadrant):a.quadrant=1,e.children&&!e.collapsed)for(var i=0;i<e.children.length;i++){var o=e.children[i];a.children.push(this.parse.call(this,o,a,n+1))}return a.layout&&(a.algorithm=r[a.layout],this.calculateDQ(a)),a}},{key:"calculateDQ",value:function(e){e.quadrants=e.algorithm.constructor.QUADRANTS,e.directionAngles=function(e,t){for(var n=[],r=2*Math.PI/t,a=Di(e,[1,0]),i=0;i<t;i++){var o=a+r*i;o=o>=2*Math.PI?o-2*Math.PI:o,n.push(o)}return n}(e.direction,e.quadrants),e.directions=e.directionAngles.map((function(e){return[Number(Math.cos(e).toFixed(3)),Number(Math.sin(e).toFixed(3))]})),e.quadrantRange=Gs(e.quadrants),e.childQuadrantRange=Ft(e.children.map((function(e){return e.quadrant}))),e.quadrantConstraint=e.quadrantConstraint||e.quadrantRange}},{key:"splitSubTrees",value:function(){var e=this.tree,t=[e];Rt(e,(function(e){e.layout&&(e.isSubTree=!0,e.x=0,e.y=0,e.tx=0,e.ty=0,t.unshift(e))})),this.trees=t}},{key:"firstMergeQuadrant",value:function(){var e=this;this.trees.forEach((function(t){e.mergeQuadrant(t,"mergedQuadrant")}))}},{key:"mergeQuadrant",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mergedQuadrant",r=e.quadrantConstraint,a=e.quadrants,i=e.childQuadrantRange,o=Hs(i,a,r);null===(t=e.children)||void 0===t||t.forEach((function(e){e[n]=o[e.quadrant]}))}},{key:"fixQuadrantConflict",value:function(){var e=this;this.trees.concat([]).reverse().forEach((function(t){if(t.parent){for(var n=t.quadrants,r=function(e){if(e.parent){var t=e,n=t.parent;if(e.abstract){var r=Ws(e);if(r)return r}for(;n&&!n.layout;)t=n,n=n.parent;var a=n,i=a.directions,o=void 0===i?[]:i,c=a.layout,l=void 0===c?"":c;return{direction:o[t.mergedQuadrant-1],layout:l}}}(t),a=[],i=0,o=function(){var n=t.quadrantRange,o=t.directions,c=void 0===o?[]:o;if(0===(a=n.filter((function(e,t){return Wa(c[t],r.direction)}))).length){var l=t.algorithm.constructor.VAILD_DIRECTION_ANGLES,s=Di(r.direction,[1,0]);if(!l.some((function(e){return mi(e,s)})))return"break";e.forceUseUpDirection(t,r.direction)}i++};0===a.length&&i<10&&"break"!==o(););if(t.upDirection=r.direction,t.upLayoutType=r.layout,a.length>0){var c=Hs(t.quadrantConstraint,n,a);t.quadrantConstraint=Object.keys(c).map((function(e){return c[e]})),e.mergeQuadrant(t,"mergedQuadrant")}else delete t.layout,t.isSubTree=!1}}))}},{key:"forceUseUpDirection",value:function(e,t){e.direction=t,this.calculateDQ(e)}},{key:"filterSimilarSubTree",value:function(){this.trees.forEach((function(e){if(!e.parent)return!0;var t=e.quadrantConstraint,n=void 0===t?[]:t,r=e.upDirection,a=e.upLayoutType,i=e.directions,o=void 0===i?[]:i,c=e.layout;!e.abstract&&a===c&&1===n.length&&yi(r,o[n[0]-1])&&(e.isSubTree=!1)}))}},{key:"removeSubTree",value:function(){this.trees=this.trees.filter((function(e){var t=e.isSubTree;return!e.parent||t}))}},{key:"setUpAndDown",value:function(){var e=this,t=this.trees,n=this.tree;n.upDirection=n.directions[n.quadrantConstraint[0]-1],n.upLayoutType=n.layout,n.upSignX=Math.sign(n.upDirection[0]),n.upSignY=Math.sign(n.upDirection[1]),t.forEach((function(t){var n=e.splitTreeByQuadrant(t);(n=n.filter((function(e){return e.children&&e.children.length>0}))).forEach((function(t){e.setUp(t)})),t.quadrantTrees=n})),this.setDown(n)}},{key:"splitTreeByQuadrant",value:function(e){for(var t=e.quadrants,n=void 0===t?0:t,r=e.directionAngles,a=void 0===r?[]:r,i=e.directions,o=void 0===i?[]:i,c=e.children,l=void 0===c?[]:c,s=[],u=0;u<n;u++){var d=Xs(Xs({},e),{},{directionAngle:a[u],quadrantTreeDirection:o[u],children:[]});s.push(d),e.quadrantTreeLists.push([])}return l.forEach((function(t,n){var r;null===(r=s[t.mergedQuadrant-1].children)||void 0===r||r.push(t),t.abstract||e.quadrantTreeLists[t.mergedQuadrant-1].push(n)})),s.forEach((function(t){t.quadrantTreeLists=e.quadrantTreeLists})),s}},{key:"setUp",value:function(e){var t;null===(t=e.children)||void 0===t||t.forEach((function(t){St(t,(function(t){t.upDirection=e.quadrantTreeDirection;var n=t.abstract,r=t.parent;if(n&&r){var a=Ws(t);a&&(t.upDirection=a.direction)}t.upLayoutType=e.layout,t.upSignX=Math.sign(t.upDirection[0]),t.upSignY=Math.sign(t.upDirection[1])}),(function(e){if(!e.isSubTree)return e.children}))}))}},{key:"setDown",value:function(e){St(e,(function(e){e.isSubTree?(e.downDirection=e.directions[e.quadrantConstraint[0]-1],e.downLayoutType=e.layout):(e.downDirection=e.upDirection,e.downLayoutType=e.upLayoutType),e.downSignX=Math.sign(e.downDirection[0]),e.downSignY=Math.sign(e.downDirection[1])}))}},{key:"layout",value:function(){var e=this,t=this.trees,n=this.tree;t.forEach((function(t){var n=t.algorithm,r=t.quadrantTrees,a=[];(void 0===r?[]:r).forEach((function(e){n.layout(e,a)})),e.calculateSubTreeBBox(t),a.push(t),t.zNodes=a})),n.zNodes=function e(t){return t.reduce((function(t,n){return Array.isArray(n)?[].concat(N()(t),N()(e(n))):[].concat(N()(t),[n])}),[])}(n.zNodes)}},{key:"calculateSubTreeBBox",value:function(e){if(e.collapsed)return e.tx=e.x,e.ty=e.y,e.tw=e.w,void(e.th=e.h);var t=e.x,n=e.x+e.w,r=e.y,a=e.y+e.h;Rt(e,(function(e){var i,o,c,l;e.isSubTree?(i=e.tx,o=e.ty,c=e.tx+e.tw,l=e.ty+e.th):(i=e.x,o=e.y,c=e.x+e.w,l=e.y+e.h),i<t&&(t=i),o<r&&(r=o),c>n&&(n=c),l>a&&(a=l)}),(function(t){if(!t.isSubTree||t===e)return t.children})),e.tx=t,e.ty=r,e.tw=n-t,e.th=a-r}},{key:"execute",value:function(){return this.buildTree(),this.splitSubTrees(),this.firstMergeQuadrant(),this.fixQuadrantConflict(),this.filterSimilarSubTree(),this.removeSubTree(),this.setUpAndDown(),this.beforeLayoutAdjust&&this.beforeLayoutAdjust(this.tree),this.layout(),this.afterLayoutAdjust&&this.afterLayoutAdjust(this.tree),this.tree}},{key:"destroy",value:function(){var e=this;this.destroyed=!0,Object.keys(this).forEach((function(t){e[t]=void 0}))}}]),e}(),Us=Object.freeze({__proto__:null,Event:ko,Layout:Vs,Comparator:Yi});var Zs=function(e){j()(n,_.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n),e=t.call(this),Object.assign(P()(e),r);var a=P()(e),i=a.group,o=a.cell,c=["source","target"].map((function(e){return Ka(e)}));return c.forEach((function(e){return i.add(e.group)})),e.buttons=c,e.diagram=o.diagram,e.eventHelper=new ko,e.cellModel=null,e}return g()(n,[{key:"update",value:function(){var e=this.buttons,t=this.cell,n=this.diagram,r=this.group;if(r&&r.parent){var a=b()(e,2),i=a[0],o=a[1],c=t.getPoints(),l=c[0],s=c[c.length-1],u=1/n.viewport.zoom;i.group.update({scale:u,x:l.x,y:l.y}),o.group.update({scale:u,x:s.x,y:s.y})}}},{key:"bindEvent",value:function(){var e,t,n,r,a=this,i=this.buttons,o=this.cell,l=this.diagram,s=this.eventHelper,u=!0,h=function(){l.resetCursor(),e=void 0,t=void 0,n=void 0,r=void 0,u=!0,l.lineResizer.reset()};i.forEach((function(n){var i=n.name,c=n.group;s.bind(c,"mousedown",(function(){l.lineAlign.init(a.cell,i),e=i,t=xe()({connection:null,id:null},Zt(o.model[e],{connection:!0,id:!0})),r=d()(o.controlPoints),l.emit("endpointcontrolpointmousedown"),l.lineResizer.init(a.cell,i)}))})),s.bind(l,"mousemove",(function(t){if("source"===e||"target"===e){u&&(u=!1,l.emit("endpointcontrolpointmousemovestart"));var i="source"===e?o.target:o.source,s=l.viewport.invertClient([t.clientX,t.clientY]);n=l.lineResizer.resize(t),i.id&&n.id===i.id&&null==i.connection&&null==n.connection&&r.length>0&&(n.id=null,n.connection=s),l.update(o,c()({},e,n)),a.update()}})),s.bind(l,"mouseup",(function(){var i,s,u;"source"!==e&&"target"!==e||("elbow"===o.shape?l.command.execute("Update",{id:o.model.id,model:(i={},c()(i,e,n),c()(i,"controlPoints",Qa(o,!0)),i),originModels:(s={},c()(s,e,t),c()(s,"controlPoints",r),s)}):l.command.execute("Update",{id:o.model.id,model:c()({},e,n),originModels:(u={},c()(u,e,t),c()(u,"controlPoints",r),u)}),a.emit("endpointControlMouseup"),h())})),s.bind(l,"keydown",(function(n){var r=a.cell,i=a.diagram;!e||"Esc"!==n.key&&"Escape"!==n.key||(i.update(r,c()({},e,t)),a.update(),h())})),s.bind(l,"afterviewportchange",De()((function(){var e=a.buttons,t=a.cell;e&&t&&a.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null}}]),n}();var Ks=function(e){j()(n,_.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n),e=t.call(this),Object.assign(P()(e),r);var a=P()(e),i=a.cell;return e.diagram=i.diagram,e.eventHelper=new ko,e.onMove=!1,e}return g()(n,[{key:"_refresh",value:function(){var e=this.group,t=this.cell,n=$a(t);e&&e.clear();var r=t.controlPoints.map((function(e,t){return Za(t,!1)})),a=n.map((function(e,t){return Za(t,!0)}));a.forEach((function(t){return e.add(t.group)})),r.forEach((function(t){return e.add(t.group)})),this.buttons=r,this.uiButtons=a,this.uiPoints=n}},{key:"update",value:function(){var e=this.cell;this._refresh();var t=this.buttons,n=this.diagram,r=this.group,a=this.uiButtons,i=this.uiPoints;if(r.parent)if(e.isLoop&&0===e.controlPoints.length)r.css({display:"none"});else{this.onMove?r.css({display:"none"}):r.css({display:""});var o=1/n.viewport.zoom;t.forEach((function(t){var n=t.group,r=t.index,a=e.getControlPointButtonPosition(r);n.update({scale:o,x:a[0],y:a[1]})})),a.forEach((function(e){var t=e.group,n=e.index;t.update({scale:o,x:i[n][0],y:i[n][1]})}))}}},{key:"bindEvent",value:function(){var e,t,n,r,a=this,i=this.cell,o=this.diagram,c=this.eventHelper,l=this.group,s=!1,u={},h=!0,f=!1,p=function(){o.resetCursor(),e=void 0,t=void 0,n=void 0,s=!1,a.onMove=!1,r=void 0,u={},h=!0,f=!1};c.bind(o,"mousedown",(function(r){if("true"===(u=r.target&&r.target.dataset).isUIPoints&&"false"===u.isControlPoint){var c=Number(u.index);t=c,n={controlPoints:d()(i.controlPoints)},s=!0,f=!0}if("false"===u.isUIPoints&&"true"===u.isControlPoint){var l=Number(u.index);e=l,n={controlPoints:d()(i.controlPoints)},s=!1,a.afterMove=!1,f=!0}o.emit("endpointcontrolpointmousedown")})),c.bind(o,"mousemove",(function(n){if(f&&h&&(o.emit("endpointcontrolpointmousemovestart"),h=!1),u!=={}&&"true"===u.isUIPoints&&"false"===u.isControlPoint&&s){var r=Number(u.index);t=r;var c=Ja({cell:i,uiPoints:a.uiPoints,uiPointIndex:t});o.update(i,{controlPoints:c}),e=r,s=!1}if(void 0!==e){var l=o.viewport.invertClient([n.clientX,n.clientY]),p=d()(i.controlPoints),m=p[[e]];void 0!==m&&(m[0]=l[0],m[1]=l[1]),o.update(i,{controlPoints:p}),a.onMove=!0}})),c.bind(o,"mouseup",(function(){if(void 0!==e)if(a.onMove){var c=d()(i.controlPoints);o.command.execute("Update",{id:i.model.id,model:{controlPoints:c},originModels:n,diagram:o}),l.css({display:""}),p()}else r=e,e=void 0;else void 0!==t&&p()})),c.bind(o,"dblclick",(function(){if(void 0!==r&&void 0===t){var e=d()(i.controlPoints);o.update(i,n),e.splice(r,1),o.command.execute("Update",{id:i.model.id,model:{controlPoints:e},diagram:o}),p()}})),c.bind(o,"keydown",(function(t){var r=a.cell,i=a.diagram;!e||"Esc"!==t.key&&"Escape"!==t.key||(i.update(r,n),a.update(),p())})),c.bind(o,"afterviewportchange",De()((function(){var e=a.buttons,t=a.cell;e&&t&&a.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null,this.uiButtons=null,this.uiPoints=null}}]),n}();var Qs=function(e){j()(n,_.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,n),e=t.call(this),c()(P()(e),"lastPoints",void 0),Object.assign(P()(e),r);var a=P()(e),i=a.cell;return e.diagram=i.diagram,e.eventHelper=new ko,e.onMove=!1,e.mergeSig=!1,e}return g()(n,[{key:"_refresh",value:function(){var e=this.group,t=this.cell,n=$a(t,this.mergeSig);e&&e.clear();var r=n.map((function(e,r){return 0===t.controlPoints.length||0===r||r===n.length-1?Za(r,!0,!0,e):Za(r,!1,!0,e)}));r.forEach((function(t){return e.add(t.group)})),this.uiButtons=r,this.uiPoints=n}},{key:"update",value:function(){var e=this.cell;we()(this.lastPoints,e.getPoints())||(this._refresh(),this.lastPoints=e.getPoints());var t=this.diagram,n=this.group,r=this.uiButtons,a=this.uiPoints;if(n.parent){this.onMove?n.css({display:"none"}):n.css({display:""});var i=e.getPoints(),o=i[0],c=i[i.length-1],l=1/t.viewport.zoom;r.forEach((function(e){var t=e.group,n=e.index;0===n?xi(o.x,o.y,a[n][0],a[n][1])<8.5&&t.css({display:"none"}):n===r.length-1&&xi(c.x,c.y,a[n][0],a[n][1])<8.5&&t.css({display:"none"}),t.update({scale:l,x:a[n][0],y:a[n][1]})}))}}},{key:"bindEvent",value:function(){var e,t,n,r,a=this,i=this.cell,o=this.diagram,c=this.eventHelper,l=this.group,s=!1,u={},h=!0,f=!1,p=function(){o.resetCursor(),e=void 0,t=void 0,n=void 0,s=!1,a.onMove=!1,u={},a.mergeSig=!1,r=void 0,h=!0,f=!1};c.bind(o,"mousedown",(function(c){if(u=c.target&&c.target.dataset,r=[c.clientX,c.clientY],"true"===u.isUIPoints&&"false"===u.isControlPoint){var l=Number(u.index);t=l,n={controlPoints:0===i.controlPoints.length?null:d()(i.controlPoints)},s=!0,f=!0,t=void 0,o.setCursor(0===a.uiPoints[l][2]?"row-resize":"col-resize")}if("false"===u.isUIPoints&&"true"===u.isControlPoint){var h=Number(u.index);e=0===h?0:h===a.uiPoints.length-1?i.controlPoints.length-1:h-1,n={controlPoints:d()(i.model.controlPoints)},s=!1,f=!0;var p=a.uiPoints[h];p&&o.setCursor("V"===p[p.length-1]?"row-resize":"col-resize")}o.emit("endpointcontrolpointmousedown")})),c.bind(o,"mousemove",(function(n){if(f&&h&&(o.emit("endpointcontrolpointmousemovestart"),h=!1),u!=={}&&"true"===u.isUIPoints&&"false"===u.isControlPoint&&s){var r=Number(u.index);t=r;var c=Ja({cell:i,uiPoints:a.uiPoints,uiPointIndex:t});o.update(i,{controlPoints:c}),e=0===r?0:r===a.uiPoints.length-1?i.controlPoints.length-1:r-1,s=!1,a.mergeSig=!0}if(void 0!==e){a.onMove=!0;var l=o.viewport.invertClient([n.clientX,n.clientY]),p=d()(i.controlPoints),m=p[e];void 0!==m&&("V"===m[m.length-1]?m[1]=l[1]:m[0]=l[0]),o.update(i,{controlPoints:p})}})),c.bind(o,"dblclick",(function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.dataset;"false"===n.isUIPoints&&"true"===n.isControlPoint&&1===i.controlPoints.length&&(o.command.execute("Update",{id:i.model.id,model:{controlPoints:[]}}),p())})),c.bind(o,"mouseup",(function(t){if(void 0!==e&&xi(r[0],r[1],t.clientX,t.clientY)>4){var a=Qa(i,!0);o.command.execute("Update",{id:i.model.id,model:{controlPoints:a},originModels:n,diagram:o}),l.css({display:""}),p()}else p()})),c.bind(o,"keydown",(function(t){var r=a.cell,i=a.diagram;!e||"Esc"!==t.key&&"Escape"!==t.key||(i.update(r,n),a.update(),p())})),c.bind(o,"afterviewportchange",De()((function(){var e=a.uiButtons,t=a.cell;e&&t&&a.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null,this.uiButtons=null,this.uiPoints=null}}]),n}(),Js=function(){function e(t){m()(this,e),this.cell=t,c()(this,"eventHelper",new ko),c()(this,"subResizers",void 0),c()(this,"lineControlPointResizer",void 0),c()(this,"lineEndpointResize",void 0),c()(this,"group",void 0),c()(this,"diagram",void 0),c()(this,"isBegin",void 0),this._init(t)}return g()(e,[{key:"update",value:function(){this.subResizers.forEach((function(e){return e.update()}))}},{key:"bindEvent",value:function(){var e=this,t=this.eventHelper,n=this.cell,r=n.diagram;t.bind(r,"endpointcontrolpointmousedown",(function(){"elbow"===n.shape&&(e.lineControlPointResizer.mergeSig=!0)})),t.bind(r,"endpointcontrolpointmousemovestart",(function(){e.group.hide()})),t.bind(r,"mouseup",(function(){"elbow"===n.shape&&(e.lineControlPointResizer.mergeSig=!1),e.group.show()}))}},{key:"begin",value:function(){var e=this.subResizers;this.diagram.frontRootGroup.add(this.group),e.forEach((function(e){return e.begin()})),this.isBegin=!0}},{key:"end",value:function(){var e=this.subResizers,t=this.group;e.forEach((function(e){return e.end()})),t&&t.remove(),this.isBegin=!1}},{key:"destroy",value:function(){this.group.remove(),this.subResizers.forEach((function(e){return e.destroy()})),this.isBegin=!1,this.eventHelper.destroy()}},{key:"renew",value:function(e){this.destroy(),this._init(e),this.begin()}},{key:"_init",value:function(e){var t=new xr,n=[],r=new xr,a=new Zs({group:r,cell:e});t.add(r),n.push(a);var i,o=new xr;i="elbow"===e.shape?new Qs({group:o,cell:e}):new Ks({group:o,cell:e}),t.add(o),n.push(i),this.cell=e,this.diagram=e.diagram,this.subResizers=n,this.group=t,this.lineEndpointResize=a,this.lineControlPointResizer=i,this.bindEvent()}},{key:"getElbowMergeSig",value:function(){return this.lineControlPointResizer.mergeSig}}]),e}();var $s=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"group",new xr),c()(P()(r),"element",void 0),c()(P()(r),"cell",void 0),r.cell=e,r}return g()(n,[{key:"render",value:function(){var e=ws({name:"path"});this.element=e,this.group.add(this.element),this.cell.graphicGroup.add(this.group)}},{key:"update",value:function(){}},{key:"draw",value:function(){if("center"!==this.cell.textDirection){this.group.show();var e=this.cell.getPointByPercent(this.cell.textPosition);this.element.update({d:On(e.x,e.y,this.cell.stroke.width),fill:this.cell.stroke.color})}else this.group.hide()}},{key:"destroy",value:function(){var e;null===(e=this.group)||void 0===e||e.remove()}}]),n}();function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tu=function(e){j()(n,Jl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"clipPathID",Object(q.a)()),c()(P()(r),"tailOffset",0),c()(P()(r),"tipOffset",0),c()(P()(r),"shape",void 0),c()(P()(r),"shapes",void 0),c()(P()(r),"resizer",void 0),c()(P()(r),"textareaElement",void 0),c()(P()(r),"wireElement",void 0),c()(P()(r),"target",void 0),c()(P()(r),"source",void 0),c()(P()(r),"textPosition",void 0),c()(P()(r),"textDirection",void 0),c()(P()(r),"isLoop",void 0),c()(P()(r),"sourceCell",void 0),c()(P()(r),"targetCell",void 0),c()(P()(r),"controlPoints",void 0),c()(P()(r),"d",void 0),r}return g()(n,[{key:"init",value:function(e){var t=this;I()(A()(n.prototype),"init",this).call(this,e),this.subcells=this.Subcells.map((function(e){return new e(t)})),this.subcells.unshift(new Ss(this,"tail")),this.subcells.unshift(new Ss(this,"tip")),this.subcells.push(new Fs(this)),this.shapes={straight:new Ls(this),curve:new As(this),elbow:new _s(this)},this.render(),this.resizer=new Js(this)}},{key:"canTextVerticalAlign",value:function(){return!1}},{key:"canConnect",value:function(){return!1}},{key:"canRotate",value:function(){return!1}},{key:"getTextareaPosition",value:function(e){var t=this.getShapeObj().getTextareaPosition(),n=this.getPercentPointSlope(this.textPosition),r=t.x-e.width/2,a=t.y-e.height/2;return"left"===this.textDirection?n>=0&&n<=15?a=t.y-e.height-5:15<n&&n<=75?(r=t.x+5,a=t.y-e.height-5):75<=n&&n<=105?r=t.x+5:105<n&&n<165?(r=t.x+5,a=t.y+5):165<=n&&n<=195?a=t.y+5:195<n&&n<=255?(r=t.x-5-e.width,a=t.y+5):255<=n&&n<=285?r=t.x-5-e.width:285<n&&n<345?(r=t.x-5-e.width,a=t.y-e.height-5):345<=n&&n<=360&&(a=t.y-e.height-5):"right"===this.textDirection&&(n>=0&&n<=15?a=t.y+5:15<n&&n<=75?(r=t.x-5-e.width,a=t.y+5):75<=n&&n<=105?r=t.x-5-e.width:105<n&&n<165?(r=t.x-5-e.width,a=t.y-e.height-5):165<=n&&n<=195?a=t.y-e.height-5:195<n&&n<=255?(r=t.x+5,a=t.y-e.height-5):255<=n&&n<=285?r=t.x+5:285<n&&n<345?(r=t.x+5,a=t.y+5):345<=n&&n<=360&&(a=t.y+5)),{x:r,y:a}}},{key:"getKeyShape",value:function(){return this.wireElement}},{key:"isConnected",value:function(){return this.target.id||this.source.id}},{key:"getPointBox",value:function(){var e=1/0,t=1/0,n=-1/0,r=-1/0;return this.getPoints().forEach((function(a){e=Math.min(e,a.x),t=Math.min(t,a.y),n=Math.max(n,a.x),r=Math.max(r,a.y)})),{x:e,y:t,width:n-e,height:r-t,minX:e,minY:t,maxX:n,maxY:r}}},{key:"getKeyShapeBox",value:function(){var e=this.getKeyShape().getBBox(),t=e.x,n=e.y;return{x:t,y:n,width:e.width,height:e.height,minX:t,minY:n,maxX:t+e.width,maxY:n+e.height}}},{key:"canArrange",value:function(){var e=this;return["source","target"].every((function(t){var n=e[t];return!n.id&&Array.isArray(n.connection)}))}},{key:"isDrawable",value:function(){var e=this.diagram,t=this.target,n=this.source,r=e.find(n.id),a=n.id&&!r||r&&!1===r.state.visible,i=e.find(t.id),o=t.id&&!i||i&&!1===i.state.visible;return!(a||o)}},{key:"updateTextareaStyleSheets",value:function(){var e=this.textareaContentStyleSheets.find((function(e){return"self"===e.query}));this.diagram.contentEditor.isBegin&&this.diagram.contentEditor.dom===this.textareaElement.htmlContainer?(e.css["min-width"]="12px",e.css["min-height"]="24px"):(e.css["min-width"]=0,e.css["min-height"]=0)}},{key:"shouldRefreshEndEditContent",value:function(){return this.isContentEmpty()}},{key:"canFill",value:function(){return!1}},{key:"beginEditContent",value:function(){this.textareaElement.css({outline:"1px solid #096DD9"})}},{key:"endEditContent",value:function(){this.textareaElement.css({outline:"none"})}},{key:"getPointByPercent",value:function(e){var t=this.wireElement,n=t.getTotalLength();return t.getPointAtLength(e*n)}},{key:"getPercentPointSlope",value:function(e){var t=this.getTwoPointsByPercent(e),n=b()(t,2),r=n[0],a=n[1];return fi(Ci(r.x,r.y,a.x,a.y))}},{key:"getTwoPointsByPercent",value:function(e){var t=this.wireElement,n=t.getTotalLength(),r=n*e;return[t.getPointAtLength(Dt(r-1,0,n)),t.getPointAtLength(Dt(r+1,0,n))]}},{key:"getPadding",value:function(){return[0,0,0,0]}},{key:"getEndpoint",value:function(e){var t=this.diagram,n=e.id,r=e.connection,a=t.find(n);if(a)return r?a.getPoint(r):a.getPoint([.5,.5]);if(Array.isArray(r)){var i=b()(r,2);return{x:i[0],y:i[1]}}return r}},{key:"getAlignBBox",value:function(){var e=this.wireElement.rendererElement.getBBox();return{x:e.x,y:e.y,width:e.width,height:e.height,minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height}}},{key:"getBBox",value:function(){var e=this.graphicGroup.rendererElement.getBBox();return{x:e.x,y:e.y,width:e.width,height:e.height,minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height}}},{key:"getShapeObj",value:function(){var e=this.shape;return this.shapes[e]}},{key:"getFirstInsertControlPoints",value:function(){return this.getShapeObj().getFirstInsertControlPoints()}},{key:"getControlPointButtonPosition",value:function(e){return this.getShapeObj().getControlPointButtonPosition(e)}},{key:"getPath",value:function(){var e=this.shape,t=this.sourceCell,n=this.isLoop,r=this.getShapeObj();if(n&&0===this.controlPoints.length){var a=null==t?void 0:t.getPoint([1,.5]);return kn([["M",a.x,a.y-8],["l",16,-4],["l",0,24],["L",a.x,a.y+8]])}if(r)return r.getPath();throw new Error("unsupported line shape ".concat(e))}},{key:"updatePath",value:function(){this.isCacheStale("shape","source","target")&&(this.d=this.getPath())}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.renderModel(e)}},{key:"renderModel",value:function(e){I()(A()(n.prototype),"updateModel",this).call(this,e),this.subcells.forEach((function(e){e.update()}))}},{key:"_updateResizer",value:function(){var e=this.diagram;this.resizer&&this.resizer.update(),1===e.selector.selections.length&&e.selector.selections[0]===this||this.resizer.end()}},{key:"updateModel",value:function(e){var t=!1;void 0!==e.shape&&e.shape!==this.shape&&(e.controlPoints=null,t=!0),I()(A()(n.prototype),"updateModel",this).call(this,e),t&&(this.updatePoints(),this.resizer&&this.resizer.renew(this)),this.subcells.forEach((function(e){e.update()}))}},{key:"draw",value:function(){if(this.isDrawable()){var e=this.source,t=this.target,n=this.diagram,r=n.find(e.id),a=n.find(t.id);this.isLoop=null!=r&&r===a,this.sourceCell=r,this.targetCell=a,this.show(),this.updatePoints(),this.updatePath(),this.subcells.forEach((function(e){return e.draw()})),this.drawPosition(),this.graphicGroup.attr({opacity:this.opacity}),this._updateResizer()}else this.hide()}},{key:"updatePoints",value:function(){this.getShapeObj().updatePoints()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["shape","source","target"].forEach((function(n){var r=e[n];t[n]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t}),this.resizer.update()}}},{key:"getPoints",value:function(){return this.shapes[this.shape].getPoints()}},{key:"convertStrokeStyle",value:function(){if("dash"===this.stroke.style){var e=this.stroke.width||1;return{"stroke-dasharray":"".concat(2*e)}}return{"stroke-dasharray":"none"}}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),this.resizer.destroy(),I()(A()(n.prototype),"destroy",this).call(this)}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{textareaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'PingFangSC-Regular, "PingFang SC", sans-serif',"line-height":"1.74","word-break":"break-word","box-sizing":"border-box",color:"#262626"}}],shape:"straight",stroke:{color:"#595959",width:2},textPosition:.5,textDirection:"center",html:'<div style="text-align: center;">'.concat("&#8203;","</div>"),source:{},target:{},controlPoints:[],opacity:1,Subcells:[Ps,us,$s],penetratedKeys:["source","target","stroke","fill","html","shape","controlPoints","opacity","textPosition","textDirection"],isLine:!0,isLoop:!1})}}]),n}();c()(tu,"className","LineCell"),c()(tu,"Shapes",{});var nu=_r,ru=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var e=this.cell,t=new nu;this.element=t,e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.element,n=e.diagram,r=e.image,a=n.imageManager;if(r&&e.isCacheStale("image","width","height")){var i=r.src,o=r.naturalWidth,c=r.naturalHeight;t.update({width:e.width,height:e.height}),a.setImageHref(t,i,o,c)}}},{key:"destroy",value:function(){this.element.destroy(),I()(A()(n.prototype),"destroy",this).call(this)}}]),n}();var au=function(e){j()(n,xs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"createOutlineShapeElement",value:function(){if(this.isCacheStale("shape"))return ws({name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1})}},{key:"getOutlinePath",value:function(e){if(this.isCacheStale("width","height","shape")){var t=this.width/120,n=this.height/60;return e.getPath(t,n)}return null}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{fill:{color:"rgba(255,255,255,0)"},image:{},shape:"image",stroke:{width:1},Subcells:[ru],isImage:!0})}}]),n}();function iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(au,"className","ImageCell");var cu=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"sceneKeys",[]),c()(P()(e),"group",new xr),c()(P()(e),"elements",void 0),e}return g()(n,[{key:"render",value:function(){var e=this.cell;Zn(e)?e.clipGroup.add(this.group):e.graphicGroup.add(this.group)}},{key:"renderElements",value:function(){var e=this.group,t=this.cell.stencil,n=[];t.scene.forEach((function(t){var r=ws(t);t.attr&&r.update(t.attr),e.add(r),n.push(r)})),this.elements=n}},{key:"update",value:function(){var e=this.cell,t=this.elements;e.isCacheStale("shape")&&(t&&t.forEach((function(e){return e.remove()})),this.renderElements())}},{key:"draw",value:function(){var e=this.cell,t=this.elements,n=e.stroke,r=e.width,a=e.height,i=e.stencil,o=ou({},e.convertStrokeStyle());e.isCacheStale("stroke")&&(o.stroke=n.color,o["stroke-width"]=!0===(null==i?void 0:i.open)?2*n.width:n.width),t.forEach((function(e,t){var n,c,l=null===(n=i.scene[t])||void 0===n?void 0:n.path;if(l)c=l(r,a);else{var s=r/i.width,u=a/i.height;c=e.getPath(s,u)}e.update(ou(ou({},o),{},{d:c},i.scene[t].attr))}))}}]),n}(),lu=function(e,t){return{minX:4,minY:4,maxX:e-4,maxY:t-4}};var su=function(e){j()(n,xs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"stencil",void 0),c()(P()(e),"stencils",void 0),c()(P()(e),"controlPoints",void 0),c()(P()(e),"round",void 0),c()(P()(e),"shape",void 0),c()(P()(e),"isGeometry",!0),c()(P()(e),"outlineElement",void 0),e}return g()(n,[{key:"canRound",value:function(){return void 0!==this.model.round}},{key:"updateTextareaStyleSheets",value:function(){var e=this.textareaContentStyleSheets,t=this.textareaRegion;e.find((function(e){return"self"===e.query})).css.width="".concat(t.maxX-t.minX,"px")}},{key:"getTextareaPosition",value:function(e){var t=this.textareaRegion,n=this.textVerticalAlign,r={x:t.minX,y:0};return r.y="top"===n?t.minY:"bottom"===n?t.maxY-e.height:(t.minY+t.maxY-e.height)/2,r}},{key:"_updateStencil",value:function(){var e=this.shape,t=this.stencils,n=e||"process";if(!this.stencil||this.stencil.name!==n){var r=t.find((function(e){return e.name===n}));if(!r)throw new Error("unknown shape ".concat(n));this.stencil=r,this._updateAnchors(),this._updateDefaultSize(),this.cache={}}}},{key:"_updateTextareaRegion",value:function(){var e,t=this.stencil,n=this.width,r=this.height,a=this.controlPoints,i=(null==t||null===(e=t.textarea)||void 0===e?void 0:e.region)||lu;this.textareaRegion=i(n,r,a)}},{key:"_updateDefaultSize",value:function(){var e=this,t=this.stencil;["width","height"].forEach((function(n){null==e[n]&&(e[n]=t[n])}))}},{key:"_updateAnchors",value:function(){for(var e=this.anchors,t=this.stencil,n=function(n){var r=e[n],a=t.anchors.find((function(e){return e.name===r.name}));a&&(e[n]=a)},r=0;r<e.length;r++)n(r)}},{key:"afterUpdateModel",value:function(){this._updateStencil(),this._updateTextareaRegion(),I()(A()(n.prototype),"afterUpdateModel",this).call(this)}},{key:"createOutlineShapeElement",value:function(){if(this.isCacheStale("shape"))return ws(this.stencil.outline)}},{key:"getOutlinePath",value:function(e){if(this.isCacheStale("width","height","shape","controlPoints","round")){var t,n=this.width,r=this.height,a=this.stencil,i=this.controlPoints,o=this.round;if(a.outline.path)t=a.outline.path(n,r,i,o);else{var c=n/a.width,l=r/a.height;t=e.getPath(c,l)}return t}return null}},{key:"render",value:function(){I()(A()(n.prototype),"render",this).call(this);var e=this.model;e.width||(e.width=this.width),e.height||(e.height=this.height)}},{key:"getOuterWidth",value:function(){return this.width}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{stencils:mo,shape:"process",stroke:{color:"#595959",width:2},fill:{color:"#fff"},Subcells:[cu,us],textVerticalAlign:"center",penetratedKeys:["textVerticalAlign","controlPoints","round"]})}}]),n}();c()(su,"className","Geometry");var uu=Lr,du=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).eventHelper=new ko,r}return g()(n,[{key:"render",value:function(){var e=this.cell.graphicGroup,t=new uu;e.add(t),this.element=t,this.bindEvent()}},{key:"bindEvent",value:function(){var e=this,t=this.eventHelper,n=this.element;t.bind(n,"mouseenter",(function(){e.hover=!0,e.updateState()})),t.bind(n,"mouseleave",(function(){e.hover=!1,e.updateState()}))}},{key:"getClassNames",value:function(){return this.classNames.join(" ")}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.width,r=e.height;e.isCacheStale("width","height")&&t.update({d:wn(0,0,n,r),"stroke-width":1,fill:"rgba(0, 0, 0, 0)"})}},{key:"updateState",value:function(){var e=this.cell,t=this.element,n=this.hover,r=e.diagram,a=e.state.actived,i=r.signal;return a||n&&!i.cellDragStart?t.update({stroke:"rgba(9, 109, 217, 0.4)"}):t.update({stroke:"none"})}},{key:"destroy",value:function(){this.element.destroy(),this.eventHelper.destroy()}}]),n}();var hu=function(e){j()(n,Jl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"isGroup",!0),r}return g()(n,[{key:"children",get:function(){return this.getChildren()}},{key:"init",value:function(e){var t=this;I()(A()(n.prototype),"init",this).call(this,e),this.subcells=this.Subcells.map((function(e){return new e(t)})),this.render()}},{key:"canText",value:function(){return!1}},{key:"canConnect",value:function(){return!1}},{key:"canRotate",value:function(){return!1}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e)}},{key:"updateState",value:function(){this.subcells.forEach((function(e){e.updateState()}))}},{key:"_hasEntity",value:function(){var e=!1;return this.deepEach((function(t){return!!t.isGroup||(e=!0,!1)})),e}},{key:"_drawInner",value:function(){var e=this.graphicGroup,t=this.getChildren(),n=1/0,r=1/0,a=-1/0,i=-1/0;this.show(),t.forEach((function(e){var t;t=e.isGroup?e.getBBox():Gn(e)?e.getPointBox():Vn(e)?e.getFullBBox():e.getBBox(),n=Math.min(n,t.minX),r=Math.min(r,t.minY),a=Math.max(a,t.maxX),i=Math.max(i,t.maxY)}));var o=[1,0,0,0,1,0,n,r,1];this.x=n,this.y=r,this.width=a-n,this.height=i-r,this.matrix=o,this.isCacheStale("x","y","width","height")&&(this.subcells.forEach((function(e){return e.draw()})),e.update({matrix:o})),this.cache.x=n,this.cache.y=r,this.cache.width=a-n,this.cache.height=i-r}},{key:"draw",value:function(){var e=this.diagram.interaction;if(!this._hasEntity()||"edit"!==e.currentMode)return this.hide();this._drawInner()}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{fill:"rgba(2, 2, 2, 0.3)",x:0,y:0,width:1,height:1,isGroup:!0,Subcells:[du]})}}]),n}();c()(hu,"className","Group");var fu=new Map;fu.set(0,new Map([["tc",2],["rc",0],["bc",0],["lc",1],["tl",2],["tr",3],["br",0],["bl",1]]));var pu=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"tolerance",5),c()(this,"lengthTolerance",10),c()(this,"bleed",10),c()(this,"toAlignPointSets",[]),c()(this,"toAlignLengths",[]),c()(this,"toAlignDistributes",[]),c()(this,"refLines",[]),c()(this,"widthLines",[]),c()(this,"heightLines",[]),c()(this,"distributeWLines",[]),c()(this,"distributeHLines",[]),c()(this,"showLine",!0),c()(this,"refLinesGroup",void 0),c()(this,"startBox",void 0),c()(this,"preventAlignX",!1),c()(this,"preventAlignY",!1),c()(this,"alignRst",{dx:0,dy:0}),this.diagram=t,this.refLinesGroup=new xr,t.frontRootGroup.add(this.refLinesGroup)}return g()(e,[{key:"getPointsByBox",value:function(e){var t={x:e.maxX,y:e.minY,weight:0,box:e},n={x:e.minX,y:e.maxY,weight:0,box:e};return[{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2,weight:1,box:e},t,n]}},{key:"getPointsByPoint",value:function(e){return[e]}},{key:"getPointsByCell",value:function(e){var t=e.getBBox();return this.getPointsByBox(t)}},{key:"drawRefLines",value:function(){var e=this.refLines,t=this.refLinesGroup,n=1/this.diagram.viewport.zoom;e.forEach((function(e){var r=e.x1,a=e.y1,i=e.x2,o=e.y2;t.add(new Lr({d:"M".concat(r,",").concat(a," L").concat(i,",").concat(o),stroke:"#1672F3","stroke-width":n}))}))}},{key:"drawDistributeLines",value:function(){var e=this.refLinesGroup,t=1/this.diagram.viewport.zoom,n=3/this.diagram.viewport.zoom,r=1.5/this.diagram.viewport.zoom;this.distributeWLines.forEach((function(a){var i=b()(a,5),o=i[0],c=i[1],l=i[2],s=i[3],u=i[4];o+=r,c-=r,l+=r,s-=r;var d=u-n,h=u+n;e.add(new Lr({d:"M".concat(o,",").concat(u," L").concat(c,",").concat(u," M").concat(o,",").concat(d," L").concat(o,",").concat(h," M").concat(c,",").concat(d," L").concat(c,",").concat(h),stroke:"#1672F3","stroke-width":t})),e.add(new Lr({d:"M".concat(l,",").concat(u," L").concat(s,",").concat(u," M").concat(l,",").concat(d," L").concat(l,",").concat(h," M").concat(s,",").concat(d," L").concat(s,",").concat(h),stroke:"#1672F3","stroke-width":t}))})),this.distributeHLines.forEach((function(a){var i=b()(a,5),o=i[0],c=i[1],l=i[2],s=i[3],u=i[4];o+=r,c-=r,l+=r,s-=r;var d=u-n,h=u+n;e.add(new Lr({d:"M".concat(u,",").concat(o," L").concat(u,",").concat(c," M").concat(d,",").concat(o," L").concat(h,",").concat(o," M").concat(d,",").concat(c," L").concat(h,",").concat(c),stroke:"#1672F3","stroke-width":t})),e.add(new Lr({d:"M".concat(u,",").concat(l," L").concat(u,",").concat(s," M").concat(d,",").concat(l," L").concat(h,",").concat(l," M").concat(d,",").concat(s," L").concat(h,",").concat(s),stroke:"#1672F3","stroke-width":t}))}))}},{key:"drawRefLengths",value:function(){var e=this.refLinesGroup,t=1/this.diagram.viewport.zoom,n=5/this.diagram.viewport.zoom,r=15/this.diagram.viewport.zoom;this.widthLines.forEach((function(a){var i=a.x1,o=a.y1,c=a.x2,l=a.y2;o-=r,l-=r,e.add(new Lr({d:"M".concat(i,",").concat(o," L").concat(c,",").concat(l," M").concat(i,",").concat(o-n," L").concat(i,",").concat(o+n," M").concat(c,",").concat(l-n," L").concat(c,",").concat(l+n),stroke:"#1672F3","stroke-width":t}))})),this.heightLines.forEach((function(a){var i=a.x1,o=a.y1,c=a.x2,l=a.y2;i-=r,c-=r,e.add(new Lr({d:"M".concat(i,",").concat(o," L").concat(c,",").concat(l," M").concat(i-n,",").concat(o," L").concat(i+n,",").concat(o," M").concat(c-n,",").concat(l," L").concat(c+n,",").concat(l),stroke:"#1672F3","stroke-width":t}))}))}},{key:"prepareForDistribute",value:function(e){var t=this.diagram,n=t.viewport.getViewportCanvasBox(),r=nr(e),a=t.groupManager.getCells().filter((function(t){if(!t.isStem||Gn(t)||e.includes(t))return!1;var a=t.getBBox();return!gi(a,r)&&vi(a,n)}));this.toAlignDistributes=a.map((function(e){return e.getBBox()}))}},{key:"prepareForLength",value:function(e){this.startBox=e.getBBox();var t=this.diagram,n=t.viewport.getViewportCanvasBox(),r=t.groupManager.getCells().filter((function(t){return!(!t.isStem||Gn(t)||t===e)&&vi(t.getBBox(),n)}));this.toAlignLengths=r.map((function(e){return e.getBBox()}))}},{key:"updateToAlginPoints",value:function(e){var t=this,n=[];Array.isArray(e)?n=e:e&&(n=[e]);var r=this.diagram,a=r.paper,i=r.viewport.getViewportCanvasBox(),o=r.groupManager.getCells().filter((function(e){if("line"===e.model.type)return!1;for(var t=0;t<n.length;t++){var r=n[t];if(e.stem===r.stem)return!1}return vi(e.getBBox(),i)})),c=[];if(o.forEach((function(e){c.push(t.getPointsByCell(e))})),a.visible){var l=a.getBBox();c.push(this.getPointsByBox({minX:l.left,minY:l.top,maxX:l.right,maxY:l.bottom}))}this.toAlignPointSets=c}},{key:"alignDistribute",value:function(e){var t=this,n=5/this.diagram.viewport.zoom,r={dx:0,dy:0};if(0===this.toAlignDistributes.length)return r;var a=[],i=[];this.toAlignDistributes.forEach((function(n){t.isIntersectVericallly(n,e)&&a.push(n),t.isIntersectHorizontally(n,e)&&i.push(n)}));var o=1/0,c=1/0,l=1/0,s=1/0,u=(e.minX+e.maxX)/2,d=(e.minY+e.maxY)/2;if(this.distributeWLines=[],this.distributeHLines=[],0===this.alignRst.dx)for(var h=0;h<a.length;h++)for(var f=h+1;f<a.length;f++){var p=a[h],m=a[f],y=m,g=p;if(p.maxX<m.minX&&(y=p,g=m),this.horizontalDistance(p,m)>this.regionWidth(e)&&this.isIntersectVericallly(p,m)){var v=(y.maxX+g.minX)/2;if((c=Math.abs(u-v))<=n&&c<o){o=c,r.dx=v-u,this.distributeWLines=[[y.maxX,e.minX+r.dx,e.maxX+r.dx,g.minX,0]];var b=[y.minY,y.maxY,g.minY,g.maxY];b.sort((function(e,t){return e-t}));var x=(b[1]+b[2])/2;this.distributeWLines[0][4]=x}}}if(0===this.alignRst.dy)for(var k=0;k<i.length;k++)for(var w=k+1;w<i.length;w++){var C=i[k],E=i[w],O=E,P=C;if(C.minY<E.minY&&(O=C,P=E),this.verticalDistance(C,E)>this.regionHeight(e)&&this.isIntersectHorizontally(C,E)){var M=(O.maxY+P.minY)/2;if((s=Math.abs(d-M))<=n&&s<l){l=s,r.dy=M-d,this.distributeHLines=[[O.maxY,e.minY+r.dy,e.maxY+r.dy,P.minY,0]];var j=[O.minX,O.maxX,P.minX,P.maxX];j.sort((function(e,t){return e-t}));var S=(j[1]+j[2])/2;this.distributeHLines[0][4]=S}}}return this.draw(),r}},{key:"regionWidth",value:function(e){return e.maxX-e.minX}},{key:"regionHeight",value:function(e){return e.maxY-e.minY}},{key:"isIntersectVericallly",value:function(e,t){return!(e.maxY<t.minY||e.minY>t.maxY)}},{key:"isIntersectHorizontally",value:function(e,t){return!(e.maxX<t.minX||e.minX>t.maxX)}},{key:"horizontalDistance",value:function(e,t){return Math.min(Math.abs(e.minX-t.maxX),Math.abs(e.maxX-t.minX))}},{key:"verticalDistance",value:function(e,t){return Math.min(Math.abs(e.minY-t.maxY),Math.abs(e.maxY-t.minY))}},{key:"alignByLength",value:function(e,t){var n=this;if(0===hi(e.r)){var r,a,i=this.diagram,o=this.toAlignLengths,c=this.lengthTolerance/i.viewport.zoom;this.widthLines=[],this.heightLines=[];var l=1/0,s=1/0;o.forEach((function(t){var i=Math.abs(t.width-e.w),o=Math.abs(t.height-e.h);n.preventAlignX||i<=c&&(mi(i,l)?n.widthLines.push({x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y}):i<l&&(l=i,r=t.width,n.widthLines=[{x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y}])),n.preventAlignY||o<=c&&(mi(o,s)?n.heightLines.push({x1:t.x,y1:t.y,x2:t.x,y2:t.y+t.height}):o<s&&(s=o,a=t.height,n.heightLines=[{x1:t.x,y1:t.y,x2:t.x,y2:t.y+t.height}]))})),this.adjustRect(e,r,a,t),this.addItselfRefLengths(e),this.draw()}}},{key:"addItselfRefLengths",value:function(e){var t=tr(e);this.widthLines.length>0&&!this.preventAlignX&&this.widthLines.push({x1:t.minX,y1:t.minY,x2:t.maxX,y2:t.minY}),this.heightLines.length>0&&!this.preventAlignY&&this.heightLines.push({x1:t.minX,y1:t.minY,x2:t.minX,y2:t.maxY})}},{key:"adjustRect",value:function(e,t,n,r){var a,i=this.startBox;t=t||e.w,n=n||e.h;var o=tr(e);switch(null===(a=fu.get(e.r))||void 0===a?void 0:a.get(r)){case 0:mi(o.minX,i.minX)||(e.x=i.minX-t),mi(o.minY,i.minY)||(e.y=i.minY-n);break;case 1:mi(o.maxX,i.maxX)&&(e.x=i.maxX-t),mi(o.minY,i.minY)||(e.y=i.minY-n);break;case 2:mi(o.maxX,i.maxX)&&(e.x=i.maxX-t),mi(o.maxY,i.maxY)&&(e.y=i.maxY-n);break;case 3:mi(o.minX,i.minX)||(e.x=i.minX-t),mi(o.maxY,i.maxY)&&(e.y=i.maxY-n)}e.w=t,e.h=n}},{key:"alignByPoint",value:function(e){return this.align("Point",e)}},{key:"alignByBox",value:function(e){return this.align("Box",e)}},{key:"align",value:function(e,t){var n,r=this,a=this.bleed,i=this.showLine,o=this.toAlignPointSets,c=this.diagram,l=this.preventAlignX,s=this.preventAlignY,u={dx:0,dy:0},d=this.tolerance/c.viewport.zoom;if(0===o.length)return u;"Point"===e?(n=this.getPointsByPoint(t))[1]=n[2]=n[0]:n=this.getPointsByBox(t);var h=[];return this.refLines=[],n.forEach((function(e,t){o.forEach((function(n){if(0===t)h.push(r.computeDis(e,n[0]));else for(var a=1;a<n.length;++a)h.push(r.computeDis(e,n[a]))}))})),l||(h.sort((function(e,t){return e.hDis-t.hDis})),[h[0]].forEach((function(e){e.hDis<d&&(u.dx=e.dx,r.refLines.push({x1:e.to.x,x2:e.to.x,y1:Math.min(e.to.box.minY,e.from.box.minY)-a,y2:Math.max(e.to.box.maxY,e.from.box.maxY)+a}))}))),s||(h.sort((function(e,t){return e.vDis-t.vDis})),[h[0]].forEach((function(e){e.vDis<d&&(u.dy=e.dy,r.refLines.push({x1:Math.min(e.to.box.minX,e.from.box.minX)-a,x2:Math.max(e.to.box.maxX,e.from.box.maxX)+a,y1:e.to.y,y2:e.to.y}))}))),i&&this.draw(),this.alignRst=u,u}},{key:"computeDis",value:function(e,t){var n=t.x-e.x,r=t.y-e.y;return{from:e,to:t,weight:e.weight+t.weight,dx:n,dy:r,hDis:Math.abs(n),vDis:Math.abs(r)}}},{key:"draw",value:function(){this.refLinesGroup.clear(),this.drawRefLengths(),this.drawDistributeLines(),0===this.widthLines.length&&0===this.heightLines.length&&this.drawRefLines()}},{key:"clear",value:function(){this.refLines=[],this.widthLines=[],this.heightLines=[],this.distributeWLines=[],this.distributeHLines=[],this.refLinesGroup.clear()}},{key:"reset",value:function(){this.alignRst={dx:0,dy:0},this.clear(),this.preventAlignX=!1,this.preventAlignY=!1}},{key:"destroy",value:function(){}}]),e}();c()(pu,"className","Align");var mu=function(){function e(){m()(this,e),c()(this,"colors",void 0),this.colors=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#69B1E4","#E482D4","#77C386","#E48484","#A287E1","#DFB85D","#6EC4C4","#C28976","#6F81DB","#B1C774"],["#E6F4FC","#FAEDF6","#E9F7E9","#FCEFED","#EFE8FA","#FCF6E1","#E4F7F5","#F7EDE6","#E8EEFC","#F7FAE6"],["#C4E4F5","#F2D0E8","#CEEBD2","#FBD3D0","#DBCEF5","#F7E9BC","#C0EBE5","#EBD5CA","#C2CDF0","#E5EDCA"],["#91CAED","#EDA6D9","#9DD1A6","#EFACA9","#C0ABEB","#EBD28D","#9AD6D4","#D6AC9A","#91A2E3","#D0E09D"],["#5493C7","#BA5FA6","#579C67","#BD6468","#8169BF","#B88F44","#509FA1","#9C6657","#5461B8","#8CA357"],["#234870","#6B2D62","#244F31","#703039","#392E6E","#6B4C1D","#214D52","#4F2B24","#262A69","#415222"]]}return g()(e,[{key:"getColors",value:function(){return this.colors}},{key:"destroy",value:function(){this.colors=[[]]}}]),e}();function yu(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return e.forEach((function(e){var i,o,c,l;if("edge"===e.type){var s=[];e.source&&!e.source.id&&e.source.connection&&s.push(e.source.connection),e.target&&!e.target.id&&e.target.connection&&s.push(e.target.connection);var u=s.map((function(e){return e[0]})),d=s.map((function(e){return e[1]}));i=Math.min.apply(Math,N()(u)),o=Math.min.apply(Math,N()(d)),c=Math.max.apply(Math,N()(u)),l=Math.max.apply(Math,N()(d))}else i=e.x,o=e.y,c=e.x+(e.width||0),l=e.y+(e.height||0);i<t&&(t=i),o<n&&(n=o),c>r&&(r=c),l>a&&(a=l)})),{minX:t,minY:n,maxX:r,maxY:a}}function gu(e,t,n){if(e&&!e.id){var r=e.connection;e.connection=[r[0]+t,r[1]+n]}}function vu(e,t,n){"edge"===e.type?(gu(e.source,t,n),gu(e.target,t,n)):(e.x=(e.x||0)+t,e.y=(e.y||0)+n)}c()(mu,"className","Palette");var bu=function(e){j()(n,cl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).caches={},r}return g()(n,[{key:"clone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.diagram,r=yu(e);if(!vi(r,n.viewport.viewportCanvasBox)){var a=n.viewport.getCenter(),i=a[0]-(r.minX+r.maxX)/2,o=a[1]-(r.minY+r.maxY)/2;e.forEach((function(e){vu(e,i,o)}))}return La(e,t),e}}]),n}(),xu=function(){function e(t){m()(this,e),this.diagram=t,this.group=null}return g()(e,[{key:"getStemsByZIndex",value:function(){var e,t=this.diagram,n=this.group;return(e=n?n.getChildren():t.getCells().filter((function(e){return e.isRoot}))).sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e}},{key:"_getGroupCells",value:function(e){var t=[];return e.deepEachWithoutSelf((function(e){if(e.isGroup)return t.push(e),!1;t.push(e)})),t}},{key:"getCells",value:function(){var e=this.diagram,t=this.group;return t?this._getGroupCells(t):e.getCells().filter((function(e){return e.isRoot})).reduce((function(e,t){return t.isStem&&!t.isGroup?t.deepEach((function(t){e.push(t)})):e.push(t),e}),[])}},{key:"enter",value:function(e,t){this.group&&this.exit();var n,r=this.diagram,a=r.getCells(),i=e.getChildren();return i.forEach((function(e){if(e.isStem&&!e.isGroup)e.deepEach((function(e){if(e.isPointInShape(t))return n=e,!1}));else if(e.isPointInShape(t))return n=e,!1})),n?(a.forEach((function(e){i.includes(e.stem)?e.capture(!0):e.capture(!1)})),e.state.actived=!0,this.group=e,r.emit("afteractivedgroupchange"),n):null}},{key:"exit",value:function(){var e=this.group,t=this.diagram;if(e){for(var n=t.getCells(),r=e;r;)r.isGroup&&r.show(),r=r.parent;n.forEach((function(e){return e.capture(!0)})),e.state.actived=!1}this.group=null,t.emit("afteractivedgroupchange")}},{key:"destroy",value:function(){this.destroyed=!0,this.group=null}}]),e}();c()(xu,"className","GroupManager");var ku=function(e,t,n){var r,a,i,o=new mn(t);if(void 0!==e.width||void 0!==e.height)r=o.tl,e=Object.assign({},{x:t.x,y:t.y,width:t.w,height:t.h},e),a=[e.width/t.w,e.height/t.h],i=function(e){return[(e[0]-r.x)*a[0]+r.x,(e[1]-r.y)*a[1]+r.y]};else if(void 0!==e.x||void 0!==e.y){var c=o.tl,l=[(e=Object.assign({},{x:t.x,y:t.y,width:t.w,height:t.h},e)).x-c.x,e.y-c.y];a=[1,1],i=function(e){return[e[0]+l[0],e[1]+l[1]]}}return n.map((function(e){var t=e.type;if("line"===t)return{type:"line",points:e.points.map((function(e){return i(e)}))};var n=i([e.x,e.y]),r=b()(n,2);return{x:r[0],y:r[1],w:e.w*a[0],h:e.h*a[1],r:e.r,type:t}}))};function wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Eu={lake_prevent_click_unselect:!0,group_resize_controller:!0},Ou=function e(t){var n=t.type;if("group"===n){var r=[],a=[],i=[];return t.getChildren().forEach((function(t){var n=e(t);Array.isArray(n)?(r.push.apply(r,N()(n[0])),a.push.apply(a,N()(n[1])),i.push.apply(i,N()(n[2]))):(r.push(n.cell),a.push(n.data),i.push(n.originModel))})),[r,a,i]}if("line"===n){var o={},c=t,l=c.source,s=c.target,u=c.controlPoints,h=[];return!l.id&&l.connection&&(h.push(l.connection),o.source=d()(l)),h.push.apply(h,N()(u)),o.controlPoints=u,!s.id&&s.connection&&(h.push(s.connection),o.target=d()(s)),{cell:t,data:{type:"line",points:h},originModel:o}}return{cell:t,data:{type:n,x:t.x,y:t.y,w:t.width,h:t.height,r:t.rotate},originModel:{x:t.x,y:t.y,width:t.width,height:t.height,rotate:t.rotate}}},Pu=function(e,t,n){return e.map((function(e,r){if("line"===e.type){var a=e.points,i=t[r],o={};return i.source.id||(o.source={},o.source.connection=a.shift()),i.target.id||(o.target={},o.target.connection=a.pop()),o.controlPoints=N()(a),"elbow"===i.shape&&o.controlPoints.forEach((function(e,t){e.push(i.controlPoints[t][2])})),o}var c={x:e.x,y:e.y,width:e.w,height:e.h,rotate:e.r};return"stack"===e.type&&delete c.height,"lc"===n||"rc"===n?c.height=void 0:"tc"!==n&&"bc"!==n||(c.width=void 0),c}))},Mu=function(){function e(t){m()(this,e);var n=new xr,r=Ea("tc",Eu),a=Ea("bc",Eu),i=Ea("lc",Eu),o=Ea("rc",Eu),c=Ca("tl",Eu),l=Ca("tr",Eu),s=Ca("bl",Eu),u=Ca("br",Eu),d=Oa("rotate");n.on("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),n.add(r.group),n.add(a.group),n.add(i.group),n.add(o.group),n.add(c.group),n.add(l.group),n.add(s.group),n.add(u.group),n.add(d.group),this.diagram=t,this.group=n,this.tl=c,this.tr=l,this.bl=s,this.br=u,this.tc=r,this.bc=a,this.lc=i,this.rc=o,this.rotateBtn=d,this.eventHelper=new ko}return g()(e,[{key:"init",value:function(e){var t=this.tl,n=this.tr,r=this.bl,a=this.br,i=this.rotateBtn;Array.isArray(e)?(this.cells=e,t.group.css({display:"none"}),n.group.css({display:"none"}),r.group.css({display:"none"}),a.group.css({display:"none"}),i.group.css({display:"none"})):(this.groupCell=e,t.group.css({display:"initial"}),n.group.css({display:"initial"}),r.group.css({display:"initial"}),a.group.css({display:"initial"}),i.group.css({display:"initial"}))}},{key:"update",value:function(){var e,t,n,r,a,i=this.groupCell,o=this.tl,c=this.tr,l=this.bl,s=this.br,u=this.tc,d=this.bc,h=this.lc,f=this.rc,p=this.diagram,m=this.rotateBtn,y=this.cells,g=1/p.viewport.zoom,v=g,b=8*g;if(y){var x=nr(y.reduce((function(e,t){return t.isAbstract?e.concat(t.abstractCoveredCellsWithAllChildren,t):e.concat(t)}),[]),(function(e){return Un(e)?e.getKeyShapeBox():Gn(e)?e.getPointBox():e.getBBox()})),k=x.minX,w=x.minY,C=x.maxX,E=x.maxY;e={x:k,y:w},t={x:C,y:w},n={x:k,y:E},r={x:C,y:E}}else{if(!i)return;e=i.percentage2Canvas({x:0,y:0}),t=i.percentage2Canvas({x:1,y:0}),n=i.percentage2Canvas({x:0,y:1}),r=i.percentage2Canvas({x:1,y:1});var O=14*g;a=i.relative2Canvas({x:-O,y:i.height+O})}o.group.update(Cu(Cu({},e),{},{scale:g,rotate:0})),c.group.update(Cu(Cu({},t),{},{scale:g,rotate:0})),l.group.update(Cu(Cu({},n),{},{scale:g,rotate:0})),s.group.update(Cu(Cu({},r),{},{scale:g,rotate:0})),m.group.update(Cu(Cu({},a),{},{scale:g,rotate:0})),u.shape.update({d:"M".concat(e.x,",").concat(e.y," L").concat(t.x,",").concat(t.y),"stroke-width":b}),d.shape.update({d:"M".concat(n.x,",").concat(n.y," L").concat(r.x,",").concat(r.y),"stroke-width":b}),h.shape.update({d:"M".concat(e.x,",").concat(e.y," L").concat(n.x,",").concat(n.y),"stroke-width":b}),f.shape.update({d:"M".concat(t.x,",").concat(t.y," L").concat(r.x,",").concat(r.y),"stroke-width":b}),u.visShape.update({d:"M".concat(e.x,",").concat(e.y," L").concat(t.x,",").concat(t.y),"stroke-width":v}),d.visShape.update({d:"M".concat(n.x,",").concat(n.y," L").concat(r.x,",").concat(r.y),"stroke-width":v}),h.visShape.update({d:"M".concat(e.x,",").concat(e.y," L").concat(n.x,",").concat(n.y),"stroke-width":v}),f.visShape.update({d:"M".concat(t.x,",").concat(t.y," L").concat(r.x,",").concat(r.y),"stroke-width":v})}},{key:"bindEvent",value:function(){var e,t,n,r,a,i,o,c,l,s,u=this,h=this.groupCell,f=this.tl,p=this.tr,m=this.bl,y=this.br,g=this.tc,v=this.bc,x=this.lc,k=this.rc,C=this.eventHelper,E=this.rotateBtn,O=h.diagram,P=O.viewport.zoom,M=-1;[f,p,m,y,g,v,x,k,E].forEach((function(o){var c=o.shape,l=o.name;C.bind(c,"mousedown",(function(o){s=O.viewport.invertClient([o.clientX,o.clientY]),O.contentEditor.unbind(),e=l,t={x:h.x,y:h.y,w:h.width,h:h.height,r:0};var c=Ou(h),u=b()(c,3);r=u[0],n=u[1],a=u[2];for(var d=0;d<n.length;d++)if("line"!==n[d].type||n[d].points[0]){M=d;break}i=n[M]}))})),C.bind(O,"mousemove",(function(a){if(e){var i,f=O.viewport.invertClient([a.clientX,a.clientY]);if("rotate"===e){var p=function(e,t,n,r){var a=dn(n),i=fn(a,e,t),o=hi(n.r+i);o=Math.ceil(o);for(var c=[-180,-90,0,90,180],l=0;l<c.length;l++){var s=c[l];if(mi(o,s,4)){o=s;break}}return{newChildrenRect:r.map((function(e){if("line"===e.type)return{type:"line",points:e.points.map((function(e){var t=[];return w.b.rotate(t,[e[0]-a.x,e[1]-a.y],[0,0],pi(o)),t[0]+=a.x,t[1]+=a.y,t}))};var t=qi(a,o,[e]),n=b()(t,1)[0];return{x:n.x,y:n.y,w:e.w,h:e.h,r:n.r}})),groupRotate:o}}({x:s[0],y:s[1]},{x:f[0],y:f[1]},t,n);i=p.newChildrenRect,O.emit("cellrotate",{cell:h,rotate:p.groupRotate})}else{var m=!1;["tl","tr","bl","br"].includes(e)&&(m=!0),i=function(e,t,n,r,a){var i,o,c,l=new mn(n),s=e,u=[];if(a){switch(t){case"tl":case"br":u=[l.tl,l.br];break;case"tr":case"bl":u=[l.tr,l.bl];break;case"tc":case"bc":u=[l.tc,l.bc];break;case"lc":case"rc":u=[l.lc,l.rc];break;default:u=[]}2===u.length&&(s=pn(u,e))}switch(t){case"tl":o=l.tl,i=l.br,c=[o.x-s.x,o.y-s.y];break;case"tr":o=l.tr,i=l.bl,c=[s.x-o.x,o.y-s.y];break;case"bl":o=l.bl,i=l.tr,c=[o.x-s.x,s.y-o.y];break;case"br":o=l.br,i=l.tl,c=[s.x-o.x,s.y-o.y];break;case"rc":o=l.rc,i=l.lc,c=[s.x-o.x,0];break;case"lc":o=l.lc,i=l.rc,c=[o.x-s.x,0];break;case"bc":o=l.bc,i=l.tc,c=[0,s.y-o.y];break;case"tc":o=l.tc,i=l.bc,c=[0,o.y-s.y]}var d=[1+c[0]/n.w,1+c[1]/n.h];d[0]<0&&(d[0]=.01),d[1]<0&&(d[1]=.01);var h=function(e){return[(e[0]-i.x)*d[0]+i.x,(e[1]-i.y)*d[1]+i.y]};return{newChildrenRect:r.map((function(e){var t=e.type;if("line"===t)return{type:"line",points:e.points.map((function(e){return h(e)}))};var n=h([e.x,e.y]),r=b()(n,2);return{x:r[0],y:r[1],w:e.w*d[0],h:e.h*d[1],r:e.r,type:t}}))}}({x:f[0],y:f[1]},e,t,n,m).newChildrenRect}o=d()(i[M]),c=Pu(i,r,e),O.update(r,c),"rotate"===e?u.hide():u.update(),O.emit("groupresizestart")}else if(a.target.dataset.group_resize_controller){var y;if("line"===a.target.dataset.type){var g=bn(a.target.getAttribute("d"));y=Aa([g[1][1]-g[0][1],g[1][2]-g[0][2]],{x:-1,y:-1,width:1,height:1},Math.PI/2+.01)}else y=Ba(O.viewport.invertClient([a.clientX,a.clientY]),h.getBBox());l||(l=!0),O.setCursor(y)}else l&&(O.resetCursor(),l=void 0)})),C.bind(O,"mouseup",(function(){var s=u.groupCell;O.resetCursor();var d=!1;if(o&&i&&M>=0)if("line"===i.type){var h=i.points[0],f=o.points[0];h[0]===f[0]&&h[1]===f[1]||(d=!0)}else o.x===i.x&&o.y===i.y&&o.w===i.w&&o.h===i.h&&o.r===i.r||(d=!0);d&&O.command.execute("Update",{id:r.map((function(e){return e.model.id})),model:c,originModels:a,select:function(){O.selector.select([s.model.id])}}),e=void 0,t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,i=void 0,c=void 0,l=void 0})),C.bind(O,"afterviewportchange",De()((function(){P!==O.viewport.zoom&&(u.update(),P=O.viewport.zoom)})))}},{key:"begin",value:function(){this.diagram.frontRootGroup.add(this.group),this.update(),this.show(),this.cells||this.bindEvent()}},{key:"end",value:function(){this.group&&this.group.remove(),this.groupCell=void 0,this.cells=void 0,this.eventHelper.unbind()}},{key:"show",value:function(){this.group.css({display:"initial"})}},{key:"hide",value:function(){this.group.css({display:"none"})}},{key:"destroy",value:function(){this.diagram&&this.diagram.resetCursor(),this.eventHelper.unbind(),this.group&&this.group.remove()}}]),e}();function ju(e,t,n){var r=new mn(n),a=pn([r.tl,r.tr],t),i=pn([r.tl,r.bl],t),o=pn([r.tr,r.br],t),c=pn([r.bl,r.br],t),l=Dt(pn([i,o],e).x,0,n.w),s=Dt(pn([a,c],e).y,0,n.h);return[cn(i,{x:l,y:t.y})/n.w,cn(a,{x:t.x,y:s})/n.h]}function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ru(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Mu,"className","GroupRotateResize");var Lu=function(){function e(t){m()(this,e),c()(this,"cell",void 0),c()(this,"diagram",void 0),c()(this,"controlPointsButtons",void 0),c()(this,"roundButton",void 0),c()(this,"group",void 0),c()(this,"eventHelper",void 0),c()(this,"shape",void 0),c()(this,"isMouseMove",void 0),this.diagram=t,this.group=new xr,this.group.on("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),this.eventHelper=new ko}return g()(e,[{key:"init",value:function(e){this.cell=e,this.shape=this.cell.shape,this.prepareButtons()}},{key:"begin",value:function(){this.controlPointsButtons&&(this.isMouseMove=!1,this.diagram.frontRootGroup.add(this.group),this.update(),this.bindEvent())}},{key:"end",value:function(){this._clear(),this.eventHelper.unbind()}},{key:"_clear",value:function(){this.group&&this.group.clear()}},{key:"update",value:function(){var e=this;if(this.cell){this.shape!==this.cell.shape&&(this._clear(),this.eventHelper.unbind(),this.prepareButtons(),this.bindEvent(),this.shape=this.cell.shape);var t=1/(this.diagram.viewport.zoom||1),n=this.cell.rotate/360*2*Math.PI;if(this.controlPointsButtons.length>0&&this.cell.controlPoints.forEach((function(r,a){var i=e.cell.percentage2Canvas({x:Dt(r[0],0,1),y:Dt(r[1],0,1)});e.controlPointsButtons[a].group.update(Ru(Ru({},i),{},{scale:t,rotate:n}))})),this.roundButton){var r=Dt(this.cell.round/this.cell.width,0,Math.min(this.cell.width,this.cell.height)/2/this.cell.width);this.isMouseMove||(this.cell.round<8&&(r=8/this.cell.width),this.cell.width<8?this.roundButton.group.hide():this.roundButton.group.show());var a=r,i=this.cell.percentage2Canvas({x:r,y:a});this.roundButton.group.update(Ru(Ru({},i),{},{scale:t,rotate:n}))}}}},{key:"destroy",value:function(){this.group.remove()}},{key:"hide",value:function(){this.group.hide()}},{key:"show",value:function(){this.group.show()}},{key:"prepareButtons",value:function(){this.createControlPointsButtons(),this.createRoundButton()}},{key:"bindEvent",value:function(){var e,t,n,r=this,a=!1;function i(){t=void 0,n=void 0}this.controlPointsButtons.forEach((function(o,c){var l=o.shape;r.eventHelper.bind(l,"mousedown",(function(){r.diagram.contentEditor.unbind(),a=!0,e=c,t={controlPoints:r.cell.controlPoints}})),r.eventHelper.bind(r.diagram,"mousemove",De()((function(t){a&&(n=r.computeControlPoints(t,e),r.diagram.update(r.cell,{controlPoints:n}))}),16)),r.eventHelper.bind(r.diagram,"mouseup",(function(){a&&(a=!1,e=0,we()(t.controlPoints,n)||(r.diagram.command.execute("Update",{id:r.cell,model:{controlPoints:n},originModels:[t]}),i()))}))})),this.roundButton&&(this.eventHelper.bind(this.roundButton.shape,"mousedown",(function(){r.diagram.contentEditor.unbind(),a=!0,t={round:r.cell.round}})),this.eventHelper.bind(this.diagram,"mousemove",De()((function(e){a&&(r.isMouseMove=!0,n=r.computeRoundPoint(e),r.diagram.update(r.cell,{round:n}))}),16)),this.eventHelper.bind(this.diagram,"mouseup",(function(){a&&(r.isMouseMove=!1,r.update(),a=!1,we()(t.round,n)||(r.diagram.command.execute("Update",{id:r.cell,model:{round:n},originModels:[t]}),i()))})))}},{key:"createRoundButton",value:function(){"number"==typeof this.cell.round?this.roundButton=this.createButton("round"):this.roundButton=void 0}},{key:"createControlPointsButtons",value:function(){var e=this;this.cell.controlPoints?this.controlPointsButtons=this.cell.controlPoints.map((function(){return e.createButton("control_point")})):this.controlPointsButtons=[]}},{key:"createButton",value:function(e){var t=new Pr,n=9*Math.sin(Math.PI/4),r=wn(n/-2,n/-2,n,n,1.5),a=w.a.rotate([],[1,0,0,0,1,0,0,0,1],Math.PI/4),i=new Lr({d:r,stroke:"rgba(255,255,255,0.8)","stroke-width":1,fill:"#3384F5",matrix:a});return i.dataset({testid:e}),t.add(i),this.group.add(t),{group:t,shape:i}}},{key:"computeControlPoints",value:function(e,t){var n=this.diagram.viewport.invertClient([e.clientX,e.clientY]),r=this.cell.stencil.controlPointsConfig,a=this.cell.controlPoints,i=a[t],o=w.c.transformMat3([],w.c.clone([n[0],n[1],1]),w.a.invert([],this.cell.matrix)),c=b()(o,2),l=ju({x:c[0],y:c[1]},{x:i[0]*this.cell.width,y:i[1]*this.cell.height},{x:0,y:0,w:this.cell.width,h:this.cell.height,r:0}),s=["x","y"].map((function(e,n){var o=[0,1],c=r[t][e].limit;return void 0===c?o=[0,1]:Array.isArray(c)?o=c.map((function(e){return"string"==typeof e?a[Number(e)][n]:e})):!0===c&&(o=[i[n],i[n]]),Dt(l[n],o[0],o[1])})),u=d()(a);return u[t]=s,["x","y"].forEach((function(e,n){var a=r[t][e].proportional;if(a){var o=s[n]-i[n];a.forEach((function(e){u[Number(e)][n]+=o}))}})),u}},{key:"computeRoundPoint",value:function(e){var t=this.diagram.viewport.invertClient([e.clientX,e.clientY]),n=w.c.transformMat3([],w.c.clone([t[0],t[1],1]),w.a.invert([],this.cell.matrix)),r=b()(n,2),a=ju({x:r[0],y:r[1]},{x:Dt(this.cell.round,0,Math.min(this.cell.width,this.cell.height)/2),y:0},{x:0,y:0,w:this.cell.width,h:this.cell.height,r:0});return Dt(a[0]*this.cell.width,0,Math.min(this.cell.width,this.cell.height)/2)}}]),e}();function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nu={lake_prevent_click_unselect:"true",vertex_resize_controller:"true"},Du=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"cell",void 0),c()(this,"group",new xr),c()(this,"eventHelper",new ko),c()(this,"controlPointsManager",void 0),c()(this,"tl",void 0),c()(this,"tr",void 0),c()(this,"bl",void 0),c()(this,"br",void 0),c()(this,"tc",void 0),c()(this,"bc",void 0),c()(this,"lc",void 0),c()(this,"rc",void 0),c()(this,"rotateBtn",void 0),c()(this,"resizeRotatePoints",void 0),c()(this,"cursors",void 0);var n=Ea("tc",Nu),r=Ea("bc",Nu),a=Ea("lc",Nu),i=Ea("rc",Nu),o=Ca("tl",Nu),l=Ca("tr",Nu),s=Ca("bl",Nu),u=Ca("br",Nu),d=Oa("rotate");this.group.on("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),this.group.add(n.group),this.group.add(r.group),this.group.add(a.group),this.group.add(i.group),this.group.add(o.group),this.group.add(l.group),this.group.add(s.group),this.group.add(u.group),this.group.add(d.group),this.tl=o,this.tr=l,this.bl=s,this.br=u,this.tc=n,this.bc=r,this.lc=a,this.rc=i,this.rotateBtn=d,this.controlPointsManager=new Lu(t)}return g()(e,[{key:"init",value:function(e){var t=this,n=this.tl,r=this.tr,a=this.bl,i=this.br,o=this.tc,c=this.bc,l=this.lc,s=this.rc,u=this.rotateBtn;this.cell=e;var d={tl:n,tr:r,bl:a,br:i,tc:o,bc:c,lc:l,rc:s,rotate:u};e.resizeRotatePoints?this.resizeRotatePoints=e.resizeRotatePoints.map((function(e){return d[e]})):this.resizeRotatePoints=Object.keys(d).map((function(e){return d[e]})),this.cursors={},this.resizeRotatePoints.forEach((function(e){e===l||e===s?t.cursors["ew-resize"]=!0:e===o||e===c?t.cursors["ns-resize"]=!0:e===n||e===i?t.cursors["nwse-resize"]=!0:e!==a&&e!==r||(t.cursors["nesw-resize"]=!0)})),Zn(e)&&this.controlPointsManager.init(e)}},{key:"update",value:function(){var e=this.cell,t=this.tl,n=this.tr,r=this.bl,a=this.br,i=this.tc,o=this.bc,c=this.lc,l=this.rc,s=this.rotateBtn,u=this.diagram;if(e){this.controlPointsManager.update();var d=1/u.viewport.zoom,h=pi(e.rotate||0),f=e.percentage2Canvas({x:0,y:0}),p=e.percentage2Canvas({x:1,y:0}),m=e.percentage2Canvas({x:0,y:1}),y=e.percentage2Canvas({x:1,y:1});if(Un(e)){var g=bn(e.outlineElement.attr("d"));g&&(p=e.getPointAtLength(g[1][1]+g[2][1]))}var v=d,b=8*d,x=12*d+e.stroke.width/2,k=e.relative2Canvas({x:0-x,y:e.height+x});t.group.update(Bu(Bu({},f),{},{scale:d,rotate:h})),n.group.update(Bu(Bu({},p),{},{scale:d,rotate:h})),r.group.update(Bu(Bu({},m),{},{scale:d,rotate:h})),a.group.update(Bu(Bu({},y),{},{scale:d,rotate:h})),s.group.update(Bu(Bu({},k),{},{scale:d,rotate:h})),i.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":b}),o.shape.update({d:"M".concat(m.x,",").concat(m.y," L").concat(y.x,",").concat(y.y),"stroke-width":b}),c.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(m.x,",").concat(m.y),"stroke-width":b}),l.shape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(y.x,",").concat(y.y),"stroke-width":b}),i.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":v}),o.visShape.update({d:"M".concat(m.x,",").concat(m.y," L").concat(y.x,",").concat(y.y),"stroke-width":v}),c.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(m.x,",").concat(m.y),"stroke-width":v}),l.visShape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(y.x,",").concat(y.y),"stroke-width":v}),[t,n,r,a,s].forEach((function(e){return e.group.css({visibility:"hidden"})})),this.resizeRotatePoints.forEach((function(e){return e.group.css({visibility:"initial"})})),Un(e)&&[i,o,c,l].forEach((function(e){return e.group.css({visibility:"hidden"})}))}}},{key:"bindEvent",value:function(){var e,t,n,r,a,i,o,c,l=this,s=this.cell,u=this.eventHelper,d=s.diagram,h=d.viewport.zoom;function f(){var t,n,r,a,o,c,l,u={x:null===(t=i)||void 0===t?void 0:t.x,y:null===(n=i)||void 0===n?void 0:n.y,width:null===(r=i)||void 0===r?void 0:r.w,height:null===(a=i)||void 0===a?void 0:a.h,rotate:null===(o=i)||void 0===o?void 0:o.r};return"lc"===e||"rc"===e?u.height=void 0:"tc"!==e&&"bc"!==e||(u.width=void 0),Un(s)&&(u={width:Dt(null===(c=i)||void 0===c?void 0:c.w,s.minWidth,1/0),height:Dt(null===(l=i)||void 0===l?void 0:l.h,s.minHeight,1/0)}),u}this.resizeRotatePoints.forEach((function(a){var i=a.shape,l=a.name;u.bind(i,"mousedown",(function(a){d.contentEditor.unbind(),e=l,n=d.viewport.invertClient([a.clientX,a.clientY]),r={x:s.x,y:s.y,width:s.width,height:s.height,rotate:s.rotate},t={x:s.x,y:s.y,w:s.width,h:s.height,r:s.rotate},d.align.updateToAlginPoints(s),d.align.prepareForLength(s),"tc"!==e&&"bc"!==e||(d.align.preventAlignX=!0),"lc"!==e&&"rc"!==e||(d.align.preventAlignY=!0);var i=new mn(t);c=Ri(i.tl.x,i.tl.y,i.br.x,i.br.y),o=Ri(i.tr.x,i.tr.y,i.bl.x,i.bl.y)}))})),u.bind(d,"mousemove",(function(r){if(e){var u=d.viewport.invertClient([r.clientX,r.clientY]),h=d.signal.keydown.Shift||s.constraints&&s.constraints.proportion;if(t)if("rotate"===e&&n)k={x:n[0],y:n[1]},w={x:u[0],y:u[1]},E=h&&15,O=dn(C=t),P=fn(O,k,w),(M=C.r+P)>=180&&(M-=360),M<=-180&&(M+=360),E&&(M=E*Math.round(M/E)),i=tn(tn({},C),{},{r:M}),l.alignRotate(i),d.emit("cellrotate",{cell:s,rotate:i.r});else{var p=("tl"===e||"br"===e)&&c||("bl"===e||"tr"===e)&&o,m=p&&p.f(u[0]);u[1]=h&&m?m:u[1];var y,g=d.align.alignByPoint({x:u[0],y:u[1],weight:1,box:s.getBBox()});u[0]+=g.dx,u[1]+=g.dy,h&&p&&(0!==g.dx?(y=p.f(u[0]))&&(u[1]=y):0!==g.dy&&(y=p.fy(u[1]))&&(u[0]=y)),(i=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new mn(n),i=null,o=[],c=e;if(r){switch(t){case"tl":case"br":o=[a.tl,a.br];break;case"tr":case"bl":o=[a.tr,a.bl];break;case"tc":case"bc":o=[a.tc,a.bc],i="height";break;case"lc":case"rc":o=[a.lc,a.rc],i="width";break;default:o=[]}2===o.length&&(c=pn(o,e))}var l=[];switch(t){case"tl":l=[a.br];break;case"tr":l=[a.bl];break;case"bl":l=[a.tr];break;case"br":l=[a.tl];break;case"bc":l=[a.tl,a.tr];break;case"tc":l=[a.bl,a.br];break;case"lc":l=[a.tr,a.br];break;case"rc":l=[a.tl,a.bl];break;default:l=[]}var s,u=l,d=u.length;return 1===d?s=ln(l[0],c,n.r):2===d&&(s=r?un(l,c,n,i):sn(l,c,n.r)),s}({x:u[0],y:u[1]},e,t))&&!Un(l.cell)&&d.align.alignByLength(i,e)}if(d.update(s,f()),l.update(),-1!==["tl","bl","tr","br"].indexOf(e)){var v=Aa(d.viewport.invertClient([r.clientX,r.clientY]),s.getBBox(),Math.PI/8);d.setCursor(v)}d.emit("vertexresizestart")}else if(r.target.dataset.vertex_resize_controller){var b;if("line"===r.target.dataset.type){var x=bn(r.target.getAttribute("d"));b=Aa([x[1][1]-x[0][1],x[1][2]-x[0][2]],{x:-1,y:-1,width:1,height:1},Math.PI/2+.01)}else b=Ba(d.viewport.invertClient([r.clientX,r.clientY]),s.getBBox());a||(a=!0),l.cursors[b]&&d.setCursor(b)}else a&&(d.resetCursor(),a=void 0);var k,w,C,E,O,P,M})),u.bind(d,"mouseup",(function(){d.emit("vertexresizeend"),i&&t&&(t.x!==i.x||t.y!==i.y||t.w!==i.w||t.h!==i.h||t.r!==i.r)&&(Kn(s)?d.command.execute("UpdateSwimlane",{id:s,model:f(),originModels:[r]}):d.command.execute("Update",{id:s,model:f(),originModels:[r]}),d.emit("aftervertexresize")),e=void 0,t=void 0,i=void 0,n=void 0,a=void 0,r=void 0,d.align.reset()})),u.bind(d,"afterviewportchange",De()((function(){h!==d.viewport.zoom&&(l.update(),h=d.viewport.zoom)}))),u.bind(d,"vertexresizestart",(function(){return l.hide()})),u.bind(d,"vertexresizeend",(function(){return l.show()}))}},{key:"hide",value:function(){this.group.css({display:"none"}),this.controlPointsManager.hide()}},{key:"show",value:function(){this.group.css({display:"initial"}),this.controlPointsManager.show()}},{key:"begin",value:function(){this.cell.diagram.frontRootGroup.add(this.group),this.controlPointsManager.begin(),this.update(),this.show(),this.bindEvent()}},{key:"end",value:function(){this.hide(),this.eventHelper.unbind(),this.controlPointsManager.end(),this.diagram&&this.diagram.align.reset()}},{key:"destroy",value:function(){this.controlPointsManager.destroy(),this.diagram&&this.diagram.resetCursor(),this.eventHelper.unbind(),this.group&&this.group.remove()}},{key:"alignRotate",value:function(e){e.r=Math.ceil(e.r);for(var t=[-180,-90,0,90,180],n=0;n<t.length;n++){var r=t[n];if(mi(e.r,r,4)){e.r=r;break}}}}]),e}();c()(Du,"className","VertexRotateResize");var Iu=function(){function e(t){m()(this,e),this.diagram=t,this.eventHelper=new ko,this.zoom=-1/0,this.arr=[],this.maxStashes={},this.bindEvent()}return g()(e,[{key:"bindEvent",value:function(){var e=this,t=this.diagram;this.eventHelper.bind(t,"afterviewportchange",Te()((function(){t.destroyed||e._update()}),100))}},{key:"setImageHref",value:function(e,t,n,r){this.arr.push({image:e,href:t,naturalWidth:n,naturalHeight:r}),this._setImageHref(e,t,n,r)}},{key:"_setImageHref",value:function(e,t,n,a){var i,o=this.diagram,c=this.maxStashes,l=o.viewport.zoom,s=Number(e.attr("width")),u=e.attr("href"),d=c[t],h=s*l;d&&d.clientWidth>h?i=d.href:(i=r.OssUtil.resizeImage({maxWidth:h,src:t,data:{width:h,originWidth:n,originHeight:a}})||t,c[t]={clientWidth:h,href:i}),u!==i&&e.update({href:i})}},{key:"_gc",value:function(){this.arr=this.arr.filter((function(e){return e&&!e.image.destroyed}))}},{key:"_refreshOssUrl",value:function(){var e=this,t=this.arr,n=this.diagram,r=this.zoom;n.viewport.zoom>r&&(t.forEach((function(t){var n=t.image,r=t.href,a=t.naturalWidth,i=t.naturalHeight;e._setImageHref(n,r,a,i)})),this.zoom=n.viewport.zoom)}},{key:"_update",value:function(){this._gc(),this._refreshOssUrl()}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.destroyed=!0}}]),e}();c()(Iu,"className","ImageManager");var Tu=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"group",new xr),c()(this,"eventHelper",new ko),c()(this,"arr",[]),c()(this,"destroyed",!1),(new xr).css({"pointer-events":"none"})}return g()(e,[{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;e.arr.length>0&&("update"===n||"delete"===n)&&e.draw()}))}},{key:"show",value:function(){this.group.show()}},{key:"hide",value:function(){this.group.hide()}},{key:"select",value:function(e){var t=this.diagram.viewport.zoom;e=e.filter((function(e){return e.state.visible})),this.render(e,(function(){return{shapeStyle:{fill:"none",stroke:"#3384F5","stroke-width":1/t}}}))}},{key:"render",value:function(e,t){var n=this.group,r=this.diagram;this.clear(),e&&!e.some((function(e){return!e||!e.isCell}))&&(r.frontRootGroup.add(n),this.bind(),this.arr=e.map((function(e){var r=t(e),a=r.type,i=r.shapeStyle,o={cell:e,type:"function"==typeof a?a(e):a,shape:i&&new Lr(i)};return o.shape&&n.add(o.shape),o})),this.draw())}},{key:"updateShape",value:function(e){var t,n=e.cell,r=e.shape,a=[1,0,0,0,1,0,0,0,1];if(Gn(n)){var i=n.getPointBox();t=wn(i.x,i.y,i.width,i.height)}else if(Vn(n)){var o=n.percentage2Canvas({x:0,y:0}),c=n.percentage2Canvas({x:1,y:0}),l=n.percentage2Canvas({x:0,y:1});t=Cn([o,c,n.percentage2Canvas({x:1,y:1}),l,o])+"z"}else Un(n)&&(t=n.borderElement.attr("d"),a=N()(n.matrix));r.update({matrix:a,d:t,"stroke-width":1})}},{key:"_draw",value:function(){var e=this;this.arr.forEach((function(t){e.updateShape(t)}))}},{key:"draw",value:function(){this.arr.length>0&&this._draw()}},{key:"clear",value:function(){this.destroyed||(this.arr=[],this.group.clear(),this.group.remove(),this.eventHelper.unbind())}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.diagram=void 0,this.group=void 0,this.arr=void 0,this.destroyed=!0}}]),e}();c()(Tu,"className","Highlight");var _u=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"line",void 0),c()(this,"refLinesGroup",new xr),c()(this,"fixedPoint",void 0),c()(this,"ns",void 0),c()(this,"we",void 0),c()(this,"nwse",void 0),c()(this,"nesw",void 0),c()(this,"_enable",!1),this.diagram.frontRootGroup.add(this.refLinesGroup)}return g()(e,[{key:"init",value:function(e,t){this.line=e;var n=e.getPoints();this.fixedPoint="source"===t?n[1]:n[n.length-2]}},{key:"align",value:function(e){if(e=ei(e),e=function(e,t){e=ei(e),t=ei(t);var n=e,r=n.x,a=n.y,i=t,o=i.x,c=i.y,l=bi(r,a,o,c);return Math.abs(l)<.1&&Math.abs(c-a)<8?t.y=a:Math.abs(l)>10&&Math.abs(o-r)<8&&(t.x=r),t}(this.fixedPoint,e),!this._enable)return e;var t=this.createOneRefLine(e);if(t){this.refLinesGroup.clear(),this.refLinesGroup.add(t.path);var n=1/(this.diagram.viewport.zoom||1);t.path.update({"stroke-width":n});var r=t.start,a=t.end;return pn([{x:r[0],y:r[1]},{x:a[0],y:a[1]}],e)}return e}},{key:"createOneRefLine",value:function(e){var t=this.fixedPoint,n=t.x,r=t.y,a=fi(Ci(n,r,e.x,e.y));return(a=a>180?a-180:a)>=0&&a<22.5?{path:new Lr({d:"M".concat(n-5e4,",").concat(r," L").concat(n+5e4,",").concat(r),stroke:"#1672F3"}),start:[n-5e4,r],end:[n+5e4,r]}:a>=22.5&&a<67.5?{path:new Lr({d:"M".concat(n-5e4,",").concat(r-5e4," L").concat(n+5e4,",").concat(r+5e4),stroke:"#1672F3"}),start:[n-5e4,r-5e4],end:[n+5e4,r+5e4]}:67.5<=a&&a<112.5?{path:new Lr({d:"M".concat(n,",").concat(r-5e4," L").concat(n,",").concat(r+5e4),stroke:"#1672F3"}),start:[n,r-5e4],end:[n,r+5e4]}:112.5<=a&&a<157.5?{path:new Lr({d:"M".concat(n+5e4,",").concat(r-5e4," L").concat(n-5e4,",").concat(r+5e4),stroke:"#1672F3"}),start:[n+5e4,r-5e4],end:[n-5e4,r+5e4]}:157.5<=a&&a<=180?{path:new Lr({d:"M".concat(n-5e4,",").concat(r," L").concat(n+5e4,",").concat(r),stroke:"#1672F3"}),start:[n-5e4,r],end:[n+5e4,r]}:void 0}},{key:"reset",value:function(){this.refLinesGroup.clear()}},{key:"setEnable",value:function(e){this._enable=e}},{key:"destroy",value:function(){}}]),e}();function qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(_u,"className","LineAlign");var Fu=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"startTime",void 0),c()(this,"tmpTargetCell",void 0),c()(this,"lastTmpTargetCell",void 0),c()(this,"sourceCell",void 0),c()(this,"targetCell",void 0),c()(this,"group",new xr),c()(this,"anchors",void 0),c()(this,"cacheDockCell",void 0),c()(this,"getInnerConnection",(function(e,t){var n=t.canvas2percentage({x:e[0],y:e[1]});return{id:t.model.id,connection:n}})),t.frontRootGroup.prepend(this.group),this.anchors=[]}return g()(e,[{key:"getConnectableCells",value:function(e){return this.diagram.getCellsByZIndex().filter((function(t){var n,r,a,i;return t.canConnect()&&(!e||(r=e,!(gi(a=t.getBBox(),i=r.getBBox())||gi(i,a))))&&(null==e||null===(n=e.model)||void 0===n?void 0:n.id)!==t.model.id}))}},{key:"isPointInPath",value:function(e,t){return Array.isArray(e)&&(e={x:e[0],y:e[1]}),t.isPointInFill(e)&&!t.isPointInStroke(e)}},{key:"init",value:function(e,t){var n=e[t],r=e.getEndpoint(n),a="source"===t?e.target:e.source;if(this.sourceCell=this.diagram.find(a.id),!this.targetCell)for(var i=this.getConnectableCells(this.sourceCell),o=i.length-1;o>=0;o--){var c=i[o];if(this.isPointInPath(r,c))return void(this.targetCell=c)}}},{key:"isPointNearCell",value:function(e,t){t=ei(t);var n=e.canvas2Relative(t),r=e.width,a=e.height;return!(n.x<-8||n.x>r+8||n.y<-8||n.y>a+8)}},{key:"findEndPoint",value:function(e){for(var t,n=this.getConnectableCells(this.sourceCell),r=n.length-1;r>=0;r--){var a=n[r];if(this.isPointNearCell(a,e)){this.dock(a);var i=this.getConnection(a,e);if(i){if(this.lastTmpTargetCell=this.tmpTargetCell,this.tmpTargetCell=a,i===a){t={id:a.model.id,connection:null};break}t={id:a.model.id,connection:i};break}}}if(this.cacheDockCell&&!this.isPointNearCell(this.cacheDockCell,e)&&this.clearDock(),!t&&this.tmpTargetCell&&(this.tmpTargetCell=void 0,this.startTime=void 0),this.tmpTargetCell&&this.tmpTargetCell!==this.targetCell&&(this.targetCell=void 0),this.targetCell){if(this.isPointInPath(e,this.targetCell))return this.getInnerConnection(e,this.targetCell);this.startTime=void 0,this.targetCell=void 0}return this.tmpTargetCell&&this.lastTmpTargetCell===this.tmpTargetCell&&this.isPointInPath(e,this.tmpTargetCell)&&(this.startTime||(this.startTime=Date.now()),Date.now()-this.startTime>=1500)?(this.targetCell=this.tmpTargetCell,this.tmpTargetCell=void 0,this.startTime=void 0,this.getInnerConnection(e,this.targetCell)):t||{id:null,connection:e}}},{key:"getCellConnectStateElement",value:function(e){var t=new Lr({"stroke-width":1,stroke:"#3384F5",fill:"rgba(192,217,252,0.2)"});t.dataset({testid:"connect_dock_line"});var n=e.getKeyShape(),r=N()(e.matrix),a=n.attr("d");return t.update({matrix:r,d:a}),t}},{key:"dock",value:function(e){var t,n=this;if(this.cacheDockCell!==e){this.clearDock(),this.cacheDockCell=e,this.group.add(this.getCellConnectStateElement(e));var r,a=1/this.diagram.viewport.zoom;r=null!==(t=e.stencil)&&void 0!==t&&t.antiAnchors?e.stencil.antiAnchors:e.anchors;var i=0;Un(e)||(i=e.rotate/360*2*Math.PI),r.forEach((function(t){var r,o=n.createAnchor(t.name);n.group.add(o.group);var c,l,s={x:t.x*e.width,y:t.y*e.height},u=e.relative2Canvas(s);!1===(null===(r=e.stencil)||void 0===r?void 0:r.closed)||e.isPointInStroke(u)?(c=u,l=[t.x,t.y]):(c=e.getIntersectionPoint(u),l=e.canvas2percentage(c)),o.group.update(zu(zu({},c),{},{scale:a,rotate:i})),n.anchors.push({x:l[0],y:l[1],shape:o.shape})}))}}},{key:"clearDock",value:function(){this.cacheDockCell=void 0,this.group.clear(),this.anchors=[]}},{key:"getConnection",value:function(e,t){for(var n=e.canvas2Relative({x:t[0],y:t[1]}),r=n.x,a=n.y,i=e.width,o=e.height,c=[r,a],l=0;l<this.anchors.length;l++){var s=this.anchors[l],u=[s.x*i,s.y*o];if(xi(c[0],c[1],u[0],u[1])<=8)return[Dt(s.x,0,1),Dt(s.y,0,1)]}var d=e.getKeyShape(),h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=e.rendererElement.closest("svg");if(!r)return null;var a=ni(t),i=e.attr("stroke-width");e.attr({"stroke-width":2*n});var o=e.isPointInStroke(a);if(e.attr({"stroke-width":i}),o){var c=e.getClosestPoint(t[0],t[1]);return c.point}return null}(d,[r,a],8);if(h)return[Dt(h[0]/i,0,1),Dt(h[1]/o,0,1)];var f=ni({x:r,y:a});return d.isPointInFill(f)?e:void 0}},{key:"createAnchor",value:function(e){var t=new Pr,n=new Lr({d:On(0,0,3),stroke:"#3384F5",fill:"white"});return t.add(n),{group:t,shape:n,name:e}}},{key:"reset",value:function(){this.clearDock(),this.tmpTargetCell=void 0,this.startTime=void 0}},{key:"destroy",value:function(){}}]),e}();c()(Fu,"className","Connect");var Yu=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"group",new xr),c()(this,"highlightPath",void 0),t.frontRootGroup.add(this.group)}return g()(e,[{key:"align",value:function(e,t,n){e=ei(e),t=ei(t);var r,a,i=[0,0],o=0,c=!1;return 0===(null==n?void 0:n.rotate)&&(mi(e.y,t.y,4)?(i=[t.x,e.y],c=!0,o=0):mi(e.x,t.x,4)&&(i=[e.x,t.y],c=!0,o=1),c&&(mi((r=function(e){return[Dt(e[0],0,1),Dt(e[1],0,1)]}(r=n.canvas2percentage(i)))[o],0,.1)?(r[o]=0,a=r):mi(r[o],1,.1)&&(r[o]=1,a=r),a))?(this.highlight(e,i),a):(this.clearHighlight(),null)}},{key:"highlight",value:function(e,t){var n;this.highlightPath||(this.highlightPath=new Lr({stroke:"#1672F3"}),this.group.add(this.highlightPath)),e=ei(e),t=ei(t);var r,a,i=24/this.diagram.viewport.zoom;e.x===t.x?(r=e.y<t.y?e:t,a=e.y>=t.y?e:t,n="M".concat(r.x,",").concat(r.y-i," L").concat(a.x,",").concat(a.y+i)):(r=e.x<t.x?e:t,a=e.x>=t.x?e:t,n="M".concat(r.x-i,",").concat(r.y," L").concat(a.x+i,",").concat(a.y)),this.highlightPath.update({d:n})}},{key:"clearHighlight",value:function(){this.group.clear(),this.highlightPath=null}},{key:"reset",value:function(){this.clearHighlight()}},{key:"destroy",value:function(){}}]),e}();c()(Yu,"className","LineCellAlign");var Xu=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"line",void 0),c()(this,"name",void 0),c()(this,"basePoint",void 0),c()(this,"highlight",void 0),c()(this,"group",new xr)}return g()(e,[{key:"init",value:function(e,t){this.line=e,this.name=t,this.diagram.lineAlign.init(e,t),this.diagram.connect.init(e,t),this.highlight=Ka(t,3),this.highlight.group.hide(),this.highlight.shape.update({stroke:"#3384F5",fill:"#3384F5"}),this.diagram.frontRootGroup.add(this.highlight.group);var n=this.line.getPoints();"target"===this.name?this.basePoint=n[0]:this.basePoint=n[n.length-1]}},{key:"resize",value:function(e){if(!this.line)throw new Error("line not exist, must call prepareUpdate before updateEndPoint");var t,n=this.diagram,r=n.viewport.invertClient([e.clientX,e.clientY]),a=n.connect.findEndPoint(r);if(a.id){n.lineAlign.reset();var i=n.lineCellAlign.align(this.basePoint,r,n.find(a.id));i&&(a.connection=i),this.updateHighlight(a)}else if(!a.id&&a.connection){var o=n.lineAlign.align(r);a.connection=[(t=o).x,t.y],this.highlight.group.hide()}return a}},{key:"updateHighlight",value:function(e){if(this.line){var t,n=1/this.diagram.viewport.zoom,r=this.line.getPoints();t=e.id&&!e.connection?ei(r[r.length-1]):this.line.getEndpoint(e),this.highlight.group.show(),this.highlight.group.update({scale:n,x:t.x,y:t.y})}}},{key:"reset",value:function(){var e,t;null===(e=this.highlight)||void 0===e||null===(t=e.group)||void 0===t||t.remove(),this.diagram.lineAlign.reset(),this.diagram.connect.reset(),this.diagram.lineCellAlign.reset(),this.group.clear()}},{key:"destroy",value:function(){}}]),e}();c()(Xu,"className","LineResizer");var Gu=new $r;Gu.css({fontFamily:"system-ui"});var Hu=function(){function e(t){m()(this,e),this.diagram=t,this.diagram.canvas.calculateCanvas.appendChild(Gu.rendererElement)}return g()(e,[{key:"measureTextLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fontSize:"12px"};return Gu.update({text:e}),Gu.css({fontSize:t.fontSize}),Gu.getBBox().width}},{key:"destroy",value:function(){}}]),e}();c()(Hu,"className","Font");var Wu=function(e){j()(n,ko);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this)).diagram=e,r}return g()(n,[{key:"init",value:function(){if("read"!==this.diagram.interaction.currentMode){var e,t,n,r,a=this.diagram,i=!1,o=!1,c=!1;this.bind(a,"dragstart",(function(l){var s=l.evt,u=l.button;e=s.clientX,t=s.clientY,n=a.viewport.scrollLeft,r=a.viewport.scrollTop,function(e){return!!(2===e||0===e&&c||"read"===a.interaction.currentMode||"dragCanvas"===a.interaction.currentMode)}(u)&&(2===u&&(o=!0),i=!0,a.input.style.display="none","dragCanvas"!==a.interaction.currentMode&&a.interaction.changeMode("dragCanvas"),a.setCursor("grabbing"),a.selector.select([]))})),this.bind(a,"drag",De()((function(i){var o=i.evt;if("dragCanvas"===a.interaction.currentMode){var c=n-(o.clientX-e),l=r-(o.clientY-t);a.viewport.setScroll(c,l)}}),16));var l=function(){o=!1,a.resetCursor()};this.bind(a,"dragend",(function(){l(),!i||c||a.signal.buttonDragCanvas||(s(),a.tryFocus())})),this.bind(a,"mouseleave",(function(){l(),i&&!a.signal.buttonDragCanvas&&s()})),this.bind(a,"keydown",(function(e){" "===e.key&&(e.preventDefault(),c=!0,"dragCanvas"!==a.interaction.currentMode&&(a.highlight.clear(),a.selector.select([]),a.interaction.changeMode("dragCanvas")))})),this.bind(a,"keyup",(function(e){" "===e.key&&(c=!1,a.signal.buttonDragCanvas=!1,o||s())})),this.bind(window,"blur",s)}function s(){i=!1,c=!1,o=!1,a.input.style.display="","edit"!==a.interaction.currentMode&&a.interaction.changeMode("edit")}}},{key:"destroy",value:function(){this.unbind()}}]),n}();function Vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(Wu,"className","MouseDragCanvas");var Uu=function(){function e(){m()(this,e),c()(this,"destroyed",void 0)}return g()(e,[{key:"bbox",value:function(e){return function(e){var t={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,width:10,height:10};return e.forEach((function(e){St(e,(function(n){var r=1/0,a=1/0,i=-1/0,o=-1/0;if(to(n)){var c=n.width||50,l=n.height||50;r=n.x,a=n.y,i=n.x+c,o=n.y+l}else if(no(e)){var s=[],u=[];e.target&&!e.target.id&&e.target.connection&&(s.push(e.target.connection[0]),u.push(e.target.connection[1])),e.source&&!e.source.id&&e.source.connection&&(s.push(e.source.connection[0]),u.push(e.source.connection[1])),e.controlPoints&&e.controlPoints.forEach((function(e){"number"==typeof e[0]&&s.push(e[0]),"number"==typeof e[1]&&u.push(e[1])})),r=Math.min.apply(Math,s),a=Math.min.apply(Math,u),i=Math.max.apply(Math,s),o=Math.max.apply(Math,u)}r<t.minX&&(t.minX=r),a<t.minY&&(t.minY=a),i>t.maxX&&(t.maxX=i),o>t.maxY&&(t.maxY=o)}))})),t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,t}(e)}},{key:"translate",value:function(e,t,n,r){var a=r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({deep:!0,returnUpdateModels:!1},r),i=a.deep,o=a.returnUpdateModels?[]:null,l=function(e,t,n){if(ao(e,t,n),o){var r=ro(e,t,n);r&&o.push(r)}};return e.forEach((function(e){!0===i?St(e,(function(e){l(e,t,n)})):l(e,t,n)})),o}},{key:"destroy",value:function(){this.destroyed=!0}}]),e}();function Zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qu(e,t){return t.id!==e.id||(t.connection&&e.connection?xi(t.connection[0],t.connection[1],e.connection[0],e.connection[1])>8:void 0)}c()(Uu,"className","ModelManager");var Ju=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"line",void 0),c()(P()(e),"source",void 0),c()(P()(e),"target",void 0),c()(P()(e),"onMouseDown",(function(t){var n=P()(e).diagram,r=e.getPoint(t);e.source=n.connect.findEndPoint(r)})),c()(P()(e),"onMouseMove",(function(t){var n=P()(e),r=n.diagram,a=n.line,i=n.source,o=e.getPoint(t),c=r.connect.findEndPoint(o);if(a){var l=r.lineResizer.resize(t);r.update(a,{target:l})}else i&&Qu(i,c)&&e.beginInsertLine({source:i,target:c})})),c()(P()(e),"onMouseUp",(function(){var t=P()(e),n=t.diagram,r=t.line;e.clear(),n.interaction.changeMode("edit"),r&&n.command.execute("Add",{model:Ku(Ku({},r.model),{},{id:null})})})),e}return g()(n,[{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"beginInsertLine",value:function(e){var t=e.source,n=e.target,r=this.diagram;t.id&&(t.connection=null);var a=r.add(xe()({},r.settings.line,{type:"line",source:t,target:Ku({},n)}))[0];this.line=a,r.lineResizer.init(a,"target")}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"begininsertline",(function(e){t.beginInsertLine(e)})),this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"mousedown",this.onMouseDown),this.bind(e,"mouseup",this.onMouseUp),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.line,t=this.diagram;t&&(t.lineResizer.reset(),e&&t.remove(e),this.line=void 0,this.source=void 0)}},{key:"unbind",value:function(){this.clear(),I()(A()(n.prototype),"unbind",this).call(this)}}]),n}();function $u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$u(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var td=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"delegation",void 0),c()(P()(e),"cell",void 0),c()(P()(e),"lastSwimlane",void 0),c()(P()(e),"onMouseMove",(function(t){e.delegation||e.initDelegation();var n=P()(e).diagram,r=P()(e).delegation,a=e.getPoint(t),i=b()(a,2),o=i[0],c=i[1];if(e.cell){var l;e.cell.matrix=[1,0,0,0,1,0,o,c,1];var s,u=null===(l=n.swimlane)||void 0===l?void 0:l.findSwimlane([e.cell]);if(u&&u!==e.lastSwimlane)null===(s=n.swimlane)||void 0===s||s.highlight(u);else if(!u){var d;null===(d=n.swimlane)||void 0===d||d.unhighlight()}e.lastSwimlane=u}null==r||r.translate(o,c)})),c()(P()(e),"onClick",(function(t){var n=P()(e).diagram;e.clear();var r=n.settings.vertex,a=e.getPoint(t),i=b()(a,2),o=i[0],c=i[1],l=Object(q.a)(),s=mo.find((function(e){return e.name===r.shape})),u={model:ed(ed({},r),{},{id:l,x:o,y:c})};null!=s&&s.controlPoints&&(u.model.controlPoints=s.controlPoints),null!=s&&s.round&&(u.model.round=s.round);var d="Add";n.interaction.changeMode("edit"),s&&("stack"===r.type?(d="AddStack",u.model.row=s.row,u.htmls=s.htmls,delete u.model.html):"swimlane"===r.type&&(d="AddSwimlane",u.number=s.number,u.model.widths=s.widths,u.model.heights=s.heights,u.htmls=s.htmls,u.stencil=s,delete u.model.html)),n.command.execute(d,u),delete r.fill,delete r.stroke,delete r.controlPoints,delete r.round})),e}return g()(n,[{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"click",this.onClick),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))})),this.bind(window,"mousedown",(function(n){e.canvas.rendererElement.contains(n.target)||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"initDelegation",value:function(){var e=this.diagram,t=e.settings.vertex,n=mo[mo.findIndex((function(e){return e.name===t.shape}))],r={};"swimlane"===(null==n?void 0:n.type)&&(r.number=n.number,r.widths=n.widths,r.heights=n.heights,r.htmls=n.htmls);var a=e.add(ed(ed(ed({},t),r),{},{x:0,y:0}))[0];this.delegation=e.delegator.create([a]),this.cell=a,a.hide()}},{key:"clear",value:function(){var e,t=this.cell,n=this.delegation,r=this.diagram;null==r||null===(e=r.swimlane)||void 0===e||e.unhighlight(),t&&!t.destroyed&&r.remove(t.model.id),n&&n.destroy(),this.cell=null,this.delegation=null}},{key:"unbind",value:function(){this.clear(),I()(A()(n.prototype),"unbind",this).call(this)}}]),n}();function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"onMouseMove",(function(t){e.delegation||e.initDelegation();var n=P()(e).delegation,r=e.getPoint(t),a=b()(r,2),i=a[0],o=a[1];n.translate(i,o)})),c()(P()(e),"onClick",(function(t){e.clear();var n=P()(e).diagram,r=n.settings.image,a=r.insertFiles,i=r.insertModel,o=e.getPoint(t),c=b()(o,2),l=c[0],s=c[1];n.interaction.changeMode("edit"),n.emit("importimage",{files:a,x:l,y:s,from:"clickinsert",width:i.width,height:i.height})})),e}return g()(n,[{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"initDelegation",value:function(){var e=this.diagram,t=e.settings.image,n=e.add(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"image",x:0,y:0},t.insertModel))[0];this.delegation=e.delegator.create([n]),this.cell=n,n.hide()}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"click",this.onClick),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))})),this.bind(window,"mousedown",(function(n){e.canvas.rendererElement.contains(n.target)||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.cell,t=this.delegation,n=this.diagram;e&&!e.destroyed&&n.remove(e.model.id),t&&t.destroy(),this.cell=null,this.delegation=null}},{key:"unbind",value:function(){this.clear(),I()(A()(n.prototype),"unbind",this).call(this)}}]),n}();function ad(e){var t={stems:[],originModels:[]};return e.forEach((function(e){e.deepEach((function(e){if(!e.isStem)return!1;!function(e){var n=function(e){var t,n=e.model;return e.isLine?t={type:n.type,source:d()(n.source),target:d()(n.target)}:e.isGroup||(t={type:n.type,x:e.x,y:e.y}),t}(e);n&&Object.keys(n).length>0&&(t.stems.push(e),t.originModels.push(n))}(e)}),(function(t){return"swimlane"===t.type?t.contain.map((function(t){var n;return null===(n=e.diagram.find(t))||void 0===n?void 0:n.model})).filter((function(e){return e})):t.children}))})),t}var id=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;return m()(this,n),e=t.call(this),c()(P()(e),"default",void 0),c()(P()(e),"diagram",void 0),c()(P()(e),"selectedCells",void 0),c()(P()(e),"dragCells",void 0),c()(P()(e),"startBox",void 0),c()(P()(e),"originModels",void 0),c()(P()(e),"dragClone",void 0),c()(P()(e),"dragCloneModels",void 0),c()(P()(e),"dx",0),c()(P()(e),"dy",0),c()(P()(e),"startClient",void 0),c()(P()(e),"startPoint",void 0),c()(P()(e),"onMouseMoveEvent",void 0),e.default={selectedCells:void 0,dragClone:void 0,dragCells:void 0,startPoint:void 0,startBox:void 0,originModels:void 0,startClient:void 0,onMouseMoveEvent:void 0,dx:0,dy:0},Object.assign(P()(e),e.default),e}return g()(n,[{key:"reset",value:function(){var e=this.diagram;this.dragCells&&this.dragCells.length>1&&e.highlight.show(),this.onMouseMoveEvent&&this.unbind(this.onMouseMoveEvent),e.signal.cellDragStart=!1,e.align.clear(),Object.assign(this,this.default)}},{key:"initDragData",value:function(){var e=this.diagram;if(!e.contentEditor.isBegin){var t=e.selector.selections;if(1!==t.length||!Gn(t[0])||!t[0].isConnected()){var n,r=e.selector.selections.filter((function(e){return e}));if(e.signal.keydown.Alt){var a=r.sort((function(e,t){return e.getZIndex()-t.getZIndex()})).map((function(e){return d()(e.model)}));a.forEach((function(e){"swimlane"===e.type&&(e.contain=[])})),n=e.add(e.importer.clone(a)),this.dragClone=!0,this.dragCloneModels=a}else n=r;var i=n[0];1!==n.length||i.isLine?n.length>1&&e.align.updateToAlginPoints(n):e.align.updateToAlginPoints(i),1!==n.length||i.isLine?n.length>1&&(this.startBox=nr(n)):(this.startBox=i.getBBox(),n=n.filter((function(e){return!Gn(e)||["source","target"].every((function(t){return!e[t].id}))})));var o=ad(n),c=o.stems,l=o.originModels;this.selectedCells=n,e.align.prepareForDistribute(n),this.dragCells=c,this.originModels=l}}}},{key:"getCurrentBox",value:function(){return{minX:this.startBox.minX+this.dx,maxX:this.startBox.maxX+this.dx,minY:this.startBox.minY+this.dy,maxY:this.startBox.maxY+this.dy}}},{key:"init",value:function(){var e,t,n=this,r=this.diagram,a=function(){return io(n.originModels,n.dx,n.dy)},i=De()((function(i){if(r.signal.cellDragStart){var o,c=r.viewport.invertClient([i.clientX,i.clientY]);if(n.dx=c[0]-n.startPoint[0],n.dy=c[1]-n.startPoint[1],n.startBox){var l=r.align.alignByBox(n.getCurrentBox());n.dx+=l.dx,n.dy+=l.dy,l=r.align.alignDistribute(n.getCurrentBox()),n.dx+=l.dx,n.dy+=l.dy}var s,u=a();if(r.update(n.dragCells,u),(t=null===(o=r.swimlane)||void 0===o?void 0:o.findSwimlane(n.dragCells))&&e!==t)null===(s=r.swimlane)||void 0===s||s.highlight(t);else if(!t){var d;null===(d=r.swimlane)||void 0===d||d.unhighlight()}e=t}else{if(xi(n.startClient[0],n.startClient[1],i.clientX,i.clientY)<8)return;if(n.initDragData(),!n.dragCells)return;r.signal.cellDragStart=!0,r.emit("cell:dragstart"),n.dragCells.length>1&&r.highlight.hide(),1===n.dragCells.length&&r.contentEditor&&(r.contentEditor.unbind(),r.focus())}}),16),o=function(){var e,t,o=n.selectedCells,c=n.originModels,l=n.dragCloneModels,s=[],u=function(){var e=o.map((function(e){return e.model.id})).map((function(e){return r.find(e)})).filter((function(e){return e}));r.selector.select(e)};if(n.dragClone)r.remove(o),oo(l,n.dx,n.dy),s.push("Add",{model:l,select:u});else{var d=a();if(n.dragCells.some((function(e){return Kn(e)})))s.push("Update",{id:n.dragCells.map((function(e){return e.model.id})),model:d,select:u,originModels:c});else{var h,f=null===(h=r.swimlane)||void 0===h?void 0:h.findSwimlane(n.dragCells);s.push("InteractSwimlane",{id:n.dragCells,model:d,parent:f,select:u,originModels:c})}}r.emit("cell:dragend",{cells:n.dragCells}),i.cancel(),n.reset(),(e=r.command).execute.apply(e,s),null===(t=r.swimlane)||void 0===t||t.unhighlight()},c=function(){var t;e=void 0,null===(t=r.swimlane)||void 0===t||t.unhighlight(),i.cancel(),n.reset()};this.bind(r,"mousedown",(function(e){if(!r.signal.lineTextMouseDown){var t=e.target,a=e.clientX,o=e.clientY,c=e.button,l=r.getCell(t);0===c&&l&&l.isStem&&(n.startClient=[a,o],n.startPoint=r.viewport.invertClient([a,o]),n.onMouseMoveEvent=n.bind(r,"mousemove",i))}})),this.bind(r,"mouseup",(function(){n.dragCells&&n.dragCells[0]&&r.signal.cellDragStart?o():c()})),this.bind(r,"mouseleave",(function(){n.dragCells&&n.dragCells[0]&&r.signal.cellDragStart?o():c()}))}}]),n}();function od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?od(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ld=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;return m()(this,n),e=t.call(this),c()(P()(e),"updateLine",(function(t){var n=P()(e),r=n.diagram,a=n.line,i=n.origin,o=n.sourceCell,c=r.viewport.invertClient([t.clientX,t.clientY]);if(i&&!a&&o&&xi(i[0],i[1],c[0],c[1])>8)e.line=r.add(e.initLine(c))[0],e.line.graphicGroup.css({cursor:"crosshair"}),r.lineResizer.init(e.line,"target"),r.setCursor("crosshair"),e.clearButton();else if(a){var l=r.lineResizer.resize(t);r.update(a,xe()({},r.settings.line,{target:l}))}})),c()(P()(e),"commitLine",(function(t){var n=P()(e),r=n.line,a=n.diagram,i=n.origin,o=n.sourceCell;if(r||i){var c;if(r)c=r.model,a.remove(r);else if(i){e.updateCurrentDirection(t);var l=e.getTargetConnection(e.currentDirection);c=e.initLine(l)}var s=Object(q.a)();a.command.execute("Add",{model:cd(cd({},c),{},{id:s})}),e.clear(),null==c.target.id&&requestAnimationFrame((function(){a.emit("vertexcell:prompt",{line:a.find(s),sourceCell:o})}))}})),c()(P()(e),"revertLine",(function(t){var n=P()(e),r=n.line,a=n.diagram;r&&("Esc"!==t.key&&"Escape"!==t.key||(a.remove(r),e.clear()))})),e.cacheEndpointId=null,e.eventHelper=new ko,e}return g()(n,[{key:"_initHoverButtonDefs",value:function(){var e=this.diagram.defs,t=Object(q.a)(),n=new Lr({id:t,fill:"rgba(95, 159, 246, 0.6)",stroke:"rgba(255,255,255,0.6)","stroke-width":1,d:On(0,0,5)});e.add(n),this.hoverButtonDefId=t,this.hoverButtonDef=n}},{key:"_initButtonDefs",value:function(){var e=this.diagram.defs,t=Object(q.a)(),n=new Lr({id:t,fill:"rgba(192, 217, 252, 0.6)",stroke:"rgba(255,255,255,0.6)","stroke-width":1,d:On(0,0,3.5)});e.add(n),this.buttonDefId=t,this.buttonDef=n}},{key:"_initDefs",value:function(){this._initHoverButtonDefs(),this._initButtonDefs()}},{key:"_initButton",value:function(){var e=this,t=this.buttonDefId,n=this.hoverButtonDefId,r=this.diagram,a=new xr,i={};["N","E","S","W"].forEach((function(o){var c=new Pr,l=new Vr({width:15.27,height:15.27,href:"#".concat(t)}),s=new Lr({fill:"rgba(0,0,0,0)",d:wn(-7.635,-7.635,15.27,15.27)});c.add(l),c.add(s),l.css("pointer-events","none"),s.dataset({testid:"add_line_button_".concat(o)}),s.on("mousedown",(function(n){var a=r.viewport.invertClient([n.clientX,n.clientY]),i=b()(a,2),c=i[0],s=i[1];e.origin=[c,s],l.update({href:"#".concat(t)}),e.updateCurrentDirection(o),r.emit("addlinebuttonmousedown"),r.vertexRotateResize.hide()})),s.on("mouseenter",(function(){r.signal.mouseMultiSelecting||l.update({href:"#".concat(n)})})),s.on("mouseleave",(function(){l.update({href:"#".concat(t)})})),a.add(c),i[o]=c})),a.css({cursor:"copy"}),a.dataset({lake_prevent_click_unselect:!0,testid:"add_line_button_group"}),this.buttonMap=i,this.buttonGroup=a}},{key:"updateButton",value:function(){var e=this.diagram,t=this.sourceCell,n=this.buttonGroup,r=this.buttonMap;if(t){var a=1/e.viewport.zoom,i=t.rotate,o=t.width,c=t.height,l=16/e.viewport.zoom;0===o&&(o=1/0),0===c&&(c=1/0),e.frontRootGroup.add(n),Object.keys(r).forEach((function(e){var n,s=r[e];switch(e){case"N":n=t.percentage2Canvas([.5,-l/c]);break;case"E":n=t.percentage2Canvas([1+l/o,.5]);break;case"S":n=t.percentage2Canvas([.5,1+l/c]);break;case"W":n=t.percentage2Canvas([-l/o,.5])}s.update(cd(cd({},n),{},{scale:a,rotate:i}))}))}}},{key:"clearButton",value:function(){var e=this.showButtonGroup;e&&(e.remove(),this.showButtonGroup=null)}},{key:"hide",value:function(){this.buttonGroup.hide()}},{key:"show",value:function(){this.buttonGroup.show()}},{key:"initLine",value:function(e){var t=this.sourceCell,n=this.currentDirection;return{type:"line",source:{id:t.model.id,connection:n},target:{connection:e}}}},{key:"getTargetConnection",value:function(e){var t=this.sourceCell,n=t.getPoint(e),r=n.x,a=n.y,i=t.rotate;switch(e){case"N":i+=270;break;case"E":break;case"S":i+=90;break;case"W":i+=180;break;default:throw new Error("unexpected direction ".concat(e))}var o=pi(i);return[r+50*Math.cos(o),a+50*Math.sin(o)]}},{key:"updateCurrentDirection",value:function(e){var t=this.diagram;if("string"==typeof e)this.currentDirection=e;else{var n=t.viewport.invertClient([e.clientX,e.clientY]),r=b()(n,2),a=r[0],i=r[1],o=this.sourceCell,c=o.getPoint([.5,.5]);if(xi(c.x,c.y,n[0],n[1])>16){var l=Ci(c.x,c.y,a,i),s=o.rotate;s<0&&(s+=360);var u=l-(s=pi(s));u<0&&(u+=2*Math.PI),this.currentDirection=ai(u)}}}},{key:"updateBoundingRect",value:function(e){var t=e.graphicGroup.getBoundingClientRect(),n=t.x,r=t.y,a=r-15.27-16,i=n+t.width+15.27+16,o=r+t.height+15.27+16,c=n-15.27-16;this.boundingRect={top:a,right:i,bottom:o,left:c}}},{key:"update",value:function(e){e&&(this.sourceCell=e,this.showButtonGroup=this.buttonGroup,this.updateBoundingRect(e),this.updateButton())}},{key:"clear",value:function(){this.diagram.lineResizer.reset(),this.clearButton(),this.sourceCell=null,this.boundingRect=null,this.origin=null,this.line=null,this.draggingCell=!1,this.diagram.resetCursor()}},{key:"init",value:function(e){var t,n=this,r=e.selector;this._initDefs(),this._initButton(),this.eventHelper.bind(e,"afterviewportchange",De()((function(){t!==e.viewport.zoom&&n.sourceCell&&(n.updateButton(),t=e.viewport.zoom)}))),this.bind(e,"afterselect",(function(){var t=r.selections,a=t[0];1!==t.length||a.isLine||!a.canUseAddLineButton()||n.line||e.signal.cellDragStart?n.clear():n.update(a)})),this.bind(e,"vertexcell:update",(function(e){e.cell===n.sourceCell&&n.updateButton()})),this.bind(e,"vertexcell:remove",(function(e){var t=e.id,r=n.sourceCell;r&&r.model.id===t&&n.clear()})),this.bind(e,"cell:dragstart",(function(){n.clear()})),this.bind(e,"mousemove",De()((function(e){n.origin&&n.updateLine(e)}),16)),this.bind(e,"mouseup",this.commitLine),this.bind(e,"keydown",this.revertLine),this.bind(e,"vertexresizestart",(function(){return n.hide()})),this.bind(e,"vertexresizeend",(function(){return n.show()}))}},{key:"reset",value:function(){this.hoverButtonDef&&this.hoverButtonDef.destroy(),this.buttonDef&&this.buttonDef.destroy()}}]),n}();function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ud(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dd=function(e){j()(n,xr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;m()(this,n);var a=ud({width:32,height:32},e),i=a.width,o=a.height,c=a.noFill,l=e.matrix||[1,0,0,0,1,0,0,0,1];i>0&&(l[0]=i/32),o>0&&(l[4]=o/32),r=t.call(this,ud(ud({},e),{},{matrix:l}));var s=e.stencil,u=e.title,d=s.name,h=s.thumb,f=new Fr({x:0,y:0,width:i,height:o,rx:2,fill:c?"none":"#ffffff",stroke:"none"});return r.add(new Kr({title:u})),r.add(f),h.forEach((function(e){var t=ws(e);e.attr&&t.update(e.attr),r.add(t)})),P()(r).rendererElement.setAttribute("data-name",d),r.css({cursor:"pointer"}),r}return g()(n)}();var hd=function(e){j()(n,xr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;m()(this,n),r=t.call(this,e),c()(P()(r),"shapes",void 0),c()(P()(r),"_height",0);var a=e.key,i=e.title,o=e.shapes;return r.shapes=o,r.title=i,r.rendererElement.setAttribute("data-group",a),r.init(),r}return g()(n,[{key:"init",value:function(){var e=this,t=12,n=0;if(0!==this.shapes.length){var r=new $r({text:this.title,matrix:[1,0,0,0,1,0,12,15,1],fill:"#595959"});r.css({fontFamily:"system-ui",fontSize:"14px","dominant-baseline":"hanging"}),this.add(r),n+=39,this.shapes.forEach((function(r){var a=r.name,i=r.title,o=mo.find((function(e){return e.name===a}));t>=200&&(t=12,n+=34);var c=new dd({stencil:o,matrix:[1,0,0,0,1,0,t,n,1],stroke:"#595959",fill:"#ffffff",title:i});e.add(c),t+=32})),n+=32,this._height=n}}},{key:"height",get:function(){return this._height}}]),n}();function fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var md=[{name:"rect",title:ar("矩形")},{name:"rounded-rect",title:ar("圆角矩形")},{name:"circle",title:ar("圆形")},{name:"triangle",title:ar("三角形")},{name:"diamond",title:ar("菱形")},{name:"parallelogram",title:ar("平行四边形")},{name:"trapezoid",title:ar("梯形")},{name:"cross",title:ar("十字")},{name:"comment-2",title:ar("标注 2")},{name:"comment",title:ar("标注")},{name:"polygon",title:ar("五边形")},{name:"star",title:ar("五角星")},{name:"arrow-1",title:ar("左箭头")},{name:"arrow-2",title:ar("右箭头")},{name:"arrow-3",title:ar("双向箭头")},{name:"pentagon-arrow",title:ar("五边箭头")},{name:"process-arrow",title:ar("流程箭头")},{name:"cloud",title:ar("云")}],yd=[{name:"swimlane-vertical",title:ar("泳道垂直")},{name:"swimlane-horizontal",title:ar("泳道水平")}],gd=[{name:"process",title:ar("过程")},{name:"decision",title:ar("决策")},{name:"start-end",title:ar("起止符")},{name:"subroutine",title:ar("预定义流程")},{name:"document",title:ar("文档")},{name:"multi-document",title:ar("多文档")},{name:"manual-input",title:ar("手动输入")},{name:"preparation",title:ar("准备")},{name:"data",title:ar("数据")},{name:"database",title:ar("数据库")},{name:"hard-disk",title:ar("硬盘")},{name:"internal-storage",title:ar("内部存储")},{name:"paper-tape",title:ar("条带")},{name:"manual-loop",title:ar("手动循环")},{name:"delay",title:ar("延迟")},{name:"stored-data",title:ar("存储数据")},{name:"merge",title:ar("合并")},{name:"connector",title:ar("连接器")},{name:"or",title:ar("或者")},{name:"summing-junction",title:ar("汇总连接")},{name:"display",title:ar("显示")},{name:"off-page",title:ar("页外连接符")},{name:"loop-limit",title:ar("循环起止符")},{name:"card",title:ar("卡片")},{name:"sort",title:ar("排序")},{name:"collate",title:ar("整理")},{name:"parallel",title:ar("并行模式")},{name:"annotation",title:ar("批注")}],vd=[{name:"actor",title:ar("角色")},{name:"use-case",title:ar("用例")},{name:"package",title:ar("包")},{name:"frame",title:ar("组合片段")},{name:"constraint",title:ar("约束")},{name:"note",title:ar("注释")},{name:"class",title:ar("类")},{name:"activity-class",title:ar("活动类")},{name:"simple-class",title:ar("简单类")},{name:"interface",title:ar("接口")},{name:"multiplicity",title:ar("多类例")},{name:"frequency",title:ar("时间信号")},{name:"activation",title:ar("激活")},{name:"entity",title:ar("实体")},{name:"control",title:ar("控制")},{name:"boundary",title:ar("绑定")},{name:"deletion",title:ar("删除")},{name:"state",title:ar("状态")},{name:"object",title:ar("对象")},{name:"start",title:ar("开始")},{name:"finish",title:ar("结束")},{name:"termination-pseudostate",title:ar("流终止")},{name:"history-pseudostate",title:ar("历史")},{name:"choice",title:ar("分支")},{name:"activity",title:ar("活动")},{name:"send-signal",title:ar("发送信号")},{name:"receive-signal",title:ar("接收信号")},{name:"fork",title:ar("同步")},{name:"component",title:ar("组件")},{name:"node",title:ar("节点")}],bd=[{name:"er-entity",title:ar("实体")},{name:"weak-entity",title:ar("弱实体")},{name:"derived-attribute",title:ar("派生属性")},{name:"attribute",title:ar("属性")},{name:"multivalued-attribute",title:ar("多值属性")},{name:"relationship",title:ar("关系")},{name:"weak-relationship",title:ar("弱关系")},{name:"generalization",title:ar("概化")},{name:"total-generalization",title:ar("全部概化")}],xd={basic:{title:ar("基础图形"),shapes:md},flowchart:{title:ar("流程图"),shapes:gd},UML:{title:ar("UML"),shapes:vd},ER:{title:ar("ER"),shapes:bd}},kd=function(e){j()(n,xr);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),e=pd({groups:["basic"]},e),r=t.call(this,e),c()(P()(r),"latest",{title:ar("最近使用"),shapes:[]}),c()(P()(r),"latestGroup",void 0),c()(P()(r),"shapeGroups",[]),c()(P()(r),"_height",0),c()(P()(r),"groupMap",void 0),r.groups=e.groups,r.containerHeight=e.containerHeight,r.groupMap=d()(xd),r.init(),r.bindEvent(),r}return g()(n,[{key:"width",get:function(){return 215}},{key:"height",get:function(){return this._height}},{key:"init",value:function(){var e=this,t=0,n=this.groups.map((function(n){var r;"latest"===n?(r=e.latest).shapes=e.getLatest():(r=e.groupMap[n],"basic"===n&&e.options.basicWithSwimlane&&(r.shapes=[].concat(N()(r.shapes),yd)));var a=t,i=new hd(pd(pd({},r),{},{key:n,title:r.title}));return i.update({matrix:[1,0,0,0,1,0,0,a,1]}),t+=i.height,r.height=i.height,"latest"===n&&(e.latestGroup=i),e.shapeGroups.push(i),i}));this.background=new Fr({x:0,y:0,width:215,height:t,fill:"#ffffff"}),this.add(this.background),n.forEach((function(t){return e.add(t)})),this.updateHeight(t)}},{key:"getLatest",value:function(){var e,t=r.LocalStorageUtil.getItem("lake_diagram_graphic_latest_used");try{e=JSON.parse(t)||[]}catch(l){e=[]}for(var n={basic:md,flowchart:gd,UML:vd,ER:bd},a=0;a<e.length;a++){var i,o=e[a],c=null===(i=n[o.category])||void 0===i?void 0:i.indexOf(o.name);c>=0&&(o.title=n[c].title)}return e}},{key:"bindEvent",value:function(){var e,t=this;this.on("mouseover",De()((function(e){for(var n=e.target.closest("[data-name]"),r=t.rendererElement.querySelectorAll("[data-name]"),a=0;a<r.length;a++){var i=r[a],o=i.querySelector("path");o&&o.setAttribute("fill",i===n?"#f5f5f5":"#ffffff")}}),16)),this.on("mouseleave",De()((function(){if(e){var t=e.querySelector("path");t&&t.setAttribute("fill","#ffffff")}}),16)),this.on("click",(function(n){var r=n.target.closest("[data-name]");if(r){var a,i=r.dataset.name,o=r.closest("[data-group]").dataset.group,c=mo[mo.findIndex((function(e){return e.name===i}))],l=(null==c||null===(a=c.outline)||void 0===a?void 0:a.attr)||{},s=c.type||"geometry",u=c.category;t.emit("shape:select",{shape:i,group:o,type:s,category:u,attr:l}),e=r}}))}},{key:"updateGroups",value:function(e){this.groups=e,this.init(),this.updatePosition()}},{key:"updatePosition",value:function(){var e=this,t=0;this.groups.forEach((function(n,r){var a,i=e.shapeGroups[r];a="latest"===n?e.latest:e.groupMap[n];var o=t;t+=a.height,i.update({matrix:[1,0,0,0,1,0,0,o,1]})})),this.updateHeight(t),this.emit("update:height",{height:t})}},{key:"updateHeight",value:function(e){var t=this.containerHeight,n=this.groups;this._height=t?e+(t-this.groupMap[n[n.length-1]].height):e,this._height+=6,this.background.update({d:wn(0,0,215,this._height)})}},{key:"getOffset",value:function(e){for(var t=this.groups,n=t.indexOf(e),r=0,a=0;a<n;a++){var i=t[a];r+=this.groupMap[i].height}return r}}]),n}();function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ed=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"onShapeSelect",(function(t){var n=t.shape,r=t.type,a=t.category,i=P()(e),o=i.diagram,c=i.line,l=i.sourceCell,s=c.target.connection,u=e.computeInheritedStyles(n,r),d=mo.find((function(e){return e.name===n})),h=e.adjustVertexPosition(s,n,l.stroke,d),f=b()(h,2),p=f[0],m=f[1],y={model:Cd({shape:n,type:r,category:a,x:p,y:m},u),lineId:c.model.id,cellOptions:{}},g="AddVertex";["controlPoints","round"].forEach((function(e){null!=d&&d[e]&&!y.model[e]&&(y.model[e]=d[e])})),"stack"===r?(g="AddStackVertex",y.htmls=d.htmls,y.model.row=d.row):y.model.html=d.html||$i,o.command.execute(g,y),e.closePanel()})),e}return g()(n,[{key:"initPanel",value:function(){var e=this.diagram.defs;this.filterId=Object(q.a)();var t=new fa,n=new ya({dx:0,dy:0,stdDeviation:4,"flood-color":"rgba(0, 0, 0, 0.13)"});t.attr({id:this.filterId}),t.add(n),e.add(t)}},{key:"computeInheritedStyles",value:function(e,t){var n=this.sourceCell;if(n.type!==t)return{};var r=n.width,a=n.height,i={stroke:n.stroke,fill:n.fill};return n.shape===e&&(Object.assign(i,{width:r,height:a}),["controlPoints","round"].forEach((function(e){n[e]&&Object.assign(i,c()({},e,n[e]))}))),i}},{key:"closePanel",value:function(){var e=this.diagram,t=this.panel,n=e.frontRootGroup;t&&n.removeChild(t),e.signal.addVertexPanelVisibility=!1,this.direction=null,this.line=null,this.sourceCell=null}},{key:"adjustPanelPosition",value:function(e){var t=this.diagram,n=this.direction,r=this.panel,a=t.viewportContainer.getBoundingClientRect(),i=r.getBBox(),o=t.viewport.invertViewport([a.width-i.width-8,a.height-i.height-8]),c=Math.min(e[0]+8,o[0]),l=Math.min(e[1]+8,o[1]);return"N"===n?c<e[0]+8&&(c=e[0]-8-i.width):"E"===n?c<e[0]+8&&l<e[1]+8&&(l=e[1]-8-i.height):"S"===n?c<e[0]+8&&l<e[1]+8&&(c=e[0]-8-i.width):"W"===n&&l<e[1]+8&&(l=e[1]-8-i.height),[c,l]}},{key:"adjustVertexPosition",value:function(e,t,n,r){var a,i,o=this.direction,c=this.sourceCell,l=b()(e,2),s=l[0],u=l[1],d=(n.width||2)/2;switch(t===c.shape?(a=c.width,i=c.height):(a=r.width,i=r.height),o){case"N":s-=a/2,u-=i+d;break;case"E":s+=d,u-=i/2;break;case"S":u+=d,s-=a/2;break;case"W":s-=a+d,u-=i/2}return[s,u]}},{key:"getDirection",value:function(e){var t=bn(e.d).slice(-2),n=t[0].slice(1),r=t[1].slice(1);return ai({x:n[0],y:n[1]},{x:r[0],y:r[1]})}},{key:"updatePanel",value:function(e){var t=this.diagram,n=t.frontRootGroup,r=e.line,a=e.sourceCell,i=mo.find((function(e){return e.name===a.shape})),o=(null==i?void 0:i.category)||"basic",c=new kd({groups:["latest",o]});c.css({filter:"url(#".concat(this.filterId,")")}),this.panel=c,this.panel.on("shape:select",this.onShapeSelect),n.add(this.panel),this.line=r,this.sourceCell=a,this.direction=this.getDirection(r);var l=r.target.connection,s=this.adjustPanelPosition(l),u=b()(s,2),d=u[0],h=u[1],f=1/t.viewport.zoom;this.panel.update({matrix:[f,0,0,0,f,0,d,h,1]}),t.signal.addVertexPanelVisibility=!0}},{key:"init",value:function(e){var t=this;this.diagram=e,this.line=null,this.sourceCell=null,this.direction=null,this.initPanel(),this.bind(e,"vertexcell:prompt",(function(e){return t.updatePanel(e)})),this.bind(e,"mousedown",(function(e){var n=t.panel;n&&!n.rendererElement.contains(e.target)&&t.closePanel()})),this.bind(e,"keyup",(function(e){!t.panel||"Esc"!==e.key&&"Escape"!==e.key||t.closePanel()}))}}]),n}();var Od=r.FileUtils.isImage,Pd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"dragover",(function(e){e.preventDefault()})),this.bind(e,"drop",(function(t){t.preventDefault();var n=Array.from(t.dataTransfer.files).filter((function(e){return Od(e)}));n[0]&&e.emit("importimage",{files:n,from:"drop"})}))}}]),n}();var Md=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){this._initEvent()}},{key:"_initEvent",value:function(){var e=this.diagram;this.bind(e,"dblclick",(function(t){var n=e.viewport.invertClient([t.clientX,t.clientY,1]),r=e.getCell(t.target);if(r&&r.isGroup){var a=e.groupManager.enter(r,{x:n[0],y:n[1]});a&&e.selector.select(a)}})),this.bind(e,"afterselect",(function(t){e.groupManager.group&&0===t.selections.length&&e.groupManager.exit()}))}}]),n}();var jd=Lr,Sd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"unbindMousemoveEvent",value:function(){this.mouseMoveEvent&&(this.unbind(this.mouseMoveEvent),this.mouseMoveEvent=void 0)}},{key:"init",value:function(e){var t,n,r,a=this;e.signal.mouseMultiSelecting=!1;var i=new jd({fill:"rgba(9, 109, 217, .05)",stroke:"#3384F5"});function o(a){if(t){e.signal.mouseMultiSelecting=!0,n=e.viewport.invertClient([a.clientX,a.clientY]);var o={minX:Math.min(t[0],n[0]),minY:Math.min(t[1],n[1]),width:Math.abs(n[0]-t[0]),height:Math.abs(n[1]-t[1])};o.maxX=o.minX+o.width,o.maxY=o.minY+o.height;var c=wn(o.minX,o.minY,o.width,o.height);i.update({d:c}),Yt(r=e.groupManager.getCells().filter((function(e){if(e.state.visible&&e.state.capture){var t=e.getKeyShapeBox();if(vi(t,o)){if(Kn(e))return gi(o,t);if(Qn(e))return!1;if(Gn(e)){var n=e.d;if(!gi(o,t)&&0===Xe()(c,n).length)return!1}return!0}}return!1})),e.selector.selections)||e.selector.select(r)}}i.dataset({testid:"mouse-drag-multi-select"}),this.selectBox=i,this.bind(e,"mousedown",(function(n){(function(t){return 0===t.button&&(t.target===e.canvas.rendererElement||void 0)})(n)&&(a.unbindMousemoveEvent(),a.mouseMoveEvent=a.bind(window,"mousemove",De()(o,16)),e.frontRootGroup.add(i),t=e.viewport.invertClient([n.clientX,n.clientY]))})),this.bind(window,"mouseup",(function(){t&&e.tryFocus(),e.signal.mouseMultiSelecting=!1,r&&r.length>0&&e.selector.select(r),r=void 0,t=void 0,n=void 0,a.unbindMousemoveEvent(),i.remove(),i.update({d:""})}))}},{key:"unbind",value:function(e){!e&&this.selectBox&&(this.selectBox.remove(),this.selectBox=void 0),I()(A()(n.prototype),"unbind",this).call(this,e)}}]),n}();var Rd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"mouseenter",(function(){e.signal.mouseenter=!0})),this.bind(e,"mouseleave",(function(){e.signal.mouseenter=!1}))}}]),n}();var Ld=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"reset",value:function(){this.unbind()}},{key:"init",value:function(e){var t,n,r,a,i,o,c=this,l=!0;this.bind(e,"line:mousedown",(function(s){if(!e.contentEditor.isBegin&&Gn(s.cell)&&s.target.closest("foreignObject")){e.selector.select([]),n=s.cell,e.signal.lineTextMouseDown=!0,i={textPosition:void 0===n.textPosition?.5:n.textPosition,textDirection:void 0===n.textDirection?"center":n.textDirection};var u=n.getKeyShape();t=c.bind(e,"mousemove",De()((function(t){if(n)if(l){e.selector.select([]),l=!1;var i="curve"===n.shape?u.getTotalLength()/500:1.5;o=function(e,t){for(var n,r=e.getTotalLength(),a=[],i=[],o=0;o<=r;o+=t)n=e.getPointAtLength(o),a.push([n.x,n.y]),i.push(o/r);return{points:a,percentages:i}}(u.rendererElement,i)}else if(o){var c=e.viewport.invertClient([t.x,t.y]),s=u.getClosestPoint(n.canvas2Relative(c),o.points),d=o.points[s],h=xi(c[0],c[1],d[0],d[1]);r=o.percentages[s];var f=1;if(h<=20)a="center",f=1;else if(h<=60){var p=n.getTwoPointsByPercent(r),m=b()(p,2),y=m[0],g=m[1],v=n.canvas2Relative(c),x=Ti(v,y,g);a=x?"right":"left"}else r=void 0,f=.5;e.update(n,{textPosition:r,textDirection:a,opacity:f})}}),16))}}));var s=function(){e.signal.lineTextMouseDown=!1,t&&n&&(e.update(n,{opacity:1}),r&&n&&e.command.execute("Update",{id:n.model.id,model:{textPosition:r,textDirection:a},originModels:i}),c.unbind(t),t=void 0,n=void 0,i=void 0,l=!0,o=void 0,a=void 0,r=void 0)};this.bind(e,"mouseup",(function(){s()})),this.bind(e,"mouseleave",(function(){s()}))}}]),n}();var Ad=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t,n,r,a,i=!1;function o(){i=!1,t=0,n=0,r=0,a=0,e.input.style.display=""}this.bind(e,"dragstart",(function(o){var c=o.evt;i=!0,t=c.clientX,n=c.clientY,r=e.viewport.scrollLeft,a=e.viewport.scrollTop,e.input.style.display="none"})),this.bind(e,"drag",De()((function(o){var c=o.evt;if(i){var l=r-(c.clientX-t),s=a-(c.clientY-n);e.viewport.setScroll(l,s)}}),16)),this.bind(e,"dragend",(function(){o()})),this.bind(e,"mouseleave",(function(){o()}))}}]),n}();var Bd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"updateControlPoints",value:function(e){var t=this.beforeData,n=this.afterData;e.forEach((function(e){var r=e.model,a=r.controlPoints,i=[0,0];["source","target"].forEach((function(e){var a=r[e]&&r[e].id||"".concat(r.id,"-").concat(e);if(a){var o=t[a],c=n[a];if(i&&o&&c){var l=w.b.sub([],c.slice(0,2),o.slice(0,2));i=Yt(l,[0,0])?null:w.b.add(i,i,l)}}})),i&&!Yt(i,[0,0])&&(i=i.map((function(e){return e/2})),we()(t["".concat(r.id,"-controlPoints")],n["".concat(r.id,"-controlPoints")])&&e.update({controlPoints:a.map((function(e){return[e[0]+i[0],e[1]+i[1],e[2]]}))}))}))}},{key:"getData",value:function(e){var t={},n=this.diagram;return e.forEach((function(e){var r=e.model;["source","target"].forEach((function(e){var a=r[e]&&r[e].id;if(a){var i=n.find(a),o=i.percentage2Canvas([.5,.5]);t[i.model.id]=[o.x,o.y]}else r[e].connection&&(t["".concat(r.id,"-").concat(e)]=r[e].connection)})),t["".concat(r.id,"-controlPoints")]=d()(e.controlPoints)})),t}},{key:"getLines",value:function(){return this.diagram.getCells().filter((function(e){return e.isLine})).filter((function(e){return e.isDrawable()&&e.model.controlPoints}))}},{key:"onBeforeChange",value:function(){var e=this.getLines();this.beforeData=this.getData(e)}},{key:"onAfterChange",value:function(){var e=this.getLines();this.afterData=this.getData(e),this.updateControlPoints(e)}},{key:"reset",value:function(){this.beforeData={},this.afterData={}}},{key:"init",value:function(){var e=this.diagram;this.reset(),this.bind(e,"beforechange",this.onBeforeChange.bind(this)),this.bind(e,"afterchange",this.onAfterChange.bind(this))}}]),n}();var Nd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"afterchange",(function(t){if(t){var n=t.models,r=t.action;"remove"===r?function(e,t){t.forEach((function(t){e.emit("vertexcell:remove",{id:t.id})}))}(e,n):"update"===r&&function(e,t){for(var n={},r=!1,a=function(a){var i=t[a],o=e.find(i.id),c=["x","y","width","height","shape","rotate","controlPoints","round"];(function(e){return null==e?void 0:e.isText})(o)&&c.push("html"),Un(o)&&c.push("html"),Kn(o)&&c.push("widths","heights");var l,s=!1;Un(o)&&(i.hasOwnProperty("width"),s=!0),(Hn(o)||Wn(o)||Un(o)||Kn(o))&&c.some((function(e){return null!=i[e]}))&&(s=!0),s&&(n[i.id]=!0,r||(function(e){for(;e.parent;){if(e.parent.state.selected)return!0;e=e.parent}return!1}(o)||e.selector.selections.length>1)&&(r=!0),o.state.selected&&e.vertexRotateResize.update(),null===(l=e.swimlaneResize)||void 0===l||l.update(),e.emit("vertexcell:update",{cell:o}))},i=0;i<t.length;i++)a(i);r&&e.groupRotateResize.update()}(e,n)}}))}}]),n}();var Dd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){this._initParam(),this._initEvent()}},{key:"_initParam",value:function(){this.groups=[]}},{key:"_calculateGroups",value:function(e,t){var n=[];e.concat(t).forEach((function(e){for(var t=e.parent;t&&!n.includes(t);)t.isGroup&&n.push(t),t=t.parent})),this.groups=n.sort((function(e,t){return t.depth-e.depth}))}},{key:"_draw",value:function(){var e=this.groups,t=this.diagram,n=this.action,r=t.rootGroup;e.forEach((function(e){if("add"===n){var t=e.getAllChildren(),a=t.length;if(a>0){t.sort((function(e,t){return e.getZIndex()-t.getZIndex()}));var i=t[a-1];r.insertBefore(e.graphicGroup,i.graphicGroup),r.insertBefore(i.graphicGroup,e.graphicGroup)}}e.draw()}))}},{key:"_initEvent",value:function(){var e=this.diagram;this.bind(e,"beforechange",this._onBeforeChange.bind(this)),this.bind(e,"afterchange",this._onAfterChange.bind(this))}},{key:"_onBeforeChange",value:function(e){var t=e.stems,n=e.relatedLines,r=e.action;this.destroyed||"remove"===r&&this._calculateGroups(t,n)}},{key:"_onAfterChange",value:function(e){var t=e.stems,n=e.relatedLines,r=e.action;this.destroyed||("update"!==r&&"add"!==r||this._calculateGroups(t,n),this.action=r,this._draw(),this._initParam())}}]),n}();var Id={default:{insertParagraphKey:function(e){return"Enter"===e.key},cancelKey:function(e){return"Escape"===e.key}}},Td=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t=e.contentEditor;function n(){if(!e.signal.mouseMultiSelecting){var n=e.selector.selections,r=n[0];if(1===n.length&&r&&r.textareaElement){var a=r.textareaElement;if(e.destroyed)return;var i=a.htmlContainer;if(t.dom&&t.dom!==i&&t.unbind(),!t.dom&&e.viewportContainer.contains(i)){var o=Id[r.type]||Id.default;t.bind(i,o)}t.isBegin||t.prepareEdit()}else t.unbind(),e.focus()}}var r=Te()(n,32);this.bind(e,"afterselect",(function(){e.signal.beforePasteSelect?r():n()})),this.bind(e,"mousedown",(function(t){var n=e.getCell(t.target);n&&n.textareaElement&&!n.textareaElement.htmlContainer.contains(t.target)&&t.preventDefault()})),this.bind(e,"dblclick",(function(n){var r=n.target,a=n.clientX,i=n.clientY,o=e.getCell(r);if(o&&o.state.selected&&o.textareaElement&&!e.contentEditor.isBegin){e.selector.selections.length>1&&e.selector.select([o]),t.prepareEdit(),t.beginEdit();var c={};if(Gn(o)&&function(e){var t=(new DOMParser).parseFromString(e,"text/html").body;if(0===t.childElementCount){if(""===t.innerText)return!0}else if(1===t.childElementCount){var n;if("​"===(null===(n=t.firstElementChild)||void 0===n?void 0:n.innerText))return!0}return!1}(o.html)){var l=e.viewport.invertClient([a,i]),s=o.getKeyShape().getClosestPoint(l[0],l[1]);c.textPosition=s.percentage}e.update(o,c)}})),this.bind(e,"click",(function(t){var n=e.getCell(t.target);if(n&&n.textareaElement&&n.textareaElement.htmlContainer.contains(t.target)&&"A"===t.target.tagName){if(e.signal.keydown.Mod){var r=t.target.getAttribute("href");if(r)return void window.open(r,"_blank")}t.preventDefault()}}))}}],[{key:"registerContentEditorOptions",value:function(e,t){Id[e]=t}}]),n}();var _d=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t;this.bind(e,"afteractivedgroupchange",(function(){t&&(t.updateState(),t=null);var n=e.groupManager.group;n&&(n.updateState(),t=n)}))}}]),n}();var qd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(t){var n=t.selections;n.length>1?e.highlight.select(n.filter((function(e){return e.multiSelectHighlight}))):e.highlight.clear()}))}}]),n}();var zd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"resizer",void 0),c()(P()(e),"selections",[]),e}return g()(n,[{key:"init",value:function(e){var t=this,n=e.groupRotateResize,r=e.vertexRotateResize,a=e.swimlaneResize;this.bind(e,"afterselect",(function(e){var i,o=e.selections;if(t.selections=o,t.resizer&&(t.resizer.end(),t.resizer=void 0),1===o.length)i=o[0],Wn(i)?t.resizer=n:Hn(i)||Un(i)?t.resizer=r:(Kn(i)||Qn(i))&&(t.resizer=a);else{var c=t.selections.filter((function(e){return!$n(e)}));c.length>1&&(t.resizer=n,i=c)}t.resizer&&(t.resizer.init(i),t.resizer.begin())})),this.bind(e,"cell:dragstart",(function(){t.resizer&&t.resizer.hide()})),this.bind(e,"cell:dragend",(function(){t.resizer&&(t.resizer.update(),t.resizer.show())}))}}]),n}();var Fd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"aftercommandexecute",(function(e){var t=e.command,n=e.commandName;if(!("Add"!==n&&"AddVertex"!==n&&"AddStack"!==n&&"AddStackVertex"!==n||"geometry"!==t.model.type&&"stack"!==t.model.type)){var a;try{a=JSON.parse(r.LocalStorageUtil.getItem("lake_diagram_graphic_latest_used"))||[]}catch(e){a=[]}var i=t.model.shape,o=mo.findIndex((function(e){return e.name===i}));if(o>=0){var c=mo[o],l=a.findIndex((function(e){return e.name===i}));if(l>=0){var s=a.splice(l,1);a.unshift(s[0])}else a.unshift({name:i,category:c.category}),a.length>6&&a.pop();r.LocalStorageUtil.setItem("lake_diagram_graphic_latest_used",JSON.stringify(a))}}}))}}]),n}();var Yd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"beforechange",(function(e){var t=e.action,n=e.arr;"update"===t&&n.forEach((function(e){var t=e.cell,n=e.model;if(n.shape){if("geometry"!==t.type)return;var r=mo.find((function(e){return e.name===n.shape}));["controlPoints","round"].forEach((function(e){var a=null==r?void 0:r[e];a?n[e]=a:(delete t.model[e],delete t[e])}))}}))}))}}]),n}();var Xd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(!Fa(t)&&["Backspace","Delete"].includes(t.key)){if(t.preventDefault(),e.selector.selections.every((function(e){return $n(e)})))return;e.command.execute("Delete",{cells:e.deduplicate(e.selector.selections).map((function(e){return e.model.id}))}),e.tryFocus()}}))}}]),n}();var Gd=[],Hd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){this._initParam(),this._initEvent()}},{key:"_initParam",value:function(){this.originModels=null,this.stems=null,this.dx=0,this.dy=0,this.prepare=!1,this.selectionIds=void 0}},{key:"executeCommand",value:function(){var e=this.diagram,t=this.stems,n=this.dx,r=this.dy,a=this.originModels,i=this.selectionIds;!e.destroyed&&a&&(e.command.execute("Update",{id:t,model:io(t,n,r),originModels:a,select:function(){e.selector.select(i)}}),this._initParam())}},{key:"_initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"keydown",(function(n){var r,a=t.selector.selections,i=a.filter((function(e){return Gd.every((function(t){return t(e)}))})),o=0,c=0;if(!(i.length<=0)){switch(e.selectionIds=a.map((function(e){return e.model.id})),r=n.shiftKey?10:1,n.key){case"Left":case"ArrowLeft":o=-r;break;case"Right":case"ArrowRight":o=r;break;case"Up":case"ArrowUp":c=-r;break;case"Down":case"ArrowDown":c=r;break;default:return}if(0!==o||0!==c){var l=ad(i),s=l.stems,u=l.originModels;e.originModels=e.originModels||u,e.prepare||(e.prepare=!0,t.align.updateToAlginPoints(a));var d=nr(a),h=t.align.alignByBox({minX:d.minX+o,minY:d.minY+c,maxX:d.maxX+o,maxY:d.maxY+c}),f=!1;Math.abs(h.dx)<1&&0!==h.dx&&(f=!0,o+=h.dx),Math.abs(h.dy)<1&&0!==h.dy&&(f=!0,c+=h.dy),f||t.align.clear(),n.preventDefault(),t.update(s,io(s,o,c)),e.stems=s}}})),this.bind(t,"keyup",Te()((function(){e.executeCommand()}),400))}}],[{key:"filterCell",value:function(e){Gd.push(e)}}]),n}();var Wd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"keydown",(function(n){if(Fa(n)&&"l"===n.key){n.preventDefault();var r=e.selector.selections;if(t.cell=r[0],2===r.length&&r.every((function(e){return!e.isLine&&!e.isGroup})))return e.command.execute("Add",{model:{type:"line",shape:null,source:{id:r[0].model.id},target:{id:r[1].model.id,marker:"arrow"}}});e.command.execute("BeginInsertLine",{shape:null,marker:"arrow"})}}))}}]),n}();var Vd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){0!==e.selector.selections.length||"t"!==t.key||Fa(t)||(t.preventDefault(),e.command.execute("BeginInsertText"))}))}}]),n}();var Ud=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){0!==e.selector.selections.length||"s"!==t.key||Fa(t)||(t.preventDefault(),e.command.execute("BeginInsertGeometry"))}))}}]),n}();var Zd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){e.selector.selections.some((function(e){return e.textareaElement}))&&Fa(t)&&("b"===t.key?(t.preventDefault(),e.command.execute("ContentCommand",{name:"bold"})):"i"===t.key?e.command.execute("ContentCommand",{name:"italic"}):"k"===t.key?e.command.execute("CreateLink"):"u"===t.key?e.command.execute("ContentCommand",{name:"underline"}):t.shiftKey&&"x"===t.key&&e.command.execute("ContentCommand",{name:"strikethrough"}))}))}}]),n}();var Kd=new To,Qd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n=e.selector,r=e.viewport;n.selections.length>0&&"d"===t.key&&Fa(t)&&(t.preventDefault(),e.command.execute("Copy",{e:Kd}),e.command.execute("Paste",{e:Kd,focusPoint:r.getFocus()}))}))}}]),n}();var Jd=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){"g"===t.key&&Fa(t)&&!t.shiftKey?(t.preventDefault(),e.command.execute("Group")):("g"===t.key||"G"===t.key)&&Fa(t)&&t.shiftKey&&(t.preventDefault(),e.command.execute("UnGroup"))}))}}]),n}();var $d=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n=e.selector;e.groupManager.group&&"Escape"===t.key&&!Fa(t)&&(t.preventDefault(),n.clear())}))}}]),n}();var eh=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n;t.altKey&&(n={ArrowLeft:"AlignLeft",ArrowRight:"AlignRight",ArrowUp:"AlignTop",ArrowDown:"AlignBottom",KeyH:"AlignHCenter",KeyV:"AlignVCenter"}[t.code]),Fa(t)&&(n=(t.altKey?{BracketLeft:"Backward",BracketRight:"Forward"}:{BracketLeft:"ToBack",BracketRight:"ToFront"})[t.code]),n&&(t.preventDefault(),e.command.execute(n))}))}}]),n}();var th=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t=e.signal.keydown;function n(e,n){var r=function(e){return function(e){return W.ua.macos?"Meta"===e.key:"Control"===e.key}(e)?["Mod",e.key]:["Alt","Shift"].includes(e.key)&&[e.key]}(e);r&&r.forEach((function(e){t[e]=n}))}this.bind(window,"keydown",(function(e){n(e,!0)})),this.bind(window,"keyup",(function(e){n(e,!1)})),this.bind(window,"blur",(function(){for(var e in t)t[e]=!1}))}}]),n}();var nh=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Fa(t)&&"a"===t.key&&(t.preventDefault(),t.stopPropagation(),e.command.execute("SelectAll"),e.tryFocus())}))}}]),n}();var rh=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t=function(){e.lineAlign.setEnable(!1),e.lineAlign.reset()};this.bind(window,"keydown",(function(){e.signal.keydown.Shift&&e.lineAlign.setEnable(!0)})),this.bind(window,"keyup",(function(){e.signal.keydown.Shift||t()})),this.bind(window,"blur",(function(){t()}))}}]),n}();var ah=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"beforecommandexecute",(function(t){var n=t.commandName,r=t.command;if("Add"===n&&"line"===r.model.type){var a={};xe()(a,e.settings.line,r.model),r.model=a}})),this.bind(e,"aftercommandexecute",(function(t){var n=t.command;if("Update"===t.commandName&&1===(null==n?void 0:n.id.length)&&n.id[0].isLine){var r,a,i=n.id[0];e.settings.line={shape:i.shape,stroke:i.stroke,target:{marker:null==i||null===(r=i.target)||void 0===r?void 0:r.marker},source:{marker:null==i||null===(a=i.source)||void 0===a?void 0:a.marker}}}}))}}]),n}();var ih=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"group",new xr),e}return g()(n,[{key:"init",value:function(e){var t=this,n=new $r({fill:"#fff","dominant-baseline":"hanging"});n.css({fontFamily:"system-ui",fontSize:"".concat(12,"px")});var r=new Lr({fill:"rgba(0,0,0,0.7)",stroke:"none"});this.group.add(r),this.group.add(n),this.group.hide(),e.frontRootGroup.add(this.group),this.bind(e,"cellrotate",(function(a){var i=a.cell,o="".concat(a.rotate,"°"),c=1/e.viewport.zoom,l=8*c,s=4*c,u=24*c,d=3*c,h=12*c,f=e.font.measureTextLength(o,{fontSize:"".concat(h,"px")})+l+s,p=16*c,m=i.x,y=i.y,g=i.width,v=i.height,b=i.rotate,x=new mn({x:m,y:y,w:g,h:v,r:b}),k=x.center.x,w=Math.max(x.tl.y,x.tr.y,x.bl.y,x.br.y)+u,C=4*c,E=f/2,O=p/2,P=E<C?E:C,M=O<C?O:C;r.update({d:wn(k-f/2,w,f,p,P,M)}),n.update({x:k-f/2+l,y:w+d,text:o}),n.css({fontSize:"".concat(h,"px")}),t.group.show()})),this.bind(e,"mouseup",(function(){t.group.hide()}))}},{key:"reset",value:function(){this.group.clear(),this.unbind()}}]),n}();var oh=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"manager",void 0),e}return g()(n,[{key:"init",value:function(e){if(W.ua.mobile){var t=e.viewport,n=new He.a.Manager(e.canvasContainer);this.manager=n;var r=new He.a.Pan,a=new He.a.Pinch({enable:!0}),i=new He.a.Tap({event:"doubleTap",taps:2});n.add(a),n.add(i),n.add(r);var o=1,c=t.scrollLeft,l=t.scrollTop;n.on("panstart",(function(){c=t.scrollLeft,l=t.scrollTop})),n.on("panmove",(function(e){t.setScroll(c-e.deltaX,l-e.deltaY)})),n.on("pinchstart",(function(){o=t.zoom})),n.on("pinchmove",(function(e){t.setViewport(e.scale-1+o,[e.center.x,e.center.y])})),n.on("doubleTap",(function(){t.autoFit()}))}}},{key:"reset",value:function(){var e;null===(e=this.manager)||void 0===e||e.destroy()}}]),n}(),ch=function(){function e(t){m()(this,e),c()(this,"diagram",void 0),c()(this,"lineCache",void 0),this.diagram=t}return g()(e,[{key:"reset",value:function(){this.diagram.update(this.lineCache.map((function(e){return e.id})),this.lineCache)}},{key:"pin",value:function(){var e=this.diagram;this.lineCache.map((function(t){return e.find(t.id)})).filter((function(e){return e})).forEach((function(e){var t=e.source,n=e.target,r=e.diagram,a=bn(e.wireElement.attr("d")),i={};if(r.find(t.id)||(i.source={id:null,connection:[a[0][1],a[0][2]]}),!r.find(n.id)){var o=a.length-1,c=a[o].length;i.target={id:null,connection:[a[o][c-2],a[o][c-1]]}}e.update(i)}))}},{key:"cache",value:function(e){var t=this.diagram,n=e.reduce((function(e,t){return"string"==typeof t?e[t]=!0:t.getAllCells().forEach((function(t){e[t.model.id]=!0})),e}),{});this.lineCache=t.getCells().filter((function(e){if(e.isLine){var t=e.model,r=t.target.id,a=t.source.id;return r&&n[r]||a&&n[a]}return!1})).map((function(e){var t=e.model,n={id:t.id,target:d()(t.target),source:d()(t.source)};return n.target.connection||(n.target.connection=null),n.source.connection||(n.source.connection=null),n}))}}]),e}();var lh=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).pinLine=new ch(e.diagram),r}return g()(n,[{key:"selectParent",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id).parent;this.select(n&&n.model.id)}},{key:"selectNearest",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id);if(!Un(n))return e.selector.clear();var r=n.parent;if(t[0].length>1&&r)return this.select(r.model.id);if(1===t[0].length&&r){var a=r.getChildren().filter((function(e){return e.upSignX===n.upSignX&&e.upSignY===n.upSignY})),i=a.indexOf(n);if(r.model.children){var o=a[i-1];if(o)return this.select([o]);var c=a[i+1];if(c)return this.select([c])}return this.select(r.model.id)}return e.selector.clear()}},{key:"execute",value:function(){var e=this.diagram,t=this.id,n=this.pinLine,r=Yn(t,{}),a=r[0].map((function(t){return e.find(t)}));a.forEach((function(t,n){r[0][n]=d()(t.model),r[1][n]=e.getCellOptions(t)})),this.changeArguments=r,n.cache(a),this.forward()}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.pinLine;this.selectNearest(),e.remove(t[0].map((function(e){return e.id}))),e.tryFocus(),n.pin()}},{key:"backward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.pinLine,r=e.add.apply(e,N()(t));n.reset(),this.select(r),e.tryFocus()}}]),n}();function sh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}c()(lh,"className","Remove");var uh=function(e){j()(n,lh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"diagram",void 0),c()(P()(r),"deletedCells",void 0),c()(P()(r),"records",void 0),r.diagram=e.diagram,r}return g()(n,[{key:"execute",value:function(){var e=this;this.cells||(this.cells=this.diagram.selector.selections);var t=this.cells;this.id=[],this.records=new Map,this.deletedCells=new Set,this.deletedSwimlanes=new Set,t.forEach((function(t){var n=e.diagram.find(t);n&&n.canDelete()&&(e.id.push(n.model.id),e.deletedCells.add(n.model.id))})),I()(A()(n.prototype),"execute",this).call(this)}},{key:"forward",value:function(){var e=this,t=this.diagram,r=new Set;this.deletedCells.forEach((function(n){var a=t.find(n);if(a){var i=Pa(a);if(Kn(i))i.model.contain.forEach((function(n){if(!e.deletedCells.has(n)){var r=t.find(n);r&&(t.swimlane.unbind(r,i),e.records.set(r.model.id,i.model.id))}}));else if(e.deletedCells.has(i.model.id)&&!r.has(i.model.id)&&i.swimlane&&!e.deletedCells.has(i.swimlane)){var o=t.find(i.swimlane);o&&(r.add(o.model.id),t.swimlane.unbind(i,o),e.records.set(i.model.id,o.model.id))}}})),I()(A()(n.prototype),"forward",this).call(this)}},{key:"backward",value:function(){I()(A()(n.prototype),"backward",this).call(this);var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(this.records.entries());try{for(t.s();!(e=t.n()).done;){var r=b()(e.value,2),a=r[0],i=r[1];this.diagram.swimlane.bind(a,i)}}catch(e){t.e(e)}finally{t.f()}}}]),n}();c()(uh,"className","Delete"),c()(uh,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canDelete()})).length>0}));var dh=function(e){j()(n,uh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){Yo(this.e,this.diagram),I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()(dh,"className","Cut"),c()(dh,"isModelChange",!0);var hh=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this);var e=this.diagram,t=this.lineId,r=this.model,a=e.find(t);this.originTarget=["id","connection","marker"].reduce((function(e,t){var n=a.target[t];return e[t]=null==n?null:n,e}),{}),e.update(a,{target:{id:r.id,connection:null}})}},{key:"forward",value:function(){I()(A()(n.prototype),"forward",this).call(this);var e=this.diagram,t=this.lineId,r=this.model,a=e.find(t);a&&!a.destroyed&&e.update(a,{target:{id:r.id,connection:null}})}},{key:"backward",value:function(){var e=this.diagram,t=this.lineId,n=this.originTarget,r=this.model,a=e.find(t);e.remove(r.id),a&&!a.destroyed&&e.update(a.model.id,{target:n}),this.select()}}]),n}();function fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ph(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(hh,"className","AddVertex");var mh=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.attr,n=this.shape||"rect",r=mo[mo.findIndex((function(e){return e.name===n}))],a=r.type||"geometry",i=r.category,o=r.html||$i,c=r.controlPoints||void 0,l=r.round||void 0;Object.assign(e.settings.vertex,ph(ph({},t),{},{type:a,html:o,shape:n,category:i,controlPoints:c,round:l})),e.selector.clear(),e.interaction.changeMode("beginInsertVertex")}}],[{key:"enable",value:function(){return!0}}]),n}();function yh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(mh,"className","BeginInsertGeometry"),c()(mh,"isModelChange",!1);var gh=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({html:ar("文本")},e))).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.html,n=this.stroke;Object.assign(e.settings.vertex,{type:"text",html:t,stroke:n,shape:"text"}),e.selector.clear(),e.interaction.changeMode("beginInsertVertex")}}],[{key:"enable",value:function(){return!0}}]),n}();c()(gh,"className","BeginInsertText"),c()(gh,"isModelChange",!1);var vh=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.model,n=this.files;e.settings.image.insertModel=t,e.settings.image.insertFiles=n,e.selector.clear(),e.interaction.changeMode("beginInsertImage")}}],[{key:"enable",value:function(){return!0}}]),n}();c()(vh,"className","BeginInsertImage"),c()(vh,"isModelChange",!1);var bh=function(e){j()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"arrange",value:function(){}},{key:"getArrangeTstem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=[],r=[];return e.forEach((function(e,a){var i=ad([e]),o=i.stems,c=i.originModels,l=t(a,e),s=l.dx,u=l.dy;r.push.apply(r,N()(o)),n.push.apply(n,N()(io(c,s,u)))})),{tStems:r,models:n}}},{key:"execute",value:function(){var e=this.diagram.selector.selections.concat([]),t=this.arrange(),r=t.tStems,a=t.models;this.id=r,this.model=a,this.selectedIds=e.map((function(e){return e.model.id})),I()(A()(n.prototype),"execute",this).call(this)}},{key:"select",value:function(){I()(A()(n.prototype),"select",this).call(this,this.selectedIds)}}]),n}();c()(bh,"className","Arrange");var xh=function(e){j()(n,bh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"_getAlignCells",value:function(e){return e.filter((function(e){return e.canArrange()}))}},{key:"_getAlignCellPoints",value:function(e){var t=[];return e.forEach((function(e){var n=[],r=e.getAlignBBox();n.push([r.minX,r.minY]),n.push([r.maxX,r.maxY]),n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]),t.push(n)})),t}},{key:"arrange",value:function(){var e=this.diagram.selector.selections.concat([]),t=this._getAlignCells(e),n=this._getAlignCellPoints(t);return this.align(t,n)}},{key:"align",value:function(){}}]),n}();c()(xh,"className","Align"),c()(xh,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canArrange()})).length>1}));var kh=function(e){j()(n,xh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.max.apply(Math,N()(n.map((function(e){return e[1]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:0,dy:n.isLine?r-Math.max.apply(Math,N()(a.map((function(e){return e[1]})))):r-a[1][1]}}))}}]),n}();c()(kh,"className","AlignBottom");var wh=function(e){j()(n,xh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"align",value:function(e,t){var n,r=e.map((function(e){return e.getAlignBBox()})),a=It(r,"width");if(r.every((function(e){return e.minX>=a.minX&&e.maxX<=a.maxX})))n=a.x+a.width/2;else{var i=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[0]}));n=(Math.max.apply(Math,N()(i))+Math.min.apply(Math,N()(i)))/2}return this.getArrangeTstem(e,(function(e,r){var a=t[e];return{dx:(r.isLine,n-a[2][0]),dy:0}}))}}]),n}();c()(wh,"className","AlignHCenter");var Ch=function(e){j()(n,xh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.min.apply(Math,N()(n.map((function(e){return e[0]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:n.isLine?r-Math.min.apply(Math,N()(a.map((function(e){return e[0]})))):r-a[0][0],dy:0}}))}}]),n}();c()(Ch,"className","AlignLeft");var Eh=function(e){j()(n,xh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.max.apply(Math,N()(n.map((function(e){return e[0]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:n.isLine?r-Math.max.apply(Math,N()(a.map((function(e){return e[0]})))):r-a[1][0],dy:0}}))}}]),n}();c()(Eh,"className","AlignRight");var Oh=function(e){j()(n,xh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"align",value:function(e,t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),r=Math.min.apply(Math,N()(n.map((function(e){return e[1]}))));return this.getArrangeTstem(e,(function(e,n){var a=t[e];return{dx:0,dy:n.isLine?r-Math.min.apply(Math,N()(a.map((function(e){return e[1]})))):r-a[0][1]}}))}}]),n}();c()(Oh,"className","AlignTop");var Ph=function(e){j()(n,xh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"align",value:function(e,t){var n,r=e.map((function(e){return e.getAlignBBox()})),a=It(r,"height");if(r.every((function(e){return e.minY>=a.minY&&e.maxY<=a.maxY})))n=a.y+a.height/2;else{var i=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[1]}));n=(Math.max.apply(Math,N()(i))+Math.min.apply(Math,N()(i)))/2}return this.getArrangeTstem(e,(function(e,r){var a=t[e];return{dx:0,dy:(r.isLine,n-a[2][1])}}))}}]),n}();c()(Ph,"className","AlignVCenter");var Mh=function(e){j()(n,bh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"distribute",value:function(){}},{key:"arrange",value:function(){var e=this.diagram.selector.selections.filter((function(e){return e.canArrange()}));return this.distribute(e)}}]),n}();c()(Mh,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canArrange()})).length>2}));var jh=function(e){j()(n,Mh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"distribute",value:function(e){var t=e.length,n=e.map((function(e){return{cell:e,box:e.getAlignBBox()}}));n=n.sort((function(e,t){return e.box.minX-t.box.minX}));var r=Math.min.apply(Math,N()(n.map((function(e){return e.box.minX})))),a=(Math.max.apply(Math,N()(n.map((function(e){return e.box.maxX}))))-r-n.reduce((function(e,t){return e+t.box.width}),0))/(t-1),i=n[0].box;e=n.map((function(e){return e.cell}));var o=0;return this.getArrangeTstem(e,(function(e){var t=0;if(e>0){var r=n[e-1],c=n[e];o=o+a+r.box.width,t=i.minX+o-c.box.minX}return{dx:t,dy:0}}))}}]),n}();c()(jh,"className","DistributeHorizontally");var Sh=function(e){j()(n,Mh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"distribute",value:function(e){var t=e.length,n=e.map((function(e){return{cell:e,box:e.getAlignBBox()}}));n=n.sort((function(e,t){return e.box.minY-t.box.minY}));var r=Math.min.apply(Math,N()(n.map((function(e){return e.box.minY})))),a=(Math.max.apply(Math,N()(n.map((function(e){return e.box.maxY}))))-r-n.reduce((function(e,t){return e+t.box.height}),0))/(t-1),i=n[0].box;e=n.map((function(e){return e.cell}));var o=0;return this.getArrangeTstem(e,(function(e){var t=0;if(e>0){var r=n[e-1],c=n[e];o=o+a+r.box.height,t=i.minY+o-c.box.minY}return{dx:0,dy:t}}))}}]),n}();c()(Sh,"className","DistributeVertically");var Rh=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.diagram,r=n.selector.selections.filter((function(e){return e.isStem}));r.sort(t);var a=r.map((function(e){return e.model.id})),i=r.map((function(e){return n.getCellOptions(e)}));r.forEach((function(t){t[e]()}));var o=r.map((function(e){return n.getCellOptions(e)}));this.beforeCellOptions=i,this.afterCellOptions=o,this.id=a,this.select(a)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.beforeCellOptions;e.update(t,{},n),this.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.id,n=this.afterCellOptions;e.update(t,{},n),this.select(t)}}]),n}();c()(Rh,"className","ZIndex");var Lh=function(e){j()(n,Rh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this,"toBack",(function(e,t){return t.getZIndex()-e.getZIndex()}))}}]),n}();c()(Lh,"className","ToBack");var Ah=function(e){j()(n,Rh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this,"toFront",(function(e,t){return e.getZIndex()-t.getZIndex()}))}}]),n}();c()(Ah,"className","ToFront");var Bh=function(e){j()(n,Rh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this,"backward",(function(e,t){return e.getZIndex()-t.getZIndex()}))}}]),n}();c()(Bh,"className","Backward");var Nh=function(e){j()(n,Rh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this,"forward",(function(e,t){return t.getZIndex()-e.getZIndex()}))}}]),n}();c()(Nh,"className","Forward");var Dh=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.x,t=this.y;this.model={type:"text",html:ar("文本"),x:e,y:t},I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()(Dh,"className","InsertText"),c()(Dh,"enable",(function(e){return"edit"===e.interaction.currentMode}));var Ih=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.x,t=this.y;this.model={type:"geometry",html:$i,shape:"rect",x:e,y:t},I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()(Ih,"className","InsertGeometry"),c()(Ih,"enable",(function(e){return"edit"===e.interaction.currentMode}));var Th=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.x,t=this.y,r=this.image,a=this.diagram,i=r.naturalWidth/r.naturalHeight,o=this.width||Math.min(r.naturalWidth,1e3,1e3*i),c=this.height||o/i,l=a.viewport.getCenter();this.model={type:"image",image:r,width:o,height:c,x:null==e?l[0]:e,y:null==t?l[1]:t,constraints:{proportion:!0}},I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()(Th,"className","InsertImage"),c()(Th,"enable",(function(e){return"edit"===e.interaction.currentMode}));var _h=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){this.diagram.contentEditor.execCommand("createLink",ar("链接"))}}]),n}();c()(_h,"className","AttachLink"),c()(_h,"enable",(function(e){var t=e.getCell(e.contentEditor.dom);return e.contentEditor.getRange()&&t}));var qh=r.FileUtils.isImage;function zh(e){var t=e.model,n=e.offset;t.x=(t.x||0)+n[0],t.y=(t.y||0)+n[1]}var Fh={text:{lake:zh,text:function(e){var t=e.text,n=e.focusPoint;return[{type:"text",html:t,x:n[0],y:n[1]}]},textIndex:1},geometry:{lake:zh},stack:{lake:zh},image:{lake:zh},group:{lake:function(e){var t=e.model,n=e.offset;oo([t],n[0],n[1])}},line:{lake:function(e){var t=e.extraInformation,n=e.extraInformations,r=e.offset,a=e.model,i=t.points;["source","target"].forEach((function(e){var t=a[e];if(!t.id&&t.connection&&(t.connection[0]+=r[0],t.connection[1]+=r[1]),t.id&&!n[t.id]){var o="source"===e?i[0]:i[i.length-1];t.connection=[o.x+r[0],o.y+r[1]],delete t.id}})),a.controlPoints&&a.controlPoints.forEach((function(e){e[0]+=r[0],e[1]+=r[1]}))}}},Yh=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"_getOptions",value:function(e,t){var n=this.diagram.groupManager.group;return e.map((function(e,r){var a=Object.assign(e.options||{},t[r]);return delete e.options,n&&!a.parent&&(a.parent=n.model.id),Object.assign(t[r],a)}))}},{key:"execute",value:function(){var e,t=this.diagram,n=this.e,r=n.clipboardData.getData("text/html"),a=n.clipboardData.getData("text/plain"),i=this.focusPoint,o=yc(r);if(i=i||t.viewport.getFocus(),o){var c=o.body,l=o.extraInformations,s=function(e,t,n){var r=[[],[]];return e.forEach((function(e){St(e,(function(e){var t=e.id,a=e.x,i=e.y,o=e.type,c=n[t];"line"===o?["source","target"].forEach((function(t){var n=e[t];if(null!=n&&n.id){var a=c.points,i="source"===t?a[0]:a[a.length-1];r[0].push(i.x),r[1].push(i.y)}else null!=n&&n.id||null==n||!n.connection||(r[0].push(n.connection[0]),r[1].push(n.connection[1]))})):(a=null==a?null==c?void 0:c.x:a,i=null==i?null==c?void 0:c.y:i,null!=a&&null!=i&&(r[0].push(a),r[1].push(i)))}))})),r[0]=[r[0].length>0&&Math.min.apply(Math,N()(r[0]))||0],r[1]=[r[1].length>0&&Math.min.apply(Math,N()(r[1]))||0],[t[0]-r[0][0],t[1]-r[1][0]]}(c,i,l);!function(e,t){var n=function(e){return"mindmap"===t[e.id].rootType},r=e.filter((function(e){return n(e)}));e.sort((function(e,t){return e.zIndex-t.zIndex})),e.forEach((function(e){St(e,(function(e){var t=e.children;t&&"group"===e.type&&t.sort((function(e,t){return e.zIndex-t.zIndex}))}))}));var a=0;e.forEach((function(t,i){n(t)&&(e[i]=r[a],a++)}))}(c,l);var u=La(c,l);c.forEach((function(e){ys(e);var n=l[e.id];e.type||(e.type=n.rootType||"text"),e.options={},St(e,(function(e){e.zIndex&&delete e.zIndex,"swimlane"===e.type&&(e.contain=e.contain.map((function(e){return u[e]})).filter((function(e){return e})))}));var r=Fh[e.type];r&&r.lake&&r.lake({model:e,extraInformation:n,extraInformations:l,offset:s,diagram:t})}));var d={body:c,options:c.map((function(){return{}})),extraInfomations:l,offset:s};return t.emit("beforepaste:lake",d),void t.command.execute("Add",{model:d.body,cellOptions:this._getOptions(d.body,d.options)})}if(n.clipboardData.files.length>0&&(""===r&&/^.+\.\w+$/.test(a)||""===a&&/^(<meta.+?>)?<img.+?>$/.test(r)||!a||!r)&&(e=Array.from(n.clipboardData.files)),e){var h=Array.from(e).filter((function(e){return qh(e)}));h[0]&&t.emit("importimage",{files:h,from:"clipboard",x:i[0],y:i[1]})}else if(a){var f,p=Object.keys(Fh),m=bc(a),y=[];p.forEach((function(e){var t,n=Fh[e].text;n&&y.push({textProcessor:n,textIndex:null!==(t=Fh[e].textIndex)&&void 0!==t?t:0})})),y.sort((function(e,t){return t.textIndex-e.textIndex})),y=y.map((function(e){return e.textProcessor}));for(var g=0;g<y.length&&!(f=(0,y[g])({text:a,focusPoint:i,diagram:t,structuredText:m}));g++);var v={body:f,options:f.map((function(){return{}}))};t.emit("beforepaste:text",v),t.command.execute("Add",{model:v.body,cellOptions:this._getOptions(v.body,v.body.map((function(e){return{}})))}),t.emit("afterpasteplaintext",{body:f,focusPoint:i,structuredText:m})}}}],[{key:"registerClipboardProcessor",value:function(e,t){Fh[e]=t}}]),n}();function Xh(e){return e.isStem}c()(Yh,"className","Paste");var Gh=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.groupManager.group,n=e.selector.selections.filter(Xh),r={},a=Object(q.a)();t&&(r.parent=t.model.id),n.sort((function(e,t){return e.getZIndex()-t.getZIndex()}));var i={id:a,type:"group"},o={parent:a};this.beforeZIndexCache=e.getCellsByZIndex().map((function(e){return e.model.id})),this.newGroupModel=i,this.newGroupOption=r,this.selectionIds=n.map((function(e){return e.model.id})),this.updateModel={},this.updateOption=o,this.forward()}},{key:"forward",value:function(){var e=this.diagram,t=this.newGroupModel,n=this.selectionIds,r=this.newGroupOption,a=this.updateModel,i=this.updateOption,o=e.rootGroup,c=n.map((function(t){return e.find(t)})),l=t.id,s=c[c.length-1].getAllCellsByZIndex(),u=s[s.length-1];e.add(t,r),e.update(c,a,i);var d=e.find(l);o.insertBefore(d.graphicGroup,u.graphicGroup);for(var h=0;h<c.length;h++)c[h].getAllCellsByZIndex().forEach((function(e){o.insertBefore(e.graphicGroup,d.graphicGroup)}));e.selector.select(l)}},{key:"backward",value:function(){var e=this.diagram,t=this.selectionIds,n=this.newGroupModel,r=this.newGroupOption,a=this.beforeZIndexCache,i=n.id,o=e.rootGroup,c=t.map((function(t){return e.find(t)}));r.parent?e.update(c,{parent:r.parent}):e.update(c,{},{parent:null}),e.groupManager.exit(),e.remove(i);for(var l=0;l<a.length;l++){var s=e.find(a[l]);o.append(s.graphicGroup)}e.selector.select(t)}}]),n}();c()(Gh,"className","Group"),c()(Gh,"enable",(function(e){var t=e.selector.selections;return(t=t.filter(Xh)).length>1}));var Hh=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,n=t.map((function(e){return e.model.id})),r={};t.forEach((function(e){e.getChildren().forEach((function(t){r[t.model.id]=e.model.id}))})),this.beforeZIndexCache=e.getCellsByZIndex().map((function(e){return e.model.id})),this.selectionIds=n,this.groupMap=r,this.forward()}},{key:"forward",value:function(){var e=this.diagram,t=this.selectionIds.map((function(t){return e.find(t)})),n=[];t.forEach((function(t){var r=t.parent&&t.parent.model.id||null;t.getChildren().forEach((function(t){n.push(t),e.update(t,{},{parent:r})}))})),e.groupManager.exit(),e.remove(t),e.selector.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.groupMap,n=this.selectionIds,r=this.beforeZIndexCache,a=e.rootGroup;e.add(n.map((function(e){return{id:e,type:"group"}}))),Object.keys(t).forEach((function(n){e.update(n,{},{parent:t[n]})}));for(var i=0;i<r.length;i++){var o=e.find(r[i]);a.append(o.graphicGroup)}e.selector.select(n)}}]),n}();c()(Hh,"className","UnGroup"),c()(Hh,"enable",(function(e){return e.selector.selections.every((function(e){return e.isGroup}))}));var Wh=function(e){j()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram.selector.selections,t=e.map((function(e){return{target:{marker:e.source.marker||"none"},source:{marker:e.target.marker||"none"}}}));this.model=t,this.id=e.map((function(e){return e.model.id})),I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()(Wh,"className","LineSwapEndPoint"),c()(Wh,"enable",(function(e){return e.selector.selections.every((function(e){return Gn(e)}))}));var Vh={Extends:[pu,mu,bu,Tu,xu,Mu,Du,Iu,Fu,_u,Yu,Xu,Hu,Wu,Uu],Cells:[Cs,tu,au,su,hu],Commands:[lh,uh,dh,Gh,Hh,Yh,hh,mh,gh,vh,kh,wh,Ch,Eh,Oh,Ph,jh,Sh,Lh,Ah,Bh,Nh,Dh,Ih,Th,_h,Wh],defaultCursors:{read:"grab",dragCanvas:"grab",beginInsertLine:"crosshair"},settings:{line:{shape:"elbow",target:{marker:"arrow"}},image:{},vertex:{}},dataProcessor:function(e){if(e&&e.body){var t=[],n=[],r=[],a={};e.body.forEach((function(e){St(e,(function(e,t){e.id||(e.id=Object(q.a)()),a[e.id]={model:e,parent:t},e.type&&n.push(e)})),e.type?t.push(e):r.push(e.id)})),t.forEach((function(e){ys(e)})),n.forEach((function(e){!function(e){if(function(e){return!!e.type&&"image"===e.type}(e)){var t,n,r=e.width,a=e.height,i=null==e||null===(t=e.image)||void 0===t?void 0:t.naturalWidth,o=null==e||null===(n=e.image)||void 0===n?void 0:n.naturalHeight;if(null==a&&"number"==typeof r&&"number"==typeof i&&"number"==typeof o){var c=o/i;e.height=r*c}}}(e),function(e){"line"===e.type&&e.controlPoints&&(e.controlPoints=e.controlPoints.filter((function(e){return e&&e[0]&&e[1]})))}(e),!1===function(e){if(function(e){return!!e.type&&"geometry"===e.type}(e)){var t=mo.find((function(t){return t.name===e.shape}));if(!t)return!1;t.controlPoints&&!e.controlPoints&&(e.controlPoints=t.controlPoints),t.round&&!e.round&&(e.round=t.round)}}(e)&&r.push(e.id),!1===function(e,t){if(no(e))for(var n=["target","source"],r=0;r<n.length;r++){var a=e[n[r]];if(a&&a.id&&!t[a.id])return!1}}(e,a)&&r.push(e.id)})),r.forEach((function(t){var n=a[t],r=n.model,i=n.parent;Gt(i?i.children:e.body,r)})),function(e){e.body.forEach((function(e){St(e,(function(e){"mindmap"===e.type&&(delete e.abstract,delete e.start,delete e.end,St(e,(function(e,t){var n=fs.modelIsTwoQuadrantLayout(e),r=e.children;if(r&&0!==r.length){for(var a=n?2:1,i=r.length,o=[1/0,1/0],c=[void 0,void 0],l=r.length-1;l>=0;l--){var s=r[l];if(!s.abstract||void 0===s.start||void 0===s.end){i=l+1;break}var u=s.start,d=s.end,h=s.layout,f=(h=void 0===h?{}:h).quadrant,p=void 0===f?1:f;if(p>a){if(n){i=l+1;break}s.layout=ms(ms({},s.layout),{},{quadrant:1})}if(p<a&&(a=p),d>=o[a-1]){var m=o[a-1]-1;if(m<0){i=l+1;break}s.end=m}if(u>d||u>o[a-1]||d<0){i=l+1;break}u<0&&(s.start=0),o[a-1]=s.start,s.end,void 0===c[a-1]&&(c[a-1]=l),void 0!==s.border&&void 0!==s.border.shape&&"line"!==s.border.shape||(s.border=ms(ms({},s.border),{},{shape:"rect"}))}var y=function(e,t){var n=r[e],a=n.abstract,i=n.start,o=void 0===i?0:i,c=n.end;return!a||o>=t||((void 0===c?0:c)>=t&&(r[e].end=t-1),!1)},g=!1;if(n){var v=[[],[]],b=[[],[]];r.forEach((function(e,t){var n=e.layout,r=(n=void 0===n?{}:n).quadrant,a=void 0===r?1:r,o=Math.min(2,Math.max(1,a));t<i?v[o-1].push(t):b[o-1].push(t)})),g=b.some((function(e,t){if(e.length>0){var n=e[e.length-1],r=v[t].length;return y(n,r)}return!1}))}else r[r.length-1].abstract&&(g=y(r.length-1,i));g&&(i=r.length);for(var x=0;x<i;x++)delete r[x].abstract,delete r[x].start,delete r[x].end}})))}))}))}(e)}},modes:[{mode:"edit",Behaviours:[Dd,Bd,Td,_d,qd,zd,Nd,Fd,Yd,Ld,Sd,id,ld,Ed,Pd,Md,Rd,Xd,$d,Wd,Ud,Vd,Hd,th,nh,Zd,Qd,Jd,eh,rh,ah,ih]},{mode:"read",Behaviours:[Ad,oh]},{mode:"dragCanvas",Behaviours:[]},{mode:"beginInsertLine",Behaviours:[Ju,th,rh]},{mode:"beginInsertVertex",Behaviours:[td]},{mode:"beginInsertImage",Behaviours:[rd]}]};Yh.registerClipboardProcessor("mindmap",{text:function(e){var t=e.structuredText,n=e.diagram;if(!t)return!1;var r=n.selector.selections,a=r[0];if(1===r.length&&a.isMindmap){a.collapsed&&n.update(a,{collapsed:null});var i=a.model.children.filter((function(e){return!e.abstract})).length;return t.forEach((function(e,t){e.options={parent:a.model.id,nth:i+t}})),t}return!1},textIndex:2}),Td.registerContentEditorOptions("mindmap",{insertParagraphKey:function(e){return(e.metaKey||e.ctrlKey||e.altKey)&&"Enter"===e.key},cancelKey:function(e){return"Tag"===e.key||"Enter"===e.key||"Escape"===e.key}}),Hd.filterCell((function(e){return!e.isMindmap}));var Uh=Lr,Zh=ba,Kh=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=e.parent,r=new Uh({fill:"none","stroke-linecap":"round","stroke-linejoin":"round"});r.rendererElement.style["pointer-events"]="none",t.add(r),this.element=r,e.treeEdgeElement=r,n&&n.isStem&&!e.isAbstract&&this._createClipPath()}},{key:"_createClipPath",value:function(){var e=this.cell,t=this.element,n=e.parent,r=e.diagram;if(n){var a=r.defs,i=Object(q.a)(),o=new Zh({id:i}),c=new Uh({"fill-rule":"nonzero"});o.add(c),a.add(o),this.treeEdgeClipPath=c,this.clipPath=o,t.update({"clip-path":"url(#".concat(i,")")})}}},{key:"VH",value:function(e,t){return"M".concat(e[0],",").concat(e[1]," L").concat(e[0],",").concat(t[1]," L").concat(t[0],",").concat(t[1])}},{key:"curveHVH",value:function(){var e,t,n,r,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this.cell,l=c.parent,s=.5,u=4,d=4,h=36,f="";return c.x>l.x?(t=l.isStem?[l.x-c.x+l.width-h,l.y-c.y+l.height/2]:[l.x-c.x+l.width,l.y-c.y+l.height/2+i],(n=[0,c.height/2])[1]+=o,r=[t[0]+u,t[1]],e=(a=[n[0]-d,n[1]])[0]-r[0],f+="M".concat(t[0]," ").concat(t[1]," "),f+="L".concat(r[0]," ").concat(r[1]," "),f+="C".concat(r[0]+e*(1-s)," ").concat(r[1],", ").concat(a[0]-e*s," ").concat(a[1],", ").concat(a[0]," ").concat(a[1]," "),f+="L".concat(n[0]," ").concat(n[1]),"line"===c.border.shape&&(f+="L".concat(n[0]+c.width," ").concat(n[1]))):(t=l.isStem?[l.x-c.x+h,l.y-c.y+l.height/2]:[l.x-c.x,l.y-c.y+l.height/2+i],(n=[c.width,c.height/2])[1]+=o,r=[t[0]-u,t[1]],a=[n[0]+d,n[1]],e=r[0]-a[0],f+="M".concat(t[0]," ").concat(t[1]," "),f+="L".concat(r[0]," ").concat(r[1]," "),f+="C".concat(r[0]-e*(1-s)," ").concat(r[1],", ").concat(a[0]+e*s," ").concat(a[1],", ").concat(a[0]," ").concat(a[1]," "),f+="L".concat(n[0]," ").concat(n[1]),"line"===c.border.shape&&(f+="L".concat(n[0]-c.width," ").concat(n[1]))),f}},{key:"VHV",value:function(){var e,t,n=this.cell,r=n.parent,a={x:r.x-n.x,y:r.y-n.y},i="";n.y<r.y?(e=[a.x+r.width/2,a.y],t=[n.width/2,n.height]):(e=[a.x+r.width/2,a.y+r.height],t=[n.width/2,0]);var o=(e[1]+t[1])/2;return i+="M".concat(e[0]," ").concat(e[1]," "),i+="L".concat(e[0]," ").concat(o," "),(i+="L".concat(t[0]," ").concat(o," "))+"L".concat(t[0]," ").concat(t[1])}},{key:"HVH",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.cell,o=i.parent,c="";return i.x>o.x?(e=o.isStem?[o.x-i.x+o.width,o.y-i.y+o.height/2]:[o.x-i.x+o.width,o.y-i.y+o.height/2+r],(t=[0,i.height/2])[1]+=a,n=(o.x-i.x+o.width)/2,"line"===i.border.shape&&(t[0]+=i.width)):(e=1===i.depth?[o.x-i.x,o.y-i.y+o.height/2]:[o.x-i.x,o.y-i.y+o.height/2+r],(t=[i.width,i.height/2])[1]+=a,n=(o.x-i.x+i.width)/2,"line"===i.border.shape&&(t[0]-=i.width)),c+="M".concat(e[0]," ").concat(e[1]," "),c+="L".concat(n," ").concat(e[1]," "),(c+="L".concat(n," ").concat(t[1]," "))+"L".concat(t[0]," ").concat(t[1])}},{key:"curveVHV",value:function(){var e,t,n,r,a,i=this.cell,o=i.parent,c={x:o.x-i.x,y:o.y-i.y},l="",s=1===i.depth?0:8;return i.y<o.y?(t=[c.x+o.width/2,c.y],n=[i.width/2,i.height],r=[t[0],t[1]-s],a=[n[0],n[1]+0],e=r[1]-a[1]):(t=[c.x+o.width/2,c.y+o.height],n=[i.width/2,0],r=[t[0],t[1]+s],a=[n[0],n[1]-0],e=r[1]-a[1]),l+="M".concat(t[0]," ").concat(t[1]," "),l+="L".concat(r[0]," ").concat(r[1]," "),(l+="C".concat(r[0]," ").concat(r[1]-.5*e,", ").concat(a[0]," ").concat(a[1]+.5*e,", ").concat(a[0]," ").concat(a[1]," "))+"L".concat(n[0]," ").concat(n[1])}},{key:"getStandardLayoutPath",value:function(){var e=this.cell,t=e.parent,n=e.computedProps,r=e.upDirection,a=n.treeEdge.shape;if(0===r[0])return"polyline"===a?this.VHV():this.curveVHV();var i=0,o=0;return"line"===t.border.shape&&(i=t.height/2),"line"===e.border.shape&&(o=e.height/2),"polyline"===a?this.HVH(i,o):this.curveHVH(i,o)}},{key:"getIndentLayoutPath",value:function(){var e,t,n=this.cell,r=n.computedProps,a=n.border,i=n.parent,o=r.treeEdge.shape,c={x:i.x-n.x,y:i.y-n.y},l=i.x+i.width/2-(n.x+n.width)>0,s=i.y-n.y-n.height>0,u="";if(s?(e=[c.x+i.width/2,c.y],t=l?"line"===a.shape?[0,n.height]:[n.width,n.height/2]:"line"===a.shape?[n.width,n.height]:[0,n.height/2]):(e=[c.x+i.width/2,c.y+i.height],t=l?"line"===a.shape?[0,n.height]:[n.width,n.height/2]:"line"===a.shape?[n.width,n.height]:[0,n.height/2]),"polyline"===o)u+="M".concat(e[0],",").concat(e[1]),u+="L".concat(e[0],",").concat(t[1]),u+="L".concat(t[0],",").concat(t[1]);else{var d=16;if(u+="M".concat(e[0],",").concat(e[1]),s){var h=Math.abs(t[1]-e[1]);h<=d&&(d=h),l?(u+="L".concat(e[0],",").concat(t[1]+d),u+="A ".concat(d," ").concat(d,", 0, 0, 0, ").concat(e[0]-d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1])):(u+="L".concat(e[0],",").concat(t[1]+d),u+="A ".concat(d," ").concat(d,", 0, 0, 1, ").concat(e[0]+d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1]))}else l?(u+="L".concat(e[0],",").concat(t[1]-d),u+="A ".concat(d," ").concat(d,", 0, 0, 1, ").concat(e[0]-d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1])):(u+="L".concat(e[0],",").concat(t[1]-d),u+="A ".concat(d," ").concat(d,", 0, 0, 0, ").concat(e[0]+d,", ").concat(t[1]),u+="L".concat(t[0],",").concat(t[1]))}return u}},{key:"getTimelineLayoutPath",value:function(){var e,t=this.cell,n=t.upSignX,r=t.getTimelineLayoutAlign(),a=t.getTimelineLayoutSourceCell(),i={x:a.x-t.x,y:a.y-t.y},o=[0,0];return 1===n?(e="b"===r[0]?[i.x+a.width,i.y+a.height]:[i.x+a.width,i.y+a.height/2],o="b"===r[1]?[t.width,t.height]:[0,t.height/2]):-1===n&&(e="b"===r[0]?[i.x,i.y+a.height]:[i.x,i.y+a.height/2],o="b"===r[1]?[0,t.height]:[t.width,t.height/2]),e&&"M".concat(e[0],",").concat(e[1]," L").concat(o[0],",").concat(o[1])}},{key:"getAbstractLayoutPath",value:function(){var e=this.cell,t=e.al,n=void 0===t?10:t,r=e.ad,a=void 0===r?"x":r,i=e.ap,o=void 0===i?1:i,c=e.width,l=void 0===c?2:c,s=e.height,u=void 0===s?2:s,d=e.computedProps.treeEdge.shape,h=[0,0],f=[0,0],p=[0,0];"x"===a?(h[0]+=.5*l,h[1]+=(1-(o+1)/2)*u,f[0]=h[0]-n/2,p[0]=h[0]+n/2,f[1]=p[1]=h[1]-48*o):(h[0]+=(1-(o+1)/2)*l,h[1]+=.5*u,f[1]=h[1]-n/2,p[1]=h[1]+n/2,f[0]=p[0]=h[0]-48*o);var m="y"===a?[f[0]+12*o,f[1]]:[f[0],f[1]+12*o],y="y"===a?[p[0]+12*o,p[1]]:[p[0],p[1]+12*o],g="y"===a?[h[0]-0*o,h[1]]:[h[0],h[1]-0*o],v="y"===a?[g[0]-16*o,g[1]]:[g[0],g[1]-16*o];return"polyline"===d?"y"===a?"M".concat(m[0],",").concat(m[1]," L").concat(v[0],",").concat(m[1]," L").concat(v[0],",").concat(y[1]," L").concat(y[0],",").concat(y[1]," M").concat(v[0],",").concat(v[1]," L").concat(g[0],",").concat(g[1]):"M".concat(m[0],",").concat(m[1]," L").concat(m[0],",").concat(v[1]," L").concat(y[0],",").concat(v[1]," L").concat(y[0],",").concat(y[1]," M").concat(v[0],",").concat(v[1]," L").concat(g[0],",").concat(g[1]):"y"===a?"M".concat(m[0],",").concat(m[1]," Q").concat(v[0],",").concat(m[1]," ").concat(v[0],",").concat(v[1]," Q").concat(v[0],",").concat(y[1]," ").concat(y[0],",").concat(y[1]," M").concat(v[0],",").concat(v[1]," L").concat(g[0],",").concat(g[1]):"M".concat(m[0],",").concat(m[1]," Q").concat(m[0],",").concat(v[1]," ").concat(v[0],",").concat(v[1]," Q").concat(y[0],",").concat(v[1]," ").concat(y[0],",").concat(y[1]," M").concat(v[0],",").concat(v[1]," L").concat(g[0],",").concat(g[1])}},{key:"getPath",value:function(){var e=this.cell,t=e.upLayoutType,n=e.isAbstract;return t||n?n?this.getAbstractLayoutPath():"indent"===t?this.getIndentLayoutPath():"timeline"===t?this.getTimelineLayoutPath():this.getStandardLayoutPath():""}},{key:"getSytle",value:function(){var e=this.cell;return{stroke:e.computedProps.treeEdge.stroke,"stroke-width":e.getTreeEdgeStrokeWidth()}}},{key:"drawClipPath",value:function(){var e=this.cell,t=this.treeEdgeClipPath;if(t){var n=e.parent,r={x:n.x-e.x,y:n.y-e.y},a=n.getPadding(),i=[r.x+a[3],r.y+a[0]],o=[r.x+n.width-a[1],r.y+n.height-a[2]],c=[Math.min(0,r.x)-50,Math.min(0,r.y)-50],l=[Math.max(e.width,r.x+n.width)+50,Math.max(e.height,r.y+n.height)+50];t.update({d:Dn(c[0],c[1],l[0],l[1],i[0],i[1],o[0],o[1])})}}},{key:"_drawPath",value:function(){var e=this.cell,t=this.element,n=e.cache,r=this.getPath();n.treeEdgePath!==r&&(t.update({d:r}),n.treeEdgePath=r,this.drawClipPath())}},{key:"drawPosition",value:function(){this._drawPath()}},{key:"drawInherit",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=this.getSytle(),a=Kt(r,n.treeEdgeStyle,["stroke","stroke-width"]);this._drawPath(),Object.keys(a).length>0&&(t.update(a),n.treeEdgeStyle=d()(r))}},{key:"destroy",value:function(){this.element.destroy(),this.clipPath&&this.clipPath.destroy()}}]),n}();c()(Kh,"className","TreeEdge"),c()(Kh,"configName","treeEdge"),c()(Kh,"zIndex",1);var Qh=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var e=this.cell,t=new xr;this.group=t,e.delegateEvent(t,"click","collapsedbutton:click"),e.collapsedButtonElement=t}},{key:"_drawHotArea",value:function(){var e=this.group,t=this.bbox,n=new Lr;n.update({fill:"rgba(255, 255, 255, 0)",d:wn(-12,-12,t.width+24,t.height+24)}),e.add(n),n.toBack()}},{key:"_getCurrent",value:function(e){var t=this.cell,n=t.computedProps.treeEdge,r=t.x,a=t.y,i=t.width,o=t.height;return e+r+a+n.stroke+i+o}},{key:"_setBBox",value:function(){var e,t,n=this.direction,r=this.circleButtonWidth,a=this.circleButtonHeight;switch(n){case"top":case"bottom":e=r,t=a+8;break;default:t=a,e=r+8}this.bbox={width:e,height:t}}},{key:"drawCollapse",value:function(){var e,t=this.cell,n=this.group,r=this.direction,a=t.computedProps,i=t.diagram,o=t.graphicGroup,c=i.viewport.zoom;switch(n.clear(),o.add(n),r){case"top":e=-Math.PI/2;break;case"bottom":e=Math.PI/2;break;case"left":e=Math.PI;break;default:e=0}var l=["border-radius: 16px","width: ".concat(16,"px"),"height: ".concat(16,"px"),"cursor: pointer","background: white","border: 3px solid ".concat(a.treeEdge.stroke),"display: inline-block"];W.ua.macos||l.unshift("position: absolute");var s=[1,0,0,0,1,0,0,0,1];w.a.translate(s,s,[8,8,1]),w.a.rotate(s,s,e),w.a.translate(s,s,[-8,-8,1]);var u=new Nr({html:'<span style="'.concat(l.join(";"),'" data-diagram-collapsed-button=true data-testid="diagram-collapsed-button"></span>'),x:0,y:0,width:0,height:0,matrix:s});u.css({"line-height":"normal"}),n.add(u);var d=u.htmlContainer.querySelector("span"),h=d.getBoundingClientRect(),f=h.width/c,p=h.height/c;u.update({width:f,height:p}),d.addEventListener("mouseenter",(function(){d.style.background=a.treeEdge.stroke,d.style["background-repeat"]="no-repeat",d.style["background-position"]="1px 1px",d.style["background-image"]="url(".concat("https://gw.alipayobjects.com/zos/bmw-prod/c8f8bbfd-df13-421d-85f1-e310d67c89fc.svg",")")})),d.addEventListener("mouseout",(function(){d.style.background="white",d.style["background-image"]="none"})),this.circleButtonWidth=f,this.circleButtonHeight=p,this._setBBox(),this._drawTail(),this._drawHotArea(),this._updatePosition(),this.current=this._getCurrent("collapseButton")}},{key:"drawExpand",value:function(){var e=this.cell,t=this.group,n=e.computedProps,r=e.graphicGroup,a=e.diagram,i=n.treeEdge.stroke;t.clear(),r.add(t);var o=-1;e.deepEach((function(){o++}));var c=a.font.measureTextLength(String(o))+8,l=Ma(i),s=new $r({x:4,y:3,text:"".concat(o),fill:l,"dominant-baseline":"hanging"});s.dataset({diagramCollapsedButton:!0}),s.css({fontFamily:"system-ui",fontSize:"12px",cursor:"pointer"});var u=new Fr({x:0,y:0,rx:8,width:c,height:16,fill:"".concat(i)});t.add(s),s.before(u),this.circleButtonWidth=c,this.circleButtonHeight=16,this._setBBox(),this._drawTail(),this._drawHotArea(),this._updatePosition(),this.current=this._getCurrent("expandButton")}},{key:"_drawTail",value:function(){var e,t=this.group,n=this.circleButtonWidth,r=this.circleButtonHeight,a=this.direction,i=this.cell,o=i.computedProps,c={x:n/2,y:r/2};switch(a){case"top":e="M".concat(c.x," ").concat(r," L").concat(c.x," ").concat(r+8);break;case"bottom":e="M".concat(c.x," 0 L").concat(c.x," -").concat(8);break;case"left":e="M".concat(n," ").concat(c.y," L").concat(n+8," ").concat(c.y);break;default:e="M0 ".concat(c.y," L-").concat(8," ").concat(c.y)}t.add(new Lr({d:e,stroke:o.treeEdge.stroke,"stroke-width":i.getTreeEdgeStrokeWidth()}))}},{key:"_updatePosition",value:function(){var e,t,n=this.cell,r=this.group,a=this.direction,i=this.bbox,o=n.border,c=i.width,l=i.height;switch(a){case"top":e=n.width/2-c/2,t=-l;break;case"bottom":e=n.width/2-c/2,t=n.height+8;break;case"left":t="line"===o.shape?n.height-l/2:n.height/2-l/2,e=-c;break;default:t="line"===o.shape?n.height-l/2:n.height/2-l/2,e=n.width+8}r.update({matrix:[1,0,0,0,1,0,e,t,1]})}},{key:"drawPosition",value:function(){this.draw()}},{key:"updateState",value:function(){this.draw()}},{key:"_setDirection",value:function(){var e=this.cell,t=e.downLayoutType,n=e.downDirection;"standard"===t?0===n[0]?Math.sign(-1===n[1])?this.direction="top":this.direction="bottom":Math.sign(-1===n[0])?this.direction="left":this.direction="right":"indent"===t?-1===Math.sign(n[1])?this.direction="top":this.direction="bottom":"timeline"===t&&-1===Math.sign(n[0])?this.direction="left":this.direction="right"}},{key:"draw",value:function(){var e=this.cell,t=this.group,n=this.current,r=e.state;this._setDirection(),e.canExpand()?n!==this._getCurrent("expandButton")&&this.drawExpand():e.canCollapse()&&r.collapsedButtonVisible?n!==this._getCurrent("collapseButton")&&this.drawCollapse():("none"!==n&&t.remove(),this.current=this._getCurrent("none"))}},{key:"destroy",value:function(){this.group.destroy()}}]),n}();function Jh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Qh,"className","CollapsedButton"),c()(Qh,"configName","bollapsedButton"),c()(Qh,"zIndex",1);var ef=function(e){j()(n,fs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t=1===e.depth?400:"normal",r=1===e.depth?'PingFangSC-Medium, "PingFang SC"':'PingFangSC-Regular, "PingFang SC"',a=e.model&&e.model.defaultContentStyle||{};I()(A()(n.prototype),"init",this).call(this,$h({textareaContentStyleSheets:[{query:"self",css:$h({outline:"none","white-space":"normal","letter-spacing":"0.1px","font-size":"".concat(14,"px"),"font-weight":"".concat(t),"font-family":r,"line-height":"1.74","word-break":"break-word",color:"#262626"},a)}]},e))}},{key:"getPadding",value:function(){var e,t=this.model;return e=1===this.depth?"line"===this.border.shape?[2,8,2,8]:[6,12,6,12]:this.depth>1?"line"===this.border.shape?[2,8,2,8]:[6,8,6,8]:I()(A()(n.prototype),"getPadding",this).call(this),t.note&&(e[1]/=2),e}},{key:"isAbstract",get:function(){return this.model.abstract}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{collapsedButton:{},border:{outer:0,radius:3,shape:"line",fill:"transparent"},treeEdge:{},Subcells:[Kh,Qh]})}}]),n}();c()(ef,"className","MindmapCell");var tf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),c()(this,"zNodes",[]),c()(this,"options",{}),this.options=t,Object.assign(this,t)}return g()(e,[{key:"getHGap",value:function(e){return 20}},{key:"getVGap",value:function(e){return 20}},{key:"getAGap",value:function(e){return 48}},{key:"beforeInsert",value:function(e){var t=this.zNodes;e.isSubTree?t.unshift.apply(t,N()(e.zNodes)):t.unshift(e)}},{key:"getAxisNorm",value:function(e,t,n){var r=e.isSubTree?"t":"";return{axis:r+t,norm:r+n}}},{key:"getAxisNormValue",value:function(e,t,n){var r=e.isSubTree?"t":"",a=r+t,i=r+n;return{coord:null==e[a]?e[t]:e[a],normValue:null==e[i]?e[n]:e[i]}}},{key:"getPureAxisNormValue",value:function(e,t,n){return{coord:e[t],normValue:e[n]}}},{key:"updateParentMaxDepth",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent;r;)r.maxDepth=n?Math.max(r.maxDepth,t):Math.min(r.maxDepth,t),r=r.parent}},{key:"setNodeCoord",value:function(e,t,n){if(e.isSubTree){var r="t"+t,a=e[r]-n;St(e,(function(e){e.isSubTree&&(e[r]-=a),e[t]-=a}))}else e[t]=n}},{key:"preOrder",value:function(e,t,n){var r=this,a=e.children,i=void 0===a?[]:a;t(e,n),!i||e.isSubTree&&n||e.collapsed||i.forEach((function(n){r.preOrder(n,t,e)}))}},{key:"preOrderWithOutSelf",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],c=e.children,l=void 0===c?[]:c;if(l&&(!e.isSubTree||!n)&&!e.collapsed){var s=o.concat(l.filter((function(e){return!e.abstract})).length);l.forEach((function(n,o){var c=i.concat(o);t(n,e,o,l,a,c,s),r.preOrderWithOutSelf(n,t,e,a+1,c,s)}))}}},{key:"postOrder",value:function(e,t,n){var r=this,a=e.children,i=void 0===a?[]:a;!i||e.isSubTree&&n||e.collapsed||i.forEach((function(n){r.postOrder(n,t,e)})),t(e,n)}},{key:"postOrderWithOutSelf",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],c=e.children,l=void 0===c?[]:c;if(l&&(!e.isSubTree||!n)&&!e.collapsed){var s=o.concat(l.filter((function(e){return!e.abstract})).length);l.forEach((function(n,o){var c=i.concat(o);r.postOrderWithOutSelf(n,t,e,a+1,c,s),t(n,e,o,l,a,c,s)}))}}},{key:"orderByGroupWithoutSelf",value:function(e,t,n){var r=this,a=new Map,i=n.initInfo,o=n.enterGroup,c=n.exitGroup,l=n.beforecallback,s=n.callback,u=n.aftercallback;return e.call(this,t,(function(e,t,n,d,h,f,p){if(0===n){var m=d.filter((function(e){return e.abstract})),y=m.length,g=d.length-y,v=[];m.forEach((function(e){var t=r.getAbstractLocateString(e,g);v.push(t)}));var b={areasQueue:v,nowGroup:null,groupIndex:-1,childrenLength:g,abstractLength:y,nowGroupData:void 0};a.set(t,Object.assign(b,i(b,e,t,n,d,h,f,p)))}var x=a.get(t);if(l&&n<x.childrenLength&&l(x,e,t,n,d,h,f,p),!x.nowGroup){var k=x.areasQueue[0]?r.parseAbstractLocateString(x.areasQueue[0]):void 0;k&&n===k[0]&&(x.nowGroup=k,x.areasQueue.shift(),x.groupIndex++,o&&(x.nowGroupData=o(x,e,t,n,d,h,f,p)))}s&&n<x.childrenLength&&s(x,e,t,n,d,h,f,p),!x.nowGroup||n!==x.nowGroup[0]+x.nowGroup[1]-1&&n!==x.childrenLength-1||(c&&c(x,e,t,n,d,h,f,p),x.nowGroup=null,x.nowGroupData=void 0),u&&n<x.childrenLength&&u(x,e,t,n,d,h,f,p)})),a}},{key:"postOrderByGroupWithoutSelf",value:function(e,t){return this.orderByGroupWithoutSelf(this.postOrderWithOutSelf,e,t)}},{key:"preOrderByGroupWithoutSelf",value:function(e,t){return this.orderByGroupWithoutSelf(this.preOrderWithOutSelf,e,t)}},{key:"deeperAllLast",value:function(e,t,n){for(var r=e+1;r<t.length;r++)if(t[r]!==n[r]-1)return!1;return!0}},{key:"makeAbstractBreadthOffset",value:function(e,t,n,r,a,i,o,c){var l="x"===e?"x":"y",s="x"===e?"w":"h",u=this.getAxisNorm(i,l,s),d=u.norm,h=u.axis,f=i[d],p=Math.abs(c-o),m=(c+o)/2,y=i[s]/2+i[l]-i[h],g=f-y,v=t?Math.max(y-p/2,0):Math.min(p/2-g,0),b=m+v-y;if(this.setNodeCoord(i,l,b),0!==v)for(var x=r[0];x<r[0]+r[1];x++){var k=a[x];"x"===l?this.move(k,v,0):this.move(k,0,v)}var w=t?Math.max(c+v,i[d]+i[h]):Math.min(c+v,i[h]),C=Math.abs(w-o);return i.al=p,i.ad=l,i.ap=n?1:-1,i.breadthPositive=t?1:-1,[v,C,w]}},{key:"move",value:function(e,t,n){St(e,(function(e){e.x+=t,e.y+=n,e.isSubTree&&(e.tx+=t,e.ty+=n)}))}},{key:"moveX",value:function(e,t){St(e,(function(e){e.x+=t,e.isSubTree&&(e.tx+=t)}))}},{key:"moveY",value:function(e,t){St(e,(function(e){e.y+=t,e.isSubTree&&(e.ty+=t)}))}},{key:"layout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.constructor,r=n,a=r.VAILD_DIRECTION_ANGLES,i=e.directionAngle;this.zNodes=t,a.some((function(e){return mi(e,i)}))?(this.setKeys(e),this.normalize(e),this.setCoord(e),this.setZIndex(e)):console.warn("The layout does not support the direction")}},{key:"getAbstractLocateString",value:function(e,t){var n=e.start,r=void 0===n?0:n,a=e.end,i=void 0===a?0:a,o=Math.max(0,r);return o+":"+(Math.min(t,i)-o+1)}},{key:"parseAbstractLocateString",value:function(e){return e.split(":").map((function(e){return parseInt(e)}))}},{key:"setKeys",value:function(e){}},{key:"normalize",value:function(e){}},{key:"setCoord",value:function(e){}},{key:"setZIndex",value:function(e){}}]),e}();c()(tf,"VAILD_DIRECTION_ANGLES",[]),c()(tf,"QUADRANTS",4);var nf=function(e){j()(n,tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"depthAxis",void 0),c()(P()(e),"depthNorm",void 0),c()(P()(e),"breadthGap",void 0),c()(P()(e),"depthGap",void 0),c()(P()(e),"breadthAxis",void 0),c()(P()(e),"breadthNorm",void 0),c()(P()(e),"isVertical",!1),c()(P()(e),"isPositive",void 0),e}return g()(n,[{key:"setKeys",value:function(e){var t=e.directionAngle,n=mi(t,Math.PI/2)||mi(t,3*Math.PI/2);n?(this.breadthAxis="x",this.breadthNorm="w",this.breadthGap="hgap",this.depthAxis="y",this.depthNorm="h",this.depthGap="vgap"):(this.breadthAxis="y",this.breadthNorm="h",this.breadthGap="vgap",this.depthAxis="x",this.depthNorm="w",this.depthGap="hgap"),mi(t,0)||mi(t,Math.PI/2)?this.isPositive=!0:this.isPositive=!1,this.isVertical=n}},{key:"normalize",value:function(e){var t=this,n=this.isVertical;this.preOrderWithOutSelf(e,(function(e,t){e.ancestors=[t].concat(t.ancestors||[])})),this.preOrder(e,(function(e){var r={node:e,isVertical:n};e.vgap=t.getVGap(r),e.hgap=t.getHGap(r)}))}},{key:"setCoord",value:function(e){this._setDepth(e),this._setBreadth(e)}},{key:"_setDepth",value:function(e){var t=this,n=this.depthAxis,r=this.depthNorm,a=this.depthGap,i=this.isPositive,o=i?1:-1;this.preOrderWithOutSelf(e,(function(e,c){var l=t.getAxisNorm(e,n,r).norm;if(!e.abstract){var s,u=e[a],d=(s=i?c[n]+c[r]+u:c[n]-e[l]-u)+(o+1)/2*e[l];e.maxDepth=d,t.updateParentMaxDepth(e,d,i),t.setNodeCoord(e,n,s)}})),this.postOrderByGroupWithoutSelf(e,{initInfo:function(){return{maxDepth:void 0}},callback:function(e,t){var n=t.maxDepth,r=void 0===n?0:n,a=e.nowGroupData;e.nowGroup&&(e.nowGroupData=a?i?Math.max(a,r):Math.min(a,r):r)},exitGroup:function(e,a,c,l,s){var u=e.childrenLength,d=e.groupIndex,h=e.nowGroupData,f=void 0===h?0:h,p=s[u+d],m=t.getAxisNorm(p,n,r).norm,y=i?f+o*t.getAGap():f+o*t.getAGap()-p[m];t.setNodeCoord(p,n,y);var g=y+(o+1)/2*p[m];t.updateParentMaxDepth(p,g,i)}})}},{key:"_setBreadth",value:function(e){var t,n=this,r=this.breadthAxis,a=this.breadthNorm,i=this.breadthGap,o=this.isVertical,c=this.isPositive,l=e.x,s=e.y;this.postOrderByGroupWithoutSelf(e,{initInfo:function(e,t,n,r,a){return{smin:0,emax:0}},beforecallback:function(e,c,l,s,u){var d,h,f,p=n.getAxisNorm(c,r,a),m=p.axis,y=p.norm,g=c.children,v=void 0===g?[]:g,b=c.abstract;if(void 0===t)h=0;else if(0===v.length||c.collapsed||c.isSubTree){if(b)return;var x=n.getBreadthGap(c,t);h=t.maxBreadth+x}else{h=n.getBreadthByChildren({children:v.filter((function(e){return!e.abstract})),breadthAxis:r,node:c,breadthNorm:a,norm:y,isVertical:null!=o&&o}),c.minBreadth=Math.min(c.minBreadth,h);var k=l.children[l.children.indexOf(c)-1];if(k){var w=k.maxBreadth+k[i]-c.minBreadth;w>0&&(f=w)}}n.setNodeCoord(c,r,h),f&&(o?n.move(c,f,0):n.move(c,0,f),c.maxBreadth+=f);var C=c[m]+c[y];c.maxBreadth=Math.max(C,c.maxBreadth||0);var E,O=c[m];c.minBreadth=Math.min(O,null!==(d=c.minBreadth)&&void 0!==d?d:1/0),0===s&&(l.minBreadth=Math.min(O,c.minBreadth,null!==(E=l.minBreadth)&&void 0!==E?E:1/0))},enterGroup:function(e,t,n,r,a){e.smin=t.minBreadth},exitGroup:function(e,t,a,i,o){e.emax=t.maxBreadth;var l=e.childrenLength,s=e.groupIndex,u=e.smin,d=e.emax,h=e.nowGroup,f=o[l+s],p=n.makeAbstractBreadthOffset(r,!0,c,h,o,f,u,d),m=b()(p,3);m[0],m[1];var y=m[2];t.maxBreadth=y},aftercallback:function(e,n,r,a,i){var o;t=n,a===e.childrenLength-1&&(r.maxBreadth=r.maxBreadth=Math.max(t.maxBreadth,null!==(o=r.maxBreadth)&&void 0!==o?o:-1/0))}}),e[r]=this.getBreadthByChildren({children:e.children.filter((function(e){return!e.abstract})),breadthAxis:r,node:e,breadthNorm:a,norm:a,isVertical:o}),o?this.move(e,l-e.x,0):this.move(e,0,s-e.y)}},{key:"getBreadthGap",value:function(e,t){var n,r,a=this.breadthGap;if(e.parent===t.parent)return t[a];e.depth<t.depth?(n=t,r=e):(n=e,r=t);for(var i=n.depth-r.depth,o=0;o<r.ancestors.length;o++){var c=o+i;if(r.ancestors[o]===n.ancestors[c])return n.ancestors[c-1][a]}}},{key:"getBreadthByChildren",value:function(e){var t=e.children,n=e.breadthAxis,r=e.node,a=e.breadthNorm,i=e.isVertical,o=t.length,c=this.getPureAxisNormValue(t[0],n,a),l=this.getPureAxisNormValue(t[o-1],n,a),s=this.getPureAxisNormValue(r,n,a);if(!i&&t[0].border&&r.border){if("line"===t[0].border.shape&&"line"===r.border.shape)return(c.coord+c.normValue+l.coord+l.normValue)/2-s.normValue;if("line"===t[0].border.shape&&"line"!==r.border.shape)return(c.coord+c.normValue+l.coord+l.normValue-s.normValue)/2;if("line"!==t[0].border.shape&&"line"===r.border.shape&&t[0]===t[o-1])return c.coord+c.normValue/2-s.normValue}return(c.coord+l.coord+l.normValue-s.normValue)/2}},{key:"setZIndex",value:function(e){var t=this,n=this.breadthAxis,r=this.breadthNorm;this.preOrder(e,(function(a){var i=a.children;if(e!==a&&t.beforeInsert(a),i&&!a.collapsed){var o=a[n]+a[r]/2;i.sort((function(e,t){return Math.abs(e[n]+e[r]-o)-Math.abs(t[n]+t[r]-o)}))}}))}},{key:"getHGap",value:function(e){var t=e.isVertical,n=e.node.depth;return t?1===n?48:24:n>1?48:64}},{key:"getVGap",value:function(e){var t,r=e.isVertical,a=e.node,i=a.depth,o=a.border;return o?(r?t=64:1===i?t=24:(t=2===i?10:8,"line"!==o.shape&&(t*=2)),t):I()(A()(n.prototype),"getVGap",this).call(this)}}]),n}();c()(nf,"className","Standard"),c()(nf,"VAILD_DIRECTION_ANGLES",[0,Math.PI/2,Math.PI,3*Math.PI/2]),c()(nf,"QUADRANTS",2);var rf=function(e){j()(n,tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"breadthAxis","y"),c()(P()(e),"depthAxis","x"),c()(P()(e),"breadthNorm","h"),c()(P()(e),"depthNorm","w"),c()(P()(e),"mainGap","vgap"),c()(P()(e),"secondaryGap","hgap"),c()(P()(e),"isMainPositive",!1),c()(P()(e),"isPositive",!1),e}return g()(n,[{key:"setKeys",value:function(e){var t=e.directionAngle,n=this.constructor.MAIN_AXIS,r=!1,a=!1;mi(t,Math.PI/4)?(r=!0,a=!0):mi(t,3*Math.PI/4)?(r=!1,a=!0):mi(t,5*Math.PI/4)?(r=!1,a=!1):mi(t,7*Math.PI/4)&&(r=!0,a=!1),"x"===n?(this.breadthAxis="x",this.depthAxis="y",this.breadthNorm="w",this.depthNorm="h",this.mainGap="hgap",this.secondaryGap="vgap",this.isMainPositive=r,this.isPositive=a):(this.breadthAxis="y",this.depthAxis="x",this.breadthNorm="h",this.depthNorm="w",this.mainGap="vgap",this.secondaryGap="hgap",this.isMainPositive=a,this.isPositive=r)}},{key:"normalize",value:function(e){var t=this;this.preOrder(e,(function(e){var n={node:e};e.vgap=t.getVGap(n),e.hgap=t.getHGap(n)}))}},{key:"setCoord",value:function(e){this._setMainCoord(e),this._setSecondaryCoord(e)}},{key:"_setMainCoord",value:function(e){var t=this,n=this.breadthAxis,r=this.breadthNorm,a=this.mainGap,i=this.isMainPositive,o=this.isPositive,c=e[n],l=e[r],s=[];this.preOrderByGroupWithoutSelf(e,{initInfo:function(){return{smin:0}},beforecallback:function(e,o){var s,u=t.getAxisNorm(o,n,r).norm,d=o[a],h=o[u];c=s=i?c+l+d:c-h-d,l=h,t.setNodeCoord(o,n,s)},enterGroup:function(e){e.smin=i?c:c+l},exitGroup:function(e,t,n,r,a,i){var o=e.nowGroup,c=a[e.childrenLength+e.groupIndex];s.unshift({smin:e.smin,depth:i,siblings:a,nowGroup:o,abstractNode:c})},aftercallback:function(e,r,a,u,d,h,f,p){if(!r.children||0===r.children.length||r.isSubTree)for(;s.length>0;){var m=s[0],y=m.nowGroup,g=m.siblings,v=m.smin,x=m.depth,k=m.abstractNode;if(!t.deeperAllLast(x,f,p))break;s.shift();var w=i?c+l:c,C=t.makeAbstractBreadthOffset(n,i,o,y,g,k,v,w),E=b()(C,3);E[0];var O=E[1],P=E[2];c=i?v:P,l=O}}})}},{key:"_setSecondaryCoord",value:function(e){var t=this,n=this.depthAxis,r=this.depthNorm,a=this.secondaryGap,i=this.isPositive,o=i?1:-1;this.preOrderWithOutSelf(e,(function(e,c){var l,s=t.getAxisNorm(e,n,r).norm,u=e[a];if(!e.abstract){var d=(l=i?c[n]+c[r]/2+u:c[n]+c[r]/2-e[s]-u)+(o+1)/2*e[s];e.maxDepth=d,t.updateParentMaxDepth(e,d,i),t.setNodeCoord(e,n,l)}})),this.postOrderByGroupWithoutSelf(e,{initInfo:function(){return{maxDepth:void 0}},callback:function(e,t){var n=t.maxDepth,r=void 0===n?0:n,a=e.nowGroupData;e.nowGroup&&(e.nowGroupData=a?i?Math.max(a,r):Math.min(a,r):r)},exitGroup:function(e,a,c,l,s){var u=e.childrenLength,d=e.groupIndex,h=e.nowGroupData,f=void 0===h?0:h,p=s[u+d],m=t.getAxisNorm(p,n,r).norm,y=i?f+o*t.getAGap():f+o*t.getAGap()-p[m];t.setNodeCoord(p,n,y);var g=y+(o+1)/2*p[m];t.updateParentMaxDepth(p,g,i)}})}},{key:"setZIndex",value:function(e){var t=this,n=this.breadthAxis,r=this.breadthNorm;this.preOrder(e,(function(a){var i=a.children;if(e!==a&&t.beforeInsert(a),i&&!a.collapsed){var o=a[n]+a[r]/2;i.sort((function(e,t){return Math.abs(e[n]+e[r]-o)-Math.abs(t[n]+t[r]-o)}))}}))}},{key:"getHGap",value:function(e){return 16}},{key:"getVGap",value:function(e){var t=e.node,n=t.parent;return n&&t===n.children[0]&&-1===t.upSignY?24:8}}]),n}();function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function of(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?af(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(rf,"className","Indent"),c()(rf,"VAILD_DIRECTION_ANGLES",[Math.PI/4,3*Math.PI/4,5*Math.PI/4,7*Math.PI/4]),c()(rf,"QUADRANTS",4),c()(rf,"MAIN_AXIS","y");var cf=function(e){j()(n,tf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(this,n),e=t.call(this,of({},r)),c()(P()(e),"breadthAxis","x"),c()(P()(e),"depthAxis","y"),c()(P()(e),"breadthNorm","w"),c()(P()(e),"depthNorm","h"),c()(P()(e),"mainGap","hgap"),c()(P()(e),"secondaryGap","vgap"),c()(P()(e),"secondaryDownSign","downSignY"),c()(P()(e),"isMainPositive",!0),c()(P()(e),"hgap1",40),c()(P()(e),"hgap2",32),c()(P()(e),"vgap1",0),c()(P()(e),"vgap2",0),c()(P()(e),"compact",!1),e}return g()(n,[{key:"getAlign",value:function(e){return e.node.cell.getTimelineLayoutAlign()}},{key:"normalize",value:function(e){var t=this;this.preOrder(e,(function(e){var n={node:e};e.align=t.getAlign(n)}))}},{key:"setKeys",value:function(e){var t=e.directionAngle;mi(t,0)?(this.breadthAxis="x",this.depthAxis="y",this.breadthNorm="w",this.depthNorm="h",this.mainGap="hgap",this.secondaryGap="vgap",this.secondaryDownSign="downSignY",this.isMainPositive=!0):mi(t,Math.PI)&&(this.breadthAxis="x",this.depthAxis="y",this.breadthNorm="w",this.depthNorm="h",this.mainGap="hgap",this.secondaryGap="vgap",this.secondaryDownSign="downSignY",this.isMainPositive=!1)}},{key:"setCoord",value:function(e){this._setMainCoord(e),this._setSecondaryCoord(e)}},{key:"_setMainCoord",value:function(e){var t=this,n=this.secondaryDownSign,r=this.breadthAxis,a=this.breadthNorm,i=this.mainGap,o=this.isMainPositive,c=this.compact,l="".concat(i,"1"),s="".concat(i,"2"),u=o?1:-1,d=e[r];o&&(d+=e[a]);var h=d,f=d,p=d,m=[];this.preOrderByGroupWithoutSelf(e,{initInfo:function(e,t,n,r,a,i,o,c){return{smin:0}},beforecallback:function(e,i,m,y,g,v,b,x){var k,w=t.getAxisNorm(i,r,a).norm,C=p-h,E=p-f;-1===i[n]&&c?(u*C>0?(k=t[l],d=p):(k=t[s],d=h),o?(h=(d+=k)+i[w],p=d+i[a]):(d=d-k-i[w],h=d,p=d+(i[w]-i[a]))):(u*E>0?(k=t[l],d=p):(k=t[s],d=f),o?(f=(d+=k)+i[w],p=d+i[a]):(d=d-k-i[w],f=d,p=d+(i[w]-i[a]))),t.setNodeCoord(i,r,d)},enterGroup:function(e,n){var i=t.getAxisNorm(n,r,a).norm;e.smin=o?d:d+n[i]},exitGroup:function(e,t,n,r,a,i){var o=e.nowGroup,c=a[e.childrenLength+e.groupIndex];m.unshift({smin:e.smin,depth:i,siblings:a,nowGroup:o,abstractNode:c})},aftercallback:function(e,n,a,i,c,l,s,u){if(!n.children||0===n.children.length||n.isSubTree)for(;m.length>0;){var d=m[0],h=d.nowGroup,y=d.siblings,g=d.smin,v=d.depth,x=d.abstractNode;if(!t.deeperAllLast(v,s,u))break;m.shift();var k=x.downDirection,w=(void 0===k?[0,1]:k)[1]>=0,C=f,E=t.makeAbstractBreadthOffset(r,o,w,h,y,x,g,C),O=b()(E,3),P=O[0];O[1];var M=O[2];f=M,p+=P}}})}},{key:"_setSecondaryCoord",value:function(e){var t,n,r=this,a=this.depthAxis,i=this.depthNorm,o=e.children,c=void 0===o?[]:o,l=a.toUpperCase(),s=this["move".concat(l)].bind(this);c.forEach((function(r,o){var l=0===o?e:c[o-1],u=r.align;if(!r.abstract){"b"===u[0]?t=l[a]+l[i]:"c"===u[0]&&(t=l[a]+l[i]/2),"c"===u[1]?n=function(e){return t-e[i]/2}:"b"===u[1]&&(n=function(e){return t-e[i]});var d=n(r)-r[a];s(r,d)}})),this.preOrderByGroupWithoutSelf(e,{initInfo:function(){return{}},callback:function(e,t,n,o,c){var l=e.nowGroupData,s=e.nowGroup,u=c[e.childrenLength+e.groupIndex].downDirection,d=(void 0===u?[0,1]:u)[1]>=0,h=r.getAxisNorm(t,a,i),f=h.norm,p=h.axis;if(s){var m=d?t[p]+t[f]:t[p];e.nowGroupData=l?d?Math.max(l,m):Math.min(l,m):m}},exitGroup:function(e,t,n,o,c){var l=e.childrenLength,s=e.groupIndex,u=e.nowGroupData,d=void 0===u?0:u,h=c[l+s],f=h.downDirection,p=(void 0===f?[0,1]:f)[1]>=0,m=p?1:-1,y=r.getAxisNorm(h,a,i).norm,g=p?d+m*r.getAGap():d+m*r.getAGap()-h[y];r.setNodeCoord(h,a,g)}})}},{key:"setZIndex",value:function(e){var t=this,n=this.breadthAxis,r=this.breadthNorm;this.preOrder(e,(function(a){var i=a.children;if(e!==a&&t.beforeInsert(a),i&&!a.collapsed){var o=a[n]+a[r]/2;i.sort((function(e,t){return Math.abs(e[n]+e[r]-o)-Math.abs(t[n]+t[r]-o)}))}}))}}]),n}();function lf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(cf,"className","Timeline"),c()(cf,"VAILD_DIRECTION_ANGLES",[0,Math.PI]),c()(cf,"QUADRANTS",2);var uf=function(e){j()(n,fs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t=e.model.defaultContentStyle||{};I()(A()(n.prototype),"init",this).call(this,sf({textareaContentStyleSheets:[{query:"self",css:sf({"letter-spacing":"normal","font-size":"18px","font-family":'PingFangSC-Medium, "PingFang SC"',"line-height":"1.74","word-break":"break-word",outline:"none",color:"white"},t)}]},e)),this.initLayoutEngine()}},{key:"minWidth",get:function(){return 52}},{key:"canCollapse",value:function(){return!1}},{key:"getPadding",value:function(){return[6,this.model.note?8:16,6,16]}},{key:"_createLayoutModel",value:function(){var e=this.cellMap,t=this.model,n=[],r=Tt(t,(function(t){var r,a,i,o,c,l,s=e[t.id],u={x:s.x,y:s.y,w:null!==(r=s.width)&&void 0!==r?r:10,h:null!==(a=s.height)&&void 0!==a?a:10,layout:s.layout.type,direction:null!==(i=s.layout.direction)&&void 0!==i?i:[1,0],quadrantConstraint:s.layout.quadrantConstraint,quadrant:null!==(o=s.layout.quadrant)&&void 0!==o?o:1,collapsed:null!==(c=s.collapsed)&&void 0!==c&&c,border:{shape:s.border.shape},cell:s,abstract:null!==(l=s.isAbstract)&&void 0!==l&&l};return t.abstract&&(u.abstract=!0,u.start=t.start,u.end=t.end,u.layout="standard",u.direction=[1,0],u.quadrantConstraint=[1]),"timeline"===u.layout&&n.push(u),u}));return n.forEach((function(e){e.children.forEach((function(t,n){t.abstract||(t.layout&&!Va("timeline",t.layout)||(t.layout="indent",t.direction=[1,1],0===e.direction[1]?t.quadrantConstraint=n%2==0?[4]:[1]:t.quadrantConstraint=n%2==0?[1]:[2]),t.children&&t.children.forEach((function(t){t.layout||(t.layout="standard",t.direction=[1,0],-1===e.direction[0]?t.quadrantConstraint=[2]:t.quadrantConstraint=[1])})))}))})),r}},{key:"initLayoutEngine",value:function(){this.layoutHelper=new Vs({beforeLayoutAdjust:function(e){e.needAfterAdjustedNodes=[],Rt(e,(function(t){"timeline"!==t.parent.layout&&t.collapsed&&(1===t.downSignY?t.h+=24:-1===t.downSignY?(t.h+=24,e.needAfterAdjustedNodes.push({node:t,key:"y",value:24})):1===t.downSignX?t.w+=24:-1===t.downSignX&&(t.w+=24,e.needAfterAdjustedNodes.push({node:t,key:"x",value:24})))}))},afterLayoutAdjust:function(e){e.needAfterAdjustedNodes.forEach((function(e){var t=e.node,n=e.key,r=e.value;t[n]+=r}))},algorithms:{timeline:new cf,standard:new nf,indent:new rf}})}},{key:"_layoutPosition",value:function(e){e.forEach((function(e){var t=e.cell;t.x=e.x||0,t.y=e.y||0}))}},{key:"_layoutZIndex",value:function(e){var t=this,n=this.diagram,r=n.rootGroup;n.contentEditor.isBegin||e.forEach((function(e,n){var a=e.cell;a.zIndex=n,a!==t&&r.insertBefore(a.graphicGroup,t.graphicGroup)}))}},{key:"_layoutdrectionAngle",value:function(e){e.forEach((function(e){e.cell.upDirection=e.upDirection,e.cell.downDirection=e.downDirection,e.cell.upLayoutType=e.upLayoutType,e.cell.downLayoutType=e.downLayoutType,e.cell.layoutQuadrantConstraint=e.quadrantConstraint||[1],e.cell.downSignX=e.downSignX,e.cell.downSignY=e.downSignY,e.cell.upSignX=e.upSignX,e.cell.upSignY=e.upSignY,e.cell.breadthPositive=e.breadthPositive,e.cell.ad=e.ad,e.cell.ap=e.ap,e.cell.al=e.al}))}},{key:"executeLayout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=this.layoutHelper,n=this._createLayoutModel();t.model=n,t.execute();var r=[],a=t.tree;St(a,(function(e){r.push(e)})),this._layoutPosition(r,e),this._layoutZIndex(a.zNodes),this._layoutdrectionAngle(r)}},{key:"destroy",value:function(){this.layoutHelper.destroy(),I()(A()(n.prototype),"destroy",this).call(this)}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{border:{outer:0,radius:4,shape:"rect",fill:"#596086","stroke-width":2,stroke:"transparent"},textarea:{className:"lake-diagram-mindmap-root"},layout:{type:"standard",direction:[1,0]},treeEdge:{stroke:"#959EA6"},tapered:!1,rainbow:!0,note:{width:20,height:20,padding:[0,8,0,0]}})}}]),n}();c()(uf,"className","MindmapStem");var df={treeEdge:!0,layout:!0},hf=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"beforedraw",(function(t){t&&"remove"!==t.action&&(function(e,t){var n=e.stems.filter((function(e){return e.isMindmap}));n.length>0&&(t.inherit(df,n),n.forEach((function(e){e.deepEach((function(t){t!==e&&t.drawInherit()}))})))}(t,e),function(e,t){if("update"===e.action){var n=e.models.filter((function(e){var n=t.find(e.id);return n&&n.isMindmap&&n.isStem}));n.length>0&&n.forEach((function(e){if(void 0!==e.tapered||void 0!==e.rainbow){var n=t.find(e.id);void 0!==e.rainbow&&(!1===e.rainbow?n.forEach((function(e){e.isAbstract||e.updateModel({treeEdge:{stroke:"#959EA6"}})})):n.forEach((function(e,t){e.isAbstract||e.updateModel({treeEdge:{stroke:ir[t%7]}})})),t.inherit(df,[n])),n.deepEachWithoutSelf((function(e){e.drawInner()}))}}))}}(t,e))}))}}]),n}();var ff=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(){var t=e.selector.selections;if(1===t.length&&t[0].isMindmap){var n=t[0];e.viewport.scrollIntoView(n)}}))}}]),n}();var pf=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"mindmapcell:mouseenter",(function(t){var n=t.cell;!e.signal.draggingMindmapCell&&n.isMindmap&&!n.model.isPlaceholder&&n.highlight()})),this.bind(e,"mindmapcell:mouseleave",(function(e){var t=e.cell;t&&t.isMindmap&&t.unHighlight()}))}}]),n}();var mf=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t;function n(){t&&t.hideCollapsedButton(),t=void 0}this.bind(e,"mindmapcell:mouseenter",(function(n){var r=n.cell;!e.signal.draggingMindmapCell&&r.isMindmap&&!r.model.isPlaceholder&&r.canCollapse()&&(r.showCollapsedButton(),t=r)})),this.bind(e,"mindmapcell:mouseleave",(function(e){var t=e.cell,r=e.nativeEvent;!t||!t.isMindmap||r.relatedTarget&&r.relatedTarget.closest('[data-lake_mindmap_add_button="true"]')||n()})),this.bind(e,"addbutton:mouseleave",(function(){n()})),this.bind(e,"aftercommandexecute",(function(e){"Expand"===e.commandName&&n()}))}}]),n}();function yf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var gf=function(){function e(){m()(this,e)}return g()(e,[{key:"createHotArea",value:function(e,t){var n=e.stem;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({child:e.child,stem:n},t)}},{key:"stem",value:function(){}},{key:"child",value:function(){}},{key:"prevSibling",value:function(){}},{key:"nextSibling",value:function(){}},{key:"betweenSibling",value:function(){}}]),e}();var vf=function(e){j()(n,gf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"stem",value:function(e){var t=e.child,n=e.hotAreas,r=e.postFix,a=t.upDirection,i=Math.sign(a[0]),o=t.children.filter((function(e){return!e.abstract})).length;0===i?(n.push(this.createHotArea(e,{minX:t.minX-50,minY:t.minY-60,maxX:t.maxX+50,maxY:(t.minY+t.maxY)/2,parent:t.id,id:t.id+"2"+r,nth:o,quadrant:2,color:"orange"})),n.push(this.createHotArea(e,{minX:t.minX-50,minY:(t.minY+t.maxY)/2,maxX:t.maxX+50,maxY:t.maxY+60,parent:t.id,id:t.id+"1"+r,nth:o,quadrant:1,color:"pink"}))):(n.push(this.createHotArea(e,{minX:t.minX-50,minY:t.minY-60,maxX:(t.minX+t.maxX)/2,maxY:t.maxY+60,parent:t.id,id:t.id+"2"+r,nth:o,quadrant:2,color:"orange"})),n.push(this.createHotArea(e,{minX:(t.minX+t.maxX)/2,minY:t.minY-60,maxX:t.maxX+50,maxY:t.maxY+60,parent:t.id,id:t.id+"1"+r,nth:o,quadrant:1,color:"pink"})))}},{key:"child",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.postFix,i=e.stem,o=n.upDirection,c=Math.sign(o[0]),l=this.createHotArea(e,{parent:n.id,id:NaN+n.id+a,nth:0,color:"green",quadrant:n.layout.quadrant,addOrder:"push",stem:i});0===c?n.minY>r.minY?Object.assign(l,{minX:n.minX,maxX:n.maxX,minY:n.maxY,maxY:n.maxY+60}):Object.assign(l,{minX:n.minX,maxX:n.maxX,minY:n.minY-60,maxY:n.minY}):n.minX>r.minX?Object.assign(l,{minX:n.maxX,minY:n.minY-0,maxX:n.maxX+100,maxY:n.maxY+0}):Object.assign(l,{minX:n.minX-100,minY:n.minY-0,maxX:n.minX,maxY:n.maxY+0}),t.push(l)}},{key:"prevSibling",value:function(e){var t,n,r=e.hotAreas,a=e.child,i=e.parent,o=e.index,c=e.postFix,l=a.upDirection,s=Math.sign(l[0]),u=this.createHotArea(e,{parent:i.id,id:void 0+a.id+i.id+c,quadrant:a.layout.quadrant,color:"yellow",nth:o});if(0===s){var d=1===a.depth&&1===a.layout.quadrant,h=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:(n=a.minX-16,h||d?n-50:n),minY:d?a.minY-50:a.minY,maxX:(a.minX+a.maxX)/2,maxY:h?a.maxY+50:a.maxY})}else{var f=1===a.depth&&1===a.layout.quadrant,p=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:f?a.minX-50:a.minX,minY:(t=a.minY-16,p||f?t-50:t),maxX:p?a.maxX+50:a.maxX,maxY:(a.minY+a.maxY)/2})}r.push(u)}},{key:"nextSibling",value:function(e){var t,n,r=e.hotAreas,a=e.child,i=e.parent,o=e.index,c=e.postFix,l=a.upDirection,s=Math.sign(l[0]),u=this.createHotArea(e,{parent:i.id,id:a.id+void 0+i.id+c,color:"red",nth:o+1,addOrder:"push",quadrant:a.layout.quadrant});if(0===s){var d=1===a.depth&&1===a.layout.quadrant,h=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:(a.minX+a.maxX)/2,minY:d?a.minY-50:a.minY,maxX:(n=a.maxX+16,h||d?n+50:n),maxY:h?a.maxY+50:a.maxY})}else{var f=1===a.depth&&1===a.layout.quadrant,p=1===a.depth&&2===a.layout.quadrant;Object.assign(u,{minX:f?a.minX-50:a.minX,minY:(a.minY+a.maxY)/2,maxX:p?a.maxX+50:a.maxX,maxY:(t=a.maxY+16,p||f?t+50:t)})}r.push(u)}},{key:"betweenSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.next,o=e.postFix,c=n.upDirection,l=Math.sign(c[0]),s=this.createHotArea(e,{parent:r.id,id:n.id+(i?i.id:void 0)+r.id+o,quadrant:n.layout.quadrant,color:"blue",nth:a+1});if(0===l){var u=1===n.depth&&1===n.layout.quadrant,d=1===n.depth&&2===n.layout.quadrant;Object.assign(s,{minX:(n.minX+n.maxX)/2,minY:2===n.layout.quadrant?Math.max(n.minY,i.minY):u?n.minY-50:n.minY,maxX:(i.minX+i.maxX)/2,maxY:1===n.layout.quadrant?Math.min(n.maxY,i.maxY):d?n.maxY+50:n.maxY})}else Object.assign(s,{minX:2===n.layout.quadrant?n.minX:1===n.depth?n.minX-50:n.minX,minY:(n.minY+n.maxY)/2,maxX:1===n.layout.quadrant?n.maxX:1===n.depth?n.maxX+50:n.maxX,maxY:(i.minY+i.maxY)/2});t.push(s)}}]),n}();var bf=function(e){j()(n,gf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"stem",value:function(e){var t=e.child,n=e.hotAreas,r=e.postFix,a=t.upDirection,i=Math.sign(a[0]),o=Math.sign(a[1]),c=this.createHotArea(e,{parent:t.id,id:t.id+"1"+r,nth:0,quadrant:1,color:"pink"});1===i&&1===o?Object.assign(c,{minX:(t.minX+t.maxX)/2,minY:(t.minY+t.maxY)/2,maxX:t.maxX+50,maxY:t.maxY+30}):-1===i&&1===o?Object.assign(c,{minX:t.minX-50,minY:(t.minY+t.maxY)/2,maxX:(t.minX+t.maxX)/2,maxY:t.maxY+30}):-1===i&&-1===o?Object.assign(c,{minX:t.minX-50,minY:t.minY-30,maxX:(t.minX+t.maxX)/2,maxY:(t.minY+t.maxY)/2}):1===i&&-1===o&&Object.assign(c,{minX:(t.minX+t.maxX)/2,minY:t.minY-30,maxX:t.maxX+50,maxY:(t.minY+t.maxY)/2}),n.push(c)}},{key:"child",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.postFix,i=this.createHotArea(e,{parent:n.id,id:NaN+n.id+a,nth:0,color:"green",quadrant:n.layout.quadrant,addOrder:"push"}),o=n.downDirection,c=1===Math.sign(o[1])?32:-32;n.minX>r.minX?Object.assign(i,{minX:n.maxX,minY:n.minY-0+c,maxX:n.maxX+50,maxY:n.maxY+0+c}):Object.assign(i,{minX:n.minX-50,minY:n.minY-0+c,maxX:n.minX,maxY:n.maxY+0+c}),t.push(i)}},{key:"prevSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.postFix,o=n.upDirection,c=Math.sign(o[1]),l=this.createHotArea(e,{parent:r.id,id:void 0+n.id+r.id+i,quadrant:n.layout.quadrant,color:"yellow",nth:a});1===c?Object.assign(l,{minX:n.minX,minY:n.minY-4,maxX:n.maxX,maxY:(n.minY+n.maxY)/2}):Object.assign(l,{minX:n.minX,minY:(n.minY+n.maxY)/2,maxX:n.maxX,maxY:n.maxY+4}),t.push(l)}},{key:"nextSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.postFix;if(!(n.children.length>1)||n.collapsed){var o=n.upDirection,c=Math.sign(o[1]),l=this.createHotArea(e,{parent:r.id,id:n.id+void 0+r.id+i,color:"red",nth:a+1,addOrder:"push",quadrant:n.layout.quadrant});1===c?Object.assign(l,{minX:n.minX,minY:(n.minY+n.maxY)/2,maxX:n.maxX,maxY:n.maxY+16}):Object.assign(l,{minX:n.minX,minY:n.minY-16,maxX:n.maxX,maxY:(n.minY+n.maxY)/2}),t.push(l)}}},{key:"betweenSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.next,o=e.postFix,c=e.stem,l=this.createHotArea(e,{parent:r.id,id:n.id+(i?i.id:void 0)+r.id+o,color:"blue",nth:a+1,stem:c}),s=(n.minY+n.maxY)/2,u=(i.minY+i.maxY)/2;Object.assign(l,{minX:n.minX,minY:Math.min(s,u),maxX:n.maxX,maxY:Math.max(s,u)}),t.push(l)}}]),n}();var xf=function(e){j()(n,gf);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"prevSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.postFix,o=n.upDirection,c=Math.sign(o[0]),l=this.createHotArea(e,{parent:r.id,id:void 0+n.id+r.id+i,quadrant:n.layout.quadrant,color:"yellow",nth:a});1===c?Object.assign(l,{minX:r.maxX,minY:r.minY,maxX:n.minX,maxY:r.maxY}):Object.assign(l,{minX:n.maxX,minY:r.minY,maxX:r.minX,maxY:r.maxY}),t.push(l)}},{key:"betweenSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.next,o=e.postFix,c=e.stem;if(i){var l=n.upDirection,s=Math.sign(l[0]),u=this.createHotArea(e,{parent:r.id,id:n.id+(i?i.id:void 0)+r.id+o,color:"blue",nth:a+1,stem:c});1===s?Object.assign(u,{minX:n.maxX,minY:n.minY,maxX:i.minX,maxY:n.maxY}):Object.assign(u,{minX:i.maxX,minY:n.minY,maxX:n.minX,maxY:n.maxY}),t.push(u)}}},{key:"nextSibling",value:function(e){var t=e.hotAreas,n=e.child,r=e.parent,a=e.index,i=e.postFix,o=e.root,c=n.upDirection,l=Math.sign(c[0]),s=this.createHotArea(e,{parent:r.id,id:n.id+void 0+r.id+i,color:"red",nth:a+1,addOrder:"push",quadrant:n.layout.quadrant,root:o});1===l?Object.assign(s,{minX:n.maxX,minY:n.minY,maxX:n.maxX+32,maxY:n.maxY}):Object.assign(s,{minX:n.minX-32,minY:n.minY,maxX:n.minX,maxY:n.maxY}),t.push(s)}}]),n}(),kf=Lr,wf={standard:new vf,indent:new bf,timeline:new xf},Cf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m()(this,e),c()(this,"diagram",void 0),c()(this,"drawHotArea",void 0),c()(this,"eventHelper",void 0),c()(this,"hotAreas",void 0),c()(this,"activated",void 0),c()(this,"maxWidth",void 0),c()(this,"maxHeight",void 0),this.diagram=t,this.drawHotArea=n,this.eventHelper=new ko,this.hotAreas=[],this.activated=!1,this._bindEvent()}return g()(e,[{key:"turnOn",value:function(){this.update(),this.activated=!0}},{key:"turnOff",value:function(){this.activated=!1}},{key:"_bindEvent",value:function(){var e=this,t=this.diagram,n=this.drawHotArea,r=this.eventHelper,a=this.activated;r.bind(t,"afterstemcelllayout",(function(t){var n=t.stem;a&&e.update(n)})),n&&r.bind(t,"afterviewportchange",(function(){e.draw()}))}},{key:"update",value:function(e){var t,n=this.diagram,r=this.drawHotArea;if(t=e?[e]:n.getCells().filter((function(e){return e.isStem&&e.isMindmap})),0!==t.length){var a=[],i=t.map((function(e){return d()(e.model)}));i.forEach((function(e){St(e,(function(e){var t=n.find(e.id);e.minX=t.x,e.minY=t.y,e.maxX=t.x+t.width,e.maxY=t.y+t.height,e.depth=t.depth,e.layout=t.computedProps.layout,e.visible=t.state.visible,e.collapsed=t.collapsed,e.isStem=t.isStem,e.stem=t.stem.model.id,e.upLayoutType=t.upLayoutType,e.downLayoutType=t.downLayoutType,e.upDirection=t.upDirection,e.downDirection=t.downDirection,e.zIndex=t.zIndex,e.children=e.children&&e.children.filter((function(e){return!e.isPlaceholder}))||[]}))})),i.forEach((function(e){St(e,(function(e,t,n){if(!e.isPlaceholder&&e.visible){var r=e.upLayoutType,i=e.downLayoutType,o=e.children,c=t?function(e,t,n){var r=n.children,a=e;if(!n.parent)for(;r[a]&&!yi(r[a].upDirection,t.upDirection);)a++;if(r[a]&&!r[a].abstract&&yi(r[a].upDirection,t.upDirection))return r[a]}(n+1,e,t):null,l=t?function(e,t,n){var r=n.children,a=e;if(!n.parent)for(;r[a]&&!yi(r[a].upDirection,t.upDirection);)a--;if(r[a]&&!r[a].abstract&&yi(r[a].upDirection,t.upDirection))return r[a]}(n-1,e,t):null,s=wf[i],u=wf[r],d={hotAreas:a,child:e,parent:t,next:c,prev:l,index:n,stem:e.stem,postFix:"placeholder"};e.isStem?s.stem(d):(0===o.length&&s.child(d),e.abstract||(l||u.prevSibling(d),c||u.nextSibling(d),c&&u.betweenSibling(d)))}}))})),this.hotAreas=a,this.buildQuadtree(),r&&this.draw()}}},{key:"buildQuadtree",value:function(){var e=Ke(),t=this.hotAreas.map((function(e){return[e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY,e]}));e.addAll(t),this.quadtree=e,this.maxWidth=Nt(t,(function(e){return e[2]})),this.maxHeight=Nt(t,(function(e){return e[3]}))}},{key:"_search",value:function(e,t){var n=this.quadtree,r=this.maxWidth,a=this.maxHeight,i=[];return n.visit((function(n,o,c,l,s){var u=n.data;return u&&u[0]+u[2]>=e&&u[0]<e&&u[1]+u[3]>=t&&u[1]<t&&i.push(u[4]),o>=e||c>=t||l+r<e||s+a<t})),i.sort((function(e,t){return e.child.zIndex-t.child.zIndex})),i}},{key:"hit",value:function(e){return this._search(e[0],e[1])[0]}},{key:"draw",value:function(){var e=this.diagram.frontRootGroup;e.clear(),this.hotAreas.forEach((function(t){var n=t.minX,r=t.minY,a=t.maxX,i=t.maxY,o=t.color,c=new kf({d:wn(n,r,a-n,i-r),fill:o,opacity:.5,"pointer-events":"none"});e.add(c)}))}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.drawHotArea=void 0,this.eventHelper=void 0}}]),e}();function Ef(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Of(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Of(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Of(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pf=function(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=t.children,c=void 0===o?[]:o,l=[],s=[],u=[],d=c.length-1;d>=0;d--){var h=c[d],f=h.start,p=void 0===f?0:f,m=h.end,y=void 0===m?0:m,g=h.abstract,v=h.id,x=c[d].layout||{},k=x.quadrant,w=void 0===k?1:k;if(!g)break;if((void 0===r||r===w)&&!a.includes(v)){var C,E=!1,O=p,P=y,M=0,j=0,S=Ef(n);try{for(S.s();!(C=S.n()).done;){var R=b()(C.value,2),L=R[0],A=R[1];O=O>=L&&O<L-A?L-A:O,P=P>=L&&P<L-A?L-1:P,("prev"===i?O>L:O>=L)&&(M+=A),("next"===i?P>=L-1:P>=L)&&(j+=A)}}catch(e){S.e(e)}finally{S.f()}if(P>=O){c[d].start=O+M,c[d].end=P+j;var B={start:c[d].start,end:c[d].end};s.push(v),u.push(B)}else E=!0;var N={start:p,end:y,id:v,newStart:c[d].start,newEnd:c[d].end,deleted:E,q:r,index:d};l.push(N)}}return e.update(s,u),l},Mf=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=n?-1:1,i=Hc(e,t),o={},c=0,l=Object.keys(i);c<l.length;c++){var s,u=l[c],d=u.split(":"),h=b()(d,2),f=h[0],p=h[1],m=void 0===p?void 0:parseInt(p),y=i[u],g=y.indexes,v=y.abstracts,x=null===(s=e.find(f))||void 0===s?void 0:s.model;if(0!==g.length){g.sort();var k,w=[],C=void 0,E=Ef(g);try{for(E.s();!(k=E.n()).done;){var O=k.value;if(C){var P=C,M=b()(P,2),j=M[0],S=M[1];O===j+a*S?C[1]+=a:(w.push(C),C=[O,a])}else C=[O,a]}}catch(e){E.e(e)}finally{E.f()}C&&w.push(C);var R=v.map((function(e){return e.id}));o[u]=Pf(e,x,w,m,R,r)}else o[u]=[]}return n&&Object.keys(o).forEach((function(n){o[n].forEach((function(n){var r=n.id;n.deleted&&-1===t.indexOf(r)&&e.find(r)&&t.push(r)}))})),o},jf=function(e,t){Object.keys(t).forEach((function(n){var r=n.split(":"),a=b()(r,2),i=a[0];a[1];var o=t[n];e.find(i),function(e,t,n){var r=[],a=[];n.forEach((function(e){var t=e.start,n=e.end,i=e.id,o={start:t,end:n};r.push(i),a.push(o)})),e.update(r,a)}(e,0,o)}))},Sf=function(e,t){Object.keys(t).forEach((function(n){var r=n.split(":"),a=b()(r,2),i=a[0];a[1];var o=t[n],c=e.find(i);!function(e,t,n){var r=t.model.children,a=[],i=[];n.forEach((function(e){var t=e.newStart,n=e.newEnd,o=e.index,c=e.id,l=r[o];l.start=t,l.end=n;var s={start:t,end:n};a.push(c),i.push(s)})),e.update(a,i)}(e,c,o)}))},Rf=function(e,t){var n=t.map((function(t){return e.find(t)}));if(n.some((function(e){return!e})))throw new Error("can not find the cell");return n},Lf=function(e,t,n){var r=e.add(t,n),a=Mf(e,t.map((function(e){return e.id})).filter((function(e){return e})));return[r,t,n,a]},Af=function(e,t,n,r,a){jf(e,a),e.remove(n.map((function(e){return e.id})))},Bf=function(e,t,n,r,a){return e.add(n,r),Sf(e,a),n.map((function(e){return e.id}))},Nf=function(e,t){t=t.concat([]);var n=Mf(e,t,!0);return[e.remove(t),n]},Df=function(e,t,n){var r=t.deletedModelsInfo,a=[],i=[];return Object.keys(r).forEach((function(e){var t=r[e];"root"!==e&&t.sort((function(e,t){return e.nth-t.nth})),t.forEach((function(t){var n=t.nth,r=t.model,o=-1===n?{}:{nth:n,parent:e};a.push(r),i.push(o)}))})),e.add(a,i),jf(e,n),a.map((function(e){return e.id}))},If=function(e,t,n){Sf(e,n),e.remove(t.eventObj.models.map((function(e){return e.id})))},Tf=function(e,t,n,r){for(var a=Rf(e,t),i=a.map((function(e,t){var r=n[t];return Object.keys(r).reduce((function(e,n){if("children"===n)return e;var i=r[n],o=a[t].model[n];return s()(i)?e[n]=Object.keys(i).reduce((function(e,t){var n=o&&o[t];return e[t]=null==n?null:n,e}),{}):e[n]=null==o?null:o,e}),{})})),o=a.map((function(t){return e.getCellOptions(t)})),c=0;c<n.length;c++)Qt(i[c],n[c]);return e.update(a,n,r),[t,n,r,i,o]},_f=function(e,t,n,r,a,i){var o=Rf(e,t);return e.update(o,a,i),o},qf=function(e,t,n,r,a,i){var o=Rf(e,t);return e.update(o,n,r),o};function zf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yf=Fr,Xf=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t,n,r,a,i,o,c,l,s,u,h,f,p,m,y,g=new Cf(e);function v(){if(e.viewport.preventDefault(!1),n&&Af.apply(void 0,[e].concat(N()(y))),n){var u=d()(r);u.forEach((function(e){St(e,(function(e){delete e.zIndex}))})),n.parent===n.stem&&u.forEach((function(e){var t=n.quadrant||null;e.layout?e.layout.quadrant=t:e.layout={quadrant:t}}));var h=t.map((function(e,t){return{parent:n.parent,nth:n.nth+t}})),v={parent:n.parent,nth:n.nth,quadrant:n.quadrant||1},b=e.find(n.parent);t.forEach((function(e,t){var n=u[t];1===e.depth&&b.depth>0&&n&&n.treeEdge&&n.treeEdge.stroke&&delete n.treeEdge.stroke})),b.isStem&&u.forEach((function(t,n){var r=e.query.appendChildModel(b,n);t.treeEdge?t.treeEdge.stroke||(t.treeEdge.stroke=r.treeEdge.stroke):t.treeEdge={stroke:r.treeEdge.stroke}})),e.command.execute("MindmapMoveNode",{dragCells:t,dragCellModels:r,movedCellsInfo:p,addCellModels:u,addOption:v,addOptions:h,dragCellOptions:l,movedCellsBatch:m})}else r&&Df.apply(void 0,[e].concat(N()(p)));s&&e.delegator.remove(s),s=void 0,t=void 0,r=void 0,n=void 0,a=void 0,i=void 0,l=void 0,o=void 0,c=void 0,f=void 0,e.signal.draggingMindmapCell=!1,g.turnOff()}this.mindmapHotAreaHelper=g,this.bind(e,"mousedown",(function(n){var r=n.target,o=n.clientX,c=n.clientY,l=n.button,s=e.getCell(r);!s||!s.isMindmap||s.isStem||0!==l||s.model.abstract||e.signal.contentEditing||(a=o,i=c,e.selector.selections.length>1&&e.selector.selections.includes(s)?(t=(t=e.selector.selections.concat([])).filter((function(e){return!e.isStem})),(t=e.deduplicate(t)).sort((function(e,t){return e.getNth()-t.getNth()})),f=!0):t=[s])})),this.bind(e,"mousemove",(function(v){if(t&&0!==t.length){if(!r&&Math.abs(a-v.clientX)+Math.abs(i-v.clientY)>10&&!e.signal.contentEditing){e.selector.clear(),r=t.map((function(e){return d()(e.model)})),l=t.map((function(t){return e.getCellOptions(t)}));var x=e.viewport.invertClient([v.clientX,v.clientY]);s=e.delegator.create((function(e){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new Yf({x:t-24.5-r,y:n-11+r,height:22,width:49,rx:4,ry:4,fill:"rgba(52, 155, 249, .2)"}),i=new Yf({x:t-24.5+r,y:n-11-r,height:22,width:49,rx:4,ry:4,fill:"rgba(52, 155, 249, .2)"});e.add(a),e.add(i)}(e,x[0],x[1],f?3:0)})),m=Zc(e,t),p=Nf(e,t),e.signal.draggingMindmapCell=!0,g.turnOn(),e.viewport.preventDefault(),o=v.clientX,c=v.clientY,e.emit("mindmap:afterdragchildcellstart")}if(s){var k=e.viewport.zoom;u=(v.clientX-o)/k,h=(v.clientY-c)/k,s.translate(u,h)}if(r){var w=e.viewport.invertClient([v.clientX,v.clientY]),C=g.hit(w);n&&(C?n.id!==C.id&&Af.apply(void 0,[e].concat(N()(y))):Af.apply(void 0,[e].concat(N()(y)))),C&&(e.find(C.id)||(y=Lf(e,[Ff({isPlaceholder:!0,width:32,height:10,border:{shape:"rect",fill:"#C5E3FF"},treeEdge:{stroke:"#C5E3FF"},layout:{quadrant:C.quadrant}},C)],[{parent:C.parent,nth:C.nth}]),b()(y[0],1)[0].toBack())),n=C}}})),this.bind(e,"keydown",(function(e){"Escape"===e.key&&v()})),this.bind(e,"mouseup",(function(){v()})),this.bind(e,"mouseleave",(function(){v()}))}},{key:"unbind",value:function(){this.mindmapHotAreaHelper&&(this.mindmapHotAreaHelper.destroy(),this.mindmapHotAreaHelper=void 0),I()(A()(n.prototype),"unbind",this).call(this)}}]),n}();function Gf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wf="https://gw.alipayobjects.com/zos/bmw-prod/1a7da428-3093-43d3-816a-22ec38a1d3ac.svg";function Vf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add_button",t=new xr,n=new Lr({fill:"rgba(255,255,255,0)"}),r=new _r({href:Wf,width:16,height:16}),a=new ca,i=new Lr({fill:"url(#".concat(a.id,")")});return t.dataset({lake_prevent_click_unselect:!0,lake_mindmap_add_button:!0,testid:e}),n.css({cursor:"default"}),r.css({cursor:"pointer"}),t.add(n),t.add(r),{group:t,background:n,btn:r,tail:i,gradient:a}}function Uf(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.group,o=e.background,c=e.btn,l=e.tail,s=e.gradient,u=e.zoom,d=e.verticalAlign,h=void 0===d?"center":d,f=e.tailConfig,p=9/u,m={x:t+r/2,y:n+a/2},y=0,g=a;"bottom"===h&&(y=a/2,g+=p),o.update({d:wn(t,n,r,g)});var v=m.x,b=m.y+y,x=[1/u,0,0,0,1/u,0,0,0,1];if(w.a.translate(x,x,[(v-p)*u,(b-p)*u,1]),c.update({matrix:x}),f){var k=f.stroke,C=f.position,E=10/u,O="rgba(255,255,255,0)";i.add(l),"right"===C?(s.update("l(0) 0:".concat(k," 1:").concat(O)),l.update({d:wn(v+p,b-f["stroke-width"]/2,E,f["stroke-width"])})):"left"===C?(s.update("l(0) 0:".concat(O," 1:").concat(k)),l.update({d:wn(v-E-p,b-f["stroke-width"]/2,E,f["stroke-width"])})):"bottom"===C?(s.update("l(270) 0:".concat(O," 1:").concat(k)),l.update({d:wn(v-f["stroke-width"]/2,b+p,f["stroke-width"],E)})):"top"===C&&(s.update("l(270) 0:".concat(k," 1:").concat(O)),l.update({d:wn(v-f["stroke-width"]/2,b-E-p,f["stroke-width"],E)}))}else l.remove()}var Zf=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).horizontalElements=Vf(),e.verticalElements=Vf(),e}return g()(n,[{key:"init",value:function(e){var t,n=this,r=e.frontRootGroup,a=e.defs,i=this.horizontalElements,o=this.verticalElements,c=function(){},l=function(){};function s(){i.group.remove(),o.group.remove(),c=function(){},l=function(){},t=void 0}function u(e){return i.group.rendererElement.contains(e)||o.group.rendererElement.contains(e)}a.add(i.gradient),a.add(o.gradient),this.horizontalElements=i,this.verticalElements=o,this.bind(i.btn,"click",(function(n){n.stopPropagation(),e.selector.select([t]),c(),s()})),this.bind(o.btn,"click",(function(n){n.stopPropagation(),e.selector.select([t]),l(),s()})),this.bind(e,"cell:dragstart",(function(){s()})),[i,o].forEach((function(r){var a=r.group,i=r.btn;n.bind(a,"mouseenter",(function(e){e.stopPropagation(),i.update({href:"https://gw.alipayobjects.com/zos/bmw-prod/c45540ea-937d-4683-a72e-275047bb120f.svg"})})),n.bind(a,"mouseleave",(function(n){n.stopPropagation(),i.update({href:Wf}),t&&t.graphicGroup.rendererElement.contains(n.relatedTarget)||u(n.relatedTarget)||(e.emit("addbutton:mouseleave"),s())}))})),this.bind(e,"afterchange",Te()((function(){!t||e.find(t.model.id)&&!t.collapsed||s()}),16)),this.bind(e,"mindmapcell:mouseenter",(function(n){var a=n.cell;if(!e.signal.cellDragStart&&a.isMindmap&&!a.collapsed){var s=a.downSignX,u=a.downSignY,d=0!==u,h=e.viewport.zoom,f=38/h,p=a.canCollapse()?-18:2,m=(d||"line"!==a.border.shape?-1:0)/h+p,y={x:a.x+a.width-m,y:a.y,width:f,height:a.height},g={x:a.x+(a.width-f)/2,y:a.y+a.height-m,width:f,height:f};t=a,i.group.remove(),o.group.remove(),d?(-1===u&&(g.y=a.y-f+m),y.x-=m,g.tailConfig=Hf({position:1===u?"top":"bottom"},e.query.appendChildAddButtonTail(a).treeEdge),l=function(){e.command.execute("MindmapAppendChild")}):(-1===s&&(y.x=a.x-f+m),g.height-=4*m,"line"===a.border.shape&&(y.verticalAlign="bottom"),y.tailConfig=Hf({position:1===s?"left":"right"},e.query.appendChildAddButtonTail(a).treeEdge),c=function(){e.command.execute("MindmapAppendChild")}),d?(r.add(o.group),Uf(Hf(Hf({},g),{},{zoom:h},o))):(r.add(i.group),Uf(Hf(Hf({},y),{},{zoom:h},i)))}})),this.bind(e,"mindmapcell:mouseleave",(function(t){var n=t.nativeEvent;u(n.relatedTarget)||e.elementMap.fullScreenBtn.contains(n.relatedTarget)||s()})),this.bind(e.contentEditor,"beginedit",(function(){s()})),this.bind(e.contentEditor,"change",(function(){s()})),this.bind(e,"afterselect",(function(){(e.selector.selections.length>1||1===e.selector.selections.length&&e.selector.selections[0]!==t)&&s()}))}}]),n}();var Kf=Lr,Qf=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;return m()(this,n),(e=t.call(this)).mask=new Kf({"stroke-width":1,stroke:"#1890FF",fill:"rgba(24, 144, 255, 0.15)"}),e.mask.css({"pointer-events":"none"}),e}return g()(n,[{key:"init",value:function(e){var t=this.mask;t.dataset({lake_prevent_click_unselect:!0});var n=null,r=!0;this.bind(e,"keyup",(function(r){if(n)switch(r.key){case"Delete":case"Backspace":e.command.execute("Update",{id:n,model:{width:null,height:null,image:null}}),t.remove()}})),this.bind(e,"mousedown",(function(t){var n=t.target.closest("image"),a=n&&e.getCell(n);r=!(a&&a.isMindmap&&a.state.selected)})),this.bind(e,"click",(function(a){var i=a.target.closest("image"),o=i&&e.getCell(i);o&&!r?(a.stopPropagation(),o.endEditContent(),e.selector.select([o],!1),function(e,n){var r=["x","y","width","height"].reduce((function(e,t){return e[t]=parseFloat(n.getAttribute(t)),e}),{});t.update({d:wn(e.x+r.x-1,e.y+r.y-1,r.width+2,r.height+2,1)})}(o,i),e.frontRootGroup.add(t),n=o.model.id,e.tryFocus(),r=!0):a.target!==t.rendererElement&&(n=null,t.remove())})),this.bind(e,"afterselectionchange",(function(){n&&(n=null,t.remove())})),this.bind(e,"mindmap:afterdragchildcellstart",(function(){n&&(n=null,t.remove())}))}}]),n}();function Jf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jf(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ep=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){var t,n,r,a,i,o,c,l=!1;function s(){l?t&&e.remove(t):(c=Object(q.a)(),e.command.execute("Add",{model:$f({id:c,x:t.x+i,y:t.y+o},e.query.insertStemModel())}),e.remove(t)),n&&n.destroy(),t=void 0,r=void 0,a=void 0,i=void 0,o=void 0,l=!1,n=void 0,e.interaction.changeMode("edit"),c&&(e.selector.clear(),e.selector.select([c]),c=void 0)}this.bind(e,"mousemove",(function(c){if(!n){var l=e.viewport.invertClient([c.clientX,c.clientY]);t=e.add($f({x:l[0],y:l[1]},e.query.insertStemModel()))[0],n=e.delegator.create([t]),r=c.clientX,a=c.clientY,t.hide()}n&&(i=(c.clientX-r)/e.viewport.zoom,o=(c.clientY-a)/e.viewport.zoom,n.translate(i,o))})),this.bind(window,"mouseleave",(function(){l=!0,s()})),this.bind(window,"mouseup",(function(t){n&&(e.viewportContainer.contains(t.target)||(l=!0),s())})),this.bind(e,"keydown",(function(e){"Escape"===e.key&&(l=!0,s())}))}}]),n}();var tp=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n),e=t.call(this);var a=document.createElement("div"),i=document.createElement("span");return i.classList.add("lake-icon"),i.classList.add("lake-icon-full-screen"),i.classList.add("lake-prevent-card-activated"),a.appendChild(i),a.style["z-index"]="1033",a.style["border-radius"]="4px",a.style.position="absolute",a.style.width="".concat(20,"px"),a.style.height="".concat(20,"px"),a.style.color="#fff",a.style.cursor="pointer",a.style["box-shadow"]="0px 2px 8px 0px rgba(0, 0, 0, 0.08)",a.style["background-color"]="rgba(0, 0, 0, 0.65)",a.style["text-align"]="center",e.fullScreenBtn=a,e.imageBrowser=Object(r.getImageBrowser)(),e}return g()(n,[{key:"init",value:function(e){var t,n,r=this,a=this.fullScreenBtn,i=this.imageBrowser;e.elementMap.fullScreenBtn=a;var o=function(){a.remove(),n&&r.unbind(n),t=void 0,n=void 0};this.bind(a,"click",(function(){if(t){var e=t.image,n=t.imageElement.rendererElement;i.open([{src:n.getAttribute("data-raw_src"),msrc:n.getAttribute("href"),w:e.naturalWidth,h:e.naturalHeight}],0)}})),this.bind(a,"mouseleave",(function(e){t.imageElement.rendererElement.contains(e.relatedTarget)||o()})),this.bind(e,"mindmapcellimage:mouseenter",(function(i){var c=i.cell;if(!e.signal.cellDragStart){document.body.appendChild(a);var l=c.imageElement.getBoundingClientRect(),s=c.image;t=c,s.width>30&&s.height>30?(a.style.top="".concat(l.top+window.pageYOffset+6,"px"),a.style.left="".concat(l.right+window.pageXOffset-26,"px")):(a.style.top="".concat(l.top+window.pageYOffset-20,"px"),a.style.left="".concat(l.left+window.pageXOffset,"px")),n=r.bind(e,"afterviewportchange",(function(){o()}))}})),this.bind(e,"mindmapcellimage:mouseleave",(function(e){var t=e.nativeEvent;a.contains(t.relatedTarget)||o()})),this.bind(e,"mindmap:afterdragchildcellstart",(function(){o()})),this.bind(e,"cell:dragstart",(function(){o()}))}}]),n}();var np=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(window,"click",(function(t){t.target.closest(".lake-diagram-note")&&e.command.execute("MindmapAttachNote")}))}}]),n}();var rp=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){var n=e.selector.selections[0],r=t.key,a=["Tab","Insert"],i=["Enter"];if(n&&("timeline"===n.upLayoutType||"standard"===n.upLayoutType&&0===n.upSignX)){var o=a;a=i,i=o}a.includes(r)?(t.preventDefault(),t.altKey?e.command.execute("MindmapAppendParent"):e.command.execute("MindmapAppendChild")):i.includes(r)&&(t.preventDefault(),t.shiftKey?e.command.execute("MindmapInsertStem"):n&&n.isStem?e.command.execute("MindmapAppendChild"):t.altKey?e.command.execute("MindmapPrependSibling"):e.command.execute("MindmapAppendSibling"))}))}}]),n}();var ap=[["Left","ArrowLeft"],["Right","ArrowRight"],["Up","ArrowUp"],["Down","ArrowDown"]],ip=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(ap.reduce((function(e,t){return e.push.apply(e,N()(t)),e}),[]).includes(t.key)){t.preventDefault();var n=e.selector,r=n.selections;if(1===r.length&&r[0].isMindmap){var a,i,o,c,l=(r=r.filter((function(e){return e.isMindmap})))[r.length-1],s=e.getCells().filter((function(e){return e.state.visible&&e.isMindmap})),u=(a=l.upDirection,"0,1"===(a=String(a))||"0,-1"===a),d=!l.isStem&&"timeline"!==l.upLayoutType;if(ap[1].includes(t.key)){if(d&&l.x<l.parent.x&&!u)return void n.select([l.parent]);o="x",c=!0}else if(ap[0].includes(t.key)){if(d&&l.x>l.parent.x&&!u)return void n.select([l.parent]);o="x",c=!1}else if(ap[2].includes(t.key)){if(d&&l.y>l.parent.y&&u)return void n.select([l.parent]);o="y",c=!1}else if(ap[3].includes(t.key)){if(d&&l.y<l.parent.y&&u)return void n.select([l.parent]);o="y",c=!0}var h="x"===o?"width":"height",f="x"===o?"y":"x",p="x"===o?"height":"width",m=l[f]+l[p]/2,y=l[f]+l[p];(i=(i=(i=c?s.filter((function(e){return l[o]+l[h]<e[o]})):s.filter((function(e){return e[o]+e[h]<l[o]}))).filter((function(e){var t=e[f]+e[p],n=t<l[f],r=e[f]>y,a=e[f]<=l[f]&&t>=y;return!(n||r)||a}))).sort((function(e,t){if(c){if(e[o]!==t[o])return e[o]-t[o]}else if(e[o]+e[h]!==t[o]+t[h])return t[o]+t[h]-(e[o]+e[h]);return Math.min(Math.abs(m-e[f]),Math.abs(m-(e[f]+e[p])))-Math.min(Math.abs(m-t[f]),Math.abs(m-(t[f]+t[p])))})))[0]&&n.select([i[0]])}}}))}}]),n}();var op=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Fa(t)&&["Backspace","Delete"].includes(t.key)&&e.command.execute("MindmapRemoveSingleNode")}))}}]),n}();var cp=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){0!==e.selector.selections.length||"m"!==t.key||Fa(t)||(t.preventDefault(),e.command.execute("MindmapBeginInsertStem"))}))}}]),n}();var lp=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,r=t[t.length-1];r.model.collapsed&&(e.update(r,{collapsed:!1}),this.originSelectedCollapsed=!0);var a=r.model.children?r.model.children.filter((function(e){return!e.abstract})).length:0,i={model:{},cellOptions:{parent:r.model.id,nth:a}};xe()(i.model,e.query.appendChildModel(r)),i.model.id=this.id,Object.assign(this,i),this.selectedCellId=r.model.id,I()(A()(n.prototype),"execute",this).call(this),e.contentEditor.beginEdit()}},{key:"forward",value:function(){var e=this.selectedCellId,t=this.diagram;this.originSelectedCollapsed&&t.update(e,{collapsed:!1}),I()(A()(n.prototype),"forward",this).call(this)}},{key:"backward",value:function(){var e=this.selectedCellId,t=this.diagram;this.originSelectedCollapsed&&t.update(e,{collapsed:!0}),I()(A()(n.prototype),"backward",this).call(this),t.selector.select([e])}}]),n}();c()(lp,"className","MindmapAppendChild"),c()(lp,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var sp=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.diagram,r=this.addType,a=t.selector.selections,i=a[a.length-1],o=i.parent,c={model:{html:"".concat(ar(""))},cellOptions:{parent:o.model.id,nth:r&&"prepend"===r?i.getNth():i.getNth()+e}};o.isStem&&(c.model.layout={quadrant:i.computedProps.layout.quadrant}),xe()(c.model,t.query.appendChildModel(o)),c.model.id=this.id,Object.assign(this,c),this.selectedCellId=i.model.id,I()(A()(n.prototype),"execute",this).call(this),t.contentEditor.beginEdit()}},{key:"backward",value:function(){var e=this.selectedCellId,t=this.diagram;I()(A()(n.prototype),"backward",this).call(this),t.selector.select([e])}}]),n}();c()(sp,"className","MindmapAddSibling"),c()(sp,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return!e.isStem&&e.isMindmap&&!e.isAbstract}))}));var up=function(e){j()(n,sp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n)}();c()(up,"className","MindmapAppendSibling");var dp=function(e){j()(n,sp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){I()(A()(n.prototype),"execute",this).call(this,0)}}]),n}();c()(dp,"className","MindmapPrependSibling");var hp=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"addMovedModelsInfo",void 0),c()(P()(e),"addInfo",void 0),c()(P()(e),"pinLine",void 0),e}return g()(n,[{key:"execute",value:function(){var e=this.addOption,t=e.parent,n=e.quadrant,r=e.nth,a=this.diagram,i=this.movedCellsBatch,o=a.find(t),c=o&&o.isStem&&o.isTwoQuadrantLayout?o.getNewQuadIndexByNewRealIndex(r,n):r,l=Kc(i[1],o,n,c),s=b()(l,3),u=s[0],d=s[1],h=s[2];this.pinLine=new ch(a),this.pinLine.cache(h),this.pinLine.pin(),this.addInfo=Lf(a,u,d),this.select(this.addInfo[0])}},{key:"forward",value:function(){var e=this.diagram,t=this.movedCellsInfo;If.apply(void 0,[e].concat(N()(t))),this.pinLine.pin();var n=Bf.apply(void 0,[e].concat(N()(this.addInfo)));this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.movedCellsInfo;Af.apply(void 0,[e].concat(N()(this.addInfo))),this.pinLine.reset();var n=Df.apply(void 0,[e].concat(N()(t)));this.select(n)}}]),n}();c()(hp,"className","MindmapMoveNode");var fp=function(e){j()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.image,r=e.selector.selections,a=r[r.length-1],i=a.model;this.id=i.id,this.model={image:$l(t),width:null,height:null},e.signal.preventUpdateCellContent=!0,a.textareaElement.htmlContainer===e.contentEditor.dom&&(e.contentEditor.execCommand("justifyCenter"),e.contentEditor.updateStartContent(),this.model.html=e.contentEditor.dom.innerHTML),e.signal.preventUpdateCellContent=!1,I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()(fp,"className","MindmapAttachImage"),c()(fp,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t[0].isMindmap}));var pp=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram;e.selector.clear(),e.interaction.changeMode("beginAddMindmapStem")}}]),n}();function mp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(pp,"className","MindmapBeginInsertStem");var yp=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.x,r=this.y;if(this.model=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.query.insertStemModel()),null!=t&&null!=r)Object.assign(this.model,{x:t,y:r});else{var a=e.getCells().filter((function(e){return e.isStem})),i=a[a.length-1];Object.assign(this.model,{x:i.x+20,y:i.y+i.height+20})}I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()(yp,"className","MindmapInsertStem");var gp=function(e){j()(n,Jo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n)}();c()(gp,"className","MindmapCreateLink");var vp=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this,t=this.diagram,r=this.image;this.model={type:"mindmap",image:$l(r),html:""};var a=t.viewport.getCenter();this.model.x=a[0]-this.model.image.width/2,this.model.y=a[1]-this.model.image.height/2,I()(A()(n.prototype),"execute",this).call(this),Te()((function(){var n=t.selector.selections;1===n.length&&n[0].model.id===e.id&&t.contentEditor.execCommand("justifyCenter")}),16)()}}]),n}();function bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(vp,"className","MindmapInsertImage"),c()(vp,"enable",(function(e){return 0===e.selector.selections.length}));var xp=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"info1",void 0),c()(P()(e),"info2",void 0),c()(P()(e),"info3",void 0),e}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.deduplicate(e.selector.selections).sort((function(e,t){return e.getNth()-t.getNth()})),n=t[0],r=Zc(e,t),a=b()(r,2);a[0];var i=a[1],o=t[0].mindmapParent,l=t[0].parent,s=o?n.quadrantNth:void 0,u=n.realQuadrant,d=Object(q.a)(),h={id:d,html:"",children:[]};o?Object.assign(h,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.query.appendChildModel(o))):Object.assign(h,{type:"mindmap",x:n.x,y:n.y,layout:n.layout}),this.info1=Nf(e,t.map((function(e){return e.model.id})));var f=Kc([h],l,u,s),p=b()(f,2),m=p[0],y=p[1];this.info2=Lf(e,m,y);var g=e.find(d),v=Kc(i,g,1),x=b()(v,2),k=x[0],w=x[1];this.info3=Lf(e,k,w),e.selector.select(d)}},{key:"forward",value:function(){var e=this.diagram;If.apply(void 0,[e].concat(N()(this.info1)));var t=Bf.apply(void 0,[e].concat(N()(this.info2)));Bf.apply(void 0,[e].concat(N()(this.info3))),e.selector.select(t)}},{key:"backward",value:function(){var e=this.diagram;Af.apply(void 0,[e].concat(N()(this.info3))),Af.apply(void 0,[e].concat(N()(this.info2)));var t=Df.apply(void 0,[e].concat(N()(this.info1)));e.selector.select(t)}}]),n}();c()(xp,"className","MindmapAppendParent"),c()(xp,"enable",(function(e){var t=function(e,t){return e=e.filter((function(e){return e.isMindmap})),t.deduplicate(e)}(e.selector.selections,e);return t.length>0&&t.every((function(e){return e.isMindmap&&e.parent===t[0].parent&&!e.isAbstract}))}));var kp=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"info1",void 0),c()(P()(r),"info2",void 0),c()(P()(r),"transBatch",void 0),r.pinLine=new ch(e.diagram),r}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.pinLine,n=e.selector.selections[0];this.selfId=n.model.id;var r=n.getChildren(),a=n.parent,i=n.realQuadrant,o=a&&a.isMindmap?n.getNth():void 0,c=(null!=a?a:{}).quadrantTreeLists,l=c?c[i-1].indexOf(o):o,s=Zc(e,r)[1];t.cache([n]),this.info1=Nf(e,[this.selfId]),t.pin();var u=Kc(s,a,i,l),d=b()(u,2),h=d[0],f=d[1];this.info2=Lf(e,h,f),this.select(this.info2[0])}},{key:"forward",value:function(){var e=this.diagram,t=this.pinLine;If.apply(void 0,[e].concat(N()(this.info1))),t.pin();var n=Bf.apply(void 0,[e].concat(N()(this.info2)));this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.selfId,n=this.pinLine;Af.apply(void 0,[e].concat(N()(this.info2))),Df.apply(void 0,[e].concat(N()(this.info1))),n.reset(),this.select(t)}}]),n}();c()(kp,"className","MindmapRemoveSingleNode"),c()(kp,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap&&!e.isAbstract}))}));var wp=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),(r=t.call(this,e)).queue=!1,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.emit("opennote",{cell:t})}}]),n}();function Cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}c()(wp,"className","MindmapAttachNote"),c()(wp,"isModelChange",!1),c()(wp,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var Pp=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n=e.some((function(e){if(e.isMindmap&&e.mindmapParent&&!e.isAbstract){var t=e.realQuadrant,n=e.mindmapParent,r=n.getChildren(),a=n.quadrantTreeLists,i=r.indexOf(e),o=0===a.length?i:a[t-1].indexOf(i);return r.filter((function(e){return e.model.abstract})).some((function(e){var n=e.model,r=n.start,a=n.end,i=e.realQuadrant;return t===i&&o>=r&&o<=a}))}return!1}));if(n)return!1}return e.every((function(e){return e.isMindmap&&e.mindmapParent&&!e.isAbstract}))},Mp=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"originSelectionsCollapsed",{}),c()(P()(e),"selections",void 0),c()(P()(e),"fatherGroup",{}),c()(P()(e),"updateInfo",void 0),e}return g()(n,[{key:"execute",value:function(){var e=this,t=this.diagram,r=t.deduplicate(t.selector.selections),a={model:[],cellOptions:[]},o=[],c=[],l=[];this.selections=r.map((function(e){return e.model.id})),r.forEach((function(t){if(t.mindmapParent){var n=t.mindmapParent,r=n.model,a=r.id,i=r.children.indexOf(t.model),o=i;if(n.layoutQuadrantConstraint&&n.layoutQuadrantConstraint.length>1){var c,l,s=null!==(c=null===(l=t.model.layout)||void 0===l?void 0:l.quadrant)&&void 0!==c?c:1;a+=":"+s,o=n.quadrantTreeLists[s-1].indexOf(i)}var u=e.fatherGroup[a]||{},d=u.start,h=u.end;if(-1===o)throw new Error("水金");e.fatherGroup[a]=void 0===d?{start:o,end:o}:{start:Math.min(o,d),end:Math.max(o,h)}}}));var s,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Op(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(Object.keys(this.fatherGroup).sort());try{var d=function(){var n=s.value,r=n.split(":"),i=b()(r,2),u=i[0],d=i[1],h=void 0===d?void 0:parseInt(d);if("number"==typeof h&&isNaN(h))throw new Error("new abstract quadrant === nan");var f=e.fatherGroup[n],p=f.start,m=f.end,y=t.find(u);if(y){var g=!0,v=y.model.children.filter((function(e){return!e.abstract})),x=v.length;-1===x&&(x=y.model.children.length);var k=x,w=void 0===h?k:y.quadrantTreeLists[h-1].length;if(p>=w||m>=w||p>m||p<0)return{v:void 0};for(var C=null!=h?h:1;k<y.model.children.length;k++){var E=y.model.children[k],O=E.start,P=E.end,M=E.layout,j=(void 0===M?{}:M).quadrant;if(C===(void 0===h?1:j)){if(p<O)break;if(P>p){g=!1;break}}else if(C<j)break}for(var S=k;S<y.model.children.length;S++){var R=y.model.children[S],L=R.start,A=R.layout.quadrant;if((void 0===h||void 0===A?1:A)===C&&m>=L){g=!1;break}}g&&(y.quadrantTreeLists[C-1].forEach((function(e,t){if(t>=p&&t<=m){var n=v[e];if(!n)return;var r=n.layout,a=(r=void 0===r?{}:r).quadrant,i=void 0===a?1:a,s=n.id;i!==C&&(o.push(s),c.push({layout:Ep(Ep({},n.layout),{},{quadrant:C})}),l.push({}))}})),a.model.push({start:p,end:m,abstract:!0,layout:{quadrant:C},border:{shape:"rect",stroke:"#BFBFBF",fill:"transparent","stroke-width":2},treeEdge:{stroke:"#BFBFBF","stroke-width":2},html:ar("概要")}),2===h&&e.fatherGroup[u+":1"]&&k++,a.cellOptions.push({parent:y.model.id,nth:k}))}};for(u.s();!(s=u.n()).done;){var h=d();if("object"===i()(h))return h.v}}catch(e){u.e(e)}finally{u.f()}this.updateInfo=Tf(t,o,c,l),Object.assign(this,a),I()(A()(n.prototype),"execute",this).call(this),t.contentEditor.beginEdit()}},{key:"forward",value:function(){var e=this.diagram,t=this.updateInfo;I()(A()(n.prototype),"forward",this).call(this),qf.apply(void 0,[e].concat(N()(t)))}},{key:"backward",value:function(){var e=this.diagram,t=this.updateInfo;_f.apply(void 0,[e].concat(N()(t))),I()(A()(n.prototype),"backward",this).call(this)}}]),n}();function jp(e,t){return e&&t&&F()(e).toHex()===F()(t).toHex()}function Sp(e,t){return e.reduce((function(e,t){return"object"===i()(e)?e[t]:e}),t)}function Rp(e,t,n){var r=e.length;n=d()(n),e.reduce((function(e,t,a){if(a===r-1)return e[t]=n,n;if("object"===i()(e[t]))return e[t];if(void 0===e[t]){var o={};return e[t]=o,o}return{}}),t)}function Lp(e,t){var n=Nc(t.find(e.id).textareaElement.htmlContainer);return e.children&&(n.children=e.children.map((function(e){return Lp(e,t)}))),n}function Ap(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.children,i=t.split("."),o=Sp(i,n),c="none";if(a&&a.length>1)for(var l=0;l<a.length;l++){var s=a[l],u=Sp(i,s);if("none"!==c){if(!we()(u,c)){c="none";break}}else c=u}return"none"!==c?Rp(i,e,c):o&&!r&&Rp(i,e,o),e}c()(Mp,"className","MindmapAppendAbstract"),c()(Mp,"enable",(function(e){var t=e.deduplicate(e.selector.selections);return Pp(t,!0)}));var Bp=function(){function e(t){m()(this,e),c()(this,"diagram",void 0),this.diagram=t}return g()(e,[{key:"_getRainBowColors",value:function(){var e=this.diagram,t=e.palette,n=ir;if(t){var r=e.palette.colors[1];n=[r[4],r[8],r[6],r[5],r[9],r[2],r[7],r[3],r[1],r[0]]}return n}},{key:"appendChildAddButtonTail",value:function(e){var t=this._getRainBowColors(),n=e.stem.rainbow;return e.isStem?{treeEdge:{stroke:n?t[e.model.children.length%t.length]:"#959EA6","stroke-width":e.getDefaultStrokeWidth(e.depth+1)}}:{treeEdge:{stroke:e.computedProps.treeEdge.stroke,"stroke-width":e.getDefaultStrokeWidth(e.depth+1)}}}},{key:"appendChildTransitiveCommon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Ap(e,"border.shape",t.model,n),Ap(e,"border.stroke",t.model,n),Ap(e,"border.fill",t.model,n),Ap(e,"border.stroke-width",t.model,n),Ap(e,"layout",t.model,!0),Ap(e,"treeEdge.stroke-width",t.model,n)}},{key:"appendChildTransitiveTextFormat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Lp(t.model,this.diagram),a={},i=[];Ap(a,"fontSize",r,n),Ap(a,"color",r,n),a.fontSize&&14!==a.fontSize&&i.push("font-size: ".concat(a.fontSize,"px")),a.color&&!jp(a.color,"#262626")&&i.push("color: ".concat(a.color)),i.length>0&&(e.html='<span style="'.concat(i.join(";"),'">').concat("&#8203;","</span>"))}},{key:"appendChildTreeEdge",value:function(e,t){var n,r,a,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=null!==(n=t.model.children)&&void 0!==n?n:[],l=null===(r=c[0])||void 0===r||null===(a=r.treeEdge)||void 0===a?void 0:a.stroke;if(l&&c.length>1&&c.every((function(e){var t;return jp(null==e||null===(t=e.treeEdge)||void 0===t?void 0:t.stroke,l)})))i=l;else if(t.isStem){var s=t.model.children,u=t.rainbow,d=this._getRainBowColors();i=u?d[(s.length+o)%d.length]:"#959EA6"}i&&Rp(["treeEdge","stroke"],e,i)}},{key:"appendChildModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};return e&&e.isMindmap&&(this.appendChildTransitiveCommon(n,e,e.isStem),this.appendChildTransitiveTextFormat(n,e,e.isStem),this.appendChildTreeEdge(n,e,t)),n}},{key:"insertStemModel",value:function(){return or}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();c()(Bp,"className","Query");var Np=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"weakMap",new WeakMap),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this._initEvent()}},{key:"_initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"aftercommandexecute",(function(n){var r=n.command;if(r instanceof Oo){var a=r.changeArguments?r.changeArguments[0]:[],i=Mf(t,a.map((function(e){return e.id})).filter((function(e){return e})),!1,r instanceof up?"next":r instanceof dp?"prev":"");e.weakMap.set(r,i)}})),this.bind(t,"beforecommandbackward",(function(n){var r=n.command,a=e.weakMap.get(r);a&&r instanceof Oo&&jf(t,a)})),this.bind(t,"aftercommandforward",(function(n){var r=n.command,a=e.weakMap.get(r);a&&r instanceof Oo&&Sf(t,a)}))}}]),n}();var Dp=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"weakMap",new WeakMap),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this.initEvent()}},{key:"initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"beforecommandexecute",(function(n){var r=n.command;if(r instanceof uh){var a=r.cells||t.selector.selections.concat([]),i=Mf(e.diagram,a,!0);r.cells=a,e.weakMap.set(r,i)}})),this.bind(t,"aftercommandbackward",(function(n){var r=n.command,a=e.weakMap.get(r);a&&r instanceof uh&&jf(t,a)})),this.bind(t,"beforecommandforward",(function(n){var r=n.command,a=e.weakMap.get(r);a&&r instanceof uh&&Sf(t,a)}))}}]),n}();var Ip=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this._initEvent()}},{key:"_initEvent",value:function(){var e=this.diagram;this.bind(e,"beforepaste:lake",(function(t){var n,r=t.body,a=t.options,i=t.extraInfomations,o=t.offset,c=function(e){return"mindmap"===i[e.id].rootType},l=e.selector.selections,s=l[0];1===l.length&&s.isMindmap?(s.collapsed&&e.update(s,{collapsed:null}),n=s):r.forEach((function(e){if(c(e)){var t=i[e.id];delete e.collapsed,Object.keys(or).forEach((function(t){null==e[t]&&(e[t]=d()(or[t]))})),e.x="number"==typeof e.x?e.x:t.x,e.y="number"==typeof e.y?e.y:t.y,e.x+=o[0],e.y+=o[1],e.children&&e.children.forEach((function(e){var t=i[e.id];t.treeEdge&&t.treeEdge.stroke&&(e.treeEdge?e.treeEdge.stroke||(e.treeEdge.stroke=t.treeEdge.stroke):e.treeEdge={stroke:t.treeEdge.stroke})}))}}));var u=Kc(r,n,void 0,void 0,c),h=b()(u,2),f=h[0],p=h[1];t.body=f,t.options=a.map((function(e,t){return Object.assign(e,p[t])}))}))}}]),n}();function Tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fp=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"weakMap",new WeakMap),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this.initEvent()}},{key:"initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"beforecommandexecute",(function(n){var r=n.command;if(r instanceof Po){var a=r.id,i=r.model,o=Yn(a instanceof Array?a:[a],i),c=b()(o,2),l=c[0],s=c[1],u=l.map((function(e){return t.find(e)})),d=[[],[],[]];if(l.forEach((function(e,n){var r=t.find(e);if(r&&r.isMindmap&&r.isStem){var a=s[n],i=u[n];if(void 0!==i&&a.layout){var o=a.layout.quadrantConstraint,c=i.layout,l=(c=void 0===c?{}:c).quadrantConstraint;if(r.isTwoQuadrantLayout&&o&&1===o.length){var h,f,p,m=function(e){var t=[],n=[],r=[],a=-1,i=0;return e.forEach((function(e,o){var c=e.abstract,l=e.layout,s=(l=void 0===l?{}:l).quadrant,u=void 0===s?1:s,d=e.id,h=e.start,f=void 0===h?0:h,p=e.end,m=void 0===p?0:p;c?2===u&&(t.push(d),n.push({layout:_p(_p({},e.layout),{},{quadrant:1}),start:f+i,end:m+i}),r.push({})):2===u?(-1===a&&(a=o),t.push(d),n.push({layout:_p(_p({},e.layout),{},{quadrant:1})}),r.push({})):(i++,a>=0&&(t.push(d),n.push({layout:_p(_p({},e.layout),{},{quadrant:1})}),r.push({nth:a}),a++))})),[t,n,r]}(r.model.children),y=b()(m,3),g=y[0],v=y[1],x=y[2];(h=d[0]).push.apply(h,N()(g)),(f=d[1]).push.apply(f,N()(v)),(p=d[2]).push.apply(p,N()(x))}else if(l&&1===l.length&&(o&&2===o.length||null===o)){var k,w,C,E=r.model.children.filter((function(e){return!e.abstract})).length,O=Math.ceil(E/2),P=[],M=[],j=[];r.model.children.forEach((function(e,t){var n=e.abstract,r=e.id,a=e.start,i=void 0===a?0:a,o=e.end,c=void 0===o?0:o;if(n){var l=i<O?1:2,s=i<O?i:i-O,u=1===l?c<O?c:O-1:c-O;P.push(r),M.push({layout:zp(zp({},e.layout),{},{quadrant:l}),start:s,end:u}),j.push({})}else{var d=t<O?1:2;P.push(r),M.push({layout:zp(zp({},e.layout),{},{quadrant:d})}),j.push({})}})),(k=d[0]).push.apply(k,P),(w=d[1]).push.apply(w,M),(C=d[2]).push.apply(C,j)}}}})),d[0].length>0){var h=Tf.apply(void 0,[t].concat(d));e.weakMap.set(r,h)}}})),this.bind(t,"aftercommandbackward",(function(n){var r=n.command,a=e.weakMap.get(r);a&&r instanceof Po&&_f.apply(void 0,[t].concat(N()(a)))})),this.bind(t,"beforecommandforward",(function(n){var r=n.command,a=e.weakMap.get(r);a&&r instanceof Po&&qf.apply(void 0,[t].concat(N()(a)))}))}}]),n}(),Yp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=e.x,a=e.y,i=e.width,o=e.height,c=b()(t,2),l=c[0],s=c[1],u=b()(n,2),d=u[0],h=u[1];return[r+l*i+d,a+s*o+h]},Xp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return"x"===e?[t,n]:[n,t]},Gp=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"group",new xr),c()(this,"eventHelper",new ko),c()(this,"arr",[]),c()(this,"destroyed",!1),(new xr).css({"pointer-events":"none"})}return g()(e,[{key:"setDragInfo",value:function(e,t,n){this.diagram.contentEditor.unbind();var r=t.cell,a=r.breadthPositive,i=r.abstractCoveredCells,o=r.ad,c=this.diagram.viewport.invertClient([e.clientX,e.clientY]),l=function(e,t){if(e.isAbstract){var n=e.realQuadrant,r=e.parent,a=r.getChildren(),i=r.quadrantTreeLists,o=a.filter((function(e){return e.isAbstract})),c=o.indexOf(e);if(t>0){var l=o[c+1];if(l){var s=l.realQuadrant,u=l.model.start,d=void 0===u?0:u;if(n===s)return a[i[n-1][d-1]]}var h=i[n-1];return a[h[h.length-1]]}if(c>0){var f=o[c-1],p=f.realQuadrant,m=f.model.end,y=void 0===m?0:m;if(n===p)return a[i[n-1][y+1]]}return a[i[n-1][0]]}return e}(r,n),s=-1===n?i[i.length-1]:i[0],u=Yp(s,Xp(o,(a*n+1)/2)),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=e.minX,a=e.minY,i=e.maxX,o=e.maxY;return Yp({x:r,y:a,width:i-r,height:o-a},t,n)}(nr(l.getAllChildren().concat([l]),(function(e){return e.getKeyShapeBox()})),Xp(o,(a*n+1)/2)),h="x"===o?u[0]:u[1],f="x"===o?d[0]:d[1];return{renderInfo:t,boundaryCoord:h>f?[f,h]:[h,f],dragNodeOrder:n,dragCoord:c,dragFromNode:s,dragToNode:l}}},{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;e.arr.length>0&&("update"===n||"delete"===n)&&e.draw()}))}},{key:"show",value:function(){this.group.show()}},{key:"hide",value:function(){this.group.hide()}},{key:"select",value:function(e){var t,n,r,a=this,i=this.diagram,o=this.group,c=this.eventHelper;i.viewport.zoom,e=e.filter((function(e){return e.isCell&&e.state.visible&&e.isAbstract})),this.clear(),i.frontRootGroup.add(o),this.bind(),this.arr=e.map((function(e,t){var n={fill:"none",stroke:"#3384F5","fill-rule":"nonzero"},r={fill:"none",stroke:"rgba(255,255,255,0)"},a={fill:"none","stroke-linecap":"round"},i=e.abstractCoveredCells,c=e.abstractCoveredCellsWithAllChildren,l=e.ad,s={cell:e,coveredCells:i,coveredCellsWithAllChildren:c,rectStyle:n,handleStyle:r,rectElement:new Lr(n),centerBarElements:[new Lr(a),new Lr(a)],handleElements:[new Lr(r),new Lr(r)]},u=s.rectElement,d=b()(s.centerBarElements,2),h=d[0],f=d[1],p=b()(s.handleElements,2),m=p[0],y=p[1];return[u,h,f].forEach((function(e){o.add(e)})),[m,y].forEach((function(e,n){o.add(e),e.dataset({lake_prevent_click_unselect:"true",abst_adjust_controller:"".concat(t,"-").concat(n,"-")+l})})),s})),this.draw(),this.arr.forEach((function(e){var n=b()(e.handleElements,2),r=n[0],i=n[1],o=e.cell.breadthPositive;c.bind(r.rendererElement,"mousedown",(function(n){t=a.setDragInfo(n,e,-o)})),c.bind(i.rendererElement,"mousedown",(function(n){t=a.setDragInfo(n,e,o)}))})),c.bind(i,"mousemove",(function(e){if(t)De()((function(){i.emit("abstadjuststart");var n=i.viewport.invertClient([e.clientX,e.clientY]);t&&(t.dragCoord=n,a.updateShape(t.renderInfo,t))}))();else{var o=e.target.dataset.abst_adjust_controller;if(o){var c=o.split("-"),l=b()(c,3),s=l[0],u=l[1],d=l[2],h=a.arr[s],f=parseInt(u),p=h.centerBarElements[f];p.update({stroke:"rgba(95,159,246)","stroke-width":4}),r&&r!==p&&r.update({stroke:"rgba(129,179,248,0.6)","stroke-width":3}),r=p;var m="x"===d?"ew-resize":"ns-resize";n!==m&&(i.setCursor(m),n=m)}else n?(i.resetCursor(),n=void 0):r&&(r.update({stroke:"rgba(129,179,248,0.6)","stroke-width":3}),r=void 0)}})),c.bind(i,"mouseup",(function(e){if(t){n=void 0,i.resetCursor();var r=i.viewport.invertClient([e.clientX,e.clientY]);t.dragCoord=r;for(var o,c=t,l=c.dragFromNode,s=c.dragToNode,u=c.renderInfo,d=c.dragNodeOrder,h=c.dragCoord,f=b()(c.boundaryCoord,2),p=f[0],m=f[1],y=u.cell,g=y.realQuadrant,v=y.ad,x=y.breadthPositive,k=y.parent,w=k.quadrantTreeLists[g-1],C=l.getNth(),E=s.getNth(),O=w.findIndex((function(e){return e===C})),P=w.findIndex((function(e){return e===E})),M="x"===v?h[0]:h[1],j=Math.max(p,Math.min(M,m)),S=x*d,R=P;(R-O)*d>=0;R-=d){var L=k.getChildren()[w[R]],A=Yp(L);if((j-("x"===v?A[0]:A[1]))*S>0){o=R;break}}t=void 0;var B=y.model,N=B.start,D=B.end;if(void 0!==o&&(1===d&&D!==o||-1===d&&N!==o)){var I=1===d?{end:o}:{start:o};i.command.execute("Update",{id:y.model.id,model:I})}else a.updateShape(u)}}))}},{key:"updateShape",value:function(e,t){this.diagram.viewport.zoom;var n=e.coveredCellsWithAllChildren,r=e.rectElement,a=e.handleElements,i=e.cell,o=e.centerBarElements,c=i.ad,l=i.breadthPositive,s=c,u="x"===s?"y":"x",d=t?e.coordCache:nr(n,(function(e){return e.getKeyShapeBox()})),h=d.minX,f=d.minY,p=d.maxX,m=d.maxY,y=!1;if(t){var g=t.dragNodeOrder,v=t.dragCoord,x=b()(t.boundaryCoord,2),k=x[0],w=x[1],C="x"===s?v[0]:v[1];C=Math.max(k,Math.min(C,w));var E=g*l==1;E?"x"===s?p=C:m=C:"x"===s?h=C:f=C,y=E?"max":"min"}else e.coordCache={minX:h,minY:f,maxX:p,maxY:m},y=!1;h-=2,p+=2,f-=2,m+=2;var O="x"===s?[p,f]:[h,m],P="x"===u?[p,f]:[h,m],M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"x",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=n/2,l=r/2,s=c<a?c:a,u=l<a?l:a,d="x"===i?Math.min(n-2*s,o):Math.min(r-2*u,o),h="x"===i?[["l",n/2-s-d/2,0],["m",d,0],["l",n/2-s-d/2,0]]:[["l",n-2*s,0]],f="y"===i?[["l",0,r/2-u-d/2],["m",0,d],["l",0,r/2-u-d/2]]:[["l",0,r-2*u]],p="x"===i?[["l",-(n/2-s-d/2),0],["m",-d,0],["l",-(n/2-s-d/2),0]]:[["l",-(n-2*s),0]],m="y"===i?[["l",0,-(r/2-u-d/2)],["m",0,-d],["l",0,-(r/2-u-d/2)]]:[["l",0,-(r-2*u)]];return[["M",+e+ +s,t]].concat(h,[["a",s,u,0,0,1,s,u]],f,[["a",s,u,0,0,1,-s,u]],p,[["a",s,u,0,0,1,-s,-u]],m,[["a",s,u,0,0,1,s,-u]])}(h,f,p-h,m-f,4,u,22);r.update({d:M,"stroke-width":1});var j="x"===s?(f+m)/2-9:(h+p)/2-9,S="min"===y?4:3;o[0].update({d:"x"===s?"M".concat(h,",").concat(j+S/2," L").concat(h,",").concat(j+18-S/2):"M".concat(j+S/2,",").concat(f," L").concat(j+18-S/2,",").concat(f),"stroke-width":S,stroke:"min"===y?"rgba(95,159,246)":"rgba(129,179,248,0.6)"});var R="max"===y?4:3;o[1].update({d:"x"===s?"M".concat(p,",").concat(j+R/2," L").concat(p,",").concat(j+18-R/2):"M".concat(j+R/2,",").concat(m," L").concat(j+18-R/2,",").concat(m),"stroke-width":R,stroke:"max"===y?"rgba(95,159,246)":"rgba(129,179,248,0.6)"}),a[0].update({d:"M".concat(h,",").concat(f," L").concat(P.join(",")),"stroke-width":8}),a[1].update({d:"M".concat(O.join(",")," L").concat(p,",").concat(m),"stroke-width":8})}},{key:"draw",value:function(){var e=this;this.arr.forEach((function(t){e.updateShape(t)}))}},{key:"clear",value:function(){this.destroyed||(this.arr=[],this.group.clear(),this.group.remove(),this.eventHelper.unbind())}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.diagram=void 0,this.group=void 0,this.arr=void 0,this.destroyed=!0}}]),e}();c()(Gp,"className","AbstractView");var Hp={Cells:[ef,uf],Extends:[Bp,Gp],defaultCursors:{},modes:[{mode:"edit",Behaviours:[hf,ff,Xf,Zf,Qf,tp,np,mf,rp,ip,op,cp,Np,Dp,function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(t){var n=t.selections;e.abstractView.select(n)}))}}]),n}(),Ip,Fp]},{mode:"read",Behaviours:[hf,ip,pf,tp,np,mf]},{mode:"beginAddMindmapStem",Behaviours:[hf,ep]}],Commands:[lp,up,hp,fp,pp,gp,dp,yp,vp,xp,kp,wp,Mp]};function Wp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Vp=function(e){j()(n,Jl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"parent",void 0),r}return g()(n,[{key:"init",value:function(e){I()(A()(n.prototype),"init",this).call(this,e),this.textarea=new us(this),this.render(),this.updateModel(this.model),this.parent.children.push(this)}},{key:"canTextVerticalAlign",value:function(){return!1}},{key:"canConnect",value:function(){return!1}},{key:"canRotate",value:function(){return!1}},{key:"getTextareaPosition",value:function(e){return{x:Math.max((this.width-e.width)/2,4),y:(this.height-e.height)/2+(this.offsetY||0)}}},{key:"render",value:function(){var e=ws({name:"rect",x:0,y:0,width:1,height:1});e.update({fill:"transparent"}),this.shapeElement=e,this.graphicGroup.add(e),this.textarea.render(),"edit"===this.diagram.interaction.currentMode&&this.capture(!1,!0)}},{key:"updateModel",value:function(e){var t;I()(A()(n.prototype),"updateModel",this).call(this,e),this.width=(null===(t=this.parent)||void 0===t?void 0:t.width)||0,this.textarea.update()}},{key:"draw",value:function(){this.drawPosition(),this.updateCache()}},{key:"drawMatrix",value:function(){this.isCacheStale("matrix")&&this.graphicGroup.update({matrix:this.matrix})}},{key:"drawOpacity",value:function(e){this.graphicGroup.attr({opacity:e})}},{key:"drawTextRegion",value:function(){var e=this.offsetY,t=this.width,n=this.height,r={width:t,height:n,d:wn(0,e,t,n)};this.shapeElement.update(r)}},{key:"drawPosition",value:function(){this.drawMatrix(),this.isCacheStale("width","height","offsetY")&&(this.drawTextRegion(),this.textarea.draw()),this.updateCache()}},{key:"getOuterWidth",value:function(){return this.width}},{key:"capture",value:function(e,t){t&&I()(A()(n.prototype),"capture",this).call(this,e)}},{key:"updateCache",value:function(){var e=this,t=this.cache;["width","offsetY","height","rotate"].forEach((function(n){var r=e[n];t[n]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"destroy",value:function(){I()(A()(n.prototype),"destroy",this).call(this)}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{textareaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'SFMono-Regular, Consolas, "Liberation Mono", Menlo, Courier, monospace',"min-height":"16px","min-width":"24px","line-height":"1.45","word-break":"break-word",color:"#262626"}}],multiSelectHighlight:!1,isStackCell:!0,penetratedKeys:["x","y","width","height","rotate","html","shape","offsetY","id","nth"]})}}]),n}();function Up(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Up(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Up(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(Vp,"className","StackCell");var Kp=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"group",new xr),c()(P()(e),"elements",void 0),e}return g()(n,[{key:"render",value:function(){this.elements=[],Hn(this.cell)&&this.cell.clipGroup.add(this.group)}},{key:"renderElements",value:function(){var e=this,t=this.group;this.cell.stencil.scene.forEach((function(n){var r=ws(n);n.attr&&r.update(n.attr),t.add(r),e.elements.push(r)}))}},{key:"update",value:function(){var e=this.cell,t=this.elements;e.isCacheStale("shape")&&(t&&t.forEach((function(e){return e.remove()})),this.renderElements())}},{key:"draw",value:function(){var e,t,n=this.cell,r=this.elements,a=n.stroke,i=n.heights,o=Zp({},n.convertStrokeStyle());n.isCacheStale("stroke")&&(o.stroke=a.color,o["stroke-width"]=a.width);for(var c=[i[0]],l=1;l<i.length;l++){var s=i[l];c[l]=c[l-1]+s}r.forEach((function(r,a){if(n.isCacheStale("width","height")){var i=n.stencil,l=n.width;e=l/i.width,t=c[a]/i.scene[a].height}e&&t?r.update(Zp(Zp({},o),{},{d:r.getPath(e,t)})):r.update(o),e=t=void 0}))}}]),n}();function Qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Jp=function(e){j()(n,xs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;m()(this,n);var a=mo[mo.findIndex((function(t){return t.name===e.model.shape}))],i={row:a.row,heights:a.heights};return r=t.call(this,f()(e,i)),c()(P()(r),"children",void 0),r}return g()(n,[{key:"canText",value:function(){return!1}},{key:"getChildren",value:function(){return this.children}},{key:"createOutlineShapeElement",value:function(){if(this.isCacheStale("shape"))return ws(this.stencil.outline)}},{key:"updateStencil",value:function(){var e=this,t=this.shape,n=this.stencils,r=t||"process";if(!this.stencil||this.stencil.name!==r){var a=n.find((function(e){return e.name===r}));if(!a)throw new Error("unknown shape ".concat(r));this.stencil=a,this.updateAnchors(),["width","height"].forEach((function(t){null==e[t]&&(e[t]=a[t])})),this.cache={}}}},{key:"updateAnchors",value:function(){for(var e=this.anchors,t=this.stencil,n=function(n){var r=e[n],a=t.anchors.find((function(e){return e.name===r.name}));a&&(e[n]=a)},r=0;r<e.length;r++)n(r)}},{key:"afterUpdateModel",value:function(){this.updateStencil(),I()(A()(n.prototype),"afterUpdateModel",this).call(this)}},{key:"getKeyShape",value:function(){return this.outlineElement}},{key:"getOutlinePath",value:function(e){var t,n=this.width,r=this.heights,a=this.stencil,i=r.reduce((function(e,t){return e+t}),0);if(a.outline.path)t=a.outline.path(n,i);else{var o=n/a.width,c=i/a.height;t=e.getPath(o,c)}return t}},{key:"render",value:function(){I()(A()(n.prototype),"render",this).call(this);var e=this.model;e.width||(e.width=this.width),e.height||(e.height=this.height)}},{key:"enter",value:function(){this.capture(!1),this.children.forEach((function(e){return e.capture(!0,!0)}))}},{key:"exit",value:function(){this.capture(!0),this.children.forEach((function(e){return e.capture(!1,!0)}))}},{key:"_drawInner",value:function(){this.isCacheStale("height","width","heights")&&(this.subcells.forEach((function(e){return e.draw()})),this.updateCache())}},{key:"updateCache",value:function(){var e=this,t=this.cache;["x","y","width","height","heights","rotate","fill","stroke","opacity","shape"].forEach((function(n){var r=e[n];t[n]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"executeLayout",value:function(){var e=this,t=this.getZIndex(),n=[0];this.children.forEach((function(r,a){r.width=e.width,r.textarea.update();var i=r.textarea.getBBox();e.heights[a]=Math.max(i.height+12,30),r.matrix=e.matrix,r.height=e.heights[a],r.offsetY=n[a],r.opacity=e.opacity,n[a+1]=n[a]+e.heights[a],r.model.zIndex=t+a+1})),this.height=this.heights.reduce((function(e,t){return e+t}),0),this._drawInner()}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t})}}},{key:"drawOpacity",value:function(){var e=this;this.isCacheStale("opacity")&&(this.graphicGroup.attr({opacity:this.opacity}),this.children.forEach((function(t){t.drawOpacity(e.opacity)})))}},{key:"draw",value:function(){this.subcells.forEach((function(e){return e.draw()})),this.drawOpacity(),this.drawPosition(),this.updateCache()}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{stencils:mo,stroke:{color:"#595959",width:2},fill:{color:"#fff"},children:[],isStack:!0,resizeRotatePoints:["lc","rc","rotate"],penetratedKeys:["x","y","width","height","rotate","heights","shape"],Subcells:[Kp]})}}]),n}();c()(Jp,"className","StackStem");var $p=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.model,t=this.htmls;e.children=[];for(var r=0;r<e.row;r++)e.children.push({html:t[r],id:Object(q.a)(),nth:r});I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()($p,"className","AddStack");var em=function(e){j()(n,hh);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.model,t=this.htmls;e.children=[];for(var r=0;r<e.row;r++)e.children.push({html:t[r],id:Object(q.a)(),nth:r});I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()(em,"className","AddStackVertex");var tm={Cells:[Vp,Jp],Extends:[],defaultCursors:{},modes:[{mode:"edit",Behaviours:[function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"stack",void 0),c()(P()(e),"diagram",void 0),e}return g()(n,[{key:"init",value:function(){this._initEvent()}},{key:"_initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"dblclick",(function(n){var r=t.viewport.invertClient([n.clientX,n.clientY,1]),a=t.getCell(n.target);if(a&&Jn(a)){var i,o=a;e.stack=o,o.getChildren().forEach((function(e){e.isPointInShape({x:r[0],y:r[1]})&&(i=e)})),o.enter(),i&&(t.selector.select(i),t.contentEditor.beginEdit())}})),this.bind(t,"afterselect",(function(t){var n=t.selections;e.stack&&n.findIndex((function(t){var n;return t.model.id===e.stack.model.id||(null===(n=t.parent)||void 0===n?void 0:n.model.id)===e.stack.model.id}))<0&&e.stack.exit()}))}}]),n}()]},{mode:"read",Behaviours:[]}],Commands:[$p,em]};function nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nm(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Yh.registerClipboardProcessor("swimlane",{lake:function(e){var t=e.model,n=e.offset;t.x=(t.x||0)+n[0],t.y=(t.y||0)+n[1],t.contain=[]}});var am=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"group",void 0),c()(P()(e),"horizentalElements",void 0),c()(P()(e),"verticalElements",void 0),c()(P()(e),"length",0),c()(P()(e),"numberWidth",0),c()(P()(e),"numberHeight",0),e}return g()(n,[{key:"render",value:function(){var e=this.cell;this.group=new xr,e.group.add(this.group)}},{key:"init",value:function(){var e=this,t=this.cell;this.group.clear(),this.horizentalElements=[],this.verticalElements=[],t.widths.forEach((function(){var t=ws({});e.group.add(t),e.verticalElements.push(t)})),t.heights.forEach((function(){var t=ws({});e.group.add(t),e.horizentalElements.push(t)}))}},{key:"update",value:function(){var e,t,n,r,a,i,o,c;this.numberWidth===(null===(e=this.cell.model)||void 0===e||null===(t=e.widths)||void 0===t?void 0:t.length)&&this.numberHeight===(null===(n=this.cell.model)||void 0===n||null===(r=n.heights)||void 0===r?void 0:r.length)||(this.init(),this.numberWidth=null===(a=this.cell.model)||void 0===a||null===(i=a.widths)||void 0===i?void 0:i.length,this.numberHeight=null===(o=this.cell.model)||void 0===o||null===(c=o.heights)||void 0===c?void 0:c.length)}},{key:"draw",value:function(){var e=this.cell;if(e.isCacheStale("stroke","width","height","widths","heights")){var t=rm(rm({},e.convertStrokeStyle()),{},{stroke:e.stroke.color,"stroke-width":e.stroke.width,d:""});this.horizentalElements.forEach((function(n,r){var a=e.heights[r]*e.height;t.d="M0,".concat(a," L").concat(e.width,",").concat(a),n.update(t)})),this.verticalElements.forEach((function(n,r){var a=e.widths[r]*e.width;t.d="M".concat(a,",0 L").concat(a,",").concat(e.height),n.update(t)}))}}}]),n}();var im=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"group",void 0),c()(P()(e),"element",void 0),e}return g()(n,[{key:"render",value:function(){var e=this.cell;this.group=new xr,this.element=ws({stroke:"none",fill:"transparent"}),this.group.add(this.element),e.graphicGroup.prepend(this.group)}},{key:"update",value:function(){}},{key:"draw",value:function(){var e=this.cell;if(e.isCacheStale("width","height","widths","heights")){var t={d:""};t.d=e.isVertical?wn(0,0,e.width,e.height*e.heights[0]):wn(0,0,e.width*e.widths[0],e.height),this.element.update(t)}}}]),n}();function om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?om(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):om(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lm=function(e){j()(n,Zl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"group",void 0),c()(P()(e),"elements",[]),c()(P()(e),"bc",void 0),c()(P()(e),"lc",void 0),c()(P()(e),"rc",void 0),c()(P()(e),"tc",void 0),e}return g()(n,[{key:"render",value:function(){var e=this.cell;this.group=new xr;for(var t=0;t<4;t++){var n=ws({stroke:"none","stroke-width":1});this.group.add(n),this.elements.push(n)}e.clipGroup.prepend(this.group),this.tc=this.elements[0],this.rc=this.elements[1],this.bc=this.elements[2],this.lc=this.elements[3]}},{key:"update",value:function(){}},{key:"draw",value:function(){var e=this.cell;if(e.isCacheStale("width","height","stroke")){var t=e.width,n=e.height,r=e.convertStrokeStyle();r.stroke="#fff",r["stroke-width"]=2*e.stroke.width,this.tc.update(cm(cm({},r),{},{d:In(0,0,t,0)})),this.rc.update(cm(cm({},r),{},{d:In(t,0,t,n)})),this.bc.update(cm(cm({},r),{},{d:In(t,n,0,n)})),this.lc.update(cm(cm({},r),{},{d:In(0,n,0,0)}))}}}]),n}();function sm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var um=function(e){j()(n,Jl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"clipGroup",new xr),c()(P()(r),"clipPathID",Object(q.a)()),c()(P()(r),"group",new xr),c()(P()(r),"isSwimlane",!0),c()(P()(r),"stencils",void 0),c()(P()(r),"stencil",void 0),c()(P()(r),"widths",void 0),c()(P()(r),"heights",void 0),c()(P()(r),"children",void 0),c()(P()(r),"contain",void 0),c()(P()(r),"shape",void 0),r}return g()(n,[{key:"init",value:function(e){var t=this;I()(A()(n.prototype),"init",this).call(this,e),this.clipGroup.update({"clip-path":"url(#".concat(this.clipPathID,")")}),this.clipGroup.add(this.group),this.group.capture(!1),this.graphicGroup.prepend(this.clipGroup),this.subcells=this.Subcells.map((function(e){return new e(t)})),this.subcells.forEach((function(e){return e.render()})),this.model.contain=this.model.contain||[],this.updateModel(this.model),this.eventDelegation()}},{key:"updateDefaultSize",value:function(){var e=this,t=this.stencil;t&&["width","height"].forEach((function(n){null==e[n]&&(e[n]=t[n])}))}},{key:"isVertical",get:function(){return"swimlane-vertical"===this.model.shape}},{key:"getTextBox",value:function(){var e=this.x,t=this.y;this.widths;var n=this.heights,r=this.width,a=this.height;return this.isVertical?{x:e,y:t,width:r,height:n[0]*a}:this.getBBox()}},{key:"containerBBox",get:function(){if(this.isVertical){var e=this.y+this.heights[0]*this.height,t=(1-this.heights[0])*this.height;return{x:this.x,y:e,width:this.width,height:t}}var n=this.x+this.widths[0]*this.width,r=(1-this.widths[0])*this.width;return{x:n,y:this.y,width:r,height:this.height}}},{key:"containerBBoxs",get:function(){var e=this;if(this.isVertical){var t=this.height*this.heights[0];return this.children.map((function(n){return{x:e.x+n.offsetX,y:e.y+t,width:n.width,height:e.height-t}}))}var n=this.width*this.widths[0];return this.children.map((function(t){return{x:e.x+n,y:e.y+t.offsetY,width:e.width-n,height:t.height}}))}},{key:"canUpdateText",value:function(){return!0}},{key:"getCanTextCell",value:function(){return this.children}},{key:"getOutlinePath",value:function(e){var t=this.width,n=this.height,r=this.stencil;if(this.isCacheStale("width","height")){var a;if(r.outline.path)a=r.outline.path(t,n);else{var i=t/r.width,o=n/r.height;a=e.getPath(i,o)}return a}}},{key:"canConnect",value:function(){return!1}},{key:"canRotate",value:function(){return!1}},{key:"canText",value:function(){return!1}},{key:"enter",value:function(){this.capture(!1),this.children.forEach((function(e){return e.capture(!0)}))}},{key:"exit",value:function(){this.capture(!0),this.children.forEach((function(e){return e.capture(!1)}))}},{key:"getChildren",value:function(){return this.children}},{key:"getKeyShape",value:function(){return this.outlineElement}},{key:"createOutlineShapeElement",value:function(){if(this.isCacheStale("shape"))return ws(this.stencil.outline)}},{key:"updateModel",value:function(e){I()(A()(n.prototype),"updateModel",this).call(this,e),this.afterUpdateModel()}},{key:"afterUpdateModel",value:function(){this.updateDefaultSize(),this._updateStencil(),this.updateMatrix(),this.subcells.forEach((function(e){e.update()}))}},{key:"_updateStencil",value:function(){var e=this.shape,t=this.stencils,n=e||"swimlane-vertical";if(!this.stencil||this.stencil.name!==n){var r=t.find((function(e){return e.name===n}));if(!r)throw new Error("unknown shape ".concat(n));this.stencil=r,this.updateDefaultSize(),this.cache={}}}},{key:"_layoutZIndex",value:function(){var e=this,t=this.diagram,n=t.rootGroup;t.contentEditor.isBegin||this.children.forEach((function(t){n.insertBefore(t.graphicGroup,e.graphicGroup)}))}},{key:"executeLayout",value:function(){var e=this;this._layoutZIndex();var t;t="swimlane-vertical"===this.shape?[0].concat(N()(this.widths),[1]):[0].concat(N()(this.heights),[1]),this.children.forEach((function(n,r){n.matrix=e.matrix,"swimlane-vertical"===e.shape?(n.offsetX=t[r]*e.width,n.offsetY=0,n.width=(t[r+1]-t[r])*e.width,n.height=e.height,n.textHeight=e.height*e.heights[0],n.textWidth=n.width):(n.offsetX=0,n.offsetY=t[r]*e.height,n.width=e.width,n.height=(t[r+1]-t[r])*e.height,n.textHeight=n.height,n.textWidth=e.width*e.widths[0]),n.x=e.x+n.offsetX,n.y=e.y+n.offsetY,n.textarea.update(),n.opacity=e.opacity,n.matrix=si(n.x,n.y,n.width,n.height,0)}))}},{key:"updateCache",value:function(){var e=this,t=this.cache;["x","y","width","widths","height","heights","rotate","shape","stroke","controlPoints","round","opacity"].forEach((function(n){var r=e[n];t[n]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sm(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"draw",value:function(){this.subcells.forEach((function(e){return e.draw()})),this.drawOpacity(),this.drawPosition(),this.updateCache()}},{key:"drawOpacity",value:function(){var e=this;this.isCacheStale("opacity")&&(this.graphicGroup.attr({opacity:this.opacity}),this.children.forEach((function(t){t.drawOpacity(e.opacity)})))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t})}}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{stencils:mo,stroke:{color:"#595959",width:2},rotate:0,children:[],penetratedKeys:["x","y","width","height","widths","heights","shape","htmls","stroke","contain","opacity"],resizeRotatePoints:["tl","tr","bl","br","tc","bc","lc","rc"],Subcells:[am,vs,ns,lm,im]})}}]),n}();function dm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}c()(um,"className","SwimlaneStem");var hm=function(e){j()(n,Jl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"textVerticalAlign",void 0),c()(P()(r),"offsetX",0),c()(P()(r),"offsetY",0),c()(P()(r),"textWidth",0),c()(P()(r),"textHeight",0),c()(P()(r),"textRegion",void 0),c()(P()(r),"textarea",void 0),c()(P()(r),"parent",void 0),r}return g()(n,[{key:"init",value:function(e){I()(A()(n.prototype),"init",this).call(this,e),this.textarea=new us(this),this.render(),this.updateModel(this.model),this.parent.children.splice(this.nth,0,this)}},{key:"getBBox",value:function(){var e=this.x,t=this.y,n=this.width,r=this.height;return{minX:e,minY:t,maxX:e+n,maxY:t+r,x:e,y:t,width:n,height:r}}},{key:"canRotate",value:function(){return!1}},{key:"contanerBBox",get:function(){return this.parent.containerBBoxs[this.nth]}},{key:"createTextRegion",value:function(){var e=ws({name:"rect",x:0,y:0,width:1,height:1});e.update({fill:this.fill.color,stroke:"none"}),this.textRegion=e,this.graphicGroup.add(e)}},{key:"render",value:function(){this.createTextRegion(),this.textarea.render(),this.capture(!1)}},{key:"updateModel",value:function(e){I()(A()(n.prototype),"updateModel",this).call(this,e),this.textarea.update()}},{key:"canConnect",value:function(){return!1}},{key:"getTextareaPosition",value:function(e){var t=this.textVerticalAlign,n={x:Math.max((this.textWidth-e.width)/2,4),y:0};return n.y="top"===t?4:"bottom"===t?this.textHeight-e.height:(this.textHeight-e.height)/2,n}},{key:"getPadding",value:function(){return[4,4,4,4]}},{key:"getOuterWidth",value:function(){return this.textWidth}},{key:"getTextBox",value:function(){return{x:this.x,y:this.y,width:this.textWidth,height:this.textHeight}}},{key:"drawTextRegion",value:function(){var e=this.width,t=this.textHeight,n={width:e,textHeight:t,d:wn(0,0,this.textWidth,t)};this.textRegion.update(n)}},{key:"updateCache",value:function(e){var t=this,n=this.cache;(e=e||["html","width","offsetX","offsetY","height","textWidth","textHeight","textVerticalAlign"]).forEach((function(e){var r=t[e];n[e]=s()(r)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dm(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r):r}))}},{key:"drawMatrix",value:function(){this.isCacheStale("matrix")&&this.graphicGroup.update({matrix:this.matrix})}},{key:"drawOpacity",value:function(e){this.isCacheStale("opacity")&&(e=e||this.opacity,this.graphicGroup.attr({opacity:e}),this.updateCache(["opacity"]))}},{key:"drawFill",value:function(){this.isCacheStale("fill")&&(0===this.nth&&(this.parent.fill=this.fill),this.textRegion.update({fill:this.fill.color}))}},{key:"drawPosition",value:function(){this.drawMatrix(),this.isCacheStale("textWidth","textHeight","offsetY","offsetX","html","textVerticalAlign")&&(this.drawTextRegion(),this.textarea.draw()),this.updateCache()}},{key:"draw",value:function(){this.drawPosition(),this.drawOpacity(),this.drawFill(),this.updateCache()}},{key:"destroy",value:function(){Gt(this.parent.children,this),I()(A()(n.prototype),"destroy",this).call(this)}}],[{key:"getDefaultProps",value:function(){return oi(I()(A()(n),"getDefaultProps",this).call(this),{textareaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":"Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif","min-height":"24px","min-width":"24px","line-height":"1.74","word-break":"break-word","font-feature-settings":'"tnum"',"font-variant":"tabular-nums",margin:0,color:"#262626"}}],multiSelectHighlight:!1,isSwimlaneCell:!0,textVerticalAlign:"center",penetratedKeys:["html","id","nth","fill","textVerticalAlign"],resizeRotatePoints:[],width:0,height:0,fill:{color:"#fff"},matrix:[1,0,0,0,1,0,0,0,1]})}}]),n}();c()(hm,"className","SwimlaneCell");var fm=function(e){j()(n,Oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"execute",value:function(){var e=this.model,t=this.htmls,r=this.number;e.children=[],e.id=e.id||Object(q.a)();for(var a=0;a<r;a++){var i=Object(q.a)();e.children.push({html:t[a],id:i,nth:a})}I()(A()(n.prototype),"execute",this).call(this)}}]),n}();c()(fm,"className","AddSwimlane");var pm=function(e){j()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"set",void 0),c()(P()(e),"swimlaneID",void 0),e}return g()(n,[{key:"execute",value:function(){var e=this,t=this.id,r=this.diagram,a="string"==typeof t?r.find(t):t;this.swimlaneID=a.model.id,this.set=new Set,a.contain.forEach((function(t){var n=r.find(t);if(n){var i=Pa(n);e.set.has(i.model.id)||r.swimlane.isCellsInSwimlane([i],a)||(e.set.add(i.model.id),r.swimlane.unbind(i,a))}})),I()(A()(n.prototype),"execute",this).call(this)}},{key:"forward",value:function(){var e=this;this.set.forEach((function(t){e.diagram.swimlane.unbind(t,e.swimlaneID)})),I()(A()(n.prototype),"forward",this).call(this)}},{key:"backward",value:function(){var e=this;this.set.forEach((function(t){e.diagram.swimlane.bind(t,e.swimlaneID)})),I()(A()(n.prototype),"backward",this).call(this)}}]),n}();function mm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ym(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ym(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function ym(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}c()(pm,"className","UpdateSwimlane"),c()(pm,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return Kn(e)}))}));var gm=function(e){j()(n,Po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"originMap",new Map),c()(P()(e),"newMap",new Map),c()(P()(e),"ids",void 0),c()(P()(e),"parentID",void 0),e}return g()(n,[{key:"execute",value:function(){var e,t=this,r=this.id,a=this.parent,i=this.diagram;this.parentID=null==a||null===(e=a.model)||void 0===e?void 0:e.id;var o=r.map((function(e){return"string"==typeof e?t.diagram.find(e):e}));this.ids=r.map((function(e){return e.model.id})),o.forEach((function(e){var n=Pa(e),r=n.model.id;t.originMap.has(r)||(t.originMap.set(r,n.swimlane),t.newMap.set(r,t.parentID),i.swimlane.unbind(r,n.swimlane),i.swimlane.bind(r,t.parentID))})),I()(A()(n.prototype),"execute",this).call(this)}},{key:"forward",value:function(){var e,t=mm(this.originMap);try{for(t.s();!(e=t.n()).done;){var r=b()(e.value,2),a=r[0],i=r[1],o=this.newMap.get(a);this.diagram.swimlane.unbind(a,i),this.diagram.swimlane.bind(a,o)}}catch(e){t.e(e)}finally{t.f()}I()(A()(n.prototype),"forward",this).call(this)}},{key:"backward",value:function(){var e,t=mm(this.originMap);try{for(t.s();!(e=t.n()).done;){var r=b()(e.value,2),a=r[0],i=r[1],o=this.newMap.get(a);this.diagram.swimlane.unbind(a,o),this.diagram.swimlane.bind(a,i)}}catch(e){t.e(e)}finally{t.f()}I()(A()(n.prototype),"backward",this).call(this)}}]),n}();c()(gm,"className","InteractSwimlane");var vm=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"swimlaneID",void 0),e}return g()(n,[{key:"execute",value:function(){var e=this.diagram.selector.selections[0];this.swimlaneID=e.model.id,this._execute()}},{key:"forward",value:function(){this._execute()}},{key:"backward",value:function(){this._execute()}},{key:"_execute",value:function(){var e=this.diagram.find(this.swimlaneID);if(e&&Kn(e)){var t=this.switch(e),n=t.ids,r=t.nmodels;n.unshift(e.model.id);var a={width:e.height,height:e.width,widths:e.heights,heights:e.widths,shape:""};e.isVertical?a.shape="swimlane-horizontal":a.shape="swimlane-vertical",r.unshift(a),this.diagram.update(n,r)}}},{key:"getSwimlaneContainModels",value:function(e){var t=this.diagram,n=[];return Rt(e.model,(function(e){return"group"===e.type||!e.type||(n.push(e),!0)}),(function(e){return"swimlane"===e.type?e.contain.map((function(e){var n;return null===(n=t.find(e))||void 0===n?void 0:n.model})):e.children})),n}},{key:"switch",value:function(e){var t=this.getSwimlaneContainModels(e),n=e.isVertical?-90:90,r=e.center,a=[],i=t.map((function(t){a.push(t.id);var i={};e.isVertical?(i.x=r.x-t.x+r.x,i.y=t.y):(i.x=t.x,i.y=r.y-t.y+r.y);var o=qi(r,n,[{x:i.x,y:i.y,w:0,h:0,r:0}]),c=b()(o,1)[0];i.x=c.x,i.y=c.y;var l=Math.abs(e.width-e.height)/2;return e.width>e.height?(i.x-=l,i.y+=l):(i.x+=l,i.y-=l),i}));return{ids:a,nmodels:i}}}],[{key:"enable",value:function(e){return 1===e.selector.selections.length&&Kn(e.selector.selections[0])}}]),n}();c()(vm,"className","SwitchSwimlane");var bm=function(e){j()(n,Eo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"swimlaneID",void 0),c()(P()(r),"removeLaneModel",void 0),c()(P()(r),"addLaneModel",void 0),c()(P()(r),"field",void 0),c()(P()(r),"number",void 0),c()(P()(r),"startNumber",void 0),c()(P()(r),"ids",[]),c()(P()(r),"removedChildIDSet",new Set),r.number=e.number,r}return g()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.number;if(!(t<1||50<t)){var n=e.selector.selections[0];if(Qn(n)&&(n=n.parent),n&&Kn(n)){this.swimlaneID=n.model.id,this.field="height",n.isVertical&&(this.field="width");var r=n.children.length;if(this.startNumber=r,this.options={model:[],cellOptions:[]},this.processModel(n),t>this.startNumber){for(var a=r;a<t;a++){var i=Object(q.a)();this.ids.push(i),this.options.model.push({html:'<div style="text-align:center;"><span style="font-weight:bold;">Lane '.concat(a+1,"</span></div>"),fill:n.children[r-1].model.fill,id:i,nth:a}),this.options.cellOptions.push({parent:n.model.id,nth:a})}this.addLane(n)}else if(t<r){for(var o=t;o<r;o++){var c=n.children[o],l=c.model,s=l.nth,u=l.id,d=l.html,h=l.fill;this.ids.push(c.model.id),this.options.model.push({html:d,id:u,nth:s,fill:h}),this.options.cellOptions.push({parent:n.model.id,nth:s})}this.removeLane(n),this.unbind(n)}}}}},{key:"forward",value:function(){var e=this,t=this.diagram.find(this.swimlaneID);t&&(this.number>this.startNumber?this.addLane(t):(this.removeLane(t),this.removedChildIDSet.forEach((function(n){e.diagram.swimlane.unbind(n,t)}))))}},{key:"backward",value:function(){var e=this,t=this.diagram.find(this.swimlaneID);t&&(this.number>this.startNumber?this.removeLane(t):(this.addLane(t),this.removedChildIDSet.forEach((function(n){e.diagram.swimlane.bind(n,t)}))))}},{key:"unbind",value:function(e){var t=this;this.diagram.swimlane.updateContain(e).forEach((function(e){t.removedChildIDSet.add(e)}))}},{key:"processModel",value:function(e){var t=this,n=this.field,r=e.children.length;if(this.number>r){var a,i;this.removeLaneModel=(c()(a={},"".concat(n,"s"),e["".concat(n,"s")]),c()(a,n,e[n]),a);var o=[0].concat(N()(e["".concat(n,"s")]),[1]),l=e[n],s=e[n]+150*(this.number-r),u=[];o.forEach((function(e,t){t!==o.length-1&&u.push(l*(o[t+1]-o[t]))}));for(var d=r;d<this.number;d++)u.push(150);var h=[];u.reduce((function(e,t,n){return n>=u.length-1?0:(h.push((e+t)/s),e+t)}),0),this.addLaneModel=(c()(i={},"".concat(n,"s"),h),c()(i,n,s),i)}else if(this.number<r){var f,p;this.addLaneModel=(c()(f={},"".concat(n,"s"),e["".concat(n,"s")]),c()(f,n,e[n]),f);var m=[0].concat(N()(e["".concat(n,"s")]),[1]),y=e[n],g=[];m.forEach((function(e,n){n>=t.number||g.push(y*(m[n+1]-m[n]))}));var v=g.reduce((function(e,n,r){return r>=t.number?e:e+n}),0),b=[];g.reduce((function(e,t,n){return n===g.length-1?0:(b.push((e+t)/v),e+t)}),0),this.removeLaneModel=(c()(p={},"".concat(n,"s"),b),c()(p,n,v),p)}}},{key:"addLane",value:function(e){var t=this.diagram,n=this.field;e["".concat(n,"s")]=this.addLaneModel["".concat(n,"s")],e[n]=this.addLaneModel[n],t.add(this.options.model,this.options.cellOptions),t.update(e,this.addLaneModel)}},{key:"removeLane",value:function(e){var t=this.diagram,n=this.field;this.isRemovedInSelections()&&t.selector.select([]),t.remove(this.ids),e["".concat(n,"s")]=this.removeLaneModel["".concat(n,"s")],e[n]=this.removeLaneModel[n],t.update(e,this.removeLaneModel)}},{key:"isRemovedInSelections",value:function(){var e=this;return this.ids.some((function(t){return e.diagram.selector.selections.find((function(e){return e.model.id===t}))}))}}]),n}();c()(bm,"className","ChangeLaneNumber"),c()(bm,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&Kn(t[0])||t.every((function(e){return e.swimlane===t[0].swimlane}))}));var xm=function(){function e(t){m()(this,e),this.diagram=t,c()(this,"swimlanes",void 0),c()(this,"group",new xr),this.swimlanes=[],t.frontRootGroup.add(this.group)}return g()(e,[{key:"findSwimlane",value:function(e){if(0!==e.length&&!e.some((function(e){return Kn(e)}))){for(var t,n=this.getSwimlanes(),r=this.computeRegion(e),a=0;a<n.length;a++){var i=n[a];if(gi(er(i.containerBBox),r)){t=i;break}}return this.swimlanes=[],t}}},{key:"highlight",value:function(e){var t=this.diagram.connect.getCellConnectStateElement(e);this.group.clear(),this.group.add(t)}},{key:"unhighlight",value:function(){this.group.clear()}},{key:"updateContain",value:function(e){var t=this,n=[],r=this.diagram;return e.model.contain.forEach((function(a){var i=r.find(a);i&&(t.isCellsInSwimlane([i],e)||(r.swimlane.unbind(i,e),n.push(i.model.id)))})),n}},{key:"resetNth",value:function(e){var t=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){var n=t.diagram.find(e);n&&n.children.forEach((function(e,t){e.nth=t,e.model.nth=t}))}))}},{key:"isCellsInSwimlane",value:function(e,t){var n=this.diagram,r=e.map((function(e){return n.find(e)})).filter((function(e){return e})),a=this.computeRegion(r),i=n.find(t);return!!i&&gi(er(i.containerBBox),a)}},{key:"bind",value:function(e,t){var n=this.diagram,r=n.find(e),a=n.find(t);r&&(a&&Kn(a)?(r.swimlane=a.model.id,Ht(a.model.contain,r.model.id)):r.swimlane=void 0)}},{key:"unbind",value:function(e,t){var n=this.diagram,r=n.find(e),a=t?n.find(t):n.find(null==r?void 0:r.swimlane);a&&Kn(a)&&(r?(r.swimlane=void 0,Gt(a.model.contain,r.model.id)):"string"==typeof e&&Gt(a.model.contain,e))}},{key:"getSwimlanes",value:function(){return this.swimlanes.length>0?this.swimlanes:this.swimlanes=this.diagram.getCells().filter((function(e){return Kn(e)})).sort((function(e,t){return t.getZIndex()-e.getZIndex()}))}},{key:"getCellofSwimlane",value:function(e,t){for(var n=t.containerBBoxs,r=0,a=-1,i=0;i<n.length;i++){var o=n[i],c=_i(o,e);c>r&&(r=c,a=i)}return t.children[a]}},{key:"computeRegion",value:function(e){return nr(e,(function(e){return Gn(e)?e.getPointBox():e.getBBox()}))}},{key:"destroy",value:function(){this.group.remove()}}]),e}();c()(xm,"className","Swimlane");var km={lake_prevent_click_unselect:"true",swimlane_resize_controller:"true"},wm=function(e){j()(n,Du);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;return m()(this,n),r=t.call(this,e),c()(P()(r),"cell",void 0),c()(P()(r),"horizontals",[]),c()(P()(r),"verticals",[]),c()(P()(r),"swimlaneGroup",new xr),c()(P()(r),"swimlane",void 0),r}return g()(n,[{key:"init",value:function(e){I()(A()(n.prototype),"init",this).call(this,e),this.swimlane=Kn(e)?e:e.parent,this._init()}},{key:"_init",value:function(){this.swimlane.widths.length===this.verticals.length&&this.swimlane.heights.length===this.horizontals.length||(this.prepareResizeLines(),this.bindEvent())}},{key:"prepareResizeLines",value:function(){var e=this;this.swimlaneGroup.clear(),this.verticals=[],this.horizontals=[],this.swimlane.widths.forEach((function(){var t=Ea("vertical",km);t.visShape.update({stroke:"rgba(255,255,255,0)"}),e.swimlaneGroup.add(t.group),e.verticals.push(t)})),this.swimlane.heights.forEach((function(){var t=Ea("horizontal",km);t.visShape.update({stroke:"rgba(255,255,255,0)"}),e.swimlaneGroup.add(t.group),e.horizontals.push(t)}))}},{key:"update",value:function(){var e=this.swimlane,t=this.diagram;if(e){this._init();var r=1/t.viewport.zoom,a=r,i=8*r;I()(A()(n.prototype),"update",this).call(this),this.verticals.forEach((function(t,n){var r=e.percentage2Canvas([e.widths[n],0]),o=e.percentage2Canvas([e.widths[n],1]);t.shape.update({d:"M".concat(r.x,",").concat(r.y," L").concat(o.x,",").concat(o.y),"stroke-width":i}),t.visShape.update({d:"M".concat(r.x,",").concat(r.y," L").concat(o.x,",").concat(o.y),"stroke-width":a})})),this.horizontals.forEach((function(t,n){var r=e.percentage2Canvas([0,e.heights[n]]),o=e.percentage2Canvas([1,e.heights[n]]);t.shape.update({d:"M".concat(r.x,",").concat(r.y," L").concat(o.x,",").concat(o.y),"stroke-width":i}),t.visShape.update({d:"M".concat(r.x,",").concat(r.y," L").concat(o.x,",").concat(o.y),"stroke-width":a})}))}}},{key:"bindEvent",value:function(){var e,t,r,a,i=this,o=this.eventHelper,c=this.diagram,l=this.swimlane;this.eventHelper.unbind();var s={},u={},h=!1;[].concat(N()(this.verticals),N()(this.horizontals)).forEach((function(n,u){o.bind(n.shape,"mouseenter",(function(){n.visShape.update({stroke:"#3384F5"})})),o.bind(n.shape,"mouseleave",(function(){n.visShape.update({stroke:"rgba(255,255,255,0)"})})),o.bind(n.shape,"mousedown",(function(o){c.contentEditor.unbind(),r=n.name,e=l.widths,t=l.heights,a="horizontal"===n.name?u-i.verticals.length:u,s={widths:e,heights:t}}))})),o.bind(c,"mousemove",(function(n){if(r&&e&&t&&void 0!==a){var o,l,s=c.viewport.invertClient([n.clientX,n.clientY]),f=i.swimlane.canvas2percentage(s),p=[0].concat(N()(e),[1]),m=[0].concat(N()(t),[1]);"vertical"===r?(o=p[a],l=p[a+2],u.widths=d()(e),u.widths[a]=Dt(f[0],o,l)):(o=m[a],l=m[a+2],u.heights=d()(t),u.heights[a]=Dt(f[1],o,l)),c.update(i.swimlane,u)}else if(n.target.dataset.swimlane_resize_controller){var y;if("line"===n.target.dataset.type){var g=bn(n.target.getAttribute("d"));y=Aa([g[1][1]-g[0][1],g[1][2]-g[0][2]],{x:-1,y:-1,width:1,height:1},Math.PI/2+.01)}h||(h=!0),y&&c.setCursor(y)}else h&&(c.resetCursor(),h=!1)})),o.bind(c,"mouseup",(function(){Object.keys(u).length>0&&(we()(u.widths,e)&&we()(u.heights,t)||c.command.execute("Update",{id:l,model:u,originModels:[s],select:function(){}})),t=void 0,t=void 0,r=void 0,a=void 0,h=!1,s={},u={}})),I()(A()(n.prototype),"bindEvent",this).call(this)}},{key:"begin",value:function(){this.group.add(this.swimlaneGroup),I()(A()(n.prototype),"begin",this).call(this)}}]),n}();c()(wm,"className","SwimlaneResize");var Cm=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"swimlane",void 0),c()(P()(e),"diagram",void 0),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this._initEvent()}},{key:"_initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"dblclick",(function(n){var r=t.viewport.invertClient([n.clientX,n.clientY,1]),a=t.getCell(n.target);if(a&&Kn(a)){var i,o=a;e.swimlane=o,o.children.forEach((function(e){e.isPointInShape({x:r[0],y:r[1]})&&(i=e)})),o.enter(),i&&(t.selector.select(i),t.contentEditor.beginEdit())}})),this.bind(t,"afterselect",(function(t){var n=t.selections;e.swimlane&&n.findIndex((function(t){return t===e.swimlane||t.parent===e.swimlane}))<0&&e.swimlane.exit()}))}}]),n}();var Em=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"group",void 0),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this.group=new xr,e.backRootGroup.add(this.group),this._initEvent()}},{key:"_initEvent",value:function(){var e=this,t=this.diagram,n=[];this.bind(t,"afterselectionchange",(function(t){var r=t.selections.filter((function(e){return Kn(e)}));e.group.clear(),n=[],r.forEach((function(t){var r=ws({stroke:"none",fill:"transparent",d:wn(t.x,t.y,t.width,t.height)});r.css({cursor:"move"}),r.dataset({cellid:t.model.id}),n.push(r),e.group.add(r)}))}));var r=function(){n.forEach((function(e){var n=t.find(e.rendererElement.dataset.cellid);if(n){var r=n.containerBBox,a=r.x,i=r.y,o=r.width,c=r.height;e.update({d:wn(a,i,o,c)})}}))};this.bind(t,"cell:dragend",(function(){r()})),this.bind(t,"aftervertexresize",(function(){r()}))}},{key:"reset",value:function(){this.group.remove()}}]),n}();var Om=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"group",void 0),c()(P()(e),"swimlane",void 0),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this.group=new xr,e.backRootGroup.add(this.group)}},{key:"_initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"afterselectionchange",(function(t){var n,r,a=t.selections,i=a[0];i&&(Kn(i)?r=i:Qn(i)&&(r=i.parent),r&&(e.swimlane=r,a.every((function(e){return Kn(e)?r===e:!!Qn(e)&&r===e.parent}))))?r.swimlaneExtension.show():null===(n=e.swimlane)||void 0===n||n.swimlaneExtension.hide()}))}},{key:"reset",value:function(){this.group.remove()}}]),n}();var Pm=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"group",void 0),c()(P()(e),"swimlane",void 0),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this.group=new xr,e.backRootGroup.add(this.group),this._initEvent()}},{key:"_initEvent",value:function(){var e=this.diagram;this.bind(e,"afterimport",(function(){e.getCells().forEach((function(t){if(Kn(t)){var n,r=[];null===(n=t.model.contain)||void 0===n||n.forEach((function(n){var a=e.find(n);a?a.swimlane=t.model.id:r.push(n)})),Gt.apply(void 0,[t.model.contain].concat(r))}}))}))}}]),n}();function Mm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jm(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sm=function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"weakMap",new WeakMap),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this._initEvent()}},{key:"_initEvent",value:function(){var e=this,t=["Add","AddVertex","AddStack","AddStackVertex"],n=this.diagram;this.bind(n,"aftercommandexecute",(function(r){var a=r.commandName,i=r.command;if(t.includes(a)){var o=new Map,c=Array.isArray(i.model)?i.model:[i.model],l=!1;c.forEach((function(e){var t=n.find(e.id);if(t){var r=Pa(t);if(!o.has(r.model.id)){var a,i=null===(a=n.swimlane)||void 0===a?void 0:a.findSwimlane([r]);i&&(l=!0,n.swimlane.bind(r,i),o.set(r.model.id,i.model.id))}}})),l&&e.weakMap.set(i,o)}})),this.bind(n,"beforecommandbackward",(function(n){var r=n.command,a=e.weakMap.get(r);if(a&&t.includes(r.commandName)){var i,o=Mm(a);try{for(o.s();!(i=o.n()).done;){var c=b()(i.value,2),l=c[0],s=c[1];e.diagram.swimlane.unbind(l,s)}}catch(e){o.e(e)}finally{o.f()}}})),this.bind(n,"aftercommandforward",(function(n){var r=n.command,a=e.weakMap.get(r);if(a&&t.includes(r.commandName)){var i,o=Mm(a);try{for(o.s();!(i=o.n()).done;){var c=b()(i.value,2),l=c[0],s=c[1];e.diagram.swimlane.bind(l,s)}}catch(e){o.e(e)}finally{o.f()}}}))}}]),n}();function Rm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Lm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lm(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Lm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Am=g()((function e(){m()(this,e),c()(this,"map",new Map),c()(this,"groupID",void 0),c()(this,"swimlaneID",void 0)}));function Bm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Nm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nm(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dm=function(){var e={};return Array.from(arguments).forEach((function(t){Object.keys(t).forEach((function(n){var r=t[n];s()(r)?e[n]?Object.assign(e[n],r):e[n]=Object.assign({},r):Array.isArray(r)?e[n]?e[n]=[].concat(e[n],r):e[n]=[].concat(r):e[n]=r}))})),e}(Vh,Hp,tm,{Cells:[um,hm],Extends:[xm,wm],defaultCursors:{},modes:[{mode:"edit",Behaviours:[Om,Cm,Em,Pm,Sm,function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"weakMap",new WeakMap),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this._initEvent()}},{key:"_initEvent",value:function(){var e,t=this,n=this.diagram;this.bind(n,"beforecommandexecute",(function(r){var a=r.commandName;if("Group"===a)e=N()(n.selector.selections);else if("UnGroup"===a){var i=new Am,o=!1;n.selector.selections.forEach((function(e){e.swimlane&&(i.map.set(e.model.id,e.swimlane),o=!0)})),o&&(t.weakMap.set(r.command,i),t.unGroupForward(i))}})),this.bind(n,"aftercommandexecute",(function(r){if(e&&"Group"===r.commandName){var a=new Am,i=a.map,o=!1,c=!1;if(e.some((function(e){return e.swimlane}))&&(o=!0),e.forEach((function(e){Kn(e)&&(c=!0),i.set(e.model.id,e.swimlane)})),o&&!c){e.forEach((function(e){n.swimlane.unbind(e,e.swimlane)}));var l=e[0].parent;if(l){a.groupID=l.model.id;var s=n.swimlane.findSwimlane([l]);s&&(n.swimlane.bind(l,s),a.swimlaneID=s.model.id)}e=void 0,t.weakMap.set(r.command,a)}}})),this.bind(n,"aftercommandbackward",(function(e){var r=e.command,a=t.weakMap.get(r);if(a)if("Group"===r.commandName){n.swimlane.unbind(a.groupID,a.swimlaneID);var i,o=Rm(a.map.entries());try{for(o.s();!(i=o.n()).done;){var c=b()(i.value,2),l=c[0],s=c[1];n.swimlane.bind(l,s)}}catch(e){o.e(e)}finally{o.f()}}else if("UnGroup"===r.commandName){var u,d=Rm(a.map);try{var h=function(){var e=b()(u.value,2),t=e[0],r=e[1],a=n.find(t),i=n.find(r);a&&i&&(n.swimlane.bind(a,i),a.children.forEach((function(e){n.swimlane.unbind(e,i)})))};for(d.s();!(u=d.n()).done;)h()}catch(e){d.e(e)}finally{d.f()}}})),this.bind(n,"aftercommandforward",(function(e){var r=e.command;if("Group"===r.commandName){var a=t.weakMap.get(r);if(a){var i=n.find(a.groupID);if(i){var o,c=Rm(a.map);try{for(c.s();!(o=c.n()).done;){var l=b()(o.value,1)[0];n.swimlane.unbind(l)}}catch(e){c.e(e)}finally{c.f()}var s=n.swimlane.findSwimlane([i]);s&&n.swimlane.bind(i,s)}}}})),this.bind(n,"beforecommandforward",(function(e){var n=e.command,r=t.weakMap.get(n);r&&"UnGroup"===n.commandName&&t.unGroupForward(r)}))}},{key:"unGroupForward",value:function(e){var t,n=this.diagram,r=Rm(e.map);try{var a=function(){var e=b()(t.value,2),r=e[0],a=e[1],i=n.find(r),o=n.find(a);i&&o&&(n.swimlane.unbind(i,o),i.children.forEach((function(e){n.swimlane.isCellsInSwimlane([e],o)&&n.swimlane.bind(e,o)})))};for(r.s();!(t=r.n()).done;)a()}catch(e){r.e(e)}finally{r.f()}}}]),n}(),function(e){j()(n,ll);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){var e;m()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),c()(P()(e),"diagram",void 0),c()(P()(e),"weakMap",new WeakMap),c()(P()(e),"DeleteNames",["Delete"]),e}return g()(n,[{key:"init",value:function(e){this.diagram=e,this.initEvent()}},{key:"getRecords",value:function(e){return this.weakMap.get(e)}},{key:"check",value:function(e){var t=this.getRecords(e);if(t&&this.DeleteNames.includes(e.commandName))return t}},{key:"initEvent",value:function(){var e=this,t=this.diagram;this.bind(t,"beforecommandexecute",(function(n){var r=n.commandName,a=n.command;if(e.DeleteNames.includes(r)){var o=a.cells||t.selector.selections,l=o.map((function(e){return t.find(e)}));if(l.some((function(e){return Qn(e)}))){var s=new Set,u=new Map;l.forEach((function(e){if(Kn(e))s.add(e.model.id);else if(Qn(e)){var t,n=e.parent.model.id,r=e.model.id;u.has(n)?null===(t=u.get(n))||void 0===t||t.add(r):u.set(n,new Set([r]))}}));var d={unbindIDs:new Map,newModels:new Map,originModels:new Map};e.weakMap.set(a,d);var h,f=Bm(u);try{var p=function(){var e=b()(h.value,2),n=e[0],r=e[1];if(s.has(n))return Gt.apply(void 0,[o].concat(N()(tt()(Array,N()(r))))),"continue";var a=t.find(n);if(!a)return{v:void 0};if(r.size===a.children.length)Gt.apply(void 0,[o].concat(N()(tt()(Array,N()(r))))),o.push(n);else{var i,l,u="height";a.isVertical&&(u="width");var f=0,p=[],m=[];a.children.forEach((function(e){r.has(e.model.id)||(f+=e[u],p.push(e[u]))})),p.reduce((function(e,t,n){return n>=p.length-1?e:(m.push((e+t)/f),e+t)}),0),d.originModels.set(a.model.id,(c()(i={},u,a[u]),c()(i,"".concat(u,"s"),a["".concat(u,"s")]),i)),d.newModels.set(a.model.id,(c()(l={},u,f),c()(l,"".concat(u,"s"),m),l)),a["".concat(u,"s")]=m,a[u]=f,d.unbindIDs.set(a.model.id,t.swimlane.updateContain(a))}};for(f.s();!(h=f.n()).done;){var m=p();if("continue"!==m&&"object"===i()(m))return m.v}}catch(e){f.e(e)}finally{f.f()}a.cells=o}}}));var n=function(t){var n,r=e.diagram,a=[],i=[],o=Bm(t.newModels);try{var c=function(){var e,o=b()(n.value,2),c=o[0],l=o[1];if(a.push(c),i.push(l),!r.find(c))return"continue";null===(e=t.unbindIDs.get(c))||void 0===e||e.forEach((function(e){r.swimlane.unbind(e,c)}))};for(o.s();!(n=o.n()).done;)c()}catch(e){o.e(e)}finally{o.f()}a.length>0&&(r.update(a,i),r.swimlane.resetNth(a))};this.bind(t,"aftercommandexecute",(function(t){var r=t.command;if(e.check(r)){var a=e.getRecords(r);a&&n(a)}})),this.bind(t,"aftercommandforward",(function(t){var r=t.command;if(e.check(r)){var a=e.getRecords(r);a&&n(a)}})),this.bind(t,"beforecommandbackward",(function(t){var n=t.command,r=e.weakMap.get(n);r&&e.DeleteNames.includes(n.commandName)&&function(){var t,n=e.diagram,a=[],i=[],o=Bm(r.originModels);try{var c=function(){var e,o=b()(t.value,2),c=o[0],l=o[1],s=n.find(c);if(!s)return"continue";null===(e=r.unbindIDs.get(c))||void 0===e||e.forEach((function(e){n.swimlane.bind(e,c)})),Object.assign(s,l),a.push(c),i.push(l)};for(o.s();!(t=o.n()).done;)c()}catch(e){o.e(e)}finally{o.f()}}()})),this.bind(t,"aftercommandbackward",(function(n){var r=n.command,a=e.weakMap.get(r);if(a&&e.DeleteNames.includes(r.commandName)){var i,o=[],c=[],l=Bm(a.originModels);try{for(l.s();!(i=l.n()).done;){var s=b()(i.value,2),u=s[0],d=s[1];t.find(u)&&(o.push(u),c.push(d))}}catch(e){l.e(e)}finally{l.f()}o.length>0&&(t.update(o,c),t.swimlane.resetNth(o))}}))}}]),n}()]},{mode:"read",Behaviours:[]}],Commands:[bm,fm,pm,gm,vm]}),Im=Object.freeze({__proto__:null,Board:Dm});jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-toolbar-dropdown .ant-btn:after {\n  display: none;\n}\n.lake-diagram-toolbar-dropdown .ant-btn.ant-dropdown-trigger:hover {\n  background: var(--yq-border-primary);\n  border-radius: 2px;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button {\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  display: flex;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button:hover {\n  border-color: var(--yq-border-primary);\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: var(--yq-border-primary);\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:hover {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:hover {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: 30px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon:before {\n  content: '';\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-toolbar-dropdown-menu .lake-icon {\n  font-size: 16px;\n}\n");var Tm=["mode"];function _m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_m(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zm(e){return e.overlay?e.overlay:it.a.createElement(mt.a,{onClick:e.onSelect,className:st()("lake-diagram-toolbar-dropdown-menu",e.menuClassName)},e.data.map((function(e){return it.a.createElement(mt.a.Item,{key:e.key},it.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}))})))}function Fm(e){var t=e.command,n=e.name;return it.a.createElement("div",{className:"lake-diagram-toolbar-command lake-diagram-toolbar-dropdown"},it.a.createElement(pt.a,{overlay:zm(qm(qm({},e),{},{onSelect:function(n){var r=n.key;e.onSelect?e.onSelect({key:r}):e.execCommand(t,{key:r})}}))},it.a.createElement(dt.a,{"data-testid":n},it.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}))))}function Ym(e){var t=e.name,n=e.command,r=e.defaultKey,a=e.data,i=Object(at.useState)(r),o=b()(i,2),c=o[0],l=o[1],s=a.find((function(e){return e.key===c}));return it.a.createElement("div",{className:"lake-diagram-toolbar-command lake-diagram-toolbar-dropdown"},it.a.createElement(pt.a.Button,{onClick:function(){e.onClick?e.onClick({key:c}):e.execCommand(n,{key:c})},overlay:zm(qm(qm({},e),{},{onSelect:function(t){var n=t.key;l(n),e.onSelect&&e.onSelect({key:n})}})),icon:it.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}),"data-testid":t},it.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon||s.icon)})))}function Xm(e){var t=e.mode,n=ft()(e,Tm);return"button"===t?it.a.createElement(Ym,n):it.a.createElement(Fm,n)}function Gm(e){var t=e.name,n=e.icon,r=e.accept,a=e.disabled,i=e.title,o=e.onChange,c=Object(at.useRef)();return it.a.createElement("div",{className:"lake-diagram-toolbar-command","data-testid":t},it.a.createElement(ut.a,{disabled:a||!i,placement:"bottom",title:it.a.createElement("div",{className:"lake-diagram-toolbar-tooltip"},i&&it.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-title"},i))},it.a.createElement(dt.a,{className:"lake-diagram-toolbar-upload",onClick:function(){return c.current.click()},disabled:a},it.a.createElement("span",{className:"lake-icon lake-icon-".concat(n)}),it.a.createElement("input",{type:"file",accept:r,onChange:o,ref:c}))))}function Hm(e){var t=e.name,n=e.title,r=e.hotkey,a=e.icon,i=e.label,o=e.command,c=e.disabled,l=e.active,s=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});return it.a.createElement("div",rt()({className:"lake-diagram-toolbar-command","data-testid":t},s),it.a.createElement(ut.a,{disabled:c||!(n||r),placement:"bottom",title:it.a.createElement("div",{className:"lake-diagram-toolbar-tooltip"},n&&it.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-title"},n),r&&it.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-hotkey"},r))},it.a.createElement(dt.a,{onClick:function(t){t.stopPropagation(),e.onClick?e.onClick():e.execCommand(o)},disabled:c,className:st()({"lake-button-active":l}),"data-testid":"".concat(t,"-button")},it.a.createElement("span",{className:"lake-icon lake-icon-".concat(a)}),i&&it.a.createElement("span",{className:"lake-diagram-toolbar-command-label"},i))))}function Wm(e){switch(e.type){case"separator":return it.a.createElement("div",{className:"lake-diagram-toolbar-separator"});case"dropdown":return it.a.createElement(Xm,e);case"upload":return it.a.createElement(Gm,e);default:return it.a.createElement(Hm,e)}}function Vm(e){var t=e.commands,n=e.extra,r=e.execCommand;return it.a.createElement("div",{className:st()("lake-diagram-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-toolbar-title"},e.title),it.a.createElement("div",{className:"lake-diagram-toolbar-body"},t.map((function(e,t){return it.a.createElement(Wm,rt()({key:"".concat(e.name||e.type,"-").concat(t),execCommand:r},e))}))),it.a.createElement("div",{className:"lake-diagram-toolbar-extra"},n))}zm.propTypes={data:ct.a.array,overlay:ct.a.node,onSelect:ct.a.func,menuClassName:ct.a.string},Fm.propTypes={command:ct.a.string,name:ct.a.string,icon:ct.a.string,onSelect:ct.a.func,execCommand:ct.a.func},Ym.propTypes={command:ct.a.string,name:ct.a.string,defaultKey:ct.a.string,title:ct.a.string,data:ct.a.array,icon:ct.a.string,onClick:ct.a.func,onSelect:ct.a.func,execCommand:ct.a.func},Xm.propTypes={mode:ct.a.string},jt(".lake-diagram-toolbar-upload {\n  position: relative;\n}\n.lake-diagram-toolbar-upload input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  display: none;\n}\n"),Gm.propTypes={name:ct.a.string,icon:ct.a.string,accept:ct.a.string,disabled:ct.a.bool,title:ct.a.string,onChange:ct.a.func},Hm.defaultProps={disabled:!0},Hm.propTypes={disabled:ct.a.bool,name:ct.a.string,title:ct.a.string,hotkey:ct.a.string,type:ct.a.string,icon:ct.a.string,label:ct.a.string,command:ct.a.string,onClick:ct.a.func,execCommand:ct.a.func,active:ct.a.bool},Wm.propTypes={type:ct.a.string},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 38px;\n  border: solid var(--yq-border-primary);\n  border-width: 1px 0;\n  padding-left: 16px;\n  padding-right: 12px;\n  background: var(--yq-bg-secondary);\n}\n.lake-diagram-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.lake-diagram-toolbar-separator {\n  width: 1px;\n  height: 100%;\n  margin: 0 4px;\n  background: var(--yq-border-primary);\n}\n.lake-diagram-toolbar-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 8px;\n  height: 32px;\n  min-width: 32px;\n  margin-left: 4px;\n  margin-right: 4px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-toolbar-command .ant-btn[disabled] {\n  color: var(--yq-text-caption);\n  background: none;\n}\n.lake-diagram-toolbar-command .ant-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-toolbar-command .ant-btn:focus {\n  color: var(--yq-text-body);\n}\n.lake-diagram-toolbar-command .ant-btn::after {\n  display: none;\n}\n.lake-diagram-toolbar-command .ant-btn .lake-icon {\n  margin-right: 0;\n  font-size: 16px;\n}\n.lake-diagram-toolbar-command .lake-button-active {\n  background-color: var(--yq-bg-primary-hover-light);\n}\n.lake-diagram-toolbar-command-label {\n  display: inline-block;\n  margin-left: 0.25em;\n}\n.lake-diagram-toolbar-tooltip {\n  text-align: center;\n}\n.lake-diagram-toolbar-tooltip-hotkey {\n  font-size: 12px;\n  color: var(--yq-text-caption);\n  margin-top: 4px;\n}\n.lake-diagram-toolbar-tooltip-hotkey:first-child {\n  margin-top: 0;\n}\n"),Vm.defaultProps={commands:[],toggleProperties:function(){},domContainer:null},Vm.propTypes={className:ct.a.string,commands:ct.a.array,domContainer:ct.a.object,title:ct.a.node,extra:ct.a.node,execCommand:ct.a.func},Vm.Control=Wm,jt("/* stylelint-disable */\n.lake-diagram-link-editor {\n  max-width: 398px;\n  display: inline-block;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n  box-shadow: #d8dad980 0px 1px 3px;\n  background: var(--yq-bg-primary);\n}\n.lake-diagram-link-editor .lake-link-invalid-link {\n  color: var(--yq-red-6);\n}\n.lake-diagram-link-editor p {\n  margin-top: 0;\n  margin-bottom: 14px;\n}\n.lake-diagram-link-editor .lake-diagram-link-editor-slash {\n  margin: 0 2px;\n}\n.lake-diagram-link-editor .lake-diagram-link-editor-slash {\n  width: 1px;\n  height: 14px;\n  border-left: 1px solid var(--yq-border-primary);\n  margin: 0 1px;\n  margin-top: 5px;\n  vertical-align: top;\n}\n.lake-diagram-link-editor .lake-icon {\n  color: #8590a6;\n  font-size: 16px;\n}\n.lake-diagram-link-editor-preview {\n  line-height: 16px;\n  padding: 6px 8px;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.lake-diagram-link-editor-preview * {\n  display: inline-block;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-button {\n  color: var(--yq-text-body);\n  margin: 0px 0px 0px 8px;\n  padding: 4px;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-button:hover {\n  background: var(--yq-bg-tertiary);\n  cursor: pointer;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-container {\n  color: var(--yq-blue-5);\n  height: 16px;\n  padding: 0 6px;\n  min-width: 180px;\n  max-width: 292px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-decoration: none;\n  line-height: 12px;\n  font-size: 14px;\n  letter-spacing: 1.2px;\n  vertical-align: middle;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-empty {\n  height: 16px;\n  padding: 0 6px;\n  min-width: 146px;\n  max-width: 292px;\n  line-height: 20px;\n  font-size: 14px;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-container:hover {\n  cursor: pointer;\n}\n.lake-diagram-link-editor-edit {\n  width: 365px;\n  padding: 16px 12px;\n  padding-bottom: 4px;\n}\n");var Um={"zh-cn":{text:"文本",link:"链接",editLink:"编辑链接",addDescription:"添加描述",linkAddress:"链接地址",deleteLink:"删除链接",confirm:"确定",pleaseInputLink:"请输入链接",emptyLink:"空链接",pleaseEnterCorrectLink:"请输入正确的链接",selectedContent:"多行文字被选中，暂不支持修改文本"},en:{text:"Text",link:"Link",editLink:"Edit link",addDescription:"Add a description",linkAddress:"Link address",deleteLink:"Delete link",confirm:"Confirm",pleaseInputLink:"Please input link address",emptyLink:"Empty link",pleaseEnterCorrectLink:"Please enter the correct link",selectedContent:"Selected in the document"}};Um["en-us"]=Um.en;var Zm=function(e){j()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(e){var r;m()(this,n);var a=(r=t.call(this,e)).props,i=a.lang,o=a.target;return r.locale=Um[i],r.nativeEvents=[],r.rect=o.getBoundingClientRect(),r.link=o.getAttribute("href"),r.isMultiLink=o.length>1,r.state={invalidLink:r.isInvalidLink(r.link)},r.preventScrollCancel=!1,r}return g()(n,[{key:"adjustPosition",value:function(){var e=this.container,t=this.props.target,n=e.getBoundingClientRect(),r=e.offsetParent.getBoundingClientRect(),a=t.getBoundingClientRect(),i=window.pageYOffset+a.bottom+4-r.top,o=window.pageXOffset+a.left-r.left;i+n.height>window.innerHeight-20&&(i=window.pageYOffset+a.top-n.height-4),n.right>window.innerWidth-20?o=window.pageXOffset+window.innerWidth-n.width-4:o<20&&(o=window.pageXOffset+20),e.style.top="".concat(i,"px"),e.style.left="".concat(o,"px")}},{key:"componentDidMount",value:function(){this.bindNativeEvents(),this.adjustPosition()}},{key:"componentDidUpdate",value:function(){this.adjustPosition()}},{key:"componentWillUnmount",value:function(){this.removeNativeEvents()}},{key:"bindNativeEvents",value:function(){var e=this,t=this.container,n=!1;this.addNativeEvent(window,"scroll",(function(t){!0!==e.preventScrollCancel?t.target.className&&-1!==t.target.className.indexOf("lake-link")||e.cancel():t.preventDefault()}),!0),this.addNativeEvent(window,"resize",(function(){e.cancel()}),!0),this.addNativeEvent(window,"mousedown",(function(e){var r=e.target;t.contains(r)||(n=!0)}),!0),this.addNativeEvent(window,"mouseup",(function(r){var a=r.target;n&&!t.contains(a)&&e.cancel(),n=!1}))}},{key:"cancel",value:function(){var e=this.props,t=e.onCancel,n=e.target;t({link:n&&n.getAttribute("href")})}},{key:"addNativeEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r),this.nativeEvents.push({dom:e,name:t,callback:n,useCapture:r})}},{key:"removeNativeEvents",value:function(){this.nativeEvents.forEach((function(e){var t=e.dom,n=e.name,r=e.callback,a=e.useCapture;t.removeEventListener(n,r,a)})),this.nativeEvents=[]}},{key:"confirm",value:function(){var e=this.props.onConfirm,t=this.state.invalidLink,n=this.getText(),r=this.getLink();t||e(n,r)}},{key:"renderPreview",value:function(){var e,t=this.props,n=t.onDeleteLink,r=t.shouldTargetBlank,a=t.onSwitchToEdit,i=t.dataset,o=this.getLink(),c=this.locale,l=o||c.emptyLink;return e=o?r(o)?it.a.createElement("a",{className:"lake-diagram-link-editor-link-container",href:vo(o),target:"_blank"},l):it.a.createElement("a",{className:"lake-diagram-link-editor-link-container",href:vo(o)},l):it.a.createElement("span",{className:"lake-diagram-link-editor-link-empty"},l),it.a.createElement("div",{className:"lake-diagram-link-editor lake-diagram-link-editor-preview"},it.a.createElement("span",{className:"lake-icon lake-icon-link"}),e,it.a.createElement("span",{className:"lake-diagram-link-editor-slash"}),it.a.createElement(ut.a,{title:c.editLink},it.a.createElement("a",rt()({},i,{className:"lake-icon lake-icon-edit lake-diagram-link-editor-button",onClick:function(){a()}}))),it.a.createElement(ut.a,{title:c.deleteLink},it.a.createElement("a",rt()({},i,{className:"lake-icon lake-icon-unlink lake-diagram-link-editor-button",onClick:n}))))}},{key:"isInvalidLink",value:function(e){return function(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}(e)}},{key:"renderEditorContent",value:function(){var e=this,t=this.props.dataset,n=this.state.invalidLink,r=this.getText(),a=this.getLink(),i=this.locale;return it.a.createElement("div",{className:"lake-diagram-link-editor lake-diagram-link-editor-edit",onKeyDown:function(t){var n=t.key,r=e.state.invalidLink;"Enter"!==n||r||e.confirm(),"Escape"===n&&e.cancel()}},it.a.createElement("p",null,i.text),it.a.createElement("p",null,it.a.createElement(yt.a,{className:"lake-link-text-input",defaultValue:this.isMultiLink?i.selectedContent:r,ref:function(t){e.textInputDom=t},placeholder:i.addDescription,disabled:this.isMultiLink,onChange:function(t){e.text=t.target.value}})),it.a.createElement("p",null,i.link),it.a.createElement("p",null,it.a.createElement(yt.a,{className:"lake-link-link-input",defaultValue:a,ref:function(t){e.preventScrollCancel=!0,t&&t.focus(),e.linkInputDom=t,setTimeout((function(){e.preventScrollCancel=!1}),32)},placeholder:i.linkAddress,onChange:function(t){e.link=t.target.value,e.setState({invalidLink:e.isInvalidLink(e.link)})}})),n&&""!==a?it.a.createElement("p",{className:"lake-link-invalid-link"},i.pleaseEnterCorrectLink):"",it.a.createElement("p",null,it.a.createElement(dt.a,rt()({},t,{className:"lake-link-confirm-button",onClick:function(){e.confirm()},disabled:!this.link||n}),i.confirm)))}},{key:"getLink",value:function(){var e=this.props.getLink;return this.link&&e(this.link)||""}},{key:"getText",value:function(){var e=this.props.target;return this.isMultiLink?"":this.text||e.textContent}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.type,a=n.className,i=n.dataset;return e="edit"===r?this.renderEditorContent():this.renderPreview(),it.a.createElement("div",rt()({},i,{className:a,ref:function(e){t.container=e},style:{top:"0px",position:"absolute",zIndex:"1400"}}),e)}}]),n}(it.a.Component);function Km(e){var t=window.location,n=(t.origin+t.pathname.replace("/edit","")).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp("^".concat(n,"#"));return e=e.replace(r,"#").trim(),/^(\w+\.)+\w+(\/|$)/.test(e)&&(e="https://"+e),e}function Qm(e){var t=e.diagram,n=Object(at.useState)(null),r=b()(n,2),a=r[0],i=r[1],o=Object(at.useState)("preview"),c=b()(o,2),l=c[0],s=c[1];return Object(at.useEffect)((function(){function e(e,t){i(e),s(t)}function n(t){var n=t.result,r=t.target,a=t.name;n&&"createLink"===a&&e(r,"edit")}function r(){i(null)}var a=Te()((function(){var n=t.contentEditor.getRange();if(n){var r=t.contentEditor.closest(n.commonAncestorContainer,"a");r?e(r,"preview"):i(null)}}),16);return t.contentEditor.on("execcommand",n),t.contentEditor.on("endedit",r),t.contentEditor.on("selectionchange",a),function(){t.contentEditor.off("execcommand",n),t.contentEditor.off("endedit",r),t.contentEditor.off("selectionchange",a)}}),[t]),a?it.a.createElement(Zm,{dataset:{"data-lake_prevent_click_unselect":!0},target:a,type:l,lang:rr.locale,getLink:Km,onConfirm:function(e,n){a.textContent=e,a.setAttribute("href",n),setTimeout((function(){if(a&&t.viewportContainer.contains(a)){var e=window.getSelection(),n=document.createRange();n.selectNode(a),n.collapse(),e.removeAllRanges(),e.addRange(n)}}),16),i(null)},onSwitchToEdit:function(){s("edit")},onCancel:function(){i(null)},onDeleteLink:function(){a.removeAttribute("href"),function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)}(a),i(null)},shouldTargetBlank:function(){return!0}}):it.a.createElement("div",null)}Zm.defaultProps={dataset:{},className:null,type:"preview",lang:"zh-cn",onDeleteLink:function(){},onSwitchToEdit:function(){},onConfirm:function(){},onCancel:function(){},shouldTargetBlank:function(){},getLink:function(e){return e}},Zm.propTypes={dataset:ct.a.object,className:ct.a.string,target:ct.a.object,type:ct.a.string,lang:ct.a.string,onDeleteLink:ct.a.func,onSwitchToEdit:ct.a.func,onConfirm:ct.a.func,onCancel:ct.a.func,shouldTargetBlank:ct.a.func,getLink:ct.a.func},jt(""),Qm.defaultProps={diagram:null},Qm.propTypes={diagram:ct.a.object.isRequired};var Jm=function(e){var t=e.shapeSelect,n=e.groups,r=e.basicWithSwimlane,a=Object(at.useRef)();return t||(t=Object(at.useMemo)((function(){return new kd({groups:n,basicWithSwimlane:r})}),N()(n))),Object(at.useEffect)((function(){var e;a.current.appendChild(t.rendererElement),a.current.setAttribute("height",t.height),null===(e=a.current)||void 0===e||e.setAttribute("width",t.width);var n=function(e){var t,n=e.height;null===(t=a.current)||void 0===t||t.setAttribute("height",n)};return t.on("update:height",n),function(){t.off("update:height",n)}}),[t]),Object(at.useEffect)((function(){function n(t){var n=t.shape,r=t.group,a=t.category,i=t.attr;e.onSelect({key:n,group:r,category:a,attr:i})}return t.on("shape:select",n),function(){t.off("shape:select",n)}}),[e.onSelect]),it.a.createElement("svg",{className:st()(e.className,"lake-prevent-card-activated"),"data-lake_prevent_click_unselect":"true",ref:a,onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},"data-testid":"shape-overlay"})};Jm.propTypes={groups:ct.a.array,onSelect:ct.a.func,onClick:ct.a.func,className:ct.a.string,shapeSelect:ct.a.object,basicWithSwimlane:ct.a.bool},jt(".lake-diagram-toolbar-shape-select-container {\n  max-height: 272px;\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 #00000014, 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n  border-radius: 4px;\n  background-color: var(--yq-bg-primary);\n  max-width: 220px;\n}\n.lake-diagram-toolbar-shape-select-container .ant-tabs {\n  height: 40px;\n}\n.lake-diagram-toolbar-shape-select-container .ant-tabs-tab-btn {\n  font-weight: 400;\n  color: var(--yq-text-caption);\n}\n.lake-diagram-toolbar-shape-select-container .ant-tabs-tab .ant-tabs-tab-active {\n  font-weight: 500;\n  color: var(--yq-text-primary);\n}\n.lake-diagram-toolbar-shape-select-container .ant-tabs-nav {\n  padding-left: 12px !important;\n}\n.lake-diagram-toolbar-shape-select-container .ant-tabs > .ant-tabs-nav .ant-tabs-nav-operations,\n.lake-diagram-toolbar-shape-select-container .ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-operations {\n  width: auto !important;\n  padding: 0 !important;\n}\n.lake-diagram-toolbar-shape-select-container .ant-tabs > .ant-tabs-nav .ant-tabs-nav-more,\n.lake-diagram-toolbar-shape-select-container .ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-more {\n  padding: 0;\n  margin-left: 8px !important;\n  margin-right: 8px !important;\n}\n.lake-diagram-toolbar-shape-select-container .ant-tabs-ink-bar {\n  background: var(--yq-yuque-grey-9);\n}\n.lake-diagram-toolbar-shape-select-container .ant-tabs-top > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-right::after,\n.lake-diagram-toolbar-shape-select-container .ant-tabs-bottom > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-right::after,\n.lake-diagram-toolbar-shape-select-container .ant-tabs-top > div > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-right::after,\n.lake-diagram-toolbar-shape-select-container .ant-tabs-bottom > div > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-right::after {\n  opacity: 0;\n}\n.lake-diagram-toolbar-shape-select-container .ant-tabs-top > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-left::before,\n.lake-diagram-toolbar-shape-select-container .ant-tabs-bottom > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-left::before,\n.lake-diagram-toolbar-shape-select-container .ant-tabs-top > div > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-left::before,\n.lake-diagram-toolbar-shape-select-container .ant-tabs-bottom > div > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-left::before {\n  opacity: 0;\n}\n.lake-diagram-toolbar-shape-container {\n  overflow: scroll;\n  display: flex;\n  justify-content: center;\n  max-height: 218px;\n}\n.lake-diagram-toolbar-shape-container::-webkit-scrollbar {\n  height: 0;\n  width: 5px;\n  background-color: var(--yq-bg-primary);\n  /* or add it to the track */\n}\n.lake-diagram-toolbar-shape-container::-webkit-scrollbar-thumb {\n  background: var(--yq-bg-primary-hover-light);\n  border-radius: 3px;\n}\n");var $m=["groups"];function ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ty=gt.a.TabPane;function ny(e){var t=e.groups,n=ft()(e,$m),r=Object(at.useRef)(),a=Object(at.useMemo)((function(){var e=new kd(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ey(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({groups:t,containerHeight:218},n)),r=t.map((function(t){return e.getOffset(t)}));return{shapeSelect:e,offsets:r}}),N()(t)),i=a.shapeSelect,o=a.offsets,l=Object(at.useState)(t[0]),s=b()(l,2),u=s[0],d=s[1],h=Object(at.useRef)();return Object(at.useEffect)((function(){var e,n=De()((function(e){for(var n=e.target.scrollTop,r=o.length-1;r>=0&&!(n>o[r]-32);r--);d((function(e){return e!==t[r]?t[r]:e}))}),16);return null===(e=r.current)||void 0===e||e.addEventListener("scroll",n),function(){var e;return null===(e=r.current)||void 0===e?void 0:e.removeEventListener("scroll",n)}}),[]),Object(at.useEffect)((function(){var e;Array.from(null===(e=h.current)||void 0===e?void 0:e.querySelectorAll(".ant-tabs-tab")).forEach((function(e,t){0!==t&&(e.style.marginLeft="16px")}))}),[]),it.a.createElement("div",{className:"lake-diagram-toolbar-shape-select-container",ref:h},it.a.createElement(gt.a,{tabBarStyle:{width:"100%",padding:"0 8px",height:"40px",color:"#8c8c8c",fontSize:"14px"},animated:{inkBar:!0,tabPane:!0},onChange:function(e){var t;return null===(t=r.current)||void 0===t?void 0:t.scrollTo(0,i.getOffset(e))},activeKey:u,onTabClick:function(e){d(e)}},t.map((function(e){return it.a.createElement(ty,{tab:xd[e].title,key:e})}))),it.a.createElement("div",{ref:r,className:"lake-diagram-toolbar-shape-container"},it.a.createElement(Jm,rt()({groups:t,shapeSelect:i},n))))}ny.propTypes={groups:ct.a.array},jt("/* stylelint-disable */\n.lake-zoom-tool {\n  padding: 0 5px;\n  width: auto;\n  height: 25px;\n  border: 1px solid var(--yq-border-primary);\n  box-shadow: 0px 2px 4px #e7e9e880;\n  color: var(--yq-yuque-grey-3);\n  background: var(--yq-yuque-grey-6);\n  position: absolute;\n  top: 16px;\n  right: 28px;\n  border-radius: 6px;\n  font-size: 14px;\n  line-height: 24px;\n  letter-spacing: 0.05em;\n  outline-style: none;\n  word-wrap: break-word;\n}\n.lake-zoom-tool .ant-dropdown {\n  left: -2.5px;\n}\n.lake-zoom-tool ul {\n  list-style-type: none;\n  margin: 0;\n}\n.lake-zoom-tool ul.lake-zoom-tool-menu {\n  width: 86px;\n  background: var(--yq-yuque-grey-8);\n}\n.lake-zoom-tool ul.lake-zoom-tool-menu li {\n  font-size: 12px;\n  margin-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n  white-space: nowrap;\n}\n.lake-zoom-tool .ant-dropdown-menu-item:hover {\n  background: var(--yq-yuque-grey-9);\n}\n.lake-zoom-tool .ant-dropdown-menu-item {\n  color: var(--yq-white);\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-zoom-tool .lake-icon {\n  margin: 3.5px;\n  margin-top: 2px;\n  font-size: 14px;\n  width: 14px;\n  height: 14px;\n}\n.lake-zoom-tool .lake-icon:hover {\n  cursor: pointer;\n}\n.lake-zoom-tool .lake-zoom-tool-precent {\n  vertical-align: top;\n  line-height: 23px;\n}\n.lake-zoom-tool span {\n  display: inline-block;\n  padding: 0;\n  font-size: 12px;\n  height: 26px;\n  text-align: center;\n  user-select: none;\n}\n.lake-zoom-tool .lake-zoom-tool-dropdown:hover {\n  cursor: pointer;\n}\n.lake-zoom-tool:hover {\n  background: var(--yq-yuque-grey-8);\n}\n.lake-card-block-max .lake-zoom-tool {\n  margin: 8px;\n}\n");var ry=function(e){j()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"_setZoom",value:function(e){var t=this.props,n=t.onChange,r=t.minZoom,a=t.maxZoom;e<r&&(e=r),e>a&&(e=a),n(e)}},{key:"_clickZoomIn",value:function(){var e=this.props,t=e.zoomStep,n=e.zoom;this._setZoom(n+t)}},{key:"_clickZoomOut",value:function(){var e=this.props,t=e.zoomStep,n=e.zoom;this._setZoom(n-t)}},{key:"render",value:function(){var e=this,t=this.props.zoom,n=it.a.createElement(mt.a,{className:"lake-zoom-tool-menu",onClick:function(t){var n=t.item;e._setZoom(n.props.value)}},it.a.createElement(mt.a.Item,{value:"resetView"},ar("回到中心")),it.a.createElement(mt.a.Item,{value:.2},"20%"),it.a.createElement(mt.a.Item,{value:.5},"50%"),it.a.createElement(mt.a.Item,{value:1},"100%"),it.a.createElement(mt.a.Item,{value:2},"200%"),it.a.createElement(mt.a.Item,{value:4},"400%"),it.a.createElement(mt.a.Item,{value:"autoFit"},ar("适应画布")));return it.a.createElement("div",{className:"lake-zoom-tool",ref:function(t){e.zoomToolDOM=t}},it.a.createElement("span",{className:"lake-icon lake-icon-zoom-out",onClick:this._clickZoomOut.bind(this)}),it.a.createElement(pt.a,{className:"lake-zoom-tool-dropdown",overlay:n,placement:"bottomCenter",trigger:["click"],getPopupContainer:function(){return e.zoomToolDOM}},it.a.createElement("span",{className:"lake-zoom-tool-precent"},Math.round(100*t)+"%")),it.a.createElement("span",{className:"lake-icon lake-icon-zoom-in",onClick:this._clickZoomIn.bind(this)}))}}]),n}(it.a.Component);function ay(e){var t=e.diagram,n=Object(at.useState)(null),r=b()(n,2),a=r[0],i=r[1];return Object(at.useEffect)((function(){if(t){i(t.viewport.zoom);var e=Te()((function(){i(t.viewport.zoom)}),32);return t.on("afterviewportchange",e),function(){t.off("afterviewportchange",e)}}}),[a,t]),t?it.a.createElement(ry,{zoom:a,onChange:function(e){"autoFit"===e?t.viewport.autoFit():"resetView"===e?t.viewport.focusFirstRoot():t.viewport.setViewport(e)}}):it.a.createElement("div",null)}function iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ry.defaultProps={zoom:1,onChange:function(){},minZoom:.2,maxZoom:4,zoomStep:.2},ry.propTypes={zoom:ct.a.number,onChange:ct.a.func,minZoom:ct.a.number,maxZoom:ct.a.number,zoomStep:ct.a.number},ay.propTypes={diagram:ct.a.object},jt("/* stylelint-disable */\n/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n/**\n * lake/editor 的卡片容器实现方式会导致文档样式影响卡片编辑器样式\n */\n.lake-diagram-panel-properties ~ div .ant-dropdown-menu-item {\n  margin-left: 0;\n  list-style-type: none;\n}\n.lake-diagram-panel-properties {\n  background-color: var(--yq-bg-secondary);\n  border-left: 1px solid var(--yq-border-primary);\n  height: 100%;\n  width: 100%;\n  min-width: 212px;\n  max-width: 286px;\n  cursor: default;\n  user-select: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-menu-hide-header {\n  margin-top: 8px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-menu-hide-header .ant-collapse-header {\n  display: none;\n}\n.lake-diagram-panel-properties .lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body {\n  height: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs {\n  height: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav {\n  width: 100%;\n  margin-bottom: 0px;\n  border-bottom: 1px solid #00000017;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list {\n  width: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab {\n  flex-grow: 1;\n  margin: 0 2px;\n  display: inline-block;\n  text-align: center;\n  border: none;\n  color: var(--yq-text-caption);\n  border-radius: 0;\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab:hover {\n  color: var(--yq-text-primary);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n  color: var(--yq-text-primary);\n  font-weight: 400;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs .ant-tabs-content-holder {\n  overflow: auto;\n  height: calc(100% - 38px);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-bar {\n  margin: 0;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse {\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-header {\n  padding: 0 16px;\n  margin: 8px 0;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-header .anticon {\n  padding: 0;\n  margin-right: 8px;\n  top: 6px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item {\n  padding-top: 8px;\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content {\n  border: none;\n  background: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content .ant-collapse-content-box {\n  margin: 0px 16px;\n  padding: 0px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #00000017;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item:last-child .ant-collapse-content-box {\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item:last-child {\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty {\n  height: 100%;\n  position: relative;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty .lake-diagram-background-wrapper {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  padding-bottom: 96px;\n  width: 200px;\n  height: 140px;\n  text-align: center;\n  color: var(--yq-text-disable);\n  line-height: 24px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty .lake-diagram-background-wrapper p {\n  margin-bottom: 0;\n}\n.lake-diagram-control {\n  margin-bottom: 8px;\n}\n.lake-diagram-control.disabled .lake-diagram-control-title {\n  color: var(--yq-text-caption);\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra {\n  border-color: var(--yq-border-primary);\n  background: none;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra > svg {\n  display: none;\n}\n.lake-diagram-control-title {\n  color: var(--yq-text-body);\n  letter-spacing: 0;\n}\n.lake-diagram-control-head {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-diagram-control-extra {\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n  width: 92px;\n  min-height: 32px;\n  overflow: hidden;\n  background: var(--yq-bg-primary);\n  cursor: pointer;\n}\n.lake-diagram-control-extra > svg {\n  display: block;\n}\n.lake-diagram-control-body .ant-checkbox + span {\n  letter-spacing: 0;\n}\n.lake-diagram-panel-head {\n  border-bottom: 1px solid var(--yq-border-primary);\n  margin-bottom: 12px;\n  padding-bottom: 4px;\n}\n.lake-diagram-panel-head-title {\n  color: var(--yq-text-primary);\n  font-size: 14px;\n  font-weight: 500;\n}\n");var oy=gt.a.TabPane;function cy(e,t){var n="object"===i()(e)?e:c()({},e,t),r={},a=function(e){e.split(".").reduce((function(t,r,a,i){return t[r]=a+1===i.length?n[e]:{}}),r)};for(var o in n)a(o);return r}function ly(e){var t,n,r=e.diagram,a=e.menus,i=e.tabs,o=e.emptyImg,l=e.className,s=Object(at.useState)(e.selections||r.selector.selections.concat([])),u=b()(s,2),d=u[0],h=u[1],f=Object(at.useState)(null),p=b()(f,2),m=p[0],y=p[1],g=function(e,t,n){var r={},a=[];return e.forEach((function(e,t){var n=e.name,a=e.key;r[a]={name:n,menus:[],index:t,key:a}})),t.forEach((function(e){e.condition(n)&&(r[e.tabKey].menus.push(e),a.push(e.name))})),Object.values(r).filter((function(e){return e.menus.length>0})).sort((function(e,t){return e.index-t.index}))}(i,a,d);function v(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;if("function"==typeof t)return t(),void h(N()(d));if(e.onChange)return e.onChange(cy(t,n),a);if(a.every((function(e){return e.isGroup}))){var i,o=[],c=[],l=[],s=cy(t,n);return s.hasOwnProperty("width")?i="lc":s.hasOwnProperty("height")&&(i="tc"),a.forEach((function(e){var t=Ou(e),n=b()(t,3),r=n[0],a=n[1],u=n[2],d=ku(s,{x:e.x,y:e.y,w:e.width,h:e.height,r:0},a);l.push.apply(l,N()(Pu(d,r,i))),c.push.apply(c,N()(r)),o.push.apply(o,N()(u))})),r.command.execute("Update",{id:c,model:l,originModels:o,autoSelect:!1}),void h(N()(d))}r.command.execute("Update",{id:a,model:cy(t,n),autoSelect:!1}),h(N()(d))}return Object(at.useEffect)((function(){Array.isArray(e.selections)&&h(e.selections)}),[e.selections]),Object(at.useEffect)((function(){if(r){var e=Te()((function(e){e&&y(e),h(r.selector.selections.concat([]))}),32),t=function(){e()};return r.on("afterselect",t),function(){r.off("afterselect",t)}}}),[r,m]),it.a.createElement("div",{className:st()("lake-diagram-panel lake-diagram-panel-properties",l),"data-lake_prevent_click_unselect":"true"},g.length>0?(t=a.map((function(e){return e.name})),n=g.map((function(e){return e.key})),it.a.createElement("div",{className:"lake-diagram-panel-body"},it.a.createElement(gt.a,{type:"card",activeKey:m&&-1!==n.indexOf(m)?m:d.length>0&&d.every((function(e){return e.isText}))?"text":g[0].key,onChange:function(e){y(e)}},g.map((function(e){var n=e.name,a=e.menus,i=e.key;return it.a.createElement(oy,{tab:n,key:i},it.a.createElement(vt.a,{defaultActiveKey:t,expandIcon:function(e){return e.isActive?it.a.createElement(bt.a,{style:{color:"#595959"}}):it.a.createElement(xt.a,{style:{color:"#595959"}})}},a.map((function(e){return it.a.createElement(vt.a.Panel,{header:e.name,key:e.name,className:!0===e.hideHeader?"lake-diagram-panel-menu-hide-header":""},e.controls.map((function(e,t){return e.display&&!e.display(d)?null:it.a.createElement(e.Control,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iy(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:t,path:e.path,title:e.title,selections:d,diagram:r,onChange:v},e.props))})))}))))}))))):it.a.createElement("div",{className:"lake-diagram-panel-body lake-diagram-panel-body-empty"},it.a.createElement("div",{className:"lake-diagram-background-wrapper"},it.a.createElement("img",{src:o}),it.a.createElement("p",null,ar("点击选中元素")),it.a.createElement("p",null,ar("可设置颜色、布局、文字等样式")))))}function sy(e){var t=e.title,n=e.extra,r=e.children,a=e.disabled,i=e.onMouseDown,o=st()("lake-diagram-control",e.className,{disabled:a});return it.a.createElement("div",{className:o,onMouseDown:i},t&&it.a.createElement("div",{className:"lake-diagram-control-head"},it.a.createElement("div",{className:"lake-diagram-control-title"},t),n&&it.a.createElement("div",{className:"lake-diagram-control-extra"},n)),r&&it.a.createElement("div",{className:"lake-diagram-control-body"},r))}function uy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uy(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hy(e){var t=e.zoom;e=dy(dy({},e),{},{zoomToolDOM:null});var n=function(t){var n=e,r=n.onChange,a=n.minZoom,i=n.maxZoom;t<a&&(t=a),t>i&&(t=i),r(t)},r=it.a.createElement(mt.a,{className:"lake-zoom-tool-menu",onClick:function(e){var t=e.item;n(t.props.value)}},[{value:.2,title:"20%"},{value:.5,title:"50%"},{value:.75,title:"75%"},{value:1,title:"100%"},{value:1.5,title:"150%"},{value:2,title:"200%"},{value:3,title:"300%"},{value:4,title:"400%"}].map((function(e,t){return it.a.createElement(mt.a.Item,{key:t,value:e.value},e.title)})));return it.a.createElement("div",{className:"lake-board-zoom-tool",ref:function(t){e.zoomToolDOM=t}},it.a.createElement("span",{className:"lake-icon lake-icon-board-zoom-out",onClick:function(){var t=e,r=t.zoomStep,a=t.zoom;n(a-r)}}),it.a.createElement(pt.a,{overlayClassName:"lake-board-zoom-tool-dropdown-overlay ne-ignore-pointer-events",overlay:r,placement:"bottomCenter",trigger:["click"]},it.a.createElement("span",{className:"lake-zoom-tool-precent"},Math.round(100*t)+"%")),it.a.createElement("span",{className:"lake-icon lake-icon-board-zoom-in",onClick:function(){var t=e,r=t.zoomStep,a=t.zoom;n(a+r)}}))}function fy(e){var t=e.diagram,n=Object(at.useState)(null),r=b()(n,2),a=r[0],i=r[1];return Object(at.useEffect)((function(){if(t){i(t.viewport.zoom);var e=Te()((function(){i(t.viewport.zoom)}),32);return t.on("afterviewportchange",e),function(){t.off("afterviewportchange",e)}}}),[a,t]),t?it.a.createElement(hy,{zoom:a,onChange:function(e){"autoFit"===e?t.viewport.autoFit():"resetView"===e?t.viewport.focusFirstRoot():t.viewport.setViewport(e)}}):it.a.createElement("div",null)}function py(e){var t=e.onClose;return it.a.createElement(wt.a,{className:"lake-board-iconfont-copyright-notice",title:ar("素材版权说明"),visible:!0,centered:!0,onCancel:t,zIndex:3e3,footer:null},it.a.createElement("p",{className:"lake-board-iconfont-copyright-notice-description"},ar("所有 icon 素材均来自 iconfont 平台，仅供广大用户交流学习使用，未经 iconfont 或其关联公司书面授权许可，不得用于任何商业用途。")),it.a.createElement("p",{className:"lake-board-iconfont-copyright-notice-links"},it.a.createElement("a",{href:"https://mos.m.taobao.com/iconfont-legal-agreement?spm=a313x.7781069.0.0"},"法律声明"),it.a.createElement("a",{href:"https://www.yuque.com/yuque/wknab3/pg3x76"},"更多说明"),it.a.createElement(dt.a,{type:"primary",onClick:t},"我知道了")))}function my(){var e=Object(at.useState)(!1),t=b()(e,2),n=t[0],r=t[1];return it.a.createElement("div",{className:"lake-board-iconfont-searcher-header"},it.a.createElement("img",{onClick:function(){window.open("https://www.iconfont.cn/","_blank")},className:"lake-board-iconfont-searcher-header-icon",src:"https://gw.alipayobjects.com/zos/bmw-prod/a0598dc0-6ccd-4e13-93ef-99068cd483a9.svg"}),it.a.createElement("a",{className:"lake-board-iconfont-searcher-header-copyright",target:"_blank",href:"https://www.yuque.com/yuque/wknab3/pg3x76"}),n&&it.a.createElement(py,{onClose:function(){r(!1)}}))}function yy(){return it.a.createElement("div",{className:"lake-board-iconfont-searcher-offline-container","data-testid":"lake-board-iconfont-searcher-offline"},it.a.createElement("div",{className:"lake-board-iconfont-searcher-offline-background-image"}),it.a.createElement("div",{className:"lake-board-iconfont-searcher-offline-background-tips"},ar("暂时无法从 iconfont 获取资源")))}function gy(){return it.a.createElement("div",{className:"lake-board-iconfont-searcher-empty-container","data-testid":"lake-board-iconfont-searcher-empty"},it.a.createElement("div",{className:"lake-board-iconfont-searcher-empty-background-image"}),it.a.createElement("div",{className:"lake-board-iconfont-searcher-empty-background-tips"},ar("搜索结果为空")))}ly.defaultProps={diagram:null,menus:null,tabs:null,emptyImg:"",className:""},ly.propTypes={diagram:ct.a.object,menus:ct.a.array,tabs:ct.a.array,emptyImg:ct.a.string,selections:ct.a.arrayOf(ct.a.object),onChange:ct.a.func,className:ct.a.string},jt("/* stylelint-disable */\n.lake-diagram-control .lake-diagram-control-extra .ant-input-number {\n  border: none;\n}\n.lake-diagram-control .lake-diagram-control-extra .lake-diagram-dropdown-input {\n  border: none;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra {\n  background-color: var(--yq-bg-secondary);\n}\n.lake-diagram-control.disabled .ant-input-number.ant-input-number-disabled {\n  background-color: var(--yq-bg-secondary);\n}\n"),Object.assign(sy,{get:function(e,t,n){var r=n;if(e.length>0)if((r=e.map((function(e){return t.split(".").reduce((function(e,t){return e?e.isCell&&e.get(t)||e[t]:e}),e)}))).every((function(e){return e===r[0]})))r=r[0];else{if(!r.every((function(e){return"number"==typeof e})))return"multiValue";r.sort(),r=r[r.length-1]}return r}}),sy.propTypes={title:ct.a.string,extra:ct.a.object,children:ct.a.node,className:ct.a.string,disabled:ct.a.bool,onMouseDown:ct.a.func},ly.Control=sy,jt(".lake-board-zoom-tool-dropdown-overlay {\n  padding-top: 6px;\n  min-width: 111px;\n}\n.lake-board-zoom-tool-dropdown-overlay ul {\n  list-style-type: none;\n  margin: 0;\n}\n.lake-board-zoom-tool-dropdown-overlay ul.lake-zoom-tool-menu {\n  width: 111px;\n}\n.lake-board-zoom-tool-dropdown-overlay ul.lake-zoom-tool-menu li {\n  font-size: 12px;\n  margin-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n  white-space: nowrap;\n}\n.lake-board-zoom-tool-dropdown-overlay .ant-dropdown-menu {\n  box-shadow: 0 2px 4px var(--yq-yuque-grey-5);\n  border-radius: 5px;\n}\n.lake-board-zoom-tool-dropdown-overlay .ant-dropdown-menu .ant-dropdown-menu-item {\n  color: var(--yq-black);\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-board-zoom-tool {\n  display: flex;\n  align-items: center;\n  height: 100%;\n  padding: 0 4px;\n}\n.lake-board-zoom-tool .lake-icon {\n  color: var(--yq-text-primary);\n  margin-left: 2px;\n  margin-right: 2px;\n  font-size: 14px;\n  line-height: 18px;\n  width: 18px;\n  height: 18px;\n}\n.lake-board-zoom-tool .lake-icon:hover {\n  cursor: pointer;\n}\n.lake-board-zoom-tool .lake-zoom-tool-precent {\n  vertical-align: middle;\n  width: 40px;\n  line-height: 25px;\n}\n.lake-board-zoom-tool span {\n  display: inline-block;\n  padding: 0;\n  font-size: 12px;\n  height: 26px;\n  text-align: center;\n  user-select: none;\n}\n.lake-card-block-max .lake-zoom-tool {\n  margin: 8px;\n}\n"),hy.defaultProps={zoom:1,onChange:function(){},minZoom:.2,maxZoom:4,zoomStep:.2},hy.propTypes={zoom:ct.a.number,onChange:ct.a.func,minZoom:ct.a.number,maxZoom:ct.a.number,zoomStep:ct.a.number,zoomToolDOM:ct.a.element},fy.propTypes={diagram:ct.a.object},jt("/* stylelint-disable */\n.lake-board-iconfont-copyright-notice .ant-modal-close {\n  top: -8px;\n}\n.lake-board-iconfont-copyright-notice .ant-modal-header {\n  padding-top: 12px;\n  padding-bottom: 0px;\n  border-bottom: none;\n}\n.lake-board-iconfont-copyright-notice .ant-modal-header .ant-modal-title {\n  font-size: 14px;\n}\n.lake-board-iconfont-copyright-notice .lake-board-iconfont-copyright-notice-description {\n  color: var(--yq-text-body);\n}\n.lake-board-iconfont-copyright-notice .lake-board-iconfont-copyright-notice-links {\n  margin-top: 24px;\n}\n.lake-board-iconfont-copyright-notice .lake-board-iconfont-copyright-notice-links a:first-child {\n  padding-right: 8px;\n}\n.lake-board-iconfont-copyright-notice .lake-board-iconfont-copyright-notice-links button {\n  float: right;\n}\n.lake-board-iconfont-copyright-notice .lake-board-iconfont-copyright-notice-links a ~ a {\n  border-left: 1px solid var(--yq-border-primary);\n  padding: 0 8px;\n}\n"),jt("/* stylelint-disable */\n.lake-board-iconfont-searcher-header {\n  height: 44px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 0 16px;\n}\n.lake-board-iconfont-searcher-header .lake-board-iconfont-searcher-header-icon {\n  cursor: pointer;\n}\n.lake-board-iconfont-searcher-header .lake-board-iconfont-searcher-header-copyright {\n  width: 16px;\n  height: 16px;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/c50d07f1-891a-4dea-84f7-0c08fd92bc6a.svg);\n}\n"),jt("/* stylelint-disable */\n.lake-board-iconfont-searcher-offline-container {\n  height: 256px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-content: start;\n}\n.lake-board-iconfont-searcher-offline-container .lake-board-iconfont-searcher-offline-background-image {\n  width: 70px;\n  height: 59px;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/82cfa582-d999-4c73-bfbe-5b9945af9726.svg);\n  background-position: center;\n  margin-top: 48px;\n  margin-bottom: 24px;\n}\n.lake-board-iconfont-searcher-offline-container .lake-board-iconfont-searcher-offline-background-tips {\n  color: var(--yq-text-disable);\n  width: 100%;\n  text-align: center;\n}\n"),jt("/* stylelint-disable */\n.lake-board-iconfont-searcher-empty-container {\n  height: 212px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-content: start;\n}\n.lake-board-iconfont-searcher-empty-container .lake-board-iconfont-searcher-empty-background-image {\n  width: 60px;\n  height: 51px;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/80736e19-e03c-44c7-9223-1d67449e98cf.svg);\n  background-position: center;\n  margin-top: 48px;\n  margin-bottom: 24px;\n}\n.lake-board-iconfont-searcher-empty-container .lake-board-iconfont-searcher-empty-background-tips {\n  color: var(--yq-text-disable);\n  width: 100%;\n  text-align: center;\n}\n"),jt("/* stylelint-disable */\n.lake-board-iconfont-searcher-container {\n  width: 230px;\n  height: 300px;\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n  border-radius: 4px;\n  background-color: var(--yq-bg-primary);\n}\n.lake-board-iconfont-searcher-container .lake-board-iconfont-searcher-content {\n  border-top: 1px solid var(--yq-border-primary);\n}\n.lake-board-iconfont-searcher-container .lake-board-iconfont-searcher-content .lake-board-iconfont-searcher-search-input-container {\n  width: calc(100% - 16px);\n  margin: 8px;\n}\n.lake-board-iconfont-searcher-container .lake-board-iconfont-searcher-content .lake-board-iconfont-searcher-content-list {\n  height: 200px;\n  display: flex;\n  flex-wrap: wrap;\n  align-content: flex-start;\n  overflow: auto;\n  margin-left: 8px;\n}\n.lake-board-iconfont-searcher-container .lake-board-iconfont-searcher-content .lake-board-iconfont-searcher-content-list::-webkit-scrollbar {\n  height: 0;\n  width: 5px;\n  background-color: var(--yq-bg-primary);\n  /* or add it to the track */\n}\n.lake-board-iconfont-searcher-container .lake-board-iconfont-searcher-content .lake-board-iconfont-searcher-content-list::-webkit-scrollbar-thumb {\n  background: var(--yq-bg-primary-hover-light);\n  border-radius: 3px;\n}\n.lake-board-iconfont-searcher-container .lake-board-iconfont-searcher-content .lake-board-iconfont-searcher-content-list .lake-board-iconfont-searcher-content-list-item-container {\n  display: inline-block;\n  margin-right: 4px;\n}\n.lake-board-iconfont-searcher-container .lake-board-iconfont-searcher-content .lake-board-iconfont-searcher-content-list .lake-board-iconfont-searcher-content-list-item-container .lake-board-iconfont-searcher-content-list-item-img {\n  width: 16px;\n  height: 16px;\n  background-position: center;\n  margin: 8px;\n  background-repeat: no-repeat;\n}\n.lake-board-iconfont-searcher-container .lake-board-iconfont-searcher-content .lake-board-iconfont-searcher-content-list .lake-board-iconfont-searcher-content-list-item-container:hover {\n  background-color: var(--yq-bg-tertiary);\n  cursor: pointer;\n}\n");var vy={};function by(e){var t=function(e){var t=e.diagram,n=e.onSelect,r=Object(at.useState)([]),a=b()(r,2),i=a[0],o=a[1],c=Object(at.useState)(!0),l=b()(c,2),s=l[0],u=l[1];function d(){return(d=X()(H.a.mark((function t(n,r){var a,i,c,l,s,u,d,h,f;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=vy.data,i=vy.keyword,c=vy.count,l=vy.page,s=e.boardWebProxy,a&&l&&i&&null!=s&&s.iconfont&&c){t.next=4;break}return t.abrupt("return");case 4:if(!((u=(null==a?void 0:a.length)||0)>=c)){t.next=7;break}return t.abrupt("return");case 7:if(!(u/6*32-r<=1.5*n)){t.next=14;break}return d=l+1,t.next=12,s.iconfont.search({keyword:i,page_size:100,page:d});case 12:(h=t.sent)&&(f=a.concat(h.data),o(f),vy.data=f,vy.page=d);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=X()(H.a.mark((function t(n){var r,a,i;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.boardWebProxy).iconfont){t.next=13;break}return a=1,t.next=5,r.iconfont.search({keyword:n,page_size:100,page:a});case 5:if(!(i=t.sent)){t.next=13;break}return o(i.data),vy.page=a,vy.count=i.count,vy.data=i.data,vy.keyword=n,t.abrupt("return");case 13:o([]);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=X()(H.a.mark((function e(r){var a,i,o,c,l;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.svg,i=yo(a),e.next=4,Ia(i);case 4:return o=e.sent,e.next=7,fetch(i).then((function(e){return e.blob()}));case 7:c=e.sent,l=new File([c],"iconfont.svg",{type:"image/svg+xml"}),t.command.execute("BeginInsertImage",{model:{image:{src:i,naturalWidth:o.naturalWidth,naturalHeight:o.naturalHeight},width:32,height:32},files:[l]}),n&&n();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=X()(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("");case 2:u(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=Te()(h,200);return Object(at.useEffect)((function(){t&&function(){m.apply(this,arguments)}()}),[t]),{state:{data:i,loading:s},onSearch:function(e){Object.assign(vy,{data:void 0,keyword:void 0,count:void 0,page:void 0}),y(e)},onItemClick:function(e){return p.apply(this,arguments)},onListScroll:Te()((function(e,t){return d.apply(this,arguments)}),200)}}(e);return it.a.createElement("div",{className:"lake-board-iconfont-searcher-container"},it.a.createElement(my,null),function(e){var t,n=e.state,r=n.data,a=n.loading;return r?(a||(t=Array.isArray(r)&&0===r.length?it.a.createElement(gy,null):function(e){var t=e.state.data;return it.a.createElement("div",{className:"lake-board-iconfont-searcher-content-list",onScroll:function(t){e.onListScroll(t.target.offsetHeight,t.target.scrollTop)}},Array.isArray(t)&&t.map((function(t,n){var r=t.svg;return it.a.createElement("div",{"data-testid":"lake-board-iconfont-searcher-content-list-item-".concat(n),onClick:function(){null==e||e.onItemClick(t)},key:n,className:"lake-board-iconfont-searcher-content-list-item-container"},it.a.createElement("div",{className:"lake-board-iconfont-searcher-content-list-item-img",style:{backgroundImage:"url(".concat(yo(r),")")}}))})))}(e)),it.a.createElement("div",{className:"lake-board-iconfont-searcher-content"},it.a.createElement("div",{className:"lake-board-iconfont-searcher-search-input-container","data-testid":"lake-board-iconfont-searcher-search-input-container"},it.a.createElement(yt.a,{onCompositionEnd:function(t){e.onSearch(t.target.value)},placeholder:ar("请搜索"),maxLength:50,prefix:it.a.createElement(kt.a,null),onInput:function(t){t.nativeEvent.isComposing||e.onSearch(t.target.value)}})),t)):it.a.createElement(yy,null)}(t))}var xy=r.FileUtils.isImage;function ky(e,t){var n=Array.from(e.nativeEvent.target.files).filter((function(e){return xy(e)}));n[0]&&t.emit("importimage",{files:n,from:"uploadButton"})}function wy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wy(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ey(e){return e.overlay?e.overlay({onSelect:e.onSelect,setPopoverVisible:e.setPopoverVisible,popoverVisible:e.popoverVisible}):it.a.createElement(mt.a,{onClick:e.onSelect,className:st()("lake-diagram-board-toolbar-menu",e.menuClassName)},e.data.map((function(e){return it.a.createElement(mt.a.Item,{key:e.key,style:{marginTop:"2px"}},it.a.createElement("div",{className:"lake-icon lake-icon-".concat(e.icon)}))})))}function Oy(e){var t=e.name,n=e.icon,r=e.tooltipPlacement,a=e.defaultKey,i=e.data,o=e.titleTag,c=e.shouldClickUpdateOverlay,l=Object(at.useState)(a),s=b()(l,2),u=s[0],d=s[1],h=i&&i.find((function(e){return e.key===u})),f=Object(at.useState)(!1),p=b()(f,2),m=p[0],y=p[1],g=Object(at.useState)(!1),v=b()(g,2),x=v[0],k=v[1];function w(t){var n=t.key;d(n),k(!1),e.onSelect&&e.onSelect({key:n})}function C(){return Ey(Cy(Cy({},e),{},{onSelect:w,setPopoverVisible:k,popoverVisible:x}))}var E=Object(at.useState)(C()),O=b()(E,2),P=O[0],M=O[1];return it.a.createElement("div",{className:"lake-diagram-board-toolbar-command"},it.a.createElement(Ct.a,{overlayClassName:"lake-diagram-board-toolbar-popover",content:P,trigger:"click",placement:"".concat(r,"Top"),visible:x,onVisibleChange:function(){return k(!x)}},it.a.createElement(ut.a,{visible:m,placement:r,overlayClassName:st()({"lake-diagram-board-toolbar-tooltip-overlay":"right"===r}),title:o},it.a.createElement(dt.a,{"data-testid":t,onClick:function(){y(!1),k(!x),c&&M(C()),e.onClick&&e.onClick({key:u,popoverVisible:x})},onMouseEnter:function(){return y(!0)},onMouseLeave:function(){return y(!1)}},function(e){return"string"==typeof e?it.a.createElement("span",{className:"lake-icon lake-icon-".concat(e||h.icon)}):e}(n)))))}function Py(e){var t=e.name,n=e.icon,r=e.accept,a=e.disabled,i=e.title,o=e.tooltipPlacement,c=e.onChange,l=e.titleTag,s=Object(at.useRef)();return it.a.createElement("div",{className:"lake-diagram-board-toolbar-command","data-testid":t},it.a.createElement(ut.a,{disabled:a||!i,placement:o,title:l,overlayClassName:st()({"lake-diagram-board-toolbar-tooltip-overlay":"right"===o})},it.a.createElement(dt.a,{className:"lake-diagram-board-toolbar-upload",onClick:function(){s.current.value="",s.current.click()},disabled:a},it.a.createElement("span",{className:"lake-icon lake-icon-".concat(n)}),it.a.createElement("input",{type:"file",accept:r,onChange:c,ref:s}))))}function My(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?My(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):My(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sy(e){var t=e.name,n=e.titleTag,r=e.title,a=e.hotkey,i=e.label,o=e.tooltipPlacement,c=e.disabled,l=e.diagram,s=e.defaultKey,u=e.active,d=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{}),h="string"==typeof e.icon?it.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}):e.icon;return it.a.createElement("div",rt()({className:"lake-diagram-board-toolbar-command","data-testid":t},d),it.a.createElement(ut.a,{disabled:c||!(r||a),placement:o,title:n,overlayClassName:st()({"lake-diagram-board-toolbar-tooltip-overlay":"right"===o})},it.a.createElement(dt.a,{onClick:function(t){t.stopPropagation(),e.onClick?e.onClick({key:s}):e.execCommand&&e.execCommand(l)},disabled:c,className:st()({"lake-button-active":u})},h,i&&it.a.createElement("span",{className:"lake-diagram-board-toolbar-command-label"},i))))}function Ry(e){var t=e.speratorAlignment,n=e.tooltipPlacement,r=e.title,a=e.hotkey,i=e.diagram,o=e.disabled,c=e.active;o="function"==typeof o?o(i):o,c="function"==typeof c?c(i):c;var l=jy(jy({},e),{},{disabled:o,active:c}),s="bottom"===n?it.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip"},r&&it.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip-title"},r),a&&it.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip-hotkey"},a)):it.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip"},r&&it.a.createElement("div",{className:"lake-diagram-board-toolbar-tooltip-title"},r,a&&it.a.createElement("span",{className:"lake-diagram-board-toolbar-popover-shortcut"},a)));switch(e.type){case"separator":return it.a.createElement("div",{className:"lake-diagram-board-toolbar-".concat(t,"-separator")});case"popover":return it.a.createElement(Oy,rt()({},l,{titleTag:s}));case"upload":return it.a.createElement(Py,rt()({},l,{titleTag:s}));case"custom":return e.component;default:return it.a.createElement(Sy,rt()({},l,{titleTag:s}))}}function Ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ly(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ly(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-board-toolbar-popover .ant-btn::after {\n  display: none;\n}\n.lake-diagram-board-toolbar-popover .ant-btn.ant-dropdown-trigger:hover {\n  background: var(--yq-border-primary);\n  border-radius: 2px;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button {\n  display: flex;\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button:hover {\n  border-color: var(--yq-border-primary);\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: var(--yq-border-primary);\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:hover {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:first-child:hover {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: auto;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  color: var(--yq-text-primary);\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon::before {\n  content: '';\n}\n.lake-diagram-board-toolbar-popover .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-board-toolbar-popover-menu .lake-icon {\n  color: var(--yq-text-primary);\n  font-size: 16px;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content {\n  min-width: auto;\n  width: auto;\n  border-radius: 3px;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content .ant-popover-arrow {\n  display: none;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content .ant-popover-inner {\n  background-color: inherit;\n  box-shadow: none;\n  background-clip: none;\n}\n.lake-diagram-board-toolbar-popover .ant-popover-content .ant-popover-inner .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-diagram-board-toolbar-menu.ant-menu {\n  box-shadow: 0 1px 2px -2px #00000014, 0 2px 6px 0 #0000000a, 0 4px 8px 1px #00000005;\n  border: 1px solid var(--yq-border-primary);\n  width: 38px;\n  padding-top: 3px;\n  padding-bottom: 3px;\n}\n.lake-diagram-board-toolbar-menu.ant-menu .ant-menu-item {\n  padding: 0 5px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  width: 28px;\n  margin-left: 4px;\n  margin-right: 4px;\n  height: 28px;\n  line-height: 32px;\n}\n.lake-diagram-board-toolbar-menu.ant-menu .ant-menu-item .lake-icon {\n  color: var(--yq-text-primary);\n  font-size: 18px;\n}\n.lake-diagram-board-toolbar-menu.ant-menu .ant-menu-item-selected {\n  background-color: transparent;\n}\n"),Ey.propTypes={data:ct.a.array,overlay:ct.a.node,onSelect:ct.a.func,menuClassName:ct.a.string},Oy.propTypes={command:ct.a.string,name:ct.a.string,icon:ct.a.oneOfType([ct.a.string,ct.a.element]),overlay:ct.a.func,onSelect:ct.a.func,onClick:ct.a.func,execCommand:ct.a.func,defaultKey:ct.a.string,data:ct.a.array,tooltipPlacement:ct.a.string,diagram:ct.a.object,titleTag:ct.a.object,shouldClickUpdateOverlay:ct.a.bool},jt(".lake-diagram-board-toolbar-upload {\n  position: relative;\n}\n.lake-diagram-board-toolbar-upload input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  display: none;\n}\n"),Py.propTypes={name:ct.a.string,icon:ct.a.string,accept:ct.a.string,disabled:ct.a.bool,title:ct.a.string,onChange:ct.a.func,diagram:ct.a.object,tooltipPlacement:ct.a.string,titleTag:ct.a.object},jt(".lake-diagram-board-toolbar-tooltip-overlay .ant-tooltip-content {\n  padding-left: 4px;\n}\n"),Sy.propTypes={disabled:ct.a.bool,active:ct.a.bool,name:ct.a.string,title:ct.a.string,hotkey:ct.a.string,titleTag:ct.a.object,type:ct.a.string,icon:ct.a.oneOfType([ct.a.string,ct.a.object]),label:ct.a.string,command:ct.a.string,onClick:ct.a.func,execCommand:ct.a.func,diagram:ct.a.object,tooltipPlacement:ct.a.string,defaultKey:ct.a.string},Ry.propTypes={type:ct.a.string,component:ct.a.object,speratorAlignment:ct.a.string,tooltipPlacement:ct.a.string,title:ct.a.string,hotkey:ct.a.string,disabled:ct.a.oneOfType([ct.a.bool,ct.a.func]),active:ct.a.oneOfType([ct.a.bool,ct.a.func]),diagram:ct.a.object},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-board-side-toolbar:empty {\n  display: none;\n}\n.lake-diagram-board-top-toolbar {\n  position: absolute;\n  top: 10px;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  padding-left: 8px;\n  padding-right: 16px;\n  height: 40px;\n  display: flex;\n  justify-content: space-between;\n  pointer-events: none;\n}\n.lake-diagram-board-top-toolbar > div {\n  pointer-events: auto;\n}\n.lake-diagram-board-top-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 8px;\n  margin-right: 8px;\n  height: 100%;\n  border-radius: 3px;\n  box-shadow: 0 1px 2px -2px #00000014, 0 2px 6px 0 #0000000a, 0 4px 8px 1px #00000005;\n  border: 1px solid var(--yq-border-primary);\n}\n.lake-diagram-board-toolbar-left {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-board-toolbar-left .lake-diagram-board-top-toolbar-body {\n  background: var(--yq-bg-primary);\n}\n.lake-diagram-board-toolbar-right {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.lake-diagram-board-toolbar-right .lake-diagram-board-top-toolbar-body {\n  background: var(--yq-bg-primary);\n}\n.lake-diagram-board-side-toolbar {\n  position: absolute;\n  width: 40px;\n  left: 16px;\n  height: 100%;\n  z-index: 1;\n  display: flex;\n  align-content: center;\n  pointer-events: none;\n}\n.lake-diagram-board-side-toolbar-body {\n  display: flex;\n  align-content: center;\n  flex-flow: row wrap;\n  margin: auto;\n  background: var(--yq-bg-primary);\n  border-radius: 3px;\n  box-shadow: 0 1px 2px -2px #00000014, 0 2px 6px 0 #0000000a, 0 4px 8px 1px #00000005;\n  border: 1px solid var(--yq-border-primary);\n  pointer-events: initial;\n  padding: 4px 0;\n}\n.lake-diagram-board-toolbar-vertical-separator {\n  width: 1px;\n  height: 60%;\n  background: var(--yq-border-primary);\n}\n.lake-diagram-board-toolbar-horizontal-separator {\n  height: 1px;\n  background: var(--yq-border-primary);\n  margin-top: 4px;\n  margin-bottom: 4px;\n  width: calc(100% - 16px);\n  margin-left: 8px;\n}\n.lake-diagram-board-toolbar-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 5px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  width: 32px;\n  margin-left: 3px;\n  margin-right: 3px;\n  color: var(--yq-text-primary);\n  vertical-align: middle;\n}\n.lake-diagram-board-toolbar-command .ant-btn[disabled] {\n  color: var(--yq-text-caption);\n  background: none;\n}\n.lake-diagram-board-toolbar-command .ant-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-board-toolbar-command .ant-btn:focus {\n  color: var(--yq-text-body);\n}\n.lake-diagram-board-toolbar-command .ant-btn::after {\n  display: none;\n}\n.lake-diagram-board-toolbar-command .ant-btn .lake-icon {\n  font-size: 18px;\n  margin: 0;\n}\n.lake-diagram-board-toolbar-command .lake-button-active {\n  color: var(--yq-text-link);\n}\n.lake-diagram-board-toolbar-command-label {\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 0.25em;\n}\n.lake-diagram-board-toolbar-tooltip {\n  text-align: center;\n  font-size: 12px;\n}\n.lake-diagram-board-toolbar-tooltip .lake-diagram-board-toolbar-tooltip-hotkey {\n  color: var(--yq-text-caption);\n  margin-top: 4px;\n}\n.lake-diagram-board-toolbar-tooltip .lake-diagram-board-toolbar-tooltip-hotkey:first-child {\n  margin-top: 0;\n}\n.lake-diagram-board-toolbar-popover-shortcut {\n  font-size: 12px;\n  color: var(--yq-yuque-grey-5);\n  padding-left: 4px;\n}\n");function By(e){var t=e.items,n=e.tooltipPlacement,r=e.className,a=e.diagram;return it.a.createElement("div",{className:r},t.map((function(t,r){return it.a.createElement(Ry,rt()({key:"".concat(t.name||t.type,"-").concat(r),execCommand:t.execCommand,tooltipPlacement:n,diagram:a},t,e))})))}function Ny(e){var t=e.items,n={placement:"top-left",tooltipPlacement:"bottom",speratorAlignment:"vertical",className:"lake-diagram-board-top-toolbar-body"},r=function(n){return(r=n.placement,t.reduce((function(e,t){return t.align===r&&e.push(t.subItems),e}),[])).map((function(t,r){return it.a.createElement(By,{key:r,items:t,tooltipPlacement:n.tooltipPlacement,speratorAlignment:n.speratorAlignment,className:n.className,diagram:e.diagram})}));var r};return it.a.createElement(it.a.Fragment,null,it.a.createElement("div",{className:st()("lake-diagram-board-top-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-board-toolbar-left"},r(n)),it.a.createElement("div",{className:"lake-diagram-board-toolbar-right"},r(Ay(Ay({},n),{},{placement:"top-right"})))),it.a.createElement("div",{className:st()("lake-diagram-board-side-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},r(Ay(Ay({},n),{},{placement:"left-middle",tooltipPlacement:"right",speratorAlignment:"horizontal",className:"lake-diagram-board-side-toolbar-body"}))))}By.defaultProps={items:[]},By.propTypes={items:ct.a.array,tooltipPlacement:ct.a.string,className:ct.a.string,diagram:ct.a.object},Ny.defaultProps={items:[]},Ny.propTypes={className:ct.a.string,items:ct.a.array,execCommand:ct.a.func,diagram:ct.a.object},Ny.Control=Ry,jt("/* stylelint-disable */\n.lake-board-toolbar-material-icon {\n  width: 24px;\n  height: 24px;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/4bdfc4e6-e50c-493b-a809-33016c1f95e2.svg);\n  background-position: center;\n  background-repeat: no-repeat;\n}\n.lake-board-toolbar-iconfont-icon {\n  width: 24px;\n  height: 24px;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/e5f8cb42-e9bc-4f26-b41a-56f2cb4ce284.svg);\n  background-position: center;\n  background-repeat: no-repeat;\n}\n.ant-btn > span.lake-board-toolbar-material-icon {\n  display: block;\n}\n.ant-btn > span.lake-board-toolbar-iconfont-icon {\n  display: block;\n}\n");var Dy={basic:"a385.b4693.c111722.d231218",flowchart:"a385.b4693.c111722.d231226",UML:"a385.b4693.c111722.d231225",ER:"a385.b4693.c111722.d231227",swimlane:"a385.b4693.c111722.d231186"};function Iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iy(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _y(e){var t=e.diagram,n=e.mini,r=e.onProperties,a=e.onSave,i=Object(at.useState)([]),o=b()(i,2),c=o[0],l=o[1];return Object(at.useEffect)((function(){if(t){var n=function(){var t=function(e){var t=e.focusMode,n=e.mini,r=e.readOnly,a=e.showProperties,i=e.boardWebProxy;return function(e){var t=e.diagram,n=e.mini;return[{align:"top-left",subItems:[{name:"save",type:"button",title:ar("保存"),hotkey:W.ua.macos?"⌘+S":"Ctrl+S",noMini:!0,noReadOnly:!0,icon:"board-save",disabled:!1,execCommand:function(){return e.onSave&&e.onSave()}},{type:"separator",noMini:!0,noReadOnly:!0},{name:"undo",type:"button",title:ar("撤销"),hotkey:W.ua.macos?"⌘+Z":"Ctrl+Z",icon:"board-undo",noMini:!0,noReadOnly:!0,disabled:function(e){return!e.command.enable("Undo")},execCommand:function(e){return e.command.execute("Undo")}},{name:"redo",title:ar("重做"),hotkey:W.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:"board-redo",noMini:!0,noReadOnly:!0,disabled:function(e){return!e.command.enable("Redo")},execCommand:function(e){return e.command.execute("Redo")}}],focusHidden:!0},{align:"top-right",subItems:[{name:"hand",type:"button",title:ar("拖拽"),noReadOnly:!0,hotkey:"Space",icon:"board-hand",active:function(e){return"dragCanvas"===e.interaction.currentMode},disabled:function(e){return!e.command.enable("ButtonDragCanvas")},execCommand:function(e){return e.command.execute("ButtonDragCanvas")}},{type:"separator",noReadOnly:!0},{name:"fitViewport",type:"button",title:ar("适应画布"),hotkey:W.ua.macos?"⌘+Shift+=":"Ctrl+Shift+=",icon:"board-viewport-autofit",disabled:function(){return!1},execCommand:function(e){return e.command.execute("FitViewport")}},{type:"separator",noReadOnly:!0},{type:"custom",component:it.a.createElement(fy,{diagram:t}),show:function(){return!(n&&W.ua.mobile)}}],focusHidden:!0},{align:"top-right",subItems:[{name:"properties",type:"button",title:ar("打开设置"),noReadOnly:!0,icon:"board-setting",disabled:function(){return!1},execCommand:function(){e.onProperties&&e.onProperties()},noMini:!0}],focusHidden:!0},{align:"top-right",subItems:[{name:"focusmode",type:"button",title:ar("隐藏工具栏"),hotkey:W.ua.macos?"⌘+.":"Ctrl+.",noMini:!1,noReadOnly:!0,icon:"board-toolbar-hide",disabled:!1,execCommand:function(){return e.setFocusMode&&e.setFocusMode(!0)}}],focusHidden:!0},{align:"top-right",subItems:[{name:"focusmode",type:"button",title:ar("展开工具栏"),hotkey:W.ua.macos?"⌘+.":"Ctrl+.",noMini:!1,noReadOnly:!0,icon:"board-toolbar-show",disabled:!1,execCommand:function(){return e.setFocusMode&&e.setFocusMode(!1)}}],focusHidden:!1},{align:"left-middle",subItems:[{type:"button",name:"material",title:ar("素材库"),noReadOnly:!0,icon:it.a.createElement("span",{className:"lake-board-toolbar-material-icon"}),execCommand:function(){null==e||e.onMaterialMaximize()}},{name:"iconfont",title:ar("插入 Iconfont"),type:"popover",noReadOnly:!0,icon:it.a.createElement("span",{className:"lake-board-toolbar-iconfont-icon"}),overlay:function(n){var r=n.setPopoverVisible;return it.a.createElement(by,{diagram:t,boardWebProxy:null==e?void 0:e.boardWebProxy,onSelect:function(){r(!1)}})}},{type:"separator",noReadOnly:!0},{type:"button",name:"insertText",title:ar("文本"),noReadOnly:!0,hotkey:"T",icon:"board-insert-text",disabled:function(e){return!e.command.enable("BeginInsertText")},execCommand:function(e){return e.command.execute("BeginInsertText")}},{name:"board:insertShape",title:ar("图形"),hotkey:"S",type:"popover",noReadOnly:!0,icon:"board-insert-shape",execCommand:function(e){return e.command.execute("BeginInsertGeometry")},overlay:function(n){var r=n.onSelect;return it.a.createElement(ny,{basicWithSwimlane:!0,groups:["basic","flowchart","UML","ER"],onSelect:function(n){var a,i=n.key,o=n.attr;r({key:i}),function(e,t){if(e){var n=mo.find((function(e){return e.name===t}));n&&e.click(Dy[n.category],{shape:t})}}(null==e||null===(a=e.boardWebProxy)||void 0===a?void 0:a.spm,i),t.command.execute("BeginInsertGeometry",{shape:i,attr:o})}})}},{type:"popover",name:"insertEdge",title:ar("连线"),hotkey:W.ua.macos?"⌘+L":"Ctrl+L",defaultKey:"straight-line-arrow",icon:"board-straight-line-arrow",noReadOnly:!0,disabled:function(e){return!e.command.enable("BeginInsertLine")},data:[{key:"straight-line-arrow",icon:"board-straight-line-arrow"},{key:"curve-line-arrow",icon:"board-curve-line-arrow"},{key:"elbow-line-arrow",icon:"board-elbow-line-arrow"}],onClick:function(){t.selector.clear(),t.command.execute("BeginInsertLine",t.settings.line)},onSelect:function(e){var n=e.key.split("-"),r=b()(n,3),a=r[0],i=r[2];t.command.execute("BeginInsertLine",{shape:a,marker:i})}},{type:"button",name:"insertMindmap",title:ar("思维导图"),hotkey:"M",icon:"board-mind",noReadOnly:!0,disabled:function(e){return!e.command.enable("MindmapBeginInsertStem")},execCommand:function(e){return e.command.execute("MindmapBeginInsertStem")}},{type:"separator",noReadOnly:!0},{name:"insertImage",title:ar("图片"),type:"upload",icon:"board-upload-image",noReadOnly:!0,accept:W.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(","),disabled:!1,onChange:function(e){ky(e,t)}}],focusHidden:!0}]}(e).map((function(e){if(t===e.focusHidden)return null;var o=e.subItems.filter((function(e){return e.show instanceof Function?e.show():(!n||!e.noMini)&&(!(!n&&e.noMaxim)&&((!r||!e.noReadOnly)&&(("properties"!==e.name||!a)&&(!!("material"!==e.name||null!=i&&i.material)&&!("iconfont"===e.name&&(null==i||!i.iconfont||null!=i&&null!==(t=i.iconfont)&&void 0!==t&&t.disable))))));var t}));return o.length>0?Ty(Ty({},e),{},{subItems:o}):null})).filter((function(e){return e}))}(e);l(t)};n();var r=function(e){e.isModelChange&&n()};return t.on("aftercommandexecute",r),t.on("aftermodechange",n),function(){t.off("aftercommandexecute",r),t.off("aftermodechange",n)}}return function(){return!1}}),[t,n,r,a]),it.a.createElement(Ny,{diagram:t,items:c,className:"lake-diagram-board-toolbar"})}function qy(e){var t=e.icon,n=e.title,r=e.hotkey;return it.a.createElement("div",null,t,n,r&&it.a.createElement("span",{className:"lake-context-menu-hotkey"},r))}function zy(e){var t=e.title,n=e.hotkey,r=e.accept,a=e.icon,i=e.onChange,o=Object(at.useRef)();return it.a.createElement("div",{className:"lake-board-context-menu-upload-item-content",onClick:function(e){e.stopPropagation(),o.current.click()}},a,t,n&&it.a.createElement("span",{className:"lake-context-menu-hotkey"},n),it.a.createElement("input",{type:"file",accept:r,onChange:i,ref:o}))}function Fy(e,t){var n=e.disabled,r=e.title,a=e.key,i=e.hotkey,o=e.type,c=e.accept,l=e.onChange;if(e.data)return it.a.createElement(mt.a.SubMenu,{key:a,title:r,disabled:n,popupClassName:"lake-context-submenu lake-prevent-card-activated lake-diagram-dialog-popover lake-diagram-prevent-mouse-select"},e.data.map(Fy));if("separator"===o)return it.a.createElement(mt.a.Divider,{key:a+"_"+t});var s,u="string"==typeof e.icon?it.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}):e.icon;return s="upload"===o?it.a.createElement(zy,{icon:u,title:r,hotkey:i,accept:c,onChange:l}):it.a.createElement(qy,{icon:u,title:r,hotkey:i}),it.a.createElement(mt.a.Item,{key:a,className:"ant-menu-item",disabled:n},s)}function Yy(e){var t=e.coord,n=e.overlayClassName,r=e.diagram,a=e.onClose,i=Object(at.useState)(null),o=b()(i,2),c=o[0],l=o[1],s=Object(at.useRef)();if(Object(at.useEffect)((function(){if(t){var e=s.current.offsetParent.getBoundingClientRect();l([t[0]-e.x,t[1]-e.y])}else l(null)}),[t]),Object(at.useEffect)((function(){function e(){a()}function t(t){t.target.closest(".lake-diagram-dialog-popover")||e()}function n(){e()}return window.addEventListener("mousedown",t),window.addEventListener("scroll",e,{passive:!0}),r.on("afterviewportchange",n),function(){window.removeEventListener("mousedown",t),window.removeEventListener("scroll",e),r.off("afterviewportchange",n)}}),[r,a]),c){var u="lake-diagram-dialog-popover lake-prevent-card-activated lake-diagram-prevent-mouse-select lake-diagram-prevent-mouseleave-reset-focus-point";return it.a.createElement(Ct.a,rt()({},e,{getPopupContainer:function(){return e.getPopupContainer?e.getPopupContainer():document.querySelector(".yuque-sdk-extra-container")||document.body},visible:!0,overlayClassName:n?n+" "+u:u}),it.a.createElement("div",{ref:s,style:{position:"absolute",left:"".concat(c[0],"px"),top:"".concat(c[1],"px"),pointerEvents:"none",width:"0px",height:"0px"}}))}return it.a.createElement("span",{ref:s})}function Xy(e){var t=e.getMenuData,n=e.diagram,r=e.boardWebProxy,a=Object(at.useState)(e.coord),i=b()(a,2),o=i[0],c=i[1],l=Object(at.useState)(t()),s=b()(l,2),u=s[0],d=s[1],h=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});Object(at.useEffect)((function(){function e(e){d(t()),c([e.clientX,e.clientY])}return n.on("contextmenu",e),function(){n.off("contextmenu",e)}}),[n]);var f=it.a.createElement("div",rt()({},h,{className:st()("lake-context-menu",e.className)}),it.a.createElement(mt.a,{className:"lake-context-submenu",onMouseDown:function(e){e.preventDefault()},onClick:function(t){var r=n.viewport.invertClient(o);e.onClick({key:t.key,canvasPoint:r}),c(null)},selectable:!1},u.map(Fy)));return it.a.createElement(Yy,{placement:"rightTop",content:f,visible:!0,overlayClassName:"lake-diagram-context-menu-popover ne-ignore-pointer-events",diagram:n,coord:o,onClose:function(){c(null)},boardWebProxy:r})}_y.defaultProps={mini:!1,readOnly:!1,diagram:null,showProperties:!0,boardWebProxy:{},onProperties:function(){return!1},onSave:function(){return!1},onMaterialUse:function(){return!1},onMaterialMore:function(){return!1},onMaterialMaximize:function(){return!1}},_y.propTypes={mini:ct.a.bool,readOnly:ct.a.bool,diagram:ct.a.object,showProperties:ct.a.bool,onProperties:ct.a.func,onSave:ct.a.func,focusMode:ct.a.bool,setFocusMode:ct.a.func,boardWebProxy:ct.a.object,onMaterialMore:ct.a.func,onMaterialUse:ct.a.func,onMaterialMaximize:ct.a.func},qy.propTypes={title:ct.a.string,hotkey:ct.a.string,icon:ct.a.node},jt(".lake-board-context-menu-upload-item-content input {\n  display: none;\n}\n"),zy.propTypes={title:ct.a.string,hotkey:ct.a.string,icon:ct.a.oneOf([ct.a.string,ct.a.node]),data:ct.a.arrayOf(ct.a.object),onChange:ct.a.func,accept:ct.a.string},Fy.propTypes={title:ct.a.string,key:ct.a.string,hotkey:ct.a.string,type:ct.a.string,disabled:ct.a.bool,icon:ct.a.oneOf([ct.a.string,ct.a.node]),data:ct.a.arrayOf(ct.a.object),onChange:ct.a.func,accept:ct.a.string},jt("/* stylelint-disable */\n.lake-diagram-dialog-popover .ant-popover-inner-content {\n  padding: 0;\n}\n"),Yy.defaultProps={coord:null,diagram:null,onClose:function(){}},Yy.propTypes={coord:ct.a.array,diagram:ct.a.object,onClose:ct.a.func,overlayClassName:ct.a.string,getPopupContainer:ct.a.object},jt("/* stylelint-disable */\n/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-context-menu-popover {\n  z-index: 1033;\n}\n.lake-diagram-context-menu-popover .ant-popover-arrow {\n  display: none;\n}\n.lake-context-menu {\n  z-index: 13;\n  box-shadow: 0 1px 4px #00000021;\n}\n.lake-context-menu,\n.lake-context-submenu {\n  list-style-type: none !important;\n}\n.lake-context-menu li,\n.lake-context-submenu li {\n  margin-left: 0 !important;\n}\n.lake-context-menu .ant-menu,\n.lake-context-submenu .ant-menu {\n  border-radius: 2px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu,\n.lake-context-submenu .ant-menu .ant-menu-submenu,\n.lake-context-menu .ant-menu .ant-menu-item,\n.lake-context-submenu .ant-menu .ant-menu-item {\n  height: 32px;\n  line-height: 32px;\n  min-width: 164px;\n}\n.lake-context-menu .ant-menu .ant-menu-item-active,\n.lake-context-submenu .ant-menu .ant-menu-item-active,\n.lake-context-menu .ant-menu .ant-menu-submenu-active,\n.lake-context-submenu .ant-menu .ant-menu-submenu-active {\n  background: var(--yq-bg-tertiary);\n  color: var(--yq-text-body);\n}\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-title,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-title {\n  height: auto;\n  line-height: inherit;\n  color: var(--yq-text-body);\n}\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after {\n  width: 5px;\n  height: 1px;\n  background-image: linear-gradient(90deg, var(--yq-text-body), var(--yq-text-body));\n}\n.lake-context-menu .ant-menu.ant-menu-vertical .ant-menu-item,\n.lake-context-submenu .ant-menu.ant-menu-vertical .ant-menu-item {\n  margin-bottom: 4px;\n}\n.lake-context-menu .ant-menu.ant-menu-vertical .ant-menu-submenu,\n.lake-context-submenu .ant-menu.ant-menu-vertical .ant-menu-submenu {\n  margin-bottom: 4px;\n}\n.lake-context-menu .ant-menu.ant-menu-sub,\n.lake-context-submenu .ant-menu.ant-menu-sub {\n  width: auto;\n}\n.lake-context-menu .ant-menu.ant-menu-sub > li,\n.lake-context-submenu .ant-menu.ant-menu-sub > li {\n  width: auto;\n}\n.lake-context-menu .lake-icon,\n.lake-context-submenu .lake-icon {\n  display: inline-block;\n  margin-right: 0.25em;\n}\n.lake-context-menu-hotkey {\n  float: right;\n  color: var(--yq-text-caption);\n  margin-left: 16px;\n}\n"),Xy.defaultProps={},Xy.propTypes={className:ct.a.string,coord:ct.a.object,data:ct.a.arrayOf(ct.a.object),onClick:ct.a.func,diagram:ct.a.object,getMenuData:ct.a.func,boardWebProxy:ct.a.object};var Gy=[{key:"Align",title:ar("对齐"),data:[{key:"AlignLeft",icon:"align-left",title:ar("左对齐"),hotkey:"Option+←"},{key:"AlignHCenter",icon:"align-h-center",title:ar("左右居中"),hotkey:"Option+H"},{key:"AlignRight",icon:"align-right",title:ar("右对齐"),hotkey:"Option+→"},{key:"DistributeHorizontally",icon:"distribute-horizontally",title:ar("水平均分")},{type:"separator"},{key:"AlignTop",icon:"align-top",title:ar("顶对齐"),hotkey:"Option+↑"},{key:"AlignVCenter",icon:"align-v-center",title:ar("上下居中"),hotkey:"Option+V"},{key:"AlignBottom",icon:"align-bottom",title:ar("底对齐"),hotkey:"Option+↓"},{key:"DistributeVertically",icon:"distribute-vertically",title:ar("垂直均分")}]},{key:"ZIndex",title:ar("层级"),data:[{key:"ToFront",title:ar("置顶"),hotkey:"⌘+]"},{key:"ToBack",title:ar("置底"),hotkey:"⌘+["},{key:"Forward",title:ar("上移一层"),hotkey:"\t⌘+Option+]"},{key:"Backward",title:ar("下移一层"),hotkey:"⌘+Option+["}]},{key:"AttachToVertex",title:ar("插入"),data:[{key:"AttachLink",title:ar("链接"),hotkey:"⌘+K"}]},{key:"MindmapAppendAbstract",title:ar("添加概要")},{key:"AttachToMindmapCell",title:ar("插入"),data:[{key:"MindmapAppendChild",title:ar("子级"),hotkey:"Tab"},{key:"MindmapAppendParent",title:ar("父级"),hotkey:"Option+Tab"},{key:"MindmapAppendSibling",title:ar("同级"),hotkey:"Enter"},{key:"separator",type:"separator"},{key:"AttachLink",title:ar("链接"),hotkey:"⌘+K"},{key:"MindmapAttachImage",title:ar("图片"),type:"upload",accept:W.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(",")},{key:"MindmapAttachNote",title:ar("备注")}]},{key:"Cut",title:ar("剪切"),hotkey:"⌘+X"},{key:"Copy",title:ar("复制"),hotkey:"⌘+C"},{key:"CopyOtherFormat",title:ar("复制为其它格式"),data:[{key:"CopyDoc",title:ar("语雀文档")},{key:"CopyTable",title:ar("语雀表格")}]},{key:"Paste",title:ar("粘贴"),hotkey:"⌘+V"},{key:"Collapse",title:ar("折叠"),hotkey:"⌘+/"},{key:"Expand",title:ar("展开"),hotkey:"⌘+/"},{key:"MindmapAppendParent",title:ar("插入父级"),hotkey:"Option+Tab"},{key:"MindmapInsertStem",title:ar("添加思维导图"),hotkey:"M"},{key:"MindmapAppendSibling",title:ar("插入同级"),hotkey:"Enter"},{key:"MindmapAppendChild",title:ar("插入子级"),hotkey:"Tab"},{key:"ActualSize",title:ar("实际尺寸"),hotkey:"⌘+0"},{key:"FitViewport",title:ar("适应画布"),hotkey:"⌘+Shift+="},{key:"Delete",title:ar("删除"),hotkey:"Delete"},{key:"MindmapRemoveSingleNode",title:ar("删除单个节点"),hotkey:"⌘+Delete"},{key:"BeginInsertLine",title:ar("添加连线"),hotkey:"⌘+L"},{key:"BeginEditContent",title:ar("编辑文本")},{key:"separator",type:"separator"},{key:"InsertText",title:ar("添加文字"),hotkey:"T"},{key:"InsertGeometry",title:ar("添加图形"),hotkey:"S"},{key:"Group",title:ar("成组"),hotkey:"⌘+G"},{key:"UnGroup",title:ar("取消成组"),hotkey:"⌘+Shift+G"},{key:"AddMaterialLib",title:ar("添加到素材库")},{key:"SaveImage",title:ar("另存为图片")}],Hy={};function Wy(e,t){Hy[e]=t}function Vy(e){return Hy[e]}function Uy(e){return Zy.apply(this,arguments)}function Zy(){return(Zy=X()(H.a.mark((function e(t){var n,r,a,i,o,c,l;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.arrayBuffer();case 3:return n=e.sent,e.next=6,crypto.subtle.digest("SHA-256",n);case 6:return r=e.sent,a=Array.from(new Uint8Array(r)),i=a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",i);case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,t.arrayBuffer();case 16:return o=e.sent,c=Array.from(new Uint8Array(o)),l=c.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",l.length>100&&l.substring(l.length-100,l.length));case 20:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Ky(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ky(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ky(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jy(e,t){return e.every((function(t){return e.includes(t.stem)}))?t.deduplicate(e).filter((function(e){return e.isStem})):[]}function $y(e,t,n){return eg.apply(this,arguments)}function eg(){return(eg=X()(H.a.mark((function e(t,n,r){var a,i,o,c,l,s,u,d,h,f;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.destroyed){e.next=2;break}return e.abrupt("return");case 2:return t=Jy(t,n),a=t.reduce((function(e,t){return t.deepEach((function(t){e.push(t)})),e}),[]),e.next=6,n.exporter.blob("jpg",{cells:a,width:220});case 6:if(i=e.sent){e.next=10;break}return Oe.a.warn(ar("导出素材图片失败")),e.abrupt("return",!1);case 10:return o=Object(q.a)(),Oe.a.loading({content:ar("上传素材中"),key:o,duration:0}),c=Array.from(new Set(t.map((function(e){var t,n,r;return e.isImage&&(null===(t=e.model)||void 0===t||null===(n=t.image)||void 0===n||null===(r=n.uploadInfo)||void 0===r?void 0:r.hash)})))),l=c.map((function(e){var t;return null===(t=Vy(e))||void 0===t?void 0:t.imageCdnPromise})),e.next=16,Promise.all(l);case 16:return s=new File([i],"lake_board_material.jpeg"),e.next=19,r.uploader.image(s);case 19:if(u=e.sent,Oe.a.destroy(o),u){e.next=24;break}return Oe.a.warn(ar("上传素材图片失败")),e.abrupt("return",!1);case 24:return d=n.exporter.json(t),h=nr(a),e.next=28,r.material.create({cover:u,diagramData:d,graphicsBBox:Qy(Qy({},h),{},{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY})});case 28:return f=e.sent,e.abrupt("return",f);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ng(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tg(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window.___lakeDiagramUplaodFileHashMap=Hy;var rg=Gy.reduce((function(e,t){var n;return e[t.key]=t,t.hotkey&&(t.hotkey=(n=t.hotkey,W.ua.macos?n:n.replace(/⌘/g,"Ctrl").replace(/Option/g,"Alt"))),e}),{});function ag(e,t){var n=e.key;e.disabled=!!t.command.find(n)&&!t.command.enable(n),"MindmapAttachImage"===n&&(e.onChange=function(e){ky(e,t)})}function ig(e,t){return(e=e.filter((function(e){return null!=e}))).map((function(e,n){var r=ng(ng({},d()(rg[e])),{},{disabled:!!t.command.find(e)&&!t.command.enable(e)});return ag(r,t),r.data&&r.data.forEach((function(e){ag(e,t)})),"separator"===e&&(r.key=e+"-"+n),r}))}function og(e){return e.command.enable("Expand")?["Expand"]:["Collapse"]}function cg(e){var t=[],n=e.filter((function(e){return e.isStem}));return n.length>1&&t.push("Align"),n.length>0&&t.push("ZIndex"),t.length>0?t.push("separator"):t=null,t}function lg(e){var t=[];return e.filter((function(e){return e.isStem})).length>1?(t.push("Group"),t.push("separator")):t=null,t}function sg(e,t,n){var r=Jy(e,t),a=[];return e.length>0&&a.push("SaveImage"),n&&r.length>0&&!function(e){for(var t=e.reduce((function(e,t){return t.deepEach((function(t){e.push(t)})),e}),[]),n=t.reduce((function(e,t){return e[t.model.id]=t,e}),{}),r=t.filter((function(e){return e.isLine})),a=0;a<r.length;a++){var i,o,c,l,s=r[a],u=null===(i=s.model)||void 0===i||null===(o=i.target)||void 0===o?void 0:o.id,d=null===(c=s.model)||void 0===c||null===(l=c.source)||void 0===l?void 0:l.id;if(u&&!n[u]||d&&!n[d])return!0}return!1}(r)&&a.push("AddMaterialLib"),a.length>0?(a.push("separator"),a):null}function ug(){return(ug=X()(H.a.mark((function e(t,n,r,a){var i,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$y(t,n,r);case 2:(i=e.sent)&&((o=r.spm)&&o.click("b4693.c107432.d223055",{material_id:null==i?void 0:i.id}),a&&a(null==i?void 0:i.id));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dg(e){try{Go("copy",e),Oe.a.success(ar("复制成功"))}catch(e){Oe.a.error(ar("复制失败"))}}function hg(e){var t=e.diagram,n=e.boardWebProxy,r=e.onAddMaterial,a=!(null==n||!n.material);return it.a.createElement(Xy,{diagram:t,getMenuData:function(){return function(e,t){var n=t.materialLibEnable;return"read"===e.interaction.currentMode?function(e){var t=e.selector.selections,n=["ActualSize","FitViewport"];return t.length>0&&t.every((function(e){return e.isMindmap}))&&(n=["Copy"].concat(og(e)).concat(["separator"]).concat(n)),ig(n,e)}(e):function(e,t){var n=e.selector.selections,r=[];return 0===n.length?r=["InsertText","InsertGeometry","BeginInsertLine","MindmapInsertStem","separator","Paste","separator","ActualSize","FitViewport"]:n.every((function(e){return e.isMindmap}))?(1===n.length&&(r=["AttachToMindmapCell","separator"]),Pp(n,!0)&&r.push("MindmapAppendAbstract","separator"),r=r.concat(og(e)).concat(["separator","Cut","Copy","CopyOtherFormat","Paste","separator"]).concat(sg(n,e,t)).concat(cg(n)).concat(lg(n)).concat(["Delete","MindmapRemoveSingleNode"])):n.every((function(e){return e.isVertex}))?(1!==n.length||n[0].isImage||(r=["AttachToVertex","separator"]),r=r.concat(["Cut","Copy","Paste","separator"]).concat(sg(n,e,t)).concat(cg(n)).concat(lg(n)).concat(["Delete"])):r=n.every((function(e){return e.isGroup}))?r.concat(["Cut","Copy","Paste","separator"]).concat(sg(n,e,t)).concat(cg(n)).concat(lg(n)).concat(["UnGroup","separator"]).concat(["Delete"]):["Cut","Copy","Paste","separator"].concat(sg(n,e,t)).concat(cg(n)).concat(lg(n)).concat(["Delete"]),ig(r,e)}(e,n)}(t,{materialLibEnable:a})},boardWebProxy:n,onClick:function(e){var a=e.key,i=e.canvasPoint;t.tryFocus();var o=t.selector.selections;switch(a){case"Cut":!function(e){try{Go("cut",e),Oe.a.success(ar("剪切成功"))}catch(e){Oe.a.error(ar("剪切失败"))}}(t);break;case"Copy":dg(t);break;case"CopyDoc":t.settings.copyType="doc",dg(t),t.settings.copyType="default";break;case"CopyTable":t.settings.copyType="table",dg(t),t.settings.copyType="default";break;case"Paste":!function(e,t){try{Go("paste",e,t)}catch(e){Oe.a.error(ar("粘贴失败"))}}(t,i);break;case"MindmapInsertStem":t.command.execute("MindmapInsertStem",{x:i[0],y:i[1]});break;case"InsertText":t.command.execute("InsertText",{x:i[0],y:i[1]});break;case"InsertGeometry":t.command.execute("InsertGeometry",{x:i[0],y:i[1]});break;case"AddMaterialLib":!function(e,t,n,r){ug.apply(this,arguments)}(o,t,n,r);break;case"SaveImage":!function(e,t){t.exporter.download("png",{cells:zo(e,t)})}(o,t);break;default:if(a)try{"MindmapAppendAbstract"===a&&n&&n.spm&&n.spm.click("b4693.c116586.d241682",{"right-click(MindmapAppendAbstract)":1}),t.command.execute(a)}catch(e){throw new Error("unknown command ".concat(a))}}t.tryFocus()}})}function fg(e){var t=e.diagram;return it.a.createElement("div",{className:"lake-diagram-properties-alignment"},it.a.createElement(Et.a.Group,{onChange:function(e){t.command.execute(e.target.value)},value:null},it.a.createElement(Et.a.Button,{value:"AlignLeft",disabled:!t.command.enable("AlignLeft")},it.a.createElement("span",{className:"lake-icon lake-icon-align-left"})),it.a.createElement(Et.a.Button,{value:"AlignHCenter",disabled:!t.command.enable("AlignHCenter")},it.a.createElement("span",{className:"lake-icon lake-icon-align-h-center"})),it.a.createElement(Et.a.Button,{value:"AlignRight",disabled:!t.command.enable("AlignRight")},it.a.createElement("span",{className:"lake-icon lake-icon-align-right"})),it.a.createElement(Et.a.Button,{value:"AlignTop",disabled:!t.command.enable("AlignTop")},it.a.createElement("span",{className:"lake-icon lake-icon-align-top"})),it.a.createElement(Et.a.Button,{value:"AlignVCenter",disabled:!t.command.enable("AlignVCenter")},it.a.createElement("span",{className:"lake-icon lake-icon-align-v-center"})),it.a.createElement(Et.a.Button,{value:"AlignBottom",disabled:!t.command.enable("AlignBottom")},it.a.createElement("span",{className:"lake-icon lake-icon-align-bottom"}))))}function pg(e){var t=e.selections,n=e.diagram,r=t.filter((function(e){return e.canArrange()})).length<3;return it.a.createElement("div",{className:"lake-diagram-properties-distribute"},it.a.createElement(Et.a.Group,{onChange:function(e){n.command.execute(e.target.value)},value:null},it.a.createElement(Et.a.Button,{value:"DistributeHorizontally",disabled:r},it.a.createElement("span",{className:"lake-icon lake-icon-horizontally"})),it.a.createElement(Et.a.Button,{value:"DistributeVertically",disabled:r},it.a.createElement("span",{className:"lake-icon lake-icon-vertically"}))),it.a.createElement("div",{className:"lake-diagram-properties-distribute-label-group"},it.a.createElement("span",{className:"lake-diagram-properties-distribute-label"},ar("水平均分")),it.a.createElement("span",{className:"lake-diagram-properties-distribute-label"},ar("垂直均分"))))}function mg(e){var t=e.diagram,n=e.selections,r=t.getCells(),a=n.some((function(e){return e.locked}))||1===n.length&&n[0].getZIndex()===r.length-1,i=n.some((function(e){return e.locked}))||1===n.length&&0===n[0].getZIndex();function o(r){e.onChange((function(){t.command.execute(r.target.value,{cells:n})}))}return it.a.createElement("div",{className:"lake-diagram-properties-z-index"},it.a.createElement("div",{className:"lake-diagram-properties-z-index-btn-group"},it.a.createElement(Et.a.Group,{onChange:o,value:null},it.a.createElement(ut.a,{title:ar("置顶")},it.a.createElement(Et.a.Button,{value:"ToFront",disabled:a},it.a.createElement("span",{className:"lake-icon lake-icon-to-front"}))),it.a.createElement(ut.a,{title:ar("置底")},it.a.createElement(Et.a.Button,{value:"ToBack",disabled:i},it.a.createElement("span",{className:"lake-icon lake-icon-to-back"}))))),it.a.createElement("div",{className:"lake-diagram-properties-z-index-btn-group"},it.a.createElement(Et.a.Group,{onChange:o,value:null},it.a.createElement(ut.a,{title:ar("上移")},it.a.createElement(Et.a.Button,{value:"Forward",disabled:a},it.a.createElement("span",{className:"lake-icon lake-icon-forward"}))),it.a.createElement(ut.a,{title:ar("下移")},it.a.createElement(Et.a.Button,{value:"Backward",disabled:i},it.a.createElement("span",{className:"lake-icon lake-icon-backward"}))))))}function yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yg(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vg(e){var t=e,n=t.onBlur,r=t.onPressEnter,a=t.onStep,i=t.value,o=Object(at.useState)(null),c=b()(o,2),l=c[0],s=c[1];return e=gg(gg({},e),{},{value:"number"==typeof l?l:i,onChange:function(e){s(e)},onBlur:function(e){s(null),n&&n(e)},onPressEnter:function(e){s(null),r&&r(e)},onStep:function(e){s(null),a&&a(e)}}),vg.propTypes={value:ct.a.number,onStep:ct.a.func,onBlur:ct.a.func,onPressEnter:ct.a.func},it.a.createElement(Ot.a,e)}function bg(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r={width:ar("宽"),height:ar("高")};function a(t,n){n>=1&&e.onChange(t,n)}return it.a.createElement(sy,{className:"lake-diagram-size-control",disabled:n},Object.keys(r).map((function(e){return it.a.createElement("div",{className:"lake-diagram-size-control-".concat(e),key:e},r[e],it.a.createElement(vg,{disabled:n,min:1,max:2560,value:Math.round(sy.get(t,e)),onBlur:function(t){return a(e,parseFloat(t.target.value))},onPressEnter:function(t){return a(e,parseFloat(t.target.value))},onStep:function(t){return a(e,t)}}))})))}function xg(e){var t=e.path,n=e.selections,r=0===n.length||n.some((function(e){return e.locked}));return it.a.createElement(sy,{className:"lake-diagram-ratio-control",disabled:r},it.a.createElement(Pt.a,{disabled:r,checked:sy.get(n,t),onChange:function(n){e.onChange(t,n.target.checked)}},ar("保持宽高比")))}function kg(e){var t=e.selections,n=e.onChange,r=0===t.length||t.some((function(e){return e.locked}));return it.a.createElement(sy,{className:"lake-diagram-reset-size-control",disabled:r},it.a.createElement(dt.a,{disabled:r,onClick:function(){var e=t[0];e.isImage?n({width:e.image.naturalWidth,height:e.image.naturalHeight}):e.isVertex&&n({width:e.stencil.width,height:e.stencil.height})}},ar("原始大小")))}function wg(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked}));function r(t,n){e.onChange(t,n)}return it.a.createElement(sy,{className:"lake-diagram-position-control",disabled:n},["x","y"].map((function(e){return it.a.createElement("div",{className:"lake-diagram-position-control-".concat(e),key:e},e.toUpperCase(),it.a.createElement(vg,{disabled:n,value:Math.round(sy.get(t,e)),onBlur:function(t){return r(e,parseFloat(t.target.value))},onPressEnter:function(t){return r(e,parseFloat(t.target.value))},onStep:function(t){return r(e,t)}}))})))}function Cg(e){return""===e?e:"".concat(Math.round(e),"°")}function Eg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("°","");return""===t?t:parseInt(t,10)%360||0}function Og(e){var t=e.selections,n=0===t.length||t.some((function(e){return null==e.rotate}))||t.some((function(e){return e.locked}));function r(t){isFinite(t)&&e.onChange("rotate",t)}function a(e){var t=e.target.value.replace("°","");t<-180||t>180||r(parseFloat(t))}return it.a.createElement(sy,{className:"lake-diagram-rotate-control",disabled:n},ar("角度"),it.a.createElement(vg,{disabled:n,min:-180,max:180,formatter:Cg,parser:Eg,value:sy.get(t,"rotate"),onBlur:a,onPressEnter:a,onStep:r}))}function Pg(e){var t=e.selections,n=[],r=[];t.forEach((function(e){n.push(e.width,e.height),r.push(e.round)}));var a;a=r.every((function(e){return e===r[0]}))?r[0]:ar("多个值");var i=Math.min.apply(Math,n)/2,o=De()((function(t){t=parseInt(t),isFinite(t)&&e.onChange("round",Dt(t,0,i))}),16);function c(e){o(e.target.value)}return Object(at.useEffect)((function(){return function(){return o.cancel()}})),it.a.createElement(sy,{className:"lake-diagram-opacity-control"},it.a.createElement(Mt.a,{min:0,max:i,step:1,tooltipVisible:!1,value:a,onChange:o}),it.a.createElement(vg,{min:0,max:i,step:1,value:a,formatter:function(e){return Math.floor(Dt(e,0,i))},onBlur:c,onPressEnter:c,onStep:o}))}hg.defaultProps={boardWebProxy:null,onAddMaterial:null},hg.propTypes={diagram:ct.a.object,boardWebProxy:ct.a.object,onAddMaterial:ct.a.func},jt(".lake-diagram-properties-alignment {\n  margin-top: 8px;\n  margin-bottom: 16px;\n}\n.lake-diagram-properties-alignment .ant-radio-group {\n  display: flex;\n}\n.lake-diagram-properties-alignment .ant-radio-group label {\n  flex-grow: 1;\n  padding: 0;\n  text-align: center;\n}\n"),fg.defaultProps={},fg.propTypes={diagram:ct.a.object.isRequired,selections:ct.a.arrayOf(ct.a.object).isRequired},fg.key="AlignControl",jt(".lake-diagram-properties-distribute {\n  margin-bottom: 8px;\n}\n.lake-diagram-properties-distribute .ant-radio-group {\n  width: 100%;\n}\n.lake-diagram-properties-distribute .ant-radio-button-wrapper {\n  width: 50%;\n  text-align: center;\n}\n.lake-diagram-properties-distribute-label-group {\n  width: 100%;\n}\n.lake-diagram-properties-distribute-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n"),pg.propTypes={selections:ct.a.arrayOf(ct.a.object),diagram:ct.a.object},jt(".lake-diagram-properties-z-index {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n}\n.lake-diagram-properties-z-index .ant-radio-button-wrapper {\n  padding: 0 14px;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group {\n  width: calc(50% - 4px);\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group .ant-radio-group {\n  display: flex;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group .ant-radio-group label {\n  text-align: center;\n  flex-grow: 1;\n  flex-shrink: 1;\n}\n"),mg.defaultProps={onChange:function(){}},mg.propTypes={onChange:ct.a.func.isRequired,diagram:ct.a.object.isRequired,selections:ct.a.arrayOf(ct.a.object).isRequired},mg.key="ZIndexControl",jt(".lake-diagram-size-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-size-control-width,\n.lake-diagram-size-control-height {\n  display: flex;\n  align-items: center;\n  width: calc(50% - 8px);\n}\n.lake-diagram-size-control-width .ant-input-number,\n.lake-diagram-size-control-height .ant-input-number {\n  margin-left: 16px;\n  width: calc(100% - 32px);\n}\n"),bg.propTypes={selections:ct.a.array,onChange:ct.a.func},xg.defaultProps={path:"constraints.proportion"},xg.propTypes={path:ct.a.string,selections:ct.a.array,onChange:ct.a.func},jt(".lake-diagram-reset-size-control .lake-diagram-control-body {\n  margin-top: 12px;\n}\n.lake-diagram-reset-size-control .ant-btn {\n  width: 100%;\n}\n"),kg.propTypes={selections:ct.a.array,onChange:ct.a.func},jt(".lake-diagram-position-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-position-control-x,\n.lake-diagram-position-control-y {\n  display: flex;\n  align-items: center;\n  width: calc(50% - 8px);\n}\n.lake-diagram-position-control-x .ant-input-number,\n.lake-diagram-position-control-y .ant-input-number {\n  margin-left: 16px;\n  width: calc(100% - 32px);\n}\n"),wg.propTypes={selections:ct.a.array,onChange:ct.a.func},jt(".lake-diagram-rotate-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n"),Og.propTypes={selections:ct.a.arrayOf(ct.a.object),onChange:ct.a.func},jt(".lake-diagram-opacity-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-opacity-control .lake-diagram-control-body .ant-slider {\n  flex: 1 0 auto;\n  margin-left: 0;\n  margin-right: 16px;\n}\n"),Pg.propTypes={selections:ct.a.arrayOf(ct.a.object),onChange:ct.a.func};var Mg=[{name:ar("排列"),hideHeader:!0,tabKey:"arrangement",condition:function(e){return e.length>0&&e.some((function(e){return e.isStem}))},controls:[{Control:fg},{Control:pg},{Control:mg}]},{name:ar("位置"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isVertex&&e.isStem||e.isGroup}))},controls:[{Control:wg,display:function(e){return e.every((function(e){return e.isGroup}))||e.every((function(e){return!e.isGroup}))}}]},{name:ar("大小"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isGeometry&&e.isStem||e.isGroup}))},controls:[{Control:bg,display:function(e){return e.every((function(e){return e.isGroup}))||e.every((function(e){return!e.isGroup}))}},{Control:xg,display:function(e){return!e.some((function(e){return e.isGroup}))}},{Control:kg,display:function(e){return!e.some((function(e){return e.isGroup}))}}]},{name:ar("圆角半径"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isGeometry&&e.canRound()}))},controls:[{Control:Pg}]},{name:ar("旋转"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.canRotate()}))},controls:[{Control:Og}]}];jt(".lake-diagram-color-pick-container {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 0;\n  min-width: 74px;\n}\n");var jg=function(e){var t=e.color,n=e.disabled,a=e.onClear,i=e.palette,o=e.transSVG,c=Object(at.useState)(!1),l=b()(c,2),s=l[0],u=l[1],d=Object(at.useCallback)((function(t,n){e.onSelect(t,n)}),[e.onSelect]);return it.a.createElement(pt.a,{disabled:n,trigger:["click"],visible:s,onVisibleChange:function(e){u(e),e||Ra(t,i)},overlay:it.a.createElement("div",{className:"lake-diagram-color-pick-container"},it.a.createElement(r.ColorPicker,{className:"lake-prevent-card-activated",activeColors:[t],defaultColor:e.defaultColor,onSelect:d,onClear:a,show:s,customColors:Sa,CustomPalette:i})),placement:"bottomRight",getPopupContainer:function(){return document.querySelector(".yuque-sdk-extra-container")||document.body}},!t||function(e){return!e||"transparent"===e||"rgba(255,255,255,0)"===e.replace(/ /g,"")||"rgba(0,0,0,0)"===e.replace(/ /g,"")}(t)?o||it.a.createElement("svg",{width:"90",viewBox:"0 0 90 30",xmlns:"http://www.w3.org/2000/svg"},it.a.createElement("path",{d:"M0 30L90 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"})):e.children)};function Sg(e){var t=e.path,n=e.title,r=e.diagram,a=e.selections.filter((function(e){return e.canFill()})),i=0===a.length||a.some((function(e){return e.locked})),o=sy.get(a,t),c="multiValue"===o?"#FFFFFF":o;function l(n){e.onChange(t,n,wl(a))}return it.a.createElement(sy,{disabled:i,title:n,extra:it.a.createElement(jg,{disabled:i,color:c,defaultColor:e.defaultColor,onSelect:l,onClear:function(){return l("rgba(0, 0, 0, 0)")},palette:r&&r.palette},it.a.createElement("div",{className:st()("lake-diagram-fill",{"lake-diagam-multi-properties-selection":"multiValue"===o}),style:{backgroundColor:c}}))})}function Rg(e){var t=e.path,n=e.title,r=e.diagram,a=e.selections.filter((function(e){return e.canStroke()})),i=function(e,t){return sy.get(e,t)||(e.length>0&&!e[0].isStem?sy.get(e,"treeEdge.stroke"):void 0)}(a,t)||"rgba(0, 0, 0, 0)",o=0===a.length||a.some((function(e){return e.locked})),c="multiValue"===i?"#FFFFFF":i;function l(n){e.onChange(t,n,a)}return it.a.createElement(sy,{disabled:o,title:n||ar("颜色"),extra:it.a.createElement(jg,{disabled:o,color:c,defaultColor:e.defaultColor,onSelect:l,onClear:function(){return l("rgba(0, 0, 0, 0)")},palette:r&&r.palette},it.a.createElement("div",{className:st()("lake-diagram-stroke",{"lake-diagam-multi-properties-selection":"multiValue"===i}),style:{backgroundColor:c}}))})}function Lg(e){var t=e.selections,n=e.path,r=0===t.length||t.some((function(e){return e.locked})),a=t.filter((function(e){return e.canStrokeWidth()})),i=sy.get(a,n);function o(t){var r=Math.min(Math.max(t,1),10);r!==i&&e.onChange(n,r,a)}function c(e){o(parseFloat(e.target.value))}return it.a.createElement(sy,{className:"lake-diagram-stroke-width-control",disabled:r,title:ar("粗细"),extra:it.a.createElement(vg,{disabled:r,min:1,max:10,value:i,onBlur:c,onPressEnter:c,onStep:o})})}jg.propTypes={color:ct.a.string,defaultColor:ct.a.string,children:ct.a.node,disabled:ct.a.bool,onClear:ct.a.func,onSelect:ct.a.func,palette:ct.a.object,transSVG:ct.a.object},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control .lake-diagram-fill {\n  border: 4px solid var(--yq-white);\n  border-radius: 2px;\n  width: 100%;\n  height: 32px;\n}\n.lake-diagram-control.disabled .lake-diagram-fill {\n  display: none;\n}\n"),Sg.defaultProps={defaultColor:"transparent",title:ar("填充颜色"),onChange:function(){}},Sg.propTypes={defaultColor:ct.a.string,selections:ct.a.arrayOf(ct.a.object).isRequired,path:ct.a.string.isRequired,title:ct.a.string,onChange:ct.a.func.isRequired,diagram:ct.a.object},Sg.key="FillControl",jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control.disabled .lake-diagram-stroke {\n  display: none;\n}\n.lake-diagram-stroke {\n  border: 4px solid var(--yq-white);\n  height: 30px;\n}\n"),Rg.defaultProps={defaultColor:"transparent",onChange:function(){}},Rg.propTypes={defaultColor:ct.a.string,selections:ct.a.arrayOf(ct.a.object).isRequired,path:ct.a.string.isRequired,onChange:ct.a.func.isRequired,title:ct.a.string,diagram:ct.a.object},Rg.key="StrokeControl",jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-stroke-width-control .ant-input-number {\n  width: 100%;\n}\n"),Lg.defaultProps={onChange:function(){}},Lg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,path:ct.a.string.isRequired,onChange:ct.a.func.isRequired},Lg.key="StrokeWidthControl",jt(".lake-diagram-stroke-style-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-stroke-style-selected {\n  line-height: 0;\n}\n.lake-diagram-stroke-style-selected .lake-diagram-stroke-style-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-stroke-style-selected .lake-properties-stroke-style-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: var(--yq-text-caption);\n}\n.lake-diagram-stroke-style-selected .lake-diagram-properties-stroke-style {\n  width: 100%;\n  height: 100%;\n}\n");var Ag={none:"https://gw.alipayobjects.com/zos/bmw-prod/5e3dbea7-f3c3-418f-91de-cfbcb825343c.svg",dash:"https://gw.alipayobjects.com/zos/bmw-prod/3d7118e9-1bac-465d-acb9-cc0766ece25e.svg"};function Bg(e){var t=e.selections,n=e.path,r=0===t.length||t.some((function(e){return e.locked})),a=t.filter((function(e){return e.canStrokeStyle()})),i=sy.get(a,n);return it.a.createElement(sy,{className:"lake-diagram-properties-stroke-style",disabled:r,title:ar("样式"),extra:it.a.createElement(pt.a,{disabled:r,trigger:["click"],overlay:it.a.createElement(mt.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var r=t.key;e.onChange(n,"none"===r?null:r,a)}},it.a.createElement(mt.a.Item,{className:"lake-diagram-stroke-style-item","test-id":"lake-diagram-stroke-style-item-none",key:"none",style:{backgroundImage:"url(".concat(Ag.none,")")}}),it.a.createElement(mt.a.Item,{className:"lake-diagram-stroke-style-item","test-id":"lake-diagram-stroke-style-item-dash",key:"dash",style:{backgroundImage:"url(".concat(Ag.dash,")")}})),placement:"bottomRight"},it.a.createElement("div",{className:"lake-diagram-stroke-style-selected"},it.a.createElement("span",{className:"lake-diagram-stroke-style-item lake-diagram-stroke-style-selected-item",style:{backgroundImage:"url(".concat(Ag[i||"none"],")")}}),it.a.createElement(bt.a,{className:"lake-properties-stroke-style-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}function Ng(e){return""===e?e:"".concat(Math.round(100*e),"%")}function Dg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("%","");return""===t?t:Math.min(Math.max(parseFloat(t)/100||0,0),1)}function Ig(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r=parseFloat(sy.get(t,"opacity"))||1,a=De()((function(t){isFinite(t)&&e.onChange("opacity",t)}),16);function i(e){a(Dg(e.target.value))}return Object(at.useEffect)((function(){return function(){return a.cancel()}})),it.a.createElement(sy,{className:"lake-diagram-opacity-control",disabled:n},it.a.createElement(Mt.a,{disabled:n,min:0,max:1,step:.01,tooltipVisible:!1,value:r,onChange:a}),it.a.createElement(vg,{disabled:n,min:0,max:1,step:.01,value:r,formatter:Ng,parser:Dg,onBlur:i,onPressEnter:i,onStep:a}))}function Tg(e){var t=Object(at.useRef)(),n=e.width,r=e.height,a=e.shape,i=a&&mo.find((function(e){return e.name===a}));return Object(at.useEffect)((function(){if(t.current&&i){var e=new dd({stencil:i,width:n,height:r}).rendererElement;e.setAttribute("stroke","#595959"),e.setAttribute("fill","#ffffff"),Array.from(t.current.children,(function(e){return e.remove()})),t.current.appendChild(e)}}),[t,n,r,i]),i?it.a.createElement("svg",{ref:t,width:n,height:r,viewBox:[0,0,n,r].join(" ")}):null}function _g(e){var t,n=e.selections,r=0===n.length,a=n.filter((function(e){return e.isGeometry})),i=sy.get(a,e.path),o=(null===(t=mo[mo.findIndex((function(e){return e.name===i}))])||void 0===t?void 0:t.category)||"basic";return it.a.createElement(sy,{className:"lake-diagram-geometry-shape-control",disabled:r,title:ar("形状"),extra:it.a.createElement(pt.a,{disabled:r,overlay:it.a.createElement("div",{className:"lake-diagram-properties-shape-select-container"},it.a.createElement(Jm,{onSelect:function(t){var n=t.key;e.onChange(e.path,n,a)},groups:[o]})),placement:"bottomRight",trigger:["click"]},it.a.createElement(dt.a,null,it.a.createElement("div",{className:st()("lake-diagram-geometry-shape-current",{"multi-geometry-selection":"multiValue"===i})},it.a.createElement(Tg,{shape:i,width:32,height:32}))))})}Bg.defaultProps={onChange:function(){},path:"stroke.style"},Bg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired,path:ct.a.string.isRequired},Bg.key="StrokeStyleControl",jt(".lake-diagram-opacity-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-opacity-control .lake-diagram-control-body .ant-slider {\n  flex: 1 0 auto;\n  margin-left: 0;\n  margin-right: 16px;\n}\n"),Ig.propTypes={selections:ct.a.arrayOf(ct.a.object),onChange:ct.a.func},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-geometry-shape-control .lake-diagram-control-extra {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-geometry-shape-control .lake-diagram-control-extra .ant-btn {\n  background: none;\n  border: none;\n  height: 32px;\n  width: 100%;\n  padding: 0;\n}\n.lake-diagram-geometry-shape-control .multi-geometry-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-geometry-shape-control .lake-diagram-geometry-shape-current {\n  width: 100%;\n  min-height: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 4px;\n}\n.lake-diagram-properties-shape-select-container {\n  background-color: var(--yq-bg-primary);\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 #00000014, 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n}\n"),Tg.propTypes={width:ct.a.number,height:ct.a.number,shape:ct.a.string},_g.defaultProps={path:"shape",groups:["basic","flowchart"],onChange:function(){}},_g.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,path:ct.a.string.isRequired,groups:ct.a.array,onChange:ct.a.func.isRequired},_g.key="GeometryShapeControl";var qg=[{name:ar("节点"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isGeometry}))},controls:[{path:"shape",Control:_g,display:function(e){return e.every((function(e){return"UML"!==e.category}))}},{path:"fill.color",Control:Sg}]},{name:ar("边框"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isGeometry}))},controls:[{path:"stroke.color",Control:Rg},{path:"stroke.width",Control:Lg},{Control:Bg}]},{name:ar("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isGeometry&&null!=e.opacity}))},controls:[{Control:Ig}]}],zg=[{name:ar("节点"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isStack}))},controls:[{path:"fill.color",Control:Sg}]},{name:ar("边框"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isStack}))},controls:[{path:"stroke.color",Control:Rg},{path:"stroke.width",Control:Lg},{Control:Bg}]},{name:ar("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isStack&&null!=e.opacity}))},controls:[{Control:Ig}]}];function Fg(e){var t=e.selections,n=e.diagram,r=t.filter((function(e){return e.isMindmap})),a=Ga(r,sy),i=Object(at.useState)(!1),o=b()(i,2),c=o[0],l=o[1],s=r.map((function(e){return e.upDirection}));r.map((function(e){return e.upLayoutType}));var u=Xa.filter((function(e){if(r.every((function(e){return e.isStem})))return!0;var n=e.key.split("-")[0],a=t.some((function(e){var t=e.upLayoutType,r=e.isAbstract;return Va(t,n,r)})),i=!e.directions.every((function(e){return s.every((function(t){return Wa(t,e)}))}));return!a&&!i}));function d(e){0!==u.length&&l(e)}return it.a.createElement(sy,{className:"lake-diagram-layout-control",title:ar("结构"),disabled:0===u.length,extra:it.a.createElement(pt.a,{overlay:it.a.createElement(it.a.Fragment,null,u.map((function(t){var i=t.key;return it.a.createElement("div",{key:i,"data-lake_prevent_click_unselect":"true",className:st()("lake-diagram-layout-thumb",i,{selected:i===a}),onClick:function(){d(!c),function(t){e.onChange("layout",Ha(t),r),n&&n.selector.select(r)}(i)}})}))),overlayClassName:"lake-diagram-layout-dropdown",placement:"bottomRight",onClick:function(){d(!c)},visible:c,onVisibleChange:function(e){d(e)},trigger:["click"]},it.a.createElement("div",{className:st()("lake-diagram-layout-current",{"lake-diagam-multi-properties-selection":"multiValue"===a})},it.a.createElement("div",{className:"lake-diagram-layout-thumb ".concat(a)})))})}function Yg(e){var t=e.selections,n=Object(at.useState)(!1),r=b()(n,2),a=r[0],i=r[1],o=0===t.length;return Object(at.useEffect)((function(){var e=sy.get(t,"model.width");i("multiValue"===e?"multiValue":null!=e)}),[t]),it.a.createElement(sy,{disabled:o},it.a.createElement(Pt.a,{disabled:o,indeterminate:"multiValue"===a,checked:!!a,onChange:function(n){var r=n.target.checked?sy.get(t,"width"):null;i(n.target.checked),e.onChange({width:r,height:null})},"data-testid":"checkbox-node-width"},ar("手动设置节点尺寸")))}jt("/* stylelint-disable */\n/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control.lake-diagram-layout-control .lake-diagram-control-extra {\n  padding: 0;\n  justify-content: space-around;\n}\n.lake-diagram-layout-current {\n  background: var(--yq-bg-primary);\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n.lake-diagram-layout-current .lake-diagram-layout-thumb:hover {\n  background-color: transparent;\n}\n.lake-diagram-layout-dropdown {\n  width: 168px;\n  border-radius: 4px;\n  border: 1px solid var(--yq-border-primary);\n  display: flex;\n  flex-wrap: wrap;\n  background: var(--yq-bg-primary);\n  justify-content: initial;\n  padding: 8px 11px;\n}\n.lake-diagram-layout-dropdown.ant-dropdown-hidden {\n  display: none;\n}\n.lake-diagram-layout-thumb {\n  width: 48px;\n  height: 32px;\n  border-radius: 2px;\n  background-position: center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n}\n.lake-diagram-layout-thumb.indent-bl {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/bc67f2b4-b84a-4b09-970f-92bc893cdc1a.svg);\n}\n.lake-diagram-layout-thumb.indent-br {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/103fb753-229b-4717-9e49-356f013b3309.svg);\n}\n.lake-diagram-layout-thumb.indent-tr {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/15763057-474a-4b44-a999-3058a5328e9a.svg);\n}\n.lake-diagram-layout-thumb.indent-tl {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/44546c1d-75f7-4839-a198-6f7d4049798f.svg);\n}\n.lake-diagram-layout-thumb.standard-t {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/f2060601-21d5-4882-8159-01a1fa4c241a.svg);\n}\n.lake-diagram-layout-thumb.standard-b {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/f9e3e9f4-638c-46bb-ba35-9d9bf5a87f41.svg);\n}\n.lake-diagram-layout-thumb.standard-l {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/f7687207-ddcc-4e07-abfa-a9985f86e70a.svg);\n}\n.lake-diagram-layout-thumb.standard-r {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/af8bdfa5-f0ae-446b-836e-1d0340d2f5c6.svg);\n}\n.lake-diagram-layout-thumb.standard-h {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/069fa8cc-c99f-4d1b-98a5-371367ace0e5.svg);\n}\n.lake-diagram-layout-thumb.timeline-r {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/56c34bb7-b888-4103-bc03-3124cd7b99a3.svg);\n}\n.lake-diagram-layout-thumb.timeline-l {\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/23f1801a-504c-4254-a5d2-f33fcee86de7.svg);\n}\n.lake-diagram-layout-thumb:hover,\n.lake-diagram-layout-thumb.selected {\n  background-color: var(--yq-bg-secondary);\n}\n"),Fg.defaultProps={onChange:function(){}},Fg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired,diagram:ct.a.object},Fg.key="LayoutControl",Yg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired},Yg.key="NodeWidthControl",jt("/* stylelint-disable */\n/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-border-shape-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-border-shape-selected {\n  line-height: 0;\n}\n.lake-diagram-border-shape-selected .lake-diagram-border-shape-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-border-shape-selected .lake-properties-border-shape-dropdown-icon {\n  width: 10x;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: var(--yq-text-caption);\n}\n.lake-diagram-border-shape-selected .lake-diagram-properties-border-shape {\n  width: 100%;\n  height: 100%;\n}\n");var Xg=["line","rect","capsule"],Gg={none:"https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg",line:"https://gw.alipayobjects.com/zos/bmw-prod/6ffe619f-04e8-48c7-af45-5f0f3cf2c4a1.svg",rect:"https://gw.alipayobjects.com/zos/bmw-prod/7b0ba540-6360-430b-a960-90c928ca037c.svg",capsule:"https://gw.alipayobjects.com/zos/bmw-prod/3818284f-32e3-44cb-875c-1b722074ddaa.svg"};function Hg(e){var t=e.selections,n=sy.get(t,"border.shape","line")||null,r=t.length>0&&t.some((function(e){return e.isStem})),a=t.length>0&&t.some((function(e){return e.isAbstract})),i=r||a?Xg.filter((function(e){return"line"!==e})):Xg,o=i.find((function(e){return e===n}))?n:"",c=0===t.length;return it.a.createElement(sy,{className:"lake-diagram-properties-border-shape",disabled:c,title:ar("节点形状"),extra:it.a.createElement(pt.a,{disabled:c,trigger:["click"],overlay:it.a.createElement(mt.a,{"data-lake_prevent_click_unselect":!0,onClick:function(n){var r=n.key;e.onChange("border.shape",r,t)}},i.map((function(e){return it.a.createElement(mt.a.Item,{className:"lake-diagram-border-shape-item","test-id":"lake-diagram-border-shape-item-".concat(e),key:e,style:{backgroundImage:"url(".concat(Gg[e],")")}})}))),placement:"bottomRight",getPopupContainer:function(){return document.querySelector(".yuque-sdk-extra-container")||document.body}},it.a.createElement("div",{className:"lake-diagram-border-shape-selected"},it.a.createElement("span",{className:"lake-diagram-border-shape-item lake-diagram-border-shape-selected-item",style:{backgroundImage:"url(".concat(Gg[o||"none"],")")}}),it.a.createElement(bt.a,{className:"lake-properties-border-shape-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}function Wg(e){var t=e.selections.filter((function(e){return e.canStroke()&&e.isMindmap})),n=0===t.length,r=sy.get(t,"border.stroke-width");function a(n){var a=Math.min(Math.max(n,1),10);a!==r&&e.onChange("border.stroke-width",a,t)}function i(e){a(parseFloat(e.target.value))}return it.a.createElement(sy,{className:"lake-diagram-border-stroke-width-control",disabled:n,title:ar("边框粗细"),extra:it.a.createElement(vg,{disabled:n,min:1,max:10,value:r,onBlur:i,onPressEnter:i,onStep:a})})}function Vg(e){var t=Ft(e.selections.map((function(e){return e.stem}))),n=Object(at.useState)(!1),r=b()(n,2),a=r[0],i=r[1];return Object(at.useEffect)((function(){i(sy.get(t,"rainbow"))}),[t]),it.a.createElement(sy,null,it.a.createElement(Pt.a,{indeterminate:"multiValue"===a,checked:!!a,onChange:function(n){var r=n.target.checked;i(r),e.onChange("rainbow",r,t)}},ar("彩虹分支")))}function Ug(e){var t=Ft(e.selections.map((function(e){return e.stem}))),n=sy.get(t,"tapered");return it.a.createElement(sy,null,it.a.createElement(Pt.a,{indeterminate:"multiValue"===n,checked:!!n,onChange:function(n){var r=n.target.checked;e.onChange("tapered",r,t)}},ar("分支线条宽度逐渐变细")))}function Zg(e){var t=e.selections,n=e.onChange,r=Ft(t.map((function(e){return e.stem}))),a=sy.get(r,"treeEdge.shape",null);a="multiValue"===a?null:void 0===a?"curve":a;var i=0===t.length;return it.a.createElement(sy,{className:"lake-diagram-properties-edge-shape",disabled:i,title:ar("分支类型"),extra:it.a.createElement(Et.a.Group,{disabled:i,value:a,onChange:function(e){var t="curve"===e.target.value?null:e.target.value;n("treeEdge.shape",t,r)}},it.a.createElement(Et.a.Button,{value:"curve"},it.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-none"})),it.a.createElement(Et.a.Button,{value:"polyline"},it.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-polyline"})))})}function Kg(e){var t=e.selections,n=e.diagram,r=sy.get(t,"treeEdge.stroke","#A287E1"),a="multiValue"===r?"#FFFFFF":r;return it.a.createElement(sy,{disabled:0===t.length,title:ar("分支颜色"),extra:it.a.createElement(jg,{disabled:0===t.length,color:a,onSelect:function(t){e.onChange("treeEdge.stroke",t)},palette:n&&n.palette},it.a.createElement("div",{className:st()("lake-diagram-tree-edge-stroke",{"lake-diagam-multi-properties-selection":"multiValue"===r})},it.a.createElement("svg",{width:"64",viewBox:"0 0 64 12",xmlns:"http://www.w3.org/2000/svg"},it.a.createElement("path",{d:"M64 2c-27.42 0-35.012 8-64 8",stroke:"multiValue"===r?"none":r,strokeWidth:"4",fill:"none",fillRule:"evenodd"}))))})}function Qg(e){var t=e.selections.filter((function(e){return e.isMindmap&&!e.isStem})),n=0===t.length,r=sy.get(t,"treeEdge.stroke-width");function a(n){var a=Math.min(Math.max(n,1),5);"number"==typeof a&&a!==r&&e.onChange("treeEdge.stroke-width",a,t)}function i(e){a(parseFloat(e.target.value))}return it.a.createElement(sy,{className:"lake-diagram-tree-edge-stroke-width-control",disabled:n,title:ar("分支粗细"),extra:it.a.createElement(vg,{disabled:n,min:1,max:5,value:r,onBlur:i,onPressEnter:i,onStep:a})})}Hg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired},Hg.key="BorderShapeControl",jt("/* stylelint-disable */\n.lake-diagram-border-stroke-width-control .ant-input-number {\n  width: 100%;\n}\n"),Wg.defaultProps={onChange:function(){}},Wg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired},Wg.key="BorderStrokeWidthControl",Vg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func},Vg.key="TreeEdgeRainbowControl",Ug.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func},Ug.key="TreeEdgeTaperedControl",jt(".lake-diagram-properties-edge-shape .lake-diagram-control-extra {\n  border: none;\n}\n.lake-diagram-properties-edge-shape .lake-diagram-control-extra button {\n  padding: 0 13px;\n}\n"),Zg.defaultProps={onChange:function(){}},Zg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired},Zg.key="TreeEdgeShapeControl",jt(".lake-diagram-tree-edge-stroke {\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n}\n"),Kg.defaultProps={onChange:function(){}},Kg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired,diagram:ct.a.object},Kg.key="TreeEdgeStrokeControl",jt("/* stylelint-disable */\n"),Qg.defaultProps={onChange:function(){}},Qg.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired},Qg.key="TreeEdgeStrokeWidthControl";var Jg=[{name:ar("布局"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isMindmap}))},controls:[{Control:Fg}]},{name:ar("节点"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isMindmap}))},controls:[{Control:Hg},{path:"border.fill",Control:Sg},{path:"border.stroke",title:ar("边框颜色"),Control:Rg},{Control:Wg},{Control:Yg}]},{name:ar("分支"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isMindmap&&e.isStem}))},controls:[{Control:Vg},{Control:Ug},{Control:Zg}]},{name:ar("分支"),tabKey:"style",condition:function(e){return e.length>0&&!e.every((function(e){return e.isStem}))&&e.every((function(e){return e.isMindmap&&!e.isStem}))},controls:[{Control:Kg},{Control:Qg},{Control:Zg},{Control:Vg},{Control:Ug}]}];jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-dropdown-input {\n  position: relative;\n  overflow: hidden;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n  transition: border-color 0.3s;\n}\n.lake-diagram-dropdown-input:hover {\n  border-color: var(--yq-yuque-green-5);\n}\n.lake-diagram-dropdown-input-focus {\n  border-color: var(--yq-yuque-green-5);\n  box-shadow: 0 0 0 2px #0bd07d33;\n  outline: none;\n}\n.lake-diagram-dropdown-input .ant-input {\n  padding-right: 24px;\n  border: none;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger {\n  position: absolute;\n  top: -1px;\n  right: -1px;\n  padding: 0;\n  border-width: 0 0 0 1px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  width: 24px;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger .lake-icon {\n  position: absolute;\n  right: 8px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger .lake-icon::before {\n  content: ' ';\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger:hover {\n  background: var(--yq-bg-tertiary);\n  border-color: var(--yq-border-primary);\n}\n");var $g=["disabled"];function ev(e){var t=e.disabled,n=ft()(e,$g),r=Object(at.useState)(e.value),a=b()(r,2),i=a[0],o=a[1],c=Object(at.useState)(!1),l=b()(c,2),s=l[0],u=l[1];return Object(at.useEffect)((function(){o(e.value)}),[e.value]),it.a.createElement("div",{className:st()("lake-diagram-dropdown-input",{"lake-diagram-dropdown-input-focus":s})},it.a.createElement(yt.a,{disabled:t,value:i,onFocus:function(){u(!0)},onBlur:function(t){parseInt(t.target.value,10)>0&&e.onChange(t),u(!1)},onChange:function(e){o(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&parseInt(t.target.value,10)>0&&(e.onChange(t),t.target.select())}}),it.a.createElement(pt.a,rt()({disabled:t},n),it.a.createElement(dt.a,null,it.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}))))}function tv(e){var t=e.selections,n=e.diagram,r=0===t.length||t.some((function(e){return e.locked})),a=Object(at.useState)({}),i=b()(a,2),o=i[0],c=i[1],l=n.contentEditorPlus,s=o.fontSize,u=o.color,d=o.bold,h=o.italic,f=o.strikethrough,p=o.underline;return Object(at.useEffect)((function(){function e(e){var t=e.query;c(t)}return l.emitQueryChange(),n&&l.on("querychange",e),function(){l.off("querychange",e)}}),[n]),it.a.createElement(sy,{disabled:r,className:"text-format-control"},it.a.createElement("div",{className:"text-format-li",style:{display:"flex",justifyContent:"space-between"}},it.a.createElement("span",{style:{display:"flex",flexWrap:"nowrap"}},it.a.createElement(dt.a,{disabled:r,className:st()("bisu-btn",{active:d}),onClick:function(){return l.execCommand("bold")}},it.a.createElement("span",{className:"lake-icon lake-icon-bold"})),it.a.createElement(dt.a,{disabled:r,className:st()("bisu-btn",{active:h}),onClick:function(){return l.execCommand("italic")}},it.a.createElement("span",{className:"lake-icon lake-icon-italic"})),it.a.createElement(dt.a,{disabled:r,className:st()("bisu-btn",{active:f}),onClick:function(){return l.execCommand("strikethrough")}},it.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})),it.a.createElement(dt.a,{disabled:r,className:st()("bisu-btn",{active:p}),onClick:function(){return l.execCommand("underline")}},it.a.createElement("span",{className:"lake-icon lake-icon-underline"})))),it.a.createElement("div",{className:"text-format-li text-format-font-color"},ar("字号"),it.a.createElement("div",{className:"lake-diagram-control-extra lake-diagrm-font-color-control-extra"},it.a.createElement(ev,{disabled:r,trigger:["click"],value:s,onChange:function(e){return l.execCommand("fontSize",parseInt(e.target.value))},overlay:it.a.createElement(mt.a,{"data-lake_prevent_click_unselect":!0,className:"lake-user-select-none text-format-font-size-menu",selectedKeys:[s&&s.toString()],onClick:function(e){var t=e.key;return l.execCommand("fontSize",parseInt(t))}},[12,14,16,18,22,24,32,36,48,64,92].map((function(e){return it.a.createElement(mt.a.Item,{key:e},e===s&&it.a.createElement("span",{className:"lake-icon lake-icon-success"}),e,"px")}))),placement:"bottomRight"}))),it.a.createElement("div",{className:"text-format-li text-format-font-color"},ar("文本颜色"),it.a.createElement("div",{className:"lake-diagram-control-extra lake-diagrm-font-color-control-extra"},it.a.createElement(jg,{disabled:r,color:u,defaultColor:e.defaultColor,onSelect:Te()((function(e){return l.execCommand("foreColor",e)}),16),palette:n.palette},it.a.createElement("div",{className:"lake-diagram-font-color",style:{backgroundColor:u}})))))}ev.propTypes={value:ct.a.oneOfType([ct.a.string,ct.a.number]),disabled:ct.a.bool,onChange:ct.a.func},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.text-format-control .text-format-font-color {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.text-format-control .text-format-li {\n  margin-bottom: 16px;\n}\n.text-format-control .text-format-li:last-child {\n  margin-bottom: 0;\n}\n.text-format-control .lake-diagram-control-extra {\n  display: inline-block;\n  vertical-align: bottom;\n  margin-left: 8px;\n}\n.text-format-control .lake-diagram-font-color {\n  border: 4px solid var(--yq-white);\n  border-radius: 2px;\n  width: 100%;\n  height: 30px;\n}\n.text-format-control.disabled .lake-diagram-font-color {\n  display: none;\n}\n.text-format-control .control-body {\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n}\n.text-format-control .bisu-btn {\n  padding: 0;\n  text-align: center;\n  width: 32px;\n  line-height: 30px;\n  margin-right: 8px;\n}\n.text-format-control .bisu-btn[disabled] {\n  border-color: var(--yq-border-primary);\n}\n.text-format-control .bisu-btn.active {\n  border-color: var(--yq-yuque-green-5);\n}\n.lake-diagram-control-extra.lake-diagrm-font-color-control-extra {\n  width: auto;\n  flex: auto;\n  max-width: 90px;\n}\n.text-format-font-size {\n  max-width: 90px;\n  display: inline-block;\n  flex: auto;\n  height: 32px;\n  line-height: 30px;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n  padding: 0 8px;\n  font-size: 14px;\n  font-weight: 400;\n}\n.text-format-font-size[disabled] {\n  color: var(--yq-text-caption);\n  cursor: not-allowed;\n  border-color: var(--yq-border-primary);\n}\n.text-format-font-size .lake-icon-arrow-down {\n  width: 8px;\n  height: 8px;\n  float: right;\n  margin-top: 12px;\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+) no-repeat;\n}\n.text-format-font-size .lake-icon-arrow-down::before {\n  display: none;\n}\n.text-format-font-size-menu {\n  min-width: 104px;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item {\n  text-align: center;\n  position: relative;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item .lake-icon {\n  position: absolute;\n  left: 12px;\n  top: 9px;\n}\n.text-format-color {\n  margin-top: 8px;\n  width: 92px;\n  height: 32px;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n  padding: 4px;\n}\n.text-format-color-indicator {\n  width: 100%;\n  height: 100%;\n}\n.text-format-color[disabled] {\n  cursor: not-allowed;\n  border-color: var(--yq-border-primary);\n}\n.text-format-color[disabled]-indicator {\n  display: none;\n}\n"),tv.defaultProps={defaultColor:"#262626"},tv.propTypes={defaultColor:ct.a.string,selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired,diagram:ct.a.object.isRequired},tv.key="TextBasicFormat",jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.properties-text-format-text-h-align.ant-radio-group {\n  display: flex;\n}\n.properties-text-format-text-h-align.ant-radio-group .ant-radio-button-wrapper {\n  flex-grow: 1;\n  padding: 0 17.5px;\n  text-align: center;\n}\n.properties-text-format-text-h-align.ant-radio-group .ant-radio-button-wrapper-disabled {\n  border-color: var(--yq-border-primary);\n}\n");var nv={left:"justifyLeft",center:"justifyCenter",right:"justifyRight",justify:"justifyFull"};function rv(e){var t=e.selections,n=e.diagram,r=0===t.length||t.some((function(e){return e.locked})),a=Object(at.useState)({}),i=b()(a,2),o=i[0],c=i[1],l=n.contentEditorPlus,s=o.textAlign;return Object(at.useEffect)((function(){function e(e){var t=e.query;c(t)}return l.emitQueryChange(),n&&l.on("querychange",e),function(){l.off("querychange",e)}}),[n]),it.a.createElement(sy,{disabled:r,className:"text-format-control"},it.a.createElement(Et.a.Group,{className:"text-format-li properties-text-format-text-h-align",disabled:r,defaultValue:nv.left,value:nv[s]},it.a.createElement(Et.a.Button,{value:nv.left,onClick:function(){return l.execCommand(nv.left)}},it.a.createElement("span",{className:"lake-icon lake-icon-left"})),it.a.createElement(Et.a.Button,{value:nv.center,onClick:function(){return l.execCommand(nv.center)}},it.a.createElement("span",{className:"lake-icon lake-icon-center"})),it.a.createElement(Et.a.Button,{value:nv.right,onClick:function(){return l.execCommand(nv.right)}},it.a.createElement("span",{className:"lake-icon lake-icon-right"})),it.a.createElement(Et.a.Button,{value:nv.justify,onClick:function(){return l.execCommand(nv.justify)}},it.a.createElement("span",{className:"lake-icon lake-icon-justify"}))))}function av(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r=sy.get(t,"textVerticalAlign");return sr.includes(r)||(r="middle"),it.a.createElement(sy,{disabled:n,className:"text-format-control"},it.a.createElement(Et.a.Group,{className:"text-format-li properties-text-format-text-v-align",disabled:n,defaultValue:"middle",value:r},lr.map((function(n){var r=n.key,a=n.icon;return it.a.createElement(Et.a.Button,{key:r,value:r,onClick:function(){return function(n){e.onChange("textVerticalAlign",n,wl(t))}(r)}},it.a.createElement("span",{className:"lake-icon lake-icon-".concat(a)}))}))))}function iv(e){var t=e.diagram;return it.a.createElement(dt.a,{block:!0,onClick:function(){t.command.execute("AttachLink")}},ar("添加链接"))}rv.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,diagram:ct.a.object.isRequired},rv.key="TextHAlign",jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.properties-text-format-text-v-align.ant-radio-group {\n  display: flex;\n}\n.properties-text-format-text-v-align.ant-radio-group .ant-radio-button-wrapper {\n  flex-grow: 1;\n  padding: 0 17.5px;\n  text-align: center;\n}\n.properties-text-format-text-v-align.ant-radio-group .ant-radio-button-wrapper-disabled {\n  border-color: var(--yq-border-primary);\n}\n"),av.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,diagram:ct.a.object.isRequired,onChange:ct.a.func.isRequired},av.key="TextVAlign",iv.propTypes={diagram:ct.a.object.isRequired},iv.key="TextLink";var ov=[{name:ar("基础格式"),hideHeader:!0,tabKey:"text",condition:function(e){return e.length>0&&e.every((function(e){return e.canUpdateText()}))},controls:[{Control:tv}]},{name:ar("对齐方式"),tabKey:"text",condition:function(e){return e.length>0&&e.every((function(e){return e.canUpdateText()}))},controls:[{Control:rv},{Control:av,display:function(e){return e.some((function(e){return e.canTextVerticalAlign()}))}}]},{name:ar("链接"),tabKey:"text",condition:function(e){return e.length>0&&e.every((function(e){return e.canText()}))},controls:[{Control:iv}]}];function cv(e){var t=e.selections,n=e.diagram,r=0===t.length,a=t.filter((function(e){return e.isLine})),i={source:ar("起点"),target:ar("终点")},o=Object.keys(i).map((function(t){var n,i="".concat(t,".marker"),o=sy.get(a,i)||"none";return it.a.createElement("div",{className:"lake-diagram-line-arrow-control-".concat(t),key:t},it.a.createElement(pt.a,{disabled:r,trigger:["click"],overlay:it.a.createElement(mt.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var n=t.key;e.onChange(i,"none"===n?null:n,a)},style:{padding:"5px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)"}},js.map((function(e){return it.a.createElement(mt.a.Item,{className:st()("lake-diagram-line-endpoint-item",{active:e===o}),"test-id":"lake-diagram-line-endpoint-item-".concat(e),key:e,style:{textAlign:"center"}},it.a.createElement("span",{className:st()("lake-icon lake-icon-contextual-".concat(e),{source:"source"===t})}))}))),placement:"bottomRight"},it.a.createElement("div",{className:st()("lake-diagram-line-arrow-selected")},it.a.createElement("span",{className:st()("lake-diagram-line-arrow-selected-item","lake-icon",(n={"lake-diagam-multi-properties-selection":"multiValue"===o},c()(n,"lake-icon-contextual-".concat(o),o),c()(n,"source","source"===t),n))}),it.a.createElement(bt.a,{className:"lake-properties-line-arrow-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}}))))}));return o.splice(1,0,it.a.createElement("span",{key:"lake-icon-contextual-line-swap-endpoint",onClick:function(){n.command.execute("LineSwapEndPoint",{autoSelect:!0})},style:{fontSize:"14px",cursor:"pointer"},className:"lake-icon lake-icon-contextual-line-swap-endpoint"})),it.a.createElement(sy,{className:"lake-diagram-line-arrow-control",disabled:r},o)}jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-line-arrow-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 16px;\n}\n.lake-icon.source {\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n}\n.lake-diagram-line-endpoint-item:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-line-endpoint-item.active {\n  background: var(--yq-bg-primary-hover-light);\n  color: var(--yq-text-body);\n}\n.lake-diagram-line-arrow-selected {\n  line-height: 0;\n}\n.lake-diagram-line-arrow-selected .lake-diagram-line-arrow-selected-item {\n  width: 32px;\n  height: 32px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-diagram-line-arrow-selected .lake-properties-line-arrow-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: var(--yq-text-caption);\n}\n.lake-diagram-line-arrow-selected .lake-diagram-properties-line-arrow {\n  width: 100%;\n  height: 100%;\n}\n.lake-diagram-line-arrow-control-source,\n.lake-diagram-line-arrow-control-target {\n  display: flex;\n  align-items: center;\n}\n.lake-diagram-line-arrow-control-source .lake-diagram-line-arrow-selected,\n.lake-diagram-line-arrow-control-target .lake-diagram-line-arrow-selected {\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n}\n"),cv.defaultProps={onChange:function(){}},cv.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired,diagram:ct.a.object},cv.key="LineArrowControl",jt(".lake-diagram-line-shape-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-line-shape-selected {\n  line-height: 0;\n}\n.lake-diagram-line-shape-selected .lake-diagram-line-shape-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-line-shape-selected .lake-properties-line-shape-dropdown-icon {\n  width: 10px;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: var(--yq-text-caption);\n}\n.lake-diagram-line-shape-selected .lake-diagram-properties-line-shape {\n  width: 100%;\n  height: 100%;\n}\n");var lv={none:"https://gw.alipayobjects.com/zos/bmw-prod/a9d015cf-7b31-496c-b60d-e224f7f0df29.svg",straight:"https://gw.alipayobjects.com/zos/bmw-prod/a9d015cf-7b31-496c-b60d-e224f7f0df29.svg",curve:"https://gw.alipayobjects.com/zos/bmw-prod/e683ab4e-70b3-4bcf-8eb1-ad843acf2add.svg",elbow:"https://gw.alipayobjects.com/zos/bmw-prod/96671966-3f77-469f-afa7-40ff402dc773.svg"};function sv(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isLine})),a=sy.get(r,"shape");return it.a.createElement(sy,{className:"lake-diagram-properties-line-shape",disabled:n,title:ar("类型"),extra:it.a.createElement(pt.a,{disabled:n,trigger:["click"],overlay:it.a.createElement(mt.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var n=t.key;e.onChange("shape","none"===n?null:n,r)}},it.a.createElement(mt.a.Item,{className:"lake-diagram-line-shape-item","test-id":"lake-diagram-line-shape-item-none",key:"none",style:{backgroundImage:"url(".concat(lv.none,")")}}),it.a.createElement(mt.a.Item,{className:"lake-diagram-line-shape-item","test-id":"lake-diagram-line-shape-item-curve",key:"curve",style:{backgroundImage:"url(".concat(lv.curve,")")}}),it.a.createElement(mt.a.Item,{className:"lake-diagram-line-shape-item","test-id":"lake-diagram-line-shape-item-elbow",key:"elbow",style:{backgroundImage:"url(".concat(lv.elbow,")")}})),placement:"bottomRight"},it.a.createElement("div",{className:"lake-diagram-line-shape-selected"},it.a.createElement("span",{className:"lake-diagram-line-shape-item lake-diagram-line-shape-selected-item",style:{backgroundImage:"url(".concat(lv[a||"none"],")")}}),it.a.createElement(bt.a,{className:"lake-properties-line-shape-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}sv.defaultProps={onChange:function(){}},sv.propTypes={selections:ct.a.arrayOf(ct.a.object).isRequired,onChange:ct.a.func.isRequired},sv.key="LineShapeControl";var uv=[{name:ar("线条"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isLine}))},controls:[{Control:sv},{path:"stroke.color",Control:Rg},{path:"stroke.width",Control:Lg},{Control:Bg}]},{name:ar("端点"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isLine}))},controls:[{Control:cv}]},{name:ar("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isLine}))},controls:[{Control:Ig}]}],dv=[{name:ar("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return e.isImage&&null!=e.opacity}))},controls:[{Control:Ig}]}],hv=function(e){var t,n=e.diagram;n.selector.selections.length>0&&(t=n.selector.selections[0]);var r,a=0;t&&(Qn(t)&&(t=t.parent),a=(null===(r=t.children)||void 0===r?void 0:r.length)||0);var i=Object(at.useState)(a),o=b()(i,2),c=o[0],l=o[1];function s(e){Ee()(e)&&(e=Dt(e,1,50))!==a&&(n.command.execute("ChangeLaneNumber",{number:e}),l(e))}return it.a.createElement(vg,{min:1,max:50,value:c,onBlur:function(){},onPressEnter:function(e){s(Number(e.target.value))},onStep:s})},fv=function(e){var t=e.title,n=e.diagram;return it.a.createElement(sy,{title:t,extra:it.a.createElement(hv,{diagram:n})})};fv.defaultProps={title:ar("泳道数"),onChange:function(){}},fv.propTypes={title:ct.a.string,diagram:ct.a.object},fv.key="LaneNumberControl";var pv=[{name:ar("泳道"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return Kn(e)}))},controls:[{display:function(e){return 1===e.length&&Kn(e[0])},Control:fv},{path:"fill.color",Control:Sg}]},{name:ar("边框"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return Kn(e)}))},controls:[{path:"stroke.color",Control:Rg},{path:"stroke.width",Control:Lg},{Control:Bg}]},{name:ar("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return Kn(e)}))},controls:[{Control:Ig}]}];function mv(e){if(e.length<1)return!1;var t=e[0],n=Qn(t)?t.parent:void 0;return!!n&&e.every((function(e){return e.parent===n}))}var yv=[{name:ar("泳道"),tabKey:"style",condition:function(e){return mv(e)},controls:[{display:function(e){return mv(e)},Control:fv},{path:"fill.color",Control:Sg}]}];function gv(e){var t=e.diagram,n=e.onClose,r=e.menus,a={tabs:[{name:ar("样式"),key:"style"},{name:ar("文本"),key:"text"},{name:ar("排列"),key:"arrangement"},{name:ar("全局"),key:"global"}],className:"lake-diagram-properties-board",menus:[].concat(r).concat(Mg).concat(qg).concat(zg).concat(pv).concat(yv).concat(ov).concat(Jg).concat(uv).concat(dv),diagram:t,emptyImg:"https://gw.alipayobjects.com/zos/bmw-prod/209ef531-e33b-4e55-8273-5b56b6df44be.svg"};return it.a.createElement("div",{className:"lake-diagram-properties-board-wrapper","data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-properties-board-header"},it.a.createElement("span",{className:"lake-diagram-properties-board-header-title"},ar("设置")),it.a.createElement("span",{className:"lake-diagram-properties-board-header-close-button",onClick:n})),it.a.createElement("div",{className:"lake-diagram-properties-body-wrapper"},it.a.createElement(ly,a)))}jt(".lake-diagram-properties-board-wrapper {\n  height: 100%;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-body-wrapper {\n  height: calc(100% - 40px);\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-left: 1px solid var(--yq-border-primary);\n  border-bottom: 1px solid var(--yq-border-primary);\n  padding: 4px 8px;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header .lake-diagram-properties-board-header-title {\n  margin: 4px 8px;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header .lake-diagram-properties-board-header-close-button {\n  margin-right: 8px;\n  width: 16px;\n  height: 16px;\n  display: block;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/3a5cc682-0502-44f1-80cf-4a8de2d89e1e.svg);\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board-header .lake-diagram-properties-board-header-close-button:hover {\n  cursor: pointer;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board {\n  background-color: var(--yq-white);\n  top: 0;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board .ant-radio-button-wrapper {\n  background: var(--yq-bg-primary);\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab {\n  flex-grow: inherit;\n  padding: 8px 0;\n  margin: 0 16px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0);\n  animation: none;\n}\n.lake-diagram-properties-board-wrapper .lake-diagram-properties-board .lake-diagram-panel-body .ant-tabs .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab.ant-tabs-tab-active {\n  border-bottom: 2px solid black;\n}\n"),gv.defaultProps={diagram:null,onClose:function(){},menus:[]},gv.propTypes={diagram:ct.a.object,onClose:ct.a.func,menus:ct.a.array},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n.contextual-text-size-font-size-menu {\n  min-width: 104px;\n}\n.contextual-text-size-font-size-menu .ant-dropdown-menu-item {\n  text-align: center;\n  position: relative;\n}\n.contextual-text-size-font-size-menu .ant-dropdown-menu-item .lake-icon {\n  color: var(--yq-text-primary);\n  position: absolute;\n  left: 12px;\n  top: 9px;\n}\n");var vv=function(e){var t=e.name,n=e.diagram,r=Object(at.useState)({}),a=b()(r,2),i=a[0],o=a[1],c=n.contentEditorPlus,l=i.fontSize;return Object(at.useEffect)((function(){function e(e){var t=e.query;o(t)}return n&&(c.on("querychange",e),c.emitQueryChange()),function(){c.off("querychange",e)}}),[n]),it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{trigger:["click"],value:l,onChange:function(e){return c.execCommand("fontSize",parseInt(e.target.value))},overlay:it.a.createElement(mt.a,{"data-lake_prevent_click_unselect":!0,className:"lake-user-select-none contextual-text-size-font-size-menu",selectedKeys:[l&&l.toString()],onClick:function(e){var t=e.key;return c.execCommand("fontSize",parseInt(t))}},[12,14,15,16,18,22,24,32,36,48,64,92].map((function(e){return it.a.createElement(mt.a.Item,{key:e},e===l&&it.a.createElement("span",{className:"lake-icon lake-icon-success"}),e,"px")}))),placement:"bottomCenter"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement("span",{className:"text-msg"}," ",l?"".concat(l,"px"):e.defaultFontSize," ")))))};vv.defaultProps={defaultFontSize:"14px"},vv.propTypes={title:ct.a.string,data:ct.a.array,name:ct.a.string,selections:ct.a.array,diagram:ct.a.object,defaultFontSize:ct.a.string},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-h-align {\n  box-shadow: 0 1px 2px -2px #00000014, 0 2px 6px 0 #0000000a, 0 4px 8px 1px #00000005;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-h-align .lake-diagram-dropdown-item {\n  color: var(--yq-text-primary);\n  font-size: 14px;\n  margin-left: 4px;\n  margin-right: 4px;\n  min-width: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-h-align .ant-menu-item {\n  height: 32px;\n  line-height: 32px;\n  padding: 0 12px;\n  text-align: left;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-h-align .ant-menu-item[disabled] {\n  border-color: var(--yq-border-primary);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-h-align .ant-menu-item.active {\n  background: var(--yq-border-primary);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-h-align .ant-menu-item:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-h-align .ant-menu-item-selected {\n  background: none;\n  color: var(--yq-text-body);\n}\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n");var bv=function(e){return it.a.createElement(mt.a,{className:st()("lake-diagram-contextual-toolbar-dropdown-menu lake-diagram-contextual-toolbar-text-h-align",e.menuClassName),onSelect:e.onSelect,"data-lake_prevent_click_unselect":"true"},e.data.map((function(t){return it.a.createElement(mt.a.Item,{key:t.key},it.a.createElement("span",{className:st()("lake-icon lake-diagram-dropdown-item",{"lake-icon-success":t.key===e.currIcon})}),it.a.createElement("span",{className:"lake-icon lake-icon-".concat(t.icon," lake-diagram-dropdown-item")}),it.a.createElement("span",{className:"lake-diagram-dropdown-item"},t.title))})))},xv=[{key:"left",icon:"left",title:"左对齐"},{key:"center",icon:"center",title:"居中对齐"},{key:"right",icon:"right",title:"右对齐"},{key:"justify",icon:"justify",title:"两端对齐"}],kv=xv.map((function(e){return e.key}));bv.propTypes={title:ct.a.string,menuClassName:ct.a.string,data:ct.a.array,onSelect:ct.a.func,currIcon:ct.a.string};var wv=function(e){var t=e.name,n=e.diagram,r=n.contentEditorPlus,a=Object(at.useState)({}),i=b()(a,2),o=i[0],c=i[1],l=Object(at.useState)(!1),s=b()(l,2),u=s[0],d=s[1],h=o.textAlign;return kv.includes(h)||(h="center"),Object(at.useEffect)((function(){function e(e){var t=e.query;c(t)}return n&&(r.on("querychange",e),r.emitQueryChange()),function(){r.off("querychange",e)}}),[n]),it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{overlay:it.a.createElement(bv,{data:xv,onSelect:function(e){!function(e){if("justify"===e)r.execCommand("justifyFull");else r.execCommand("justify".concat(e&&e[0].toUpperCase()+e.slice(1)))}(e.key),d(!1)},currIcon:h}),placement:"bottomCenter",trigger:"click",visible:u,onVisibleChange:function(e){d(e)}},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t,onClick:function(){return d(!0)}},it.a.createElement("span",{className:"lake-icon lake-icon-".concat(h)})))))};wv.defaultProps={defaultAlign:"center"},wv.propTypes={title:ct.a.string,data:ct.a.array,name:ct.a.string,diagram:ct.a.object,defaultAlign:ct.a.string},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-v-align {\n  box-shadow: 0 1px 2px -2px #00000014, 0 2px 6px 0 #0000000a, 0 4px 8px 1px #00000005;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-v-align .lake-diagram-dropdown-item {\n  color: var(--yq-text-primary);\n  font-size: 14px;\n  margin-left: 4px;\n  margin-right: 4px;\n  min-width: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-v-align .ant-menu-item {\n  height: 32px;\n  line-height: 32px;\n  padding: 0 12px;\n  text-align: left;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-v-align .ant-menu-item[disabled] {\n  border-color: var(--yq-border-primary);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-v-align .ant-menu-item.active {\n  background: var(--yq-border-primary);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-v-align .ant-menu-item:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu.lake-diagram-contextual-toolbar-text-v-align .ant-menu-item-selected {\n  background: none;\n  color: var(--yq-text-body);\n}\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n");var Cv=function(e){return it.a.createElement(mt.a,{className:st()("lake-diagram-contextual-toolbar-dropdown-menu lake-diagram-contextual-toolbar-text-v-align",e.menuClassName),onSelect:e.onSelect,"data-lake_prevent_click_unselect":"true"},e.data.map((function(t){return it.a.createElement(mt.a.Item,{key:t.key},it.a.createElement("span",{className:st()("lake-icon lake-diagram-dropdown-item",{"lake-icon-success":t.key===e.currIcon})}),it.a.createElement("span",{className:"lake-icon lake-icon-".concat(t.icon," lake-diagram-dropdown-item")}),it.a.createElement("span",{className:"lake-diagram-dropdown-item"},t.title))})))};Cv.propTypes={title:ct.a.string,menuClassName:ct.a.string,data:ct.a.array,onSelect:ct.a.func,currIcon:ct.a.string};var Ev=function(e){var t=e.name,n=e.selections,r=Object(at.useState)(!1),a=b()(r,2),i=a[0],o=a[1],c=e.get(n,"textVerticalAlign");return sr.includes(c)||(c="middle"),it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{disabled:!0,overlay:it.a.createElement(Cv,{data:lr,onSelect:function(t){!function(t){e.execCommand("textVerticalAlign",t,wl(n))}(t.key),o(!1)},currIcon:c}),placement:"bottomCenter",trigger:"click",visible:i,onVisibleChange:function(e){o(e)}},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t,onClick:function(){return o(!0)}},it.a.createElement("span",{className:"lake-icon lake-icon-".concat(c)})))))};Ev.defaultProps={defaultAlign:"middle"},Ev.propTypes={title:ct.a.string,data:ct.a.array,name:ct.a.string,selections:ct.a.array,defaultAlign:ct.a.string,execCommand:ct.a.func.isRequired,get:ct.a.func.isRequired},jt(".ne-embed-icon {\n  display: inline-flex;\n  width: 16px;\n  height: 16px;\n}\n");var Ov=function(e){j()(n,at.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A()(e);if(t){var a=A()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R()(this,n)}}(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"_isLowContrast",value:function(e){var t=F()(e).toRgb();return.3*t.r+.59*t.g+.11*t.b>=248}},{key:"_isTransparent",value:function(e){return!e||"transparent"===e||"rgba(255,255,255,0)"===e.replace(/ /g,"")||"rgba(0,0,0,0)"===e.replace(/ /g,"")}},{key:"requireStroke",value:function(e){return this._isTransparent(e)||this._isLowContrast(e)}},{key:"render",value:function(){return this._getIcon()}},{key:"_getIcon",value:function(){var e,t=this.props,n=t.type,r=t.fill,a=t.stroke;if(this._isTransparent(r))return it.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},it.a.createElement("defs",null,it.a.createElement("pattern",{id:"rect",viewBox:"0,0,8,8",width:"35%",height:"35%"},it.a.createElement("rect",{id:"矩形",fill:"#FAFAFA",x:"0",y:"0",width:"4",height:"4"}),it.a.createElement("rect",{id:"矩形备份-21",fill:"#FAFAFA",x:"4",y:"4",width:"4",height:"4"}),it.a.createElement("rect",{id:"矩形备份-20",fill:"#D9D9D9",x:"4",y:"0",width:"4",height:"4"}),it.a.createElement("rect",{id:"矩形备份-22",fill:"#D9D9D9",x:"0",y:"4",width:"4",height:"4"}))),it.a.createElement("circle",{cx:"8",cy:"8",r:"8",fill:"url(#rect)"}));if("stroke-color"===n&&this._isTransparent(a))return it.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},it.a.createElement("title",null,"透明环"),it.a.createElement("g",{id:"控件",stroke:"none",strokeWidth:"0.5",fill:"none",fillRule:"evenodd"},it.a.createElement("g",{id:"透明环",transform:"translate(-0.000000, 0.000000)"},it.a.createElement("path",{d:"M8,0 C12.418278,0 16,3.581722 16,8 C16,12.418278 12.418278,16 8,16 C3.581722,16 0,12.418278 0,8 C0,3.581722 3.581722,0 8,0 Z M8,3 C5.23857625,3 3,5.23857625 3,8 C3,10.7614237 5.23857625,13 8,13 C10.7614237,13 13,10.7614237 13,8 C13,5.23857625 10.7614237,3 8,3 Z",id:"形状",fill:"#FAFAFA"}),it.a.createElement("path",{d:"M8,13 L8,12.999 L8,16 C6.91549955,16 5.88140117,15.7842031 4.93830231,15.3932066 L6.08631593,12.6207031 C6.67578581,12.8651081 7.32214006,13 8,13 Z M11.5247537,11.5462815 L13.6458509,13.6678364 C12.905585,14.4052487 12.0216994,14.9985887 11.0398062,15.4022444 L9.89058451,12.6302127 C10.5062584,12.3785637 11.0605479,12.0076869 11.5247537,11.5462815 Z M4.48114009,11.5521301 L2.36015992,13.6738177 C1.61882513,12.9368948 1.02109994,12.0556625 0.612650477,11.075787 L3.38472128,9.92671467 C3.64106728,10.5400536 4.01611047,11.091429 4.48114009,11.5521301 Z M16,7.999 C16,9.08450045 15.7842031,10.1185988 15.3932066,11.0616977 L12.6207031,9.91368407 C12.8651081,9.32421419 13,8.67785994 13,8 L16,7.999 Z M3,8 L2.999,8 L4.45652404e-11,8 C4.45652404e-11,6.91549955 0.215796936,5.88140117 0.606793361,4.93830231 L3.37929685,6.08631593 C3.13489185,6.67578581 3,7.32214006 3,8 Z M13.6398401,2.32618229 C14.3811749,3.06310522 14.9789001,3.94433749 15.3873495,4.92421296 L12.6152787,6.07328533 C12.3589327,5.45994637 11.9838895,4.90857096 11.5188599,4.44786988 L13.6398401,2.32618229 Z M8,9.09494702e-13 C9.0848864,9.09494702e-13 10.1193348,0.215950555 11.0627045,0.607210861 L9.91368407,3.37929685 C9.32421419,3.13489185 8.67785994,3 8,3 L7.999,9.09494702e-13 L8,9.09494702e-13 Z M2.37521442,2.31125673 C2.36817981,2.31821274 2.36115804,2.32518171 2.35414914,2.33216359 C2.47280694,2.21398682 2.594547,2.10004476 2.71975554,1.98995348 L2.91043586,1.82748893 C3.08291716,1.68509277 3.26177813,1.54957175 3.44628096,1.42161318 L3.44587689,1.42189343 C3.64121394,1.28642097 3.84244471,1.15967042 4.04944431,1.04189047 L4.04893797,1.04217859 L4.35587152,0.876283146 L4.35587152,0.876283146 L4.67022901,0.723755702 L4.96019384,0.597755619 L6.10941549,3.36978734 L6.08230453,3.38096211 C6.01729624,3.40798236 5.95298109,3.43633501 5.88939319,3.46598597 L6.10941549,3.36978734 C6.00994969,3.41044274 5.91208604,3.45421002 5.81594555,3.50096817 C5.67093771,3.57146782 5.52925326,3.64913643 5.39194239,3.73324727 C5.36336599,3.75074884 5.33464738,3.76874189 5.30612657,3.78701662 C5.2498994,3.8230481 5.19464208,3.86003397 5.14017772,3.89807688 C5.13087827,3.90457251 5.12161081,3.91109266 5.11236658,3.91764341 C5.0411436,3.96811355 4.9712726,4.02042159 4.90284866,4.07448042 C4.89157281,4.08338639 4.8797933,4.09277659 4.86805733,4.10221872 C4.81544399,4.14455883 4.76415727,4.18754838 4.71376093,4.2315324 C4.69109675,4.25131063 4.66840717,4.2714759 4.64590384,4.29184316 L4.61016998,4.32449924 L4.61016998,4.32449924 L4.47532075,4.45364446 L4.47532075,4.45364446 L2.35414914,2.33216359 L2.359,2.326 L2.36467214,2.32170046 L2.361,2.325 Z",id:"形状结合",fill:"#D9D9D9"}))));var i=this._isLowContrast(a)?"#e8e8e8":a;switch(n){case"t-font-color":e=function(e){return it.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},it.a.createElement("title",null,"color-font"),it.a.createElement("desc",null,"Created with Sketch."),it.a.createElement("g",{id:"color-font",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},it.a.createElement("rect",{fill:e,id:"Rectangle-55",stroke:"none",strokeWidth:"1",x:"2",y:"13.75",width:"12",height:"1.5",rx:"0.125"}),it.a.createElement("path",{d:"M5.29102819,11.25 L3.96365715,11.25 C3.87952002,11.25 3.8113134,11.1817934 3.8113134,11.0976562 C3.8113134,11.08076 3.81412419,11.0639814 3.81963067,11.0480076 L7.0756112,1.60269506 C7.09679504,1.5412426 7.15463644,1.5 7.21963767,1.5 L8.81868806,1.5 C8.883726,1.5 8.94159158,1.54128846 8.96274706,1.60278951 L12.2118,11.048102 C12.239168,11.1276636 12.1968568,11.2143472 12.1172952,11.2417152 C12.1013495,11.2472004 12.0846037,11.25 12.067741,11.25 L10.6761419,11.25 C10.6099165,11.25 10.5512771,11.2072154 10.531066,11.1441494 L9.69970662,8.55 L6.27433466,8.55 L5.43599205,11.1444975 C5.41567115,11.2073865 5.35711879,11.25 5.29102819,11.25 Z M8.02635163,3.18571429 L7.96199183,3.18571429 L6.63904023,7.30714286 L9.33500105,7.30714286 L8.02635163,3.18571429 Z",id:"A",fill:"#595959"})))}(r);break;case"t-bg-color":e=function(e,t){return it.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},it.a.createElement("g",{id:"控件",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},it.a.createElement("g",{id:"Z图标/2.编辑器/2.格式/背景色",transform:"translate(-5.000000, -6.000000)"},it.a.createElement("g",{id:"编组-9",transform:"translate(-1.000000, 0.000000)"},it.a.createElement("mask",{id:"mask-2",fill:"black"},it.a.createElement("use",{xlinkHref:"#path-1"})),it.a.createElement("circle",{fill:e,stroke:t,strokeWidth:"1",cx:"14",cy:"14",r:"7.5"})))))}(r,a);break;case"stroke-color":e=function(e,t){return it.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},it.a.createElement("title",null,"编组 10"),it.a.createElement("g",{id:"控件",stroke:"none",fill:"none",fillRule:"evenodd"},it.a.createElement("g",{id:"Z图标/2.编辑器/2.格式/描边",transform:"translate(-6.000000, -8.000000)"},it.a.createElement("g",{id:"编组-10",transform:"translate(6.000000, 8.000000)"},it.a.createElement("circle",{id:"椭圆形",stroke:t,fill:"none",cx:"8",cy:"8",r:"6.5",strokeWidth:"3"})),it.a.createElement("g",{id:"编组-11",transform:"translate(6.000000, 8.000000)"},it.a.createElement("circle",{id:"椭圆形2",stroke:e,fill:"none",cx:"8",cy:"8",r:"6.5",strokeWidth:"1"})))))}(a,i);break;case"properties-cb-trans":e=it.a.createElement("svg",{width:"90",viewBox:"0 0 90 30",xmlns:"http://www.w3.org/2000/svg"},it.a.createElement("path",{d:"M0 30L90 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"}));break;case"context-cb-trans":e=it.a.createElement("svg",{width:"30",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},it.a.createElement("path",{d:"M0 30L30 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"}));break;default:e=null}return it.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},onClick:this.props.onClick},e)}}]),n}();c()(Ov,"propTypes",{className:ct.a.string,type:ct.a.string.isRequired,fill:ct.a.string,stroke:ct.a.string,onClick:ct.a.func}),c()(Ov,"defaultProps",{fill:"red"}),jt(".lake-diagram-board-color-pick-container {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 0;\n  min-width: 74px;\n}\n");var Pv=function(e){var t=e.name,n=e.diagram,a=Object(at.useState)({}),i=b()(a,2),o=i[0],c=i[1],l=n.contentEditorPlus,s=n&&n.palette||[];Object(at.useEffect)((function(){function e(e){var t=e.query;c(t)}return n&&(l.on("querychange",e),l.emitQueryChange()),function(){l.off("querychange",e)}}),[n]);var u="#"+F()(o.color).toHex().toUpperCase(),d=Object(at.useState)(u||"#262626"),h=b()(d,2),f=h[0],p=h[1],m=Object(at.useState)(!1),y=b()(m,2),g=y[0],v=y[1];function x(e){p(e),l.execCommand("foreColor",e)}var k=it.a.createElement("div",{className:"lake-diagram-board-color-pick-container"},it.a.createElement(r.ColorPicker,{className:"lake-prevent-card-activated",visible:g,activeColors:[f],defaultColor:e.defaultColor,onSelect:x,onClear:function(){return x("rgba(0, 0, 0, 0)")},show:g,customColors:Sa,CustomPalette:s}));return it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{visible:g,onVisibleChange:function(e){v(e),p(u),e||Ra(f,s)},overlay:k,placement:"bottomCenter",trigger:"click"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement("span",{style:{marginTop:"5px"}},it.a.createElement(Ov,{type:"t-font-color",fill:u}))))))};Pv.defaultProps={defaultColor:"transparent"},Pv.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,currColor:ct.a.string,defaultColor:ct.a.string};var Mv=function(e){var t=e.name,n=e.diagram,r=e.selections,a=0===r.length||r.some((function(e){return e.locked})),i=Object(at.useState)({}),o=b()(i,2),c=o[0],l=o[1],s=n.contentEditorPlus,u=c.bold;return Object(at.useEffect)((function(){function e(e){var t=e.query;l(t)}return n&&(s.on("querychange",e),s.emitQueryChange()),function(){s.off("querychange",e)}}),[n]),it.a.createElement("div",{className:"lake-diagram-contextual-command"},it.a.createElement(ut.a,{disabled:a,placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t,icon:it.a.createElement("span",{className:"lake-icon lake-icon-bold"}),className:st()({active:u}),onClick:function(e){e.stopPropagation(),s.execCommand("bold")}})))};Mv.propTypes={title:ct.a.string,selections:ct.a.array,name:ct.a.string,execCommand:ct.a.func,diagram:ct.a.object};var jv=function(e){var t=e.name,n=e.diagram,r=e.title,a=e.disabled;return it.a.createElement("div",{className:"lake-diagram-contextual-command"},it.a.createElement(ut.a,{disabled:a,placement:"top",title:r},it.a.createElement(dt.a,{"data-testid":t,icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-link"}),onClick:function(e){e.preventDefault(),e.stopPropagation(),n.command.execute("CreateLink")}})))};jv.propTypes={title:ct.a.string,name:ct.a.string,execCommand:ct.a.func,diagram:ct.a.object,disabled:ct.a.oneOfType([ct.a.bool,ct.a.func])};var Sv=function(e){var t=e.name,n=e.onProperties,r=e.title;return it.a.createElement("div",{className:"lake-diagram-contextual-command"},it.a.createElement(ut.a,{disabled:!1,placement:"top",title:r},it.a.createElement(dt.a,{"data-testid":t,icon:it.a.createElement("span",{className:"lake-icon lake-icon-board-properties"}),onClick:n})))};Sv.defaultProps={onProperties:function(){}},Sv.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,onProperties:ct.a.func},jt(".lake-diagram-board-color-pick-container {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 0;\n  min-width: 74px;\n}\n");var Rv=function(e){var t=e.name,n=e.diagram,a=e.selections,i=a.every((function(e){return e.isMindmap})),o=Object(at.useState)(e.defaultColor),c=b()(o,2),l=c[0],s=c[1],u=Object(at.useState)(!1),d=b()(u,2),h=d[0],f=d[1],p=Object(at.useState)(null),m=b()(p,2),y=m[0],g=m[1],v=n&&n.palette||[],x=function(e){var t=F()(e).toRgb();return.3*t.r+.59*t.g+.11*t.b>=248},k=function(t){s(t),i?e.execCommand("border.fill",t,a):e.execCommand("fill.color",t,wl(a)),x(t)?g("#e8e8e8"):g(null)};Object(at.useEffect)((function(){if(a&&a.length>0){var t=i?"border.fill":"fill.color",n=e.get(a,t),r="multiValue"===n?"#FFFFFF":n;s(r),x(r)?g("#e8e8e8"):g(null)}return function(){}}),[]);var w=it.a.createElement("div",{className:"lake-diagram-board-color-pick-container"},it.a.createElement(r.ColorPicker,{className:"lake-prevent-card-activated",visible:h,activeColors:[l],defaultColor:e.defaultColor,onSelect:k,onClear:function(){return k("rgba(0, 0, 0, 0)")},show:h,customColors:Sa,CustomPalette:n&&n.palette}));return it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{visible:h,onVisibleChange:function(e){f(e),e||Ra(l,v)},overlay:w,placement:"bottomRight",trigger:"click"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement(Ov,{type:"t-bg-color",fill:l,stroke:y})))))};function Lv(e){var t=Object(at.useRef)(),n=e.width,r=e.height,a=e.shape,i=a&&mo.find((function(e){return e.name===a}));return Object(at.useEffect)((function(){if(t.current&&i){var e=new dd({stencil:i,width:n,height:r,noFill:!0}).rendererElement;e.setAttribute("stroke","#595959"),e.setAttribute("fill","#ffffff"),Array.from(t.current.children,(function(e){return e.remove()})),t.current.appendChild(e)}}),[t,n,r,i]),i?it.a.createElement("svg",{ref:t,width:n,height:r,viewBox:[0,0,n,r].join(" ")}):null}Rv.defaultProps={defaultColor:"transparent"},Rv.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,currColor:ct.a.string,defaultColor:ct.a.string,execCommand:ct.a.func,get:ct.a.func,disabled:ct.a.oneOfType([ct.a.bool,ct.a.func])},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-contextual-shape-current {\n  width: 100%;\n  height: 32px;\n  min-width: 34px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n.lake-diagrm-contexual-shape-select-container {\n  max-height: 272px;\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 #00000014, 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n  border-radius: 4px;\n  background-color: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  display: flex;\n}\n"),Lv.propTypes={width:ct.a.number,height:ct.a.number,shape:ct.a.string};var Av=function(e){var t,n=e.name,r=e.selections,a=e.get(r,"shape"),i=(null===(t=mo[mo.findIndex((function(e){return e.name===a}))])||void 0===t?void 0:t.category)||"basic";return it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{overlay:it.a.createElement("div",{className:"lake-diagrm-contexual-shape-select-container"},it.a.createElement(Jm,{onSelect:function(t){var n=t.key;e.execCommand("shape",n,r)},groups:[i]})),key:e.key,placement:"bottomCenter",trigger:"click"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":n},it.a.createElement("div",{className:st()("lake-diagram-contextual-shape-current",{"lake-diagam-multi-properties-selection":"multiValue"===a})},it.a.createElement(Lv,{shape:a,width:30,height:30}))))))};function Bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Av.propTypes={title:ct.a.string,command:ct.a.string,name:ct.a.string,onSelect:ct.a.func,key:ct.a.string,diagram:ct.a.object,selections:ct.a.array,execCommand:ct.a.func,get:ct.a.func},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-stroke-dropdown {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn {\n  padding: 0;\n  width: 32px;\n  line-height: 30px;\n  margin-right: 8px;\n  border: none;\n  background: none;\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn[disabled] {\n  border-color: var(--yq-border-primary);\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn.active {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-stroke-dropdown .geo-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-stroke-dropdown-row {\n  display: flex;\n}\n.lake-diagram-board-contextual-toolbar-separator {\n  height: 1px;\n  background: var(--yq-border-primary);\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.lake-diagram-board-contextual-stroke-width-control {\n  max-width: 70px;\n  margin-right: 5px;\n}\n.lake-diagram-board-contextual-stroke-width-control .lake-diagram-board-contextual-stroke-width-inner {\n  border: none;\n}\n.lake-diagram-board-contextual-stroke-width-control .lake-diagram-board-contextual-stroke-width-inner .ant-input-number {\n  width: 100%;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-stroke-width-control .lake-diagram-board-contextual-stroke-width-inner .ant-input-number-focused {\n  box-shadow: none;\n}\n.lake-diagram-board-contextual-stroke-color {\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n  width: 32px;\n  max-height: 32px;\n  overflow: hidden;\n  background: var(--yq-bg-primary);\n  cursor: pointer;\n}\n");var Dv=function(e){var t=e.diagram,n=e.selections,r=e.strokeProps,a=e.setStrokeProps,i=Object(at.useState)(r.style?"dash":"none"),o=b()(i,2),c=o[0],l=o[1],s=function(t){if((t=Number(t))>=1&&t<=10){var i=Math.min(Math.max(t,1),10);i!==r.width&&(a(Nv(Nv({},r),{},{width:i})),e.execCommand("stroke.width",i,n))}},u=function(t){e.onSelect&&e.onSelect(t)},d=function(t){e.execCommand("stroke.style",t,n)};return it.a.createElement("div",{className:st()("lake-diagram-contextual-stroke-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-contextual-stroke-dropdown-row"},it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-none"}),className:st()("geo-btn",{active:"none"===c}),onClick:function(e){e.preventDefault(),l("none"),d(null)}}),it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-dash"}),target:"dash",className:st()("geo-btn",{active:"dash"===c}),onClick:function(e){e.preventDefault(),l("dash"),d("dash")}})),it.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),it.a.createElement("div",{className:"lake-diagram-contextual-stroke-dropdown-row"},it.a.createElement("div",{className:"lake-diagram-board-contextual-stroke-width-control"},it.a.createElement("div",{className:"lake-diagram-board-contextual-stroke-width-inner"},it.a.createElement(vg,{min:1,max:10,value:r.width,onInput:s,onStep:s}))),it.a.createElement("div",{className:"lake-diagram-board-contextual-stroke-color"},it.a.createElement(jg,{color:r.color,defaultColor:e.defaultColor,onSelect:u,onClear:function(){return u("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:it.a.createElement(Ov,{type:"context-cb-trans"})},it.a.createElement("div",{className:st()("lake-diagram-stroke"),style:{backgroundColor:r.color}})))))};Dv.propTypes={title:ct.a.string,colorBadge:ct.a.object,name:ct.a.string,className:ct.a.string,diagram:ct.a.object,onSelect:ct.a.func,defaultColor:ct.a.string,strokeProps:ct.a.object,selections:ct.a.array,setStrokeProps:ct.a.func,execCommand:ct.a.func};var Iv=function(e){var t=e.name,n=e.selections,r=Object(at.useState)({}),a=b()(r,2),i=a[0],o=a[1],c=Object(at.useState)(!1),l=b()(c,2),s=l[0],u=l[1];return Object(at.useEffect)((function(){return n&&n.length>0&&o(n[0].stroke),function(){}}),[]),it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{visible:s,onVisibleChange:function(e){u(e)},overlay:it.a.createElement(Dv,rt()({setStrokeProps:o,strokeProps:i,onSelect:function(t){o(Nv(Nv({},i),{},{color:t})),e.execCommand("stroke.color",t,n)}},e)),placement:"bottomCenter",trigger:"click"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement(Ov,{type:"stroke-color",stroke:i.color})))))};Iv.defaultProps={defaultColor:"transparent"},Iv.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,currColor:ct.a.string,defaultColor:ct.a.string,execCommand:ct.a.func},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-geometry-text-dropdown {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-geometry-text-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-contextual-geometry-text-dropdown .ant-btn[disabled] {\n  color: var(--yq-text-caption);\n  background: none;\n}\n.lake-diagram-contextual-geometry-text-dropdown .ant-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-geometry-text-dropdown .ant-btn:focus {\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-geometry-text-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-geometry-text-dropdown .ant-btn .lake-icon {\n  color: var(--yq-text-primary);\n  font-size: 18px;\n}\n.lake-diagram-contextual-geometry-text-dropdown .ant-btn.active {\n  background: var(--yq-bg-primary-hover-light);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-geometry-text-dropdown .lake-button-active {\n  background-color: var(--yq-bg-primary-hover-light);\n}\n.lake-diagram-contextual-geometry-text-dropdown .lake-diagram-contextual-text-dropdown-row {\n  display: flex;\n}\n");var Tv=function(e){var t=e.diagram,n=Object(at.useState)({}),r=b()(n,2),a=r[0],i=r[1],o=t.contentEditorPlus;Object(at.useEffect)((function(){function e(e){var t=e.query;i(t)}return t&&(o.on("querychange",e),o.emitQueryChange()),function(){o.off("querychange",e)}}),[t]);var c=a.bold,l=a.italic,s=a.strikethrough,u=a.underline;return it.a.createElement("div",{className:st()("lake-diagram-contextual-geometry-text-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},it.a.createElement(dt.a,{className:st()({active:c}),icon:it.a.createElement("span",{className:"lake-icon lake-icon-bold"}),onClick:function(){return o.execCommand("bold")}}),it.a.createElement(dt.a,{className:st()({active:l}),onClick:function(){return o.execCommand("italic")},icon:it.a.createElement("span",{className:"lake-icon lake-icon-italic"})}),it.a.createElement(dt.a,{className:st()({active:s}),onClick:function(){return o.execCommand("strikethrough")},icon:it.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})}),it.a.createElement(dt.a,{className:st()({active:u}),onClick:function(){return o.execCommand("underline")},icon:it.a.createElement("span",{className:"lake-icon lake-icon-underline"})})),it.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),it.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},it.a.createElement(vv,rt()({},e,{textStyle:a,title:ar("字号")})),it.a.createElement(Pv,rt()({},e,{textStyle:a,title:ar("字色")})),it.a.createElement(wv,rt()({},e,{textStyle:a,title:ar("水平对齐")})),it.a.createElement(Ev,rt()({},e,{title:ar("竖直对齐")}))))};Tv.defaultProps={defaultColor:"transparent"},Tv.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,className:ct.a.string};var _v=function(e){var t=e.name,n=Object(at.useState)(!1),r=b()(n,2),a=r[0],i=r[1];return it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{trigger:"click",visible:a,onVisibleChange:function(e){i(e)},overlay:it.a.createElement(Tv,e)},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement("span",{className:"lake-icon lake-icon-contextual-text"})))))};_v.defaultProps={defaultColor:"transparent"},_v.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-toolbar-dropdown .lake-icon.source {\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu {\n  box-shadow: 0 1px 2px -2px #00000014, 0 2px 6px 0 #0000000a, 0 4px 8px 1px #00000005;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu::before {\n  display: none;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu::after {\n  display: none;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .lake-diagram-dropdown-item {\n  margin-left: 4px;\n  margin-right: 4px;\n  min-width: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item {\n  min-width: 32px;\n  height: 32px;\n  padding: 0 6px;\n  border-radius: 3px;\n  text-align: center;\n  line-height: 32px;\n  margin: 0 2px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item[disabled] {\n  border-color: var(--yq-border-primary);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item.active {\n  background: var(--yq-bg-primary-hover-light);\n  color: var(--yq-text-body);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .lake-icon {\n  color: var(--yq-text-primary);\n  font-size: 16px;\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .lake-icon.source {\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n}\n.ant-menu-root.lake-diagram-contextual-toolbar-dropdown-menu .ant-menu-item-selected {\n  color: var(--yq-text-body);\n}\n.text-msg {\n  min-width: 34px;\n  font-size: 16px;\n}\n");var qv=function(e){var t=e.onSelect,n=e.source,r=e.marker;return it.a.createElement(mt.a,{className:st()("lake-diagram-contextual-toolbar-dropdown-menu"),"data-lake_prevent_click_unselect":"true",onSelect:t,style:{padding:"5px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)"}},js.map((function(e){return it.a.createElement(mt.a.Item,{key:e,className:st()({active:e===r})},it.a.createElement("span",{className:st()("lake-icon lake-icon-contextual-".concat(e," lake-diagram-dropdown-item"),{source:n})}))})))};qv.propTypes={source:ct.a.bool,title:ct.a.string,className:ct.a.string,diagram:ct.a.object,onSelect:ct.a.func,marker:ct.a.string};var zv=function(e){var t=e.name,n=e.selections,r=e.type,a=Object(at.useState)(null),i=b()(a,2),o=i[0],c=i[1],l=Object(at.useState)(e.defaultIcon),s=b()(l,2),u=s[0],d=s[1],h=Object(at.useState)(!1),f=b()(h,2),p=f[0],m=f[1];return Object(at.useEffect)((function(){if(n&&n.length>0){var e=n[0][r];e.marker?c(e.marker):c("none"),js.filter((function(t){return t===e.marker})).forEach((function(e){return d("contextual-".concat(e))}))}return function(){}}),[]),it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{overlay:it.a.createElement(qv,rt()({onSelect:function(t){var a=t.key;e.execCommand("".concat(r,".marker"),"none"===a?null:a,n),c(a),js.filter((function(e){return e===a})).forEach((function(e){return d("contextual-".concat(e))})),m(!1)},marker:o,source:"source"===r,trigger:"click"},e)),placement:"bottomCenter",trigger:"click",visible:p,onVisibleChange:function(e){m(e)}},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t,onClick:function(){return m(!0)}},it.a.createElement("span",{className:st()("lake-icon lake-icon-".concat(u),{source:"source"===r})})))))};function Fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fv(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}zv.defaultProps={defaultIcon:"contextual-stroke-none"},zv.propTypes={type:ct.a.string,title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,defaultIcon:ct.a.string,execCommand:ct.a.func},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-line-dropdown {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  color: var(--yq-text-primary);\n}\n.lake-diagram-contextual-line-dropdown .ant-btn[disabled] {\n  color: var(--yq-text-caption);\n  background: none;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-line-dropdown .ant-btn:focus {\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-line-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn .lake-icon {\n  font-size: 18px;\n}\n.lake-diagram-contextual-line-dropdown .ant-btn.active {\n  background: var(--yq-bg-primary-hover-light);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-line-dropdown-row {\n  display: flex;\n}\n.lake-diagram-board-contextual-toolbar-separator {\n  height: 1px;\n  background: var(--yq-border-primary);\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.lake-diagram-board-contextual-line-width-control {\n  max-width: 70px;\n  margin-right: 5px;\n}\n.lake-diagram-board-contextual-line-width-control .lake-diagram-board-contextual-line-width-inner {\n  border: none;\n}\n.lake-diagram-board-contextual-line-width-control .ant-input-number {\n  width: 100%;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-line-color {\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n  width: 32px;\n  min-height: 32px;\n  overflow: hidden;\n  background: var(--yq-bg-primary);\n  cursor: pointer;\n}\n");var Xv=function(e){var t=e.diagram,n=e.selections,r=e.strokeProps,a=e.setStrokeProps,i=Object(at.useState)(r.style?"dash":"none"),o=b()(i,2),c=o[0],l=o[1],s=function(t){if((t=Number(t))>=1&&t<=10){var i=Math.min(Math.max(t,1),10);i!==r.width&&(a(Yv(Yv({},r),{},{width:i})),e.execCommand("stroke.width",i,n))}},u=function(t){e.onSelect&&e.onSelect(t)},d=function(t){e.execCommand("stroke.style",t,n)},h=function(t){e.execCommand("shape",t,n)};return it.a.createElement("div",{className:st()("lake-diagram-contextual-line-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-contextual-line-dropdown-row"},it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-straight-line"}),className:st()({active:"straight"===e.currShape}),onClick:function(t){t.preventDefault(),h("straight"),e.setCurrShape("straight")}}),it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-curve-line"}),target:"dash",className:st()({active:"curve"===e.currShape}),onClick:function(t){t.preventDefault(),h("curve"),e.setCurrShape("curve")}}),it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-elbow-line"}),target:"dash",className:st()({active:"elbow"===e.currShape}),onClick:function(t){t.preventDefault(),h("elbow"),e.setCurrShape("elbow")}})),it.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),it.a.createElement("div",{className:"lake-diagram-contextual-line-dropdown-row"},it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-none"}),className:st()({active:"none"===c}),onClick:function(e){e.preventDefault(),l("none"),d(null)}}),it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-stroke-dash"}),target:"dash",className:st()({active:"dash"===c}),onClick:function(e){e.preventDefault(),l("dash"),d("dash")}})),it.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),it.a.createElement("div",{className:"lake-diagram-contextual-line-dropdown-row"},it.a.createElement("div",{className:"lake-diagram-board-contextual-line-width-control"},it.a.createElement("div",{className:"lake-diagram-board-contextual-line-width-inner"},it.a.createElement(vg,{min:1,max:10,value:r.width,onStep:s,onInput:s}))),it.a.createElement("div",{className:"lake-diagram-board-contextual-line-color"},it.a.createElement(jg,{color:r.color,defaultColor:e.defaultColor,onSelect:u,onClear:function(){return u("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:it.a.createElement(Ov,{type:"context-cb-trans"})},it.a.createElement("div",{className:st()("lake-diagram-stroke"),style:{backgroundColor:r.color}})))))};Xv.propTypes={title:ct.a.string,colorBadge:ct.a.object,name:ct.a.string,className:ct.a.string,diagram:ct.a.object,onSelect:ct.a.func,defaultColor:ct.a.string,strokeProps:ct.a.object,selections:ct.a.array,setStrokeProps:ct.a.func,currShape:ct.a.string,setCurrShape:ct.a.func,execCommand:ct.a.func};var Gv=function(e){var t=e.name,n=e.selections,r=Object(at.useState)({}),a=b()(r,2),i=a[0],o=a[1],c=Object(at.useState)(e.defaultShape),l=b()(c,2),s=l[0],u=l[1];return Object(at.useEffect)((function(){return n&&n.length>0&&(o(n[0].stroke),u(n[0].shape)),function(){}}),[]),it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{overlay:it.a.createElement(Xv,rt()({setStrokeProps:o,strokeProps:i,onSelect:function(t){o(Yv(Yv({},i),{},{color:t})),e.execCommand("stroke.color",t,n)},currShape:s,setCurrShape:u},e)),placement:"bottomCenter",trigger:"click"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement("span",{className:"lake-icon lake-icon-contextual-".concat(s,"-line")})))))};Gv.defaultProps={defaultShape:"straight"},Gv.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,defaultShape:ct.a.string,execCommand:ct.a.func},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-line-text-dropdown {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-line-text-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-contextual-line-text-dropdown .ant-btn[disabled] {\n  color: var(--yq-text-caption);\n  background: none;\n}\n.lake-diagram-contextual-line-text-dropdown .ant-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-line-text-dropdown .ant-btn:focus {\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-line-text-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-line-text-dropdown .ant-btn .lake-icon {\n  color: var(--yq-text-primary);\n  font-size: 18px;\n}\n.lake-diagram-contextual-line-text-dropdown .ant-btn.active {\n  background: var(--yq-bg-primary-hover-light);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-line-text-dropdown .lake-button-active {\n  background-color: var(--yq-bg-primary-hover-light);\n}\n.lake-diagram-contextual-line-text-dropdown .lake-diagram-contextual-text-dropdown-row {\n  display: flex;\n}\n");var Hv=function(e){var t=e.diagram,n=Object(at.useState)({}),r=b()(n,2),a=r[0],i=r[1],o=t.contentEditorPlus;Object(at.useEffect)((function(){function e(e){var t=e.query;i(t)}return t&&(o.on("querychange",e),o.emitQueryChange()),function(){o.off("querychange",e)}}),[t]);var c=a.bold,l=a.italic,s=a.strikethrough,u=a.underline;return it.a.createElement("div",{className:st()("lake-diagram-contextual-line-text-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},it.a.createElement(dt.a,{className:st()({active:c}),icon:it.a.createElement("span",{className:"lake-icon lake-icon-bold"}),onClick:function(){return o.execCommand("bold")}}),it.a.createElement(dt.a,{className:st()({active:l}),onClick:function(){return o.execCommand("italic")},icon:it.a.createElement("span",{className:"lake-icon lake-icon-italic"})}),it.a.createElement(dt.a,{className:st()({active:s}),onClick:function(){return o.execCommand("strikethrough")},icon:it.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})}),it.a.createElement(dt.a,{className:st()({active:u}),onClick:function(){return o.execCommand("underline")},icon:it.a.createElement("span",{className:"lake-icon lake-icon-underline"})})),it.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),it.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},it.a.createElement(vv,rt()({},e,{textStyle:a,title:ar("字号")})),it.a.createElement(Pv,rt()({},e,{textStyle:a,title:ar("字色")})),it.a.createElement(wv,rt()({},e,{textStyle:a,title:ar("水平对齐")}))))};Hv.defaultProps={defaultColor:"transparent"},Hv.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,className:ct.a.string};var Wv=function(e){var t=e.name,n=Object(at.useState)(!1),r=b()(n,2),a=r[0],i=r[1];return it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{trigger:"click",visible:a,onVisibleChange:function(e){i(e)},overlay:it.a.createElement(Hv,e)},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement("span",{className:"lake-icon lake-icon-contextual-text"})))))};Wv.defaultProps={defaultColor:"transparent"},Wv.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array};var Vv=function(e){var t=e.title,n=e.name,r=e.diagram;return it.a.createElement("div",{className:"lake-diagram-contextual-command","data-lake_prevent_click_unselect":"true"},it.a.createElement(ut.a,{placement:"top",title:t},it.a.createElement(dt.a,{"data-testid":n,onClick:function(){r.command.execute("LineSwapEndPoint",{autoSelect:!1})}},it.a.createElement("span",{className:st()("lake-icon lake-icon-".concat(n))}))))};jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-layout-current {\n  width: 100%;\n  height: 30px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n.lake-diagram-contextual-layout-current .lake-diagram-layout-thumb:hover {\n  background-color: var(--yq-border-primary);\n}\n.lake-diagram-contextual-command {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-contextual-command > * {\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagam-multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-contextual-mindmap-dropdown {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn {\n  padding: 0;\n  width: 32px;\n  line-height: 30px;\n  margin-left: 3px;\n  margin-right: 3px;\n  border: none;\n  background: none;\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn[disabled] {\n  border-color: var(--yq-border-primary);\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn.active {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-mindmap-dropdown .mindmap-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-mindmap-dropdown .lake-diagram-contextual-mindmap-dropdown-row {\n  display: flex;\n}\n.lake-diagram-board-contextual-mindmap-width-control {\n  max-width: 70px;\n  margin-right: 5px;\n}\n.lake-diagram-board-contextual-mindmap-width-control .lake-diagram-board-contextual-mindmap-width-inner {\n  border: none;\n}\n.lake-diagram-board-contextual-mindmap-width-control .lake-diagram-board-contextual-mindmap-width-inner .ant-input-number {\n  width: 100%;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 5px;\n}\n.lake-diagram-board-contextual-mindmap-width-control .lake-diagram-board-contextual-mindmap-width-inner .ant-input-number-focused {\n  box-shadow: none;\n}\n.lake-diagram-board-contextual-mindmap-color {\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n  width: 32px;\n  max-height: 32px;\n  overflow: hidden;\n  background: var(--yq-bg-primary);\n  cursor: pointer;\n}\n");var Uv=function(e){var t=e.layouts,n=e.selectedKey,r=e.setVisible,a=e.visible;return it.a.createElement("div",{className:"lake-diagram-layout-dropdown","data-lake_prevent_click_unselect":"true"},t.map((function(t){var i=t.key;return it.a.createElement("div",{key:i,"data-lake_prevent_click_unselect":"true",className:st()("lake-diagram-layout-thumb",i,{selected:i===n}),onClick:function(){r(!a),e.onSelect(i)}})})))};Uv.propTypes={title:ct.a.string,diagram:ct.a.object,layouts:ct.a.array,selectedKey:ct.a.string,setVisible:ct.a.func,onSelect:ct.a.func,visible:ct.a.bool};var Zv=function(e){var t=e.name,n=e.selections.filter((function(e){return e.isMindmap})),r=Ga(n,sy),a=n.map((function(e){return e.upDirection}));n.map((function(e){return e.upLayoutType}));var i=Object(at.useState)(!1),o=b()(i,2),c=o[0],l=o[1],s=Xa.filter((function(e){if(n.every((function(e){return e.isStem})))return!0;var t=e.key.split("-")[0],r=n.some((function(e){var n=e.upLayoutType,r=e.isAbstract;return Va(n,t,r)})),i=!e.directions.every((function(e){return a.every((function(t){return Wa(t,e)}))}));return!r&&!i}));function u(e){0!==s.length&&l(e)}return it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{overlay:it.a.createElement(Uv,rt()({setVisible:u,selectedKey:r,layouts:s,onSelect:function(t){e.execCommand("layout",Ha(t),n)},visible:c},e)),placement:"bottomCenter",onClick:function(){return u(!c)},visible:c,onVisibleChange:function(e){return u(e)},trigger:"click"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement("div",{className:st()("lake-diagram-contextual-layout-current"),"data-testid":t},it.a.createElement("div",{className:st()("lake-diagram-layout-thumb ".concat(r),{"lake-diagam-multi-properties-selection":"multiValue"===r})})))))};function Kv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kv(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zv.defaultProps={selections:[]},Zv.propTypes={title:ct.a.string,className:ct.a.string,diagram:ct.a.object,selections:ct.a.array,execCommand:ct.a.func,name:ct.a.string};var Jv=function(e){var t=e.diagram,n=e.selections,r=e.treeEdgeProps,a=e.setTreeEdgeProps,i=e.containRoot,o=Ft(n.map((function(e){return e.stem}))),c=Object(at.useState)(""),l=b()(c,2),s=l[0],u=l[1],d=function(t){var i=Math.min(Math.max(t,1),5);i!==r.width&&(a(Qv(Qv({},r),{},{"stroke-width":i})),e.execCommand("treeEdge.stroke-width",i,n))},h=function(e){d(e.target.value)},f=function(t){e.onSelect&&e.onSelect(t)},p=function(t){e.execCommand("treeEdge.shape",t,o),e.setTreeRootProps({shape:t?"polyline":"none"})};return Object(at.useEffect)((function(){return o.length>0&&u(o[0].treeEdge.shape||"none"),function(){}}),[]),it.a.createElement("div",{className:st()("lake-diagram-contextual-mindmap-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-none"}),className:st()("mindmap-btn",{active:"none"===s}),onClick:function(e){e.preventDefault(),u("none"),p(null)}}),it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-polyline"}),target:"dash",className:st()("mindmap-btn",{active:"polyline"===s}),onClick:function(e){e.preventDefault(),u("polyline"),p("polyline")}})),!i&&it.a.createElement(it.a.Fragment,null,it.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),it.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},it.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-control"},it.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-inner"},it.a.createElement(vg,{min:1,max:5,value:r["stroke-width"]||e.defaultStrokeWidth,onBlur:h,onPressEnter:h,onStep:d}))),it.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-color"},it.a.createElement(jg,{color:r.stroke,defaultColor:e.defaultColor,onSelect:f,onClear:function(){return f("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:it.a.createElement(Ov,{type:"context-cb-trans"})},it.a.createElement("div",{className:st()("lake-diagram-stroke"),style:{backgroundColor:r.stroke}}))))))};Jv.defaultProps={defaultStrokeWidth:3},Jv.propTypes={title:ct.a.string,colorBadge:ct.a.object,containRoot:ct.a.bool,name:ct.a.string,className:ct.a.string,diagram:ct.a.object,onSelect:ct.a.func,defaultColor:ct.a.string,treeEdgeProps:ct.a.object,selections:ct.a.array,setTreeEdgeProps:ct.a.func,defaultStrokeWidth:ct.a.number,execCommand:ct.a.func,setTreeRootProps:ct.a.func};var $v=function(e){var t=e.name,n=e.selections,r=Object(at.useState)({}),a=b()(r,2),i=a[0],o=a[1],c=Object(at.useState)({}),l=b()(c,2),s=l[0],u=l[1],d=Object(at.useState)(!1),h=b()(d,2),f=h[0],p=h[1],m=n.some((function(e){return e.isStem}));return Object(at.useEffect)((function(){if(n&&n.length>0){var e=n[0];o(e.treeEdge),u(e.stem.treeEdge)}return function(){}}),[]),it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{visible:f,onVisibleChange:function(e){p(e)},overlay:it.a.createElement(Jv,rt()({setTreeEdgeProps:o,setTreeRootProps:u,treeEdgeProps:i,onSelect:function(t){o(Qv(Qv({},i),{},{stroke:t})),e.execCommand("treeEdge.stroke",t,n)},containRoot:m},e)),placement:"bottomCenter",trigger:"click"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-".concat(s.shape?s.shape:"none")})))))};$v.defaultProps={defaultColor:"transparent"},$v.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,currColor:ct.a.string,defaultColor:ct.a.string,execCommand:ct.a.func};var eb=function(e){var t=function(t){e.execCommand("border.shape",t,e.selections),e.setShape(t)},n=e.diagram.selector.selections.every((function(e){return!e.isAbstract}));return it.a.createElement("div",{className:st()("lake-diagram-contextual-mindmap-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},n?it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-mindmap-line"}),className:st()("mindmap-btn",{active:"line"===e.shape}),onClick:function(e){e.preventDefault(),t("line")}}):null,it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-mindmap-rect"}),className:st()("mindmap-btn",{active:"rect"===e.shape}),onClick:function(e){e.preventDefault(),t("rect")}}),it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-mindmap-capsule"}),className:st()("mindmap-btn",{active:"capsule"===e.shape}),onClick:function(e){e.preventDefault(),t("capsule")}})))};eb.propTypes={title:ct.a.string,className:ct.a.string,borderProps:ct.a.object,selections:ct.a.array,execCommand:ct.a.func,shape:ct.a.string,setShape:ct.a.func,isLine:ct.a.bool};var tb=function(e){var t=e.name,n=e.selections,r=Object(at.useState)(e.get(n,"border.shape","line")||null),a=b()(r,2),i=a[0],o=a[1];return it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{overlay:it.a.createElement(eb,rt()({shape:i,isLine:"line"===i,setShape:o},e)),placement:"bottomCenter",trigger:"click"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement("div",{className:st()("lake-diagram-contextual-layout-current",{"lake-diagam-multi-properties-selection":"multiValue"===i})},it.a.createElement("span",{className:"lake-icon lake-icon-mindmap-".concat(i)}))))))};function nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}tb.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,defaultShape:ct.a.string,get:ct.a.func};var ab=function(e){var t=e.diagram,n=e.selections,r=e.strokeProps,a=e.setStrokeProps,i=function(t){var i=Math.min(Math.max(t,1),10);i!==r.strokeWidth&&(a(rb(rb({},r),{},{strokeWidth:i})),e.execCommand("border.stroke-width",i,n))},o=function(e){i(e.target.value)},c=function(t){e.onSelect&&e.onSelect(t)};return it.a.createElement("div",{className:st()("lake-diagram-contextual-mindmap-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-contextual-mindmap-dropdown-row"},it.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-control"},it.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-width-inner"},it.a.createElement(vg,{min:1,max:10,value:r.strokeWidth,onBlur:o,onPressEnter:o,onStep:i}))),it.a.createElement("div",{className:"lake-diagram-board-contextual-mindmap-color"},it.a.createElement(jg,{color:r.strokeColor,defaultColor:e.defaultColor,onSelect:c,onClear:function(){return c("rgba(0, 0, 0, 0)")},palette:t&&t.palette,transSVG:it.a.createElement(Ov,{type:"context-cb-trans"})},it.a.createElement(ut.a,{placement:"top",title:ar("边框颜色")},it.a.createElement("div",{className:st()("lake-diagram-stroke"),style:{backgroundColor:r.strokeColor}}))))))};ab.propTypes={title:ct.a.string,colorBadge:ct.a.object,name:ct.a.string,className:ct.a.string,diagram:ct.a.object,onSelect:ct.a.func,defaultColor:ct.a.string,strokeProps:ct.a.object,selections:ct.a.array,setStrokeProps:ct.a.func,execCommand:ct.a.func};var ib=function(e){var t=e.name,n=e.selections,r=Object(at.useState)({}),a=b()(r,2),i=a[0],o=a[1],c=Object(at.useState)(!1),l=b()(c,2),s=l[0],u=l[1],d=Object(at.useState)(!0),h=b()(d,2),f=h[0],p=h[1];return Object(at.useEffect)((function(){if(n&&n.length>0){var t=n.filter((function(e){return e.canStroke()&&e.isMindmap})),r=e.get(t,"border.stroke-width"),a=e.get(n,"border.shape","line")||null,i=e.get(n,"border.stroke","transparent")||null;o({strokeWidth:r,shape:a,strokeColor:i}),p("line"===a)}return function(){}}),[]),it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{visible:s,onVisibleChange:function(e){u(e)},overlay:it.a.createElement(ab,rt()({setStrokeProps:o,strokeProps:i,onSelect:function(t){o(rb(rb({},i),{},{strokeColor:t})),e.execCommand("border.stroke",t,n)},isLine:f},e)),placement:"bottomCenter",trigger:"click"},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement(Ov,{type:"stroke-color",stroke:i.strokeColor})))))};ib.defaultProps={defaultColor:"transparent"},ib.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,currColor:ct.a.string,defaultColor:ct.a.string,get:ct.a.func,execCommand:ct.a.func},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-mindmap-text-dropdown {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-mindmap-text-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-contextual-mindmap-text-dropdown .ant-btn[disabled] {\n  color: var(--yq-text-caption);\n  background: none;\n}\n.lake-diagram-contextual-mindmap-text-dropdown .ant-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-mindmap-text-dropdown .ant-btn:focus {\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-mindmap-text-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-mindmap-text-dropdown .ant-btn .lake-icon {\n  color: var(--yq-text-primary);\n  font-size: 18px;\n}\n.lake-diagram-contextual-mindmap-text-dropdown .ant-btn.active {\n  background: var(--yq-bg-primary-hover-light);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-mindmap-text-dropdown .lake-button-active {\n  background-color: var(--yq-bg-primary-hover-light);\n}\n.lake-diagram-contextual-mindmap-text-dropdown .lake-diagram-contextual-text-dropdown-row {\n  display: flex;\n}\n");var ob=function(e){var t=e.diagram,n=Object(at.useState)({}),r=b()(n,2),a=r[0],i=r[1],o=t.contentEditorPlus;Object(at.useEffect)((function(){function e(e){var t=e.query;i(t)}return t&&(o.on("querychange",e),o.emitQueryChange()),function(){o.off("querychange",e)}}),[t]);var c=a.bold,l=a.italic,s=a.strikethrough,u=a.underline;return it.a.createElement("div",{className:st()("lake-diagram-contextual-mindmap-text-dropdown",e.className),"data-lake_prevent_click_unselect":"true"},it.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},it.a.createElement(dt.a,{className:st()({active:c}),icon:it.a.createElement("span",{className:"lake-icon lake-icon-bold"}),onClick:function(){return o.execCommand("bold")}}),it.a.createElement(dt.a,{className:st()({active:l}),onClick:function(){return o.execCommand("italic")},icon:it.a.createElement("span",{className:"lake-icon lake-icon-italic"})}),it.a.createElement(dt.a,{className:st()({active:s}),onClick:function(){return o.execCommand("strikethrough")},icon:it.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})}),it.a.createElement(dt.a,{className:st()({active:u}),onClick:function(){return o.execCommand("underline")},icon:it.a.createElement("span",{className:"lake-icon lake-icon-underline"})})),it.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar-separator"}),it.a.createElement("div",{className:"lake-diagram-contextual-text-dropdown-row"},it.a.createElement(vv,rt()({},e,{textStyle:a,title:ar("字号")})),it.a.createElement(Pv,rt()({},e,{textStyle:a,title:ar("字色")})),it.a.createElement(wv,rt()({},e,{textStyle:a,title:ar("水平对齐")}))))};ob.defaultProps={defaultColor:"transparent"},ob.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array,className:ct.a.string};var cb=function(e){var t=e.name,n=Object(at.useState)(!1),r=b()(n,2),a=r[0],i=r[1];return it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{trigger:"click",visible:a,onVisibleChange:function(e){i(e)},overlay:it.a.createElement(ob,e)},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement("span",{className:"lake-icon lake-icon-contextual-text"})))))};cb.defaultProps={defaultColor:"transparent"},cb.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,selections:ct.a.array};var lb=function(e){var t=e.name,n=e.title,r=e.diagram,a=e.boardWebProxy;return it.a.createElement("div",{className:"lake-diagram-contextual-command"},it.a.createElement(ut.a,{disabled:!1,placement:"top",title:n},it.a.createElement(dt.a,{"data-testid":t,icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-abstract"}),onClick:function(){a&&a.spm&&a.spm.click("b4693.c116586.d241682",{"toolbar(MindmapAppendAbstract)":1}),r.command.execute("MindmapAppendAbstract")}})))};lb.defaultProps={onProperties:function(){}},lb.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object,onProperties:ct.a.func};var sb=function(e){var t=e.name,n=e.diagram,r=e.title,a=e.disabled;return it.a.createElement("div",{className:"lake-diagram-contextual-command"},it.a.createElement(ut.a,{disabled:a,placement:"top",title:r},it.a.createElement(dt.a,{"data-testid":t,icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-group"}),onClick:function(e){e.preventDefault(),e.stopPropagation(),n.command.execute("Group")}})))};sb.propTypes={title:ct.a.string,name:ct.a.string,execCommand:ct.a.func,diagram:ct.a.object,disabled:ct.a.oneOfType([ct.a.bool,ct.a.func])};var ub=function(e){var t=e.name,n=e.diagram,r=e.title,a=e.disabled;return it.a.createElement("div",{className:"lake-diagram-contextual-command"},it.a.createElement(ut.a,{disabled:a,placement:"top",title:r},it.a.createElement(dt.a,{"data-testid":t,icon:it.a.createElement("span",{className:"lake-icon lake-icon-contextual-ungroup"}),onClick:function(e){e.preventDefault(),e.stopPropagation(),n.command.execute("UnGroup")}})))};ub.propTypes={title:ct.a.string,name:ct.a.string,execCommand:ct.a.func,diagram:ct.a.object,disabled:ct.a.oneOfType([ct.a.bool,ct.a.func])},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-contextual-align-dropdown {\n  background: var(--yq-bg-primary);\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px #0000001f;\n  padding: 5px 5px;\n  width: auto;\n  height: auto;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  margin: 0 2px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn[disabled] {\n  color: var(--yq-text-caption);\n  background: none;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-align-dropdown .ant-btn:focus {\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-align-dropdown .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn .lake-icon {\n  color: var(--yq-text-primary);\n  font-size: 18px;\n}\n.lake-diagram-contextual-align-dropdown .ant-btn.active {\n  background: var(--yq-bg-primary-hover-light);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-align-dropdown .lake-button-active {\n  background-color: var(--yq-bg-primary-hover-light);\n}\n.lake-diagram-contextual-align-dropdown p {\n  margin-bottom: 0;\n}\n");var db=function(e){var t=e.diagram;function n(e,n,r){return t.command.enable(e)&&it.a.createElement(ut.a,{title:r},it.a.createElement(dt.a,{icon:it.a.createElement("span",{className:"lake-icon lake-icon-".concat(n)}),onClick:function(){return t.command.execute(e)}}))}return it.a.createElement("div",{className:"lake-diagram-contextual-align-dropdown","data-lake_prevent_click_unselect":"true"},it.a.createElement("p",null,n("AlignLeft","align-left",ar("左对齐")),n("AlignHCenter","align-h-center",ar("左右居中")),n("AlignRight","align-right",ar("右对齐")),n("DistributeHorizontally","distribute-horizontally",ar("水平均分"))),it.a.createElement("p",null,n("AlignTop","align-top",ar("顶对齐")),n("AlignVCenter","align-v-center",ar("上下居中")),n("AlignBottom","align-bottom",ar("底对齐")),n("DistributeVertically","distribute-vertically",ar("垂直均分"))))};db.defaultProps={diagram:null},db.propTypes={diagram:ct.a.object};var hb=function(e){var t=e.name,n=Object(at.useState)(!1),r=b()(n,2),a=r[0],i=r[1];return it.a.createElement("div",{className:"lake-diagram-contextual-command lake-diagram-contextual-toolbar-dropdown"},it.a.createElement(pt.a,{trigger:"click",visible:a,onVisibleChange:function(e){i(e)},overlay:it.a.createElement(db,e)},it.a.createElement(ut.a,{placement:"top",title:e.title},it.a.createElement(dt.a,{"data-testid":t},it.a.createElement("span",{className:"lake-icon lake-icon-contextual-align"})))))};hb.defaultProps={title:"",name:"",diagram:null},hb.propTypes={title:ct.a.string,name:ct.a.string,diagram:ct.a.object};var fb=function(e){var t=e.diagram,n=e.title;return it.a.createElement("div",{className:"lake-diagram-contextual-command",style:{width:"72px"}},it.a.createElement(ut.a,{placement:"top",title:ar(n)},it.a.createElement(hv,{diagram:t})))},pb=function(e){var t=e.diagram,n=e.title,r=e.name;return it.a.createElement("div",{className:"lake-diagram-contextual-command"},it.a.createElement(ut.a,{placement:"top",title:ar(n)},it.a.createElement(dt.a,{"data-testid":r,onClick:function(e){e.preventDefault(),e.stopPropagation(),t.command.execute("Delete",{cells:t.deduplicate(t.selector.selections).map((function(e){return e.model.id}))})}},it.a.createElement("span",{className:"lake-icon lake-icon-delete-lane"}))))},mb={name:"properties",type:"custom",custom:Sv,title:ar("打开设置"),noMini:!0},yb=function(e){return{type:"separator",noMini:e}},gb=function(e){var t=e&&1!==e.length?[]:[yb(),{name:"add-link",type:"custom",custom:jv,title:ar("插入链接"),hotkey:W.ua.macos?"⌘+K":"Ctrl+K"}];return[{name:"contextual-text-size",type:"custom",custom:vv,title:ar("字号"),disabled:!1},yb(),{name:"contextual-text-color",type:"custom",title:ar("字色"),disabled:!1,custom:Pv},{name:"contextual-text-h-alignment",title:ar("水平对齐"),type:"custom",custom:wv,disabled:!1},{name:"contextual-text-v-alignment",title:ar("竖直对齐"),type:"custom",custom:Ev,disabled:function(e){return!e.selector.selections.some((function(e){return e.canTextVerticalAlign()}))}},{name:"contextual-text-bold",type:"custom",custom:Mv,title:ar("加粗"),disabled:!1}].concat(t,[yb(!0),mb])},vb=function(){return[{name:"arrangement",type:"custom",custom:hb,title:ar("排列"),disabled:function(e){return e.selector.selections.filter((function(e){return!e.isLine||e.isLine&&!e.source.id&&!e.target.id})).length<2}},{name:"group",type:"custom",custom:sb,title:ar("成组")},yb(!0)]};function bb(e){var t=e.coord,n=e.overlayClassName,r=Object(at.useRef)();if(t){var a="lake-prevent-card-activated lake-diagram-prevent-mouse-select lake-diagram-prevent-mouseleave-reset-focus-point";return it.a.createElement(Ct.a,rt()({},e,{getPopupContainer:function(){return e.getPopupContainer?e.getPopupContainer():document.querySelector(".yuque-sdk-extra-container")||e.diagram.container},visible:!0,overlayClassName:n?"".concat(n," ").concat(a):a,"data-lake_prevent_click_unselect":!0}),it.a.createElement("div",{ref:r,"data-lake_prevent_click_unselect":"true",style:{position:"absolute",left:"".concat(t[0],"px"),top:"".concat(t[1]-16,"px"),pointerEvents:"none",width:"".concat(e.width,"px"),height:"".concat(e.height+32,"px")}}))}return it.a.createElement("span",{ref:r})}bb.defaultProps={coord:null,diagram:null,onClose:function(){}},bb.propTypes={coord:ct.a.array,diagram:ct.a.object,onClose:ct.a.func,overlayClassName:ct.a.string,getPopupContainer:ct.a.object,height:ct.a.number,width:ct.a.number},jt("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-board-contextual-toolbar {\n  display: flex;\n  height: 40px;\n  flex-direction: row;\n  background: var(--yq-bg-primary);\n  box-shadow: 0 1px 2px -2px #00000014, 0 2px 6px 0 #0000000a, 0 4px 8px 1px #00000005;\n  border: 1px solid var(--yq-border-primary);\n  justify-content: center;\n  align-items: center;\n  padding: 0 6px;\n}\n.lake-diagram-board-contextual-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 4px;\n  margin-right: 4px;\n  height: 100%;\n  border-radius: 5px;\n}\n.ant-popover.lake-diagram-board-contextual-toolbar-popover .ant-popover-content {\n  min-width: auto;\n  width: auto;\n}\n.ant-popover.lake-diagram-board-contextual-toolbar-popover .ant-popover-content .ant-popover-arrow {\n  display: none;\n}\n.ant-popover.lake-diagram-board-contextual-toolbar-popover .ant-popover-content .ant-popover-inner {\n  background-color: inherit;\n  box-shadow: none;\n  border-radius: 0;\n  background-clip: none;\n}\n.ant-popover.lake-diagram-board-contextual-toolbar-popover .ant-popover-content .ant-popover-inner .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-btn::after {\n  display: none;\n}\n.lake-diagram-board-contextual-toolbar-popover .ant-btn.ant-dropdown-trigger:hover {\n  background: var(--yq-border-primary);\n  border-radius: 2px;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button {\n  display: flex;\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button:hover {\n  border-color: var(--yq-border-primary);\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: var(--yq-border-primary);\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:hover {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:hover {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: auto;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  color: var(--yq-text-primary);\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon::before {\n  content: '';\n}\n.lake-diagram-contextual-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: var(--yq-border-primary);\n}\n.lake-diagram-contextual-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 6px;\n  height: 32px;\n  min-width: 32px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  color: var(--yq-text-primary);\n}\n.lake-diagram-contextual-command .ant-btn[disabled] {\n  color: var(--yq-text-caption);\n  background: none;\n}\n.lake-diagram-contextual-command .ant-btn:hover {\n  background: var(--yq-border-primary);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-command .ant-btn:focus {\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-command .ant-btn::after {\n  display: none;\n}\n.lake-diagram-contextual-command .ant-btn .lake-icon {\n  margin-right: 0;\n  font-size: 18px;\n}\n.lake-diagram-contextual-command .ant-btn.active {\n  background: var(--yq-bg-primary-hover-light);\n  color: var(--yq-text-body);\n}\n.lake-diagram-contextual-command .lake-button-active {\n  background-color: var(--yq-bg-primary-hover-light);\n}\n.lake-diagram-contextual-button-popover {\n  padding-top: 0;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content {\n  min-width: auto;\n  width: auto;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content .ant-popover-arrow {\n  display: none;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content .ant-popover-inner {\n  background-color: inherit;\n  box-shadow: none;\n  border-radius: 0;\n  background-clip: none;\n}\n.lake-diagram-contextual-button-popover .ant-popover-content .ant-popover-inner .ant-popover-inner-content {\n  padding: 0;\n  stroke: '@yuque-grey-4';\n  box-shadow: #00000014 0 0 4px;\n}\n.lake-diagram-board-contextual-vertical-separator {\n  width: 1px;\n  height: 60%;\n  margin: 0 6px;\n  background: var(--yq-border-primary);\n}\n");var xb=["diagram","custom","boardWebProxy"];function kb(e,t,n){var r=n;if(e.length>0)if((r=e.map((function(e){return t.split(".").reduce((function(e,t){return e?e.isCell&&e.get(t)||e[t]:e}),e)}))).every((function(e){return e===r[0]})))r=r[0];else{if(!r.every((function(e){return"number"==typeof e})))return"multiValue";r.sort(),r=r[r.length-1]}return r}var wb=function(e){var t=e.diagram,n=e.custom;e.boardWebProxy;var r=ft()(e,xb),a=Object(at.useCallback)((function(e,n,r){t.command.execute("Update",{id:r,model:Jt(e,n),autoSelect:!1})}),[t]);switch(e.type){case"separator":default:return it.a.createElement("div",{className:"lake-diagram-board-contextual-vertical-separator"});case"custom":return it.a.createElement(n,rt()({diagram:t,get:kb,execCommand:a},r))}};function Cb(e){var t=e.diagram,n=e.onProperties,r=e.mini,a=e.boardWebProxy,i=Object(at.useState)(null),o=b()(i,2),c=o[0],l=o[1],s=Object(at.useState)(null),u=b()(s,2),d=u[0],h=u[1],f=Object(at.useState)(null),p=b()(f,2),m=p[0],y=p[1],g=Object(at.useState)(0),v=b()(g,2),x=v[0],k=v[1],w=Object(at.useState)(0),C=b()(w,2),E=C[0],O=C[1];function P(){return function(e,t,n){var r=e.length,a=[];if(0===r)return[];if(function(e){return e.every((function(e){return e.isMindmap}))||e.every((function(e){return e.isGeometry}))||e.every((function(e){return e.isText}))||e.every((function(e){return e.isLine}))||e.every((function(e){return e.isGroup}))||e.every((function(e){return e.isStack}))||e.every((function(e){return Kn(e)}))}(e))switch(e[0].type){case"line":a=[{name:"contextual-line-style",type:"custom",title:ar("线条样式"),custom:Gv},yb(),{name:"contextual-line-source",type:"custom",title:ar("起点"),custom:function(e){return it.a.createElement(zv,rt()({},e,{type:"source"}))}},{name:"contextual-line-swap-endpoint",type:"custom",title:ar("转换"),custom:Vv},{name:"contextual-line-target",type:"custom",title:ar("终点"),custom:function(e){return it.a.createElement(zv,rt()({},e,{type:"target"}))}},yb(),{name:"font-style",type:"custom",title:ar("文字样式"),custom:Wv},yb(!0),mb];break;case"mindmap":a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[{name:"contextual-mindmap-layout",type:"custom",title:ar("结构"),custom:Zv,disabled:function(e){return e.selector.selections.some((function(e){return e.isAbstract}))}},{name:"contextual-mindmap-tree-edge",type:"custom",title:ar("分支"),custom:$v,disabled:!1},yb(),{name:"contextual-mindmap-shape",type:"custom",title:ar("节点形状"),custom:tb,disabled:!1},{name:"contextual-mindmap-fill",type:"custom",title:ar("节点填充"),custom:Rv,disabled:function(e){return 0===e.selector.selections.filter((function(e){return e.canFill()})).length}},{name:"contextual-mindmap-stroke",type:"custom",title:ar("节点描边"),custom:ib,disabled:function(e){return 0===e.selector.selections.filter((function(e){return e.canStroke()})).length}},yb(),{name:"font-style",type:"custom",title:ar("文字样式"),custom:cb,disabled:!1},{name:"add-link",type:"custom",custom:jv,title:ar("插入链接"),disabled:!1}];return e&&t.push(yb(),{name:"add-abstract",type:"custom",title:ar("添加概要"),custom:lb,disabled:!1}),t.concat([yb(!0),mb])}(Pp(e,!0));break;case"text":a=gb(e);break;case"geometry":a=[{name:"contextual-geometry-shape",type:"custom",custom:Av,title:ar("图形"),disabled:!1},yb(),{name:"contextual-geometry-fill-color",type:"custom",title:ar("填充"),custom:Rv,disabled:function(e){return 0===e.selector.selections.filter((function(e){return e.canFill()})).length}},{name:"contextual-geometry-stroke-color",type:"custom",title:ar("描边"),disabled:!1,custom:Iv},yb(),{name:"font-style",type:"custom",title:ar("文字样式"),custom:_v,disabled:!1},{name:"add-link",type:"custom",custom:jv,title:ar("插入链接"),hotkey:W.ua.macos?"⌘+K":"Ctrl+K"},yb(!0),mb];break;case"group":a=1===e.length?[{name:"ungroup",type:"custom",custom:ub,title:ar("取消成组")},yb(!0),mb]:[];break;case"stack":a=[{name:"contextual-geometry-fill-color",type:"custom",title:ar("填充"),custom:Rv,disabled:function(e){return 0===e.selector.selections.filter((function(e){return e.canFill()})).length}},{name:"contextual-geometry-stroke-color",type:"custom",title:ar("描边"),disabled:!1,custom:Iv},yb(!0),mb];break;case"swimlane":a=[{name:"contextual-swimlane-lane-number",type:"custom",title:ar("泳道数"),custom:fb,disabled:function(e){var t=e.selector.selections;return!(1===t.length&&Kn(t[0]))}},yb(!0),{name:"contextual-geometry-fill-color",type:"custom",title:ar("填充"),custom:Rv,disabled:function(e){return 0===e.selector.selections.filter((function(e){return e.canFill()})).length}},{name:"contextual-geometry-stroke-color",type:"custom",title:ar("描边"),disabled:!1,custom:Iv},yb(!0),{name:"font-style",type:"custom",title:ar("文字样式"),custom:_v,disabled:!1},yb(!0),mb];break;default:a=[]}if(e.filter((function(e){return e.isStem})).length>1){var i,o=0===a.length?[].concat(N()(vb()),[mb]):vb();(i=a).splice.apply(i,[a.length-1,0].concat(N()(o)))}return e.every((function(e){return Qn(e)}))&&(a=[{name:"contextual-swimlane-lane-number",type:"custom",title:ar("泳道数"),custom:fb,disabled:function(e){var t=e.selector.selections;return t.some((function(e){return e.swimlane!==t[0].swimlane}))}},yb(!0),{name:"contextual-geometry-fill-color",type:"custom",title:ar("填充"),custom:Rv,disabled:function(e){return 0===e.selector.selections.filter((function(e){return e.canFill()})).length}},yb(!0),{name:"font-style",type:"custom",title:ar("文字样式"),custom:_v,disabled:!1},{name:"add-link",type:"custom",custom:jv,title:ar("插入链接"),disabled:!1},yb(!0),{name:"delete-lane",type:"custom",custom:pb,title:ar("删除泳道"),disabled:!1},yb(!0),mb]),e.some((function(e){return"UML"===e.category}))&&0===a.findIndex((function(e){return"contextual-geometry-shape"===e.name}))&&a.splice(0,2),1===e.length&&$n(e[0])&&(a=gb()),r>1&&(a=a.filter((function(e){return"add-link"!==e.name}))),(a=a.filter((function(t){return!(n&&t.noMini||("function"==typeof t.disabled?t.disabled(e[0].diagram):t.disabled))}))).forEach((function(e){"properties"===e.name&&(e.onProperties=t)})),a}(t.selector.selections,n,r)}Object(at.useEffect)((function(){var e=Te()((function(){if(t.signal.addVertexPanelVisibility)return l(null),void h(null);var e=t.selector.selections,n=P();e&&l(n),1===n.length||n.length>1&&!t.signal.mouseMultiSelecting?function(e){h(null);var n=function(e,t){var n=nr(e,(function(e){if(Un(e)){var t=e.getKeyShapeBox();if(e.isAbstract){var n=nr(e.abstractCoveredCellsWithAllChildren,(function(e){return e.getKeyShapeBox()}));t.minY=Math.min(n.minY,t.minY),t.maxY=Math.max(n.maxY,t.maxY)}return function(e){var t=e.minX,n=e.minY;return{x:t,y:n,width:e.maxX-t,height:e.maxY-n}}(t)}return Gn(e)?e.getPointBox():e.getBBox()})),r=n.minX,a=n.minY,i=n.maxX,o=n.maxY,c=t.viewport.convertViewport([r,a]),l=t.viewport.convertViewport([i,o]),s=l[0]-c[0],u=l[1]-c[1];return{x:c[0],y:c[1],width:s,height:u}}(e,t),r=n.x,a=n.y,i=n.width,o=n.height;k(o),O(i),h([r,a])}(e):h(null)}),20),n=function(){l(null),h(null)},r=Te()((function(){var e=P();l(e)}),16),a=function(){var n=t.viewport.invertViewport([0,0]);m&&mi(m[0],n[0],1)&&mi(m[1],n[1],1)||(l(null),h(null),y(n),e())},i=function(e){e.isModelChange&&r()},o=function(){y(t.viewport.invertViewport([0,0]))};return t.on("afterselect",e),t.on("cell:dragstart",n),t.on("vertexresizestart",n),t.on("groupresizestart",n),t.on("abstadjuststart",n),t.on("endpointcontrolpointmousedown",n),t.on("addlinebuttonmousedown",n),t.on("aftercommandexecute",i),t.on("afterviewportchange",a),t.on("afterimport",o),function(){t.off("afterselect",e),t.off("cell:dragstart",n),t.off("vertexresizestart",n),t.off("groupresizestart",n),t.off("abstadjuststart",n),t.off("endpointcontrolpointmousedown",n),t.off("aftercommandexecute",i),t.off("afterviewportchange",a),t.off("afterimport",o)}}),[t,c,m]);var M=it.a.createElement("div",{className:"lake-diagram-board-contextual-toolbar"},c&&c.map((function(e,n){return it.a.createElement(wb,rt()({key:n,diagram:t,boardWebProxy:a,selections:t.selector.selections},e))})));return it.a.createElement("div",{"data-testid":"board-contextual-toolbar"},it.a.createElement(bb,{height:x,width:E,content:M,visible:!0,overlayClassName:"lake-diagram-board-contextual-toolbar-popover",diagram:t,coord:d}))}function Eb(e,t){var n={},r=[],a=[];return e.forEach((function(e){var t=e.category;e.cover||(e.cover="https://gw.alipayobjects.com/zos/bmw-prod/8681f102-cc41-4685-b75a-faadb0af0a61.svg"),"personal"===t?r.push(e):"official"===t&&a.push(e),t&&!n[t]&&(n[t]=!0)})),{personalData:r.splice(0,t),officialData:a.splice(0,t)}}function Ob(e,t){var n=e.boardWebProxy,r=e.diagram,a=e.forceUpdate,i=Object(at.useState)(null),o=b()(i,2),c=o[0],l=o[1],s="Maxi"===t?100:16,u=function(){var e=X()(H.a.mark((function e(){var a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.destroyed&&n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.material["find".concat(t)]();case 4:a=e.sent,l(Eb(a,s));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var t=X()(H.a.mark((function t(a){var i,o,c,l,s,u,d,h,f,p,m,y,g;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.destroyed&&n){t.next=2;break}return t.abrupt("return");case 2:return i=n.spm,o=a.id,c=a.category,t.next=6,n.material.use(o);case 6:if(l=t.sent){t.next=9;break}return t.abrupt("return");case 9:s=l.diagramData,u=l.graphicsBBox,s&&(d=s.body,h=s.head,La(d),f=u||(null==h?void 0:h.bbox)||r.modelManager.bbox(d),p=r.viewport.getCenter(),"number"==typeof(v=f).x&&"number"!=typeof v.minX&&(v.minX=v.x,v.maxX=v.x+v.width),"number"==typeof v.y&&"number"!=typeof v.minY&&(v.minY=v.y,v.maxY=v.y+v.height),m=p[0]-f.minX-f.width/2,y=p[1]-f.minY-f.height/2,r.modelManager.translate(d,m,y),r.command.execute("Add",{model:d}),i&&(g={material_id:a.id},"personal"===c?i.click("b4693.c107432.d223038",g):i.click("b4693.c107432.d223037",g)),e.onUse&&e.onUse());case 11:case"end":return t.stop()}var v}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(at.useEffect)((function(){u()}),[r,a]),{state:{data:c,maxCount:s},onUse:d,onMore:function(t){e.onMore&&e.onMore(t)},onDelete:function(t){n.material.destroy(t),e.onDelete&&e.onDelete(t)},onClose:function(){e.onClose&&e.onClose()}}}wb.propTypes={type:ct.a.string,curr:ct.a.string,custom:ct.a.func,diagram:ct.a.object},Cb.propTypes={className:ct.a.string,position:ct.a.string,items:ct.a.array,domContainer:ct.a.object,title:ct.a.node,extra:ct.a.node,execCommand:ct.a.func,diagram:ct.a.object,onProperties:ct.a.func,mini:ct.a.bool,boardWebProxy:ct.a.object},jt(".lake-diagram-scroll-tabs-container {\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 #00000014, 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n  border-radius: 4px;\n  background-color: var(--yq-bg-primary);\n}\n.lake-diagram-scroll-tabs-container .lake-diagram-scroll-tabs-inner-container {\n  overflow: scroll;\n  position: relative;\n}\n.lake-diagram-scroll-tabs-container .lake-diagram-scroll-tabs-inner-container::-webkit-scrollbar {\n  height: 0;\n  width: 5px;\n  background-color: var(--yq-bg-primary);\n  /* or add it to the track */\n}\n.lake-diagram-scroll-tabs-container .lake-diagram-scroll-tabs-inner-container::-webkit-scrollbar-thumb {\n  background: var(--yq-bg-primary-hover-light);\n  border-radius: 3px;\n}\n.lake-diagram-scroll-tabs-container .ant-tabs {\n  height: 40px;\n}\n.lake-diagram-scroll-tabs-container .ant-tabs-tab-btn {\n  font-weight: 400;\n  color: var(--yq-text-caption);\n}\n.lake-diagram-scroll-tabs-container .ant-tabs-tab .ant-tabs-tab-active {\n  font-weight: 500;\n  color: var(--yq-text-primary);\n}\n.lake-diagram-scroll-tabs-container .ant-tabs-tab + .ant-tabs-tab {\n  margin-left: 12px;\n}\n.lake-diagram-scroll-tabs-container .ant-tabs-nav {\n  padding-left: 12px !important;\n}\n.lake-diagram-scroll-tabs-container .ant-tabs > .ant-tabs-nav .ant-tabs-nav-operations,\n.lake-diagram-scroll-tabs-container .ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-operations {\n  width: auto !important;\n  padding: 0 !important;\n}\n.lake-diagram-scroll-tabs-container .ant-tabs > .ant-tabs-nav .ant-tabs-nav-more,\n.lake-diagram-scroll-tabs-container .ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-more {\n  padding: 0;\n  margin-left: 8px !important;\n  margin-right: 8px !important;\n}\n.lake-diagram-scroll-tabs-container .ant-tabs-ink-bar {\n  background: var(--yq-yuque-grey-9);\n}\n.lake-diagram-scroll-tabs-container .ant-tabs-top > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-right::after,\n.lake-diagram-scroll-tabs-container .ant-tabs-bottom > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-right::after,\n.lake-diagram-scroll-tabs-container .ant-tabs-top > div > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-right::after,\n.lake-diagram-scroll-tabs-container .ant-tabs-bottom > div > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-right::after {\n  opacity: 0;\n}\n.lake-diagram-scroll-tabs-container .ant-tabs-top > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-left::before,\n.lake-diagram-scroll-tabs-container .ant-tabs-bottom > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-left::before,\n.lake-diagram-scroll-tabs-container .ant-tabs-top > div > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-left::before,\n.lake-diagram-scroll-tabs-container .ant-tabs-bottom > div > .ant-tabs-nav .ant-tabs-nav-wrap.ant-tabs-nav-wrap-ping-left::before {\n  opacity: 0;\n}\n");var Pb=gt.a.TabPane;function Mb(e){var t=e.tabs,n=void 0===t?[]:t,r=e.InnerRCNode,a=e.className,i=e.scrollToName;if(0===n.length||!r)return it.a.createElement("div",null);var o=Object(at.useRef)(null),c=Object(at.useRef)(null),l=Object(at.useState)(n[0].name),s=b()(l,2),u=s[0],d=s[1];return Object(at.useEffect)((function(){var e,t=o.current;if(t){var r,a=n.map((function(e){var n=t.querySelector("[data-lake-tab-scroll=".concat(e.name,"]"));return n?n.offsetTop:0}));e=De()((function(e){for(var t=e.target.scrollTop,r=a.length-1;r>0&&!(t>a[r]-48);r--);d((function(e){var t=n[r].name;return e!==t?t:e}))}),16),null===(r=o.current)||void 0===r||r.addEventListener("scroll",e)}return function(){var t;return e&&(null===(t=o.current)||void 0===t?void 0:t.removeEventListener("scroll",e))}}),[n]),Object(at.useEffect)((function(){if(i&&o&&o.current){var e,t=o.current.querySelector('[data-lake-tab-scroll="'.concat(i,'"]'));t&&1===t.nodeType&&(null===(e=o.current)||void 0===e||e.scrollTo(0,t.offsetTop))}}),[i]),Object(at.useEffect)((function(){c.current&&Array.from(c.current.querySelectorAll(".ant-tabs-tab")).forEach((function(e,t){0!==t&&1===e.nodeType&&(e.style.marginLeft="16px")}))}),[]),it.a.createElement("div",{className:"lake-diagram-scroll-tabs-container ".concat(a)},it.a.createElement(gt.a,{tabBarStyle:{width:"100%",padding:"0 8px",height:"40px",color:"#8c8c8c",fontSize:"14px"},animated:{inkBar:!0,tabPane:!0},onChange:function(e){var t=o.current;if(t){var n,r=t.querySelector('[data-lake-tab-scroll="'.concat(e,'"]'));r&&1===r.nodeType&&(null===(n=o.current)||void 0===n||n.scrollTo(0,r.offsetTop))}},activeKey:u,onTabClick:function(e){d(e)}},n.map((function(e){return it.a.createElement(Pb,{tab:e.title,key:e.name})}))),it.a.createElement("div",{ref:o,className:"lake-diagram-scroll-tabs-inner-container"},r))}jt("/* stylelint-disable */\n.lake-board-material-lib-maxi-container {\n  text-align: left;\n  position: relative;\n  display: inline-block;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-close {\n  border-radius: 2px;\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/3ee0285f-a1ad-4051-82a6-89e802514ef4.svg);\n  background-position: center;\n  background-repeat: no-repeat;\n  top: 8px;\n  right: 14px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-close:hover {\n  background-color: var(--yq-bg-tertiary);\n  cursor: pointer;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container {\n  height: 560px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .ant-tabs-tab {\n  margin-left: 12px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .ant-tabs-tab + .ant-tabs-tab {\n  margin-left: 32px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-diagram-scroll-tabs-inner-container {\n  height: 508px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container {\n  width: 762px;\n  padding-left: 24px;\n  padding-right: 0px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-tab-title {\n  padding-top: 16px;\n  margin-bottom: 12px;\n  font-size: 14px;\n  color: var(--yq-text-body);\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container:last-child {\n  min-height: 520px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-personal-empty {\n  width: 400px;\n  color: var(--yq-text-body);\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-personal-empty .lake-board-material-lib-maxi-personal-empty-tips-h1 {\n  font-size: 18px;\n  margin: 24px 0;\n  font-weight: bold;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-personal-empty p {\n  font-size: 14px;\n  margin-bottom: 8px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-personal-empty img {\n  margin-top: 16px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container {\n  display: flex;\n  flex-wrap: wrap;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item {\n  position: relative;\n  margin-right: 24px;\n  margin-bottom: 24px;\n  font-size: 14px;\n  border: 1px solid var(--yq-border-primary);\n  border-radius: 4px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item .lake-board-material-lib-maxi-item-title {\n  height: 54px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 16px;\n  border-top: 1px solid var(--yq-border-primary);\n  font-weight: bold;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item .lake-board-material-lib-maxi-item-cover {\n  width: 220px;\n  height: 142px;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  border-radius: 4px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item .lake-board-material-lib-maxi-item-control {\n  padding: 16px;\n  display: none;\n  background-color: #fafafae6;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  border-radius: 4px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item .lake-board-material-lib-maxi-item-control .lake-board-material-lib-maxi-item-use-control-button {\n  position: absolute;\n  width: calc(100% - 32px);\n  bottom: 16px;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item .lake-board-material-lib-maxi-item-control .lake-board-material-lib-maxi-item-use-control-title {\n  height: 14px;\n  font-weight: bold;\n  margin-bottom: 12px;\n  display: flex;\n  align-items: center;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item .lake-board-material-lib-maxi-item-control .lake-board-material-lib-maxi-item-use-control-description {\n  height: 90px;\n  margin-bottom: 24px;\n  overflow: hidden;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item .lake-board-material-lib-maxi-item-control .lake-board-material-lib-maxi-item-use-control-delete {\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  top: 16px;\n  right: 16px;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/0b88a90e-d1fd-4e14-b74d-dc5355e9de8d.svg);\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item .lake-board-material-lib-maxi-item-control .lake-board-material-lib-maxi-item-use-control-href {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  margin-left: 4px;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/712ccc64-9efb-4889-89d0-3531ff478a22.svg);\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item .lake-board-material-lib-maxi-item-control .lake-board-material-lib-maxi-item-use-control-delete:hover {\n  cursor: pointer;\n}\n.lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-scroll-container .lake-board-material-lib-maxi-container .lake-board-material-lib-maxi-subtab-container .lake-board-material-lib-maxi-item-container .lake-board-material-lib-maxi-item:hover .lake-board-material-lib-maxi-item-control {\n  display: block;\n}\n");var jb=function(e,t,n){var r=e.id,a=e.cover,i=e.doclet_id,o=e.title;return it.a.createElement("div",{className:"lake-board-material-lib-maxi-item",key:r,"data-testid":"material-lib-maxi-item-doclet-id-".concat(i),"data-lake-tab-scroll":r},it.a.createElement("div",{className:"lake-board-material-lib-maxi-item-cover",style:{backgroundImage:"url(".concat(a,")")}}),o&&it.a.createElement("div",{className:"lake-board-material-lib-maxi-item-title"},it.a.createElement("span",null,o)),it.a.createElement("div",{className:"lake-board-material-lib-maxi-item-control"},function(e,t){var n=e.title,r=e.href,a=e.description,i=e.category,o=e.id;return it.a.createElement("div",null,it.a.createElement("div",{className:"lake-board-material-lib-maxi-item-use-control-title"},n,r&&it.a.createElement("a",{target:"_blank",className:"lake-board-material-lib-maxi-item-use-control-href",href:r})),a&&it.a.createElement("div",{className:"lake-board-material-lib-maxi-item-use-control-description"},a),"personal"===i&&it.a.createElement("div",{onClick:function(e){e.target.closest(".lake-board-material-lib-maxi-item").style.display="none",null==t||t.onDelete(o)},className:"lake-board-material-lib-maxi-item-use-control-delete"}),it.a.createElement(dt.a,{onClick:function(){t.onUse(e)},className:"lake-board-material-lib-maxi-item-use-control-button",block:!0},ar("使用")))}(e,n)))},Sb=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:it.a.createElement("div",null),a=arguments.length>4?arguments[4]:void 0;return it.a.createElement("div",{className:"lake-board-material-lib-maxi-subtab-container","data-lake-tab-scroll":e},it.a.createElement("div",{className:"lake-board-material-lib-maxi-tab-title"},t),(null==n?void 0:n.length)>0?it.a.createElement("div",{className:"lake-board-material-lib-maxi-item-container"},n.map((function(e,t){return jb(e,0,a)}))):r)},Rb=function(e,t,n,r){return it.a.createElement("div",{className:"lake-board-material-lib-maxi-container"},Sb(e[0].name,e[0].title,n,it.a.createElement("div",null),r),Sb(e[1].name,e[1].title,t,it.a.createElement("div",{className:"lake-board-material-lib-maxi-personal-empty","data-testid":"material-lib-maxi-personal-empty"},it.a.createElement("h1",{className:"lake-board-material-lib-maxi-personal-empty-tips-h1"},ar("添加自定义素材")),it.a.createElement("p",null," ",ar("步骤一：框选需要添加的内容")),it.a.createElement("p",null," ",ar("步骤二：右键打开面板，选择“添加到素材库”")),it.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/5f652093-571b-4c7c-bd3f-fd81ff7fe2e1.svg"})),r))};jt("/* stylelint-disable */\n.lake-board-material-lib-mini-container {\n  position: relative;\n  display: inline-block;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-maxmize {\n  border-radius: 2px;\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/d1568eaa-9d1f-445c-9399-63f3778bcd77.svg);\n  background-position: center;\n  background-repeat: no-repeat;\n  top: 8px;\n  right: 4px;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-maxmize:hover {\n  background-color: var(--yq-bg-tertiary);\n  cursor: pointer;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container {\n  width: 220px;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-diagram-scroll-tabs-inner-container {\n  height: 258px;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container {\n  margin: 12px;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-tab-title {\n  margin-bottom: 12px;\n  font-size: 14;\n  color: var(--yq-text-body);\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-subtab-container:last-child {\n  min-height: 258px;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-subtab-container .lake-board-material-lib-mini-personal-empty {\n  text-align: center;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-subtab-container .lake-board-material-lib-mini-personal-empty .lake-board-material-lib-mini-personal-empty-tips {\n  font-size: 12px;\n  margin: 4px 0;\n  color: var(--yq-text-disable);\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-subtab-container .lake-board-material-lib-mini-item-container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-subtab-container .lake-board-material-lib-mini-item-container .lake-board-material-lib-mini-item {\n  width: 90px;\n  height: 60px;\n  margin-bottom: 14px;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-subtab-container .lake-board-material-lib-mini-item-container .lake-board-material-lib-mini-item .lake-board-material-lib-mini-item-control {\n  display: none;\n  align-items: center;\n  justify-content: center;\n  background-color: #fafafae6;\n  width: 100%;\n  height: 100%;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-subtab-container .lake-board-material-lib-mini-item-container .lake-board-material-lib-mini-item:nth-child(odd) {\n  margin-right: 11px;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-subtab-container .lake-board-material-lib-mini-item-container .lake-board-material-lib-mini-item:hover {\n  cursor: pointer;\n}\n.lake-board-material-lib-mini-container .lake-board-material-lib-mini-scroll-container .lake-board-material-lib-mini-container .lake-board-material-lib-mini-subtab-container .lake-board-material-lib-mini-item-container .lake-board-material-lib-mini-item:hover .lake-board-material-lib-mini-item-control {\n  display: flex;\n}\n");var Lb=function(e,t,n){var r=e.id,a=e.cover,i=e.doclet_id,o=t+1===n.state.maxCount;return it.a.createElement("div",{className:"lake-board-material-lib-mini-item",key:r,"data-testid":"material-lib-mini-item-doclet-id-".concat(i),style:{backgroundImage:"url(".concat(a,")")},onClick:function(){o?n.onMore(r):n.onUse(e)}},it.a.createElement("div",{className:"lake-board-material-lib-mini-item-control"},o?it.a.createElement("span",null,ar("更多 >")):it.a.createElement(dt.a,{size:"small"},ar("使用"))))},Ab=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:it.a.createElement("div",null),a=arguments.length>4?arguments[4]:void 0;return it.a.createElement("div",{className:"lake-board-material-lib-mini-subtab-container","data-lake-tab-scroll":e},it.a.createElement("div",{className:"lake-board-material-lib-mini-tab-title"},t),(null==n?void 0:n.length)>0?it.a.createElement("div",{className:"lake-board-material-lib-mini-item-container"},n.map((function(e,t){return Lb(e,t,a)}))):r)},Bb=function(e,t,n,r){return it.a.createElement("div",{className:"lake-board-material-lib-mini-container"},Ab(e[0].name,e[0].title,t,it.a.createElement("div",{className:"lake-board-material-lib-mini-personal-empty","data-testid":"material-lib-personal-empty"},it.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/ca0cbbb6-ebf4-45bf-9d5a-2d07b831468f.svg"}),it.a.createElement("p",{className:"lake-board-material-lib-mini-personal-empty-tips"},ar("框选后，右键添加到素材库"))),r),Ab(e[1].name,e[1].title,n,it.a.createElement("div",null),r))},Nb=Object.freeze({__proto__:null,ZoomTool:fy,Toolbar:_y,ContextMenu:hg,Properties:gv,ContextualMenu:Cb,MaterialLibMaxi:function(e){var t=Ob(e,"Maxi"),n=t.state.data;if(!n)return it.a.createElement("div",null);var r=n.personalData,a=n.officialData,i=[{name:"official",title:ar("推荐素材")},{name:"personal",title:ar("自定义素材")}];return it.a.createElement("div",{className:"lake-board-material-lib-maxi-container"},it.a.createElement(Mb,{tabs:i,className:"lake-board-material-lib-maxi-scroll-container",InnerRCNode:Rb(i,r,a,t),scrollToName:e.scrollToName}),it.a.createElement("div",{className:"lake-board-material-lib-maxi-close","data-testid":"material-lib-maxi-close",onClick:function(){t.onClose()}}))},MaterialLibMini:function(e){var t=Ob(e,"Mini"),n=t.state.data;if(!n)return it.a.createElement("div",null);var r=n.personalData,a=n.officialData,i=[{name:"personal",title:ar("自定义素材")},{name:"official",title:ar("推荐素材")}];return it.a.createElement("div",{className:"lake-board-material-lib-mini-container"},it.a.createElement(Mb,{tabs:i,className:"lake-board-material-lib-mini-scroll-container",InnerRCNode:Bb(i,r,a,t)}),it.a.createElement("div",{className:"lake-board-material-lib-mini-maxmize","data-testid":"material-lib-mini-maxmize",onClick:function(){e.onMaximize&&e.onMaximize()}}))}}),Db=Object.freeze({__proto__:null});function Ib(e){var t,n=e.diagram,r=e.readonly,a=Object(at.useState)(null),i=b()(a,2),o=i[0],c=i[1],l=Object(at.useState)(""),s=b()(l,2),u=s[0],d=s[1],h=Object(at.useState)(null),f=b()(h,2),p=f[0],m=f[1],y=Object(at.useRef)();return Object(at.useEffect)((function(){function e(e){var t=e.cell,n=t.getKeyShape().getBoundingClientRect();c(null),c([n.x+n.width,n.y+n.height/2]),m(t),d(t.note.content)}return n.on("opennote",e),function(){n.off("opennote",e)}}),[n,o,c,m,u]),Object(at.useEffect)((function(){setTimeout((function(){var e=document.querySelector("textarea.lake-diagram-note-area");if(e){var t=e.value.length;e.focus(),e.setSelectionRange(t,t)}}),16)}),[o,y.current,p]),t=r?it.a.createElement("div",{className:"lake-diagram-note-area"},u):it.a.createElement("textarea",{className:"lake-diagram-note-area",value:u,onChange:function(e){var t=e.target.value;d(t)},ref:y}),it.a.createElement(Yy,{placement:"right",content:t,visible:!0,overlayClassName:"lake-diagram-note-popover",diagram:n,coord:o,onClose:function(){o&&p&&(m(null),c(null),p.note.content!==u&&n.command.execute("Update",{id:p,model:{note:u?{content:u}:null}}))}})}function Tb(e){return it.a.createElement(Ib,e)}function _b(e){return it.a.createElement(Ib,rt()({},e,{readonly:!0}))}jt("/* stylelint-disable */\n.lake-diagram-note-popover {\n  z-index: 1033;\n}\n.lake-diagram-note-popover .lake-diagram-note-area {\n  font-size: 12px;\n  border: none;\n  resize: none;\n  outline: none;\n  box-shadow: none;\n  width: 294px;\n  height: 128px;\n  padding: 16px 18px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  word-break: break-word;\n  white-space: pre-wrap;\n}\n"),Ib.defaultProps={diagram:null,readonly:!1},Ib.propTypes={diagram:ct.a.object,readonly:ct.a.bool},Tb.defaultProps={diagram:null},Tb.propTypes={diagram:ct.a.object},_b.defaultProps={diagram:null},_b.propTypes={diagram:ct.a.object};var qb=Object.freeze({__proto__:null,Editor:Tb,Reader:_b}),zb=Object.freeze({__proto__:null,Properties:ly,Note:qb,Toolbar:Vm,LinkEditor:Qm,ShapeOverlay:Jm,Dropdown:Xm,ZoomTool:ay,ContextMenu:Db,Board:Nb,ToolbarShapeOverlay:ny}),Fb=new r.MessageManager;function Yb(e){return Xb.apply(this,arguments)}function Xb(){return(Xb=X()(H.a.mark((function e(t){var n,a,i,o,c,l,s,u,d,h,f,p,m,y;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,i=t.uploader,o=t.enable,c=t.onTemporaryOnLoad,l=t.onCompleted,a){e.next=3;break}return e.abrupt("return");case 3:if(r.FileUtils.isImage(a)){e.next=5;break}return e.abrupt("return");case 5:if(!o||o()){e.next=7;break}return e.abrupt("return");case 7:if(!a.size){e.next=12;break}if(null===(s=r.FileSizeChecker.check("image",a.size))){e.next=12;break}return s.callback(Fb.show(s.level,s.msg,!s.alwaysOpen)),e.abrupt("return");case 12:return e.next=14,Uy(a);case 14:if(u=e.sent,d=(null===(n=Vy(u))||void 0===n?void 0:n.cdn)||URL.createObjectURL(a),h=new Image,f={src:d,naturalWidth:void 0,naturalHeight:void 0,uploadInfo:{hash:u,fileName:a.name,fileType:a.type,fileSize:a.size,localTempSrc:d,state:0}},h.onload=function(){Object.assign(f,{naturalWidth:h.naturalWidth,naturalHeight:h.naturalHeight}),c&&c(f)},h.src=d,"string"!=typeof d||!d.startsWith("blob:")){e.next=32;break}return p=i.image(a),Wy(u,m={imageCdnPromise:p}),e.next=26,p;case 26:if(y=e.sent){e.next=30;break}return f.uploadInfo.state=-1,e.abrupt("return",f);case 30:m.cdn=y,l&&l({hash:u,cdn:y});case 32:return e.abrupt("return",f);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gb(e){if(e.image&&e.image.uploadInfo&&e.image.uploadInfo.hash){var t,n=null===(t=Vy(e.image.uploadInfo.hash))||void 0===t?void 0:t.cdn;n?(e.image.src=n,e.image.uploadInfo.state=2):e.image.uploadInfo.state=-2}}function Hb(e){e.body.forEach((function(e){St(e,(function(e){Gb(e)}))}))}function Wb(e){return Vb.apply(this,arguments)}function Vb(){return(Vb=X()(H.a.mark((function e(t){var n,r,a,i,o,c,l,s,u,d,h;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.model,r=t.diagram,a=t.uploader,n){e.next=3;break}return e.abrupt("return");case 3:if((i=n.image||n.sourceImage)&&i.src){e.next=6;break}return e.abrupt("return");case 6:if(o=n.id,c=i.src,l=i.uploadInfo,!c.startsWith("blob:")){e.next=24;break}return e.prev=10,e.next=13,fetch(c).then((function(e){return e.blob()}));case 13:return s=e.sent,u=new File([s],l&&"".concat(i.uploadInfo.fileName)),e.next=17,Yb({file:u,uploader:a});case 17:d=e.sent,r&&!r.destroyed&&(h=r.find(o))&&h.updateModel({image:d}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),console.warn("Failed to save image when importing, src: ".concat(c));case 24:case"end":return e.stop()}}),e,null,[[10,21]])})))).apply(this,arguments)}function Ub(e){return e.command.enable("Collapse")?e.command.execute("Collapse"):e.command.enable("Expand")?e.command.execute("Expand"):void 0}function Zb(e){return e.command.enable("Collapse")||e.command.enable("Expand")}function Kb(e){return e.command.enable("Expand")}function Qb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"curve-arrow",n=t.split("-"),r=b()(n,2),a=r[0],i=r[1],o=e.selector.selections;if(2===o.length&&o.every((function(e){return e.isMindmap}))){var c=e.add([{type:"line",source:{id:o[0].model.id},target:{id:o[1].model.id}}]),l=c[0].getPointAtPercent(.5);return e.remove(c),e.command.execute("Add",{model:{type:"line",shape:a,source:{id:o[0].model.id},target:{id:o[1].model.id,marker:i},controlPoints:[[l.x,l.y]]}})}e.command.execute("BeginInsertLine",{shape:a,marker:i})}var Jb=[{name:"save",title:ar("保存"),hotkey:W.ua.macos?"⌘+S":"Ctrl+S",icon:"save",disabled:!1,execCommand:function(){}},{name:"undo",title:ar("撤销"),hotkey:W.ua.macos?"⌘+Z":"Ctrl+Z",icon:"undo",disabled:function(e){return!e.command.enable("Undo")},execCommand:function(e){return e.command.execute("Undo")}},{name:"redo",title:ar("重做"),hotkey:W.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:"redo",disabled:function(e){return!e.command.enable("Redo")},execCommand:function(e){return e.command.execute("Redo")}},{type:"separator"},{name:"beginInsertRoot",title:ar("插入主节点"),hotkey:(W.ua.macos,"Shift+Enter"),icon:"insert-root",disabled:function(e){return!e.command.enable("MindmapBeginInsertStem")},execCommand:function(e){return e.command.execute("MindmapBeginInsertStem")}},{name:"append",title:ar("插入同级"),hotkey:"Enter",icon:"insert-sibling",disabled:function(e){return!e.command.enable("MindmapAppendSibling")},execCommand:function(e){return e.command.execute("MindmapAppendSibling")}},{name:"appendChild",title:ar("插入子级"),hotkey:"Tab",icon:"insert-child",disabled:function(e){return!e.command.enable("MindmapAppendChild")},execCommand:function(e){return e.command.execute("MindmapAppendChild")}},{name:"insertLine",title:ar("线条"),hotkey:W.ua.macos?"⌘+L":"Ctrl+L",type:"dropdown",mode:"button",defaultKey:"curve-arrow",data:[{key:"curve",icon:"line-curve"},{key:"curve-arrow",icon:"line-curve-arrow"}],execCommand:function(e,t){return Qb(e,t)}},{name:"insertNote",title:ar("备注"),icon:"diagram-toolbar-note",disabled:function(e){return!e.command.enable("MindmapOpenNote")},execCommand:function(e){return e.command.execute("MindmapOpenNote")}},{name:"createLink",title:ar("插入链接"),hotkey:W.ua.macos?"⌘+K":"Ctrl+K",icon:"link",disabled:function(e){return!e.command.enable("CreateLink")},execCommand:function(e){return e.command.execute("CreateLink")}},{name:"insertImage",title:ar("插入图片"),type:"upload",icon:"image",accept:W.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(","),disabled:function(e){return!e.command.enable("MindmapAttachImage")&&!e.command.enable("MindmapInsertImage")},onChange:function(){}},{type:"separator"},{name:"collapseExpand",title:ar("折叠"),hotkey:W.ua.macos?"⌘+/":"Ctrl+/",icon:"collapse-node",disabled:function(e){return!Zb(e)},active:function(e){return Kb(e)},execCommand:function(e){return Ub(e)}}],$b=function(){function e(){m()(this,e),Object.assign(this,{format:"lakeboard",type:"Board",version:"1.0",diagramData:{head:{},body:[]},mode:"edit",viewportSetting:null,viewportOption:"adapt",text:"",graphicsBBox:null})}return g()(e,[{key:"get",value:function(e){return this[e]}},{key:"set",value:function(e,t){this[e]=t}},{key:"export",value:function(){var e=this;return Object.keys(this).reduce((function(t,n){return t[n]=e[n],t}),{})}}]),e}();function ex(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ex(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ex(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nx=rr.locale,rx=new $b,ax=Object.freeze({__proto__:null,uploadImage:Yb,onBeforeSave:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(r){if(e.destroyed)r();else if(t.isCompleted())r();else{var a,i=Date.now();!n&&Oe.a.warning(ar("图片上传中，请稍候")),Promise.resolve().then((function e(){t.isCompleted()||Date.now()-i>=72e4?(a&&clearTimeout(a),r()):a=setTimeout(e,6e3)}))}}))},processImageModel:Gb,processExportData:Hb,exportData:function(e){var t=e.export();return Hb(t),t},tryTransferBlobUrl:Wb,importData:function(e){var t=e.diagram,n=e.data,r=e.uploader;if(n&&n.body&&t){if(t.import(n),r&&"edit"===t.interaction.currentMode){var a=[];return n.body.forEach((function(e){St(e,(function(e){a.push(Wb({model:e,diagram:t,uploader:r}))}))})),a}return[]}},get map(){return Hy},cleanHashCache:function(){Hy={}},addHashCache:Wy,getHashCache:Vy,generateHash:Uy,executeCollapseExpand:Ub,enableCollapseExpand:Zb,collapseActive:Kb,mindmapInsertLine:Qb,mindToolbarConfigs:Jb,uploadMindmapImage:function(e){var t=e.file,n=e.uploader,r=e.diagram,a=e.from;return new Promise((function(e){Yb({file:t,uploader:n,enable:function(){return r.command.enable("MindmapAttachImage")||r.command.enable("MindmapInsertImage")},onTemporaryOnLoad:function(t){"clipboard"===a&&(t.firstInsertRatio=1/window.devicePixelRatio),0===r.selector.selections.length||"drop"===a?r.command.execute("MindmapInsertImage",{image:t}):1===r.selector.selections.length&&r.command.execute("MindmapAttachImage",{image:t}),e(t)}})}))},generateBoardWebProxy:function(e,t,n,a){var i,o;if(null==e||null===(i=e.templates)||void 0===i||!i.v2||!t)return null;var c,l,s,u,d,h=new r.Uploader({docId:t,docDomain:"User"});function f(){return p.apply(this,arguments)}function p(){return(p=X()(H.a.mark((function t(){var n,r,a,i=arguments;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,e.templates.v2.find(tx({include_types:"official",official_channel:"material_lib_board_config",format:"lakeboard"},n));case 3:return r=t.sent,t.next=6,e.templates.v2.find(tx({include_types:"personal",scene:"material",format:"lakeboard"},n));case 6:return a=t.sent,t.abrupt("return",[].concat(N()(null==r?void 0:r.data.map((function(e){var t,n,a,i,o=null==r?void 0:r.meta,c=null==o?void 0:o.official,l={id:e.id,title:e.name,doclet_id:e.doclet_id,cover:e.cover,category:"official"};return null!=e&&null!==(t=e.meta)&&void 0!==t&&t.description&&(l.description=null==e||null===(a=e.meta)||void 0===a?void 0:a.description),null!=e&&null!==(n=e.meta)&&void 0!==n&&n.descriptionUrl&&(l.href=null==e||null===(i=e.meta)||void 0===i?void 0:i.descriptionUrl),c&&c.forEach((function(t){var n=t.name_en,r=t.name_zh;t.template_ids.includes(e.id)&&(l.group="zh-cn"!==nx?n:r)})),l}))),N()(null==a?void 0:a.data.map((function(e){return{id:e.id,doclet_id:e.doclet_id,cover:e.cover,category:"personal"}})))));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{iconfont:{disable:!(null==a||null===(o=a.settings)||void 0===o||!o.disable_iconfont),search:(d=X()(H.a.mark((function t(n){var r,a,i,o;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.keyword,a=n.page_size,i=n.page,t.prev=1,t.next=4,e.editor.iconfont({query:r,page_size:a,page:i});case 4:if(!(o=t.sent)){t.next=7;break}return t.abrupt("return",{data:o.icons.map((function(e){return{name:e.name,svg:e.show_svg.replace("currentColor","#666")}})),count:o.count});case 7:return t.abrupt("return",null);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),function(e){return d.apply(this,arguments)})},uploader:{image:(u=X()(H.a.mark((function e(){var t=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.image.apply(h,t));case 1:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},material:{use:(s=X()(H.a.mark((function t(n){var r,a,i,o;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.templates.v2.useMaterial({template_id:n});case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:if(a=r.data){t.next=8;break}return t.abrupt("return",null);case 8:if(!(i=a.doclet.body)){t.next=12;break}return o=JSON.parse(i),t.abrupt("return",o);case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)}))),function(e){return s.apply(this,arguments)}),destroy:(l=X()(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.templates.v2.destroy({id:n});case 1:case"end":return t.stop()}}),t)}))),function(e){return l.apply(this,arguments)}),create:(c=X()(H.a.mark((function t(n){var r,a,i,o,c,l;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.cover,a=n.diagramData,i=n.graphicsBBox,t.prev=1,!r||!a){t.next=13;break}return rx.set("graphicsBBox",i),rx.set("diagramData",a),o=Date.now(),c=new Date(o),t.next=9,e.templates.v2.create({scene:"material",in_edit:!1,name:"用户自定义素材".concat(c.toLocaleDateString()),target_type:"User",format:"lakeboard",cover:r,template_type:3,type:"Board",body:JSON.stringify(rx.export())});case 9:if(l=t.sent){t.next=12;break}return t.abrupt("return");case 12:return t.abrupt("return",l);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,15]])}))),function(e){return c.apply(this,arguments)}),findMaxi:function(){return X()(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f({limit:100}));case 1:case"end":return e.stop()}}),e)})))()},findMini:function(){return X()(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f({limit:16}));case 1:case"end":return e.stop()}}),e)})))()}},spm:n}},Model:$b,MAXI_MAX_MATERIAL_COUNT:100,MINI_MAX_MATERIAL_COUNT:16,getMaterialCells:Jy,createMaterial:$y})},372:function(e,t,n){"use strict";n(1232);var r=n(706);n(437);t.a=r.a},376:function(e,t,n){const r=n(868),a=n(869),i=n(887),o=n(888);function c(e,t,n,i,o){const c=[].slice.call(arguments,1),l=c.length,s="function"==typeof c[l-1];if(!s&&!r())throw new Error("Callback required as last argument");if(!s){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=i=void 0):2!==l||t.getContext||(i=n,n=t,t=void 0),new Promise((function(r,o){try{const o=a.create(n,i);r(e(o,t,i))}catch(c){o(c)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(o=n,n=t,t=i=void 0):3===l&&(t.getContext&&void 0===o?(o=i,i=void 0):(o=i,i=n,n=t,t=void 0));try{const r=a.create(n,i);o(null,e(r,t,i))}catch(u){o(u)}}t.create=a.create,t.toCanvas=c.bind(null,i.render),t.toDataURL=c.bind(null,i.renderToDataURL),t.toString=c.bind(null,(function(e,t,n){return o.render(e,n)}))},377:function(e,t){e.exports={colorToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green":"#74B602","@pea-green-1":"#E8F7CF","@pea-green-2":"#DCF4B4","@pea-green-3":"#C9F183","@pea-green-4":"#AFEB47","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-1":"#CEF1F7","@cyan-2":"#B5E8F2","@cyan-3":"#7BDCEF","@cyan-4":"#3BCBE8","@cyan-5":"#29BDDB","@cyan-6":"#0099B8","@cyan-7":"#08768C","@cyan-8":"#055666","@cyan-9":"#003C47","@blue-1":"#D9E8FC","@blue-2":"#C0D9FC","@blue-3":"#81B3F8","@blue-4":"#5F9FF6","@blue-5":"#3384F5","@blue-6":"#1672F3","@blue-7":"#0A5FD6","@blue-8":"#074192","@blue-9":"#002457","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BDA0F3","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-1":"#F9EFCD","@yellow-2":"#F6E5AC","@yellow-3":"#F5DA80","@yellow-4":"#F5D261","@yellow-5":"#F3C52F","@yellow-6":"#ECB604","@yellow-7":"#C99B03","@yellow-8":"#8F6E00","@yellow-9":"#523F00"},colorDarkToken:{"@white":"#000","@black":"#fff","@background-base":"#141414","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#333333","@yuque-grey-4":"#383838","@yuque-grey-5":"#404040","@yuque-grey-6":"rgba(255, 255, 255, 0.26)","@yuque-grey-7":"rgba(255, 255, 255, 0.48)","@yuque-grey-8":"rgba(255, 255, 255, 0.68)","@yuque-grey-9":"rgba(255, 255, 255, 0.88)","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#547718","@pea-green-4":"#678830","@pea-green-5":"#78A52A","@pea-green-6":"#93B851","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-1":"#0C271C","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#69D3A7","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-1":"#123036","@cyan-2":"#254E56","@cyan-3":"#1A6574","@cyan-4":"#1C869B","@cyan-5":"#2297AF","@cyan-6":"#4EA9BC","@cyan-7":"#76B8C6","@cyan-8":"#95CFDB","@cyan-9":"#BFDDE3","@blue-1":"#162841","@blue-2":"#253956","@blue-3":"#1A4075","@blue-4":"#245294","@blue-5":"#2B62B1","@blue-6":"#3B78CE","@blue-7":"#6897D9","@blue-8":"#8DB1E2","@blue-9":"#B5CCED","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3E2867","@purple-4":"#553A88","@purple-5":"#61429A","@purple-6":"#7654B6","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-1":"#3E132C","@magenta-2":"#562541","@magenta-3":"#76194F","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-1":"#391D21","@red-2":"#5B2027","@red-3":"#761924","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@orange-1":"#32261B","@orange-2":"#5B3B20","@orange-3":"#74441B","@orange-4":"#945824","@orange-5":"#B0692B","@orange-6":"#CD7F3C","@orange-7":"#D99F6D","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-1":"#353017","@yellow-2":"#564A25","@yellow-3":"#776118","@yellow-4":"#9C7D1C","@yellow-5":"#C29A19","@yellow-6":"#D2AD38","@yellow-7":"#E8C554","@yellow-8":"#EFD581","@yellow-9":"#EEE1B4"},themeToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green":"#74B602","@pea-green-1":"#E8F7CF","@pea-green-2":"#DCF4B4","@pea-green-3":"#C9F183","@pea-green-4":"#AFEB47","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-1":"#CEF1F7","@cyan-2":"#B5E8F2","@cyan-3":"#7BDCEF","@cyan-4":"#3BCBE8","@cyan-5":"#29BDDB","@cyan-6":"#0099B8","@cyan-7":"#08768C","@cyan-8":"#055666","@cyan-9":"#003C47","@blue-1":"#D9E8FC","@blue-2":"#C0D9FC","@blue-3":"#81B3F8","@blue-4":"#5F9FF6","@blue-5":"#3384F5","@blue-6":"#1672F3","@blue-7":"#0A5FD6","@blue-8":"#074192","@blue-9":"#002457","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BDA0F3","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-1":"#F9EFCD","@yellow-2":"#F6E5AC","@yellow-3":"#F5DA80","@yellow-4":"#F5D261","@yellow-5":"#F3C52F","@yellow-6":"#ECB604","@yellow-7":"#C99B03","@yellow-8":"#8F6E00","@yellow-9":"#523F00","@yuque-color-theme":"#00B96B","@yuque-color-normal":"#D8DAD9","@yuque-color-bg-primary":"#FFFFFF","@yuque-color-bg-secondary":"#FAFAFA","@yuque-color-bg-tertiary":"#F4F5F5","@yuque-color-bg-primary-hover":"#EFF0F0","@yuque-color-bg-primary-hover-light":"#E7E9E8","@yuque-color-bg-blur":"#FAFAFA","@yuque-color-mask-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-border-primary":"#E7E9E8","@yuque-color-border-primary-active":"#00B96B","@yuque-color-border-light":"#F4F5F5","@yuque-color-border-heavy":"#EFF0F0","@yuque-color-cardborder-hover":"#81B3F8","@yuque-color-cardborder-selected":"#3384F5","@yuque-color-sheetborder":"rgba(0, 0, 0, 0.1)","@yuque-color-text-primary":"#262626","@yuque-color-text-body":"#585A5A","@yuque-color-text-caption":"#8A8F8D","@yuque-color-text-disable":"#BEC0BF","@yuque-color-text-link":"#1672F3","@yuque-color-text-link-hover":"#5F9FF6","@yuque-color-icon-primary":"#262626","@yuque-color-icon-secondary":"#8A8F8D","@yuque-color-icon-disable":"#BEC0BF","@yuque-color-icon-hover":"#D8DAD9","@yuque-color-function-success":"#00B96B","@yuque-color-function-info":"#1672F3","@yuque-color-function-warning":"#ECB604","@yuque-color-function-error":"#DF2A3F","@yuque-color-disable-color":"rgba(0, 0, 0, 0.3)"},themeDarkToken:{"@white":"#000","@black":"#fff","@background-base":"#141414","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#333333","@yuque-grey-4":"#383838","@yuque-grey-5":"#404040","@yuque-grey-6":"rgba(255, 255, 255, 0.26)","@yuque-grey-7":"rgba(255, 255, 255, 0.48)","@yuque-grey-8":"rgba(255, 255, 255, 0.68)","@yuque-grey-9":"rgba(255, 255, 255, 0.88)","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#547718","@pea-green-4":"#678830","@pea-green-5":"#78A52A","@pea-green-6":"#93B851","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-1":"#0C271C","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#69D3A7","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-1":"#123036","@cyan-2":"#254E56","@cyan-3":"#1A6574","@cyan-4":"#1C869B","@cyan-5":"#2297AF","@cyan-6":"#4EA9BC","@cyan-7":"#76B8C6","@cyan-8":"#95CFDB","@cyan-9":"#BFDDE3","@blue-1":"#162841","@blue-2":"#253956","@blue-3":"#1A4075","@blue-4":"#245294","@blue-5":"#2B62B1","@blue-6":"#3B78CE","@blue-7":"#6897D9","@blue-8":"#8DB1E2","@blue-9":"#B5CCED","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3E2867","@purple-4":"#553A88","@purple-5":"#61429A","@purple-6":"#7654B6","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-1":"#3E132C","@magenta-2":"#562541","@magenta-3":"#76194F","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-1":"#391D21","@red-2":"#5B2027","@red-3":"#761924","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@orange-1":"#32261B","@orange-2":"#5B3B20","@orange-3":"#74441B","@orange-4":"#945824","@orange-5":"#B0692B","@orange-6":"#CD7F3C","@orange-7":"#D99F6D","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-1":"#353017","@yellow-2":"#564A25","@yellow-3":"#776118","@yellow-4":"#9C7D1C","@yellow-5":"#C29A19","@yellow-6":"#D2AD38","@yellow-7":"#E8C554","@yellow-8":"#EFD581","@yellow-9":"#EEE1B4","@yuque-color-theme":"#29AD76","@yuque-color-normal":"#404040","@yuque-color-bg-primary":"#141414","@yuque-color-bg-secondary":"#1F1F1F","@yuque-color-bg-tertiary":"rgba(255, 255, 255, 0.04)","@yuque-color-bg-primary-hover":"rgba(255, 255, 255, 0.12)","@yuque-color-bg-primary-hover-light":"rgba(255, 255, 255, 0.3)","@yuque-color-bg-blur":"rgba(0, 0, 0, 0.5)","@yuque-color-mask-bg":"rgba(255, 255, 255, 0.68)","@yuque-color-border-primary":"rgba(255, 255, 255, 0.12)","@yuque-color-border-primary-active":"#29AD76","@yuque-color-border-light":"rgba(255, 255, 255, 0.08)","@yuque-color-border-heavy":"rgba(255, 255, 255, 0.12)","@yuque-color-cardborder-hover":"#162841","@yuque-color-cardborder-selected":"#253956","@yuque-color-sheetborder":"rgba(255, 255, 255, 0.12)","@yuque-color-text-primary":"rgba(255, 255, 255, 0.88)","@yuque-color-text-body":"rgba(255, 255, 255, 0.68)","@yuque-color-text-caption":"rgba(255, 255, 255, 0.48)","@yuque-color-text-disable":"rgba(255, 255, 255, 0.26)","@yuque-color-text-link":"#245294","@yuque-color-text-link-hover":"#3B78CE","@yuque-color-icon-primary":"rgba(255, 255, 255, 0.88)","@yuque-color-icon-secondary":"rgba(255, 255, 255, 0.48)","@yuque-color-icon-disable":"rgba(255, 255, 255, 0.26)","@yuque-color-icon-hover":"#404040","@yuque-color-function-success":"#298E64","@yuque-color-function-info":"#245294","@yuque-color-function-warning":"#9C7D1C","@yuque-color-function-error":"#981F2D","@yuque-color-disable-color":"rgba(255, 255, 255, 0.3)"}}},389:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="LeftOutlined";t.a=a.forwardRef(c)},421:function(e,t,n){},436:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(r){return n}}},437:function(e,t,n){},553:function(e,t,n){"use strict";var r=/,?([a-z]),?/gi,a=parseFloat,i=Math,o=i.PI,c=i.min,l=i.max,s=i.pow,u=i.abs,d=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,h=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/gi,f=Array.isArray||function(e){return e instanceof Array};function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)p(e,n)&&(t[n]=m(e[n]));return t}function y(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function g(e){var t=g.ps=g.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout((function(){for(var n in t)p(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])})),t[e]}function v(e,t,n,r){return 1===arguments.length&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function b(){return this.join(",").replace(r,"$1")}function x(e){var t=m(e);return t.toString=b,t}function k(e,t,n,r,a,i,o,c,l){var u=1-l,d=s(u,3),h=s(u,2),f=l*l*l,p=d*t+3*h*l*r+3*u*l*l*i+f*c;return{x:M(d*e+3*h*l*n+3*u*l*l*a+f*o),y:M(p)}}function w(e){var t=N.apply(null,e);return v(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function C(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function E(e,t,n,r,a){return e*(e*(-3*t+9*n-9*r+3*a)+6*t-12*n+6*r)-3*t+3*n}function O(e,t,n,r,a,o,c,l,s){null==s&&(s=1);for(var u=(s=s>1?1:s<0?0:s)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,p=0;p<12;p++){var m=u*d[p]+u,y=E(m,e,n,a,c),g=E(m,t,r,o,l),v=y*y+g*g;f+=h[p]*i.sqrt(v)}return u*f}function P(e,t,n,r,a,i,o,s){if(!(l(e,n)<c(a,o)||c(e,n)>l(a,o)||l(t,r)<c(i,s)||c(t,r)>l(i,s))){var u=(e*r-t*n)*(i-s)-(t-r)*(a*s-i*o),d=(e-n)*(i-s)-(t-r)*(a-o);if(d){var h=M(((e*r-t*n)*(a-o)-(e-n)*(a*s-i*o))/d),f=M(u/d),p=+h.toFixed(2),m=+f.toFixed(2);if(!(p<+c(e,n).toFixed(2)||p>+l(e,n).toFixed(2)||p<+c(a,o).toFixed(2)||p>+l(a,o).toFixed(2)||m<+c(t,r).toFixed(2)||m>+l(t,r).toFixed(2)||m<+c(i,s).toFixed(2)||m>+l(i,s).toFixed(2)))return{x:h,y:f}}}}function M(e){return Math.round(1e11*e)/1e11}function j(e,t,n){if(!function(e,t){return e=v(e),C(t=v(t),e.x,e.y)||C(t,e.x2,e.y)||C(t,e.x,e.y2)||C(t,e.x2,e.y2)||C(e,t.x,t.y)||C(e,t.x2,t.y)||C(e,t.x,t.y2)||C(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(w(e),w(t)))return n?0:[];for(var r=O.apply(0,e),a=O.apply(0,t),i=R(e)?1:~~(r/5)||1,o=R(t)?1:~~(a/5)||1,c=[],l=[],s={},d=n?0:[],h=0;h<i+1;h++){var f=k.apply(0,e.concat(h/i));c.push({x:f.x,y:f.y,t:h/i})}for(h=0;h<o+1;h++)f=k.apply(0,t.concat(h/o)),l.push({x:f.x,y:f.y,t:h/o});for(h=0;h<i;h++)for(var p=0;p<o;p++){var m,y=c[h],g=c[h+1],b=l[p],x=l[p+1],E=u(g.x-y.x)<.01?"y":"x",M=u(x.x-b.x)<.01?"y":"x",j=P(y.x,y.y,g.x,g.y,b.x,b.y,x.x,x.y);if(j){if(s[m=j.x.toFixed(9)+"#"+j.y.toFixed(9)])continue;s[m]=!0;var S=y.t+u((j[E]-y[E])/(g[E]-y[E]))*(g.t-y.t),L=b.t+u((j[M]-b[M])/(x[M]-b[M]))*(x.t-b.t);S>=0&&S<=1&&L>=0&&L<=1&&(n?d++:d.push({x:j.x,y:j.y,t1:S,t2:L}))}}return d}function S(e){var t=g(e);if(t.abs)return x(t.abs);if(f(e)&&f(e&&e[0])||(e=function(e){if(!e)return null;var t=g(e);if(t.arr)return m(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return f(e)&&f(e[0])&&(r=m(e)),r.length||String(e).replace(d,(function(e,t,a){var i=[],o=t.toLowerCase();for(a.replace(h,(function(e,t){t&&i.push(+t)})),"m"==o&&i.length>2&&(r.push([t].concat(i.splice(0,2))),o="l",t="m"==t?"l":"L");i.length>=n[o]&&(r.push([t].concat(i.splice(0,n[o]))),n[o]););})),r.toString=g.toString,t.arr=m(r),r}(e)),!e||!e.length)return[["M",0,0]];var n,r=[],a=0,i=0,o=0,c=0,l=0;"M"==e[0][0]&&(o=a=+e[0][1],c=i=+e[0][2],l++,r[0]=["M",a,i]);for(var s,u,p=l,y=e.length;p<y;p++){if(r.push(s=[]),(n=(u=e[p])[0])!=n.toUpperCase())switch(s[0]=n.toUpperCase(),s[0]){case"A":s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=+u[6]+a,s[7]=+u[7]+i;break;case"V":s[1]=+u[1]+i;break;case"H":s[1]=+u[1]+a;break;case"M":o=+u[1]+a,c=+u[2]+i;default:for(var v=1,k=u.length;v<k;v++)s[v]=+u[v]+(v%2?a:i)}else for(var w=0,C=u.length;w<C;w++)s[w]=u[w];switch(n=n.toUpperCase(),s[0]){case"Z":a=+o,i=+c;break;case"H":a=s[1];break;case"V":i=s[1];break;case"M":o=s[s.length-2],c=s[s.length-1];default:a=s[s.length-2],i=s[s.length-1]}}return r.toString=b,t.abs=x(r),r}function R(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function L(e,t,n,r){return[e,t,n,r,n,r]}function A(e,t,n,r,a,i){var o=1/3,c=2/3;return[o*e+c*n,o*t+c*r,o*a+c*n,o*i+c*r,a,i]}function B(e,t,n,r,a,c,l,s,d,h){var f,m,g=120*o/180,v=o/180*(+a||0),b=[],x=(m=function(e,t,n){return{x:e*i.cos(n)-t*i.sin(n),y:e*i.sin(n)+t*i.cos(n)}},function e(){var t=Array.prototype.slice.call(arguments,0),n=t.join("␀"),r=e.cache=e.cache||{},a=e.count=e.count||[];return p(r,n)?(y(a,n),r[n]):(a.length>=1e3&&delete r[a.shift()],a.push(n),r[n]=m.apply(0,t),r[n])});if(h)S=h[0],R=h[1],M=h[2],j=h[3];else{e=(f=x(e,t,-v)).x,t=f.y;var k=(e-(s=(f=x(s,d,-v)).x))/2,w=(t-(d=f.y))/2,C=k*k/(n*n)+w*w/(r*r);C>1&&(n*=C=i.sqrt(C),r*=C);var E=n*n,O=r*r,P=(c==l?-1:1)*i.sqrt(u((E*O-E*w*w-O*k*k)/(E*w*w+O*k*k))),M=P*n*w/r+(e+s)/2,j=P*-r*k/n+(t+d)/2,S=i.asin(((t-j)/r).toFixed(9)),R=i.asin(((d-j)/r).toFixed(9));(S=e<M?o-S:S)<0&&(S=2*o+S),(R=s<M?o-R:R)<0&&(R=2*o+R),l&&S>R&&(S-=2*o),!l&&R>S&&(R-=2*o)}var L=R-S;if(u(L)>g){var A=R,N=s,D=d;R=S+g*(l&&R>S?1:-1),b=B(s=M+n*i.cos(R),d=j+r*i.sin(R),n,r,a,0,l,N,D,[R,A,M,j])}L=R-S;var I=i.cos(S),T=i.sin(S),_=i.cos(R),q=i.sin(R),z=i.tan(L/4),F=4/3*n*z,Y=4/3*r*z,X=[e,t],G=[e+F*T,t-Y*I],H=[s+F*q,d-Y*_],W=[s,d];if(G[0]=2*X[0]-G[0],G[1]=2*X[1]-G[1],h)return[G,H,W].concat(b);for(var V=[],U=0,Z=(b=[G,H,W].concat(b).join().split(",")).length;U<Z;U++)V[U]=U%2?x(b[U-1],b[U],v).y:x(b[U],b[U+1],v).x;return V}function N(e,t,n,r,a,o,s,d){for(var h,f,p,m,y,g,v,b,x=[],k=[[],[]],w=0;w<2;++w)if(0==w?(f=6*e-12*n+6*a,h=-3*e+9*n-9*a+3*s,p=3*n-3*e):(f=6*t-12*r+6*o,h=-3*t+9*r-9*o+3*d,p=3*r-3*t),u(h)<1e-12){if(u(f)<1e-12)continue;0<(m=-p/f)&&m<1&&x.push(m)}else v=f*f-4*p*h,b=i.sqrt(v),v<0||(0<(y=(-f+b)/(2*h))&&y<1&&x.push(y),0<(g=(-f-b)/(2*h))&&g<1&&x.push(g));for(var C,E=x.length,O=E;E--;)C=1-(m=x[E]),k[0][E]=C*C*C*e+3*C*C*m*n+3*C*m*m*a+m*m*m*s,k[1][E]=C*C*C*t+3*C*C*m*r+3*C*m*m*o+m*m*m*d;return k[0][O]=e,k[1][O]=t,k[0][O+1]=s,k[1][O+1]=d,k[0].length=k[1].length=O+2,{x0:c.apply(0,k[0]),y0:c.apply(0,k[1]),x1:l.apply(0,k[0]),y1:l.apply(0,k[1])}}function D(e){var t=g(e);if(t.curve)return x(t.curve);for(var n=S(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=function(e,t,n){var r,a;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(B.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,a=2*t.y-t.by):(r=t.x,a=t.y),e=["C",r,a].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(A(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(A(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(L(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(L(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(L(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(L(t.x,t.y,t.X,t.Y))}return e},o=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)c[t]="A",e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),d=n.length}},c=[],l="",s="",u=0,d=n.length;u<d;u++){n[u]&&(l=n[u][0]),"C"!=l&&(c[u]=l,u&&(s=c[u-1])),n[u]=i(n[u],r,s),"A"!=c[u]&&"C"==l&&(c[u]="C"),o(n,u);var h=n[u],f=h.length;r.x=h[f-2],r.y=h[f-1],r.bx=a(h[f-4])||r.x,r.by=a(h[f-3])||r.y}return t.curve=x(n),n}e.exports=function(e,t,n){e=D(e),t=D(t);for(var r,a,i,o,c,l,s,u,d,h,f=n?0:[],p=0,m=e.length;p<m;p++){var y=e[p];if("M"==y[0])r=c=y[1],a=l=y[2];else{"C"==y[0]?(d=[r,a].concat(y.slice(1)),r=d[6],a=d[7]):(d=[r,a,r,a,c,l,c,l],r=c,a=l);for(var g=0,v=t.length;g<v;g++){var b=t[g];if("M"==b[0])i=s=b[1],o=u=b[2];else{"C"==b[0]?(h=[i,o].concat(b.slice(1)),i=h[6],o=h[7]):(h=[i,o,i,o,s,u,s,u],i=s,o=u);var x=j(d,h,n);if(n)f+=x;else{for(var k=0,w=x.length;k<w;k++)x[k].segment1=p,x[k].segment2=g,x[k].bez1=d,x[k].bez2=h;f=f.concat(x)}}}}}return f}},569:function(e,t,n){const r=n(436),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}}},570:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},571:function(e,t){const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(a,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const i=new RegExp("^"+r+"$"),o=new RegExp("^[0-9]+$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return i.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return c.test(e)}},572:function(e,t){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:r,scale:r?4:a,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const a=n.modules.size,i=n.modules.data,o=t.getScale(a,r),c=Math.floor((a+2*r.margin)*o),l=r.margin*o,s=[r.color.light,r.color.dark];for(let t=0;t<c;t++)for(let n=0;n<c;n++){let u=4*(t*c+n),d=r.color.light;if(t>=l&&n>=l&&t<c-l&&n<c-l){d=s[i[Math.floor((t-l)/o)*a+Math.floor((n-l)/o)]?1:0]}e[u++]=d.r,e[u++]=d.g,e[u++]=d.b,e[u]=d.a}}},574:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(864))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},575:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(866))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},576:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="CaretDownOutlined";t.a=a.forwardRef(c)},581:function(e,t,n){"use strict";n.r(t),n.d(t,"Editor",(function(){return yt})),n.d(t,"Reader",(function(){return wt}));var r=n(37);n.d(t,"Biz",(function(){return r.d}));var a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(1),s=n.n(l),u=n(16),d=n.n(u),h=(n(245),n(64)),f=(n(133),n(31)),p=n(36),m=n(11),y=n(28),g=n(18),v=n(55),b=n(10),x=n.n(b),k=n(41),w=n(43),C=n.n(w),E=(n(79),n(44)),O=(n(60),n(24)),P=n(22),M=n(6),j=n.n(M),S=n(7),R=n.n(S),L=n(8),A=n.n(L),B=n(9),N=n.n(B),D=n(3),I=n.n(D),T=n(80),_=n.n(T);function q(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}q("/* stylelint-disable */\n");var z=r.i.Board;function F(e){var t=e.viewModel,n=t.diagram,r=t.onProperties,a=t.showProperties,o=t.onSave,c=t.engine,l=t.mini,s=t.readOnly,u=t.onMaximize,d=t.focusMode,h=t.setFocusMode,f=t.material,p=t.boardWebProxy;if(!n||!c)return i.a.createElement("div",{className:"lake-board-toolbar"});var m={diagram:n,mini:l,onSave:o,onProperties:r,readOnly:s,showProperties:a,onMaximize:u,focusMode:d,setFocusMode:h,boardWebProxy:p};return null!=f&&f.onUse&&(m.onMaterialUse=f.onUse),null!=f&&f.onMore&&(m.onMaterialMore=f.onMore),null!=f&&f.onMaximize&&(m.onMaterialMaximize=f.onMaximize),i.a.createElement("div",{className:"lake-board-toolbar"},i.a.createElement(z.Toolbar,m))}F.propTypes={viewModel:c.a.shape({diagram:c.a.object,onProperties:c.a.func,onImageInputChange:c.a.func,showProperties:c.a.bool,mini:c.a.bool,readOnly:c.a.bool,onSave:c.a.func,onMaximize:c.a.func,engine:c.a.object,focusMode:c.a.bool,setFocusMode:c.a.func,material:c.a.object,boardWebProxy:c.a.object})};var Y=r.i.Board;function X(e){var t=e.viewModel,n=t.diagram,r=t.onProperties,a=t.showProperties,o=t.engine,c=t.mini,l=t.boardWebProxy;return n&&o&&!a?i.a.createElement("div",{className:"lake-board-contextual-menu-wrap"},i.a.createElement(Y.ContextualMenu,{diagram:n,mini:c,onProperties:r,boardWebProxy:l})):i.a.createElement("div",{className:"lake-board-contextual-menu-wrap"})}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){var t=e.getBoundingClientRect(),n=t.height;return{width:t.width,height:n}}function W(e){var t=e.diagram,n=e.setDiagram,i=e.model,o=e.container,c=e.mini;Object(a.useEffect)((function(){if(!t){var e=new r.m(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({container:o.current,plugins:[r.u.Board],mode:i.get("mode"),paper:{size:"auto"}},H(o.current)));n(e)}return function(){return t&&t.destroy()}}),[t]),Object(a.useEffect)((function(){var e=o.current,n=new ResizeObserver((function(n){var r=n.find((function(t){return t.target===e})),a=null===e.offsetParent;if(t&&r&&r.contentRect&&!a){var i=H(o.current),l=i.width,s=i.height,u=c?18:0;t.changeSize(l+u,s+u)}}));return n.observe(e),function(){return n.unobserve(e)}}),[t,c])}function V(e){var t=Object(a.useRef)(),n=e.viewModel,r=n.diagram,o=n.setDiagram,c=n.model,l=n.engine,s=n.mini,u=n.focusMode,d=n.setFocusMode;return W({diagram:r,setDiagram:o,model:c,container:t,engine:l,mini:s}),i.a.createElement("div",{ref:t,className:"lake-board-canvas"},i.a.createElement(F,{viewModel:n,focusMode:u,setFocusMode:d}),i.a.createElement(X,{viewModel:n}))}X.propTypes={viewModel:c.a.shape({diagram:c.a.object,onProperties:c.a.func,showProperties:c.a.bool,mini:c.a.bool,engine:c.a.object,boardWebProxy:c.a.object})},q(".lake-board-editor .lake-board-content .lake-board-canvas {\n  width: 100%;\n  height: 100%;\n}\n"),V.defaultProps={viewModel:{}},V.propTypes={viewModel:c.a.shape({model:c.a.object,engine:c.a.object,diagram:c.a.object,setDiagram:c.a.func,mini:c.a.bool,focusMode:c.a.bool,setFocusMode:c.a.func})};var U=Object(a.createContext)({});function Z(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function K(e){return e<=1?"".concat(100*Number(e),"%"):e}function Q(e){return 1===e.length?"0"+e:String(e)}function J(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function $(e){return ee(e)/255}function ee(e){return parseInt(e,16)}var te={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ne(e){var t,n,r,a={r:0,g:0,b:0},i=1,o=null,c=null,l=null,s=!1,u=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(te[e])e=te[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=oe.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=oe.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=oe.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=oe.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=oe.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=oe.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=oe.hex8.exec(e))?{r:ee(n[1]),g:ee(n[2]),b:ee(n[3]),a:$(n[4]),format:t?"name":"hex8"}:(n=oe.hex6.exec(e))?{r:ee(n[1]),g:ee(n[2]),b:ee(n[3]),format:t?"name":"hex"}:(n=oe.hex4.exec(e))?{r:ee(n[1]+n[1]),g:ee(n[2]+n[2]),b:ee(n[3]+n[3]),a:$(n[4]+n[4]),format:t?"name":"hex8"}:!!(n=oe.hex3.exec(e))&&{r:ee(n[1]+n[1]),g:ee(n[2]+n[2]),b:ee(n[3]+n[3]),format:t?"name":"hex"}}(e)),"object"===C()(e)&&(ce(e.r)&&ce(e.g)&&ce(e.b)?(t=e.r,n=e.g,r=e.b,a={r:255*Z(t,255),g:255*Z(n,255),b:255*Z(r,255)},s=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):ce(e.h)&&ce(e.s)&&ce(e.v)?(o=K(e.s),c=K(e.v),a=function(e,t,n){e=6*Z(e,360),t=Z(t,100),n=Z(n,100);var r=Math.floor(e),a=e-r,i=n*(1-t),o=n*(1-a*t),c=n*(1-(1-a)*t),l=r%6;return{r:255*[n,o,i,i,c,n][l],g:255*[c,n,n,o,i,i][l],b:255*[i,i,c,n,n,o][l]}}(e.h,o,c),s=!0,u="hsv"):ce(e.h)&&ce(e.s)&&ce(e.l)&&(o=K(e.s),l=K(e.l),a=function(e,t,n){var r,a,i;if(e=Z(e,360),t=Z(t,100),n=Z(n,100),0===t)a=n,i=n,r=n;else{var o=n<.5?n*(1+t):n+t-n*t,c=2*n-o;r=J(c,o,e+1/3),a=J(c,o,e),i=J(c,o,e-1/3)}return{r:255*r,g:255*a,b:255*i}}(e.h,o,l),s=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(i),{ok:s,format:e.format||u,r:Math.min(255,Math.max(a.r,0)),g:Math.min(255,Math.max(a.g,0)),b:Math.min(255,Math.max(a.b,0)),a:i}}var re="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),ae="[\\s|\\(]+(".concat(re,")[,|\\s]+(").concat(re,")[,|\\s]+(").concat(re,")\\s*\\)?"),ie="[\\s|\\(]+(".concat(re,")[,|\\s]+(").concat(re,")[,|\\s]+(").concat(re,")[,|\\s]+(").concat(re,")\\s*\\)?"),oe={CSS_UNIT:new RegExp(re),rgb:new RegExp("rgb"+ae),rgba:new RegExp("rgba"+ie),hsl:new RegExp("hsl"+ae),hsla:new RegExp("hsla"+ie),hsv:new RegExp("hsv"+ae),hsva:new RegExp("hsva"+ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ce(e){return Boolean(oe.CSS_UNIT.exec(String(e)))}var le=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function se(e){var t=function(e,t,n){e=Z(e,255),t=Z(t,255),n=Z(n,255);var r=Math.max(e,t,n),a=Math.min(e,t,n),i=0,o=r,c=r-a,l=0===r?0:c/r;if(r===a)i=0;else{switch(r){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4}i/=6}return{h:i,s:l,v:o}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function ue(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){var a=[Q(Math.round(e).toString(16)),Q(Math.round(t).toString(16)),Q(Math.round(n).toString(16))];return a.join("")}(t,n,r))}function de(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}function he(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function fe(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function pe(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function me(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=ne(e),a=5;a>0;a-=1){var i=se(r),o=ue(ne({h:he(i,a,!0),s:fe(i,a,!0),v:pe(i,a,!0)}));n.push(o)}n.push(ue(r));for(var c=1;c<=4;c+=1){var l=se(r),s=ue(ne({h:he(l,c),s:fe(l,c),v:pe(l,c)}));n.push(s)}return"dark"===t.theme?le.map((function(e){var r=e.index,a=e.opacity;return ue(de(ne(t.backgroundColor||"#141414"),ne(n[r]),100*a))})):n}var ye={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ge={},ve={};Object.keys(ye).forEach((function(e){ge[e]=me(ye[e]),ge[e].primary=ge[e][5],ve[e]=me(ye[e],{theme:"dark",backgroundColor:"#141414"}),ve[e].primary=ve[e][5]}));var be={};function xe(e,t){}function ke(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var we=new Map;function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):"rc-util-key"}function Ee(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function Oe(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function Pe(e){return Array.from((we.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ke())return null;var n=t.csp,r=t.prepend,a=document.createElement("style");a.setAttribute("data-rc-order",Oe(r)),(null==n?void 0:n.nonce)&&(a.nonce=null==n?void 0:n.nonce),a.innerHTML=e;var i=Ee(t),o=i.firstChild;if(r){if("queue"===r){var c=Pe(i).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute("data-rc-order"))}));if(c.length)return i.insertBefore(a,c[c.length-1].nextSibling),a}i.insertBefore(a,o)}else i.appendChild(a);return a}function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ee(t);return Pe(n).find((function(n){return n.getAttribute(Ce(t))===e}))}function Se(e,t){var n=we.get(e);if(!n||!document.contains(n)){var r=Me("",t),a=r.parentNode;we.set(e,a),a.removeChild(r)}}function Re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Ee(n);Se(r,n);var a,i,o,c=je(t,n);if(c)return(null===(a=n.csp)||void 0===a?void 0:a.nonce)&&c.nonce!==(null===(i=n.csp)||void 0===i?void 0:i.nonce)&&(c.nonce=null===(o=n.csp)||void 0===o?void 0:o.nonce),c.innerHTML!==e&&(c.innerHTML=e),c;var l=Me(e,n);return l.setAttribute(Ce(n),t),l}function Le(e){return"object"===Object(k.a)(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===Object(k.a)(e.icon)||"function"==typeof e.icon)}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}function Be(e){return me(e)[0]}function Ne(e){return e?Array.isArray(e)?e:[e]:[]}var De="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",Ie=["icon","className","onClick","style","primaryColor","secondaryColor"],Te={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},_e=function(e){var t,n,r=e.icon,o=e.className,c=e.onClick,l=e.style,s=e.primaryColor,u=e.secondaryColor,d=Object(v.a)(e,Ie),h=Te;if(s&&(h={primaryColor:s,secondaryColor:u||Be(s)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=Object(a.useContext)(U),n=t.csp;Object(a.useEffect)((function(){Re(e,"@ant-design-icons",{prepend:!0,csp:n})}),[])}(),t=Le(r),n="icon should be icon definiton, but got ".concat(r),function(e,t){!function(e,t,n){t||be[n]||(e(!1,n),be[n]=!0)}(xe,e,t)}(t,"[@ant-design/icons] ".concat(n)),!Le(r))return null;var f=r;return f&&"function"==typeof f.icon&&(f=Object(m.a)(Object(m.a)({},f),{},{icon:f.icon(h.primaryColor,h.secondaryColor)})),function e(t,n,r){return r?i.a.createElement(t.tag,Object(m.a)(Object(m.a)({key:n},Ae(t.attrs)),r),(t.children||[]).map((function(r,a){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(a))}))):i.a.createElement(t.tag,Object(m.a)({key:n},Ae(t.attrs)),(t.children||[]).map((function(r,a){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(a))})))}(f.icon,"svg-".concat(f.name),Object(m.a)({className:o,onClick:c,style:l,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},d))};_e.displayName="IconReact",_e.getTwoToneColors=function(){return Object(m.a)({},Te)},_e.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Te.primaryColor=t,Te.secondaryColor=n||Be(t),Te.calculated=!!n};var qe=_e;function ze(e){var t=Ne(e),n=Object(y.a)(t,2),r=n[0],a=n[1];return qe.setTwoToneColors({primaryColor:r,secondaryColor:a})}var Fe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ze("#1890ff");var Ye=a.forwardRef((function(e,t){var n,r=e.className,i=e.icon,o=e.spin,c=e.rotate,l=e.tabIndex,s=e.onClick,u=e.twoToneColor,d=Object(v.a)(e,Fe),h=a.useContext(U).prefixCls,f=void 0===h?"anticon":h,p=x()(f,(Object(g.a)(n={},"".concat(f,"-").concat(i.name),!!i.name),Object(g.a)(n,"".concat(f,"-spin"),!!o||"loading"===i.name),n),r),b=l;void 0===b&&s&&(b=-1);var k=c?{msTransform:"rotate(".concat(c,"deg)"),transform:"rotate(".concat(c,"deg)")}:void 0,w=Ne(u),C=Object(y.a)(w,2),E=C[0],O=C[1];return a.createElement("span",Object(m.a)(Object(m.a)({role:"img","aria-label":i.name},d),{},{ref:t,tabIndex:b,onClick:s,className:p}),a.createElement(qe,{icon:i,primaryColor:E,secondaryColor:O,style:k}))}));Ye.displayName="AntdIcon",Ye.getTwoToneColor=function(){var e=qe.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Ye.setTwoToneColor=ze;var Xe=Ye,Ge={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},He=function(e,t){return a.createElement(Xe,Object(m.a)(Object(m.a)({},e),{},{ref:t,icon:Ge}))};He.displayName="CaretDownOutlined";var We=a.forwardRef(He),Ve={locale:p.LocaleUtil.getLocale(),translations:{"en-us":{"与编辑一致":"Same as Edition","保存":"Save","折叠":"Collapse","插入主节点":"Insert Root","插入同级":"Insert Sibling","插入图片":"Insert Image","插入子级":"Insert Child","插入链接":"Create Link","撤销":"Undo","格式":"Format","格式面板":"Format Panel","自动适配":"Adaption","重做":"Redo","阅读页配置":"Setting","默认窗口":"Default Viewport"}}};function Ue(e,t){if(!e)return e;var n=Ve.locale,r=Ve.translations[n]||{};return"zh-cn"!==n&&(e=r[e]||e),e.replace(/\{([^\}]+)\}/g,(function(e,n){return t[n]||n}))}q(".lake-diagram-properties-viewport .lake-diagram-control-extra {\n  display: inline-block;\n  width: auto;\n}\n.lake-diagram-properties-viewport .lake-diagram-control-extra .lake-diagram-properties-viewport-selected-name {\n  display: inline-block;\n  padding-left: 8px;\n}\n.lake-diagram-properties-viewport .lake-diagram-control-extra .lake-diagram-properties-viewport-selected {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 30px;\n}\n.lake-diagram-properties-viewport .lake-diagram-control-extra .lake-diagram-properties-viewport-selected .lake-icon {\n  padding: 0 8px;\n}\n.lake-diagram-properties-viewport .lake-diagram-control-extra .lake-diagram-properties-viewport-selected .lake-properties-viewport-dropdown-icon {\n  padding: 0 8px;\n}\n");var Ze=r.i.Properties.Control,Ke={WYSIWYG:{name:Ue("与编辑一致"),icon:"viewport-option-WYSIWYG"},adapt:{name:Ue("自动适配"),icon:"viewport-option-WYSIWYG"}};function Qe(e){var t=e.onChange,n=e.viewportOption,r=Ke[n]||Ke.adapt;return i.a.createElement(Ze,{className:"lake-diagram-properties-viewport",title:Ue("默认窗口"),extra:i.a.createElement(h.a,{trigger:["click"],overlay:i.a.createElement(f.a,{"data-lake_prevent_click_unselect":!0,onClick:function(e){var n=e.key;t(n)}},i.a.createElement(f.a.Item,{className:"lake-diagram-properties-viewport-item",key:"WYSIWYG"},Ke.WYSIWYG.name),i.a.createElement(f.a.Item,{className:"lake-diagram-properties-viewport-item",key:"adapt"},Ke.adapt.name)),placement:"bottomRight"},i.a.createElement("div",{className:"lake-diagram-properties-viewport-selected"},i.a.createElement("span",{className:"lake-diagram-properties-viewport-selected-name"},r.name),i.a.createElement(We,{className:"lake-properties-viewport-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}Qe.defaultProps={viewportOption:"adapt",onChange:function(){}},Qe.propTypes={viewportOption:c.a.string,onChange:c.a.func.isRequired},Qe.key="ViewportControl";var Je=r.i.Board;function $e(e){var t=e.viewModel,n=t.diagram,r=t.propertiesWidth,o=t.onProperties,c=t.model,l=t.engine,s=Object(a.useState)(c.get("viewportOption")),u=d()(s,2),h=u[0],f=u[1];return i.a.createElement("div",{className:"lake-board-properties",style:{width:"".concat(r,"px"),flex:"none"}},n&&i.a.createElement(Je.Properties,{diagram:n,menus:[{name:Ue("阅读页配置"),tabKey:"global",condition:function(e){return 0===e.length},controls:[{Control:Qe,props:{onChange:function(e){c&&c.set("viewportOption",e),l&&l.emit("change"),f(e)},viewportOption:h}}]}],onClose:function(){o()}}))}$e.defaultProps={viewModel:{}},$e.propTypes={viewModel:c.a.shape({diagram:c.a.object,propertiesWidth:c.a.number,onProperties:c.a.func,model:c.a.object,engine:c.a.object})},q("/* stylelint-disable */\n.lake-board-material-lib-maxi-modal-container {\n  text-align: center;\n}\n.lake-board-material-lib-maxi-modal-container .ant-modal-content {\n  box-shadow: none;\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-board-material-lib-maxi-modal-container .ant-modal-close {\n  display: none;\n}\n.lake-board-material-lib-maxi-modal-container .ant-modal-footer {\n  display: none;\n}\n");var et=r.i.Board;function tt(e){var t=e.viewModel,n=t.diagram,r=t.material,a=t.boardWebProxy,o=t.showMaterialModal,c=t.materialScrollToName,l={diagram:n,boardWebProxy:a};return null!=r&&r.onUse&&(l.onUse=r.onUse),null!=r&&r.onClose&&(l.onClose=r.onClose),c&&(l.scrollToName=c),i.a.createElement(E.a,{className:"lake-board-material-lib-maxi-modal-container",visible:o,width:"auto",zIndex:1031,centered:!0},i.a.createElement(et.MaterialLibMaxi,l))}tt.defaultProps={viewModel:{}},tt.propTypes={viewModel:c.a.shape({diagram:c.a.object,material:c.a.object,boardWebProxy:c.a.object,showMaterialModal:c.a.bool,materialScrollToName:c.a.oneOfType([c.a.string,c.a.number])})};var nt=r.i.Board;function rt(e){var t=e.viewModel,n=t.diagram,r=t.material,a={diagram:n,boardWebProxy:t.boardWebProxy};return null!=r&&r.onAdd&&(a.onAddMaterial=r.onAdd),i.a.createElement(nt.ContextMenu,a)}rt.defaultProps={viewModel:{}},rt.propTypes={viewModel:c.a.shape({diagram:c.a.object,material:c.a.object,boardWebProxy:c.a.object})},q("/* stylelint-disable */\n.lake-board-editor {\n  width: 100%;\n  height: 100%;\n}\n.lake-board-editor .lake-board-content {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.lake-board-editor .lake-board-content .lake-board-canvas-wrapper {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n}\n.lake-board-editor .lake-board-content .lake-board-canvas-wrapper.lake-board-has-properties {\n  width: calc(100% - 284px);\n  margin-right: 284px;\n}\n.lake-board-editor .lake-board-content .lake-board-properties-wrapper {\n  width: 284px;\n  height: 100%;\n  position: absolute;\n  right: 0;\n}\n.lake-board-editor .lake-board-content .lake-board-properties-wrapper .lake-board-properties {\n  height: 100%;\n}\n");var at=r.i.LinkEditor,it=r.i.Note;function ot(e){var t=e.viewModel,n=t.showProperties,r=t.diagram,a=t.focusMode,o=t.setFocusMode,c=t.showMaterialModal;return i.a.createElement("div",{className:"lake-board-editor"},i.a.createElement("div",{className:"lake-board-content"},i.a.createElement("div",{className:x()("lake-board-canvas-wrapper",{"lake-board-has-properties":n})},i.a.createElement(V,{viewModel:t,focusMode:a,setFocusMode:o}),r&&i.a.createElement(rt,{viewModel:t})),r&&n&&i.a.createElement("div",{className:"lake-board-properties-wrapper"},i.a.createElement($e,{viewModel:t}))),r&&i.a.createElement(at,{diagram:r}),r&&i.a.createElement(it.Editor,{diagram:r}),r&&c&&i.a.createElement(tt,{viewModel:t}))}ot.defaultProps={viewModel:{}},ot.propTypes={viewModel:c.a.shape({diagramData:c.a.object,engine:c.a.object,diagram:c.a.object,showProperties:c.a.bool,focusMode:c.a.bool,setFocusMode:c.a.func,showMaterialModal:c.a.bool})};var ct=r.d.exportData,lt=r.d.importData,st=r.d.onBeforeSave,ut=function(e){A()(n,_.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I()(e);if(t){var a=I()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N()(this,n)}}(n);function n(e){var a,i=e.diagram,o=e.model,c=e.uploader;j()(this,n),a=t.call(this);var l=new r.p.Event;return a.model=o,a.diagram=i,a.uploader=c,a.eventHelper=l,l.bind(i,"aftercommandexecute",(function(e){var t=e.isModelChange,n=e.commandName,r=e.useTime;t&&a.emit("change"),a.emit("commandEnd",n,r)})),a}return R()(n,[{key:"save",value:function(){this.emit("save")}},{key:"setValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.diagram,n=this.model,r=this.uploader,a=e.diagramData,i=e.viewportOption,o=e.viewportSetting;a&&(n.set("diagramData",a),t.clear(),lt({data:a,diagram:t,uploader:r})),i&&n.set("viewportOption",i),o&&"object"===C()(o)&&(n.set("viewportSetting",o),t.viewport.set(o))}},{key:"getValue",value:function(){var e=this.model;return e.set("diagramData",this.getDiagramData()),e.set("viewportSetting",this.getViewportSetting()),e.set("text",this.getText()),e.set("graphicsBBox",this.getGraphicsBBox()),e.export()}},{key:"getGraphicsBBox",value:function(){return this.diagram.rootGroup.getBBox()}},{key:"getViewportSetting",value:function(){return this.diagram.viewport.toObject()}},{key:"getDiagramData",value:function(){var e=this.diagram;return ct(e)}},{key:"getMeta",value:function(){return{cellCount:this.diagram.getCells().length}}},{key:"getHtml",value:function(){return this.diagram?this.diagram.exporter.html():"<div>LakeBoard</div>"}},{key:"getText",value:function(){return this.diagram?this.diagram.exporter.getText():"LakeBoard"}},{key:"download",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jpeg",t=arguments.length>1?arguments[1]:void 0,n=this.diagram;return n.exporter.download(e,t)}},{key:"canvas",value:function(){var e,t=this.diagram;return(e=t.exporter).canvas.apply(e,arguments)}},{key:"onBeforeSave",value:function(){return st(this,this.uploader)}},{key:"destroy",value:function(){this.diagram=void 0,this.uploader=void 0,this.eventHelper.destroy(),this.destroyed=!0}}]),n}();function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=r.d.uploadImage;function pt(e){var t=e.file,n=e.uploader,r=e.diagram,a=e.from,i=e.x,o=e.y,c=e.width,l=e.height;return new Promise((function(e){ft({file:t,uploader:n,enable:function(){return r.command.enable("MindmapAttachImage")||r.command.enable("InsertImage")},onTemporaryOnLoad:function(t){var n=r.selector.selections;"clipboard"===a&&(t.firstInsertRatio=1/window.devicePixelRatio),1===n.length&&n[0].isMindmap?r.command.execute("MindmapAttachImage",{image:t}):r.command.execute("InsertImage",{image:t,x:i,y:o,width:c,height:l}),e(t)},onCompleted:function(e){var t=e.hash,n=e.cdn;r.getCells().filter((function(e){var n,r,a;return e.isImage&&(null===(n=e.model)||void 0===n||null===(r=n.image)||void 0===r||null===(a=r.uploadInfo)||void 0===a?void 0:a.hash)===t})).forEach((function(e){e.updateModel({image:{src:n}})}))}})}))}var mt=r.d.Model;function yt(e){var t=function(e,t){var n,r=e.onLoad,o=e.uploader,c=e.mini,l=void 0!==c&&c,s=e.onMaximize,u=e.boardWebProxy,h=Object(a.useState)(null),f=d()(h,2),p=f[0],m=f[1],y=Object(a.useState)(!1),g=d()(y,2),v=g[0],b=g[1],x=Object(a.useState)(null),k=d()(x,2),w=k[0],C=k[1],E=Object(a.useState)(!1),M=d()(E,2),j=M[0],S=M[1],R=Object(a.useState)(!1),L=d()(R,2),A=L[0],B=L[1],N=Object(a.useState)(null),D=d()(N,2),I=D[0],T=D[1];function _(){b(!v),setTimeout((function(){window.dispatchEvent(new Event("resize"))}))}return null!=u&&u.material&&(n={onAdd:function(e){O.a.success(i.a.createElement("span",null,i.a.createElement("span",null,"素材添加成功！"),i.a.createElement("a",{onClick:function(){e&&(T("personal"),B(!0))}},"查看"))),B(!1)},onUse:function(){B(!1)},onMore:function(e){T(e),B(!0)},onClose:function(){B(!1)},onMaximize:function(){T(null),B(!0)}}),t.set("mode","edit"),Object(a.useEffect)((function(){if(p){var e=new ut({diagram:p,model:t,uploader:o});return C(e),r(e),function(){return e.destroy()}}}),[p]),Object(a.useEffect)((function(){function e(e){pt(ht(ht({},e),{},{file:e.files[0],uploader:o,diagram:p}))}if(p)return p.on("importimage",e),function(){return p.off("importimage",e)}}),[p]),Object(a.useEffect)((function(){function e(e){(function(e){return P.ua.macos?e.metaKey:e.ctrlKey})(e)&&("s"===e.key?(e.preventDefault(),w.save()):"."===e.key&&(e.preventDefault(),S((function(e){return!e}))))}return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[w,_]),Object(a.useEffect)((function(){function e(e){if(!o.isCompleted())return e.preventDefault(),e.returnValue="仍有图片正在上传中，是否确认关闭？",""}return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[w]),{model:t,engine:w,uploader:o,boardWebProxy:u,material:n,onImageInputChange:function(e){pt({file:e.nativeEvent.target.files[0],uploader:o,diagram:p}),e.nativeEvent.target.value=null},onMaximize:s,onSave:function(){w.save()},onProperties:_,materialScrollToName:I,setMaterialScrollToName:T,diagram:p,setDiagram:m,mini:l,showMaterialModal:A,setShowMaterialModal:B,showProperties:!l&&v,setShowProperties:b,focusMode:j,setFocusMode:S}}(e,Object(a.useMemo)((function(){return new mt}),[]));return i.a.createElement(ot,{viewModel:t})}function gt(e){var t=e.viewModel,n=Object(a.useRef)();return W({diagram:t.diagram,setDiagram:t.setDiagram,model:t.model,container:n,engine:t.engine,mini:t.mini}),i.a.createElement("div",{ref:n,className:"lake-board-canvas"},i.a.createElement(F,{viewModel:t}))}yt.defaultProps={data:{},onLoad:function(){},boardWebProxy:null},yt.propTypes={data:c.a.shape({diagramData:c.a.object}),onLoad:c.a.func,uploader:c.a.object.isRequired,boardWebProxy:c.a.object},q(".lake-board-reader .lake-board-content .lake-board-canvas {\n  width: 100%;\n  height: 100%;\n  user-select: none;\n}\n"),gt.defaultProps={viewModel:{},contentContainer:{}},gt.propTypes={viewModel:c.a.shape({diagram:c.a.object,setDiagram:c.a.func,model:c.a.object,engine:c.a.object,mini:c.a.bool}),contentContainer:c.a.object.isRequired},q("/* stylelint-disable */\n.lake-board-reader {\n  width: 100%;\n  height: 100%;\n}\n.lake-board-reader .lake-board-content {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.lake-board-reader .lake-board-content .lake-board-canvas-wrapper {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n}\n");var vt=r.i.Note,bt=r.i.Board;function xt(e){var t=e.viewModel,n=t.diagram;return i.a.createElement("div",{className:"lake-board-reader"},i.a.createElement("div",{className:"lake-board-content"},i.a.createElement("div",{className:"lake-board-canvas-wrapper"},i.a.createElement(gt,{viewModel:t}),n&&i.a.createElement(bt.ContextMenu,{diagram:n}))),n&&i.a.createElement(vt.Reader,{diagram:n}))}xt.defaultProps={viewModel:{}},xt.propTypes={viewModel:c.a.shape({diagramData:c.a.object,diagram:c.a.object})};var kt=r.d.Model;function wt(e){var t,n,r,o,c,l,s,u,h,f,p,m,y,g=(n=(t=e).onLoad,r=t.mini,o=t.onMaximize,c=Object(a.useMemo)((function(){return new kt})),l=Object(a.useState)(null),s=d()(l,2),u=s[0],h=s[1],f=Object(a.useState)(null),m=(p=d()(f,2))[0],y=p[1],c.set("mode","read"),Object(a.useEffect)((function(){if(u){var e=new ut({diagram:u,model:c});return y(e),n(e),function(){return e.destroy()}}}),[u]),{model:c,onMaximize:o,mini:r,engine:m,setEngine:y,diagram:u,setDiagram:h,readOnly:!0});return i.a.createElement(xt,{viewModel:g})}wt.defaultProps={data:{},onLoad:function(){}},wt.propTypes={data:c.a.shape({diagramData:c.a.object}),onLoad:c.a.func}},584:function(e,t,n){},612:function(e,t,n){},64:function(e,t,n){"use strict";n(501);var r=n(134),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(10),s=n.n(l),u=n(59),d=n.n(u),h=["className","overlayClassName"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.className,a=e.overlayClassName,o=g(e,h);return i.a.createElement(r.a,y({className:s()(n,"larkui-dropdown-trigger"),overlayClassName:s()(a,"larkui-dropdown"),ref:t},o))}));v.propTypes=p(p({},r.a.DropDownProps),{},{className:c.a.string,overlayClassName:c.a.string}),d()(v,r.a);var b=v,x=["className","overlayClassName","overlay","children"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function O(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var P=i.a.forwardRef((function(e,t){var n=e.className,a=e.overlayClassName,o=e.overlay,c=e.children,l=O(e,x),u=o?o.props:{};return i.a.createElement(r.a.Button,E({className:s()(n,"larkui-dropdown-trigger"),overlay:i.a.cloneElement(o,{className:s()(u.className,a,"larkui-dropdown-menu")}),ref:t},l),c)}));P.propTypes=w(w({},r.a.DropdownButtonProps),{},{className:c.a.string,overlayClassName:c.a.string,overlay:c.a.node,children:c.a.any}),d()(P,r.a.Button);var M=P,j=n(575),S=n.n(j),R=n(574),L=n.n(R),A=n(238),B=n(31),N=n(23);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}var I=function(e){var t=e.className,n=e.overlayClassName,r=e.currentValue,a=e.menus,o=e.disableMenus,c=void 0===o?[]:o,l=e.disableTip,u=e.handleChange,d=e.triggerPrefix,h=a.find((function(e){return e.value===r}));return i.a.createElement(b,D({},e,{trigger:["click"],className:s()("larkui-dropdown-selector",t),overlayClassName:s()("larkui-dropdown-selector-menu",n),overlay:i.a.createElement(B.a,{selectedKeys:[r]},a.map((function(e){var t=c.some((function(t){return t.value===e.value})),n=i.a.createElement("span",{className:"larkui-dropdown-selector-option"},i.a.createElement("span",{className:"larkui-dropdown-selector-option-name"},e.name),e.value===r&&i.a.createElement("span",{className:"larkui-dropdown-selector-option-checked"},i.a.createElement(L.a,null)));return i.a.createElement(B.a.Item,{key:e.value,disabled:t,onClick:function(){u(e.value)}},t&&l?i.a.createElement(N.a,{title:l,placement:"right"},n):n)})),e.externalActions&&i.a.createElement(B.a.Divider,null),e.externalActions&&e.externalActions())}),i.a.createElement("span",{className:"larkui-dropdown-selector-trigger"},i.a.createElement("span",null,d),i.a.createElement("span",null,h?h.name:Object(A.a)("请选择")),i.a.createElement("span",{className:"larkui-dropdown-selector-trigger-icon"},i.a.createElement(S.a,null))))};I.propTypes={className:c.a.string,overlayClassName:c.a.string,currentValue:c.a.string.isRequired,menus:c.a.arrayOf(c.a.shape({name:c.a.string.isRequired,value:c.a.string.isRequired})).isRequired,disableMenus:c.a.array,disableTip:c.a.node,handleChange:c.a.func.isRequired,externalActions:c.a.func,triggerPrefix:c.a.node};var T=I;b.Selector=T,b.Button=M;t.a=b},662:function(e,t,n){var r=n(99);function a(e){return Math.min(1,Math.max(0,e))}function i(e){var t=r(e).toHsl();return 0===t.h?t.s=.2:t.h>255?t.s=.7:t.s=.9,t.l=.4,r(t).toHexString()}function o(e){var t=r(e).toHsl().l;return t>.9&&t<1?.1:t>.8&&t<.9?.2:t>.7&&t<.8?.3:t>.6&&t<.7?.4:t>.5&&t<.6?.5:t>.4&&t<.5?.6:t>.3&&t<.4?.7:t>.2&&t<.3?.8:t<.2?.9:.5}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;"string"==typeof n&&n.endsWith("%")&&(n=parseInt(n,10)/100);var a=r(e).toRgb(),i=r(t).toRgb(),o=2*n-1,c=a.a-i.a,l=((o*c==-1?o:(o+c)/(1+o*c))+1)/2,s=1-l,u={r:a.r*l+i.r*s,g:a.g*l+i.g*s,b:a.b*l+i.b*s,a:a.a*n+i.a*(1-n)};return r(u).toRgbString()}e.exports={toLight:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=r(e).toHsl();return"white"===r(n).toName()||"black"===r(n).toName()?"#ffffff":(n.l+=t/100,n.l=a(n.l),r(n).toHexString())},toDark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=r(e).toHsl();return"white"===r(n).toName()||"black"===r(n).toName()?"#000000":(n.l-=t/100,n.l=a(n.l),r(n).toHexString())},fade:function(e,t){return"string"==typeof t&&t.endsWith("%")&&(t=parseInt(t,10)/100),(e=r(e)).setAlpha(t).toRgbString()},fadeout:function(e,t){var n=r(e).toHsl();return n.a-=t/100,n.a=a(n.a),r(n).toRgbString()},mix:c,autoDark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#141414",n=o(e),a=i(e);return r(c(a,t,n)).toHexString()},reverseL:function(e){var t=r(e).toHsl();return t.l=1-t.l,r(t).toHexString()}}},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var r={};n.r(r),n.d(r,"create",(function(){return s})),n.d(r,"fromMat4",(function(){return u})),n.d(r,"clone",(function(){return d})),n.d(r,"copy",(function(){return h})),n.d(r,"fromValues",(function(){return f})),n.d(r,"set",(function(){return p})),n.d(r,"identity",(function(){return m})),n.d(r,"transpose",(function(){return y})),n.d(r,"invert",(function(){return g})),n.d(r,"adjoint",(function(){return v})),n.d(r,"determinant",(function(){return b})),n.d(r,"multiply",(function(){return x})),n.d(r,"translate",(function(){return k})),n.d(r,"rotate",(function(){return w})),n.d(r,"scale",(function(){return C})),n.d(r,"fromTranslation",(function(){return E})),n.d(r,"fromRotation",(function(){return O})),n.d(r,"fromScaling",(function(){return P})),n.d(r,"fromMat2d",(function(){return M})),n.d(r,"fromQuat",(function(){return j})),n.d(r,"normalFromMat4",(function(){return S})),n.d(r,"projection",(function(){return R})),n.d(r,"str",(function(){return L})),n.d(r,"frob",(function(){return A})),n.d(r,"add",(function(){return B})),n.d(r,"subtract",(function(){return N})),n.d(r,"multiplyScalar",(function(){return D})),n.d(r,"multiplyScalarAndAdd",(function(){return I})),n.d(r,"exactEquals",(function(){return T})),n.d(r,"equals",(function(){return _})),n.d(r,"mul",(function(){return q})),n.d(r,"sub",(function(){return z}));var a={};n.r(a),n.d(a,"create",(function(){return F})),n.d(a,"clone",(function(){return Y})),n.d(a,"fromValues",(function(){return X})),n.d(a,"copy",(function(){return G})),n.d(a,"set",(function(){return H})),n.d(a,"add",(function(){return W})),n.d(a,"subtract",(function(){return V})),n.d(a,"multiply",(function(){return U})),n.d(a,"divide",(function(){return Z})),n.d(a,"ceil",(function(){return K})),n.d(a,"floor",(function(){return Q})),n.d(a,"min",(function(){return J})),n.d(a,"max",(function(){return $})),n.d(a,"round",(function(){return ee})),n.d(a,"scale",(function(){return te})),n.d(a,"scaleAndAdd",(function(){return ne})),n.d(a,"distance",(function(){return re})),n.d(a,"squaredDistance",(function(){return ae})),n.d(a,"length",(function(){return ie})),n.d(a,"squaredLength",(function(){return oe})),n.d(a,"negate",(function(){return ce})),n.d(a,"inverse",(function(){return le})),n.d(a,"normalize",(function(){return se})),n.d(a,"dot",(function(){return ue})),n.d(a,"cross",(function(){return de})),n.d(a,"lerp",(function(){return he})),n.d(a,"random",(function(){return fe})),n.d(a,"transformMat2",(function(){return pe})),n.d(a,"transformMat2d",(function(){return me})),n.d(a,"transformMat3",(function(){return ye})),n.d(a,"transformMat4",(function(){return ge})),n.d(a,"rotate",(function(){return ve})),n.d(a,"angle",(function(){return be})),n.d(a,"zero",(function(){return xe})),n.d(a,"str",(function(){return ke})),n.d(a,"exactEquals",(function(){return we})),n.d(a,"equals",(function(){return Ce})),n.d(a,"len",(function(){return Oe})),n.d(a,"sub",(function(){return Pe})),n.d(a,"mul",(function(){return Me})),n.d(a,"div",(function(){return je})),n.d(a,"dist",(function(){return Se})),n.d(a,"sqrDist",(function(){return Re})),n.d(a,"sqrLen",(function(){return Le})),n.d(a,"forEach",(function(){return Ae}));var i={};n.r(i),n.d(i,"create",(function(){return Be})),n.d(i,"clone",(function(){return Ne})),n.d(i,"length",(function(){return De})),n.d(i,"fromValues",(function(){return Ie})),n.d(i,"copy",(function(){return Te})),n.d(i,"set",(function(){return _e})),n.d(i,"add",(function(){return qe})),n.d(i,"subtract",(function(){return ze})),n.d(i,"multiply",(function(){return Fe})),n.d(i,"divide",(function(){return Ye})),n.d(i,"ceil",(function(){return Xe})),n.d(i,"floor",(function(){return Ge})),n.d(i,"min",(function(){return He})),n.d(i,"max",(function(){return We})),n.d(i,"round",(function(){return Ve})),n.d(i,"scale",(function(){return Ue})),n.d(i,"scaleAndAdd",(function(){return Ze})),n.d(i,"distance",(function(){return Ke})),n.d(i,"squaredDistance",(function(){return Qe})),n.d(i,"squaredLength",(function(){return Je})),n.d(i,"negate",(function(){return $e})),n.d(i,"inverse",(function(){return et})),n.d(i,"normalize",(function(){return tt})),n.d(i,"dot",(function(){return nt})),n.d(i,"cross",(function(){return rt})),n.d(i,"lerp",(function(){return at})),n.d(i,"hermite",(function(){return it})),n.d(i,"bezier",(function(){return ot})),n.d(i,"random",(function(){return ct})),n.d(i,"transformMat4",(function(){return lt})),n.d(i,"transformMat3",(function(){return st})),n.d(i,"transformQuat",(function(){return ut})),n.d(i,"rotateX",(function(){return dt})),n.d(i,"rotateY",(function(){return ht})),n.d(i,"rotateZ",(function(){return ft})),n.d(i,"angle",(function(){return pt})),n.d(i,"zero",(function(){return mt})),n.d(i,"str",(function(){return yt})),n.d(i,"exactEquals",(function(){return gt})),n.d(i,"equals",(function(){return vt})),n.d(i,"sub",(function(){return bt})),n.d(i,"mul",(function(){return xt})),n.d(i,"div",(function(){return kt})),n.d(i,"dist",(function(){return wt})),n.d(i,"sqrDist",(function(){return Ct})),n.d(i,"len",(function(){return Et})),n.d(i,"sqrLen",(function(){return Ot})),n.d(i,"forEach",(function(){return Pt}));var o=1e-6,c="undefined"!=typeof Float32Array?Float32Array:Array,l=Math.random;Math.PI;function s(){var e=new c(9);return c!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function d(e){var t=new c(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function f(e,t,n,r,a,i,o,l,s){var u=new c(9);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u[6]=o,u[7]=l,u[8]=s,u}function p(e,t,n,r,a,i,o,c,l,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=c,e[7]=l,e[8]=s,e}function m(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function y(e,t){if(e===t){var n=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function g(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],l=t[6],s=t[7],u=t[8],d=u*o-c*s,h=-u*i+c*l,f=s*i-o*l,p=n*d+r*h+a*f;return p?(p=1/p,e[0]=d*p,e[1]=(-u*r+a*s)*p,e[2]=(c*r-a*o)*p,e[3]=h*p,e[4]=(u*n-a*l)*p,e[5]=(-c*n+a*i)*p,e[6]=f*p,e[7]=(-s*n+r*l)*p,e[8]=(o*n-r*i)*p,e):null}function v(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],l=t[6],s=t[7],u=t[8];return e[0]=o*u-c*s,e[1]=a*s-r*u,e[2]=r*c-a*o,e[3]=c*l-i*u,e[4]=n*u-a*l,e[5]=a*i-n*c,e[6]=i*s-o*l,e[7]=r*l-n*s,e[8]=n*o-r*i,e}function b(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],c=e[6],l=e[7],s=e[8];return t*(s*i-o*l)+n*(-s*a+o*c)+r*(l*a-i*c)}function x(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],h=n[0],f=n[1],p=n[2],m=n[3],y=n[4],g=n[5],v=n[6],b=n[7],x=n[8];return e[0]=h*r+f*o+p*s,e[1]=h*a+f*c+p*u,e[2]=h*i+f*l+p*d,e[3]=m*r+y*o+g*s,e[4]=m*a+y*c+g*u,e[5]=m*i+y*l+g*d,e[6]=v*r+b*o+x*s,e[7]=v*a+b*c+x*u,e[8]=v*i+b*l+x*d,e}function k(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],h=n[0],f=n[1];return e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=c,e[5]=l,e[6]=h*r+f*o+s,e[7]=h*a+f*c+u,e[8]=h*i+f*l+d,e}function w(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],h=Math.sin(n),f=Math.cos(n);return e[0]=f*r+h*o,e[1]=f*a+h*c,e[2]=f*i+h*l,e[3]=f*o-h*r,e[4]=f*c-h*a,e[5]=f*l-h*i,e[6]=s,e[7]=u,e[8]=d,e}function C(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function E(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function O(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function P(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function M(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function j(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,c=r+r,l=a+a,s=n*o,u=r*o,d=r*c,h=a*o,f=a*c,p=a*l,m=i*o,y=i*c,g=i*l;return e[0]=1-d-p,e[3]=u-g,e[6]=h+y,e[1]=u+g,e[4]=1-s-p,e[7]=f-m,e[2]=h-y,e[5]=f+m,e[8]=1-s-d,e}function S(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],l=t[6],s=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],y=t[14],g=t[15],v=n*c-r*o,b=n*l-a*o,x=n*s-i*o,k=r*l-a*c,w=r*s-i*c,C=a*s-i*l,E=u*m-d*p,O=u*y-h*p,P=u*g-f*p,M=d*y-h*m,j=d*g-f*m,S=h*g-f*y,R=v*S-b*j+x*M+k*P-w*O+C*E;return R?(R=1/R,e[0]=(c*S-l*j+s*M)*R,e[1]=(l*P-o*S-s*O)*R,e[2]=(o*j-c*P+s*E)*R,e[3]=(a*j-r*S-i*M)*R,e[4]=(n*S-a*P+i*O)*R,e[5]=(r*P-n*j-i*E)*R,e[6]=(m*C-y*w+g*k)*R,e[7]=(y*x-p*C-g*b)*R,e[8]=(p*w-m*x+g*v)*R,e):null}function R(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function L(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function A(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function B(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function N(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function D(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function I(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function T(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function _(e,t){var n=e[0],r=e[1],a=e[2],i=e[3],c=e[4],l=e[5],s=e[6],u=e[7],d=e[8],h=t[0],f=t[1],p=t[2],m=t[3],y=t[4],g=t[5],v=t[6],b=t[7],x=t[8];return Math.abs(n-h)<=o*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=o*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-p)<=o*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-m)<=o*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-y)<=o*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-g)<=o*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(s-v)<=o*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-b)<=o*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(d-x)<=o*Math.max(1,Math.abs(d),Math.abs(x))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var q=x,z=N;function F(){var e=new c(2);return c!=Float32Array&&(e[0]=0,e[1]=0),e}function Y(e){var t=new c(2);return t[0]=e[0],t[1]=e[1],t}function X(e,t){var n=new c(2);return n[0]=e,n[1]=t,n}function G(e,t){return e[0]=t[0],e[1]=t[1],e}function H(e,t,n){return e[0]=t,e[1]=n,e}function W(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function V(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function U(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function Z(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function K(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Q(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function J(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function $(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function ee(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function te(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function ne(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function re(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function ae(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function ie(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function oe(e){var t=e[0],n=e[1];return t*t+n*n}function ce(e,t){return e[0]=-t[0],e[1]=-t[1],e}function le(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function se(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function ue(e,t){return e[0]*t[0]+e[1]*t[1]}function de(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function he(e,t,n,r){var a=t[0],i=t[1];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e}function fe(e,t){t=t||1;var n=2*l()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function pe(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a,e[1]=n[1]*r+n[3]*a,e}function me(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a+n[4],e[1]=n[1]*r+n[3]*a+n[5],e}function ye(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[3]*a+n[6],e[1]=n[1]*r+n[4]*a+n[7],e}function ge(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e}function ve(e,t,n,r){var a=t[0]-n[0],i=t[1]-n[1],o=Math.sin(r),c=Math.cos(r);return e[0]=a*c-i*o+n[0],e[1]=a*o+i*c+n[1],e}function be(e,t){var n=e[0],r=e[1],a=t[0],i=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(a*a+i*i),c=o&&(n*a+r*i)/o;return Math.acos(Math.min(Math.max(c,-1),1))}function xe(e){return e[0]=0,e[1]=0,e}function ke(e){return"vec2("+e[0]+", "+e[1]+")"}function we(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ce(e,t){var n=e[0],r=e[1],a=t[0],i=t[1];return Math.abs(n-a)<=o*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=o*Math.max(1,Math.abs(r),Math.abs(i))}var Ee,Oe=ie,Pe=V,Me=U,je=Z,Se=re,Re=ae,Le=oe,Ae=(Ee=F(),function(e,t,n,r,a,i){var o,c;for(t||(t=2),n||(n=0),c=r?Math.min(r*t+n,e.length):e.length,o=n;o<c;o+=t)Ee[0]=e[o],Ee[1]=e[o+1],a(Ee,Ee,i),e[o]=Ee[0],e[o+1]=Ee[1];return e});function Be(){var e=new c(3);return c!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ne(e){var t=new c(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function De(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Ie(e,t,n){var r=new c(3);return r[0]=e,r[1]=t,r[2]=n,r}function Te(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function _e(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function qe(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function ze(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Fe(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Ye(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Xe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Ge(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function He(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function We(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Ve(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Ue(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ze(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Ke(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)}function Qe(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function Je(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function $e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function et(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function tt(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function nt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rt(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],c=n[1],l=n[2];return e[0]=a*l-i*c,e[1]=i*o-r*l,e[2]=r*c-a*o,e}function at(e,t,n,r){var a=t[0],i=t[1],o=t[2];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e}function it(e,t,n,r,a,i){var o=i*i,c=o*(2*i-3)+1,l=o*(i-2)+i,s=o*(i-1),u=o*(3-2*i);return e[0]=t[0]*c+n[0]*l+r[0]*s+a[0]*u,e[1]=t[1]*c+n[1]*l+r[1]*s+a[1]*u,e[2]=t[2]*c+n[2]*l+r[2]*s+a[2]*u,e}function ot(e,t,n,r,a,i){var o=1-i,c=o*o,l=i*i,s=c*o,u=3*i*c,d=3*l*o,h=l*i;return e[0]=t[0]*s+n[0]*u+r[0]*d+a[0]*h,e[1]=t[1]*s+n[1]*u+r[1]*d+a[1]*h,e[2]=t[2]*s+n[2]*u+r[2]*d+a[2]*h,e}function ct(e,t){t=t||1;var n=2*l()*Math.PI,r=2*l()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}function lt(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,e[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,e[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,e}function st(e,t,n){var r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e}function ut(e,t,n){var r=n[0],a=n[1],i=n[2],o=n[3],c=t[0],l=t[1],s=t[2],u=a*s-i*l,d=i*c-r*s,h=r*l-a*c,f=a*h-i*d,p=i*u-r*h,m=r*d-a*u,y=2*o;return u*=y,d*=y,h*=y,f*=2,p*=2,m*=2,e[0]=c+u+f,e[1]=l+d+p,e[2]=s+h+m,e}function dt(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function ht(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function ft(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function pt(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],o=t[1],c=t[2],l=Math.sqrt(n*n+r*r+a*a)*Math.sqrt(i*i+o*o+c*c),s=l&&nt(e,t)/l;return Math.acos(Math.min(Math.max(s,-1),1))}function mt(e){return e[0]=0,e[1]=0,e[2]=0,e}function yt(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function gt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function vt(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],c=t[1],l=t[2];return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-c)<=o*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-l)<=o*Math.max(1,Math.abs(a),Math.abs(l))}var bt=ze,xt=Fe,kt=Ye,wt=Ke,Ct=Qe,Et=De,Ot=Je,Pt=function(){var e=Be();return function(t,n,r,a,i,o){var c,l;for(n||(n=3),r||(r=0),l=a?Math.min(a*n+r,t.length):t.length,c=r;c<l;c+=n)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],i(e,e,o),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2];return t}}()},697:function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;this.queue=[],this.cache=null}r.prototype.matrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]||(this.cache=null,this.queue.push(e)),this},r.prototype.translate=function(e,t){return 0===e&&0===t||(this.cache=null,this.queue.push([1,0,0,1,e,t])),this},r.prototype.scale=function(e,t){return 1===e&&1===t||(this.cache=null,this.queue.push([e,0,0,t,0,0])),this},r.prototype.rotate=function(e,t,n){var r,a,i;return 0!==e&&(this.translate(t,n),r=e*Math.PI/180,a=Math.cos(r),i=Math.sin(r),this.queue.push([a,i,-i,a,0,0]),this.cache=null,this.translate(-t,-n)),this},r.prototype.skewX=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this},r.prototype.skewY=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this},r.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=(t=this.cache,n=this.queue[e],[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]);var t,n;return this.cache},r.prototype.calc=function(e,t,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[e*(r=this.cache)[0]+t*r[2]+(n?0:r[4]),e*r[1]+t*r[3]+(n?0:r[5])]):[e,t]},e.exports=r},716:function(e,t,n){"use strict";e.exports=n(1084)},84:function(e,t,n){"use strict";n(423);var r=n(168),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(59),s=n.n(l),u=n(10),d=n.n(u);n(175);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(l){c=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=i.a.forwardRef((function(e,t){var n=e.className,o=e.overlayClassName,c=e.type,l=e.noArrow,s=e.hideWhenInactive,u=e.content,h=y(Object(a.useState)(e.visible||e.defaultVisible),2),f=h[0],p=h[1];Object(a.useEffect)((function(){"visible"in e&&p(e.visible)}),[e.visible]);var g=function(t){"visible"in e||p(t),e.onVisibleChange&&e.onVisibleChange(t)};return i.a.createElement(r.a,m({},e,{className:d()(n,"larkui-popover-trigger"),overlayClassName:d()(o,{"larkui-popover":!0,"larkui-popover-menu":"menu"===c,"larkui-popover-no-arrow":l}),content:s?i.a.createElement("div",{onClick:function(){g(!1)}},u):u,ref:t,visible:f,onVisibleChange:g}))}));v.propTypes=f(f({},r.a.PopoverProps),{},{type:c.a.oneOf(["menu"]),content:c.a.node,children:c.a.node,className:c.a.string,overlayClassName:c.a.string,noArrow:c.a.bool,hideWhenInactive:c.a.bool}),s()(v,r.a),t.a=v},864:function(e,t,n){"use strict";var r=n(185),a=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(155)),o=r(n(0)),c=a(n(865)),l=a(n(264)),s=function(e,t){return o.createElement(l.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="CheckOutlined";var u=o.forwardRef(s);t.default=u},865:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},866:function(e,t,n){"use strict";var r=n(185),a=n(123);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(155)),o=r(n(0)),c=a(n(867)),l=a(n(264)),s=function(e,t){return o.createElement(l.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:c.default}))};s.displayName="DownOutlined";var u=o.forwardRef(s);t.default=u},867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"}},868:function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},869:function(e,t,n){const r=n(272),a=n(436),i=n(870),o=n(871),c=n(872),l=n(873),s=n(874),u=n(569),d=n(875),h=n(878),f=n(879),p=n(273),m=n(880);function y(e,t,n){const r=e.size,a=f.getEncodedBits(t,n);let i,o;for(i=0;i<15;i++)o=1==(a>>i&1),i<6?e.set(i,8,o,!0):i<8?e.set(i+1,8,o,!0):e.set(r-15+i,8,o,!0),i<8?e.set(8,r-i-1,o,!0):i<9?e.set(8,15-i-1+1,o,!0):e.set(8,15-i-1,o,!0);e.set(r-8,8,1,!0)}function g(e,t,n){const a=new i;n.forEach((function(t){a.put(t.mode.bit,4),a.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(a)}));const o=8*(r.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(a.getLengthInBits()+4<=o&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);const c=(o-a.getLengthInBits())/8;for(let r=0;r<c;r++)a.put(r%2?17:236,8);return function(e,t,n){const a=r.getSymbolTotalCodewords(t),i=u.getTotalCodewordsCount(t,n),o=a-i,c=u.getBlocksCount(t,n),l=c-a%c,s=Math.floor(a/c),h=Math.floor(o/c),f=h+1,p=s-h,m=new d(p);let y=0;const g=new Array(c),v=new Array(c);let b=0;const x=new Uint8Array(e.buffer);for(let r=0;r<c;r++){const e=r<l?h:f;g[r]=x.slice(y,y+e),v[r]=m.encode(g[r]),y+=e,b=Math.max(b,e)}const k=new Uint8Array(a);let w,C,E=0;for(w=0;w<b;w++)for(C=0;C<c;C++)w<g[C].length&&(k[E++]=g[C][w]);for(w=0;w<p;w++)for(C=0;C<c;C++)k[E++]=v[C][w];return k}(a,e,t)}function v(e,t,n,a){let i;if(Array.isArray(e))i=m.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=m.rawSplit(e);r=h.getBestVersionForData(t,n)}i=m.fromString(e,r||40)}}const u=h.getBestVersionForData(i,n);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<u)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+u+".\n")}else t=u;const d=g(t,n,i),f=r.getSymbolSize(t),p=new o(f);return function(e,t){const n=e.size,r=l.getPositions(t);for(let a=0;a<r.length;a++){const t=r[a][0],i=r[a][1];for(let r=-1;r<=7;r++)if(!(t+r<=-1||n<=t+r))for(let a=-1;a<=7;a++)i+a<=-1||n<=i+a||(r>=0&&r<=6&&(0===a||6===a)||a>=0&&a<=6&&(0===r||6===r)||r>=2&&r<=4&&a>=2&&a<=4?e.set(t+r,i+a,!0,!0):e.set(t+r,i+a,!1,!0))}}(p,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(p),function(e,t){const n=c.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],a=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?e.set(t+n,a+r,!0,!0):e.set(t+n,a+r,!1,!0)}}(p,t),y(p,n,0),t>=7&&function(e,t){const n=e.size,r=h.getEncodedBits(t);let a,i,o;for(let c=0;c<18;c++)a=Math.floor(c/3),i=c%3+n-8-3,o=1==(r>>c&1),e.set(a,i,o,!0),e.set(i,a,o,!0)}(p,t),function(e,t){const n=e.size;let r=-1,a=n-1,i=7,o=0;for(let c=n-1;c>0;c-=2)for(6===c&&c--;;){for(let n=0;n<2;n++)if(!e.isReserved(a,c-n)){let r=!1;o<t.length&&(r=1==(t[o]>>>i&1)),e.set(a,c-n,r),i--,-1===i&&(o++,i=7)}if(a+=r,a<0||n<=a){a-=r,r=-r;break}}}(p,d),isNaN(a)&&(a=s.getBestMask(p,y.bind(null,p,n))),s.applyMask(a,p),y(p,n,a),{modules:p,version:t,errorCorrectionLevel:n,maskPattern:a,segments:i}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let n,i,o=a.M;return void 0!==t&&(o=a.from(t.errorCorrectionLevel,a.M),n=h.from(t.version),i=s.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),v(e,n,o,i)}},870:function(e,t){function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=n},871:function(e,t){function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}n.prototype.set=function(e,t,n,r){const a=e*this.size+t;this.data[a]=n,r&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=n},872:function(e,t,n){const r=n(272).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=r(e),a=145===n?26:2*Math.ceil((n-13)/(2*t-2)),i=[n-7];for(let r=1;r<t-1;r++)i[r]=i[r-1]-a;return i.push(6),i.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),a=r.length;for(let t=0;t<a;t++)for(let e=0;e<a;e++)0===t&&0===e||0===t&&e===a-1||t===a-1&&0===e||n.push([r[t],r[e]]);return n}},873:function(e,t,n){const r=n(272).getSymbolSize;t.getPositions=function(e){const t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},874:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n=3,r=3,a=40,i=10;function o(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let r=0,a=0,i=0,o=null,c=null;for(let l=0;l<t;l++){a=i=0,o=c=null;for(let s=0;s<t;s++){let t=e.get(l,s);t===o?a++:(a>=5&&(r+=n+(a-5)),o=t,a=1),t=e.get(s,l),t===c?i++:(i>=5&&(r+=n+(i-5)),c=t,i=1)}a>=5&&(r+=n+(a-5)),i>=5&&(r+=n+(i-5))}return r},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let r=0;r<t-1;r++)for(let a=0;a<t-1;a++){const t=e.get(r,a)+e.get(r,a+1)+e.get(r+1,a)+e.get(r+1,a+1);4!==t&&0!==t||n++}return n*r},t.getPenaltyN3=function(e){const t=e.size;let n=0,r=0,i=0;for(let a=0;a<t;a++){r=i=0;for(let o=0;o<t;o++)r=r<<1&2047|e.get(a,o),o>=10&&(1488===r||93===r)&&n++,i=i<<1&2047|e.get(o,a),o>=10&&(1488===i||93===i)&&n++}return n*a},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*i},t.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let a=0;a<n;a++)t.isReserved(a,r)||t.xor(a,r,o(e,a,r))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let a=0,i=1/0;for(let o=0;o<r;o++){n(o),t.applyMask(o,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),r<i&&(i=r,a=o)}return a}},875:function(e,t,n){const r=n(876);function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=r.mod(t,this.genPoly),a=this.degree-n.length;if(a>0){const e=new Uint8Array(this.degree);return e.set(n,a),e}return n},e.exports=a},876:function(e,t,n){const r=n(877);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let a=0;a<e.length;a++)for(let i=0;i<t.length;i++)n[a+i]^=r.mul(e[a],t[i]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let i=0;i<t.length;i++)n[i]^=r.mul(t[i],e);let a=0;for(;a<n.length&&0===n[a];)a++;n=n.slice(a)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let a=0;a<e;a++)n=t.mul(n,new Uint8Array([1,r.exp(a)]));return n}},877:function(e,t){const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},878:function(e,t,n){const r=n(272),a=n(569),i=n(436),o=n(273),c=n(570),l=r.getBCHDigit(7973);function s(e,t){return o.getCharCountIndicator(e,t)+4}function u(e,t){let n=0;return e.forEach((function(e){const r=s(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return c.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!c.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=o.BYTE);const i=8*(r.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t));if(n===o.MIXED)return i;const l=i-s(n,e);switch(n){case o.NUMERIC:return Math.floor(l/10*3);case o.ALPHANUMERIC:return Math.floor(l/11*2);case o.KANJI:return Math.floor(l/13);case o.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){let r;const a=i.from(n,i.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(u(e,r)<=t.getCapacity(r,n,o.MIXED))return r}(e,a);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(let a=1;a<=40;a++)if(n<=t.getCapacity(a,r,e))return a}(r.mode,r.getLength(),a)},t.getEncodedBits=function(e){if(!c.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}},879:function(e,t,n){const r=n(272),a=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let i=n<<10;for(;r.getBCHDigit(i)-a>=0;)i^=1335<<r.getBCHDigit(i)-a;return 21522^(n<<10|i)}},880:function(e,t,n){const r=n(273),a=n(881),i=n(882),o=n(883),c=n(885),l=n(571),s=n(272),u=n(886);function d(e){return unescape(encodeURIComponent(e)).length}function h(e,t,n){const r=[];let a;for(;null!==(a=e.exec(n));)r.push({data:a[0],index:a.index,mode:t,length:a[0].length});return r}function f(e){const t=h(l.NUMERIC,r.NUMERIC,e),n=h(l.ALPHANUMERIC,r.ALPHANUMERIC,e);let a,i;s.isKanjiModeEnabled()?(a=h(l.BYTE,r.BYTE,e),i=h(l.KANJI,r.KANJI,e)):(a=h(l.BYTE_KANJI,r.BYTE,e),i=[]);return t.concat(n,a,i).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function p(e,t){switch(t){case r.NUMERIC:return a.getBitsLength(e);case r.ALPHANUMERIC:return i.getBitsLength(e);case r.KANJI:return c.getBitsLength(e);case r.BYTE:return o.getBitsLength(e)}}function m(e,t){let n;const l=r.getBestModeForData(e);if(n=r.from(t,l),n!==r.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n!==r.KANJI||s.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new a(e);case r.ALPHANUMERIC:return new i(e);case r.KANJI:return new c(e);case r.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,n){const a=function(e){const t=[];for(let n=0;n<e.length;n++){const a=e[n];switch(a.mode){case r.NUMERIC:t.push([a,{data:a.data,mode:r.ALPHANUMERIC,length:a.length},{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.ALPHANUMERIC:t.push([a,{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.KANJI:t.push([a,{data:a.data,mode:r.BYTE,length:d(a.data)}]);break;case r.BYTE:t.push([{data:a.data,mode:r.BYTE,length:d(a.data)}])}}return t}(f(e,s.isKanjiModeEnabled())),i=function(e,t){const n={},a={start:{}};let i=["start"];for(let o=0;o<e.length;o++){const c=e[o],l=[];for(let e=0;e<c.length;e++){const s=c[e],u=""+o+e;l.push(u),n[u]={node:s,lastCount:0},a[u]={};for(let e=0;e<i.length;e++){const o=i[e];n[o]&&n[o].node.mode===s.mode?(a[o][u]=p(n[o].lastCount+s.length,s.mode)-p(n[o].lastCount,s.mode),n[o].lastCount+=s.length):(n[o]&&(n[o].lastCount=s.length),a[o][u]=p(s.length,s.mode)+4+r.getCharCountIndicator(s.mode,t))}}i=l}for(let r=0;r<i.length;r++)a[i[r]].end=0;return{map:a,table:n}}(a,n),o=u.find_path(i.map,"start","end"),c=[];for(let t=1;t<o.length-1;t++)c.push(i.table[o[t]].node);return t.fromArray(function(e){return e.reduce((function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(c))},t.rawSplit=function(e){return t.fromArray(f(e,s.isKanjiModeEnabled()))}},881:function(e,t,n){const r=n(273);function a(e){this.mode=r.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const a=this.data.length-t;a>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*a+1))},e.exports=a},882:function(e,t,n){const r=n(273),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=r.ALPHANUMERIC,this.data=e}i.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*a.indexOf(this.data[t]);n+=a.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=i},883:function(e,t,n){const r=n(884),a=n(273);function i(e){this.mode=a.BYTE,"string"==typeof e&&(e=r(e)),this.data=new Uint8Array(e)}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=i},884:function(e,t,n){"use strict";e.exports=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);if(a>=55296&&a<=56319&&n>r+1){var i=e.charCodeAt(r+1);i>=56320&&i<=57343&&(a=1024*(a-55296)+i-56320+65536,r+=1)}a<128?t.push(a):a<2048?(t.push(a>>6|192),t.push(63&a|128)):a<55296||a>=57344&&a<65536?(t.push(a>>12|224),t.push(a>>6&63|128),t.push(63&a|128)):a>=65536&&a<=1114111?(t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(63&a|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},885:function(e,t,n){const r=n(273),a=n(272);function i(e){this.mode=r.KANJI,this.data=e}i.getBitsLength=function(e){return 13*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=a.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=i},886:function(e,t,n){"use strict";var r={single_source_shortest_paths:function(e,t,n){var a={},i={};i[t]=0;var o,c,l,s,u,d,h,f=r.PriorityQueue.make();for(f.push(t,0);!f.empty();)for(l in c=(o=f.pop()).value,s=o.cost,u=e[c]||{})u.hasOwnProperty(l)&&(d=s+u[l],h=i[l],(void 0===i[l]||h>d)&&(i[l]=d,f.push(l,d),a[l]=c));if(void 0!==n&&void 0===i[n]){var p=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(p)}return a},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var a=r.single_source_shortest_paths(e,t,n);return r.extract_shortest_path_from_predecessor_list(a,n)},PriorityQueue:{make:function(e){var t,n=r.PriorityQueue,a={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(a[t]=n[t]);return a.queue=[],a.sorter=e.sorter||n.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=r},887:function(e,t,n){const r=n(572);t.render=function(e,t,n){let a=n,i=t;void 0!==a||t&&t.getContext||(a=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),a=r.getOptions(a);const o=r.getImageWidth(e.modules.size,a),c=i.getContext("2d"),l=c.createImageData(o,o);return r.qrToImageData(l.data,e,a),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(c,i,o),c.putImageData(l,0,0),i},t.renderToDataURL=function(e,n,r){let a=r;void 0!==a||n&&n.getContext||(a=n,n=void 0),a||(a={});const i=t.render(e,n,a),o=a.type||"image/png",c=a.rendererOpts||{};return i.toDataURL(o,c.quality)}},888:function(e,t,n){const r=n(572);function a(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function i(e,t,n){let r=e+t;return void 0!==n&&(r+=" "+n),r}t.render=function(e,t,n){const o=r.getOptions(t),c=e.modules.size,l=e.modules.data,s=c+2*o.margin,u=o.color.light.a?"<path "+a(o.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",d="<path "+a(o.color.dark,"stroke")+' d="'+function(e,t,n){let r="",a=0,o=!1,c=0;for(let l=0;l<e.length;l++){const s=Math.floor(l%t),u=Math.floor(l/t);s||o||(o=!0),e[l]?(c++,l>0&&s>0&&e[l-1]||(r+=o?i("M",s+n,.5+u+n):i("m",a,0),a=0,o=!1),s+1<t&&e[l+1]||(r+=i("h",c),c=0)):a++}return r}(l,c,o.margin)+'"/>',h='viewBox="0 0 '+s+" "+s+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+h+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"==typeof n&&n(null,f),f}},891:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},902:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="DeleteOutlined";t.a=a.forwardRef(c)},928:function(e,t,n){"use strict";var r=n(11),a=n(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},o=n(27),c=function(e,t){return a.createElement(o.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:i}))};c.displayName="EllipsisOutlined";t.a=a.forwardRef(c)}}]);